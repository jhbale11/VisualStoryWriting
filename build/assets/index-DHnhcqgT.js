var J0e=Object.defineProperty;var q0e=(t,e,n)=>e in t?J0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mt=(t,e,n)=>q0e(t,typeof e!="symbol"?e+"":e,n);function BZ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function X0e(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var UZ={exports:{}},JV={},WZ={exports:{}},Lk={exports:{}};Lk.exports;(function(t,e){/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var n="18.3.1",r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),x=Symbol.iterator,S="@@iterator";function _(U){if(U===null||typeof U!="object")return null;var ie=x&&U[x]||U[S];return typeof ie=="function"?ie:null}var N={current:null},k={transition:null},P={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},O={current:null},A={},T=null;function L(U){T=U}A.setExtraStackFrame=function(U){T=U},A.getCurrentStack=null,A.getStackAddendum=function(){var U="";T&&(U+=T);var ie=A.getCurrentStack;return ie&&(U+=ie()||""),U};var B=!1,W=!1,Y=!1,V=!1,I=!1,H={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:k,ReactCurrentOwner:O};H.ReactDebugCurrentFrame=A,H.ReactCurrentActQueue=P;function q(U){{for(var ie=arguments.length,we=new Array(ie>1?ie-1:0),De=1;De<ie;De++)we[De-1]=arguments[De];J("warn",U,we)}}function F(U){{for(var ie=arguments.length,we=new Array(ie>1?ie-1:0),De=1;De<ie;De++)we[De-1]=arguments[De];J("error",U,we)}}function J(U,ie,we){{var De=H.ReactDebugCurrentFrame,Ue=De.getStackAddendum();Ue!==""&&(ie+="%s",we=we.concat([Ue]));var xt=we.map(function(st){return String(st)});xt.unshift("Warning: "+ie),Function.prototype.apply.call(console[U],console,xt)}}var Z={};function G(U,ie){{var we=U.constructor,De=we&&(we.displayName||we.name)||"ReactClass",Ue=De+"."+ie;if(Z[Ue])return;F("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",ie,De),Z[Ue]=!0}}var oe={isMounted:function(U){return!1},enqueueForceUpdate:function(U,ie,we){G(U,"forceUpdate")},enqueueReplaceState:function(U,ie,we,De){G(U,"replaceState")},enqueueSetState:function(U,ie,we,De){G(U,"setState")}},ae=Object.assign,te={};Object.freeze(te);function re(U,ie,we){this.props=U,this.context=ie,this.refs=te,this.updater=we||oe}re.prototype.isReactComponent={},re.prototype.setState=function(U,ie){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ie,"setState")},re.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};{var X={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},ce=function(U,ie){Object.defineProperty(re.prototype,U,{get:function(){q("%s(...) is deprecated in plain JavaScript React classes. %s",ie[0],ie[1])}})};for(var he in X)X.hasOwnProperty(he)&&ce(he,X[he])}function ve(){}ve.prototype=re.prototype;function Ne(U,ie,we){this.props=U,this.context=ie,this.refs=te,this.updater=we||oe}var ke=Ne.prototype=new ve;ke.constructor=Ne,ae(ke,re.prototype),ke.isPureReactComponent=!0;function Te(){var U={current:null};return Object.seal(U),U}var ye=Array.isArray;function Ie(U){return ye(U)}function Re(U){{var ie=typeof Symbol=="function"&&Symbol.toStringTag,we=ie&&U[Symbol.toStringTag]||U.constructor.name||"Object";return we}}function Ee(U){try{return $e(U),!1}catch{return!0}}function $e(U){return""+U}function He(U){if(Ee(U))return F("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Re(U)),$e(U)}function gt(U,ie,we){var De=U.displayName;if(De)return De;var Ue=ie.displayName||ie.name||"";return Ue!==""?we+"("+Ue+")":we}function Ye(U){return U.displayName||"Context"}function yt(U){if(U==null)return null;if(typeof U.tag=="number"&&F("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof U=="function")return U.displayName||U.name||null;if(typeof U=="string")return U;switch(U){case a:return"Fragment";case i:return"Portal";case o:return"Profiler";case s:return"StrictMode";case h:return"Suspense";case m:return"SuspenseList"}if(typeof U=="object")switch(U.$$typeof){case c:var ie=U;return Ye(ie)+".Consumer";case l:var we=U;return Ye(we._context)+".Provider";case f:return gt(U,U.render,"ForwardRef");case p:var De=U.displayName||null;return De!==null?De:yt(U.type)||"Memo";case v:{var Ue=U,xt=Ue._payload,st=Ue._init;try{return yt(st(xt))}catch{return null}}}return null}var _t=Object.prototype.hasOwnProperty,St={key:!0,ref:!0,__self:!0,__source:!0},Bt,Nt,Dt;Dt={};function Ae(U){if(_t.call(U,"ref")){var ie=Object.getOwnPropertyDescriptor(U,"ref").get;if(ie&&ie.isReactWarning)return!1}return U.ref!==void 0}function je(U){if(_t.call(U,"key")){var ie=Object.getOwnPropertyDescriptor(U,"key").get;if(ie&&ie.isReactWarning)return!1}return U.key!==void 0}function tt(U,ie){var we=function(){Bt||(Bt=!0,F("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ie))};we.isReactWarning=!0,Object.defineProperty(U,"key",{get:we,configurable:!0})}function Ot(U,ie){var we=function(){Nt||(Nt=!0,F("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ie))};we.isReactWarning=!0,Object.defineProperty(U,"ref",{get:we,configurable:!0})}function qe(U){if(typeof U.ref=="string"&&O.current&&U.__self&&O.current.stateNode!==U.__self){var ie=yt(O.current.type);Dt[ie]||(F('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ie,U.ref),Dt[ie]=!0)}}var ft=function(U,ie,we,De,Ue,xt,st){var Tt={$$typeof:r,type:U,key:ie,ref:we,props:st,_owner:xt};return Tt._store={},Object.defineProperty(Tt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Tt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:De}),Object.defineProperty(Tt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Ue}),Object.freeze&&(Object.freeze(Tt.props),Object.freeze(Tt)),Tt};function Wt(U,ie,we){var De,Ue={},xt=null,st=null,Tt=null,zt=null;if(ie!=null){Ae(ie)&&(st=ie.ref,qe(ie)),je(ie)&&(He(ie.key),xt=""+ie.key),Tt=ie.__self===void 0?null:ie.__self,zt=ie.__source===void 0?null:ie.__source;for(De in ie)_t.call(ie,De)&&!St.hasOwnProperty(De)&&(Ue[De]=ie[De])}var hn=arguments.length-2;if(hn===1)Ue.children=we;else if(hn>1){for(var Vn=Array(hn),Pn=0;Pn<hn;Pn++)Vn[Pn]=arguments[Pn+2];Object.freeze&&Object.freeze(Vn),Ue.children=Vn}if(U&&U.defaultProps){var un=U.defaultProps;for(De in un)Ue[De]===void 0&&(Ue[De]=un[De])}if(xt||st){var Gn=typeof U=="function"?U.displayName||U.name||"Unknown":U;xt&&tt(Ue,Gn),st&&Ot(Ue,Gn)}return ft(U,xt,st,Tt,zt,O.current,Ue)}function an(U,ie){var we=ft(U.type,ie,U.ref,U._self,U._source,U._owner,U.props);return we}function Un(U,ie,we){if(U==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var De,Ue=ae({},U.props),xt=U.key,st=U.ref,Tt=U._self,zt=U._source,hn=U._owner;if(ie!=null){Ae(ie)&&(st=ie.ref,hn=O.current),je(ie)&&(He(ie.key),xt=""+ie.key);var Vn;U.type&&U.type.defaultProps&&(Vn=U.type.defaultProps);for(De in ie)_t.call(ie,De)&&!St.hasOwnProperty(De)&&(ie[De]===void 0&&Vn!==void 0?Ue[De]=Vn[De]:Ue[De]=ie[De])}var Pn=arguments.length-2;if(Pn===1)Ue.children=we;else if(Pn>1){for(var un=Array(Pn),Gn=0;Gn<Pn;Gn++)un[Gn]=arguments[Gn+2];Ue.children=un}return ft(U.type,xt,st,Tt,zt,hn,Ue)}function pn(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}var ln=".",Gt=":";function Kt(U){var ie=/[=:]/g,we={"=":"=0",":":"=2"},De=U.replace(ie,function(Ue){return we[Ue]});return"$"+De}var Lt=!1,In=/\/+/g;function Tn(U){return U.replace(In,"$&/")}function Wr(U,ie){return typeof U=="object"&&U!==null&&U.key!=null?(He(U.key),Kt(""+U.key)):ie.toString(36)}function Mr(U,ie,we,De,Ue){var xt=typeof U;(xt==="undefined"||xt==="boolean")&&(U=null);var st=!1;if(U===null)st=!0;else switch(xt){case"string":case"number":st=!0;break;case"object":switch(U.$$typeof){case r:case i:st=!0}}if(st){var Tt=U,zt=Ue(Tt),hn=De===""?ln+Wr(Tt,0):De;if(Ie(zt)){var Vn="";hn!=null&&(Vn=Tn(hn)+"/"),Mr(zt,ie,Vn,"",function(th){return th})}else zt!=null&&(pn(zt)&&(zt.key&&(!Tt||Tt.key!==zt.key)&&He(zt.key),zt=an(zt,we+(zt.key&&(!Tt||Tt.key!==zt.key)?Tn(""+zt.key)+"/":"")+hn)),ie.push(zt));return 1}var Pn,un,Gn=0,ur=De===""?ln:De+Gt;if(Ie(U))for(var Ys=0;Ys<U.length;Ys++)Pn=U[Ys],un=ur+Wr(Pn,Ys),Gn+=Mr(Pn,ie,we,un,Ue);else{var Il=_(U);if(typeof Il=="function"){var bs=U;Il===bs.entries&&(Lt||q("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Lt=!0);for(var Nc=Il.call(bs),Cu,Bd=0;!(Cu=Nc.next()).done;)Pn=Cu.value,un=ur+Wr(Pn,Bd++),Gn+=Mr(Pn,ie,we,un,Ue)}else if(xt==="object"){var _c=String(U);throw new Error("Objects are not valid as a React child (found: "+(_c==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":_c)+"). If you meant to render a collection of children, use an array instead.")}}return Gn}function Hr(U,ie,we){if(U==null)return U;var De=[],Ue=0;return Mr(U,De,"","",function(xt){return ie.call(we,xt,Ue++)}),De}function Ii(U){var ie=0;return Hr(U,function(){ie++}),ie}function Wi(U,ie,we){Hr(U,function(){ie.apply(this,arguments)},we)}function Mi(U){return Hr(U,function(ie){return ie})||[]}function zi(U){if(!pn(U))throw new Error("React.Children.only expected to receive a single React element child.");return U}function xr(U){var ie={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};ie.Provider={$$typeof:l,_context:ie};var we=!1,De=!1,Ue=!1;{var xt={$$typeof:c,_context:ie};Object.defineProperties(xt,{Provider:{get:function(){return De||(De=!0,F("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),ie.Provider},set:function(st){ie.Provider=st}},_currentValue:{get:function(){return ie._currentValue},set:function(st){ie._currentValue=st}},_currentValue2:{get:function(){return ie._currentValue2},set:function(st){ie._currentValue2=st}},_threadCount:{get:function(){return ie._threadCount},set:function(st){ie._threadCount=st}},Consumer:{get:function(){return we||(we=!0,F("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),ie.Consumer}},displayName:{get:function(){return ie.displayName},set:function(st){Ue||(q("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",st),Ue=!0)}}}),ie.Consumer=xt}return ie._currentRenderer=null,ie._currentRenderer2=null,ie}var Vr=-1,$r=0,qt=1,Zn=2;function ea(U){if(U._status===Vr){var ie=U._result,we=ie();if(we.then(function(xt){if(U._status===$r||U._status===Vr){var st=U;st._status=qt,st._result=xt}},function(xt){if(U._status===$r||U._status===Vr){var st=U;st._status=Zn,st._result=xt}}),U._status===Vr){var De=U;De._status=$r,De._result=we}}if(U._status===qt){var Ue=U._result;return Ue===void 0&&F(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,Ue),"default"in Ue||F(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,Ue),Ue.default}else throw U._result}function ue(U){var ie={_status:Vr,_result:U},we={$$typeof:v,_payload:ie,_init:ea};{var De,Ue;Object.defineProperties(we,{defaultProps:{configurable:!0,get:function(){return De},set:function(xt){F("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),De=xt,Object.defineProperty(we,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return Ue},set:function(xt){F("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Ue=xt,Object.defineProperty(we,"propTypes",{enumerable:!0})}}})}return we}function xe(U){U!=null&&U.$$typeof===p?F("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof U!="function"?F("forwardRef requires a render function but was given %s.",U===null?"null":typeof U):U.length!==0&&U.length!==2&&F("forwardRef render functions accept exactly two parameters: props and ref. %s",U.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),U!=null&&(U.defaultProps!=null||U.propTypes!=null)&&F("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var ie={$$typeof:f,render:U};{var we;Object.defineProperty(ie,"displayName",{enumerable:!1,configurable:!0,get:function(){return we},set:function(De){we=De,!U.name&&!U.displayName&&(U.displayName=De)}})}return ie}var ne;ne=Symbol.for("react.module.reference");function _e(U){return!!(typeof U=="string"||typeof U=="function"||U===a||U===o||I||U===s||U===h||U===m||V||U===y||B||W||Y||typeof U=="object"&&U!==null&&(U.$$typeof===v||U.$$typeof===p||U.$$typeof===l||U.$$typeof===c||U.$$typeof===f||U.$$typeof===ne||U.getModuleId!==void 0))}function Be(U,ie){_e(U)||F("memo: The first argument must be a component. Instead received: %s",U===null?"null":typeof U);var we={$$typeof:p,type:U,compare:ie===void 0?null:ie};{var De;Object.defineProperty(we,"displayName",{enumerable:!1,configurable:!0,get:function(){return De},set:function(Ue){De=Ue,!U.name&&!U.displayName&&(U.displayName=Ue)}})}return we}function Le(){var U=N.current;return U===null&&F(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),U}function Ze(U){var ie=Le();if(U._context!==void 0){var we=U._context;we.Consumer===U?F("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):we.Provider===U&&F("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return ie.useContext(U)}function We(U){var ie=Le();return ie.useState(U)}function wt(U,ie,we){var De=Le();return De.useReducer(U,ie,we)}function ht(U){var ie=Le();return ie.useRef(U)}function Pt(U,ie){var we=Le();return we.useEffect(U,ie)}function Ut(U,ie){var we=Le();return we.useInsertionEffect(U,ie)}function Zt(U,ie){var we=Le();return we.useLayoutEffect(U,ie)}function sn(U,ie){var we=Le();return we.useCallback(U,ie)}function cn(U,ie){var we=Le();return we.useMemo(U,ie)}function hr(U,ie,we){var De=Le();return De.useImperativeHandle(U,ie,we)}function Dn(U,ie){{var we=Le();return we.useDebugValue(U,ie)}}function gn(){var U=Le();return U.useTransition()}function Gr(U){var ie=Le();return ie.useDeferredValue(U)}function xi(){var U=Le();return U.useId()}function ta(U,ie,we){var De=Le();return De.useSyncExternalStore(U,ie,we)}var si=0,oi,la,li,xa,Mn,Cr,Lr;function er(){}er.__reactDisabledLog=!0;function ei(){{if(si===0){oi=console.log,la=console.info,li=console.warn,xa=console.error,Mn=console.group,Cr=console.groupCollapsed,Lr=console.groupEnd;var U={configurable:!0,enumerable:!0,value:er,writable:!0};Object.defineProperties(console,{info:U,log:U,warn:U,error:U,group:U,groupCollapsed:U,groupEnd:U})}si++}}function Hi(){{if(si--,si===0){var U={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ae({},U,{value:oi}),info:ae({},U,{value:la}),warn:ae({},U,{value:li}),error:ae({},U,{value:xa}),group:ae({},U,{value:Mn}),groupCollapsed:ae({},U,{value:Cr}),groupEnd:ae({},U,{value:Lr})})}si<0&&F("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Fr=H.ReactCurrentDispatcher,Si;function vs(U,ie,we){{if(Si===void 0)try{throw Error()}catch(Ue){var De=Ue.stack.trim().match(/\n( *(at )?)/);Si=De&&De[1]||""}return`
`+Si+U}}var Qa=!1,Hs;{var Al=typeof WeakMap=="function"?WeakMap:Map;Hs=new Al}function Su(U,ie){if(!U||Qa)return"";{var we=Hs.get(U);if(we!==void 0)return we}var De;Qa=!0;var Ue=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var xt;xt=Fr.current,Fr.current=null,ei();try{if(ie){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(ur){De=ur}Reflect.construct(U,[],st)}else{try{st.call()}catch(ur){De=ur}U.call(st.prototype)}}else{try{throw Error()}catch(ur){De=ur}U()}}catch(ur){if(ur&&De&&typeof ur.stack=="string"){for(var Tt=ur.stack.split(`
`),zt=De.stack.split(`
`),hn=Tt.length-1,Vn=zt.length-1;hn>=1&&Vn>=0&&Tt[hn]!==zt[Vn];)Vn--;for(;hn>=1&&Vn>=0;hn--,Vn--)if(Tt[hn]!==zt[Vn]){if(hn!==1||Vn!==1)do if(hn--,Vn--,Vn<0||Tt[hn]!==zt[Vn]){var Pn=`
`+Tt[hn].replace(" at new "," at ");return U.displayName&&Pn.includes("<anonymous>")&&(Pn=Pn.replace("<anonymous>",U.displayName)),typeof U=="function"&&Hs.set(U,Pn),Pn}while(hn>=1&&Vn>=0);break}}}finally{Qa=!1,Fr.current=xt,Hi(),Error.prepareStackTrace=Ue}var un=U?U.displayName||U.name:"",Gn=un?vs(un):"";return typeof U=="function"&&Hs.set(U,Gn),Gn}function Rl(U,ie,we){return Su(U,!1)}function ys(U){var ie=U.prototype;return!!(ie&&ie.isReactComponent)}function na(U,ie,we){if(U==null)return"";if(typeof U=="function")return Su(U,ys(U));if(typeof U=="string")return vs(U);switch(U){case h:return vs("Suspense");case m:return vs("SuspenseList")}if(typeof U=="object")switch(U.$$typeof){case f:return Rl(U.render);case p:return na(U.type,ie,we);case v:{var De=U,Ue=De._payload,xt=De._init;try{return na(xt(Ue),ie,we)}catch{}}}return""}var es={},Go=H.ReactDebugCurrentFrame;function $n(U){if(U){var ie=U._owner,we=na(U.type,U._source,ie?ie.type:null);Go.setExtraStackFrame(we)}else Go.setExtraStackFrame(null)}function Gs(U,ie,we,De,Ue){{var xt=Function.call.bind(_t);for(var st in U)if(xt(U,st)){var Tt=void 0;try{if(typeof U[st]!="function"){var zt=Error((De||"React class")+": "+we+" type `"+st+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof U[st]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw zt.name="Invariant Violation",zt}Tt=U[st](ie,st,De,we,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(hn){Tt=hn}Tt&&!(Tt instanceof Error)&&($n(Ue),F("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",De||"React class",we,st,typeof Tt),$n(null)),Tt instanceof Error&&!(Tt.message in es)&&(es[Tt.message]=!0,$n(Ue),F("Failed %s type: %s",we,Tt.message),$n(null))}}}function Gi(U){if(U){var ie=U._owner,we=na(U.type,U._source,ie?ie.type:null);L(we)}else L(null)}var kn;kn=!1;function Ol(){if(O.current){var U=yt(O.current.type);if(U)return`

Check the render method of \``+U+"`."}return""}function ra(U){if(U!==void 0){var ie=U.fileName.replace(/^.*[\\\/]/,""),we=U.lineNumber;return`

Check your code at `+ie+":"+we+"."}return""}function Ko(U){return U!=null?ra(U.__source):""}var Ks={};function $d(U){var ie=Ol();if(!ie){var we=typeof U=="string"?U:U.displayName||U.name;we&&(ie=`

Check the top-level render call using <`+we+">.")}return ie}function mi(U,ie){if(!(!U._store||U._store.validated||U.key!=null)){U._store.validated=!0;var we=$d(ie);if(!Ks[we]){Ks[we]=!0;var De="";U&&U._owner&&U._owner!==O.current&&(De=" It was passed a child from "+yt(U._owner.type)+"."),Gi(U),F('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',we,De),Gi(null)}}}function Kr(U,ie){if(typeof U=="object"){if(Ie(U))for(var we=0;we<U.length;we++){var De=U[we];pn(De)&&mi(De,ie)}else if(pn(U))U._store&&(U._store.validated=!0);else if(U){var Ue=_(U);if(typeof Ue=="function"&&Ue!==U.entries)for(var xt=Ue.call(U),st;!(st=xt.next()).done;)pn(st.value)&&mi(st.value,ie)}}}function Yo(U){{var ie=U.type;if(ie==null||typeof ie=="string")return;var we;if(typeof ie=="function")we=ie.propTypes;else if(typeof ie=="object"&&(ie.$$typeof===f||ie.$$typeof===p))we=ie.propTypes;else return;if(we){var De=yt(ie);Gs(we,U.props,"prop",De,U)}else if(ie.PropTypes!==void 0&&!kn){kn=!0;var Ue=yt(ie);F("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Ue||"Unknown")}typeof ie.getDefaultProps=="function"&&!ie.getDefaultProps.isReactClassApproved&&F("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ts(U){{for(var ie=Object.keys(U.props),we=0;we<ie.length;we++){var De=ie[we];if(De!=="children"&&De!=="key"){Gi(U),F("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",De),Gi(null);break}}U.ref!==null&&(Gi(U),F("Invalid attribute `ref` supplied to `React.Fragment`."),Gi(null))}}function ia(U,ie,we){var De=_e(U);if(!De){var Ue="";(U===void 0||typeof U=="object"&&U!==null&&Object.keys(U).length===0)&&(Ue+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var xt=Ko(ie);xt?Ue+=xt:Ue+=Ol();var st;U===null?st="null":Ie(U)?st="array":U!==void 0&&U.$$typeof===r?(st="<"+(yt(U.type)||"Unknown")+" />",Ue=" Did you accidentally export a JSX literal instead of a component?"):st=typeof U,F("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",st,Ue)}var Tt=Wt.apply(this,arguments);if(Tt==null)return Tt;if(De)for(var zt=2;zt<arguments.length;zt++)Kr(arguments[zt],U);return U===a?ts(Tt):Yo(Tt),Tt}var ua=!1;function ns(U){var ie=ia.bind(null,U);return ie.type=U,ua||(ua=!0,q("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(ie,"type",{enumerable:!1,get:function(){return q("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:U}),U}}),ie}function Sc(U,ie,we){for(var De=Un.apply(this,arguments),Ue=2;Ue<arguments.length;Ue++)Kr(arguments[Ue],De.type);return Yo(De),De}function Ld(U,ie){var we=k.transition;k.transition={};var De=k.transition;k.transition._updatedFibers=new Set;try{U()}finally{if(k.transition=we,we===null&&De._updatedFibers){var Ue=De._updatedFibers.size;Ue>10&&q("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),De._updatedFibers.clear()}}}var Eu=!1,go=null;function eh(U){if(go===null)try{var ie=("require"+Math.random()).slice(0,7),we=t&&t[ie];go=we.call(t,"timers").setImmediate}catch{go=function(Ue){Eu===!1&&(Eu=!0,typeof MessageChannel>"u"&&F("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var xt=new MessageChannel;xt.port1.onmessage=Ue,xt.port2.postMessage(void 0)}}return go(U)}var ca=0,Jo=!1;function jl(U){{var ie=ca;ca++,P.current===null&&(P.current=[]);var we=P.isBatchingLegacy,De;try{if(P.isBatchingLegacy=!0,De=U(),!we&&P.didScheduleLegacyUpdate){var Ue=P.current;Ue!==null&&(P.didScheduleLegacyUpdate=!1,Ki(Ue))}}catch(un){throw rs(ie),un}finally{P.isBatchingLegacy=we}if(De!==null&&typeof De=="object"&&typeof De.then=="function"){var xt=De,st=!1,Tt={then:function(un,Gn){st=!0,xt.then(function(ur){rs(ie),ca===0?qo(ur,un,Gn):un(ur)},function(ur){rs(ie),Gn(ur)})}};return!Jo&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){st||(Jo=!0,F("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),Tt}else{var zt=De;if(rs(ie),ca===0){var hn=P.current;hn!==null&&(Ki(hn),P.current=null);var Vn={then:function(un,Gn){P.current===null?(P.current=[],qo(zt,un,Gn)):un(zt)}};return Vn}else{var Pn={then:function(un,Gn){un(zt)}};return Pn}}}}function rs(U){U!==ca-1&&F("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),ca=U}function qo(U,ie,we){{var De=P.current;if(De!==null)try{Ki(De),eh(function(){De.length===0?(P.current=null,ie(U)):qo(U,ie,we)})}catch(Ue){we(Ue)}else ie(U)}}var vo=!1;function Ki(U){if(!vo){vo=!0;var ie=0;try{for(;ie<U.length;ie++){var we=U[ie];do we=we(!0);while(we!==null)}U.length=0}catch(De){throw U=U.slice(ie+1),De}finally{vo=!1}}}var Fd=ia,Nu=Sc,Ec=ns,_u={map:Hr,forEach:Wi,count:Ii,toArray:Mi,only:zi};e.Children=_u,e.Component=re,e.Fragment=a,e.Profiler=o,e.PureComponent=Ne,e.StrictMode=s,e.Suspense=h,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,e.act=jl,e.cloneElement=Nu,e.createContext=xr,e.createElement=Fd,e.createFactory=Ec,e.createRef=Te,e.forwardRef=xe,e.isValidElement=pn,e.lazy=ue,e.memo=Be,e.startTransition=Ld,e.unstable_act=jl,e.useCallback=sn,e.useContext=Ze,e.useDebugValue=Dn,e.useDeferredValue=Gr,e.useEffect=Pt,e.useId=xi,e.useImperativeHandle=hr,e.useInsertionEffect=Ut,e.useLayoutEffect=Zt,e.useMemo=cn,e.useReducer=wt,e.useRef=ht,e.useState=We,e.useSyncExternalStore=ta,e.useTransition=gn,e.version=n,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(Lk,Lk.exports);var Z0e=Lk.exports;WZ.exports=Z0e;var R=WZ.exports;const it=gc(R),Q0e=BZ({__proto__:null,default:it},[R]);/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=R,e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),v=Symbol.iterator,y="@@iterator";function x(ue){if(ue===null||typeof ue!="object")return null;var xe=v&&ue[v]||ue[y];return typeof xe=="function"?xe:null}var S=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function _(ue){{for(var xe=arguments.length,ne=new Array(xe>1?xe-1:0),_e=1;_e<xe;_e++)ne[_e-1]=arguments[_e];N("error",ue,ne)}}function N(ue,xe,ne){{var _e=S.ReactDebugCurrentFrame,Be=_e.getStackAddendum();Be!==""&&(xe+="%s",ne=ne.concat([Be]));var Le=ne.map(function(Ze){return String(Ze)});Le.unshift("Warning: "+xe),Function.prototype.apply.call(console[ue],console,Le)}}var k=!1,P=!1,O=!1,A=!1,T=!1,L;L=Symbol.for("react.module.reference");function B(ue){return!!(typeof ue=="string"||typeof ue=="function"||ue===r||ue===a||T||ue===i||ue===c||ue===f||A||ue===p||k||P||O||typeof ue=="object"&&ue!==null&&(ue.$$typeof===m||ue.$$typeof===h||ue.$$typeof===s||ue.$$typeof===o||ue.$$typeof===l||ue.$$typeof===L||ue.getModuleId!==void 0))}function W(ue,xe,ne){var _e=ue.displayName;if(_e)return _e;var Be=xe.displayName||xe.name||"";return Be!==""?ne+"("+Be+")":ne}function Y(ue){return ue.displayName||"Context"}function V(ue){if(ue==null)return null;if(typeof ue.tag=="number"&&_("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof ue=="function")return ue.displayName||ue.name||null;if(typeof ue=="string")return ue;switch(ue){case r:return"Fragment";case n:return"Portal";case a:return"Profiler";case i:return"StrictMode";case c:return"Suspense";case f:return"SuspenseList"}if(typeof ue=="object")switch(ue.$$typeof){case o:var xe=ue;return Y(xe)+".Consumer";case s:var ne=ue;return Y(ne._context)+".Provider";case l:return W(ue,ue.render,"ForwardRef");case h:var _e=ue.displayName||null;return _e!==null?_e:V(ue.type)||"Memo";case m:{var Be=ue,Le=Be._payload,Ze=Be._init;try{return V(Ze(Le))}catch{return null}}}return null}var I=Object.assign,H=0,q,F,J,Z,G,oe,ae;function te(){}te.__reactDisabledLog=!0;function re(){{if(H===0){q=console.log,F=console.info,J=console.warn,Z=console.error,G=console.group,oe=console.groupCollapsed,ae=console.groupEnd;var ue={configurable:!0,enumerable:!0,value:te,writable:!0};Object.defineProperties(console,{info:ue,log:ue,warn:ue,error:ue,group:ue,groupCollapsed:ue,groupEnd:ue})}H++}}function X(){{if(H--,H===0){var ue={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:I({},ue,{value:q}),info:I({},ue,{value:F}),warn:I({},ue,{value:J}),error:I({},ue,{value:Z}),group:I({},ue,{value:G}),groupCollapsed:I({},ue,{value:oe}),groupEnd:I({},ue,{value:ae})})}H<0&&_("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ce=S.ReactCurrentDispatcher,he;function ve(ue,xe,ne){{if(he===void 0)try{throw Error()}catch(Be){var _e=Be.stack.trim().match(/\n( *(at )?)/);he=_e&&_e[1]||""}return`
`+he+ue}}var Ne=!1,ke;{var Te=typeof WeakMap=="function"?WeakMap:Map;ke=new Te}function ye(ue,xe){if(!ue||Ne)return"";{var ne=ke.get(ue);if(ne!==void 0)return ne}var _e;Ne=!0;var Be=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Le;Le=ce.current,ce.current=null,re();try{if(xe){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(cn){_e=cn}Reflect.construct(ue,[],Ze)}else{try{Ze.call()}catch(cn){_e=cn}ue.call(Ze.prototype)}}else{try{throw Error()}catch(cn){_e=cn}ue()}}catch(cn){if(cn&&_e&&typeof cn.stack=="string"){for(var We=cn.stack.split(`
`),wt=_e.stack.split(`
`),ht=We.length-1,Pt=wt.length-1;ht>=1&&Pt>=0&&We[ht]!==wt[Pt];)Pt--;for(;ht>=1&&Pt>=0;ht--,Pt--)if(We[ht]!==wt[Pt]){if(ht!==1||Pt!==1)do if(ht--,Pt--,Pt<0||We[ht]!==wt[Pt]){var Ut=`
`+We[ht].replace(" at new "," at ");return ue.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",ue.displayName)),typeof ue=="function"&&ke.set(ue,Ut),Ut}while(ht>=1&&Pt>=0);break}}}finally{Ne=!1,ce.current=Le,X(),Error.prepareStackTrace=Be}var Zt=ue?ue.displayName||ue.name:"",sn=Zt?ve(Zt):"";return typeof ue=="function"&&ke.set(ue,sn),sn}function Ie(ue,xe,ne){return ye(ue,!1)}function Re(ue){var xe=ue.prototype;return!!(xe&&xe.isReactComponent)}function Ee(ue,xe,ne){if(ue==null)return"";if(typeof ue=="function")return ye(ue,Re(ue));if(typeof ue=="string")return ve(ue);switch(ue){case c:return ve("Suspense");case f:return ve("SuspenseList")}if(typeof ue=="object")switch(ue.$$typeof){case l:return Ie(ue.render);case h:return Ee(ue.type,xe,ne);case m:{var _e=ue,Be=_e._payload,Le=_e._init;try{return Ee(Le(Be),xe,ne)}catch{}}}return""}var $e=Object.prototype.hasOwnProperty,He={},gt=S.ReactDebugCurrentFrame;function Ye(ue){if(ue){var xe=ue._owner,ne=Ee(ue.type,ue._source,xe?xe.type:null);gt.setExtraStackFrame(ne)}else gt.setExtraStackFrame(null)}function yt(ue,xe,ne,_e,Be){{var Le=Function.call.bind($e);for(var Ze in ue)if(Le(ue,Ze)){var We=void 0;try{if(typeof ue[Ze]!="function"){var wt=Error((_e||"React class")+": "+ne+" type `"+Ze+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ue[Ze]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw wt.name="Invariant Violation",wt}We=ue[Ze](xe,Ze,_e,ne,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ht){We=ht}We&&!(We instanceof Error)&&(Ye(Be),_("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",_e||"React class",ne,Ze,typeof We),Ye(null)),We instanceof Error&&!(We.message in He)&&(He[We.message]=!0,Ye(Be),_("Failed %s type: %s",ne,We.message),Ye(null))}}}var _t=Array.isArray;function St(ue){return _t(ue)}function Bt(ue){{var xe=typeof Symbol=="function"&&Symbol.toStringTag,ne=xe&&ue[Symbol.toStringTag]||ue.constructor.name||"Object";return ne}}function Nt(ue){try{return Dt(ue),!1}catch{return!0}}function Dt(ue){return""+ue}function Ae(ue){if(Nt(ue))return _("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Bt(ue)),Dt(ue)}var je=S.ReactCurrentOwner,tt={key:!0,ref:!0,__self:!0,__source:!0},Ot,qe,ft;ft={};function Wt(ue){if($e.call(ue,"ref")){var xe=Object.getOwnPropertyDescriptor(ue,"ref").get;if(xe&&xe.isReactWarning)return!1}return ue.ref!==void 0}function an(ue){if($e.call(ue,"key")){var xe=Object.getOwnPropertyDescriptor(ue,"key").get;if(xe&&xe.isReactWarning)return!1}return ue.key!==void 0}function Un(ue,xe){if(typeof ue.ref=="string"&&je.current&&xe&&je.current.stateNode!==xe){var ne=V(je.current.type);ft[ne]||(_('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',V(je.current.type),ue.ref),ft[ne]=!0)}}function pn(ue,xe){{var ne=function(){Ot||(Ot=!0,_("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",xe))};ne.isReactWarning=!0,Object.defineProperty(ue,"key",{get:ne,configurable:!0})}}function ln(ue,xe){{var ne=function(){qe||(qe=!0,_("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",xe))};ne.isReactWarning=!0,Object.defineProperty(ue,"ref",{get:ne,configurable:!0})}}var Gt=function(ue,xe,ne,_e,Be,Le,Ze){var We={$$typeof:e,type:ue,key:xe,ref:ne,props:Ze,_owner:Le};return We._store={},Object.defineProperty(We._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(We,"_self",{configurable:!1,enumerable:!1,writable:!1,value:_e}),Object.defineProperty(We,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Be}),Object.freeze&&(Object.freeze(We.props),Object.freeze(We)),We};function Kt(ue,xe,ne,_e,Be){{var Le,Ze={},We=null,wt=null;ne!==void 0&&(Ae(ne),We=""+ne),an(xe)&&(Ae(xe.key),We=""+xe.key),Wt(xe)&&(wt=xe.ref,Un(xe,Be));for(Le in xe)$e.call(xe,Le)&&!tt.hasOwnProperty(Le)&&(Ze[Le]=xe[Le]);if(ue&&ue.defaultProps){var ht=ue.defaultProps;for(Le in ht)Ze[Le]===void 0&&(Ze[Le]=ht[Le])}if(We||wt){var Pt=typeof ue=="function"?ue.displayName||ue.name||"Unknown":ue;We&&pn(Ze,Pt),wt&&ln(Ze,Pt)}return Gt(ue,We,wt,Be,_e,je.current,Ze)}}var Lt=S.ReactCurrentOwner,In=S.ReactDebugCurrentFrame;function Tn(ue){if(ue){var xe=ue._owner,ne=Ee(ue.type,ue._source,xe?xe.type:null);In.setExtraStackFrame(ne)}else In.setExtraStackFrame(null)}var Wr;Wr=!1;function Mr(ue){return typeof ue=="object"&&ue!==null&&ue.$$typeof===e}function Hr(){{if(Lt.current){var ue=V(Lt.current.type);if(ue)return`

Check the render method of \``+ue+"`."}return""}}function Ii(ue){{if(ue!==void 0){var xe=ue.fileName.replace(/^.*[\\\/]/,""),ne=ue.lineNumber;return`

Check your code at `+xe+":"+ne+"."}return""}}var Wi={};function Mi(ue){{var xe=Hr();if(!xe){var ne=typeof ue=="string"?ue:ue.displayName||ue.name;ne&&(xe=`

Check the top-level render call using <`+ne+">.")}return xe}}function zi(ue,xe){{if(!ue._store||ue._store.validated||ue.key!=null)return;ue._store.validated=!0;var ne=Mi(xe);if(Wi[ne])return;Wi[ne]=!0;var _e="";ue&&ue._owner&&ue._owner!==Lt.current&&(_e=" It was passed a child from "+V(ue._owner.type)+"."),Tn(ue),_('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ne,_e),Tn(null)}}function xr(ue,xe){{if(typeof ue!="object")return;if(St(ue))for(var ne=0;ne<ue.length;ne++){var _e=ue[ne];Mr(_e)&&zi(_e,xe)}else if(Mr(ue))ue._store&&(ue._store.validated=!0);else if(ue){var Be=x(ue);if(typeof Be=="function"&&Be!==ue.entries)for(var Le=Be.call(ue),Ze;!(Ze=Le.next()).done;)Mr(Ze.value)&&zi(Ze.value,xe)}}}function Vr(ue){{var xe=ue.type;if(xe==null||typeof xe=="string")return;var ne;if(typeof xe=="function")ne=xe.propTypes;else if(typeof xe=="object"&&(xe.$$typeof===l||xe.$$typeof===h))ne=xe.propTypes;else return;if(ne){var _e=V(xe);yt(ne,ue.props,"prop",_e,ue)}else if(xe.PropTypes!==void 0&&!Wr){Wr=!0;var Be=V(xe);_("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Be||"Unknown")}typeof xe.getDefaultProps=="function"&&!xe.getDefaultProps.isReactClassApproved&&_("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function $r(ue){{for(var xe=Object.keys(ue.props),ne=0;ne<xe.length;ne++){var _e=xe[ne];if(_e!=="children"&&_e!=="key"){Tn(ue),_("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",_e),Tn(null);break}}ue.ref!==null&&(Tn(ue),_("Invalid attribute `ref` supplied to `React.Fragment`."),Tn(null))}}var qt={};function Zn(ue,xe,ne,_e,Be,Le){{var Ze=B(ue);if(!Ze){var We="";(ue===void 0||typeof ue=="object"&&ue!==null&&Object.keys(ue).length===0)&&(We+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var wt=Ii(Be);wt?We+=wt:We+=Hr();var ht;ue===null?ht="null":St(ue)?ht="array":ue!==void 0&&ue.$$typeof===e?(ht="<"+(V(ue.type)||"Unknown")+" />",We=" Did you accidentally export a JSX literal instead of a component?"):ht=typeof ue,_("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ht,We)}var Pt=Kt(ue,xe,ne,Be,Le);if(Pt==null)return Pt;if(Ze){var Ut=xe.children;if(Ut!==void 0)if(_e)if(St(Ut)){for(var Zt=0;Zt<Ut.length;Zt++)xr(Ut[Zt],ue);Object.freeze&&Object.freeze(Ut)}else _("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else xr(Ut,ue)}if($e.call(xe,"key")){var sn=V(ue),cn=Object.keys(xe).filter(function(gn){return gn!=="key"}),hr=cn.length>0?"{key: someKey, "+cn.join(": ..., ")+": ...}":"{key: someKey}";if(!qt[sn+hr]){var Dn=cn.length>0?"{"+cn.join(": ..., ")+": ...}":"{}";_(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,hr,sn,Dn,sn),qt[sn+hr]=!0}}return ue===r?$r(Pt):Vr(Pt),Pt}}var ea=Zn;JV.Fragment=r,JV.jsxDEV=ea})();UZ.exports=JV;var b=UZ.exports,qV={},zZ={exports:{}},eu={},HZ={exports:{}},GZ={};(function(t){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=!1,n=5;function r(qe,ft){var Wt=qe.length;qe.push(ft),s(qe,ft,Wt)}function i(qe){return qe.length===0?null:qe[0]}function a(qe){if(qe.length===0)return null;var ft=qe[0],Wt=qe.pop();return Wt!==ft&&(qe[0]=Wt,o(qe,Wt,0)),ft}function s(qe,ft,Wt){for(var an=Wt;an>0;){var Un=an-1>>>1,pn=qe[Un];if(l(pn,ft)>0)qe[Un]=ft,qe[an]=pn,an=Un;else return}}function o(qe,ft,Wt){for(var an=Wt,Un=qe.length,pn=Un>>>1;an<pn;){var ln=(an+1)*2-1,Gt=qe[ln],Kt=ln+1,Lt=qe[Kt];if(l(Gt,ft)<0)Kt<Un&&l(Lt,Gt)<0?(qe[an]=Lt,qe[Kt]=ft,an=Kt):(qe[an]=Gt,qe[ln]=ft,an=ln);else if(Kt<Un&&l(Lt,ft)<0)qe[an]=Lt,qe[Kt]=ft,an=Kt;else return}}function l(qe,ft){var Wt=qe.sortIndex-ft.sortIndex;return Wt!==0?Wt:qe.id-ft.id}var c=1,f=2,h=3,m=4,p=5;function v(qe,ft){}var y=typeof performance=="object"&&typeof performance.now=="function";if(y){var x=performance;t.unstable_now=function(){return x.now()}}else{var S=Date,_=S.now();t.unstable_now=function(){return S.now()-_}}var N=1073741823,k=-1,P=250,O=5e3,A=1e4,T=N,L=[],B=[],W=1,Y=null,V=h,I=!1,H=!1,q=!1,F=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(qe){for(var ft=i(B);ft!==null;){if(ft.callback===null)a(B);else if(ft.startTime<=qe)a(B),ft.sortIndex=ft.expirationTime,r(L,ft);else return;ft=i(B)}}function oe(qe){if(q=!1,G(qe),!H)if(i(L)!==null)H=!0,Dt(ae);else{var ft=i(B);ft!==null&&Ae(oe,ft.startTime-qe)}}function ae(qe,ft){H=!1,q&&(q=!1,je()),I=!0;var Wt=V;try{var an;if(!e)return te(qe,ft)}finally{Y=null,V=Wt,I=!1}}function te(qe,ft){var Wt=ft;for(G(Wt),Y=i(L);Y!==null&&!(Y.expirationTime>Wt&&(!qe||gt()));){var an=Y.callback;if(typeof an=="function"){Y.callback=null,V=Y.priorityLevel;var Un=Y.expirationTime<=Wt,pn=an(Un);Wt=t.unstable_now(),typeof pn=="function"?Y.callback=pn:Y===i(L)&&a(L),G(Wt)}else a(L);Y=i(L)}if(Y!==null)return!0;var ln=i(B);return ln!==null&&Ae(oe,ln.startTime-Wt),!1}function re(qe,ft){switch(qe){case c:case f:case h:case m:case p:break;default:qe=h}var Wt=V;V=qe;try{return ft()}finally{V=Wt}}function X(qe){var ft;switch(V){case c:case f:case h:ft=h;break;default:ft=V;break}var Wt=V;V=ft;try{return qe()}finally{V=Wt}}function ce(qe){var ft=V;return function(){var Wt=V;V=ft;try{return qe.apply(this,arguments)}finally{V=Wt}}}function he(qe,ft,Wt){var an=t.unstable_now(),Un;if(typeof Wt=="object"&&Wt!==null){var pn=Wt.delay;typeof pn=="number"&&pn>0?Un=an+pn:Un=an}else Un=an;var ln;switch(qe){case c:ln=k;break;case f:ln=P;break;case p:ln=T;break;case m:ln=A;break;case h:default:ln=O;break}var Gt=Un+ln,Kt={id:W++,callback:ft,priorityLevel:qe,startTime:Un,expirationTime:Gt,sortIndex:-1};return Un>an?(Kt.sortIndex=Un,r(B,Kt),i(L)===null&&Kt===i(B)&&(q?je():q=!0,Ae(oe,Un-an))):(Kt.sortIndex=Gt,r(L,Kt),!H&&!I&&(H=!0,Dt(ae))),Kt}function ve(){}function Ne(){!H&&!I&&(H=!0,Dt(ae))}function ke(){return i(L)}function Te(qe){qe.callback=null}function ye(){return V}var Ie=!1,Re=null,Ee=-1,$e=n,He=-1;function gt(){var qe=t.unstable_now()-He;return!(qe<$e)}function Ye(){}function yt(qe){if(qe<0||qe>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}qe>0?$e=Math.floor(1e3/qe):$e=n}var _t=function(){if(Re!==null){var qe=t.unstable_now();He=qe;var ft=!0,Wt=!0;try{Wt=Re(ft,qe)}finally{Wt?St():(Ie=!1,Re=null)}}else Ie=!1},St;if(typeof Z=="function")St=function(){Z(_t)};else if(typeof MessageChannel<"u"){var Bt=new MessageChannel,Nt=Bt.port2;Bt.port1.onmessage=_t,St=function(){Nt.postMessage(null)}}else St=function(){F(_t,0)};function Dt(qe){Re=qe,Ie||(Ie=!0,St())}function Ae(qe,ft){Ee=F(function(){qe(t.unstable_now())},ft)}function je(){J(Ee),Ee=-1}var tt=Ye,Ot=null;t.unstable_IdlePriority=p,t.unstable_ImmediatePriority=c,t.unstable_LowPriority=m,t.unstable_NormalPriority=h,t.unstable_Profiling=Ot,t.unstable_UserBlockingPriority=f,t.unstable_cancelCallback=Te,t.unstable_continueExecution=Ne,t.unstable_forceFrameRate=yt,t.unstable_getCurrentPriorityLevel=ye,t.unstable_getFirstCallbackNode=ke,t.unstable_next=X,t.unstable_pauseExecution=ve,t.unstable_requestPaint=tt,t.unstable_runWithPriority=re,t.unstable_scheduleCallback=he,t.unstable_shouldYield=gt,t.unstable_wrapCallback=ce,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(GZ);HZ.exports=GZ;var ewe=HZ.exports;/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=R,e=ewe,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=!1;function i(u){r=u}function a(u){if(!r){for(var d=arguments.length,g=new Array(d>1?d-1:0),E=1;E<d;E++)g[E-1]=arguments[E];o("warn",u,g)}}function s(u){if(!r){for(var d=arguments.length,g=new Array(d>1?d-1:0),E=1;E<d;E++)g[E-1]=arguments[E];o("error",u,g)}}function o(u,d,g){{var E=n.ReactDebugCurrentFrame,D=E.getStackAddendum();D!==""&&(d+="%s",g=g.concat([D]));var $=g.map(function(K){return String(K)});$.unshift("Warning: "+d),Function.prototype.apply.call(console[u],console,$)}}var l=0,c=1,f=2,h=3,m=4,p=5,v=6,y=7,x=8,S=9,_=10,N=11,k=12,P=13,O=14,A=15,T=16,L=17,B=18,W=19,Y=21,V=22,I=23,H=24,q=25,F=!0,J=!1,Z=!1,G=!1,oe=!1,ae=!0,te=!0,re=!0,X=!0,ce=new Set,he={},ve={};function Ne(u,d){ke(u,d),ke(u+"Capture",d)}function ke(u,d){he[u]&&s("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",u),he[u]=d;{var g=u.toLowerCase();ve[g]=u,u==="onDoubleClick"&&(ve.ondblclick=u)}for(var E=0;E<d.length;E++)ce.add(d[E])}var Te=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ye=Object.prototype.hasOwnProperty;function Ie(u){{var d=typeof Symbol=="function"&&Symbol.toStringTag,g=d&&u[Symbol.toStringTag]||u.constructor.name||"Object";return g}}function Re(u){try{return Ee(u),!1}catch{return!0}}function Ee(u){return""+u}function $e(u,d){if(Re(u))return s("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",d,Ie(u)),Ee(u)}function He(u){if(Re(u))return s("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ie(u)),Ee(u)}function gt(u,d){if(Re(u))return s("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",d,Ie(u)),Ee(u)}function Ye(u,d){if(Re(u))return s("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",d,Ie(u)),Ee(u)}function yt(u){if(Re(u))return s("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",Ie(u)),Ee(u)}function _t(u){if(Re(u))return s("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",Ie(u)),Ee(u)}var St=0,Bt=1,Nt=2,Dt=3,Ae=4,je=5,tt=6,Ot=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",qe=Ot+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ft=new RegExp("^["+Ot+"]["+qe+"]*$"),Wt={},an={};function Un(u){return ye.call(an,u)?!0:ye.call(Wt,u)?!1:ft.test(u)?(an[u]=!0,!0):(Wt[u]=!0,s("Invalid attribute name: `%s`",u),!1)}function pn(u,d,g){return d!==null?d.type===St:g?!1:u.length>2&&(u[0]==="o"||u[0]==="O")&&(u[1]==="n"||u[1]==="N")}function ln(u,d,g,E){if(g!==null&&g.type===St)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":{if(E)return!1;if(g!==null)return!g.acceptsBooleans;var D=u.toLowerCase().slice(0,5);return D!=="data-"&&D!=="aria-"}default:return!1}}function Gt(u,d,g,E){if(d===null||typeof d>"u"||ln(u,d,g,E))return!0;if(E)return!1;if(g!==null)switch(g.type){case Dt:return!d;case Ae:return d===!1;case je:return isNaN(d);case tt:return isNaN(d)||d<1}return!1}function Kt(u){return In.hasOwnProperty(u)?In[u]:null}function Lt(u,d,g,E,D,$,K){this.acceptsBooleans=d===Nt||d===Dt||d===Ae,this.attributeName=E,this.attributeNamespace=D,this.mustUseProperty=g,this.propertyName=u,this.type=d,this.sanitizeURL=$,this.removeEmptyString=K}var In={},Tn=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Tn.forEach(function(u){In[u]=new Lt(u,St,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0],g=u[1];In[d]=new Lt(d,Bt,!1,g,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){In[u]=new Lt(u,Nt,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){In[u]=new Lt(u,Nt,!1,u,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(u){In[u]=new Lt(u,Dt,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){In[u]=new Lt(u,Dt,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){In[u]=new Lt(u,Ae,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){In[u]=new Lt(u,tt,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){In[u]=new Lt(u,je,!1,u.toLowerCase(),null,!1,!1)});var Wr=/[\-\:]([a-z])/g,Mr=function(u){return u[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(u){var d=u.replace(Wr,Mr);In[d]=new Lt(d,Bt,!1,u,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(u){var d=u.replace(Wr,Mr);In[d]=new Lt(d,Bt,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(Wr,Mr);In[d]=new Lt(d,Bt,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){In[u]=new Lt(u,Bt,!1,u.toLowerCase(),null,!1,!1)});var Hr="xlinkHref";In[Hr]=new Lt("xlinkHref",Bt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){In[u]=new Lt(u,Bt,!1,u.toLowerCase(),null,!0,!0)});var Ii=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Wi=!1;function Mi(u){!Wi&&Ii.test(u)&&(Wi=!0,s("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(u)))}function zi(u,d,g,E){if(E.mustUseProperty){var D=E.propertyName;return u[D]}else{$e(g,d),E.sanitizeURL&&Mi(""+g);var $=E.attributeName,K=null;if(E.type===Ae){if(u.hasAttribute($)){var ee=u.getAttribute($);return ee===""?!0:Gt(d,g,E,!1)?ee:ee===""+g?g:ee}}else if(u.hasAttribute($)){if(Gt(d,g,E,!1))return u.getAttribute($);if(E.type===Dt)return g;K=u.getAttribute($)}return Gt(d,g,E,!1)?K===null?g:K:K===""+g?g:K}}function xr(u,d,g,E){{if(!Un(d))return;if(!u.hasAttribute(d))return g===void 0?void 0:null;var D=u.getAttribute(d);return $e(g,d),D===""+g?g:D}}function Vr(u,d,g,E){var D=Kt(d);if(!pn(d,D,E)){if(Gt(d,g,D,E)&&(g=null),E||D===null){if(Un(d)){var $=d;g===null?u.removeAttribute($):($e(g,d),u.setAttribute($,""+g))}return}var K=D.mustUseProperty;if(K){var ee=D.propertyName;if(g===null){var se=D.type;u[ee]=se===Dt?!1:""}else u[ee]=g;return}var be=D.attributeName,Se=D.attributeNamespace;if(g===null)u.removeAttribute(be);else{var Ve=D.type,Me;Ve===Dt||Ve===Ae&&g===!0?Me="":($e(g,be),Me=""+g,D.sanitizeURL&&Mi(Me.toString())),Se?u.setAttributeNS(Se,be,Me):u.setAttribute(be,Me)}}}var $r=Symbol.for("react.element"),qt=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),ea=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),xe=Symbol.for("react.provider"),ne=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),We=Symbol.for("react.lazy"),wt=Symbol.for("react.scope"),ht=Symbol.for("react.debug_trace_mode"),Pt=Symbol.for("react.offscreen"),Ut=Symbol.for("react.legacy_hidden"),Zt=Symbol.for("react.cache"),sn=Symbol.for("react.tracing_marker"),cn=Symbol.iterator,hr="@@iterator";function Dn(u){if(u===null||typeof u!="object")return null;var d=cn&&u[cn]||u[hr];return typeof d=="function"?d:null}var gn=Object.assign,Gr=0,xi,ta,si,oi,la,li,xa;function Mn(){}Mn.__reactDisabledLog=!0;function Cr(){{if(Gr===0){xi=console.log,ta=console.info,si=console.warn,oi=console.error,la=console.group,li=console.groupCollapsed,xa=console.groupEnd;var u={configurable:!0,enumerable:!0,value:Mn,writable:!0};Object.defineProperties(console,{info:u,log:u,warn:u,error:u,group:u,groupCollapsed:u,groupEnd:u})}Gr++}}function Lr(){{if(Gr--,Gr===0){var u={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:gn({},u,{value:xi}),info:gn({},u,{value:ta}),warn:gn({},u,{value:si}),error:gn({},u,{value:oi}),group:gn({},u,{value:la}),groupCollapsed:gn({},u,{value:li}),groupEnd:gn({},u,{value:xa})})}Gr<0&&s("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var er=n.ReactCurrentDispatcher,ei;function Hi(u,d,g){{if(ei===void 0)try{throw Error()}catch(D){var E=D.stack.trim().match(/\n( *(at )?)/);ei=E&&E[1]||""}return`
`+ei+u}}var Fr=!1,Si;{var vs=typeof WeakMap=="function"?WeakMap:Map;Si=new vs}function Qa(u,d){if(!u||Fr)return"";{var g=Si.get(u);if(g!==void 0)return g}var E;Fr=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var $;$=er.current,er.current=null,Cr();try{if(d){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(Xe){E=Xe}Reflect.construct(u,[],K)}else{try{K.call()}catch(Xe){E=Xe}u.call(K.prototype)}}else{try{throw Error()}catch(Xe){E=Xe}u()}}catch(Xe){if(Xe&&E&&typeof Xe.stack=="string"){for(var ee=Xe.stack.split(`
`),se=E.stack.split(`
`),be=ee.length-1,Se=se.length-1;be>=1&&Se>=0&&ee[be]!==se[Se];)Se--;for(;be>=1&&Se>=0;be--,Se--)if(ee[be]!==se[Se]){if(be!==1||Se!==1)do if(be--,Se--,Se<0||ee[be]!==se[Se]){var Ve=`
`+ee[be].replace(" at new "," at ");return u.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",u.displayName)),typeof u=="function"&&Si.set(u,Ve),Ve}while(be>=1&&Se>=0);break}}}finally{Fr=!1,er.current=$,Lr(),Error.prepareStackTrace=D}var Me=u?u.displayName||u.name:"",Je=Me?Hi(Me):"";return typeof u=="function"&&Si.set(u,Je),Je}function Hs(u,d,g){return Qa(u,!0)}function Al(u,d,g){return Qa(u,!1)}function Su(u){var d=u.prototype;return!!(d&&d.isReactComponent)}function Rl(u,d,g){if(u==null)return"";if(typeof u=="function")return Qa(u,Su(u));if(typeof u=="string")return Hi(u);switch(u){case Be:return Hi("Suspense");case Le:return Hi("SuspenseList")}if(typeof u=="object")switch(u.$$typeof){case _e:return Al(u.render);case Ze:return Rl(u.type,d,g);case We:{var E=u,D=E._payload,$=E._init;try{return Rl($(D),d,g)}catch{}}}return""}function ys(u){switch(u._debugOwner&&u._debugOwner.type,u._debugSource,u.tag){case p:return Hi(u.type);case T:return Hi("Lazy");case P:return Hi("Suspense");case W:return Hi("SuspenseList");case l:case f:case A:return Al(u.type);case N:return Al(u.type.render);case c:return Hs(u.type);default:return""}}function na(u){try{var d="",g=u;do d+=ys(g),g=g.return;while(g);return d}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function es(u,d,g){var E=u.displayName;if(E)return E;var D=d.displayName||d.name||"";return D!==""?g+"("+D+")":g}function Go(u){return u.displayName||"Context"}function $n(u){if(u==null)return null;if(typeof u.tag=="number"&&s("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case Zn:return"Fragment";case qt:return"Portal";case ue:return"Profiler";case ea:return"StrictMode";case Be:return"Suspense";case Le:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case ne:var d=u;return Go(d)+".Consumer";case xe:var g=u;return Go(g._context)+".Provider";case _e:return es(u,u.render,"ForwardRef");case Ze:var E=u.displayName||null;return E!==null?E:$n(u.type)||"Memo";case We:{var D=u,$=D._payload,K=D._init;try{return $n(K($))}catch{return null}}}return null}function Gs(u,d,g){var E=d.displayName||d.name||"";return u.displayName||(E!==""?g+"("+E+")":g)}function Gi(u){return u.displayName||"Context"}function kn(u){var d=u.tag,g=u.type;switch(d){case H:return"Cache";case S:var E=g;return Gi(E)+".Consumer";case _:var D=g;return Gi(D._context)+".Provider";case B:return"DehydratedFragment";case N:return Gs(g,g.render,"ForwardRef");case y:return"Fragment";case p:return g;case m:return"Portal";case h:return"Root";case v:return"Text";case T:return $n(g);case x:return g===ea?"StrictMode":"Mode";case V:return"Offscreen";case k:return"Profiler";case Y:return"Scope";case P:return"Suspense";case W:return"SuspenseList";case q:return"TracingMarker";case c:case l:case L:case f:case O:case A:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;break}return null}var Ol=n.ReactDebugCurrentFrame,ra=null,Ko=!1;function Ks(){{if(ra===null)return null;var u=ra._debugOwner;if(u!==null&&typeof u<"u")return kn(u)}return null}function $d(){return ra===null?"":na(ra)}function mi(){Ol.getCurrentStack=null,ra=null,Ko=!1}function Kr(u){Ol.getCurrentStack=u===null?null:$d,ra=u,Ko=!1}function Yo(){return ra}function ts(u){Ko=u}function ia(u){return""+u}function ua(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return _t(u),u;default:return""}}var ns={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function Sc(u,d){ns[d.type]||d.onChange||d.onInput||d.readOnly||d.disabled||d.value==null||s("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),d.onChange||d.readOnly||d.disabled||d.checked==null||s("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Ld(u){var d=u.type,g=u.nodeName;return g&&g.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Eu(u){return u._valueTracker}function go(u){u._valueTracker=null}function eh(u){var d="";return u&&(Ld(u)?d=u.checked?"true":"false":d=u.value),d}function ca(u){var d=Ld(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,d);_t(u[d]);var E=""+u[d];if(!(u.hasOwnProperty(d)||typeof g>"u"||typeof g.get!="function"||typeof g.set!="function")){var D=g.get,$=g.set;Object.defineProperty(u,d,{configurable:!0,get:function(){return D.call(this)},set:function(ee){_t(ee),E=""+ee,$.call(this,ee)}}),Object.defineProperty(u,d,{enumerable:g.enumerable});var K={getValue:function(){return E},setValue:function(ee){_t(ee),E=""+ee},stopTracking:function(){go(u),delete u[d]}};return K}}function Jo(u){Eu(u)||(u._valueTracker=ca(u))}function jl(u){if(!u)return!1;var d=Eu(u);if(!d)return!0;var g=d.getValue(),E=eh(u);return E!==g?(d.setValue(E),!0):!1}function rs(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var qo=!1,vo=!1,Ki=!1,Fd=!1;function Nu(u){var d=u.type==="checkbox"||u.type==="radio";return d?u.checked!=null:u.value!=null}function Ec(u,d){var g=u,E=d.checked,D=gn({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:E??g._wrapperState.initialChecked});return D}function _u(u,d){Sc("input",d),d.checked!==void 0&&d.defaultChecked!==void 0&&!vo&&(s("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ks()||"A component",d.type),vo=!0),d.value!==void 0&&d.defaultValue!==void 0&&!qo&&(s("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ks()||"A component",d.type),qo=!0);var g=u,E=d.defaultValue==null?"":d.defaultValue;g._wrapperState={initialChecked:d.checked!=null?d.checked:d.defaultChecked,initialValue:ua(d.value!=null?d.value:E),controlled:Nu(d)}}function U(u,d){var g=u,E=d.checked;E!=null&&Vr(g,"checked",E,!1)}function ie(u,d){var g=u;{var E=Nu(d);!g._wrapperState.controlled&&E&&!Fd&&(s("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Fd=!0),g._wrapperState.controlled&&!E&&!Ki&&(s("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Ki=!0)}U(u,d);var D=ua(d.value),$=d.type;if(D!=null)$==="number"?(D===0&&g.value===""||g.value!=D)&&(g.value=ia(D)):g.value!==ia(D)&&(g.value=ia(D));else if($==="submit"||$==="reset"){g.removeAttribute("value");return}d.hasOwnProperty("value")?xt(g,d.type,D):d.hasOwnProperty("defaultValue")&&xt(g,d.type,ua(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(g.defaultChecked=!!d.defaultChecked)}function we(u,d,g){var E=u;if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var D=d.type,$=D==="submit"||D==="reset";if($&&(d.value===void 0||d.value===null))return;var K=ia(E._wrapperState.initialValue);g||K!==E.value&&(E.value=K),E.defaultValue=K}var ee=E.name;ee!==""&&(E.name=""),E.defaultChecked=!E.defaultChecked,E.defaultChecked=!!E._wrapperState.initialChecked,ee!==""&&(E.name=ee)}function De(u,d){var g=u;ie(g,d),Ue(g,d)}function Ue(u,d){var g=d.name;if(d.type==="radio"&&g!=null){for(var E=u;E.parentNode;)E=E.parentNode;$e(g,"name");for(var D=E.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),$=0;$<D.length;$++){var K=D[$];if(!(K===u||K.form!==u.form)){var ee=Q_(K);if(!ee)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");jl(K),ie(K,ee)}}}}function xt(u,d,g){(d!=="number"||rs(u.ownerDocument)!==u)&&(g==null?u.defaultValue=ia(u._wrapperState.initialValue):u.defaultValue!==ia(g)&&(u.defaultValue=ia(g)))}var st=!1,Tt=!1,zt=!1;function hn(u,d){d.value==null&&(typeof d.children=="object"&&d.children!==null?t.Children.forEach(d.children,function(g){g!=null&&(typeof g=="string"||typeof g=="number"||Tt||(Tt=!0,s("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):d.dangerouslySetInnerHTML!=null&&(zt||(zt=!0,s("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),d.selected!=null&&!st&&(s("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),st=!0)}function Vn(u,d){d.value!=null&&u.setAttribute("value",ia(ua(d.value)))}var Pn=Array.isArray;function un(u){return Pn(u)}var Gn;Gn=!1;function ur(){var u=Ks();return u?`

Check the render method of \``+u+"`.":""}var Ys=["value","defaultValue"];function Il(u){{Sc("select",u);for(var d=0;d<Ys.length;d++){var g=Ys[d];if(u[g]!=null){var E=un(u[g]);u.multiple&&!E?s("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",g,ur()):!u.multiple&&E&&s("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",g,ur())}}}}function bs(u,d,g,E){var D=u.options;if(d){for(var $=g,K={},ee=0;ee<$.length;ee++)K["$"+$[ee]]=!0;for(var se=0;se<D.length;se++){var be=K.hasOwnProperty("$"+D[se].value);D[se].selected!==be&&(D[se].selected=be),be&&E&&(D[se].defaultSelected=!0)}}else{for(var Se=ia(ua(g)),Ve=null,Me=0;Me<D.length;Me++){if(D[Me].value===Se){D[Me].selected=!0,E&&(D[Me].defaultSelected=!0);return}Ve===null&&!D[Me].disabled&&(Ve=D[Me])}Ve!==null&&(Ve.selected=!0)}}function Nc(u,d){return gn({},d,{value:void 0})}function Cu(u,d){var g=u;Il(d),g._wrapperState={wasMultiple:!!d.multiple},d.value!==void 0&&d.defaultValue!==void 0&&!Gn&&(s("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Gn=!0)}function Bd(u,d){var g=u;g.multiple=!!d.multiple;var E=d.value;E!=null?bs(g,!!d.multiple,E,!1):d.defaultValue!=null&&bs(g,!!d.multiple,d.defaultValue,!0)}function _c(u,d){var g=u,E=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!d.multiple;var D=d.value;D!=null?bs(g,!!d.multiple,D,!1):E!==!!d.multiple&&(d.defaultValue!=null?bs(g,!!d.multiple,d.defaultValue,!0):bs(g,!!d.multiple,d.multiple?[]:"",!1))}function th(u,d){var g=u,E=d.value;E!=null&&bs(g,!!d.multiple,E,!1)}var ab=!1;function Gg(u,d){var g=u;if(d.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var E=gn({},d,{value:void 0,defaultValue:void 0,children:ia(g._wrapperState.initialValue)});return E}function sb(u,d){var g=u;Sc("textarea",d),d.value!==void 0&&d.defaultValue!==void 0&&!ab&&(s("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ks()||"A component"),ab=!0);var E=d.value;if(E==null){var D=d.children,$=d.defaultValue;if(D!=null){s("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if($!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(un(D)){if(D.length>1)throw new Error("<textarea> can only have at most one child.");D=D[0]}$=D}}$==null&&($=""),E=$}g._wrapperState={initialValue:ua(E)}}function ob(u,d){var g=u,E=ua(d.value),D=ua(d.defaultValue);if(E!=null){var $=ia(E);$!==g.value&&(g.value=$),d.defaultValue==null&&g.defaultValue!==$&&(g.defaultValue=$)}D!=null&&(g.defaultValue=ia(D))}function lb(u,d){var g=u,E=g.textContent;E===g._wrapperState.initialValue&&E!==""&&E!==null&&(g.value=E)}function Cx(u,d){ob(u,d)}var Ml="http://www.w3.org/1999/xhtml",Tx="http://www.w3.org/1998/Math/MathML",Kg="http://www.w3.org/2000/svg";function Yg(u){switch(u){case"svg":return Kg;case"math":return Tx;default:return Ml}}function Jg(u,d){return u==null||u===Ml?Yg(d):u===Kg&&d==="foreignObject"?Ml:u}var Dx=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,E,D){MSApp.execUnsafeLocalFunction(function(){return u(d,g,E,D)})}:u},Vm,ub=Dx(function(u,d){if(u.namespaceURI===Kg&&!("innerHTML"in u)){Vm=Vm||document.createElement("div"),Vm.innerHTML="<svg>"+d.valueOf().toString()+"</svg>";for(var g=Vm.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;g.firstChild;)u.appendChild(g.firstChild);return}u.innerHTML=d}),is=1,Vl=3,Vi=8,$l=9,qg=11,$m=function(u,d){if(d){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===Vl){g.nodeValue=d;return}}u.textContent=d},kx={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},nh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function Px(u,d){return u+d.charAt(0).toUpperCase()+d.substring(1)}var Ax=["Webkit","ms","Moz","O"];Object.keys(nh).forEach(function(u){Ax.forEach(function(d){nh[Px(d,u)]=nh[u]})});function Xg(u,d,g){var E=d==null||typeof d=="boolean"||d==="";return E?"":!g&&typeof d=="number"&&d!==0&&!(nh.hasOwnProperty(u)&&nh[u])?d+"px":(Ye(d,u),(""+d).trim())}var Rx=/([A-Z])/g,Ox=/^ms-/;function Zg(u){return u.replace(Rx,"-$1").toLowerCase().replace(Ox,"-ms-")}var cb=function(){};{var jx=/^(?:webkit|moz|o)[A-Z]/,Qg=/^-ms-/,Ix=/-(.)/g,db=/;\s*$/,Cc={},Lm={},fb=!1,hb=!1,Mx=function(u){return u.replace(Ix,function(d,g){return g.toUpperCase()})},Vx=function(u){Cc.hasOwnProperty(u)&&Cc[u]||(Cc[u]=!0,s("Unsupported style property %s. Did you mean %s?",u,Mx(u.replace(Qg,"ms-"))))},as=function(u){Cc.hasOwnProperty(u)&&Cc[u]||(Cc[u]=!0,s("Unsupported vendor-prefixed style property %s. Did you mean %s?",u,u.charAt(0).toUpperCase()+u.slice(1)))},$x=function(u,d){Lm.hasOwnProperty(d)&&Lm[d]||(Lm[d]=!0,s(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,u,d.replace(db,"")))},mb=function(u,d){fb||(fb=!0,s("`NaN` is an invalid value for the `%s` css style property.",u))},Fm=function(u,d){hb||(hb=!0,s("`Infinity` is an invalid value for the `%s` css style property.",u))};cb=function(u,d){u.indexOf("-")>-1?Vx(u):jx.test(u)?as(u):db.test(d)&&$x(u,d),typeof d=="number"&&(isNaN(d)?mb(u,d):isFinite(d)||Fm(u,d))}}var ws=cb;function pb(u){{var d="",g="";for(var E in u)if(u.hasOwnProperty(E)){var D=u[E];if(D!=null){var $=E.indexOf("--")===0;d+=g+($?E:Zg(E))+":",d+=Xg(E,D,$),g=";"}}return d||null}}function rh(u,d){var g=u.style;for(var E in d)if(d.hasOwnProperty(E)){var D=E.indexOf("--")===0;D||ws(E,d[E]);var $=Xg(E,d[E],D);E==="float"&&(E="cssFloat"),D?g.setProperty(E,$):g[E]=$}}function Bm(u){return u==null||typeof u=="boolean"||u===""}function ih(u){var d={};for(var g in u)for(var E=kx[g]||[g],D=0;D<E.length;D++)d[E[D]]=g;return d}function Um(u,d){{if(!d)return;var g=ih(u),E=ih(d),D={};for(var $ in g){var K=g[$],ee=E[$];if(ee&&K!==ee){var se=K+","+ee;if(D[se])continue;D[se]=!0,s("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",Bm(u[K])?"Removing":"Updating",K,ee)}}}}var ah={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},sh=gn({menuitem:!0},ah),Ud="__html";function oh(u,d){if(d){if(sh[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw new Error(u+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof d.dangerouslySetInnerHTML!="object"||!(Ud in d.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!d.suppressContentEditableWarning&&d.contentEditable&&d.children!=null&&s("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),d.style!=null&&typeof d.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Ll(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},lh={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Tc={},Lx=new RegExp("^(aria)-["+qe+"]*$"),Fx=new RegExp("^(aria)[A-Z]["+qe+"]*$");function Bx(u,d){{if(ye.call(Tc,d)&&Tc[d])return!0;if(Fx.test(d)){var g="aria-"+d.slice(4).toLowerCase(),E=lh.hasOwnProperty(g)?g:null;if(E==null)return s("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",d),Tc[d]=!0,!0;if(d!==E)return s("Invalid ARIA attribute `%s`. Did you mean `%s`?",d,E),Tc[d]=!0,!0}if(Lx.test(d)){var D=d.toLowerCase(),$=lh.hasOwnProperty(D)?D:null;if($==null)return Tc[d]=!0,!1;if(d!==$)return s("Unknown ARIA attribute `%s`. Did you mean `%s`?",d,$),Tc[d]=!0,!0}}return!0}function ev(u,d){{var g=[];for(var E in d){var D=Bx(u,E);D||g.push(E)}var $=g.map(function(K){return"`"+K+"`"}).join(", ");g.length===1?s("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",$,u):g.length>1&&s("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",$,u)}}function pi(u,d){Ll(u,d)||ev(u,d)}var zd=!1;function gb(u,d){{if(u!=="input"&&u!=="textarea"&&u!=="select")return;d!=null&&d.value===null&&!zd&&(zd=!0,u==="select"&&d.multiple?s("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",u):s("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",u))}}var Wm=function(){};{var ar={},Dc=/^on./,tv=/^on[^A-Z]/,nv=new RegExp("^(aria)-["+qe+"]*$"),rv=new RegExp("^(aria)[A-Z]["+qe+"]*$");Wm=function(u,d,g,E){if(ye.call(ar,d)&&ar[d])return!0;var D=d.toLowerCase();if(D==="onfocusin"||D==="onfocusout")return s("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),ar[d]=!0,!0;if(E!=null){var $=E.registrationNameDependencies,K=E.possibleRegistrationNames;if($.hasOwnProperty(d))return!0;var ee=K.hasOwnProperty(D)?K[D]:null;if(ee!=null)return s("Invalid event handler property `%s`. Did you mean `%s`?",d,ee),ar[d]=!0,!0;if(Dc.test(d))return s("Unknown event handler property `%s`. It will be ignored.",d),ar[d]=!0,!0}else if(Dc.test(d))return tv.test(d)&&s("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",d),ar[d]=!0,!0;if(nv.test(d)||rv.test(d))return!0;if(D==="innerhtml")return s("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),ar[d]=!0,!0;if(D==="aria")return s("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),ar[d]=!0,!0;if(D==="is"&&g!==null&&g!==void 0&&typeof g!="string")return s("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof g),ar[d]=!0,!0;if(typeof g=="number"&&isNaN(g))return s("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",d),ar[d]=!0,!0;var se=Kt(d),be=se!==null&&se.type===St;if(Wd.hasOwnProperty(D)){var Se=Wd[D];if(Se!==d)return s("Invalid DOM property `%s`. Did you mean `%s`?",d,Se),ar[d]=!0,!0}else if(!be&&d!==D)return s("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",d,D),ar[d]=!0,!0;return typeof g=="boolean"&&ln(d,g,se,!1)?(g?s('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',g,d,d,g,d):s('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',g,d,d,g,d,d,d),ar[d]=!0,!0):be?!0:ln(d,g,se,!1)?(ar[d]=!0,!1):((g==="false"||g==="true")&&se!==null&&se.type===Dt&&(s("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",g,d,g==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',d,g),ar[d]=!0),!0)}}var iv=function(u,d,g){{var E=[];for(var D in d){var $=Wm(u,D,d[D],g);$||E.push(D)}var K=E.map(function(ee){return"`"+ee+"`"}).join(", ");E.length===1?s("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",K,u):E.length>1&&s("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",K,u)}};function vb(u,d,g){Ll(u,d)||iv(u,d,g)}var av=1,Hd=2,Tu=4,uh=av|Hd|Tu,kc=null;function Gd(u){kc!==null&&s("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),kc=u}function sv(){kc===null&&s("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),kc=null}function Pc(u){return u===kc}function ch(u){var d=u.target||u.srcElement||window;return d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===Vl?d.parentNode:d}var Ac=null,Kd=null,Xo=null;function ov(u){var d=bp(u);if(d){if(typeof Ac!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var g=d.stateNode;if(g){var E=Q_(g);Ac(d.stateNode,d.type,E)}}}function lv(u){Ac=u}function dh(u){Kd?Xo?Xo.push(u):Xo=[u]:Kd=u}function zm(){return Kd!==null||Xo!==null}function fh(){if(Kd){var u=Kd,d=Xo;if(Kd=null,Xo=null,ov(u),d)for(var g=0;g<d.length;g++)ov(d[g])}}var Yd=function(u,d){return u(d)},Jd=function(){},Hm=!1;function Rc(){var u=zm();u&&(Jd(),fh())}function hh(u,d,g){if(Hm)return u(d,g);Hm=!0;try{return Yd(u,d,g)}finally{Hm=!1,Rc()}}function Du(u,d,g){Yd=u,Jd=g}function uv(u){return u==="button"||u==="input"||u==="select"||u==="textarea"}function Oc(u,d,g){switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(g.disabled&&uv(d));default:return!1}}function ku(u,d){var g=u.stateNode;if(g===null)return null;var E=Q_(g);if(E===null)return null;var D=E[d];if(Oc(d,u.type,E))return null;if(D&&typeof D!="function")throw new Error("Expected `"+d+"` listener to be a function, instead got a value of `"+typeof D+"` type.");return D}var Zo=!1;if(Te)try{var Pu={};Object.defineProperty(Pu,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",Pu,Pu),window.removeEventListener("test",Pu,Pu)}catch{Zo=!1}function mh(u,d,g,E,D,$,K,ee,se){var be=Array.prototype.slice.call(arguments,3);try{d.apply(g,be)}catch(Se){this.onError(Se)}}var qd=mh;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var jc=document.createElement("react");qd=function(d,g,E,D,$,K,ee,se,be){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var Se=document.createEvent("Event"),Ve=!1,Me=!0,Je=window.event,Xe=Object.getOwnPropertyDescriptor(window,"event");function lt(){jc.removeEventListener(ut,An,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=Je)}var Yt=Array.prototype.slice.call(arguments,3);function An(){Ve=!0,lt(),g.apply(E,Yt),Me=!1}var En,kr=!1,wr=!1;function Ge(Ke){if(En=Ke.error,kr=!0,En===null&&Ke.colno===0&&Ke.lineno===0&&(wr=!0),Ke.defaultPrevented&&En!=null&&typeof En=="object")try{En._suppressLogging=!0}catch{}}var ut="react-"+(d||"invokeguardedcallback");if(window.addEventListener("error",Ge),jc.addEventListener(ut,An,!1),Se.initEvent(ut,!1,!1),jc.dispatchEvent(Se),Xe&&Object.defineProperty(window,"event",Xe),Ve&&Me&&(kr?wr&&(En=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):En=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(En)),window.removeEventListener("error",Ge),!Ve)return lt(),mh.apply(this,arguments)}}var yb=qd,Ic=!1,ph=null,yo=!1,gh=null,Ux={onError:function(u){Ic=!0,ph=u}};function Gm(u,d,g,E,D,$,K,ee,se){Ic=!1,ph=null,yb.apply(Ux,arguments)}function Xd(u,d,g,E,D,$,K,ee,se){if(Gm.apply(this,arguments),Ic){var be=Zd();yo||(yo=!0,gh=be)}}function vh(){if(yo){var u=gh;throw yo=!1,gh=null,u}}function cv(){return Ic}function Zd(){if(Ic){var u=ph;return Ic=!1,ph=null,u}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Fl(u){return u._reactInternals}function Km(u){return u._reactInternals!==void 0}function Qd(u,d){u._reactInternals=d}var _n=0,Qo=1,yi=2,mr=4,el=16,Au=32,Ym=64,Sr=128,tl=256,Ru=512,ef=1024,Bl=2048,Ul=4096,Mc=8192,yh=16384,bh=32767,Jm=32768,ja=65536,wh=131072,xh=1048576,dv=2097152,Vc=4194304,fv=8388608,Sa=16777216,Sh=33554432,tf=mr|ef|0,Yr=yi|mr|el|Au|Ru|Ul|Mc,da=mr|Ym|Ru|Mc,bo=Bl|el,Ia=Vc|fv|dv,Tr=n.ReactCurrentOwner;function ss(u){var d=u,g=u;if(u.alternate)for(;d.return;)d=d.return;else{var E=d;do d=E,(d.flags&(yi|Ul))!==_n&&(g=d.return),E=d.return;while(E)}return d.tag===h?g:null}function Eh(u){if(u.tag===P){var d=u.memoizedState;if(d===null){var g=u.alternate;g!==null&&(d=g.memoizedState)}if(d!==null)return d.dehydrated}return null}function os(u){return u.tag===h?u.stateNode.containerInfo:null}function xs(u){return ss(u)===u}function nl(u){{var d=Tr.current;if(d!==null&&d.tag===c){var g=d,E=g.stateNode;E._warnedAboutRefsInRender||s("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",kn(g)||"A component"),E._warnedAboutRefsInRender=!0}}var D=Fl(u);return D?ss(D)===D:!1}function bb(u){if(ss(u)!==u)throw new Error("Unable to find node on an unmounted component.")}function Js(u){var d=u.alternate;if(!d){var g=ss(u);if(g===null)throw new Error("Unable to find node on an unmounted component.");return g!==u?null:u}for(var E=u,D=d;;){var $=E.return;if($===null)break;var K=$.alternate;if(K===null){var ee=$.return;if(ee!==null){E=D=ee;continue}break}if($.child===K.child){for(var se=$.child;se;){if(se===E)return bb($),u;if(se===D)return bb($),d;se=se.sibling}throw new Error("Unable to find node on an unmounted component.")}if(E.return!==D.return)E=$,D=K;else{for(var be=!1,Se=$.child;Se;){if(Se===E){be=!0,E=$,D=K;break}if(Se===D){be=!0,D=$,E=K;break}Se=Se.sibling}if(!be){for(Se=K.child;Se;){if(Se===E){be=!0,E=K,D=$;break}if(Se===D){be=!0,D=K,E=$;break}Se=Se.sibling}if(!be)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(E.alternate!==D)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(E.tag!==h)throw new Error("Unable to find node on an unmounted component.");return E.stateNode.current===E?u:d}function Wl(u){var d=Js(u);return d!==null?Ou(d):null}function Ou(u){if(u.tag===p||u.tag===v)return u;for(var d=u.child;d!==null;){var g=Ou(d);if(g!==null)return g;d=d.sibling}return null}function Wx(u){var d=Js(u);return d!==null?qm(d):null}function qm(u){if(u.tag===p||u.tag===v)return u;for(var d=u.child;d!==null;){if(d.tag!==m){var g=qm(d);if(g!==null)return g}d=d.sibling}return null}var nf=e.unstable_scheduleCallback,zx=e.unstable_cancelCallback,Hx=e.unstable_shouldYield,Xm=e.unstable_requestPaint,$i=e.unstable_now,wb=e.unstable_getCurrentPriorityLevel,Nh=e.unstable_ImmediatePriority,_h=e.unstable_UserBlockingPriority,$c=e.unstable_NormalPriority,xb=e.unstable_LowPriority,Zm=e.unstable_IdlePriority,Gx=e.unstable_yieldValue,Kx=e.unstable_setDisableYieldValue,rf=null,Ea=null,Ht=null,rl=!1,ls=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function Sb(u){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled)return!0;if(!d.supportsFiber)return s("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{te&&(u=gn({},u,{getLaneLabelMap:af,injectProfilingHooks:tp})),rf=d.inject(u),Ea=d}catch(g){s("React instrumentation encountered an error: %s.",g)}return!!d.checkDCE}function hv(u,d){if(Ea&&typeof Ea.onScheduleFiberRoot=="function")try{Ea.onScheduleFiberRoot(rf,u,d)}catch(g){rl||(rl=!0,s("React instrumentation encountered an error: %s",g))}}function Eb(u,d){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{var g=(u.current.flags&Sr)===Sr;if(re){var E;switch(d){case Gl:E=Nh;break;case jh:E=_h;break;case Ih:E=$c;break;case D_:E=Zm;break;default:E=$c;break}Ea.onCommitFiberRoot(rf,u,E,g)}}catch(D){rl||(rl=!0,s("React instrumentation encountered an error: %s",D))}}function Qm(u){if(Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(rf,u)}catch(d){rl||(rl=!0,s("React instrumentation encountered an error: %s",d))}}function ep(u){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(rf,u)}catch(d){rl||(rl=!0,s("React instrumentation encountered an error: %s",d))}}function Ei(u){if(typeof Gx=="function"&&(Kx(u),i(u)),Ea&&typeof Ea.setStrictMode=="function")try{Ea.setStrictMode(rf,u)}catch(d){rl||(rl=!0,s("React instrumentation encountered an error: %s",d))}}function tp(u){Ht=u}function af(){{for(var u=new Map,d=1,g=0;g<ap;g++){var E=kb(d);u.set(d,E),d*=2}return u}}function np(u){Ht!==null&&typeof Ht.markCommitStarted=="function"&&Ht.markCommitStarted(u)}function Ch(){Ht!==null&&typeof Ht.markCommitStopped=="function"&&Ht.markCommitStopped()}function ju(u){Ht!==null&&typeof Ht.markComponentRenderStarted=="function"&&Ht.markComponentRenderStarted(u)}function wo(){Ht!==null&&typeof Ht.markComponentRenderStopped=="function"&&Ht.markComponentRenderStopped()}function mv(u){Ht!==null&&typeof Ht.markComponentPassiveEffectMountStarted=="function"&&Ht.markComponentPassiveEffectMountStarted(u)}function Lc(){Ht!==null&&typeof Ht.markComponentPassiveEffectMountStopped=="function"&&Ht.markComponentPassiveEffectMountStopped()}function Nb(u){Ht!==null&&typeof Ht.markComponentPassiveEffectUnmountStarted=="function"&&Ht.markComponentPassiveEffectUnmountStarted(u)}function Yx(){Ht!==null&&typeof Ht.markComponentPassiveEffectUnmountStopped=="function"&&Ht.markComponentPassiveEffectUnmountStopped()}function sf(u){Ht!==null&&typeof Ht.markComponentLayoutEffectMountStarted=="function"&&Ht.markComponentLayoutEffectMountStarted(u)}function of(){Ht!==null&&typeof Ht.markComponentLayoutEffectMountStopped=="function"&&Ht.markComponentLayoutEffectMountStopped()}function _b(u){Ht!==null&&typeof Ht.markComponentLayoutEffectUnmountStarted=="function"&&Ht.markComponentLayoutEffectUnmountStarted(u)}function Cb(){Ht!==null&&typeof Ht.markComponentLayoutEffectUnmountStopped=="function"&&Ht.markComponentLayoutEffectUnmountStopped()}function Fc(u,d,g){Ht!==null&&typeof Ht.markComponentErrored=="function"&&Ht.markComponentErrored(u,d,g)}function rp(u,d,g){Ht!==null&&typeof Ht.markComponentSuspended=="function"&&Ht.markComponentSuspended(u,d,g)}function zl(u){Ht!==null&&typeof Ht.markLayoutEffectsStarted=="function"&&Ht.markLayoutEffectsStarted(u)}function pv(){Ht!==null&&typeof Ht.markLayoutEffectsStopped=="function"&&Ht.markLayoutEffectsStopped()}function Bc(u){Ht!==null&&typeof Ht.markPassiveEffectsStarted=="function"&&Ht.markPassiveEffectsStarted(u)}function Th(){Ht!==null&&typeof Ht.markPassiveEffectsStopped=="function"&&Ht.markPassiveEffectsStopped()}function il(u){Ht!==null&&typeof Ht.markRenderStarted=="function"&&Ht.markRenderStarted(u)}function al(){Ht!==null&&typeof Ht.markRenderYielded=="function"&&Ht.markRenderYielded()}function sl(){Ht!==null&&typeof Ht.markRenderStopped=="function"&&Ht.markRenderStopped()}function ip(u){Ht!==null&&typeof Ht.markRenderScheduled=="function"&&Ht.markRenderScheduled(u)}function Dh(u,d){Ht!==null&&typeof Ht.markForceUpdateScheduled=="function"&&Ht.markForceUpdateScheduled(u,d)}function Ss(u,d){Ht!==null&&typeof Ht.markStateUpdateScheduled=="function"&&Ht.markStateUpdateScheduled(u,d)}var bn=0,sr=1,Er=2,ti=8,xo=16,Tb=Math.clz32?Math.clz32:gv,Db=Math.log,kh=Math.LN2;function gv(u){var d=u>>>0;return d===0?32:31-(Db(d)/kh|0)|0}var ap=31,bt=0,Ni=0,Ln=1,Iu=2,So=4,Mu=8,Eo=16,Uc=32,Wc=4194240,Ph=64,vv=128,sp=256,yv=512,Ah=1024,bv=2048,Ma=4096,wv=8192,lf=16384,xv=32768,fa=65536,Sv=131072,op=262144,lp=524288,Vu=1048576,up=2097152,cp=130023424,$u=4194304,Hl=8388608,zc=16777216,Ev=33554432,Rh=67108864,uf=$u,Lu=134217728,Nv=268435455,Fu=268435456,Bu=536870912,Es=1073741824;function kb(u){{if(u&Ln)return"Sync";if(u&Iu)return"InputContinuousHydration";if(u&So)return"InputContinuous";if(u&Mu)return"DefaultHydration";if(u&Eo)return"Default";if(u&Uc)return"TransitionHydration";if(u&Wc)return"Transition";if(u&cp)return"Retry";if(u&Lu)return"SelectiveHydration";if(u&Fu)return"IdleHydration";if(u&Bu)return"Idle";if(u&Es)return"Offscreen"}}var Jr=-1,Oh=Ph,dp=$u;function cf(u){switch(bi(u)){case Ln:return Ln;case Iu:return Iu;case So:return So;case Mu:return Mu;case Eo:return Eo;case Uc:return Uc;case Ph:case vv:case sp:case yv:case Ah:case bv:case Ma:case wv:case lf:case xv:case fa:case Sv:case op:case lp:case Vu:case up:return u&Wc;case $u:case Hl:case zc:case Ev:case Rh:return u&cp;case Lu:return Lu;case Fu:return Fu;case Bu:return Bu;case Es:return Es;default:return s("Should have found matching lanes. This is a bug in React."),u}}function fp(u,d){var g=u.pendingLanes;if(g===bt)return bt;var E=bt,D=u.suspendedLanes,$=u.pingedLanes,K=g&Nv;if(K!==bt){var ee=K&~D;if(ee!==bt)E=cf(ee);else{var se=K&$;se!==bt&&(E=cf(se))}}else{var be=g&~D;be!==bt?E=cf(be):$!==bt&&(E=cf($))}if(E===bt)return bt;if(d!==bt&&d!==E&&(d&D)===bt){var Se=bi(E),Ve=bi(d);if(Se>=Ve||Se===Eo&&(Ve&Wc)!==bt)return d}(E&So)!==bt&&(E|=g&Eo);var Me=u.entangledLanes;if(Me!==bt)for(var Je=u.entanglements,Xe=E&Me;Xe>0;){var lt=Ns(Xe),Yt=1<<lt;E|=Je[lt],Xe&=~Yt}return E}function M(u,d){for(var g=u.eventTimes,E=Jr;d>0;){var D=Ns(d),$=1<<D,K=g[D];K>E&&(E=K),d&=~$}return E}function w(u,d){switch(u){case Ln:case Iu:case So:return d+250;case Mu:case Eo:case Uc:case Ph:case vv:case sp:case yv:case Ah:case bv:case Ma:case wv:case lf:case xv:case fa:case Sv:case op:case lp:case Vu:case up:return d+5e3;case $u:case Hl:case zc:case Ev:case Rh:return Jr;case Lu:case Fu:case Bu:case Es:return Jr;default:return s("Should have found matching lanes. This is a bug in React."),Jr}}function C(u,d){for(var g=u.pendingLanes,E=u.suspendedLanes,D=u.pingedLanes,$=u.expirationTimes,K=g;K>0;){var ee=Ns(K),se=1<<ee,be=$[ee];be===Jr?((se&E)===bt||(se&D)!==bt)&&($[ee]=w(se,d)):be<=d&&(u.expiredLanes|=se),K&=~se}}function j(u){return cf(u.pendingLanes)}function z(u){var d=u.pendingLanes&~Es;return d!==bt?d:d&Es?Es:bt}function Q(u){return(u&Ln)!==bt}function le(u){return(u&Nv)!==bt}function ge(u){return(u&cp)===u}function Pe(u){var d=Ln|So|Eo;return(u&d)===bt}function ze(u){return(u&Wc)===u}function mt(u,d){var g=Iu|So|Mu|Eo;return(d&g)!==bt}function Et(u,d){return(d&u.expiredLanes)!==bt}function Vt(u){return(u&Wc)!==bt}function Wn(){var u=Oh;return Oh<<=1,(Oh&Wc)===bt&&(Oh=Ph),u}function Or(){var u=dp;return dp<<=1,(dp&cp)===bt&&(dp=$u),u}function bi(u){return u&-u}function No(u){return bi(u)}function Ns(u){return 31-Tb(u)}function _o(u){return Ns(u)}function aa(u,d){return(u&d)!==bt}function df(u,d){return(u&d)===d}function rr(u,d){return u|d}function T_(u,d){return u&~d}function FB(u,d){return u&d}function Eot(u){return u}function khe(u,d){return u!==Ni&&u<d?u:d}function lO(u){for(var d=[],g=0;g<ap;g++)d.push(u);return d}function Jx(u,d,g){u.pendingLanes|=d,d!==Bu&&(u.suspendedLanes=bt,u.pingedLanes=bt);var E=u.eventTimes,D=_o(d);E[D]=g}function Phe(u,d){u.suspendedLanes|=d,u.pingedLanes&=~d;for(var g=u.expirationTimes,E=d;E>0;){var D=Ns(E),$=1<<D;g[D]=Jr,E&=~$}}function BB(u,d,g){u.pingedLanes|=u.suspendedLanes&d}function Ahe(u,d){var g=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=bt,u.pingedLanes=bt,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d;for(var E=u.entanglements,D=u.eventTimes,$=u.expirationTimes,K=g;K>0;){var ee=Ns(K),se=1<<ee;E[ee]=bt,D[ee]=Jr,$[ee]=Jr,K&=~se}}function uO(u,d){for(var g=u.entangledLanes|=d,E=u.entanglements,D=g;D;){var $=Ns(D),K=1<<$;K&d|E[$]&d&&(E[$]|=d),D&=~K}}function Rhe(u,d){var g=bi(d),E;switch(g){case So:E=Iu;break;case Eo:E=Mu;break;case Ph:case vv:case sp:case yv:case Ah:case bv:case Ma:case wv:case lf:case xv:case fa:case Sv:case op:case lp:case Vu:case up:case $u:case Hl:case zc:case Ev:case Rh:E=Uc;break;case Bu:E=Fu;break;default:E=Ni;break}return(E&(u.suspendedLanes|d))!==Ni?Ni:E}function UB(u,d,g){if(ls)for(var E=u.pendingUpdatersLaneMap;g>0;){var D=_o(g),$=1<<D,K=E[D];K.add(d),g&=~$}}function WB(u,d){if(ls)for(var g=u.pendingUpdatersLaneMap,E=u.memoizedUpdaters;d>0;){var D=_o(d),$=1<<D,K=g[D];K.size>0&&(K.forEach(function(ee){var se=ee.alternate;(se===null||!E.has(se))&&E.add(ee)}),K.clear()),d&=~$}}function zB(u,d){return null}var Gl=Ln,jh=So,Ih=Eo,D_=Bu,qx=Ni;function Hc(){return qx}function us(u){qx=u}function Ohe(u,d){var g=qx;try{return qx=u,d()}finally{qx=g}}function jhe(u,d){return u!==0&&u<d?u:d}function Ihe(u,d){return u>d?u:d}function cO(u,d){return u!==0&&u<d}function HB(u){var d=bi(u);return cO(Gl,d)?cO(jh,d)?le(d)?Ih:D_:jh:Gl}function k_(u){var d=u.current.memoizedState;return d.isDehydrated}var GB;function Mhe(u){GB=u}function Vhe(u){GB(u)}var dO;function $he(u){dO=u}var KB;function Lhe(u){KB=u}var YB;function Fhe(u){YB=u}var JB;function Bhe(u){JB=u}var fO=!1,P_=[],hp=null,mp=null,pp=null,Xx=new Map,Zx=new Map,gp=[],Uhe=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function Whe(u){return Uhe.indexOf(u)>-1}function zhe(u,d,g,E,D){return{blockedOn:u,domEventName:d,eventSystemFlags:g,nativeEvent:D,targetContainers:[E]}}function qB(u,d){switch(u){case"focusin":case"focusout":hp=null;break;case"dragenter":case"dragleave":mp=null;break;case"mouseover":case"mouseout":pp=null;break;case"pointerover":case"pointerout":{var g=d.pointerId;Xx.delete(g);break}case"gotpointercapture":case"lostpointercapture":{var E=d.pointerId;Zx.delete(E);break}}}function Qx(u,d,g,E,D,$){if(u===null||u.nativeEvent!==$){var K=zhe(d,g,E,D,$);if(d!==null){var ee=bp(d);ee!==null&&dO(ee)}return K}u.eventSystemFlags|=E;var se=u.targetContainers;return D!==null&&se.indexOf(D)===-1&&se.push(D),u}function Hhe(u,d,g,E,D){switch(d){case"focusin":{var $=D;return hp=Qx(hp,u,d,g,E,$),!0}case"dragenter":{var K=D;return mp=Qx(mp,u,d,g,E,K),!0}case"mouseover":{var ee=D;return pp=Qx(pp,u,d,g,E,ee),!0}case"pointerover":{var se=D,be=se.pointerId;return Xx.set(be,Qx(Xx.get(be)||null,u,d,g,E,se)),!0}case"gotpointercapture":{var Se=D,Ve=Se.pointerId;return Zx.set(Ve,Qx(Zx.get(Ve)||null,u,d,g,E,Se)),!0}}return!1}function XB(u){var d=Tv(u.target);if(d!==null){var g=ss(d);if(g!==null){var E=g.tag;if(E===P){var D=Eh(g);if(D!==null){u.blockedOn=D,JB(u.priority,function(){KB(g)});return}}else if(E===h){var $=g.stateNode;if(k_($)){u.blockedOn=os(g);return}}}}u.blockedOn=null}function Ghe(u){for(var d=YB(),g={blockedOn:null,target:u,priority:d},E=0;E<gp.length&&cO(d,gp[E].priority);E++);gp.splice(E,0,g),E===0&&XB(g)}function A_(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;d.length>0;){var g=d[0],E=pO(u.domEventName,u.eventSystemFlags,g,u.nativeEvent);if(E===null){var D=u.nativeEvent,$=new D.constructor(D.type,D);Gd($),D.target.dispatchEvent($),sv()}else{var K=bp(E);return K!==null&&dO(K),u.blockedOn=E,!1}d.shift()}return!0}function ZB(u,d,g){A_(u)&&g.delete(d)}function Khe(){fO=!1,hp!==null&&A_(hp)&&(hp=null),mp!==null&&A_(mp)&&(mp=null),pp!==null&&A_(pp)&&(pp=null),Xx.forEach(ZB),Zx.forEach(ZB)}function e1(u,d){u.blockedOn===d&&(u.blockedOn=null,fO||(fO=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Khe)))}function t1(u){if(P_.length>0){e1(P_[0],u);for(var d=1;d<P_.length;d++){var g=P_[d];g.blockedOn===u&&(g.blockedOn=null)}}hp!==null&&e1(hp,u),mp!==null&&e1(mp,u),pp!==null&&e1(pp,u);var E=function(ee){return e1(ee,u)};Xx.forEach(E),Zx.forEach(E);for(var D=0;D<gp.length;D++){var $=gp[D];$.blockedOn===u&&($.blockedOn=null)}for(;gp.length>0;){var K=gp[0];if(K.blockedOn!==null)break;XB(K),K.blockedOn===null&&gp.shift()}}var Pb=n.ReactCurrentBatchConfig,hO=!0;function QB(u){hO=!!u}function Yhe(){return hO}function Jhe(u,d,g){var E=eU(d),D;switch(E){case Gl:D=qhe;break;case jh:D=Xhe;break;case Ih:default:D=mO;break}return D.bind(null,d,g,u)}function qhe(u,d,g,E){var D=Hc(),$=Pb.transition;Pb.transition=null;try{us(Gl),mO(u,d,g,E)}finally{us(D),Pb.transition=$}}function Xhe(u,d,g,E){var D=Hc(),$=Pb.transition;Pb.transition=null;try{us(jh),mO(u,d,g,E)}finally{us(D),Pb.transition=$}}function mO(u,d,g,E){hO&&Zhe(u,d,g,E)}function Zhe(u,d,g,E){var D=pO(u,d,g,E);if(D===null){kO(u,d,E,R_,g),qB(u,E);return}if(Hhe(D,u,d,g,E)){E.stopPropagation();return}if(qB(u,E),d&Tu&&Whe(u)){for(;D!==null;){var $=bp(D);$!==null&&Vhe($);var K=pO(u,d,g,E);if(K===null&&kO(u,d,E,R_,g),K===D)break;D=K}D!==null&&E.stopPropagation();return}kO(u,d,E,null,g)}var R_=null;function pO(u,d,g,E){R_=null;var D=ch(E),$=Tv(D);if($!==null){var K=ss($);if(K===null)$=null;else{var ee=K.tag;if(ee===P){var se=Eh(K);if(se!==null)return se;$=null}else if(ee===h){var be=K.stateNode;if(k_(be))return os(K);$=null}else K!==$&&($=null)}}return R_=$,null}function eU(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return Gl;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return jh;case"message":{var d=wb();switch(d){case Nh:return Gl;case _h:return jh;case $c:case xb:return Ih;case Zm:return D_;default:return Ih}}default:return Ih}}function Qhe(u,d,g){return u.addEventListener(d,g,!1),g}function eme(u,d,g){return u.addEventListener(d,g,!0),g}function tme(u,d,g,E){return u.addEventListener(d,g,{capture:!0,passive:E}),g}function nme(u,d,g,E){return u.addEventListener(d,g,{passive:E}),g}var n1=null,gO=null,r1=null;function rme(u){return n1=u,gO=nU(),!0}function ime(){n1=null,gO=null,r1=null}function tU(){if(r1)return r1;var u,d=gO,g=d.length,E,D=nU(),$=D.length;for(u=0;u<g&&d[u]===D[u];u++);var K=g-u;for(E=1;E<=K&&d[g-E]===D[$-E];E++);var ee=E>1?1-E:void 0;return r1=D.slice(u,ee),r1}function nU(){return"value"in n1?n1.value:n1.textContent}function O_(u){var d,g=u.keyCode;return"charCode"in u?(d=u.charCode,d===0&&g===13&&(d=13)):d=g,d===10&&(d=13),d>=32||d===13?d:0}function j_(){return!0}function rU(){return!1}function Kl(u){function d(g,E,D,$,K){this._reactName=g,this._targetInst=D,this.type=E,this.nativeEvent=$,this.target=K,this.currentTarget=null;for(var ee in u)if(u.hasOwnProperty(ee)){var se=u[ee];se?this[ee]=se($):this[ee]=$[ee]}var be=$.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1;return be?this.isDefaultPrevented=j_:this.isDefaultPrevented=rU,this.isPropagationStopped=rU,this}return gn(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=j_)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=j_)},persist:function(){},isPersistent:j_}),d}var Ab={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vO=Kl(Ab),i1=gn({},Ab,{view:0,detail:0}),ame=Kl(i1),yO,bO,a1;function sme(u){u!==a1&&(a1&&u.type==="mousemove"?(yO=u.screenX-a1.screenX,bO=u.screenY-a1.screenY):(yO=0,bO=0),a1=u)}var I_=gn({},i1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xO,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(sme(u),yO)},movementY:function(u){return"movementY"in u?u.movementY:bO}}),iU=Kl(I_),ome=gn({},I_,{dataTransfer:0}),lme=Kl(ome),ume=gn({},i1,{relatedTarget:0}),wO=Kl(ume),cme=gn({},Ab,{animationName:0,elapsedTime:0,pseudoElement:0}),dme=Kl(cme),fme=gn({},Ab,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),hme=Kl(fme),mme=gn({},Ab,{data:0}),aU=Kl(mme),pme=aU,gme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function yme(u){if(u.key){var d=gme[u.key]||u.key;if(d!=="Unidentified")return d}if(u.type==="keypress"){var g=O_(u);return g===13?"Enter":String.fromCharCode(g)}return u.type==="keydown"||u.type==="keyup"?vme[u.keyCode]||"Unidentified":""}var bme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wme(u){var d=this,g=d.nativeEvent;if(g.getModifierState)return g.getModifierState(u);var E=bme[u];return E?!!g[E]:!1}function xO(u){return wme}var xme=gn({},i1,{key:yme,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xO,charCode:function(u){return u.type==="keypress"?O_(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?O_(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Sme=Kl(xme),Eme=gn({},I_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sU=Kl(Eme),Nme=gn({},i1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xO}),_me=Kl(Nme),Cme=gn({},Ab,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tme=Kl(Cme),Dme=gn({},I_,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),kme=Kl(Dme),Pme=[9,13,27,32],oU=229,SO=Te&&"CompositionEvent"in window,s1=null;Te&&"documentMode"in document&&(s1=document.documentMode);var Ame=Te&&"TextEvent"in window&&!s1,lU=Te&&(!SO||s1&&s1>8&&s1<=11),uU=32,cU=String.fromCharCode(uU);function Rme(){Ne("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ne("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),Ne("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),Ne("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var dU=!1;function Ome(u){return(u.ctrlKey||u.altKey||u.metaKey)&&!(u.ctrlKey&&u.altKey)}function jme(u){switch(u){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function Ime(u,d){return u==="keydown"&&d.keyCode===oU}function fU(u,d){switch(u){case"keyup":return Pme.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==oU;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hU(u){var d=u.detail;return typeof d=="object"&&"data"in d?d.data:null}function mU(u){return u.locale==="ko"}var Rb=!1;function Mme(u,d,g,E,D){var $,K;if(SO?$=jme(d):Rb?fU(d,E)&&($="onCompositionEnd"):Ime(d,E)&&($="onCompositionStart"),!$)return null;lU&&!mU(E)&&(!Rb&&$==="onCompositionStart"?Rb=rme(D):$==="onCompositionEnd"&&Rb&&(K=tU()));var ee=F_(g,$);if(ee.length>0){var se=new aU($,d,null,E,D);if(u.push({event:se,listeners:ee}),K)se.data=K;else{var be=hU(E);be!==null&&(se.data=be)}}}function Vme(u,d){switch(u){case"compositionend":return hU(d);case"keypress":var g=d.which;return g!==uU?null:(dU=!0,cU);case"textInput":var E=d.data;return E===cU&&dU?null:E;default:return null}}function $me(u,d){if(Rb){if(u==="compositionend"||!SO&&fU(u,d)){var g=tU();return ime(),Rb=!1,g}return null}switch(u){case"paste":return null;case"keypress":if(!Ome(d)){if(d.char&&d.char.length>1)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return lU&&!mU(d)?null:d.data;default:return null}}function Lme(u,d,g,E,D){var $;if(Ame?$=Vme(d,E):$=$me(d,E),!$)return null;var K=F_(g,"onBeforeInput");if(K.length>0){var ee=new pme("onBeforeInput","beforeinput",null,E,D);u.push({event:ee,listeners:K}),ee.data=$}}function Fme(u,d,g,E,D,$,K){Mme(u,d,g,E,D),Lme(u,d,g,E,D)}var Bme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pU(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!Bme[u.type]:d==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Ume(u){if(!Te)return!1;var d="on"+u,g=d in document;if(!g){var E=document.createElement("div");E.setAttribute(d,"return;"),g=typeof E[d]=="function"}return g}function Wme(){Ne("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function gU(u,d,g,E){dh(E);var D=F_(d,"onChange");if(D.length>0){var $=new vO("onChange","change",null,g,E);u.push({event:$,listeners:D})}}var o1=null,l1=null;function zme(u){var d=u.nodeName&&u.nodeName.toLowerCase();return d==="select"||d==="input"&&u.type==="file"}function Hme(u){var d=[];gU(d,l1,u,ch(u)),hh(Gme,d)}function Gme(u){jU(u,0)}function M_(u){var d=$b(u);if(jl(d))return u}function Kme(u,d){if(u==="change")return d}var vU=!1;Te&&(vU=Ume("input")&&(!document.documentMode||document.documentMode>9));function Yme(u,d){o1=u,l1=d,o1.attachEvent("onpropertychange",bU)}function yU(){o1&&(o1.detachEvent("onpropertychange",bU),o1=null,l1=null)}function bU(u){u.propertyName==="value"&&M_(l1)&&Hme(u)}function Jme(u,d,g){u==="focusin"?(yU(),Yme(d,g)):u==="focusout"&&yU()}function qme(u,d){if(u==="selectionchange"||u==="keyup"||u==="keydown")return M_(l1)}function Xme(u){var d=u.nodeName;return d&&d.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")}function Zme(u,d){if(u==="click")return M_(d)}function Qme(u,d){if(u==="input"||u==="change")return M_(d)}function epe(u){var d=u._wrapperState;!d||!d.controlled||u.type!=="number"||xt(u,"number",u.value)}function tpe(u,d,g,E,D,$,K){var ee=g?$b(g):window,se,be;if(zme(ee)?se=Kme:pU(ee)?vU?se=Qme:(se=qme,be=Jme):Xme(ee)&&(se=Zme),se){var Se=se(d,g);if(Se){gU(u,Se,E,D);return}}be&&be(d,ee,g),d==="focusout"&&epe(ee)}function npe(){ke("onMouseEnter",["mouseout","mouseover"]),ke("onMouseLeave",["mouseout","mouseover"]),ke("onPointerEnter",["pointerout","pointerover"]),ke("onPointerLeave",["pointerout","pointerover"])}function rpe(u,d,g,E,D,$,K){var ee=d==="mouseover"||d==="pointerover",se=d==="mouseout"||d==="pointerout";if(ee&&!Pc(E)){var be=E.relatedTarget||E.fromElement;if(be&&(Tv(be)||E1(be)))return}if(!(!se&&!ee)){var Se;if(D.window===D)Se=D;else{var Ve=D.ownerDocument;Ve?Se=Ve.defaultView||Ve.parentWindow:Se=window}var Me,Je;if(se){var Xe=E.relatedTarget||E.toElement;if(Me=g,Je=Xe?Tv(Xe):null,Je!==null){var lt=ss(Je);(Je!==lt||Je.tag!==p&&Je.tag!==v)&&(Je=null)}}else Me=null,Je=g;if(Me!==Je){var Yt=iU,An="onMouseLeave",En="onMouseEnter",kr="mouse";(d==="pointerout"||d==="pointerover")&&(Yt=sU,An="onPointerLeave",En="onPointerEnter",kr="pointer");var wr=Me==null?Se:$b(Me),Ge=Je==null?Se:$b(Je),ut=new Yt(An,kr+"leave",Me,E,D);ut.target=wr,ut.relatedTarget=Ge;var Ke=null,Ct=Tv(D);if(Ct===g){var Qt=new Yt(En,kr+"enter",Je,E,D);Qt.target=Ge,Qt.relatedTarget=wr,Ke=Qt}Tpe(u,ut,Ke,Me,Je)}}}function ipe(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var Yl=typeof Object.is=="function"?Object.is:ipe;function u1(u,d){if(Yl(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var g=Object.keys(u),E=Object.keys(d);if(g.length!==E.length)return!1;for(var D=0;D<g.length;D++){var $=g[D];if(!ye.call(d,$)||!Yl(u[$],d[$]))return!1}return!0}function wU(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function ape(u){for(;u;){if(u.nextSibling)return u.nextSibling;u=u.parentNode}}function xU(u,d){for(var g=wU(u),E=0,D=0;g;){if(g.nodeType===Vl){if(D=E+g.textContent.length,E<=d&&D>=d)return{node:g,offset:d-E};E=D}g=wU(ape(g))}}function spe(u){var d=u.ownerDocument,g=d&&d.defaultView||window,E=g.getSelection&&g.getSelection();if(!E||E.rangeCount===0)return null;var D=E.anchorNode,$=E.anchorOffset,K=E.focusNode,ee=E.focusOffset;try{D.nodeType,K.nodeType}catch{return null}return ope(u,D,$,K,ee)}function ope(u,d,g,E,D){var $=0,K=-1,ee=-1,se=0,be=0,Se=u,Ve=null;e:for(;;){for(var Me=null;Se===d&&(g===0||Se.nodeType===Vl)&&(K=$+g),Se===E&&(D===0||Se.nodeType===Vl)&&(ee=$+D),Se.nodeType===Vl&&($+=Se.nodeValue.length),(Me=Se.firstChild)!==null;)Ve=Se,Se=Me;for(;;){if(Se===u)break e;if(Ve===d&&++se===g&&(K=$),Ve===E&&++be===D&&(ee=$),(Me=Se.nextSibling)!==null)break;Se=Ve,Ve=Se.parentNode}Se=Me}return K===-1||ee===-1?null:{start:K,end:ee}}function lpe(u,d){var g=u.ownerDocument||document,E=g&&g.defaultView||window;if(E.getSelection){var D=E.getSelection(),$=u.textContent.length,K=Math.min(d.start,$),ee=d.end===void 0?K:Math.min(d.end,$);if(!D.extend&&K>ee){var se=ee;ee=K,K=se}var be=xU(u,K),Se=xU(u,ee);if(be&&Se){if(D.rangeCount===1&&D.anchorNode===be.node&&D.anchorOffset===be.offset&&D.focusNode===Se.node&&D.focusOffset===Se.offset)return;var Ve=g.createRange();Ve.setStart(be.node,be.offset),D.removeAllRanges(),K>ee?(D.addRange(Ve),D.extend(Se.node,Se.offset)):(Ve.setEnd(Se.node,Se.offset),D.addRange(Ve))}}}function SU(u){return u&&u.nodeType===Vl}function EU(u,d){return!u||!d?!1:u===d?!0:SU(u)?!1:SU(d)?EU(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1}function upe(u){return u&&u.ownerDocument&&EU(u.ownerDocument.documentElement,u)}function cpe(u){try{return typeof u.contentWindow.location.href=="string"}catch{return!1}}function NU(){for(var u=window,d=rs();d instanceof u.HTMLIFrameElement;){if(cpe(d))u=d.contentWindow;else return d;d=rs(u.document)}return d}function EO(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function dpe(){var u=NU();return{focusedElem:u,selectionRange:EO(u)?hpe(u):null}}function fpe(u){var d=NU(),g=u.focusedElem,E=u.selectionRange;if(d!==g&&upe(g)){E!==null&&EO(g)&&mpe(g,E);for(var D=[],$=g;$=$.parentNode;)$.nodeType===is&&D.push({element:$,left:$.scrollLeft,top:$.scrollTop});typeof g.focus=="function"&&g.focus();for(var K=0;K<D.length;K++){var ee=D[K];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}}function hpe(u){var d;return"selectionStart"in u?d={start:u.selectionStart,end:u.selectionEnd}:d=spe(u),d||{start:0,end:0}}function mpe(u,d){var g=d.start,E=d.end;E===void 0&&(E=g),"selectionStart"in u?(u.selectionStart=g,u.selectionEnd=Math.min(E,u.value.length)):lpe(u,d)}var ppe=Te&&"documentMode"in document&&document.documentMode<=11;function gpe(){Ne("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var Ob=null,NO=null,c1=null,_O=!1;function vpe(u){if("selectionStart"in u&&EO(u))return{start:u.selectionStart,end:u.selectionEnd};var d=u.ownerDocument&&u.ownerDocument.defaultView||window,g=d.getSelection();return{anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}}function ype(u){return u.window===u?u.document:u.nodeType===$l?u:u.ownerDocument}function _U(u,d,g){var E=ype(g);if(!(_O||Ob==null||Ob!==rs(E))){var D=vpe(Ob);if(!c1||!u1(c1,D)){c1=D;var $=F_(NO,"onSelect");if($.length>0){var K=new vO("onSelect","select",null,d,g);u.push({event:K,listeners:$}),K.target=Ob}}}}function bpe(u,d,g,E,D,$,K){var ee=g?$b(g):window;switch(d){case"focusin":(pU(ee)||ee.contentEditable==="true")&&(Ob=ee,NO=g,c1=null);break;case"focusout":Ob=null,NO=null,c1=null;break;case"mousedown":_O=!0;break;case"contextmenu":case"mouseup":case"dragend":_O=!1,_U(u,E,D);break;case"selectionchange":if(ppe)break;case"keydown":case"keyup":_U(u,E,D)}}function V_(u,d){var g={};return g[u.toLowerCase()]=d.toLowerCase(),g["Webkit"+u]="webkit"+d,g["Moz"+u]="moz"+d,g}var jb={animationend:V_("Animation","AnimationEnd"),animationiteration:V_("Animation","AnimationIteration"),animationstart:V_("Animation","AnimationStart"),transitionend:V_("Transition","TransitionEnd")},CO={},CU={};Te&&(CU=document.createElement("div").style,"AnimationEvent"in window||(delete jb.animationend.animation,delete jb.animationiteration.animation,delete jb.animationstart.animation),"TransitionEvent"in window||delete jb.transitionend.transition);function $_(u){if(CO[u])return CO[u];if(!jb[u])return u;var d=jb[u];for(var g in d)if(d.hasOwnProperty(g)&&g in CU)return CO[u]=d[g];return u}var TU=$_("animationend"),DU=$_("animationiteration"),kU=$_("animationstart"),PU=$_("transitionend"),AU=new Map,RU=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function vp(u,d){AU.set(u,d),Ne(d,[u])}function wpe(){for(var u=0;u<RU.length;u++){var d=RU[u],g=d.toLowerCase(),E=d[0].toUpperCase()+d.slice(1);vp(g,"on"+E)}vp(TU,"onAnimationEnd"),vp(DU,"onAnimationIteration"),vp(kU,"onAnimationStart"),vp("dblclick","onDoubleClick"),vp("focusin","onFocus"),vp("focusout","onBlur"),vp(PU,"onTransitionEnd")}function xpe(u,d,g,E,D,$,K){var ee=AU.get(d);if(ee!==void 0){var se=vO,be=d;switch(d){case"keypress":if(O_(E)===0)return;case"keydown":case"keyup":se=Sme;break;case"focusin":be="focus",se=wO;break;case"focusout":be="blur",se=wO;break;case"beforeblur":case"afterblur":se=wO;break;case"click":if(E.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=iU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=lme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=_me;break;case TU:case DU:case kU:se=dme;break;case PU:se=Tme;break;case"scroll":se=ame;break;case"wheel":se=kme;break;case"copy":case"cut":case"paste":se=hme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=sU;break}var Se=($&Tu)!==0;{var Ve=!Se&&d==="scroll",Me=_pe(g,ee,E.type,Se,Ve);if(Me.length>0){var Je=new se(ee,be,null,E,D);u.push({event:Je,listeners:Me})}}}}wpe(),npe(),Wme(),gpe(),Rme();function Spe(u,d,g,E,D,$,K){xpe(u,d,g,E,D,$);var ee=($&uh)===0;ee&&(rpe(u,d,g,E,D),tpe(u,d,g,E,D),bpe(u,d,g,E,D),Fme(u,d,g,E,D))}var d1=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],TO=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(d1));function OU(u,d,g){var E=u.type||"unknown-event";u.currentTarget=g,Xd(E,d,void 0,u),u.currentTarget=null}function Epe(u,d,g){var E;if(g)for(var D=d.length-1;D>=0;D--){var $=d[D],K=$.instance,ee=$.currentTarget,se=$.listener;if(K!==E&&u.isPropagationStopped())return;OU(u,se,ee),E=K}else for(var be=0;be<d.length;be++){var Se=d[be],Ve=Se.instance,Me=Se.currentTarget,Je=Se.listener;if(Ve!==E&&u.isPropagationStopped())return;OU(u,Je,Me),E=Ve}}function jU(u,d){for(var g=(d&Tu)!==0,E=0;E<u.length;E++){var D=u[E],$=D.event,K=D.listeners;Epe($,K,g)}vh()}function Npe(u,d,g,E,D){var $=ch(g),K=[];Spe(K,u,E,g,$,d),jU(K,d)}function Di(u,d){TO.has(u)||s('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',u);var g=!1,E=eve(d),D=Dpe(u);E.has(D)||(IU(d,u,Hd,g),E.add(D))}function DO(u,d,g){TO.has(u)&&!d&&s('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',u);var E=0;d&&(E|=Tu),IU(g,u,E,d)}var L_="_reactListening"+Math.random().toString(36).slice(2);function f1(u){if(!u[L_]){u[L_]=!0,ce.forEach(function(g){g!=="selectionchange"&&(TO.has(g)||DO(g,!1,u),DO(g,!0,u))});var d=u.nodeType===$l?u:u.ownerDocument;d!==null&&(d[L_]||(d[L_]=!0,DO("selectionchange",!1,d)))}}function IU(u,d,g,E,D){var $=Jhe(u,d,g),K=void 0;Zo&&(d==="touchstart"||d==="touchmove"||d==="wheel")&&(K=!0),u=u,E?K!==void 0?tme(u,d,$,K):eme(u,d,$):K!==void 0?nme(u,d,$,K):Qhe(u,d,$)}function MU(u,d){return u===d||u.nodeType===Vi&&u.parentNode===d}function kO(u,d,g,E,D){var $=E;if(!(d&av)&&!(d&Hd)){var K=D;if(E!==null){var ee=E;e:for(;;){if(ee===null)return;var se=ee.tag;if(se===h||se===m){var be=ee.stateNode.containerInfo;if(MU(be,K))break;if(se===m)for(var Se=ee.return;Se!==null;){var Ve=Se.tag;if(Ve===h||Ve===m){var Me=Se.stateNode.containerInfo;if(MU(Me,K))return}Se=Se.return}for(;be!==null;){var Je=Tv(be);if(Je===null)return;var Xe=Je.tag;if(Xe===p||Xe===v){ee=$=Je;continue e}be=be.parentNode}}ee=ee.return}}}hh(function(){return Npe(u,d,g,$)})}function h1(u,d,g){return{instance:u,listener:d,currentTarget:g}}function _pe(u,d,g,E,D,$){for(var K=d!==null?d+"Capture":null,ee=E?K:d,se=[],be=u,Se=null;be!==null;){var Ve=be,Me=Ve.stateNode,Je=Ve.tag;if(Je===p&&Me!==null&&(Se=Me,ee!==null)){var Xe=ku(be,ee);Xe!=null&&se.push(h1(be,Xe,Se))}if(D)break;be=be.return}return se}function F_(u,d){for(var g=d+"Capture",E=[],D=u;D!==null;){var $=D,K=$.stateNode,ee=$.tag;if(ee===p&&K!==null){var se=K,be=ku(D,g);be!=null&&E.unshift(h1(D,be,se));var Se=ku(D,d);Se!=null&&E.push(h1(D,Se,se))}D=D.return}return E}function Ib(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==p);return u||null}function Cpe(u,d){for(var g=u,E=d,D=0,$=g;$;$=Ib($))D++;for(var K=0,ee=E;ee;ee=Ib(ee))K++;for(;D-K>0;)g=Ib(g),D--;for(;K-D>0;)E=Ib(E),K--;for(var se=D;se--;){if(g===E||E!==null&&g===E.alternate)return g;g=Ib(g),E=Ib(E)}return null}function VU(u,d,g,E,D){for(var $=d._reactName,K=[],ee=g;ee!==null&&ee!==E;){var se=ee,be=se.alternate,Se=se.stateNode,Ve=se.tag;if(be!==null&&be===E)break;if(Ve===p&&Se!==null){var Me=Se;if(D){var Je=ku(ee,$);Je!=null&&K.unshift(h1(ee,Je,Me))}else if(!D){var Xe=ku(ee,$);Xe!=null&&K.push(h1(ee,Xe,Me))}}ee=ee.return}K.length!==0&&u.push({event:d,listeners:K})}function Tpe(u,d,g,E,D){var $=E&&D?Cpe(E,D):null;E!==null&&VU(u,d,E,$,!1),D!==null&&g!==null&&VU(u,g,D,$,!0)}function Dpe(u,d){return u+"__bubble"}var ol=!1,m1="dangerouslySetInnerHTML",B_="suppressContentEditableWarning",yp="suppressHydrationWarning",$U="autoFocus",_v="children",Cv="style",U_="__html",PO,W_,p1,LU,z_,FU,BU;PO={dialog:!0,webview:!0},W_=function(u,d){pi(u,d),gb(u,d),vb(u,d,{registrationNameDependencies:he,possibleRegistrationNames:ve})},FU=Te&&!document.documentMode,p1=function(u,d,g){if(!ol){var E=H_(g),D=H_(d);D!==E&&(ol=!0,s("Prop `%s` did not match. Server: %s Client: %s",u,JSON.stringify(D),JSON.stringify(E)))}},LU=function(u){if(!ol){ol=!0;var d=[];u.forEach(function(g){d.push(g)}),s("Extra attributes from the server: %s",d)}},z_=function(u,d){d===!1?s("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",u,u,u):s("Expected `%s` listener to be a function, instead got a value of `%s` type.",u,typeof d)},BU=function(u,d){var g=u.namespaceURI===Ml?u.ownerDocument.createElement(u.tagName):u.ownerDocument.createElementNS(u.namespaceURI,u.tagName);return g.innerHTML=d,g.innerHTML};var kpe=/\r\n?/g,Ppe=/\u0000|\uFFFD/g;function H_(u){yt(u);var d=typeof u=="string"?u:""+u;return d.replace(kpe,`
`).replace(Ppe,"")}function G_(u,d,g,E){var D=H_(d),$=H_(u);if($!==D&&(E&&(ol||(ol=!0,s('Text content did not match. Server: "%s" Client: "%s"',$,D))),g&&F))throw new Error("Text content does not match server-rendered HTML.")}function UU(u){return u.nodeType===$l?u:u.ownerDocument}function Ape(){}function K_(u){u.onclick=Ape}function Rpe(u,d,g,E,D){for(var $ in E)if(E.hasOwnProperty($)){var K=E[$];if($===Cv)K&&Object.freeze(K),rh(d,K);else if($===m1){var ee=K?K[U_]:void 0;ee!=null&&ub(d,ee)}else if($===_v)if(typeof K=="string"){var se=u!=="textarea"||K!=="";se&&$m(d,K)}else typeof K=="number"&&$m(d,""+K);else $===B_||$===yp||$===$U||(he.hasOwnProperty($)?K!=null&&(typeof K!="function"&&z_($,K),$==="onScroll"&&Di("scroll",d)):K!=null&&Vr(d,$,K,D))}}function Ope(u,d,g,E){for(var D=0;D<d.length;D+=2){var $=d[D],K=d[D+1];$===Cv?rh(u,K):$===m1?ub(u,K):$===_v?$m(u,K):Vr(u,$,K,E)}}function jpe(u,d,g,E){var D,$=UU(g),K,ee=E;if(ee===Ml&&(ee=Yg(u)),ee===Ml){if(D=Ll(u,d),!D&&u!==u.toLowerCase()&&s("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",u),u==="script"){var se=$.createElement("div");se.innerHTML="<script><\/script>";var be=se.firstChild;K=se.removeChild(be)}else if(typeof d.is=="string")K=$.createElement(u,{is:d.is});else if(K=$.createElement(u),u==="select"){var Se=K;d.multiple?Se.multiple=!0:d.size&&(Se.size=d.size)}}else K=$.createElementNS(ee,u);return ee===Ml&&!D&&Object.prototype.toString.call(K)==="[object HTMLUnknownElement]"&&!ye.call(PO,u)&&(PO[u]=!0,s("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",u)),K}function Ipe(u,d){return UU(d).createTextNode(u)}function Mpe(u,d,g,E){var D=Ll(d,g);W_(d,g);var $;switch(d){case"dialog":Di("cancel",u),Di("close",u),$=g;break;case"iframe":case"object":case"embed":Di("load",u),$=g;break;case"video":case"audio":for(var K=0;K<d1.length;K++)Di(d1[K],u);$=g;break;case"source":Di("error",u),$=g;break;case"img":case"image":case"link":Di("error",u),Di("load",u),$=g;break;case"details":Di("toggle",u),$=g;break;case"input":_u(u,g),$=Ec(u,g),Di("invalid",u);break;case"option":hn(u,g),$=g;break;case"select":Cu(u,g),$=Nc(u,g),Di("invalid",u);break;case"textarea":sb(u,g),$=Gg(u,g),Di("invalid",u);break;default:$=g}switch(oh(d,$),Rpe(d,u,E,$,D),d){case"input":Jo(u),we(u,g,!1);break;case"textarea":Jo(u),lb(u);break;case"option":Vn(u,g);break;case"select":Bd(u,g);break;default:typeof $.onClick=="function"&&K_(u);break}}function Vpe(u,d,g,E,D){W_(d,E);var $=null,K,ee;switch(d){case"input":K=Ec(u,g),ee=Ec(u,E),$=[];break;case"select":K=Nc(u,g),ee=Nc(u,E),$=[];break;case"textarea":K=Gg(u,g),ee=Gg(u,E),$=[];break;default:K=g,ee=E,typeof K.onClick!="function"&&typeof ee.onClick=="function"&&K_(u);break}oh(d,ee);var se,be,Se=null;for(se in K)if(!(ee.hasOwnProperty(se)||!K.hasOwnProperty(se)||K[se]==null))if(se===Cv){var Ve=K[se];for(be in Ve)Ve.hasOwnProperty(be)&&(Se||(Se={}),Se[be]="")}else se===m1||se===_v||se===B_||se===yp||se===$U||(he.hasOwnProperty(se)?$||($=[]):($=$||[]).push(se,null));for(se in ee){var Me=ee[se],Je=K!=null?K[se]:void 0;if(!(!ee.hasOwnProperty(se)||Me===Je||Me==null&&Je==null))if(se===Cv)if(Me&&Object.freeze(Me),Je){for(be in Je)Je.hasOwnProperty(be)&&(!Me||!Me.hasOwnProperty(be))&&(Se||(Se={}),Se[be]="");for(be in Me)Me.hasOwnProperty(be)&&Je[be]!==Me[be]&&(Se||(Se={}),Se[be]=Me[be])}else Se||($||($=[]),$.push(se,Se)),Se=Me;else if(se===m1){var Xe=Me?Me[U_]:void 0,lt=Je?Je[U_]:void 0;Xe!=null&&lt!==Xe&&($=$||[]).push(se,Xe)}else se===_v?(typeof Me=="string"||typeof Me=="number")&&($=$||[]).push(se,""+Me):se===B_||se===yp||(he.hasOwnProperty(se)?(Me!=null&&(typeof Me!="function"&&z_(se,Me),se==="onScroll"&&Di("scroll",u)),!$&&Je!==Me&&($=[])):($=$||[]).push(se,Me))}return Se&&(Um(Se,ee[Cv]),($=$||[]).push(Cv,Se)),$}function $pe(u,d,g,E,D){g==="input"&&D.type==="radio"&&D.name!=null&&U(u,D);var $=Ll(g,E),K=Ll(g,D);switch(Ope(u,d,$,K),g){case"input":ie(u,D);break;case"textarea":ob(u,D);break;case"select":_c(u,D);break}}function Lpe(u){{var d=u.toLowerCase();return Wd.hasOwnProperty(d)&&Wd[d]||null}}function Fpe(u,d,g,E,D,$,K){var ee,se;switch(ee=Ll(d,g),W_(d,g),d){case"dialog":Di("cancel",u),Di("close",u);break;case"iframe":case"object":case"embed":Di("load",u);break;case"video":case"audio":for(var be=0;be<d1.length;be++)Di(d1[be],u);break;case"source":Di("error",u);break;case"img":case"image":case"link":Di("error",u),Di("load",u);break;case"details":Di("toggle",u);break;case"input":_u(u,g),Di("invalid",u);break;case"option":hn(u,g);break;case"select":Cu(u,g),Di("invalid",u);break;case"textarea":sb(u,g),Di("invalid",u);break}oh(d,g);{se=new Set;for(var Se=u.attributes,Ve=0;Ve<Se.length;Ve++){var Me=Se[Ve].name.toLowerCase();switch(Me){case"value":break;case"checked":break;case"selected":break;default:se.add(Se[Ve].name)}}}var Je=null;for(var Xe in g)if(g.hasOwnProperty(Xe)){var lt=g[Xe];if(Xe===_v)typeof lt=="string"?u.textContent!==lt&&(g[yp]!==!0&&G_(u.textContent,lt,$,K),Je=[_v,lt]):typeof lt=="number"&&u.textContent!==""+lt&&(g[yp]!==!0&&G_(u.textContent,lt,$,K),Je=[_v,""+lt]);else if(he.hasOwnProperty(Xe))lt!=null&&(typeof lt!="function"&&z_(Xe,lt),Xe==="onScroll"&&Di("scroll",u));else if(K&&typeof ee=="boolean"){var Yt=void 0,An=Kt(Xe);if(g[yp]!==!0){if(!(Xe===B_||Xe===yp||Xe==="value"||Xe==="checked"||Xe==="selected")){if(Xe===m1){var En=u.innerHTML,kr=lt?lt[U_]:void 0;if(kr!=null){var wr=BU(u,kr);wr!==En&&p1(Xe,En,wr)}}else if(Xe===Cv){if(se.delete(Xe),FU){var Ge=pb(lt);Yt=u.getAttribute("style"),Ge!==Yt&&p1(Xe,Yt,Ge)}}else if(ee&&!oe)se.delete(Xe.toLowerCase()),Yt=xr(u,Xe,lt),lt!==Yt&&p1(Xe,Yt,lt);else if(!pn(Xe,An,ee)&&!Gt(Xe,lt,An,ee)){var ut=!1;if(An!==null)se.delete(An.attributeName),Yt=zi(u,Xe,lt,An);else{var Ke=E;if(Ke===Ml&&(Ke=Yg(d)),Ke===Ml)se.delete(Xe.toLowerCase());else{var Ct=Lpe(Xe);Ct!==null&&Ct!==Xe&&(ut=!0,se.delete(Ct)),se.delete(Xe)}Yt=xr(u,Xe,lt)}var Qt=oe;!Qt&&lt!==Yt&&!ut&&p1(Xe,Yt,lt)}}}}}switch(K&&se.size>0&&g[yp]!==!0&&LU(se),d){case"input":Jo(u),we(u,g,!0);break;case"textarea":Jo(u),lb(u);break;case"select":case"option":break;default:typeof g.onClick=="function"&&K_(u);break}return Je}function Bpe(u,d,g){var E=u.nodeValue!==d;return E}function AO(u,d){{if(ol)return;ol=!0,s("Did not expect server HTML to contain a <%s> in <%s>.",d.nodeName.toLowerCase(),u.nodeName.toLowerCase())}}function RO(u,d){{if(ol)return;ol=!0,s('Did not expect server HTML to contain the text node "%s" in <%s>.',d.nodeValue,u.nodeName.toLowerCase())}}function OO(u,d,g){{if(ol)return;ol=!0,s("Expected server HTML to contain a matching <%s> in <%s>.",d,u.nodeName.toLowerCase())}}function jO(u,d){{if(d===""||ol)return;ol=!0,s('Expected server HTML to contain a matching text node for "%s" in <%s>.',d,u.nodeName.toLowerCase())}}function Upe(u,d,g){switch(d){case"input":De(u,g);return;case"textarea":Cx(u,g);return;case"select":th(u,g);return}}var g1=function(){},v1=function(){};{var Wpe=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],WU=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],zpe=WU.concat(["button"]),Hpe=["dd","dt","li","option","optgroup","p","rp","rt"],zU={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};v1=function(u,d){var g=gn({},u||zU),E={tag:d};return WU.indexOf(d)!==-1&&(g.aTagInScope=null,g.buttonTagInScope=null,g.nobrTagInScope=null),zpe.indexOf(d)!==-1&&(g.pTagInButtonScope=null),Wpe.indexOf(d)!==-1&&d!=="address"&&d!=="div"&&d!=="p"&&(g.listItemTagAutoclosing=null,g.dlItemTagAutoclosing=null),g.current=E,d==="form"&&(g.formTag=E),d==="a"&&(g.aTagInScope=E),d==="button"&&(g.buttonTagInScope=E),d==="nobr"&&(g.nobrTagInScope=E),d==="p"&&(g.pTagInButtonScope=E),d==="li"&&(g.listItemTagAutoclosing=E),(d==="dd"||d==="dt")&&(g.dlItemTagAutoclosing=E),g};var Gpe=function(u,d){switch(d){case"select":return u==="option"||u==="optgroup"||u==="#text";case"optgroup":return u==="option"||u==="#text";case"option":return u==="#text";case"tr":return u==="th"||u==="td"||u==="style"||u==="script"||u==="template";case"tbody":case"thead":case"tfoot":return u==="tr"||u==="style"||u==="script"||u==="template";case"colgroup":return u==="col"||u==="template";case"table":return u==="caption"||u==="colgroup"||u==="tbody"||u==="tfoot"||u==="thead"||u==="style"||u==="script"||u==="template";case"head":return u==="base"||u==="basefont"||u==="bgsound"||u==="link"||u==="meta"||u==="title"||u==="noscript"||u==="noframes"||u==="style"||u==="script"||u==="template";case"html":return u==="head"||u==="body"||u==="frameset";case"frameset":return u==="frame";case"#document":return u==="html"}switch(u){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return d!=="h1"&&d!=="h2"&&d!=="h3"&&d!=="h4"&&d!=="h5"&&d!=="h6";case"rp":case"rt":return Hpe.indexOf(d)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return d==null}return!0},Kpe=function(u,d){switch(u){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return d.pTagInButtonScope;case"form":return d.formTag||d.pTagInButtonScope;case"li":return d.listItemTagAutoclosing;case"dd":case"dt":return d.dlItemTagAutoclosing;case"button":return d.buttonTagInScope;case"a":return d.aTagInScope;case"nobr":return d.nobrTagInScope}return null},HU={};g1=function(u,d,g){g=g||zU;var E=g.current,D=E&&E.tag;d!=null&&(u!=null&&s("validateDOMNesting: when childText is passed, childTag should be null"),u="#text");var $=Gpe(u,D)?null:E,K=$?null:Kpe(u,g),ee=$||K;if(ee){var se=ee.tag,be=!!$+"|"+u+"|"+se;if(!HU[be]){HU[be]=!0;var Se=u,Ve="";if(u==="#text"?/\S/.test(d)?Se="Text nodes":(Se="Whitespace text nodes",Ve=" Make sure you don't have any extra whitespace between tags on each line of your source code."):Se="<"+u+">",$){var Me="";se==="table"&&u==="tr"&&(Me+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),s("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",Se,se,Ve,Me)}else s("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",Se,se)}}}}var Y_="suppressHydrationWarning",J_="$",q_="/$",y1="$?",b1="$!",Ype="style",IO=null,MO=null;function Jpe(u){var d,g,E=u.nodeType;switch(E){case $l:case qg:{d=E===$l?"#document":"#fragment";var D=u.documentElement;g=D?D.namespaceURI:Jg(null,"");break}default:{var $=E===Vi?u.parentNode:u,K=$.namespaceURI||null;d=$.tagName,g=Jg(K,d);break}}{var ee=d.toLowerCase(),se=v1(null,ee);return{namespace:g,ancestorInfo:se}}}function qpe(u,d,g){{var E=u,D=Jg(E.namespace,d),$=v1(E.ancestorInfo,d);return{namespace:D,ancestorInfo:$}}}function Not(u){return u}function Xpe(u){IO=Yhe(),MO=dpe();var d=null;return QB(!1),d}function Zpe(u){fpe(MO),QB(IO),IO=null,MO=null}function Qpe(u,d,g,E,D){var $;{var K=E;if(g1(u,null,K.ancestorInfo),typeof d.children=="string"||typeof d.children=="number"){var ee=""+d.children,se=v1(K.ancestorInfo,u);g1(null,ee,se)}$=K.namespace}var be=jpe(u,d,g,$);return S1(D,be),zO(be,d),be}function ege(u,d){u.appendChild(d)}function tge(u,d,g,E,D){switch(Mpe(u,d,g,E),d){case"button":case"input":case"select":case"textarea":return!!g.autoFocus;case"img":return!0;default:return!1}}function nge(u,d,g,E,D,$){{var K=$;if(typeof E.children!=typeof g.children&&(typeof E.children=="string"||typeof E.children=="number")){var ee=""+E.children,se=v1(K.ancestorInfo,d);g1(null,ee,se)}}return Vpe(u,d,g,E)}function VO(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}function rge(u,d,g,E){{var D=g;g1(null,u,D.ancestorInfo)}var $=Ipe(u,d);return S1(E,$),$}function ige(){var u=window.event;return u===void 0?Ih:eU(u.type)}var $O=typeof setTimeout=="function"?setTimeout:void 0,age=typeof clearTimeout=="function"?clearTimeout:void 0,LO=-1,GU=typeof Promise=="function"?Promise:void 0,sge=typeof queueMicrotask=="function"?queueMicrotask:typeof GU<"u"?function(u){return GU.resolve(null).then(u).catch(oge)}:$O;function oge(u){setTimeout(function(){throw u})}function lge(u,d,g,E){switch(d){case"button":case"input":case"select":case"textarea":g.autoFocus&&u.focus();return;case"img":{g.src&&(u.src=g.src);return}}}function uge(u,d,g,E,D,$){$pe(u,d,g,E,D),zO(u,D)}function KU(u){$m(u,"")}function cge(u,d,g){u.nodeValue=g}function dge(u,d){u.appendChild(d)}function fge(u,d){var g;u.nodeType===Vi?(g=u.parentNode,g.insertBefore(d,u)):(g=u,g.appendChild(d));var E=u._reactRootContainer;E==null&&g.onclick===null&&K_(g)}function hge(u,d,g){u.insertBefore(d,g)}function mge(u,d,g){u.nodeType===Vi?u.parentNode.insertBefore(d,g):u.insertBefore(d,g)}function pge(u,d){u.removeChild(d)}function gge(u,d){u.nodeType===Vi?u.parentNode.removeChild(d):u.removeChild(d)}function FO(u,d){var g=d,E=0;do{var D=g.nextSibling;if(u.removeChild(g),D&&D.nodeType===Vi){var $=D.data;if($===q_)if(E===0){u.removeChild(D),t1(d);return}else E--;else($===J_||$===y1||$===b1)&&E++}g=D}while(g);t1(d)}function vge(u,d){u.nodeType===Vi?FO(u.parentNode,d):u.nodeType===is&&FO(u,d),t1(u)}function yge(u){u=u;var d=u.style;typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"}function bge(u){u.nodeValue=""}function wge(u,d){u=u;var g=d[Ype],E=g!=null&&g.hasOwnProperty("display")?g.display:null;u.style.display=Xg("display",E)}function xge(u,d){u.nodeValue=d}function Sge(u){u.nodeType===is?u.textContent="":u.nodeType===$l&&u.documentElement&&u.removeChild(u.documentElement)}function Ege(u,d,g){return u.nodeType!==is||d.toLowerCase()!==u.nodeName.toLowerCase()?null:u}function Nge(u,d){return d===""||u.nodeType!==Vl?null:u}function _ge(u){return u.nodeType!==Vi?null:u}function YU(u){return u.data===y1}function BO(u){return u.data===b1}function Cge(u){var d=u.nextSibling&&u.nextSibling.dataset,g,E,D;return d&&(g=d.dgst,E=d.msg,D=d.stck),{message:E,digest:g,stack:D}}function Tge(u,d){u._reactRetry=d}function X_(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===is||d===Vl)break;if(d===Vi){var g=u.data;if(g===J_||g===b1||g===y1)break;if(g===q_)return null}}return u}function w1(u){return X_(u.nextSibling)}function Dge(u){return X_(u.firstChild)}function kge(u){return X_(u.firstChild)}function Pge(u){return X_(u.nextSibling)}function Age(u,d,g,E,D,$,K){S1($,u),zO(u,g);var ee;{var se=D;ee=se.namespace}var be=($.mode&sr)!==bn;return Fpe(u,d,g,ee,E,be,K)}function Rge(u,d,g,E){return S1(g,u),g.mode&sr,Bpe(u,d)}function Oge(u,d){S1(d,u)}function jge(u){for(var d=u.nextSibling,g=0;d;){if(d.nodeType===Vi){var E=d.data;if(E===q_){if(g===0)return w1(d);g--}else(E===J_||E===b1||E===y1)&&g++}d=d.nextSibling}return null}function JU(u){for(var d=u.previousSibling,g=0;d;){if(d.nodeType===Vi){var E=d.data;if(E===J_||E===b1||E===y1){if(g===0)return d;g--}else E===q_&&g++}d=d.previousSibling}return null}function Ige(u){t1(u)}function Mge(u){t1(u)}function Vge(u){return u!=="head"&&u!=="body"}function $ge(u,d,g,E){var D=!0;G_(d.nodeValue,g,E,D)}function Lge(u,d,g,E,D,$){if(d[Y_]!==!0){var K=!0;G_(E.nodeValue,D,$,K)}}function Fge(u,d){d.nodeType===is?AO(u,d):d.nodeType===Vi||RO(u,d)}function Bge(u,d){{var g=u.parentNode;g!==null&&(d.nodeType===is?AO(g,d):d.nodeType===Vi||RO(g,d))}}function Uge(u,d,g,E,D){(D||d[Y_]!==!0)&&(E.nodeType===is?AO(g,E):E.nodeType===Vi||RO(g,E))}function Wge(u,d,g){OO(u,d)}function zge(u,d){jO(u,d)}function Hge(u,d,g){{var E=u.parentNode;E!==null&&OO(E,d)}}function Gge(u,d){{var g=u.parentNode;g!==null&&jO(g,d)}}function Kge(u,d,g,E,D,$){($||d[Y_]!==!0)&&OO(g,E)}function Yge(u,d,g,E,D){(D||d[Y_]!==!0)&&jO(g,E)}function Jge(u){s("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",u.nodeName.toLowerCase())}function qge(u){f1(u)}var Mb=Math.random().toString(36).slice(2),Vb="__reactFiber$"+Mb,UO="__reactProps$"+Mb,x1="__reactContainer$"+Mb,WO="__reactEvents$"+Mb,Xge="__reactListeners$"+Mb,Zge="__reactHandles$"+Mb;function Qge(u){delete u[Vb],delete u[UO],delete u[WO],delete u[Xge],delete u[Zge]}function S1(u,d){d[Vb]=u}function Z_(u,d){d[x1]=u}function qU(u){u[x1]=null}function E1(u){return!!u[x1]}function Tv(u){var d=u[Vb];if(d)return d;for(var g=u.parentNode;g;){if(d=g[x1]||g[Vb],d){var E=d.alternate;if(d.child!==null||E!==null&&E.child!==null)for(var D=JU(u);D!==null;){var $=D[Vb];if($)return $;D=JU(D)}return d}u=g,g=u.parentNode}return null}function bp(u){var d=u[Vb]||u[x1];return d&&(d.tag===p||d.tag===v||d.tag===P||d.tag===h)?d:null}function $b(u){if(u.tag===p||u.tag===v)return u.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function Q_(u){return u[UO]||null}function zO(u,d){u[UO]=d}function eve(u){var d=u[WO];return d===void 0&&(d=u[WO]=new Set),d}var XU={},ZU=n.ReactDebugCurrentFrame;function eC(u){if(u){var d=u._owner,g=Rl(u.type,u._source,d?d.type:null);ZU.setExtraStackFrame(g)}else ZU.setExtraStackFrame(null)}function Gc(u,d,g,E,D){{var $=Function.call.bind(ye);for(var K in u)if($(u,K)){var ee=void 0;try{if(typeof u[K]!="function"){var se=Error((E||"React class")+": "+g+" type `"+K+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof u[K]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw se.name="Invariant Violation",se}ee=u[K](d,K,E,g,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(be){ee=be}ee&&!(ee instanceof Error)&&(eC(D),s("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",E||"React class",g,K,typeof ee),eC(null)),ee instanceof Error&&!(ee.message in XU)&&(XU[ee.message]=!0,eC(D),s("Failed %s type: %s",g,ee.message),eC(null))}}}var HO=[],tC;tC=[];var Mh=-1;function wp(u){return{current:u}}function qs(u,d){if(Mh<0){s("Unexpected pop.");return}d!==tC[Mh]&&s("Unexpected Fiber popped."),u.current=HO[Mh],HO[Mh]=null,tC[Mh]=null,Mh--}function Xs(u,d,g){Mh++,HO[Mh]=u.current,tC[Mh]=g,u.current=d}var GO;GO={};var Jl={};Object.freeze(Jl);var Vh=wp(Jl),ff=wp(!1),KO=Jl;function Lb(u,d,g){return g&&hf(d)?KO:Vh.current}function QU(u,d,g){{var E=u.stateNode;E.__reactInternalMemoizedUnmaskedChildContext=d,E.__reactInternalMemoizedMaskedChildContext=g}}function Fb(u,d){{var g=u.type,E=g.contextTypes;if(!E)return Jl;var D=u.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===d)return D.__reactInternalMemoizedMaskedChildContext;var $={};for(var K in E)$[K]=d[K];{var ee=kn(u)||"Unknown";Gc(E,$,"context",ee)}return D&&QU(u,d,$),$}}function nC(){return ff.current}function hf(u){{var d=u.childContextTypes;return d!=null}}function rC(u){qs(ff,u),qs(Vh,u)}function YO(u){qs(ff,u),qs(Vh,u)}function e6(u,d,g){{if(Vh.current!==Jl)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Xs(Vh,d,u),Xs(ff,g,u)}}function t6(u,d,g){{var E=u.stateNode,D=d.childContextTypes;if(typeof E.getChildContext!="function"){{var $=kn(u)||"Unknown";GO[$]||(GO[$]=!0,s("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",$,$))}return g}var K=E.getChildContext();for(var ee in K)if(!(ee in D))throw new Error((kn(u)||"Unknown")+'.getChildContext(): key "'+ee+'" is not defined in childContextTypes.');{var se=kn(u)||"Unknown";Gc(D,K,"child context",se)}return gn({},g,K)}}function iC(u){{var d=u.stateNode,g=d&&d.__reactInternalMemoizedMergedChildContext||Jl;return KO=Vh.current,Xs(Vh,g,u),Xs(ff,ff.current,u),!0}}function n6(u,d,g){{var E=u.stateNode;if(!E)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(g){var D=t6(u,d,KO);E.__reactInternalMemoizedMergedChildContext=D,qs(ff,u),qs(Vh,u),Xs(Vh,D,u),Xs(ff,g,u)}else qs(ff,u),Xs(ff,g,u)}}function tve(u){{if(!xs(u)||u.tag!==c)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var d=u;do{switch(d.tag){case h:return d.stateNode.context;case c:{var g=d.type;if(hf(g))return d.stateNode.__reactInternalMemoizedMergedChildContext;break}}d=d.return}while(d!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var xp=0,aC=1,$h=null,JO=!1,qO=!1;function r6(u){$h===null?$h=[u]:$h.push(u)}function nve(u){JO=!0,r6(u)}function i6(){JO&&Sp()}function Sp(){if(!qO&&$h!==null){qO=!0;var u=0,d=Hc();try{var g=!0,E=$h;for(us(Gl);u<E.length;u++){var D=E[u];do D=D(g);while(D!==null)}$h=null,JO=!1}catch($){throw $h!==null&&($h=$h.slice(u+1)),nf(Nh,Sp),$}finally{us(d),qO=!1}}return null}var Bb=[],Ub=0,sC=null,oC=0,Uu=[],Wu=0,Dv=null,Lh=1,Fh="";function rve(u){return Pv(),(u.flags&xh)!==_n}function ive(u){return Pv(),oC}function ave(){var u=Fh,d=Lh,g=d&~sve(d);return g.toString(32)+u}function kv(u,d){Pv(),Bb[Ub++]=oC,Bb[Ub++]=sC,sC=u,oC=d}function a6(u,d,g){Pv(),Uu[Wu++]=Lh,Uu[Wu++]=Fh,Uu[Wu++]=Dv,Dv=u;var E=Lh,D=Fh,$=lC(E)-1,K=E&~(1<<$),ee=g+1,se=lC(d)+$;if(se>30){var be=$-$%5,Se=(1<<be)-1,Ve=(K&Se).toString(32),Me=K>>be,Je=$-be,Xe=lC(d)+Je,lt=ee<<Je,Yt=lt|Me,An=Ve+D;Lh=1<<Xe|Yt,Fh=An}else{var En=ee<<$,kr=En|K,wr=D;Lh=1<<se|kr,Fh=wr}}function XO(u){Pv();var d=u.return;if(d!==null){var g=1,E=0;kv(u,g),a6(u,g,E)}}function lC(u){return 32-Tb(u)}function sve(u){return 1<<lC(u)-1}function ZO(u){for(;u===sC;)sC=Bb[--Ub],Bb[Ub]=null,oC=Bb[--Ub],Bb[Ub]=null;for(;u===Dv;)Dv=Uu[--Wu],Uu[Wu]=null,Fh=Uu[--Wu],Uu[Wu]=null,Lh=Uu[--Wu],Uu[Wu]=null}function ove(){return Pv(),Dv!==null?{id:Lh,overflow:Fh}:null}function lve(u,d){Pv(),Uu[Wu++]=Lh,Uu[Wu++]=Fh,Uu[Wu++]=Dv,Lh=d.id,Fh=d.overflow,Dv=u}function Pv(){Cs()||s("Expected to be hydrating. This is a bug in React. Please file an issue.")}var _s=null,zu=null,Kc=!1,Av=!1,Ep=null;function uve(){Kc&&s("We should not be hydrating here. This is a bug in React. Please file a bug.")}function s6(){Av=!0}function cve(){return Av}function dve(u){var d=u.stateNode.containerInfo;return zu=kge(d),_s=u,Kc=!0,Ep=null,Av=!1,!0}function fve(u,d,g){return zu=Pge(d),_s=u,Kc=!0,Ep=null,Av=!1,g!==null&&lve(u,g),!0}function o6(u,d){switch(u.tag){case h:{Fge(u.stateNode.containerInfo,d);break}case p:{var g=(u.mode&sr)!==bn;Uge(u.type,u.memoizedProps,u.stateNode,d,g);break}case P:{var E=u.memoizedState;E.dehydrated!==null&&Bge(E.dehydrated,d);break}}}function l6(u,d){o6(u,d);var g=g0e();g.stateNode=d,g.return=u;var E=u.deletions;E===null?(u.deletions=[g],u.flags|=el):E.push(g)}function QO(u,d){{if(Av)return;switch(u.tag){case h:{var g=u.stateNode.containerInfo;switch(d.tag){case p:var E=d.type;d.pendingProps,Wge(g,E);break;case v:var D=d.pendingProps;zge(g,D);break}break}case p:{var $=u.type,K=u.memoizedProps,ee=u.stateNode;switch(d.tag){case p:{var se=d.type,be=d.pendingProps,Se=(u.mode&sr)!==bn;Kge($,K,ee,se,be,Se);break}case v:{var Ve=d.pendingProps,Me=(u.mode&sr)!==bn;Yge($,K,ee,Ve,Me);break}}break}case P:{var Je=u.memoizedState,Xe=Je.dehydrated;if(Xe!==null)switch(d.tag){case p:var lt=d.type;d.pendingProps,Hge(Xe,lt);break;case v:var Yt=d.pendingProps;Gge(Xe,Yt);break}break}default:return}}}function u6(u,d){d.flags=d.flags&~Ul|yi,QO(u,d)}function c6(u,d){switch(u.tag){case p:{var g=u.type;u.pendingProps;var E=Ege(d,g);return E!==null?(u.stateNode=E,_s=u,zu=Dge(E),!0):!1}case v:{var D=u.pendingProps,$=Nge(d,D);return $!==null?(u.stateNode=$,_s=u,zu=null,!0):!1}case P:{var K=_ge(d);if(K!==null){var ee={dehydrated:K,treeContext:ove(),retryLane:Es};u.memoizedState=ee;var se=v0e(K);return se.return=u,u.child=se,_s=u,zu=null,!0}return!1}default:return!1}}function e2(u){return(u.mode&sr)!==bn&&(u.flags&Sr)===_n}function t2(u){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function n2(u){if(Kc){var d=zu;if(!d){e2(u)&&(QO(_s,u),t2()),u6(_s,u),Kc=!1,_s=u;return}var g=d;if(!c6(u,d)){e2(u)&&(QO(_s,u),t2()),d=w1(g);var E=_s;if(!d||!c6(u,d)){u6(_s,u),Kc=!1,_s=u;return}l6(E,g)}}}function hve(u,d,g){var E=u.stateNode,D=!Av,$=Age(E,u.type,u.memoizedProps,d,g,u,D);return u.updateQueue=$,$!==null}function mve(u){var d=u.stateNode,g=u.memoizedProps,E=Rge(d,g,u);if(E){var D=_s;if(D!==null)switch(D.tag){case h:{var $=D.stateNode.containerInfo,K=(D.mode&sr)!==bn;$ge($,d,g,K);break}case p:{var ee=D.type,se=D.memoizedProps,be=D.stateNode,Se=(D.mode&sr)!==bn;Lge(ee,se,be,d,g,Se);break}}}return E}function pve(u){var d=u.memoizedState,g=d!==null?d.dehydrated:null;if(!g)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");Oge(g,u)}function gve(u){var d=u.memoizedState,g=d!==null?d.dehydrated:null;if(!g)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return jge(g)}function d6(u){for(var d=u.return;d!==null&&d.tag!==p&&d.tag!==h&&d.tag!==P;)d=d.return;_s=d}function uC(u){if(u!==_s)return!1;if(!Kc)return d6(u),Kc=!0,!1;if(u.tag!==h&&(u.tag!==p||Vge(u.type)&&!VO(u.type,u.memoizedProps))){var d=zu;if(d)if(e2(u))f6(u),t2();else for(;d;)l6(u,d),d=w1(d)}return d6(u),u.tag===P?zu=gve(u):zu=_s?w1(u.stateNode):null,!0}function vve(){return Kc&&zu!==null}function f6(u){for(var d=zu;d;)o6(u,d),d=w1(d)}function Wb(){_s=null,zu=null,Kc=!1,Av=!1}function h6(){Ep!==null&&(s9(Ep),Ep=null)}function Cs(){return Kc}function r2(u){Ep===null?Ep=[u]:Ep.push(u)}var yve=n.ReactCurrentBatchConfig,bve=null;function wve(){return yve.transition}var Yc={recordUnsafeLifecycleWarnings:function(u,d){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(u,d){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var xve=function(u){for(var d=null,g=u;g!==null;)g.mode&ti&&(d=g),g=g.return;return d},Rv=function(u){var d=[];return u.forEach(function(g){d.push(g)}),d.sort().join(", ")},N1=[],_1=[],C1=[],T1=[],D1=[],k1=[],Ov=new Set;Yc.recordUnsafeLifecycleWarnings=function(u,d){Ov.has(u.type)||(typeof d.componentWillMount=="function"&&d.componentWillMount.__suppressDeprecationWarning!==!0&&N1.push(u),u.mode&ti&&typeof d.UNSAFE_componentWillMount=="function"&&_1.push(u),typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&C1.push(u),u.mode&ti&&typeof d.UNSAFE_componentWillReceiveProps=="function"&&T1.push(u),typeof d.componentWillUpdate=="function"&&d.componentWillUpdate.__suppressDeprecationWarning!==!0&&D1.push(u),u.mode&ti&&typeof d.UNSAFE_componentWillUpdate=="function"&&k1.push(u))},Yc.flushPendingUnsafeLifecycleWarnings=function(){var u=new Set;N1.length>0&&(N1.forEach(function(Me){u.add(kn(Me)||"Component"),Ov.add(Me.type)}),N1=[]);var d=new Set;_1.length>0&&(_1.forEach(function(Me){d.add(kn(Me)||"Component"),Ov.add(Me.type)}),_1=[]);var g=new Set;C1.length>0&&(C1.forEach(function(Me){g.add(kn(Me)||"Component"),Ov.add(Me.type)}),C1=[]);var E=new Set;T1.length>0&&(T1.forEach(function(Me){E.add(kn(Me)||"Component"),Ov.add(Me.type)}),T1=[]);var D=new Set;D1.length>0&&(D1.forEach(function(Me){D.add(kn(Me)||"Component"),Ov.add(Me.type)}),D1=[]);var $=new Set;if(k1.length>0&&(k1.forEach(function(Me){$.add(kn(Me)||"Component"),Ov.add(Me.type)}),k1=[]),d.size>0){var K=Rv(d);s(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,K)}if(E.size>0){var ee=Rv(E);s(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,ee)}if($.size>0){var se=Rv($);s(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,se)}if(u.size>0){var be=Rv(u);a(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,be)}if(g.size>0){var Se=Rv(g);a(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,Se)}if(D.size>0){var Ve=Rv(D);a(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,Ve)}};var cC=new Map,m6=new Set;Yc.recordLegacyContextWarning=function(u,d){var g=xve(u);if(g===null){s("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!m6.has(u.type)){var E=cC.get(g);(u.type.contextTypes!=null||u.type.childContextTypes!=null||d!==null&&typeof d.getChildContext=="function")&&(E===void 0&&(E=[],cC.set(g,E)),E.push(u))}},Yc.flushLegacyContextWarning=function(){cC.forEach(function(u,d){if(u.length!==0){var g=u[0],E=new Set;u.forEach(function($){E.add(kn($)||"Component"),m6.add($.type)});var D=Rv(E);try{Kr(g),s(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,D)}finally{mi()}}})},Yc.discardPendingWarnings=function(){N1=[],_1=[],C1=[],T1=[],D1=[],k1=[],cC=new Map}}var i2,a2,s2,o2,l2,p6=function(u,d){};i2=!1,a2=!1,s2={},o2={},l2={},p6=function(u,d){if(!(u===null||typeof u!="object")&&!(!u._store||u._store.validated||u.key!=null)){if(typeof u._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");u._store.validated=!0;var g=kn(d)||"Component";o2[g]||(o2[g]=!0,s('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function Sve(u){return u.prototype&&u.prototype.isReactComponent}function P1(u,d,g){var E=g.ref;if(E!==null&&typeof E!="function"&&typeof E!="object"){if((u.mode&ti||ae)&&!(g._owner&&g._self&&g._owner.stateNode!==g._self)&&!(g._owner&&g._owner.tag!==c)&&!(typeof g.type=="function"&&!Sve(g.type))&&g._owner){var D=kn(u)||"Component";s2[D]||(s('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',D,E),s2[D]=!0)}if(g._owner){var $=g._owner,K;if($){var ee=$;if(ee.tag!==c)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");K=ee.stateNode}if(!K)throw new Error("Missing owner for string ref "+E+". This error is likely caused by a bug in React. Please file an issue.");var se=K;gt(E,"ref");var be=""+E;if(d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===be)return d.ref;var Se=function(Ve){var Me=se.refs;Ve===null?delete Me[be]:Me[be]=Ve};return Se._stringRef=be,Se}else{if(typeof E!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!g._owner)throw new Error("Element ref was specified as a string ("+E+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return E}function dC(u,d){var g=Object.prototype.toString.call(d);throw new Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.")}function fC(u){{var d=kn(u)||"Component";if(l2[d])return;l2[d]=!0,s("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function g6(u){var d=u._payload,g=u._init;return g(d)}function v6(u){function d(Ge,ut){if(u){var Ke=Ge.deletions;Ke===null?(Ge.deletions=[ut],Ge.flags|=el):Ke.push(ut)}}function g(Ge,ut){if(!u)return null;for(var Ke=ut;Ke!==null;)d(Ge,Ke),Ke=Ke.sibling;return null}function E(Ge,ut){for(var Ke=new Map,Ct=ut;Ct!==null;)Ct.key!==null?Ke.set(Ct.key,Ct):Ke.set(Ct.index,Ct),Ct=Ct.sibling;return Ke}function D(Ge,ut){var Ke=Uv(Ge,ut);return Ke.index=0,Ke.sibling=null,Ke}function $(Ge,ut,Ke){if(Ge.index=Ke,!u)return Ge.flags|=xh,ut;var Ct=Ge.alternate;if(Ct!==null){var Qt=Ct.index;return Qt<ut?(Ge.flags|=yi,ut):Qt}else return Ge.flags|=yi,ut}function K(Ge){return u&&Ge.alternate===null&&(Ge.flags|=yi),Ge}function ee(Ge,ut,Ke,Ct){if(ut===null||ut.tag!==v){var Qt=rI(Ke,Ge.mode,Ct);return Qt.return=Ge,Qt}else{var Jt=D(ut,Ke);return Jt.return=Ge,Jt}}function se(Ge,ut,Ke,Ct){var Qt=Ke.type;if(Qt===Zn)return Se(Ge,ut,Ke.props.children,Ct,Ke.key);if(ut!==null&&(ut.elementType===Qt||S9(ut,Ke)||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===We&&g6(Qt)===ut.type)){var Jt=D(ut,Ke.props);return Jt.ref=P1(Ge,ut,Ke),Jt.return=Ge,Jt._debugSource=Ke._source,Jt._debugOwner=Ke._owner,Jt}var zn=nI(Ke,Ge.mode,Ct);return zn.ref=P1(Ge,ut,Ke),zn.return=Ge,zn}function be(Ge,ut,Ke,Ct){if(ut===null||ut.tag!==m||ut.stateNode.containerInfo!==Ke.containerInfo||ut.stateNode.implementation!==Ke.implementation){var Qt=iI(Ke,Ge.mode,Ct);return Qt.return=Ge,Qt}else{var Jt=D(ut,Ke.children||[]);return Jt.return=Ge,Jt}}function Se(Ge,ut,Ke,Ct,Qt){if(ut===null||ut.tag!==y){var Jt=jp(Ke,Ge.mode,Ct,Qt);return Jt.return=Ge,Jt}else{var zn=D(ut,Ke);return zn.return=Ge,zn}}function Ve(Ge,ut,Ke){if(typeof ut=="string"&&ut!==""||typeof ut=="number"){var Ct=rI(""+ut,Ge.mode,Ke);return Ct.return=Ge,Ct}if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case $r:{var Qt=nI(ut,Ge.mode,Ke);return Qt.ref=P1(Ge,null,ut),Qt.return=Ge,Qt}case qt:{var Jt=iI(ut,Ge.mode,Ke);return Jt.return=Ge,Jt}case We:{var zn=ut._payload,Xn=ut._init;return Ve(Ge,Xn(zn),Ke)}}if(un(ut)||Dn(ut)){var ri=jp(ut,Ge.mode,Ke,null);return ri.return=Ge,ri}dC(Ge,ut)}return typeof ut=="function"&&fC(Ge),null}function Me(Ge,ut,Ke,Ct){var Qt=ut!==null?ut.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Qt!==null?null:ee(Ge,ut,""+Ke,Ct);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case $r:return Ke.key===Qt?se(Ge,ut,Ke,Ct):null;case qt:return Ke.key===Qt?be(Ge,ut,Ke,Ct):null;case We:{var Jt=Ke._payload,zn=Ke._init;return Me(Ge,ut,zn(Jt),Ct)}}if(un(Ke)||Dn(Ke))return Qt!==null?null:Se(Ge,ut,Ke,Ct,null);dC(Ge,Ke)}return typeof Ke=="function"&&fC(Ge),null}function Je(Ge,ut,Ke,Ct,Qt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"){var Jt=Ge.get(Ke)||null;return ee(ut,Jt,""+Ct,Qt)}if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case $r:{var zn=Ge.get(Ct.key===null?Ke:Ct.key)||null;return se(ut,zn,Ct,Qt)}case qt:{var Xn=Ge.get(Ct.key===null?Ke:Ct.key)||null;return be(ut,Xn,Ct,Qt)}case We:var ri=Ct._payload,Br=Ct._init;return Je(Ge,ut,Ke,Br(ri),Qt)}if(un(Ct)||Dn(Ct)){var ha=Ge.get(Ke)||null;return Se(ut,ha,Ct,Qt,null)}dC(ut,Ct)}return typeof Ct=="function"&&fC(ut),null}function Xe(Ge,ut,Ke){{if(typeof Ge!="object"||Ge===null)return ut;switch(Ge.$$typeof){case $r:case qt:p6(Ge,Ke);var Ct=Ge.key;if(typeof Ct!="string")break;if(ut===null){ut=new Set,ut.add(Ct);break}if(!ut.has(Ct)){ut.add(Ct);break}s("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",Ct);break;case We:var Qt=Ge._payload,Jt=Ge._init;Xe(Jt(Qt),ut,Ke);break}}return ut}function lt(Ge,ut,Ke,Ct){for(var Qt=null,Jt=0;Jt<Ke.length;Jt++){var zn=Ke[Jt];Qt=Xe(zn,Qt,Ge)}for(var Xn=null,ri=null,Br=ut,ha=0,Ur=0,sa=null;Br!==null&&Ur<Ke.length;Ur++){Br.index>Ur?(sa=Br,Br=null):sa=Br.sibling;var Qs=Me(Ge,Br,Ke[Ur],Ct);if(Qs===null){Br===null&&(Br=sa);break}u&&Br&&Qs.alternate===null&&d(Ge,Br),ha=$(Qs,ha,Ur),ri===null?Xn=Qs:ri.sibling=Qs,ri=Qs,Br=sa}if(Ur===Ke.length){if(g(Ge,Br),Cs()){var Os=Ur;kv(Ge,Os)}return Xn}if(Br===null){for(;Ur<Ke.length;Ur++){var Xl=Ve(Ge,Ke[Ur],Ct);Xl!==null&&(ha=$(Xl,ha,Ur),ri===null?Xn=Xl:ri.sibling=Xl,ri=Xl)}if(Cs()){var ko=Ur;kv(Ge,ko)}return Xn}for(var Po=E(Ge,Br);Ur<Ke.length;Ur++){var eo=Je(Po,Ge,Ur,Ke[Ur],Ct);eo!==null&&(u&&eo.alternate!==null&&Po.delete(eo.key===null?Ur:eo.key),ha=$(eo,ha,Ur),ri===null?Xn=eo:ri.sibling=eo,ri=eo)}if(u&&Po.forEach(function(l0){return d(Ge,l0)}),Cs()){var Kh=Ur;kv(Ge,Kh)}return Xn}function Yt(Ge,ut,Ke,Ct){var Qt=Dn(Ke);if(typeof Qt!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&Ke[Symbol.toStringTag]==="Generator"&&(a2||s("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),a2=!0),Ke.entries===Qt&&(i2||s("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),i2=!0);var Jt=Qt.call(Ke);if(Jt)for(var zn=null,Xn=Jt.next();!Xn.done;Xn=Jt.next()){var ri=Xn.value;zn=Xe(ri,zn,Ge)}}var Br=Qt.call(Ke);if(Br==null)throw new Error("An iterable object provided no iterator.");for(var ha=null,Ur=null,sa=ut,Qs=0,Os=0,Xl=null,ko=Br.next();sa!==null&&!ko.done;Os++,ko=Br.next()){sa.index>Os?(Xl=sa,sa=null):Xl=sa.sibling;var Po=Me(Ge,sa,ko.value,Ct);if(Po===null){sa===null&&(sa=Xl);break}u&&sa&&Po.alternate===null&&d(Ge,sa),Qs=$(Po,Qs,Os),Ur===null?ha=Po:Ur.sibling=Po,Ur=Po,sa=Xl}if(ko.done){if(g(Ge,sa),Cs()){var eo=Os;kv(Ge,eo)}return ha}if(sa===null){for(;!ko.done;Os++,ko=Br.next()){var Kh=Ve(Ge,ko.value,Ct);Kh!==null&&(Qs=$(Kh,Qs,Os),Ur===null?ha=Kh:Ur.sibling=Kh,Ur=Kh)}if(Cs()){var l0=Os;kv(Ge,l0)}return ha}for(var lS=E(Ge,sa);!ko.done;Os++,ko=Br.next()){var xf=Je(lS,Ge,Os,ko.value,Ct);xf!==null&&(u&&xf.alternate!==null&&lS.delete(xf.key===null?Os:xf.key),Qs=$(xf,Qs,Os),Ur===null?ha=xf:Ur.sibling=xf,Ur=xf)}if(u&&lS.forEach(function(Y0e){return d(Ge,Y0e)}),Cs()){var K0e=Os;kv(Ge,K0e)}return ha}function An(Ge,ut,Ke,Ct){if(ut!==null&&ut.tag===v){g(Ge,ut.sibling);var Qt=D(ut,Ke);return Qt.return=Ge,Qt}g(Ge,ut);var Jt=rI(Ke,Ge.mode,Ct);return Jt.return=Ge,Jt}function En(Ge,ut,Ke,Ct){for(var Qt=Ke.key,Jt=ut;Jt!==null;){if(Jt.key===Qt){var zn=Ke.type;if(zn===Zn){if(Jt.tag===y){g(Ge,Jt.sibling);var Xn=D(Jt,Ke.props.children);return Xn.return=Ge,Xn._debugSource=Ke._source,Xn._debugOwner=Ke._owner,Xn}}else if(Jt.elementType===zn||S9(Jt,Ke)||typeof zn=="object"&&zn!==null&&zn.$$typeof===We&&g6(zn)===Jt.type){g(Ge,Jt.sibling);var ri=D(Jt,Ke.props);return ri.ref=P1(Ge,Jt,Ke),ri.return=Ge,ri._debugSource=Ke._source,ri._debugOwner=Ke._owner,ri}g(Ge,Jt);break}else d(Ge,Jt);Jt=Jt.sibling}if(Ke.type===Zn){var Br=jp(Ke.props.children,Ge.mode,Ct,Ke.key);return Br.return=Ge,Br}else{var ha=nI(Ke,Ge.mode,Ct);return ha.ref=P1(Ge,ut,Ke),ha.return=Ge,ha}}function kr(Ge,ut,Ke,Ct){for(var Qt=Ke.key,Jt=ut;Jt!==null;){if(Jt.key===Qt)if(Jt.tag===m&&Jt.stateNode.containerInfo===Ke.containerInfo&&Jt.stateNode.implementation===Ke.implementation){g(Ge,Jt.sibling);var zn=D(Jt,Ke.children||[]);return zn.return=Ge,zn}else{g(Ge,Jt);break}else d(Ge,Jt);Jt=Jt.sibling}var Xn=iI(Ke,Ge.mode,Ct);return Xn.return=Ge,Xn}function wr(Ge,ut,Ke,Ct){var Qt=typeof Ke=="object"&&Ke!==null&&Ke.type===Zn&&Ke.key===null;if(Qt&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case $r:return K(En(Ge,ut,Ke,Ct));case qt:return K(kr(Ge,ut,Ke,Ct));case We:var Jt=Ke._payload,zn=Ke._init;return wr(Ge,ut,zn(Jt),Ct)}if(un(Ke))return lt(Ge,ut,Ke,Ct);if(Dn(Ke))return Yt(Ge,ut,Ke,Ct);dC(Ge,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?K(An(Ge,ut,""+Ke,Ct)):(typeof Ke=="function"&&fC(Ge),g(Ge,ut))}return wr}var zb=v6(!0),y6=v6(!1);function Eve(u,d){if(u!==null&&d.child!==u.child)throw new Error("Resuming work not yet implemented.");if(d.child!==null){var g=d.child,E=Uv(g,g.pendingProps);for(d.child=E,E.return=d;g.sibling!==null;)g=g.sibling,E=E.sibling=Uv(g,g.pendingProps),E.return=d;E.sibling=null}}function Nve(u,d){for(var g=u.child;g!==null;)d0e(g,d),g=g.sibling}var u2=wp(null),c2;c2={};var hC=null,Hb=null,d2=null,mC=!1;function pC(){hC=null,Hb=null,d2=null,mC=!1}function b6(){mC=!0}function w6(){mC=!1}function x6(u,d,g){Xs(u2,d._currentValue,u),d._currentValue=g,d._currentRenderer!==void 0&&d._currentRenderer!==null&&d._currentRenderer!==c2&&s("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),d._currentRenderer=c2}function f2(u,d){var g=u2.current;qs(u2,d),u._currentValue=g}function h2(u,d,g){for(var E=u;E!==null;){var D=E.alternate;if(df(E.childLanes,d)?D!==null&&!df(D.childLanes,d)&&(D.childLanes=rr(D.childLanes,d)):(E.childLanes=rr(E.childLanes,d),D!==null&&(D.childLanes=rr(D.childLanes,d))),E===g)break;E=E.return}E!==g&&s("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function _ve(u,d,g){Cve(u,d,g)}function Cve(u,d,g){var E=u.child;for(E!==null&&(E.return=u);E!==null;){var D=void 0,$=E.dependencies;if($!==null){D=E.child;for(var K=$.firstContext;K!==null;){if(K.context===d){if(E.tag===c){var ee=No(g),se=Bh(Jr,ee);se.tag=vC;var be=E.updateQueue;if(be!==null){var Se=be.shared,Ve=Se.pending;Ve===null?se.next=se:(se.next=Ve.next,Ve.next=se),Se.pending=se}}E.lanes=rr(E.lanes,g);var Me=E.alternate;Me!==null&&(Me.lanes=rr(Me.lanes,g)),h2(E.return,g,u),$.lanes=rr($.lanes,g);break}K=K.next}}else if(E.tag===_)D=E.type===u.type?null:E.child;else if(E.tag===B){var Je=E.return;if(Je===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");Je.lanes=rr(Je.lanes,g);var Xe=Je.alternate;Xe!==null&&(Xe.lanes=rr(Xe.lanes,g)),h2(Je,g,u),D=E.sibling}else D=E.child;if(D!==null)D.return=E;else for(D=E;D!==null;){if(D===u){D=null;break}var lt=D.sibling;if(lt!==null){lt.return=D.return,D=lt;break}D=D.return}E=D}}function Gb(u,d){hC=u,Hb=null,d2=null;var g=u.dependencies;if(g!==null){var E=g.firstContext;E!==null&&(aa(g.lanes,d)&&H1(),g.firstContext=null)}}function Na(u){mC&&s("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var d=u._currentValue;if(d2!==u){var g={context:u,memoizedValue:d,next:null};if(Hb===null){if(hC===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Hb=g,hC.dependencies={lanes:bt,firstContext:g}}else Hb=Hb.next=g}return d}var jv=null;function m2(u){jv===null?jv=[u]:jv.push(u)}function Tve(){if(jv!==null){for(var u=0;u<jv.length;u++){var d=jv[u],g=d.interleaved;if(g!==null){d.interleaved=null;var E=g.next,D=d.pending;if(D!==null){var $=D.next;D.next=E,g.next=$}d.pending=g}}jv=null}}function S6(u,d,g,E){var D=d.interleaved;return D===null?(g.next=g,m2(d)):(g.next=D.next,D.next=g),d.interleaved=g,gC(u,E)}function Dve(u,d,g,E){var D=d.interleaved;D===null?(g.next=g,m2(d)):(g.next=D.next,D.next=g),d.interleaved=g}function kve(u,d,g,E){var D=d.interleaved;return D===null?(g.next=g,m2(d)):(g.next=D.next,D.next=g),d.interleaved=g,gC(u,E)}function ll(u,d){return gC(u,d)}var Pve=gC;function gC(u,d){u.lanes=rr(u.lanes,d);var g=u.alternate;g!==null&&(g.lanes=rr(g.lanes,d)),g===null&&(u.flags&(yi|Ul))!==_n&&y9(u);for(var E=u,D=u.return;D!==null;)D.childLanes=rr(D.childLanes,d),g=D.alternate,g!==null?g.childLanes=rr(g.childLanes,d):(D.flags&(yi|Ul))!==_n&&y9(u),E=D,D=D.return;if(E.tag===h){var $=E.stateNode;return $}else return null}var E6=0,N6=1,vC=2,p2=3,yC=!1,g2,bC;g2=!1,bC=null;function v2(u){var d={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:bt},effects:null};u.updateQueue=d}function _6(u,d){var g=d.updateQueue,E=u.updateQueue;if(g===E){var D={baseState:E.baseState,firstBaseUpdate:E.firstBaseUpdate,lastBaseUpdate:E.lastBaseUpdate,shared:E.shared,effects:E.effects};d.updateQueue=D}}function Bh(u,d){var g={eventTime:u,lane:d,tag:E6,payload:null,callback:null,next:null};return g}function Np(u,d,g){var E=u.updateQueue;if(E===null)return null;var D=E.shared;if(bC===D&&!g2&&(s("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),g2=!0),Dbe()){var $=D.pending;return $===null?d.next=d:(d.next=$.next,$.next=d),D.pending=d,Pve(u,g)}else return kve(u,D,d,g)}function wC(u,d,g){var E=d.updateQueue;if(E!==null){var D=E.shared;if(Vt(g)){var $=D.lanes;$=FB($,u.pendingLanes);var K=rr($,g);D.lanes=K,uO(u,K)}}}function y2(u,d){var g=u.updateQueue,E=u.alternate;if(E!==null){var D=E.updateQueue;if(g===D){var $=null,K=null,ee=g.firstBaseUpdate;if(ee!==null){var se=ee;do{var be={eventTime:se.eventTime,lane:se.lane,tag:se.tag,payload:se.payload,callback:se.callback,next:null};K===null?$=K=be:(K.next=be,K=be),se=se.next}while(se!==null);K===null?$=K=d:(K.next=d,K=d)}else $=K=d;g={baseState:D.baseState,firstBaseUpdate:$,lastBaseUpdate:K,shared:D.shared,effects:D.effects},u.updateQueue=g;return}}var Se=g.lastBaseUpdate;Se===null?g.firstBaseUpdate=d:Se.next=d,g.lastBaseUpdate=d}function Ave(u,d,g,E,D,$){switch(g.tag){case N6:{var K=g.payload;if(typeof K=="function"){b6();var ee=K.call($,E,D);{if(u.mode&ti){Ei(!0);try{K.call($,E,D)}finally{Ei(!1)}}w6()}return ee}return K}case p2:u.flags=u.flags&~ja|Sr;case E6:{var se=g.payload,be;if(typeof se=="function"){b6(),be=se.call($,E,D);{if(u.mode&ti){Ei(!0);try{se.call($,E,D)}finally{Ei(!1)}}w6()}}else be=se;return be==null?E:gn({},E,be)}case vC:return yC=!0,E}return E}function xC(u,d,g,E){var D=u.updateQueue;yC=!1,bC=D.shared;var $=D.firstBaseUpdate,K=D.lastBaseUpdate,ee=D.shared.pending;if(ee!==null){D.shared.pending=null;var se=ee,be=se.next;se.next=null,K===null?$=be:K.next=be,K=se;var Se=u.alternate;if(Se!==null){var Ve=Se.updateQueue,Me=Ve.lastBaseUpdate;Me!==K&&(Me===null?Ve.firstBaseUpdate=be:Me.next=be,Ve.lastBaseUpdate=se)}}if($!==null){var Je=D.baseState,Xe=bt,lt=null,Yt=null,An=null,En=$;do{var kr=En.lane,wr=En.eventTime;if(df(E,kr)){if(An!==null){var ut={eventTime:wr,lane:Ni,tag:En.tag,payload:En.payload,callback:En.callback,next:null};An=An.next=ut}Je=Ave(u,D,En,Je,d,g);var Ke=En.callback;if(Ke!==null&&En.lane!==Ni){u.flags|=Ym;var Ct=D.effects;Ct===null?D.effects=[En]:Ct.push(En)}}else{var Ge={eventTime:wr,lane:kr,tag:En.tag,payload:En.payload,callback:En.callback,next:null};An===null?(Yt=An=Ge,lt=Je):An=An.next=Ge,Xe=rr(Xe,kr)}if(En=En.next,En===null){if(ee=D.shared.pending,ee===null)break;var Qt=ee,Jt=Qt.next;Qt.next=null,En=Jt,D.lastBaseUpdate=Qt,D.shared.pending=null}}while(!0);An===null&&(lt=Je),D.baseState=lt,D.firstBaseUpdate=Yt,D.lastBaseUpdate=An;var zn=D.shared.interleaved;if(zn!==null){var Xn=zn;do Xe=rr(Xe,Xn.lane),Xn=Xn.next;while(Xn!==zn)}else $===null&&(D.shared.lanes=bt);rS(Xe),u.lanes=Xe,u.memoizedState=Je}bC=null}function Rve(u,d){if(typeof u!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+u));u.call(d)}function C6(){yC=!1}function SC(){return yC}function T6(u,d,g){var E=d.effects;if(d.effects=null,E!==null)for(var D=0;D<E.length;D++){var $=E[D],K=$.callback;K!==null&&($.callback=null,Rve(K,g))}}var A1={},_p=wp(A1),R1=wp(A1),EC=wp(A1);function NC(u){if(u===A1)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return u}function D6(){var u=NC(EC.current);return u}function b2(u,d){Xs(EC,d,u),Xs(R1,u,u),Xs(_p,A1,u);var g=Jpe(d);qs(_p,u),Xs(_p,g,u)}function Kb(u){qs(_p,u),qs(R1,u),qs(EC,u)}function w2(){var u=NC(_p.current);return u}function k6(u){NC(EC.current);var d=NC(_p.current),g=qpe(d,u.type);d!==g&&(Xs(R1,u,u),Xs(_p,g,u))}function x2(u){R1.current===u&&(qs(_p,u),qs(R1,u))}var Ove=0,P6=1,A6=1,O1=2,Jc=wp(Ove);function S2(u,d){return(u&d)!==0}function Yb(u){return u&P6}function E2(u,d){return u&P6|d}function jve(u,d){return u|d}function Cp(u,d){Xs(Jc,d,u)}function Jb(u){qs(Jc,u)}function Ive(u,d){var g=u.memoizedState;return g!==null?g.dehydrated!==null:(u.memoizedProps,!0)}function _C(u){for(var d=u;d!==null;){if(d.tag===P){var g=d.memoizedState;if(g!==null){var E=g.dehydrated;if(E===null||YU(E)||BO(E))return d}}else if(d.tag===W&&d.memoizedProps.revealOrder!==void 0){var D=(d.flags&Sr)!==_n;if(D)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)return null;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var ul=0,Va=1,mf=2,$a=4,Ts=8,N2=[];function _2(){for(var u=0;u<N2.length;u++){var d=N2[u];d._workInProgressVersionPrimary=null}N2.length=0}function Mve(u,d){var g=d._getVersion,E=g(d._source);u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,E]:u.mutableSourceEagerHydrationData.push(d,E)}var Xt=n.ReactCurrentDispatcher,j1=n.ReactCurrentBatchConfig,C2,qb;C2=new Set;var Iv=bt,ni=null,La=null,Fa=null,CC=!1,I1=!1,M1=0,Vve=0,$ve=25,pt=null,Hu=null,Tp=-1,T2=!1;function qr(){{var u=pt;Hu===null?Hu=[u]:Hu.push(u)}}function Ft(){{var u=pt;Hu!==null&&(Tp++,Hu[Tp]!==u&&Lve(u))}}function Xb(u){u!=null&&!un(u)&&s("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",pt,typeof u)}function Lve(u){{var d=kn(ni);if(!C2.has(d)&&(C2.add(d),Hu!==null)){for(var g="",E=30,D=0;D<=Tp;D++){for(var $=Hu[D],K=D===Tp?u:$,ee=D+1+". "+$;ee.length<E;)ee+=" ";ee+=K+`
`,g+=ee}s(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,d,g)}}}function Zs(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function D2(u,d){if(T2)return!1;if(d===null)return s("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",pt),!1;u.length!==d.length&&s(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,pt,"["+d.join(", ")+"]","["+u.join(", ")+"]");for(var g=0;g<d.length&&g<u.length;g++)if(!Yl(u[g],d[g]))return!1;return!0}function Zb(u,d,g,E,D,$){Iv=$,ni=d,Hu=u!==null?u._debugHookTypes:null,Tp=-1,T2=u!==null&&u.type!==d.type,d.memoizedState=null,d.updateQueue=null,d.lanes=bt,u!==null&&u.memoizedState!==null?Xt.current=Q6:Hu!==null?Xt.current=Z6:Xt.current=X6;var K=g(E,D);if(I1){var ee=0;do{if(I1=!1,M1=0,ee>=$ve)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");ee+=1,T2=!1,La=null,Fa=null,d.updateQueue=null,Tp=-1,Xt.current=e8,K=g(E,D)}while(I1)}Xt.current=LC,d._debugHookTypes=Hu;var se=La!==null&&La.next!==null;if(Iv=bt,ni=null,La=null,Fa=null,pt=null,Hu=null,Tp=-1,u!==null&&(u.flags&Ia)!==(d.flags&Ia)&&(u.mode&sr)!==bn&&s("Internal React error: Expected static flag was missing. Please notify the React team."),CC=!1,se)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return K}function Qb(){var u=M1!==0;return M1=0,u}function R6(u,d,g){d.updateQueue=u.updateQueue,(d.mode&xo)!==bn?d.flags&=-50333701:d.flags&=-2053,u.lanes=T_(u.lanes,g)}function O6(){if(Xt.current=LC,CC){for(var u=ni.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}CC=!1}Iv=bt,ni=null,La=null,Fa=null,Hu=null,Tp=-1,pt=null,G6=!1,I1=!1,M1=0}function pf(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fa===null?ni.memoizedState=Fa=u:Fa=Fa.next=u,Fa}function Gu(){var u;if(La===null){var d=ni.alternate;d!==null?u=d.memoizedState:u=null}else u=La.next;var g;if(Fa===null?g=ni.memoizedState:g=Fa.next,g!==null)Fa=g,g=Fa.next,La=u;else{if(u===null)throw new Error("Rendered more hooks than during the previous render.");La=u;var E={memoizedState:La.memoizedState,baseState:La.baseState,baseQueue:La.baseQueue,queue:La.queue,next:null};Fa===null?ni.memoizedState=Fa=E:Fa=Fa.next=E}return Fa}function j6(){return{lastEffect:null,stores:null}}function k2(u,d){return typeof d=="function"?d(u):d}function P2(u,d,g){var E=pf(),D;g!==void 0?D=g(d):D=d,E.memoizedState=E.baseState=D;var $={pending:null,interleaved:null,lanes:bt,dispatch:null,lastRenderedReducer:u,lastRenderedState:D};E.queue=$;var K=$.dispatch=Wve.bind(null,ni,$);return[E.memoizedState,K]}function A2(u,d,g){var E=Gu(),D=E.queue;if(D===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");D.lastRenderedReducer=u;var $=La,K=$.baseQueue,ee=D.pending;if(ee!==null){if(K!==null){var se=K.next,be=ee.next;K.next=be,ee.next=se}$.baseQueue!==K&&s("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),$.baseQueue=K=ee,D.pending=null}if(K!==null){var Se=K.next,Ve=$.baseState,Me=null,Je=null,Xe=null,lt=Se;do{var Yt=lt.lane;if(df(Iv,Yt)){if(Xe!==null){var En={lane:Ni,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};Xe=Xe.next=En}if(lt.hasEagerState)Ve=lt.eagerState;else{var kr=lt.action;Ve=u(Ve,kr)}}else{var An={lane:Yt,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};Xe===null?(Je=Xe=An,Me=Ve):Xe=Xe.next=An,ni.lanes=rr(ni.lanes,Yt),rS(Yt)}lt=lt.next}while(lt!==null&&lt!==Se);Xe===null?Me=Ve:Xe.next=Je,Yl(Ve,E.memoizedState)||H1(),E.memoizedState=Ve,E.baseState=Me,E.baseQueue=Xe,D.lastRenderedState=Ve}var wr=D.interleaved;if(wr!==null){var Ge=wr;do{var ut=Ge.lane;ni.lanes=rr(ni.lanes,ut),rS(ut),Ge=Ge.next}while(Ge!==wr)}else K===null&&(D.lanes=bt);var Ke=D.dispatch;return[E.memoizedState,Ke]}function R2(u,d,g){var E=Gu(),D=E.queue;if(D===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");D.lastRenderedReducer=u;var $=D.dispatch,K=D.pending,ee=E.memoizedState;if(K!==null){D.pending=null;var se=K.next,be=se;do{var Se=be.action;ee=u(ee,Se),be=be.next}while(be!==se);Yl(ee,E.memoizedState)||H1(),E.memoizedState=ee,E.baseQueue===null&&(E.baseState=ee),D.lastRenderedState=ee}return[ee,$]}function _ot(u,d,g){}function Cot(u,d,g){}function O2(u,d,g){var E=ni,D=pf(),$,K=Cs();if(K){if(g===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");$=g(),qb||$!==g()&&(s("The result of getServerSnapshot should be cached to avoid an infinite loop"),qb=!0)}else{if($=d(),!qb){var ee=d();Yl($,ee)||(s("The result of getSnapshot should be cached to avoid an infinite loop"),qb=!0)}var se=iT();if(se===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");mt(se,Iv)||I6(E,d,$)}D.memoizedState=$;var be={value:$,getSnapshot:d};return D.queue=be,AC(V6.bind(null,E,be,u),[u]),E.flags|=Bl,V1(Va|Ts,M6.bind(null,E,be,$,d),void 0,null),$}function TC(u,d,g){var E=ni,D=Gu(),$=d();if(!qb){var K=d();Yl($,K)||(s("The result of getSnapshot should be cached to avoid an infinite loop"),qb=!0)}var ee=D.memoizedState,se=!Yl(ee,$);se&&(D.memoizedState=$,H1());var be=D.queue;if(L1(V6.bind(null,E,be,u),[u]),be.getSnapshot!==d||se||Fa!==null&&Fa.memoizedState.tag&Va){E.flags|=Bl,V1(Va|Ts,M6.bind(null,E,be,$,d),void 0,null);var Se=iT();if(Se===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");mt(Se,Iv)||I6(E,d,$)}return $}function I6(u,d,g){u.flags|=yh;var E={getSnapshot:d,value:g},D=ni.updateQueue;if(D===null)D=j6(),ni.updateQueue=D,D.stores=[E];else{var $=D.stores;$===null?D.stores=[E]:$.push(E)}}function M6(u,d,g,E){d.value=g,d.getSnapshot=E,$6(d)&&L6(u)}function V6(u,d,g){var E=function(){$6(d)&&L6(u)};return g(E)}function $6(u){var d=u.getSnapshot,g=u.value;try{var E=d();return!Yl(g,E)}catch{return!0}}function L6(u){var d=ll(u,Ln);d!==null&&za(d,u,Ln,Jr)}function DC(u){var d=pf();typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u;var g={pending:null,interleaved:null,lanes:bt,dispatch:null,lastRenderedReducer:k2,lastRenderedState:u};d.queue=g;var E=g.dispatch=zve.bind(null,ni,g);return[d.memoizedState,E]}function j2(u){return A2(k2)}function I2(u){return R2(k2)}function V1(u,d,g,E){var D={tag:u,create:d,destroy:g,deps:E,next:null},$=ni.updateQueue;if($===null)$=j6(),ni.updateQueue=$,$.lastEffect=D.next=D;else{var K=$.lastEffect;if(K===null)$.lastEffect=D.next=D;else{var ee=K.next;K.next=D,D.next=ee,$.lastEffect=D}}return D}function M2(u){var d=pf();{var g={current:u};return d.memoizedState=g,g}}function kC(u){var d=Gu();return d.memoizedState}function $1(u,d,g,E){var D=pf(),$=E===void 0?null:E;ni.flags|=u,D.memoizedState=V1(Va|d,g,void 0,$)}function PC(u,d,g,E){var D=Gu(),$=E===void 0?null:E,K=void 0;if(La!==null){var ee=La.memoizedState;if(K=ee.destroy,$!==null){var se=ee.deps;if(D2($,se)){D.memoizedState=V1(d,g,K,$);return}}}ni.flags|=u,D.memoizedState=V1(Va|d,g,K,$)}function AC(u,d){return(ni.mode&xo)!==bn?$1(Sh|Bl|fv,Ts,u,d):$1(Bl|fv,Ts,u,d)}function L1(u,d){return PC(Bl,Ts,u,d)}function V2(u,d){return $1(mr,mf,u,d)}function RC(u,d){return PC(mr,mf,u,d)}function $2(u,d){var g=mr;return g|=Vc,(ni.mode&xo)!==bn&&(g|=Sa),$1(g,$a,u,d)}function OC(u,d){return PC(mr,$a,u,d)}function F6(u,d){if(typeof d=="function"){var g=d,E=u();return g(E),function(){g(null)}}else if(d!=null){var D=d;D.hasOwnProperty("current")||s("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(D).join(", ")+"}");var $=u();return D.current=$,function(){D.current=null}}}function L2(u,d,g){typeof d!="function"&&s("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",d!==null?typeof d:"null");var E=g!=null?g.concat([u]):null,D=mr;return D|=Vc,(ni.mode&xo)!==bn&&(D|=Sa),$1(D,$a,F6.bind(null,d,u),E)}function jC(u,d,g){typeof d!="function"&&s("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",d!==null?typeof d:"null");var E=g!=null?g.concat([u]):null;return PC(mr,$a,F6.bind(null,d,u),E)}function Fve(u,d){}var IC=Fve;function F2(u,d){var g=pf(),E=d===void 0?null:d;return g.memoizedState=[u,E],u}function MC(u,d){var g=Gu(),E=d===void 0?null:d,D=g.memoizedState;if(D!==null&&E!==null){var $=D[1];if(D2(E,$))return D[0]}return g.memoizedState=[u,E],u}function B2(u,d){var g=pf(),E=d===void 0?null:d,D=u();return g.memoizedState=[D,E],D}function VC(u,d){var g=Gu(),E=d===void 0?null:d,D=g.memoizedState;if(D!==null&&E!==null){var $=D[1];if(D2(E,$))return D[0]}var K=u();return g.memoizedState=[K,E],K}function U2(u){var d=pf();return d.memoizedState=u,u}function B6(u){var d=Gu(),g=La,E=g.memoizedState;return W6(d,E,u)}function U6(u){var d=Gu();if(La===null)return d.memoizedState=u,u;var g=La.memoizedState;return W6(d,g,u)}function W6(u,d,g){var E=!Pe(Iv);if(E){if(!Yl(g,d)){var D=Wn();ni.lanes=rr(ni.lanes,D),rS(D),u.baseState=!0}return d}else return u.baseState&&(u.baseState=!1,H1()),u.memoizedState=g,g}function Bve(u,d,g){var E=Hc();us(jhe(E,jh)),u(!0);var D=j1.transition;j1.transition={};var $=j1.transition;j1.transition._updatedFibers=new Set;try{u(!1),d()}finally{if(us(E),j1.transition=D,D===null&&$._updatedFibers){var K=$._updatedFibers.size;K>10&&a("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),$._updatedFibers.clear()}}}function W2(){var u=DC(!1),d=u[0],g=u[1],E=Bve.bind(null,g),D=pf();return D.memoizedState=E,[d,E]}function z6(){var u=j2(),d=u[0],g=Gu(),E=g.memoizedState;return[d,E]}function H6(){var u=I2(),d=u[0],g=Gu(),E=g.memoizedState;return[d,E]}var G6=!1;function Uve(){return G6}function z2(){var u=pf(),d=iT(),g=d.identifierPrefix,E;if(Cs()){var D=ave();E=":"+g+"R"+D;var $=M1++;$>0&&(E+="H"+$.toString(32)),E+=":"}else{var K=Vve++;E=":"+g+"r"+K.toString(32)+":"}return u.memoizedState=E,E}function $C(){var u=Gu(),d=u.memoizedState;return d}function Wve(u,d,g){typeof arguments[3]=="function"&&s("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var E=Rp(u),D={lane:E,action:g,hasEagerState:!1,eagerState:null,next:null};if(K6(u))Y6(d,D);else{var $=S6(u,d,D,E);if($!==null){var K=Do();za($,u,E,K),J6($,d,E)}}q6(u,E)}function zve(u,d,g){typeof arguments[3]=="function"&&s("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var E=Rp(u),D={lane:E,action:g,hasEagerState:!1,eagerState:null,next:null};if(K6(u))Y6(d,D);else{var $=u.alternate;if(u.lanes===bt&&($===null||$.lanes===bt)){var K=d.lastRenderedReducer;if(K!==null){var ee;ee=Xt.current,Xt.current=qc;try{var se=d.lastRenderedState,be=K(se,g);if(D.hasEagerState=!0,D.eagerState=be,Yl(be,se)){Dve(u,d,D,E);return}}catch{}finally{Xt.current=ee}}}var Se=S6(u,d,D,E);if(Se!==null){var Ve=Do();za(Se,u,E,Ve),J6(Se,d,E)}}q6(u,E)}function K6(u){var d=u.alternate;return u===ni||d!==null&&d===ni}function Y6(u,d){I1=CC=!0;var g=u.pending;g===null?d.next=d:(d.next=g.next,g.next=d),u.pending=d}function J6(u,d,g){if(Vt(g)){var E=d.lanes;E=FB(E,u.pendingLanes);var D=rr(E,g);d.lanes=D,uO(u,D)}}function q6(u,d,g){Ss(u,d)}var LC={readContext:Na,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useInsertionEffect:Zs,useLayoutEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useMutableSource:Zs,useSyncExternalStore:Zs,useId:Zs,unstable_isNewReconciler:J},X6=null,Z6=null,Q6=null,e8=null,gf=null,qc=null,FC=null;{var H2=function(){s("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},Jn=function(){s("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};X6={readContext:function(u){return Na(u)},useCallback:function(u,d){return pt="useCallback",qr(),Xb(d),F2(u,d)},useContext:function(u){return pt="useContext",qr(),Na(u)},useEffect:function(u,d){return pt="useEffect",qr(),Xb(d),AC(u,d)},useImperativeHandle:function(u,d,g){return pt="useImperativeHandle",qr(),Xb(g),L2(u,d,g)},useInsertionEffect:function(u,d){return pt="useInsertionEffect",qr(),Xb(d),V2(u,d)},useLayoutEffect:function(u,d){return pt="useLayoutEffect",qr(),Xb(d),$2(u,d)},useMemo:function(u,d){pt="useMemo",qr(),Xb(d);var g=Xt.current;Xt.current=gf;try{return B2(u,d)}finally{Xt.current=g}},useReducer:function(u,d,g){pt="useReducer",qr();var E=Xt.current;Xt.current=gf;try{return P2(u,d,g)}finally{Xt.current=E}},useRef:function(u){return pt="useRef",qr(),M2(u)},useState:function(u){pt="useState",qr();var d=Xt.current;Xt.current=gf;try{return DC(u)}finally{Xt.current=d}},useDebugValue:function(u,d){return pt="useDebugValue",qr(),void 0},useDeferredValue:function(u){return pt="useDeferredValue",qr(),U2(u)},useTransition:function(){return pt="useTransition",qr(),W2()},useMutableSource:function(u,d,g){return pt="useMutableSource",qr(),void 0},useSyncExternalStore:function(u,d,g){return pt="useSyncExternalStore",qr(),O2(u,d,g)},useId:function(){return pt="useId",qr(),z2()},unstable_isNewReconciler:J},Z6={readContext:function(u){return Na(u)},useCallback:function(u,d){return pt="useCallback",Ft(),F2(u,d)},useContext:function(u){return pt="useContext",Ft(),Na(u)},useEffect:function(u,d){return pt="useEffect",Ft(),AC(u,d)},useImperativeHandle:function(u,d,g){return pt="useImperativeHandle",Ft(),L2(u,d,g)},useInsertionEffect:function(u,d){return pt="useInsertionEffect",Ft(),V2(u,d)},useLayoutEffect:function(u,d){return pt="useLayoutEffect",Ft(),$2(u,d)},useMemo:function(u,d){pt="useMemo",Ft();var g=Xt.current;Xt.current=gf;try{return B2(u,d)}finally{Xt.current=g}},useReducer:function(u,d,g){pt="useReducer",Ft();var E=Xt.current;Xt.current=gf;try{return P2(u,d,g)}finally{Xt.current=E}},useRef:function(u){return pt="useRef",Ft(),M2(u)},useState:function(u){pt="useState",Ft();var d=Xt.current;Xt.current=gf;try{return DC(u)}finally{Xt.current=d}},useDebugValue:function(u,d){return pt="useDebugValue",Ft(),void 0},useDeferredValue:function(u){return pt="useDeferredValue",Ft(),U2(u)},useTransition:function(){return pt="useTransition",Ft(),W2()},useMutableSource:function(u,d,g){return pt="useMutableSource",Ft(),void 0},useSyncExternalStore:function(u,d,g){return pt="useSyncExternalStore",Ft(),O2(u,d,g)},useId:function(){return pt="useId",Ft(),z2()},unstable_isNewReconciler:J},Q6={readContext:function(u){return Na(u)},useCallback:function(u,d){return pt="useCallback",Ft(),MC(u,d)},useContext:function(u){return pt="useContext",Ft(),Na(u)},useEffect:function(u,d){return pt="useEffect",Ft(),L1(u,d)},useImperativeHandle:function(u,d,g){return pt="useImperativeHandle",Ft(),jC(u,d,g)},useInsertionEffect:function(u,d){return pt="useInsertionEffect",Ft(),RC(u,d)},useLayoutEffect:function(u,d){return pt="useLayoutEffect",Ft(),OC(u,d)},useMemo:function(u,d){pt="useMemo",Ft();var g=Xt.current;Xt.current=qc;try{return VC(u,d)}finally{Xt.current=g}},useReducer:function(u,d,g){pt="useReducer",Ft();var E=Xt.current;Xt.current=qc;try{return A2(u,d,g)}finally{Xt.current=E}},useRef:function(u){return pt="useRef",Ft(),kC()},useState:function(u){pt="useState",Ft();var d=Xt.current;Xt.current=qc;try{return j2(u)}finally{Xt.current=d}},useDebugValue:function(u,d){return pt="useDebugValue",Ft(),IC()},useDeferredValue:function(u){return pt="useDeferredValue",Ft(),B6(u)},useTransition:function(){return pt="useTransition",Ft(),z6()},useMutableSource:function(u,d,g){return pt="useMutableSource",Ft(),void 0},useSyncExternalStore:function(u,d,g){return pt="useSyncExternalStore",Ft(),TC(u,d)},useId:function(){return pt="useId",Ft(),$C()},unstable_isNewReconciler:J},e8={readContext:function(u){return Na(u)},useCallback:function(u,d){return pt="useCallback",Ft(),MC(u,d)},useContext:function(u){return pt="useContext",Ft(),Na(u)},useEffect:function(u,d){return pt="useEffect",Ft(),L1(u,d)},useImperativeHandle:function(u,d,g){return pt="useImperativeHandle",Ft(),jC(u,d,g)},useInsertionEffect:function(u,d){return pt="useInsertionEffect",Ft(),RC(u,d)},useLayoutEffect:function(u,d){return pt="useLayoutEffect",Ft(),OC(u,d)},useMemo:function(u,d){pt="useMemo",Ft();var g=Xt.current;Xt.current=FC;try{return VC(u,d)}finally{Xt.current=g}},useReducer:function(u,d,g){pt="useReducer",Ft();var E=Xt.current;Xt.current=FC;try{return R2(u,d,g)}finally{Xt.current=E}},useRef:function(u){return pt="useRef",Ft(),kC()},useState:function(u){pt="useState",Ft();var d=Xt.current;Xt.current=FC;try{return I2(u)}finally{Xt.current=d}},useDebugValue:function(u,d){return pt="useDebugValue",Ft(),IC()},useDeferredValue:function(u){return pt="useDeferredValue",Ft(),U6(u)},useTransition:function(){return pt="useTransition",Ft(),H6()},useMutableSource:function(u,d,g){return pt="useMutableSource",Ft(),void 0},useSyncExternalStore:function(u,d,g){return pt="useSyncExternalStore",Ft(),TC(u,d)},useId:function(){return pt="useId",Ft(),$C()},unstable_isNewReconciler:J},gf={readContext:function(u){return H2(),Na(u)},useCallback:function(u,d){return pt="useCallback",Jn(),qr(),F2(u,d)},useContext:function(u){return pt="useContext",Jn(),qr(),Na(u)},useEffect:function(u,d){return pt="useEffect",Jn(),qr(),AC(u,d)},useImperativeHandle:function(u,d,g){return pt="useImperativeHandle",Jn(),qr(),L2(u,d,g)},useInsertionEffect:function(u,d){return pt="useInsertionEffect",Jn(),qr(),V2(u,d)},useLayoutEffect:function(u,d){return pt="useLayoutEffect",Jn(),qr(),$2(u,d)},useMemo:function(u,d){pt="useMemo",Jn(),qr();var g=Xt.current;Xt.current=gf;try{return B2(u,d)}finally{Xt.current=g}},useReducer:function(u,d,g){pt="useReducer",Jn(),qr();var E=Xt.current;Xt.current=gf;try{return P2(u,d,g)}finally{Xt.current=E}},useRef:function(u){return pt="useRef",Jn(),qr(),M2(u)},useState:function(u){pt="useState",Jn(),qr();var d=Xt.current;Xt.current=gf;try{return DC(u)}finally{Xt.current=d}},useDebugValue:function(u,d){return pt="useDebugValue",Jn(),qr(),void 0},useDeferredValue:function(u){return pt="useDeferredValue",Jn(),qr(),U2(u)},useTransition:function(){return pt="useTransition",Jn(),qr(),W2()},useMutableSource:function(u,d,g){return pt="useMutableSource",Jn(),qr(),void 0},useSyncExternalStore:function(u,d,g){return pt="useSyncExternalStore",Jn(),qr(),O2(u,d,g)},useId:function(){return pt="useId",Jn(),qr(),z2()},unstable_isNewReconciler:J},qc={readContext:function(u){return H2(),Na(u)},useCallback:function(u,d){return pt="useCallback",Jn(),Ft(),MC(u,d)},useContext:function(u){return pt="useContext",Jn(),Ft(),Na(u)},useEffect:function(u,d){return pt="useEffect",Jn(),Ft(),L1(u,d)},useImperativeHandle:function(u,d,g){return pt="useImperativeHandle",Jn(),Ft(),jC(u,d,g)},useInsertionEffect:function(u,d){return pt="useInsertionEffect",Jn(),Ft(),RC(u,d)},useLayoutEffect:function(u,d){return pt="useLayoutEffect",Jn(),Ft(),OC(u,d)},useMemo:function(u,d){pt="useMemo",Jn(),Ft();var g=Xt.current;Xt.current=qc;try{return VC(u,d)}finally{Xt.current=g}},useReducer:function(u,d,g){pt="useReducer",Jn(),Ft();var E=Xt.current;Xt.current=qc;try{return A2(u,d,g)}finally{Xt.current=E}},useRef:function(u){return pt="useRef",Jn(),Ft(),kC()},useState:function(u){pt="useState",Jn(),Ft();var d=Xt.current;Xt.current=qc;try{return j2(u)}finally{Xt.current=d}},useDebugValue:function(u,d){return pt="useDebugValue",Jn(),Ft(),IC()},useDeferredValue:function(u){return pt="useDeferredValue",Jn(),Ft(),B6(u)},useTransition:function(){return pt="useTransition",Jn(),Ft(),z6()},useMutableSource:function(u,d,g){return pt="useMutableSource",Jn(),Ft(),void 0},useSyncExternalStore:function(u,d,g){return pt="useSyncExternalStore",Jn(),Ft(),TC(u,d)},useId:function(){return pt="useId",Jn(),Ft(),$C()},unstable_isNewReconciler:J},FC={readContext:function(u){return H2(),Na(u)},useCallback:function(u,d){return pt="useCallback",Jn(),Ft(),MC(u,d)},useContext:function(u){return pt="useContext",Jn(),Ft(),Na(u)},useEffect:function(u,d){return pt="useEffect",Jn(),Ft(),L1(u,d)},useImperativeHandle:function(u,d,g){return pt="useImperativeHandle",Jn(),Ft(),jC(u,d,g)},useInsertionEffect:function(u,d){return pt="useInsertionEffect",Jn(),Ft(),RC(u,d)},useLayoutEffect:function(u,d){return pt="useLayoutEffect",Jn(),Ft(),OC(u,d)},useMemo:function(u,d){pt="useMemo",Jn(),Ft();var g=Xt.current;Xt.current=qc;try{return VC(u,d)}finally{Xt.current=g}},useReducer:function(u,d,g){pt="useReducer",Jn(),Ft();var E=Xt.current;Xt.current=qc;try{return R2(u,d,g)}finally{Xt.current=E}},useRef:function(u){return pt="useRef",Jn(),Ft(),kC()},useState:function(u){pt="useState",Jn(),Ft();var d=Xt.current;Xt.current=qc;try{return I2(u)}finally{Xt.current=d}},useDebugValue:function(u,d){return pt="useDebugValue",Jn(),Ft(),IC()},useDeferredValue:function(u){return pt="useDeferredValue",Jn(),Ft(),U6(u)},useTransition:function(){return pt="useTransition",Jn(),Ft(),H6()},useMutableSource:function(u,d,g){return pt="useMutableSource",Jn(),Ft(),void 0},useSyncExternalStore:function(u,d,g){return pt="useSyncExternalStore",Jn(),Ft(),TC(u,d)},useId:function(){return pt="useId",Jn(),Ft(),$C()},unstable_isNewReconciler:J}}var Dp=e.unstable_now,t8=0,BC=-1,F1=-1,UC=-1,G2=!1,WC=!1;function n8(){return G2}function Hve(){WC=!0}function Gve(){G2=!1,WC=!1}function Kve(){G2=WC,WC=!1}function r8(){return t8}function i8(){t8=Dp()}function K2(u){F1=Dp(),u.actualStartTime<0&&(u.actualStartTime=Dp())}function a8(u){F1=-1}function zC(u,d){if(F1>=0){var g=Dp()-F1;u.actualDuration+=g,d&&(u.selfBaseDuration=g),F1=-1}}function vf(u){if(BC>=0){var d=Dp()-BC;BC=-1;for(var g=u.return;g!==null;){switch(g.tag){case h:var E=g.stateNode;E.effectDuration+=d;return;case k:var D=g.stateNode;D.effectDuration+=d;return}g=g.return}}}function Y2(u){if(UC>=0){var d=Dp()-UC;UC=-1;for(var g=u.return;g!==null;){switch(g.tag){case h:var E=g.stateNode;E!==null&&(E.passiveEffectDuration+=d);return;case k:var D=g.stateNode;D!==null&&(D.passiveEffectDuration+=d);return}g=g.return}}}function yf(){BC=Dp()}function J2(){UC=Dp()}function q2(u){for(var d=u.child;d;)u.actualDuration+=d.actualDuration,d=d.sibling}function Xc(u,d){if(u&&u.defaultProps){var g=gn({},d),E=u.defaultProps;for(var D in E)g[D]===void 0&&(g[D]=E[D]);return g}return d}var X2={},Z2,Q2,ej,tj,nj,s8,HC,rj,ij,aj,B1;{Z2=new Set,Q2=new Set,ej=new Set,tj=new Set,rj=new Set,nj=new Set,ij=new Set,aj=new Set,B1=new Set;var o8=new Set;HC=function(u,d){if(!(u===null||typeof u=="function")){var g=d+"_"+u;o8.has(g)||(o8.add(g),s("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",d,u))}},s8=function(u,d){if(d===void 0){var g=$n(u)||"Component";nj.has(g)||(nj.add(g),s("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",g))}},Object.defineProperty(X2,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(X2)}function sj(u,d,g,E){var D=u.memoizedState,$=g(E,D);{if(u.mode&ti){Ei(!0);try{$=g(E,D)}finally{Ei(!1)}}s8(d,$)}var K=$==null?D:gn({},D,$);if(u.memoizedState=K,u.lanes===bt){var ee=u.updateQueue;ee.baseState=K}}var oj={isMounted:nl,enqueueSetState:function(u,d,g){var E=Fl(u),D=Do(),$=Rp(E),K=Bh(D,$);K.payload=d,g!=null&&(HC(g,"setState"),K.callback=g);var ee=Np(E,K,$);ee!==null&&(za(ee,E,$,D),wC(ee,E,$)),Ss(E,$)},enqueueReplaceState:function(u,d,g){var E=Fl(u),D=Do(),$=Rp(E),K=Bh(D,$);K.tag=N6,K.payload=d,g!=null&&(HC(g,"replaceState"),K.callback=g);var ee=Np(E,K,$);ee!==null&&(za(ee,E,$,D),wC(ee,E,$)),Ss(E,$)},enqueueForceUpdate:function(u,d){var g=Fl(u),E=Do(),D=Rp(g),$=Bh(E,D);$.tag=vC,d!=null&&(HC(d,"forceUpdate"),$.callback=d);var K=Np(g,$,D);K!==null&&(za(K,g,D,E),wC(K,g,D)),Dh(g,D)}};function l8(u,d,g,E,D,$,K){var ee=u.stateNode;if(typeof ee.shouldComponentUpdate=="function"){var se=ee.shouldComponentUpdate(E,$,K);{if(u.mode&ti){Ei(!0);try{se=ee.shouldComponentUpdate(E,$,K)}finally{Ei(!1)}}se===void 0&&s("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",$n(d)||"Component")}return se}return d.prototype&&d.prototype.isPureReactComponent?!u1(g,E)||!u1(D,$):!0}function Yve(u,d,g){var E=u.stateNode;{var D=$n(d)||"Component",$=E.render;$||(d.prototype&&typeof d.prototype.render=="function"?s("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",D):s("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",D)),E.getInitialState&&!E.getInitialState.isReactClassApproved&&!E.state&&s("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",D),E.getDefaultProps&&!E.getDefaultProps.isReactClassApproved&&s("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",D),E.propTypes&&s("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",D),E.contextType&&s("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",D),d.childContextTypes&&!B1.has(d)&&(u.mode&ti)===bn&&(B1.add(d),s(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,D)),d.contextTypes&&!B1.has(d)&&(u.mode&ti)===bn&&(B1.add(d),s(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,D)),E.contextTypes&&s("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",D),d.contextType&&d.contextTypes&&!ij.has(d)&&(ij.add(d),s("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",D)),typeof E.componentShouldUpdate=="function"&&s("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",D),d.prototype&&d.prototype.isPureReactComponent&&typeof E.shouldComponentUpdate<"u"&&s("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",$n(d)||"A pure component"),typeof E.componentDidUnmount=="function"&&s("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",D),typeof E.componentDidReceiveProps=="function"&&s("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",D),typeof E.componentWillRecieveProps=="function"&&s("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",D),typeof E.UNSAFE_componentWillRecieveProps=="function"&&s("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",D);var K=E.props!==g;E.props!==void 0&&K&&s("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",D,D),E.defaultProps&&s("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",D,D),typeof E.getSnapshotBeforeUpdate=="function"&&typeof E.componentDidUpdate!="function"&&!ej.has(d)&&(ej.add(d),s("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",$n(d))),typeof E.getDerivedStateFromProps=="function"&&s("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",D),typeof E.getDerivedStateFromError=="function"&&s("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",D),typeof d.getSnapshotBeforeUpdate=="function"&&s("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",D);var ee=E.state;ee&&(typeof ee!="object"||un(ee))&&s("%s.state: must be set to an object or null",D),typeof E.getChildContext=="function"&&typeof d.childContextTypes!="object"&&s("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",D)}}function u8(u,d){d.updater=oj,u.stateNode=d,Qd(d,u),d._reactInternalInstance=X2}function c8(u,d,g){var E=!1,D=Jl,$=Jl,K=d.contextType;if("contextType"in d){var ee=K===null||K!==void 0&&K.$$typeof===ne&&K._context===void 0;if(!ee&&!aj.has(d)){aj.add(d);var se="";K===void 0?se=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof K!="object"?se=" However, it is set to a "+typeof K+".":K.$$typeof===xe?se=" Did you accidentally pass the Context.Provider instead?":K._context!==void 0?se=" Did you accidentally pass the Context.Consumer instead?":se=" However, it is set to an object with keys {"+Object.keys(K).join(", ")+"}.",s("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",$n(d)||"Component",se)}}if(typeof K=="object"&&K!==null)$=Na(K);else{D=Lb(u,d,!0);var be=d.contextTypes;E=be!=null,$=E?Fb(u,D):Jl}var Se=new d(g,$);if(u.mode&ti){Ei(!0);try{Se=new d(g,$)}finally{Ei(!1)}}var Ve=u.memoizedState=Se.state!==null&&Se.state!==void 0?Se.state:null;u8(u,Se);{if(typeof d.getDerivedStateFromProps=="function"&&Ve===null){var Me=$n(d)||"Component";Q2.has(Me)||(Q2.add(Me),s("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",Me,Se.state===null?"null":"undefined",Me))}if(typeof d.getDerivedStateFromProps=="function"||typeof Se.getSnapshotBeforeUpdate=="function"){var Je=null,Xe=null,lt=null;if(typeof Se.componentWillMount=="function"&&Se.componentWillMount.__suppressDeprecationWarning!==!0?Je="componentWillMount":typeof Se.UNSAFE_componentWillMount=="function"&&(Je="UNSAFE_componentWillMount"),typeof Se.componentWillReceiveProps=="function"&&Se.componentWillReceiveProps.__suppressDeprecationWarning!==!0?Xe="componentWillReceiveProps":typeof Se.UNSAFE_componentWillReceiveProps=="function"&&(Xe="UNSAFE_componentWillReceiveProps"),typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate.__suppressDeprecationWarning!==!0?lt="componentWillUpdate":typeof Se.UNSAFE_componentWillUpdate=="function"&&(lt="UNSAFE_componentWillUpdate"),Je!==null||Xe!==null||lt!==null){var Yt=$n(d)||"Component",An=typeof d.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";tj.has(Yt)||(tj.add(Yt),s(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,Yt,An,Je!==null?`
  `+Je:"",Xe!==null?`
  `+Xe:"",lt!==null?`
  `+lt:""))}}}return E&&QU(u,D,$),Se}function Jve(u,d){var g=d.state;typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&(s("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",kn(u)||"Component"),oj.enqueueReplaceState(d,d.state,null))}function d8(u,d,g,E){var D=d.state;if(typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,E),d.state!==D){{var $=kn(u)||"Component";Z2.has($)||(Z2.add($),s("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",$))}oj.enqueueReplaceState(d,d.state,null)}}function lj(u,d,g,E){Yve(u,d,g);var D=u.stateNode;D.props=g,D.state=u.memoizedState,D.refs={},v2(u);var $=d.contextType;if(typeof $=="object"&&$!==null)D.context=Na($);else{var K=Lb(u,d,!0);D.context=Fb(u,K)}{if(D.state===g){var ee=$n(d)||"Component";rj.has(ee)||(rj.add(ee),s("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",ee))}u.mode&ti&&Yc.recordLegacyContextWarning(u,D),Yc.recordUnsafeLifecycleWarnings(u,D)}D.state=u.memoizedState;var se=d.getDerivedStateFromProps;if(typeof se=="function"&&(sj(u,d,se,g),D.state=u.memoizedState),typeof d.getDerivedStateFromProps!="function"&&typeof D.getSnapshotBeforeUpdate!="function"&&(typeof D.UNSAFE_componentWillMount=="function"||typeof D.componentWillMount=="function")&&(Jve(u,D),xC(u,g,D,E),D.state=u.memoizedState),typeof D.componentDidMount=="function"){var be=mr;be|=Vc,(u.mode&xo)!==bn&&(be|=Sa),u.flags|=be}}function qve(u,d,g,E){var D=u.stateNode,$=u.memoizedProps;D.props=$;var K=D.context,ee=d.contextType,se=Jl;if(typeof ee=="object"&&ee!==null)se=Na(ee);else{var be=Lb(u,d,!0);se=Fb(u,be)}var Se=d.getDerivedStateFromProps,Ve=typeof Se=="function"||typeof D.getSnapshotBeforeUpdate=="function";!Ve&&(typeof D.UNSAFE_componentWillReceiveProps=="function"||typeof D.componentWillReceiveProps=="function")&&($!==g||K!==se)&&d8(u,D,g,se),C6();var Me=u.memoizedState,Je=D.state=Me;if(xC(u,g,D,E),Je=u.memoizedState,$===g&&Me===Je&&!nC()&&!SC()){if(typeof D.componentDidMount=="function"){var Xe=mr;Xe|=Vc,(u.mode&xo)!==bn&&(Xe|=Sa),u.flags|=Xe}return!1}typeof Se=="function"&&(sj(u,d,Se,g),Je=u.memoizedState);var lt=SC()||l8(u,d,$,g,Me,Je,se);if(lt){if(!Ve&&(typeof D.UNSAFE_componentWillMount=="function"||typeof D.componentWillMount=="function")&&(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"){var Yt=mr;Yt|=Vc,(u.mode&xo)!==bn&&(Yt|=Sa),u.flags|=Yt}}else{if(typeof D.componentDidMount=="function"){var An=mr;An|=Vc,(u.mode&xo)!==bn&&(An|=Sa),u.flags|=An}u.memoizedProps=g,u.memoizedState=Je}return D.props=g,D.state=Je,D.context=se,lt}function Xve(u,d,g,E,D){var $=d.stateNode;_6(u,d);var K=d.memoizedProps,ee=d.type===d.elementType?K:Xc(d.type,K);$.props=ee;var se=d.pendingProps,be=$.context,Se=g.contextType,Ve=Jl;if(typeof Se=="object"&&Se!==null)Ve=Na(Se);else{var Me=Lb(d,g,!0);Ve=Fb(d,Me)}var Je=g.getDerivedStateFromProps,Xe=typeof Je=="function"||typeof $.getSnapshotBeforeUpdate=="function";!Xe&&(typeof $.UNSAFE_componentWillReceiveProps=="function"||typeof $.componentWillReceiveProps=="function")&&(K!==se||be!==Ve)&&d8(d,$,E,Ve),C6();var lt=d.memoizedState,Yt=$.state=lt;if(xC(d,E,$,D),Yt=d.memoizedState,K===se&&lt===Yt&&!nC()&&!SC()&&!Z)return typeof $.componentDidUpdate=="function"&&(K!==u.memoizedProps||lt!==u.memoizedState)&&(d.flags|=mr),typeof $.getSnapshotBeforeUpdate=="function"&&(K!==u.memoizedProps||lt!==u.memoizedState)&&(d.flags|=ef),!1;typeof Je=="function"&&(sj(d,g,Je,E),Yt=d.memoizedState);var An=SC()||l8(d,g,ee,E,lt,Yt,Ve)||Z;return An?(!Xe&&(typeof $.UNSAFE_componentWillUpdate=="function"||typeof $.componentWillUpdate=="function")&&(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(E,Yt,Ve),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(E,Yt,Ve)),typeof $.componentDidUpdate=="function"&&(d.flags|=mr),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=ef)):(typeof $.componentDidUpdate=="function"&&(K!==u.memoizedProps||lt!==u.memoizedState)&&(d.flags|=mr),typeof $.getSnapshotBeforeUpdate=="function"&&(K!==u.memoizedProps||lt!==u.memoizedState)&&(d.flags|=ef),d.memoizedProps=E,d.memoizedState=Yt),$.props=E,$.state=Yt,$.context=Ve,An}function Mv(u,d){return{value:u,source:d,stack:na(d),digest:null}}function uj(u,d,g){return{value:u,source:null,stack:g??null,digest:d??null}}function Zve(u,d){return!0}function cj(u,d){try{var g=Zve(u,d);if(g===!1)return;var E=d.value,D=d.source,$=d.stack,K=$!==null?$:"";if(E!=null&&E._suppressLogging){if(u.tag===c)return;console.error(E)}var ee=D?kn(D):null,se=ee?"The above error occurred in the <"+ee+"> component:":"The above error occurred in one of your React components:",be;if(u.tag===h)be=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var Se=kn(u)||"Anonymous";be="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+Se+".")}var Ve=se+`
`+K+`

`+(""+be);console.error(Ve)}catch(Me){setTimeout(function(){throw Me})}}var Qve=typeof WeakMap=="function"?WeakMap:Map;function f8(u,d,g){var E=Bh(Jr,g);E.tag=p2,E.payload={element:null};var D=d.value;return E.callback=function(){Hbe(D),cj(u,d)},E}function dj(u,d,g){var E=Bh(Jr,g);E.tag=p2;var D=u.type.getDerivedStateFromError;if(typeof D=="function"){var $=d.value;E.payload=function(){return D($)},E.callback=function(){E9(u),cj(u,d)}}var K=u.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(E.callback=function(){E9(u),cj(u,d),typeof D!="function"&&Wbe(this);var se=d.value,be=d.stack;this.componentDidCatch(se,{componentStack:be!==null?be:""}),typeof D!="function"&&(aa(u.lanes,Ln)||s("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",kn(u)||"Unknown"))}),E}function h8(u,d,g){var E=u.pingCache,D;if(E===null?(E=u.pingCache=new Qve,D=new Set,E.set(d,D)):(D=E.get(d),D===void 0&&(D=new Set,E.set(d,D))),!D.has(g)){D.add(g);var $=Gbe.bind(null,u,d,g);ls&&iS(u,g),d.then($,$)}}function eye(u,d,g,E){var D=u.updateQueue;if(D===null){var $=new Set;$.add(g),u.updateQueue=$}else D.add(g)}function tye(u,d){var g=u.tag;if((u.mode&sr)===bn&&(g===l||g===N||g===A)){var E=u.alternate;E?(u.updateQueue=E.updateQueue,u.memoizedState=E.memoizedState,u.lanes=E.lanes):(u.updateQueue=null,u.memoizedState=null)}}function m8(u){var d=u;do{if(d.tag===P&&Ive(d))return d;d=d.return}while(d!==null);return null}function p8(u,d,g,E,D){if((u.mode&sr)===bn){if(u===d)u.flags|=ja;else{if(u.flags|=Sr,g.flags|=wh,g.flags&=-52805,g.tag===c){var $=g.alternate;if($===null)g.tag=L;else{var K=Bh(Jr,Ln);K.tag=vC,Np(g,K,Ln)}}g.lanes=rr(g.lanes,Ln)}return u}return u.flags|=ja,u.lanes=D,u}function nye(u,d,g,E,D){if(g.flags|=Jm,ls&&iS(u,D),E!==null&&typeof E=="object"&&typeof E.then=="function"){var $=E;tye(g),Cs()&&g.mode&sr&&s6();var K=m8(d);if(K!==null){K.flags&=~tl,p8(K,d,g,u,D),K.mode&sr&&h8(u,$,D),eye(K,u,$);return}else{if(!Q(D)){h8(u,$,D),zj();return}var ee=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");E=ee}}else if(Cs()&&g.mode&sr){s6();var se=m8(d);if(se!==null){(se.flags&ja)===_n&&(se.flags|=tl),p8(se,d,g,u,D),r2(Mv(E,g));return}}E=Mv(E,g),Ibe(E);var be=d;do{switch(be.tag){case h:{var Se=E;be.flags|=ja;var Ve=No(D);be.lanes=rr(be.lanes,Ve);var Me=f8(be,Se,Ve);y2(be,Me);return}case c:var Je=E,Xe=be.type,lt=be.stateNode;if((be.flags&Sr)===_n&&(typeof Xe.getDerivedStateFromError=="function"||lt!==null&&typeof lt.componentDidCatch=="function"&&!m9(lt))){be.flags|=ja;var Yt=No(D);be.lanes=rr(be.lanes,Yt);var An=dj(be,Je,Yt);y2(be,An);return}break}be=be.return}while(be!==null)}function rye(){return null}var U1=n.ReactCurrentOwner,Zc=!1,fj,W1,hj,mj,pj,Vv,gj,GC,z1;fj={},W1={},hj={},mj={},pj={},Vv=!1,gj={},GC={},z1={};function Co(u,d,g,E){u===null?d.child=y6(d,null,g,E):d.child=zb(d,u.child,g,E)}function iye(u,d,g,E){d.child=zb(d,u.child,null,E),d.child=zb(d,null,g,E)}function g8(u,d,g,E,D){if(d.type!==d.elementType){var $=g.propTypes;$&&Gc($,E,"prop",$n(g))}var K=g.render,ee=d.ref,se,be;Gb(d,D),ju(d);{if(U1.current=d,ts(!0),se=Zb(u,d,K,E,ee,D),be=Qb(),d.mode&ti){Ei(!0);try{se=Zb(u,d,K,E,ee,D),be=Qb()}finally{Ei(!1)}}ts(!1)}return wo(),u!==null&&!Zc?(R6(u,d,D),Uh(u,d,D)):(Cs()&&be&&XO(d),d.flags|=Qo,Co(u,d,se,D),d.child)}function v8(u,d,g,E,D){if(u===null){var $=g.type;if(u0e($)&&g.compare===null&&g.defaultProps===void 0){var K=$;return K=o0($),d.tag=A,d.type=K,bj(d,$),y8(u,d,K,E,D)}{var ee=$.propTypes;if(ee&&Gc(ee,E,"prop",$n($)),g.defaultProps!==void 0){var se=$n($)||"Unknown";z1[se]||(s("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",se),z1[se]=!0)}}var be=tI(g.type,null,E,d,d.mode,D);return be.ref=d.ref,be.return=d,d.child=be,be}{var Se=g.type,Ve=Se.propTypes;Ve&&Gc(Ve,E,"prop",$n(Se))}var Me=u.child,Je=_j(u,D);if(!Je){var Xe=Me.memoizedProps,lt=g.compare;if(lt=lt!==null?lt:u1,lt(Xe,E)&&u.ref===d.ref)return Uh(u,d,D)}d.flags|=Qo;var Yt=Uv(Me,E);return Yt.ref=d.ref,Yt.return=d,d.child=Yt,Yt}function y8(u,d,g,E,D){if(d.type!==d.elementType){var $=d.elementType;if($.$$typeof===We){var K=$,ee=K._payload,se=K._init;try{$=se(ee)}catch{$=null}var be=$&&$.propTypes;be&&Gc(be,E,"prop",$n($))}}if(u!==null){var Se=u.memoizedProps;if(u1(Se,E)&&u.ref===d.ref&&d.type===u.type)if(Zc=!1,d.pendingProps=E=Se,_j(u,D))(u.flags&wh)!==_n&&(Zc=!0);else return d.lanes=u.lanes,Uh(u,d,D)}return vj(u,d,g,E,D)}function b8(u,d,g){var E=d.pendingProps,D=E.children,$=u!==null?u.memoizedState:null;if(E.mode==="hidden"||G)if((d.mode&sr)===bn){var K={baseLanes:bt,cachePool:null,transitions:null};d.memoizedState=K,aT(d,g)}else if(aa(g,Es)){var Ve={baseLanes:bt,cachePool:null,transitions:null};d.memoizedState=Ve;var Me=$!==null?$.baseLanes:g;aT(d,Me)}else{var ee=null,se;if($!==null){var be=$.baseLanes;se=rr(be,g)}else se=g;d.lanes=d.childLanes=Es;var Se={baseLanes:se,cachePool:ee,transitions:null};return d.memoizedState=Se,d.updateQueue=null,aT(d,se),null}else{var Je;$!==null?(Je=rr($.baseLanes,g),d.memoizedState=null):Je=g,aT(d,Je)}return Co(u,d,D,g),d.child}function aye(u,d,g){var E=d.pendingProps;return Co(u,d,E,g),d.child}function sye(u,d,g){var E=d.pendingProps.children;return Co(u,d,E,g),d.child}function oye(u,d,g){{d.flags|=mr;{var E=d.stateNode;E.effectDuration=0,E.passiveEffectDuration=0}}var D=d.pendingProps,$=D.children;return Co(u,d,$,g),d.child}function w8(u,d){var g=d.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(d.flags|=Ru,d.flags|=dv)}function vj(u,d,g,E,D){if(d.type!==d.elementType){var $=g.propTypes;$&&Gc($,E,"prop",$n(g))}var K;{var ee=Lb(d,g,!0);K=Fb(d,ee)}var se,be;Gb(d,D),ju(d);{if(U1.current=d,ts(!0),se=Zb(u,d,g,E,K,D),be=Qb(),d.mode&ti){Ei(!0);try{se=Zb(u,d,g,E,K,D),be=Qb()}finally{Ei(!1)}}ts(!1)}return wo(),u!==null&&!Zc?(R6(u,d,D),Uh(u,d,D)):(Cs()&&be&&XO(d),d.flags|=Qo,Co(u,d,se,D),d.child)}function x8(u,d,g,E,D){{switch(N0e(d)){case!1:{var $=d.stateNode,K=d.type,ee=new K(d.memoizedProps,$.context),se=ee.state;$.updater.enqueueSetState($,se,null);break}case!0:{d.flags|=Sr,d.flags|=ja;var be=new Error("Simulated error coming from DevTools"),Se=No(D);d.lanes=rr(d.lanes,Se);var Ve=dj(d,Mv(be,d),Se);y2(d,Ve);break}}if(d.type!==d.elementType){var Me=g.propTypes;Me&&Gc(Me,E,"prop",$n(g))}}var Je;hf(g)?(Je=!0,iC(d)):Je=!1,Gb(d,D);var Xe=d.stateNode,lt;Xe===null?(YC(u,d),c8(d,g,E),lj(d,g,E,D),lt=!0):u===null?lt=qve(d,g,E,D):lt=Xve(u,d,g,E,D);var Yt=yj(u,d,g,lt,Je,D);{var An=d.stateNode;lt&&An.props!==E&&(Vv||s("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",kn(d)||"a component"),Vv=!0)}return Yt}function yj(u,d,g,E,D,$){w8(u,d);var K=(d.flags&Sr)!==_n;if(!E&&!K)return D&&n6(d,g,!1),Uh(u,d,$);var ee=d.stateNode;U1.current=d;var se;if(K&&typeof g.getDerivedStateFromError!="function")se=null,a8();else{ju(d);{if(ts(!0),se=ee.render(),d.mode&ti){Ei(!0);try{ee.render()}finally{Ei(!1)}}ts(!1)}wo()}return d.flags|=Qo,u!==null&&K?iye(u,d,se,$):Co(u,d,se,$),d.memoizedState=ee.state,D&&n6(d,g,!0),d.child}function S8(u){var d=u.stateNode;d.pendingContext?e6(u,d.pendingContext,d.pendingContext!==d.context):d.context&&e6(u,d.context,!1),b2(u,d.containerInfo)}function lye(u,d,g){if(S8(d),u===null)throw new Error("Should have a current fiber. This is a bug in React.");var E=d.pendingProps,D=d.memoizedState,$=D.element;_6(u,d),xC(d,E,null,g);var K=d.memoizedState;d.stateNode;var ee=K.element;if(D.isDehydrated){var se={element:ee,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},be=d.updateQueue;if(be.baseState=se,d.memoizedState=se,d.flags&tl){var Se=Mv(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),d);return E8(u,d,ee,g,Se)}else if(ee!==$){var Ve=Mv(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),d);return E8(u,d,ee,g,Ve)}else{dve(d);var Me=y6(d,null,ee,g);d.child=Me;for(var Je=Me;Je;)Je.flags=Je.flags&~yi|Ul,Je=Je.sibling}}else{if(Wb(),ee===$)return Uh(u,d,g);Co(u,d,ee,g)}return d.child}function E8(u,d,g,E,D){return Wb(),r2(D),d.flags|=tl,Co(u,d,g,E),d.child}function uye(u,d,g){k6(d),u===null&&n2(d);var E=d.type,D=d.pendingProps,$=u!==null?u.memoizedProps:null,K=D.children,ee=VO(E,D);return ee?K=null:$!==null&&VO(E,$)&&(d.flags|=Au),w8(u,d),Co(u,d,K,g),d.child}function cye(u,d){return u===null&&n2(d),null}function dye(u,d,g,E){YC(u,d);var D=d.pendingProps,$=g,K=$._payload,ee=$._init,se=ee(K);d.type=se;var be=d.tag=c0e(se),Se=Xc(se,D),Ve;switch(be){case l:return bj(d,se),d.type=se=o0(se),Ve=vj(null,d,se,Se,E),Ve;case c:return d.type=se=Jj(se),Ve=x8(null,d,se,Se,E),Ve;case N:return d.type=se=qj(se),Ve=g8(null,d,se,Se,E),Ve;case O:{if(d.type!==d.elementType){var Me=se.propTypes;Me&&Gc(Me,Se,"prop",$n(se))}return Ve=v8(null,d,se,Xc(se.type,Se),E),Ve}}var Je="";throw se!==null&&typeof se=="object"&&se.$$typeof===We&&(Je=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+se+". "+("Lazy element type must resolve to a class or function."+Je))}function fye(u,d,g,E,D){YC(u,d),d.tag=c;var $;return hf(g)?($=!0,iC(d)):$=!1,Gb(d,D),c8(d,g,E),lj(d,g,E,D),yj(null,d,g,!0,$,D)}function hye(u,d,g,E){YC(u,d);var D=d.pendingProps,$;{var K=Lb(d,g,!1);$=Fb(d,K)}Gb(d,E);var ee,se;ju(d);{if(g.prototype&&typeof g.prototype.render=="function"){var be=$n(g)||"Unknown";fj[be]||(s("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",be,be),fj[be]=!0)}d.mode&ti&&Yc.recordLegacyContextWarning(d,null),ts(!0),U1.current=d,ee=Zb(null,d,g,D,$,E),se=Qb(),ts(!1)}if(wo(),d.flags|=Qo,typeof ee=="object"&&ee!==null&&typeof ee.render=="function"&&ee.$$typeof===void 0){var Se=$n(g)||"Unknown";W1[Se]||(s("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Se,Se,Se),W1[Se]=!0)}if(typeof ee=="object"&&ee!==null&&typeof ee.render=="function"&&ee.$$typeof===void 0){{var Ve=$n(g)||"Unknown";W1[Ve]||(s("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Ve,Ve,Ve),W1[Ve]=!0)}d.tag=c,d.memoizedState=null,d.updateQueue=null;var Me=!1;return hf(g)?(Me=!0,iC(d)):Me=!1,d.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,v2(d),u8(d,ee),lj(d,g,D,E),yj(null,d,g,!0,Me,E)}else{if(d.tag=l,d.mode&ti){Ei(!0);try{ee=Zb(null,d,g,D,$,E),se=Qb()}finally{Ei(!1)}}return Cs()&&se&&XO(d),Co(null,d,ee,E),bj(d,g),d.child}}function bj(u,d){{if(d&&d.childContextTypes&&s("%s(...): childContextTypes cannot be defined on a function component.",d.displayName||d.name||"Component"),u.ref!==null){var g="",E=Ks();E&&(g+=`

Check the render method of \``+E+"`.");var D=E||"",$=u._debugSource;$&&(D=$.fileName+":"+$.lineNumber),pj[D]||(pj[D]=!0,s("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",g))}if(d.defaultProps!==void 0){var K=$n(d)||"Unknown";z1[K]||(s("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",K),z1[K]=!0)}if(typeof d.getDerivedStateFromProps=="function"){var ee=$n(d)||"Unknown";mj[ee]||(s("%s: Function components do not support getDerivedStateFromProps.",ee),mj[ee]=!0)}if(typeof d.contextType=="object"&&d.contextType!==null){var se=$n(d)||"Unknown";hj[se]||(s("%s: Function components do not support contextType.",se),hj[se]=!0)}}}var wj={dehydrated:null,treeContext:null,retryLane:Ni};function xj(u){return{baseLanes:u,cachePool:rye(),transitions:null}}function mye(u,d){var g=null;return{baseLanes:rr(u.baseLanes,d),cachePool:g,transitions:u.transitions}}function pye(u,d,g,E){if(d!==null){var D=d.memoizedState;if(D===null)return!1}return S2(u,O1)}function gye(u,d){return T_(u.childLanes,d)}function N8(u,d,g){var E=d.pendingProps;_0e(d)&&(d.flags|=Sr);var D=Jc.current,$=!1,K=(d.flags&Sr)!==_n;if(K||pye(D,u)?($=!0,d.flags&=~Sr):(u===null||u.memoizedState!==null)&&(D=jve(D,A6)),D=Yb(D),Cp(d,D),u===null){n2(d);var ee=d.memoizedState;if(ee!==null){var se=ee.dehydrated;if(se!==null)return xye(d,se)}var be=E.children,Se=E.fallback;if($){var Ve=vye(d,be,Se,g),Me=d.child;return Me.memoizedState=xj(g),d.memoizedState=wj,Ve}else return Sj(d,be)}else{var Je=u.memoizedState;if(Je!==null){var Xe=Je.dehydrated;if(Xe!==null)return Sye(u,d,K,E,Xe,Je,g)}if($){var lt=E.fallback,Yt=E.children,An=bye(u,d,Yt,lt,g),En=d.child,kr=u.child.memoizedState;return En.memoizedState=kr===null?xj(g):mye(kr,g),En.childLanes=gye(u,g),d.memoizedState=wj,An}else{var wr=E.children,Ge=yye(u,d,wr,g);return d.memoizedState=null,Ge}}}function Sj(u,d,g){var E=u.mode,D={mode:"visible",children:d},$=Ej(D,E);return $.return=u,u.child=$,$}function vye(u,d,g,E){var D=u.mode,$=u.child,K={mode:"hidden",children:d},ee,se;return(D&sr)===bn&&$!==null?(ee=$,ee.childLanes=bt,ee.pendingProps=K,u.mode&Er&&(ee.actualDuration=0,ee.actualStartTime=-1,ee.selfBaseDuration=0,ee.treeBaseDuration=0),se=jp(g,D,E,null)):(ee=Ej(K,D),se=jp(g,D,E,null)),ee.return=u,se.return=u,ee.sibling=se,u.child=ee,se}function Ej(u,d,g){return _9(u,d,bt,null)}function _8(u,d){return Uv(u,d)}function yye(u,d,g,E){var D=u.child,$=D.sibling,K=_8(D,{mode:"visible",children:g});if((d.mode&sr)===bn&&(K.lanes=E),K.return=d,K.sibling=null,$!==null){var ee=d.deletions;ee===null?(d.deletions=[$],d.flags|=el):ee.push($)}return d.child=K,K}function bye(u,d,g,E,D){var $=d.mode,K=u.child,ee=K.sibling,se={mode:"hidden",children:g},be;if(($&sr)===bn&&d.child!==K){var Se=d.child;be=Se,be.childLanes=bt,be.pendingProps=se,d.mode&Er&&(be.actualDuration=0,be.actualStartTime=-1,be.selfBaseDuration=K.selfBaseDuration,be.treeBaseDuration=K.treeBaseDuration),d.deletions=null}else be=_8(K,se),be.subtreeFlags=K.subtreeFlags&Ia;var Ve;return ee!==null?Ve=Uv(ee,E):(Ve=jp(E,$,D,null),Ve.flags|=yi),Ve.return=d,be.return=d,be.sibling=Ve,d.child=be,Ve}function KC(u,d,g,E){E!==null&&r2(E),zb(d,u.child,null,g);var D=d.pendingProps,$=D.children,K=Sj(d,$);return K.flags|=yi,d.memoizedState=null,K}function wye(u,d,g,E,D){var $=d.mode,K={mode:"visible",children:g},ee=Ej(K,$),se=jp(E,$,D,null);return se.flags|=yi,ee.return=d,se.return=d,ee.sibling=se,d.child=ee,(d.mode&sr)!==bn&&zb(d,u.child,null,D),se}function xye(u,d,g){return(u.mode&sr)===bn?(s("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),u.lanes=Ln):BO(d)?u.lanes=Mu:u.lanes=Es,null}function Sye(u,d,g,E,D,$,K){if(g)if(d.flags&tl){d.flags&=~tl;var Ge=uj(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return KC(u,d,K,Ge)}else{if(d.memoizedState!==null)return d.child=u.child,d.flags|=Sr,null;var ut=E.children,Ke=E.fallback,Ct=wye(u,d,ut,Ke,K),Qt=d.child;return Qt.memoizedState=xj(K),d.memoizedState=wj,Ct}else{if(uve(),(d.mode&sr)===bn)return KC(u,d,K,null);if(BO(D)){var ee,se,be;{var Se=Cge(D);ee=Se.digest,se=Se.message,be=Se.stack}var Ve;se?Ve=new Error(se):Ve=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var Me=uj(Ve,ee,be);return KC(u,d,K,Me)}var Je=aa(K,u.childLanes);if(Zc||Je){var Xe=iT();if(Xe!==null){var lt=Rhe(Xe,K);if(lt!==Ni&&lt!==$.retryLane){$.retryLane=lt;var Yt=Jr;ll(u,lt),za(Xe,u,lt,Yt)}}zj();var An=uj(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return KC(u,d,K,An)}else if(YU(D)){d.flags|=Sr,d.child=u.child;var En=Kbe.bind(null,u);return Tge(D,En),null}else{fve(d,D,$.treeContext);var kr=E.children,wr=Sj(d,kr);return wr.flags|=Ul,wr}}}function C8(u,d,g){u.lanes=rr(u.lanes,d);var E=u.alternate;E!==null&&(E.lanes=rr(E.lanes,d)),h2(u.return,d,g)}function Eye(u,d,g){for(var E=d;E!==null;){if(E.tag===P){var D=E.memoizedState;D!==null&&C8(E,g,u)}else if(E.tag===W)C8(E,g,u);else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===u)return;for(;E.sibling===null;){if(E.return===null||E.return===u)return;E=E.return}E.sibling.return=E.return,E=E.sibling}}function Nye(u){for(var d=u,g=null;d!==null;){var E=d.alternate;E!==null&&_C(E)===null&&(g=d),d=d.sibling}return g}function _ye(u){if(u!==void 0&&u!=="forwards"&&u!=="backwards"&&u!=="together"&&!gj[u])if(gj[u]=!0,typeof u=="string")switch(u.toLowerCase()){case"together":case"forwards":case"backwards":{s('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',u,u.toLowerCase());break}case"forward":case"backward":{s('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',u,u.toLowerCase());break}default:s('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',u);break}else s('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',u)}function Cye(u,d){u!==void 0&&!GC[u]&&(u!=="collapsed"&&u!=="hidden"?(GC[u]=!0,s('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',u)):d!=="forwards"&&d!=="backwards"&&(GC[u]=!0,s('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',u)))}function T8(u,d){{var g=un(u),E=!g&&typeof Dn(u)=="function";if(g||E){var D=g?"array":"iterable";return s("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",D,d,D),!1}}return!0}function Tye(u,d){if((d==="forwards"||d==="backwards")&&u!==void 0&&u!==null&&u!==!1)if(un(u)){for(var g=0;g<u.length;g++)if(!T8(u[g],g))return}else{var E=Dn(u);if(typeof E=="function"){var D=E.call(u);if(D)for(var $=D.next(),K=0;!$.done;$=D.next()){if(!T8($.value,K))return;K++}}else s('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',d)}}function Nj(u,d,g,E,D){var $=u.memoizedState;$===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:g,tailMode:D}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=E,$.tail=g,$.tailMode=D)}function D8(u,d,g){var E=d.pendingProps,D=E.revealOrder,$=E.tail,K=E.children;_ye(D),Cye($,D),Tye(K,D),Co(u,d,K,g);var ee=Jc.current,se=S2(ee,O1);if(se)ee=E2(ee,O1),d.flags|=Sr;else{var be=u!==null&&(u.flags&Sr)!==_n;be&&Eye(d,d.child,g),ee=Yb(ee)}if(Cp(d,ee),(d.mode&sr)===bn)d.memoizedState=null;else switch(D){case"forwards":{var Se=Nye(d.child),Ve;Se===null?(Ve=d.child,d.child=null):(Ve=Se.sibling,Se.sibling=null),Nj(d,!1,Ve,Se,$);break}case"backwards":{var Me=null,Je=d.child;for(d.child=null;Je!==null;){var Xe=Je.alternate;if(Xe!==null&&_C(Xe)===null){d.child=Je;break}var lt=Je.sibling;Je.sibling=Me,Me=Je,Je=lt}Nj(d,!0,Me,null,$);break}case"together":{Nj(d,!1,null,null,void 0);break}default:d.memoizedState=null}return d.child}function Dye(u,d,g){b2(d,d.stateNode.containerInfo);var E=d.pendingProps;return u===null?d.child=zb(d,null,E,g):Co(u,d,E,g),d.child}var k8=!1;function kye(u,d,g){var E=d.type,D=E._context,$=d.pendingProps,K=d.memoizedProps,ee=$.value;{"value"in $||k8||(k8=!0,s("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var se=d.type.propTypes;se&&Gc(se,$,"prop","Context.Provider")}if(x6(d,D,ee),K!==null){var be=K.value;if(Yl(be,ee)){if(K.children===$.children&&!nC())return Uh(u,d,g)}else _ve(d,D,g)}var Se=$.children;return Co(u,d,Se,g),d.child}var P8=!1;function Pye(u,d,g){var E=d.type;E._context===void 0?E!==E.Consumer&&(P8||(P8=!0,s("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):E=E._context;var D=d.pendingProps,$=D.children;typeof $!="function"&&s("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Gb(d,g);var K=Na(E);ju(d);var ee;return U1.current=d,ts(!0),ee=$(K),ts(!1),wo(),d.flags|=Qo,Co(u,d,ee,g),d.child}function H1(){Zc=!0}function YC(u,d){(d.mode&sr)===bn&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=yi)}function Uh(u,d,g){return u!==null&&(d.dependencies=u.dependencies),a8(),rS(d.lanes),aa(g,d.childLanes)?(Eve(u,d),d.child):null}function Aye(u,d,g){{var E=d.return;if(E===null)throw new Error("Cannot swap the root fiber.");if(u.alternate=null,d.alternate=null,g.index=d.index,g.sibling=d.sibling,g.return=d.return,g.ref=d.ref,d===E.child)E.child=g;else{var D=E.child;if(D===null)throw new Error("Expected parent to have a child.");for(;D.sibling!==d;)if(D=D.sibling,D===null)throw new Error("Expected to find the previous sibling.");D.sibling=g}var $=E.deletions;return $===null?(E.deletions=[u],E.flags|=el):$.push(u),g.flags|=yi,g}}function _j(u,d){var g=u.lanes;return!!aa(g,d)}function Rye(u,d,g){switch(d.tag){case h:S8(d),d.stateNode,Wb();break;case p:k6(d);break;case c:{var E=d.type;hf(E)&&iC(d);break}case m:b2(d,d.stateNode.containerInfo);break;case _:{var D=d.memoizedProps.value,$=d.type._context;x6(d,$,D);break}case k:{var K=aa(g,d.childLanes);K&&(d.flags|=mr);{var ee=d.stateNode;ee.effectDuration=0,ee.passiveEffectDuration=0}}break;case P:{var se=d.memoizedState;if(se!==null){if(se.dehydrated!==null)return Cp(d,Yb(Jc.current)),d.flags|=Sr,null;var be=d.child,Se=be.childLanes;if(aa(g,Se))return N8(u,d,g);Cp(d,Yb(Jc.current));var Ve=Uh(u,d,g);return Ve!==null?Ve.sibling:null}else Cp(d,Yb(Jc.current));break}case W:{var Me=(u.flags&Sr)!==_n,Je=aa(g,d.childLanes);if(Me){if(Je)return D8(u,d,g);d.flags|=Sr}var Xe=d.memoizedState;if(Xe!==null&&(Xe.rendering=null,Xe.tail=null,Xe.lastEffect=null),Cp(d,Jc.current),Je)break;return null}case V:case I:return d.lanes=bt,b8(u,d,g)}return Uh(u,d,g)}function A8(u,d,g){if(d._debugNeedsRemount&&u!==null)return Aye(u,d,tI(d.type,d.key,d.pendingProps,d._debugOwner||null,d.mode,d.lanes));if(u!==null){var E=u.memoizedProps,D=d.pendingProps;if(E!==D||nC()||d.type!==u.type)Zc=!0;else{var $=_j(u,g);if(!$&&(d.flags&Sr)===_n)return Zc=!1,Rye(u,d,g);(u.flags&wh)!==_n?Zc=!0:Zc=!1}}else if(Zc=!1,Cs()&&rve(d)){var K=d.index,ee=ive();a6(d,ee,K)}switch(d.lanes=bt,d.tag){case f:return hye(u,d,d.type,g);case T:{var se=d.elementType;return dye(u,d,se,g)}case l:{var be=d.type,Se=d.pendingProps,Ve=d.elementType===be?Se:Xc(be,Se);return vj(u,d,be,Ve,g)}case c:{var Me=d.type,Je=d.pendingProps,Xe=d.elementType===Me?Je:Xc(Me,Je);return x8(u,d,Me,Xe,g)}case h:return lye(u,d,g);case p:return uye(u,d,g);case v:return cye(u,d);case P:return N8(u,d,g);case m:return Dye(u,d,g);case N:{var lt=d.type,Yt=d.pendingProps,An=d.elementType===lt?Yt:Xc(lt,Yt);return g8(u,d,lt,An,g)}case y:return aye(u,d,g);case x:return sye(u,d,g);case k:return oye(u,d,g);case _:return kye(u,d,g);case S:return Pye(u,d,g);case O:{var En=d.type,kr=d.pendingProps,wr=Xc(En,kr);if(d.type!==d.elementType){var Ge=En.propTypes;Ge&&Gc(Ge,wr,"prop",$n(En))}return wr=Xc(En.type,wr),v8(u,d,En,wr,g)}case A:return y8(u,d,d.type,d.pendingProps,g);case L:{var ut=d.type,Ke=d.pendingProps,Ct=d.elementType===ut?Ke:Xc(ut,Ke);return fye(u,d,ut,Ct,g)}case W:return D8(u,d,g);case Y:break;case V:return b8(u,d,g)}throw new Error("Unknown unit of work tag ("+d.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function e0(u){u.flags|=mr}function R8(u){u.flags|=Ru,u.flags|=dv}var O8,Cj,j8,I8;O8=function(u,d,g,E){for(var D=d.child;D!==null;){if(D.tag===p||D.tag===v)ege(u,D.stateNode);else if(D.tag!==m){if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===d)return;for(;D.sibling===null;){if(D.return===null||D.return===d)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},Cj=function(u,d){},j8=function(u,d,g,E,D){var $=u.memoizedProps;if($!==E){var K=d.stateNode,ee=w2(),se=nge(K,g,$,E,D,ee);d.updateQueue=se,se&&e0(d)}},I8=function(u,d,g,E){g!==E&&e0(d)};function G1(u,d){if(!Cs())switch(u.tailMode){case"hidden":{for(var g=u.tail,E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?u.tail=null:E.sibling=null;break}case"collapsed":{for(var D=u.tail,$=null;D!==null;)D.alternate!==null&&($=D),D=D.sibling;$===null?!d&&u.tail!==null?u.tail.sibling=null:u.tail=null:$.sibling=null;break}}}function Ds(u){var d=u.alternate!==null&&u.alternate.child===u.child,g=bt,E=_n;if(d){if((u.mode&Er)!==bn){for(var se=u.selfBaseDuration,be=u.child;be!==null;)g=rr(g,rr(be.lanes,be.childLanes)),E|=be.subtreeFlags&Ia,E|=be.flags&Ia,se+=be.treeBaseDuration,be=be.sibling;u.treeBaseDuration=se}else for(var Se=u.child;Se!==null;)g=rr(g,rr(Se.lanes,Se.childLanes)),E|=Se.subtreeFlags&Ia,E|=Se.flags&Ia,Se.return=u,Se=Se.sibling;u.subtreeFlags|=E}else{if((u.mode&Er)!==bn){for(var D=u.actualDuration,$=u.selfBaseDuration,K=u.child;K!==null;)g=rr(g,rr(K.lanes,K.childLanes)),E|=K.subtreeFlags,E|=K.flags,D+=K.actualDuration,$+=K.treeBaseDuration,K=K.sibling;u.actualDuration=D,u.treeBaseDuration=$}else for(var ee=u.child;ee!==null;)g=rr(g,rr(ee.lanes,ee.childLanes)),E|=ee.subtreeFlags,E|=ee.flags,ee.return=u,ee=ee.sibling;u.subtreeFlags|=E}return u.childLanes=g,d}function Oye(u,d,g){if(vve()&&(d.mode&sr)!==bn&&(d.flags&Sr)===_n)return f6(d),Wb(),d.flags|=tl|Jm|ja,!1;var E=uC(d);if(g!==null&&g.dehydrated!==null)if(u===null){if(!E)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(pve(d),Ds(d),(d.mode&Er)!==bn){var D=g!==null;if(D){var $=d.child;$!==null&&(d.treeBaseDuration-=$.treeBaseDuration)}}return!1}else{if(Wb(),(d.flags&Sr)===_n&&(d.memoizedState=null),d.flags|=mr,Ds(d),(d.mode&Er)!==bn){var K=g!==null;if(K){var ee=d.child;ee!==null&&(d.treeBaseDuration-=ee.treeBaseDuration)}}return!1}else return h6(),!0}function M8(u,d,g){var E=d.pendingProps;switch(ZO(d),d.tag){case f:case T:case A:case l:case N:case y:case x:case k:case S:case O:return Ds(d),null;case c:{var D=d.type;return hf(D)&&rC(d),Ds(d),null}case h:{var $=d.stateNode;if(Kb(d),YO(d),_2(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),u===null||u.child===null){var K=uC(d);if(K)e0(d);else if(u!==null){var ee=u.memoizedState;(!ee.isDehydrated||(d.flags&tl)!==_n)&&(d.flags|=ef,h6())}}return Cj(u,d),Ds(d),null}case p:{x2(d);var se=D6(),be=d.type;if(u!==null&&d.stateNode!=null)j8(u,d,be,E,se),u.ref!==d.ref&&R8(d);else{if(!E){if(d.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return Ds(d),null}var Se=w2(),Ve=uC(d);if(Ve)hve(d,se,Se)&&e0(d);else{var Me=Qpe(be,E,se,Se,d);O8(Me,d,!1,!1),d.stateNode=Me,tge(Me,be,E,se)&&e0(d)}d.ref!==null&&R8(d)}return Ds(d),null}case v:{var Je=E;if(u&&d.stateNode!=null){var Xe=u.memoizedProps;I8(u,d,Xe,Je)}else{if(typeof Je!="string"&&d.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var lt=D6(),Yt=w2(),An=uC(d);An?mve(d)&&e0(d):d.stateNode=rge(Je,lt,Yt,d)}return Ds(d),null}case P:{Jb(d);var En=d.memoizedState;if(u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){var kr=Oye(u,d,En);if(!kr)return d.flags&ja?d:null}if((d.flags&Sr)!==_n)return d.lanes=g,(d.mode&Er)!==bn&&q2(d),d;var wr=En!==null,Ge=u!==null&&u.memoizedState!==null;if(wr!==Ge&&wr){var ut=d.child;if(ut.flags|=Mc,(d.mode&sr)!==bn){var Ke=u===null&&(d.memoizedProps.unstable_avoidThisFallback!==!0||!0);Ke||S2(Jc.current,A6)?jbe():zj()}}var Ct=d.updateQueue;if(Ct!==null&&(d.flags|=mr),Ds(d),(d.mode&Er)!==bn&&wr){var Qt=d.child;Qt!==null&&(d.treeBaseDuration-=Qt.treeBaseDuration)}return null}case m:return Kb(d),Cj(u,d),u===null&&qge(d.stateNode.containerInfo),Ds(d),null;case _:var Jt=d.type._context;return f2(Jt,d),Ds(d),null;case L:{var zn=d.type;return hf(zn)&&rC(d),Ds(d),null}case W:{Jb(d);var Xn=d.memoizedState;if(Xn===null)return Ds(d),null;var ri=(d.flags&Sr)!==_n,Br=Xn.rendering;if(Br===null)if(ri)G1(Xn,!1);else{var ha=Mbe()&&(u===null||(u.flags&Sr)===_n);if(!ha)for(var Ur=d.child;Ur!==null;){var sa=_C(Ur);if(sa!==null){ri=!0,d.flags|=Sr,G1(Xn,!1);var Qs=sa.updateQueue;return Qs!==null&&(d.updateQueue=Qs,d.flags|=mr),d.subtreeFlags=_n,Nve(d,g),Cp(d,E2(Jc.current,O1)),d.child}Ur=Ur.sibling}Xn.tail!==null&&$i()>r9()&&(d.flags|=Sr,ri=!0,G1(Xn,!1),d.lanes=uf)}else{if(!ri){var Os=_C(Br);if(Os!==null){d.flags|=Sr,ri=!0;var Xl=Os.updateQueue;if(Xl!==null&&(d.updateQueue=Xl,d.flags|=mr),G1(Xn,!0),Xn.tail===null&&Xn.tailMode==="hidden"&&!Br.alternate&&!Cs())return Ds(d),null}else $i()*2-Xn.renderingStartTime>r9()&&g!==Es&&(d.flags|=Sr,ri=!0,G1(Xn,!1),d.lanes=uf)}if(Xn.isBackwards)Br.sibling=d.child,d.child=Br;else{var ko=Xn.last;ko!==null?ko.sibling=Br:d.child=Br,Xn.last=Br}}if(Xn.tail!==null){var Po=Xn.tail;Xn.rendering=Po,Xn.tail=Po.sibling,Xn.renderingStartTime=$i(),Po.sibling=null;var eo=Jc.current;return ri?eo=E2(eo,O1):eo=Yb(eo),Cp(d,eo),Po}return Ds(d),null}case Y:break;case V:case I:{Wj(d);var Kh=d.memoizedState,l0=Kh!==null;if(u!==null){var lS=u.memoizedState,xf=lS!==null;xf!==l0&&!G&&(d.flags|=Mc)}return!l0||(d.mode&sr)===bn?Ds(d):aa(wf,Es)&&(Ds(d),d.subtreeFlags&(yi|mr)&&(d.flags|=Mc)),null}case H:return null;case q:return null}throw new Error("Unknown unit of work tag ("+d.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function jye(u,d,g){switch(ZO(d),d.tag){case c:{var E=d.type;hf(E)&&rC(d);var D=d.flags;return D&ja?(d.flags=D&~ja|Sr,(d.mode&Er)!==bn&&q2(d),d):null}case h:{d.stateNode,Kb(d),YO(d),_2();var $=d.flags;return($&ja)!==_n&&($&Sr)===_n?(d.flags=$&~ja|Sr,d):null}case p:return x2(d),null;case P:{Jb(d);var K=d.memoizedState;if(K!==null&&K.dehydrated!==null){if(d.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Wb()}var ee=d.flags;return ee&ja?(d.flags=ee&~ja|Sr,(d.mode&Er)!==bn&&q2(d),d):null}case W:return Jb(d),null;case m:return Kb(d),null;case _:var se=d.type._context;return f2(se,d),null;case V:case I:return Wj(d),null;case H:return null;default:return null}}function V8(u,d,g){switch(ZO(d),d.tag){case c:{var E=d.type.childContextTypes;E!=null&&rC(d);break}case h:{d.stateNode,Kb(d),YO(d),_2();break}case p:{x2(d);break}case m:Kb(d);break;case P:Jb(d);break;case W:Jb(d);break;case _:var D=d.type._context;f2(D,d);break;case V:case I:Wj(d);break}}var $8=null;$8=new Set;var JC=!1,ks=!1,Iye=typeof WeakSet=="function"?WeakSet:Set,dn=null,t0=null,n0=null;function Mye(u){Gm(null,function(){throw u}),Zd()}var Vye=function(u,d){if(d.props=u.memoizedProps,d.state=u.memoizedState,u.mode&Er)try{yf(),d.componentWillUnmount()}finally{vf(u)}else d.componentWillUnmount()};function L8(u,d){try{kp($a,u)}catch(g){wi(u,d,g)}}function Tj(u,d,g){try{Vye(u,g)}catch(E){wi(u,d,E)}}function $ye(u,d,g){try{g.componentDidMount()}catch(E){wi(u,d,E)}}function F8(u,d){try{U8(u)}catch(g){wi(u,d,g)}}function r0(u,d){var g=u.ref;if(g!==null)if(typeof g=="function"){var E;try{if(re&&X&&u.mode&Er)try{yf(),E=g(null)}finally{vf(u)}else E=g(null)}catch(D){wi(u,d,D)}typeof E=="function"&&s("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",kn(u))}else g.current=null}function qC(u,d,g){try{g()}catch(E){wi(u,d,E)}}var B8=!1;function Lye(u,d){Xpe(u.containerInfo),dn=d,Fye();var g=B8;return B8=!1,g}function Fye(){for(;dn!==null;){var u=dn,d=u.child;(u.subtreeFlags&tf)!==_n&&d!==null?(d.return=u,dn=d):Bye()}}function Bye(){for(;dn!==null;){var u=dn;Kr(u);try{Uye(u)}catch(g){wi(u,u.return,g)}mi();var d=u.sibling;if(d!==null){d.return=u.return,dn=d;return}dn=u.return}}function Uye(u){var d=u.alternate,g=u.flags;if((g&ef)!==_n){switch(Kr(u),u.tag){case l:case N:case A:break;case c:{if(d!==null){var E=d.memoizedProps,D=d.memoizedState,$=u.stateNode;u.type===u.elementType&&!Vv&&($.props!==u.memoizedProps&&s("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",kn(u)||"instance"),$.state!==u.memoizedState&&s("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",kn(u)||"instance"));var K=$.getSnapshotBeforeUpdate(u.elementType===u.type?E:Xc(u.type,E),D);{var ee=$8;K===void 0&&!ee.has(u.type)&&(ee.add(u.type),s("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",kn(u)))}$.__reactInternalSnapshotBeforeUpdate=K}break}case h:{{var se=u.stateNode;Sge(se.containerInfo)}break}case p:case v:case m:case L:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}mi()}}function Qc(u,d,g){var E=d.updateQueue,D=E!==null?E.lastEffect:null;if(D!==null){var $=D.next,K=$;do{if((K.tag&u)===u){var ee=K.destroy;K.destroy=void 0,ee!==void 0&&((u&Ts)!==ul?Nb(d):(u&$a)!==ul&&_b(d),(u&mf)!==ul&&aS(!0),qC(d,g,ee),(u&mf)!==ul&&aS(!1),(u&Ts)!==ul?Yx():(u&$a)!==ul&&Cb())}K=K.next}while(K!==$)}}function kp(u,d){var g=d.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var D=E.next,$=D;do{if(($.tag&u)===u){(u&Ts)!==ul?mv(d):(u&$a)!==ul&&sf(d);var K=$.create;(u&mf)!==ul&&aS(!0),$.destroy=K(),(u&mf)!==ul&&aS(!1),(u&Ts)!==ul?Lc():(u&$a)!==ul&&of();{var ee=$.destroy;if(ee!==void 0&&typeof ee!="function"){var se=void 0;($.tag&$a)!==_n?se="useLayoutEffect":($.tag&mf)!==_n?se="useInsertionEffect":se="useEffect";var be=void 0;ee===null?be=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof ee.then=="function"?be=`

It looks like you wrote `+se+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+se+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:be=" You returned: "+ee,s("%s must not return anything besides a function, which is used for clean-up.%s",se,be)}}}$=$.next}while($!==D)}}function Wye(u,d){if((d.flags&mr)!==_n)switch(d.tag){case k:{var g=d.stateNode.passiveEffectDuration,E=d.memoizedProps,D=E.id,$=E.onPostCommit,K=r8(),ee=d.alternate===null?"mount":"update";n8()&&(ee="nested-update"),typeof $=="function"&&$(D,ee,g,K);var se=d.return;e:for(;se!==null;){switch(se.tag){case h:var be=se.stateNode;be.passiveEffectDuration+=g;break e;case k:var Se=se.stateNode;Se.passiveEffectDuration+=g;break e}se=se.return}break}}}function zye(u,d,g,E){if((g.flags&da)!==_n)switch(g.tag){case l:case N:case A:{if(!ks)if(g.mode&Er)try{yf(),kp($a|Va,g)}finally{vf(g)}else kp($a|Va,g);break}case c:{var D=g.stateNode;if(g.flags&mr&&!ks)if(d===null)if(g.type===g.elementType&&!Vv&&(D.props!==g.memoizedProps&&s("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",kn(g)||"instance"),D.state!==g.memoizedState&&s("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",kn(g)||"instance")),g.mode&Er)try{yf(),D.componentDidMount()}finally{vf(g)}else D.componentDidMount();else{var $=g.elementType===g.type?d.memoizedProps:Xc(g.type,d.memoizedProps),K=d.memoizedState;if(g.type===g.elementType&&!Vv&&(D.props!==g.memoizedProps&&s("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",kn(g)||"instance"),D.state!==g.memoizedState&&s("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",kn(g)||"instance")),g.mode&Er)try{yf(),D.componentDidUpdate($,K,D.__reactInternalSnapshotBeforeUpdate)}finally{vf(g)}else D.componentDidUpdate($,K,D.__reactInternalSnapshotBeforeUpdate)}var ee=g.updateQueue;ee!==null&&(g.type===g.elementType&&!Vv&&(D.props!==g.memoizedProps&&s("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",kn(g)||"instance"),D.state!==g.memoizedState&&s("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",kn(g)||"instance")),T6(g,ee,D));break}case h:{var se=g.updateQueue;if(se!==null){var be=null;if(g.child!==null)switch(g.child.tag){case p:be=g.child.stateNode;break;case c:be=g.child.stateNode;break}T6(g,se,be)}break}case p:{var Se=g.stateNode;if(d===null&&g.flags&mr){var Ve=g.type,Me=g.memoizedProps;lge(Se,Ve,Me)}break}case v:break;case m:break;case k:{{var Je=g.memoizedProps,Xe=Je.onCommit,lt=Je.onRender,Yt=g.stateNode.effectDuration,An=r8(),En=d===null?"mount":"update";n8()&&(En="nested-update"),typeof lt=="function"&&lt(g.memoizedProps.id,En,g.actualDuration,g.treeBaseDuration,g.actualStartTime,An);{typeof Xe=="function"&&Xe(g.memoizedProps.id,En,Yt,An),Bbe(g);var kr=g.return;e:for(;kr!==null;){switch(kr.tag){case h:var wr=kr.stateNode;wr.effectDuration+=Yt;break e;case k:var Ge=kr.stateNode;Ge.effectDuration+=Yt;break e}kr=kr.return}}}break}case P:{Zye(u,g);break}case W:case L:case Y:case V:case I:case q:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}ks||g.flags&Ru&&U8(g)}function Hye(u){switch(u.tag){case l:case N:case A:{if(u.mode&Er)try{yf(),L8(u,u.return)}finally{vf(u)}else L8(u,u.return);break}case c:{var d=u.stateNode;typeof d.componentDidMount=="function"&&$ye(u,u.return,d),F8(u,u.return);break}case p:{F8(u,u.return);break}}}function Gye(u,d){for(var g=null,E=u;;){if(E.tag===p){if(g===null){g=E;try{var D=E.stateNode;d?yge(D):wge(E.stateNode,E.memoizedProps)}catch(K){wi(u,u.return,K)}}}else if(E.tag===v){if(g===null)try{var $=E.stateNode;d?bge($):xge($,E.memoizedProps)}catch(K){wi(u,u.return,K)}}else if(!((E.tag===V||E.tag===I)&&E.memoizedState!==null&&E!==u)){if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===u)return;for(;E.sibling===null;){if(E.return===null||E.return===u)return;g===E&&(g=null),E=E.return}g===E&&(g=null),E.sibling.return=E.return,E=E.sibling}}function U8(u){var d=u.ref;if(d!==null){var g=u.stateNode,E;switch(u.tag){case p:E=g;break;default:E=g}if(typeof d=="function"){var D;if(u.mode&Er)try{yf(),D=d(E)}finally{vf(u)}else D=d(E);typeof D=="function"&&s("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",kn(u))}else d.hasOwnProperty("current")||s("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",kn(u)),d.current=E}}function Kye(u){var d=u.alternate;d!==null&&(d.return=null),u.return=null}function W8(u){var d=u.alternate;d!==null&&(u.alternate=null,W8(d));{if(u.child=null,u.deletions=null,u.sibling=null,u.tag===p){var g=u.stateNode;g!==null&&Qge(g)}u.stateNode=null,u._debugOwner=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}}function Yye(u){for(var d=u.return;d!==null;){if(z8(d))return d;d=d.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function z8(u){return u.tag===p||u.tag===h||u.tag===m}function H8(u){var d=u;e:for(;;){for(;d.sibling===null;){if(d.return===null||z8(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==p&&d.tag!==v&&d.tag!==B;){if(d.flags&yi||d.child===null||d.tag===m)continue e;d.child.return=d,d=d.child}if(!(d.flags&yi))return d.stateNode}}function Jye(u){var d=Yye(u);switch(d.tag){case p:{var g=d.stateNode;d.flags&Au&&(KU(g),d.flags&=~Au);var E=H8(u);kj(u,E,g);break}case h:case m:{var D=d.stateNode.containerInfo,$=H8(u);Dj(u,$,D);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function Dj(u,d,g){var E=u.tag,D=E===p||E===v;if(D){var $=u.stateNode;d?mge(g,$,d):fge(g,$)}else if(E!==m){var K=u.child;if(K!==null){Dj(K,d,g);for(var ee=K.sibling;ee!==null;)Dj(ee,d,g),ee=ee.sibling}}}function kj(u,d,g){var E=u.tag,D=E===p||E===v;if(D){var $=u.stateNode;d?hge(g,$,d):dge(g,$)}else if(E!==m){var K=u.child;if(K!==null){kj(K,d,g);for(var ee=K.sibling;ee!==null;)kj(ee,d,g),ee=ee.sibling}}}var Ps=null,ed=!1;function qye(u,d,g){{var E=d;e:for(;E!==null;){switch(E.tag){case p:{Ps=E.stateNode,ed=!1;break e}case h:{Ps=E.stateNode.containerInfo,ed=!0;break e}case m:{Ps=E.stateNode.containerInfo,ed=!0;break e}}E=E.return}if(Ps===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");G8(u,d,g),Ps=null,ed=!1}Kye(g)}function Pp(u,d,g){for(var E=g.child;E!==null;)G8(u,d,E),E=E.sibling}function G8(u,d,g){switch(ep(g),g.tag){case p:ks||r0(g,d);case v:{{var E=Ps,D=ed;Ps=null,Pp(u,d,g),Ps=E,ed=D,Ps!==null&&(ed?gge(Ps,g.stateNode):pge(Ps,g.stateNode))}return}case B:{Ps!==null&&(ed?vge(Ps,g.stateNode):FO(Ps,g.stateNode));return}case m:{{var $=Ps,K=ed;Ps=g.stateNode.containerInfo,ed=!0,Pp(u,d,g),Ps=$,ed=K}return}case l:case N:case O:case A:{if(!ks){var ee=g.updateQueue;if(ee!==null){var se=ee.lastEffect;if(se!==null){var be=se.next,Se=be;do{var Ve=Se,Me=Ve.destroy,Je=Ve.tag;Me!==void 0&&((Je&mf)!==ul?qC(g,d,Me):(Je&$a)!==ul&&(_b(g),g.mode&Er?(yf(),qC(g,d,Me),vf(g)):qC(g,d,Me),Cb())),Se=Se.next}while(Se!==be)}}}Pp(u,d,g);return}case c:{if(!ks){r0(g,d);var Xe=g.stateNode;typeof Xe.componentWillUnmount=="function"&&Tj(g,d,Xe)}Pp(u,d,g);return}case Y:{Pp(u,d,g);return}case V:{if(g.mode&sr){var lt=ks;ks=lt||g.memoizedState!==null,Pp(u,d,g),ks=lt}else Pp(u,d,g);break}default:{Pp(u,d,g);return}}}function Xye(u){u.memoizedState}function Zye(u,d){var g=d.memoizedState;if(g===null){var E=d.alternate;if(E!==null){var D=E.memoizedState;if(D!==null){var $=D.dehydrated;$!==null&&Mge($)}}}}function K8(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new Iye),d.forEach(function(E){var D=Ybe.bind(null,u,E);if(!g.has(E)){if(g.add(E),ls)if(t0!==null&&n0!==null)iS(n0,t0);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");E.then(D,D)}})}}function Qye(u,d,g){t0=g,n0=u,Kr(d),Y8(d,u),Kr(d),t0=null,n0=null}function td(u,d,g){var E=d.deletions;if(E!==null)for(var D=0;D<E.length;D++){var $=E[D];try{qye(u,d,$)}catch(se){wi($,d,se)}}var K=Yo();if(d.subtreeFlags&Yr)for(var ee=d.child;ee!==null;)Kr(ee),Y8(ee,u),ee=ee.sibling;Kr(K)}function Y8(u,d,g){var E=u.alternate,D=u.flags;switch(u.tag){case l:case N:case O:case A:{if(td(d,u),bf(u),D&mr){try{Qc(mf|Va,u,u.return),kp(mf|Va,u)}catch(zn){wi(u,u.return,zn)}if(u.mode&Er){try{yf(),Qc($a|Va,u,u.return)}catch(zn){wi(u,u.return,zn)}vf(u)}else try{Qc($a|Va,u,u.return)}catch(zn){wi(u,u.return,zn)}}return}case c:{td(d,u),bf(u),D&Ru&&E!==null&&r0(E,E.return);return}case p:{td(d,u),bf(u),D&Ru&&E!==null&&r0(E,E.return);{if(u.flags&Au){var $=u.stateNode;try{KU($)}catch(zn){wi(u,u.return,zn)}}if(D&mr){var K=u.stateNode;if(K!=null){var ee=u.memoizedProps,se=E!==null?E.memoizedProps:ee,be=u.type,Se=u.updateQueue;if(u.updateQueue=null,Se!==null)try{uge(K,Se,be,se,ee,u)}catch(zn){wi(u,u.return,zn)}}}}return}case v:{if(td(d,u),bf(u),D&mr){if(u.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var Ve=u.stateNode,Me=u.memoizedProps,Je=E!==null?E.memoizedProps:Me;try{cge(Ve,Je,Me)}catch(zn){wi(u,u.return,zn)}}return}case h:{if(td(d,u),bf(u),D&mr&&E!==null){var Xe=E.memoizedState;if(Xe.isDehydrated)try{Ige(d.containerInfo)}catch(zn){wi(u,u.return,zn)}}return}case m:{td(d,u),bf(u);return}case P:{td(d,u),bf(u);var lt=u.child;if(lt.flags&Mc){var Yt=lt.stateNode,An=lt.memoizedState,En=An!==null;if(Yt.isHidden=En,En){var kr=lt.alternate!==null&&lt.alternate.memoizedState!==null;kr||Obe()}}if(D&mr){try{Xye(u)}catch(zn){wi(u,u.return,zn)}K8(u)}return}case V:{var wr=E!==null&&E.memoizedState!==null;if(u.mode&sr){var Ge=ks;ks=Ge||wr,td(d,u),ks=Ge}else td(d,u);if(bf(u),D&Mc){var ut=u.stateNode,Ke=u.memoizedState,Ct=Ke!==null,Qt=u;if(ut.isHidden=Ct,Ct&&!wr&&(Qt.mode&sr)!==bn){dn=Qt;for(var Jt=Qt.child;Jt!==null;)dn=Jt,tbe(Jt),Jt=Jt.sibling}Gye(Qt,Ct)}return}case W:{td(d,u),bf(u),D&mr&&K8(u);return}case Y:return;default:{td(d,u),bf(u);return}}}function bf(u){var d=u.flags;if(d&yi){try{Jye(u)}catch(g){wi(u,u.return,g)}u.flags&=~yi}d&Ul&&(u.flags&=~Ul)}function ebe(u,d,g){t0=g,n0=d,dn=u,J8(u,d,g),t0=null,n0=null}function J8(u,d,g){for(var E=(u.mode&sr)!==bn;dn!==null;){var D=dn,$=D.child;if(D.tag===V&&E){var K=D.memoizedState!==null,ee=K||JC;if(ee){Pj(u,d,g);continue}else{var se=D.alternate,be=se!==null&&se.memoizedState!==null,Se=be||ks,Ve=JC,Me=ks;JC=ee,ks=Se,ks&&!Me&&(dn=D,nbe(D));for(var Je=$;Je!==null;)dn=Je,J8(Je,d,g),Je=Je.sibling;dn=D,JC=Ve,ks=Me,Pj(u,d,g);continue}}(D.subtreeFlags&da)!==_n&&$!==null?($.return=D,dn=$):Pj(u,d,g)}}function Pj(u,d,g){for(;dn!==null;){var E=dn;if((E.flags&da)!==_n){var D=E.alternate;Kr(E);try{zye(d,D,E,g)}catch(K){wi(E,E.return,K)}mi()}if(E===u){dn=null;return}var $=E.sibling;if($!==null){$.return=E.return,dn=$;return}dn=E.return}}function tbe(u){for(;dn!==null;){var d=dn,g=d.child;switch(d.tag){case l:case N:case O:case A:{if(d.mode&Er)try{yf(),Qc($a,d,d.return)}finally{vf(d)}else Qc($a,d,d.return);break}case c:{r0(d,d.return);var E=d.stateNode;typeof E.componentWillUnmount=="function"&&Tj(d,d.return,E);break}case p:{r0(d,d.return);break}case V:{var D=d.memoizedState!==null;if(D){q8(u);continue}break}}g!==null?(g.return=d,dn=g):q8(u)}}function q8(u){for(;dn!==null;){var d=dn;if(d===u){dn=null;return}var g=d.sibling;if(g!==null){g.return=d.return,dn=g;return}dn=d.return}}function nbe(u){for(;dn!==null;){var d=dn,g=d.child;if(d.tag===V){var E=d.memoizedState!==null;if(E){X8(u);continue}}g!==null?(g.return=d,dn=g):X8(u)}}function X8(u){for(;dn!==null;){var d=dn;Kr(d);try{Hye(d)}catch(E){wi(d,d.return,E)}if(mi(),d===u){dn=null;return}var g=d.sibling;if(g!==null){g.return=d.return,dn=g;return}dn=d.return}}function rbe(u,d,g,E){dn=d,ibe(d,u,g,E)}function ibe(u,d,g,E){for(;dn!==null;){var D=dn,$=D.child;(D.subtreeFlags&bo)!==_n&&$!==null?($.return=D,dn=$):abe(u,d,g,E)}}function abe(u,d,g,E){for(;dn!==null;){var D=dn;if((D.flags&Bl)!==_n){Kr(D);try{sbe(d,D,g,E)}catch(K){wi(D,D.return,K)}mi()}if(D===u){dn=null;return}var $=D.sibling;if($!==null){$.return=D.return,dn=$;return}dn=D.return}}function sbe(u,d,g,E){switch(d.tag){case l:case N:case A:{if(d.mode&Er){J2();try{kp(Ts|Va,d)}finally{Y2(d)}}else kp(Ts|Va,d);break}}}function obe(u){dn=u,lbe()}function lbe(){for(;dn!==null;){var u=dn,d=u.child;if((dn.flags&el)!==_n){var g=u.deletions;if(g!==null){for(var E=0;E<g.length;E++){var D=g[E];dn=D,dbe(D,u)}{var $=u.alternate;if($!==null){var K=$.child;if(K!==null){$.child=null;do{var ee=K.sibling;K.sibling=null,K=ee}while(K!==null)}}}dn=u}}(u.subtreeFlags&bo)!==_n&&d!==null?(d.return=u,dn=d):ube()}}function ube(){for(;dn!==null;){var u=dn;(u.flags&Bl)!==_n&&(Kr(u),cbe(u),mi());var d=u.sibling;if(d!==null){d.return=u.return,dn=d;return}dn=u.return}}function cbe(u){switch(u.tag){case l:case N:case A:{u.mode&Er?(J2(),Qc(Ts|Va,u,u.return),Y2(u)):Qc(Ts|Va,u,u.return);break}}}function dbe(u,d){for(;dn!==null;){var g=dn;Kr(g),hbe(g,d),mi();var E=g.child;E!==null?(E.return=g,dn=E):fbe(u)}}function fbe(u){for(;dn!==null;){var d=dn,g=d.sibling,E=d.return;if(W8(d),d===u){dn=null;return}if(g!==null){g.return=E,dn=g;return}dn=E}}function hbe(u,d){switch(u.tag){case l:case N:case A:{u.mode&Er?(J2(),Qc(Ts,u,d),Y2(u)):Qc(Ts,u,d);break}}}function mbe(u){switch(u.tag){case l:case N:case A:{try{kp($a|Va,u)}catch(g){wi(u,u.return,g)}break}case c:{var d=u.stateNode;try{d.componentDidMount()}catch(g){wi(u,u.return,g)}break}}}function pbe(u){switch(u.tag){case l:case N:case A:{try{kp(Ts|Va,u)}catch(d){wi(u,u.return,d)}break}}}function gbe(u){switch(u.tag){case l:case N:case A:{try{Qc($a|Va,u,u.return)}catch(g){wi(u,u.return,g)}break}case c:{var d=u.stateNode;typeof d.componentWillUnmount=="function"&&Tj(u,u.return,d);break}}}function vbe(u){switch(u.tag){case l:case N:case A:try{Qc(Ts|Va,u,u.return)}catch(d){wi(u,u.return,d)}}}if(typeof Symbol=="function"&&Symbol.for){var K1=Symbol.for;K1("selector.component"),K1("selector.has_pseudo_class"),K1("selector.role"),K1("selector.test_id"),K1("selector.text")}var ybe=[];function bbe(){ybe.forEach(function(u){return u()})}var wbe=n.ReactCurrentActQueue;function xbe(u){{var d=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,g=typeof jest<"u";return g&&d!==!1}}function Z8(){{var u=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!u&&wbe.current!==null&&s("The current testing environment is not configured to support act(...)"),u}}var Sbe=Math.ceil,Aj=n.ReactCurrentDispatcher,Rj=n.ReactCurrentOwner,As=n.ReactCurrentBatchConfig,nd=n.ReactCurrentActQueue,Ba=0,Q8=1,Rs=2,Ku=4,Wh=0,Y1=1,$v=2,XC=3,J1=4,e9=5,Oj=6,Dr=Ba,To=null,Yi=null,Ua=bt,wf=bt,jj=wp(bt),Wa=Wh,q1=null,ZC=bt,X1=bt,QC=bt,Z1=null,cl=null,Ij=0,t9=500,n9=1/0,Ebe=500,zh=null;function Q1(){n9=$i()+Ebe}function r9(){return n9}var eT=!1,Mj=null,i0=null,Lv=!1,Ap=null,eS=bt,Vj=[],$j=null,Nbe=50,tS=0,Lj=null,Fj=!1,tT=!1,_be=50,a0=0,nT=null,nS=Jr,rT=bt,i9=!1;function iT(){return To}function Do(){return(Dr&(Rs|Ku))!==Ba?$i():(nS!==Jr||(nS=$i()),nS)}function Rp(u){var d=u.mode;if((d&sr)===bn)return Ln;if((Dr&Rs)!==Ba&&Ua!==bt)return No(Ua);var g=wve()!==bve;if(g){if(As.transition!==null){var E=As.transition;E._updatedFibers||(E._updatedFibers=new Set),E._updatedFibers.add(u)}return rT===Ni&&(rT=Wn()),rT}var D=Hc();if(D!==Ni)return D;var $=ige();return $}function Cbe(u){var d=u.mode;return(d&sr)===bn?Ln:Or()}function za(u,d,g,E){qbe(),i9&&s("useInsertionEffect must not schedule updates."),Fj&&(tT=!0),Jx(u,g,E),(Dr&Rs)!==bt&&u===To?Qbe(d):(ls&&UB(u,d,g),e0e(d),u===To&&((Dr&Rs)===Ba&&(X1=rr(X1,g)),Wa===J1&&Op(u,Ua)),dl(u,E),g===Ln&&Dr===Ba&&(d.mode&sr)===bn&&!nd.isBatchingLegacy&&(Q1(),i6()))}function Tbe(u,d,g){var E=u.current;E.lanes=d,Jx(u,d,g),dl(u,g)}function Dbe(u){return(Dr&Rs)!==Ba}function dl(u,d){var g=u.callbackNode;C(u,d);var E=fp(u,u===To?Ua:bt);if(E===bt){g!==null&&w9(g),u.callbackNode=null,u.callbackPriority=Ni;return}var D=bi(E),$=u.callbackPriority;if($===D&&!(nd.current!==null&&g!==Kj)){g==null&&$!==Ln&&s("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}g!=null&&w9(g);var K;if(D===Ln)u.tag===xp?(nd.isBatchingLegacy!==null&&(nd.didScheduleLegacyUpdate=!0),nve(o9.bind(null,u))):r6(o9.bind(null,u)),nd.current!==null?nd.current.push(Sp):sge(function(){(Dr&(Rs|Ku))===Ba&&Sp()}),K=null;else{var ee;switch(HB(E)){case Gl:ee=Nh;break;case jh:ee=_h;break;case Ih:ee=$c;break;case D_:ee=Zm;break;default:ee=$c;break}K=Yj(ee,a9.bind(null,u))}u.callbackPriority=D,u.callbackNode=K}function a9(u,d){if(Gve(),nS=Jr,rT=bt,(Dr&(Rs|Ku))!==Ba)throw new Error("Should not already be working.");var g=u.callbackNode,E=Gh();if(E&&u.callbackNode!==g)return null;var D=fp(u,u===To?Ua:bt);if(D===bt)return null;var $=!mt(u,D)&&!Et(u,D)&&!d,K=$?$be(u,D):sT(u,D);if(K!==Wh){if(K===$v){var ee=z(u);ee!==bt&&(D=ee,K=Bj(u,ee))}if(K===Y1){var se=q1;throw Fv(u,bt),Op(u,D),dl(u,$i()),se}if(K===Oj)Op(u,D);else{var be=!mt(u,D),Se=u.current.alternate;if(be&&!Pbe(Se)){if(K=sT(u,D),K===$v){var Ve=z(u);Ve!==bt&&(D=Ve,K=Bj(u,Ve))}if(K===Y1){var Me=q1;throw Fv(u,bt),Op(u,D),dl(u,$i()),Me}}u.finishedWork=Se,u.finishedLanes=D,kbe(u,K,D)}}return dl(u,$i()),u.callbackNode===g?a9.bind(null,u):null}function Bj(u,d){var g=Z1;if(k_(u)){var E=Fv(u,d);E.flags|=tl,Jge(u.containerInfo)}var D=sT(u,d);if(D!==$v){var $=cl;cl=g,$!==null&&s9($)}return D}function s9(u){cl===null?cl=u:cl.push.apply(cl,u)}function kbe(u,d,g){switch(d){case Wh:case Y1:throw new Error("Root did not complete. This is a bug in React.");case $v:{Bv(u,cl,zh);break}case XC:{if(Op(u,g),ge(g)&&!x9()){var E=Ij+t9-$i();if(E>10){var D=fp(u,bt);if(D!==bt)break;var $=u.suspendedLanes;if(!df($,g)){Do(),BB(u,$);break}u.timeoutHandle=$O(Bv.bind(null,u,cl,zh),E);break}}Bv(u,cl,zh);break}case J1:{if(Op(u,g),ze(g))break;if(!x9()){var K=M(u,g),ee=K,se=$i()-ee,be=Jbe(se)-se;if(be>10){u.timeoutHandle=$O(Bv.bind(null,u,cl,zh),be);break}}Bv(u,cl,zh);break}case e9:{Bv(u,cl,zh);break}default:throw new Error("Unknown root exit status.")}}function Pbe(u){for(var d=u;;){if(d.flags&yh){var g=d.updateQueue;if(g!==null){var E=g.stores;if(E!==null)for(var D=0;D<E.length;D++){var $=E[D],K=$.getSnapshot,ee=$.value;try{if(!Yl(K(),ee))return!1}catch{return!1}}}}var se=d.child;if(d.subtreeFlags&yh&&se!==null){se.return=d,d=se;continue}if(d===u)return!0;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}return!0}function Op(u,d){d=T_(d,QC),d=T_(d,X1),Phe(u,d)}function o9(u){if(Kve(),(Dr&(Rs|Ku))!==Ba)throw new Error("Should not already be working.");Gh();var d=fp(u,bt);if(!aa(d,Ln))return dl(u,$i()),null;var g=sT(u,d);if(u.tag!==xp&&g===$v){var E=z(u);E!==bt&&(d=E,g=Bj(u,E))}if(g===Y1){var D=q1;throw Fv(u,bt),Op(u,d),dl(u,$i()),D}if(g===Oj)throw new Error("Root did not complete. This is a bug in React.");var $=u.current.alternate;return u.finishedWork=$,u.finishedLanes=d,Bv(u,cl,zh),dl(u,$i()),null}function Abe(u,d){d!==bt&&(uO(u,rr(d,Ln)),dl(u,$i()),(Dr&(Rs|Ku))===Ba&&(Q1(),Sp()))}function Uj(u,d){var g=Dr;Dr|=Q8;try{return u(d)}finally{Dr=g,Dr===Ba&&!nd.isBatchingLegacy&&(Q1(),i6())}}function Rbe(u,d,g,E,D){var $=Hc(),K=As.transition;try{return As.transition=null,us(Gl),u(d,g,E,D)}finally{us($),As.transition=K,Dr===Ba&&Q1()}}function Hh(u){Ap!==null&&Ap.tag===xp&&(Dr&(Rs|Ku))===Ba&&Gh();var d=Dr;Dr|=Q8;var g=As.transition,E=Hc();try{return As.transition=null,us(Gl),u?u():void 0}finally{us(E),As.transition=g,Dr=d,(Dr&(Rs|Ku))===Ba&&Sp()}}function l9(){return(Dr&(Rs|Ku))!==Ba}function aT(u,d){Xs(jj,wf,u),wf=rr(wf,d)}function Wj(u){wf=jj.current,qs(jj,u)}function Fv(u,d){u.finishedWork=null,u.finishedLanes=bt;var g=u.timeoutHandle;if(g!==LO&&(u.timeoutHandle=LO,age(g)),Yi!==null)for(var E=Yi.return;E!==null;){var D=E.alternate;V8(D,E),E=E.return}To=u;var $=Uv(u.current,null);return Yi=$,Ua=wf=d,Wa=Wh,q1=null,ZC=bt,X1=bt,QC=bt,Z1=null,cl=null,Tve(),Yc.discardPendingWarnings(),$}function u9(u,d){do{var g=Yi;try{if(pC(),O6(),mi(),Rj.current=null,g===null||g.return===null){Wa=Y1,q1=d,Yi=null;return}if(re&&g.mode&Er&&zC(g,!0),te)if(wo(),d!==null&&typeof d=="object"&&typeof d.then=="function"){var E=d;rp(g,E,Ua)}else Fc(g,d,Ua);nye(u,g.return,g,d,Ua),h9(g)}catch(D){d=D,Yi===g&&g!==null?(g=g.return,Yi=g):g=Yi;continue}return}while(!0)}function c9(){var u=Aj.current;return Aj.current=LC,u===null?LC:u}function d9(u){Aj.current=u}function Obe(){Ij=$i()}function rS(u){ZC=rr(u,ZC)}function jbe(){Wa===Wh&&(Wa=XC)}function zj(){(Wa===Wh||Wa===XC||Wa===$v)&&(Wa=J1),To!==null&&(le(ZC)||le(X1))&&Op(To,Ua)}function Ibe(u){Wa!==J1&&(Wa=$v),Z1===null?Z1=[u]:Z1.push(u)}function Mbe(){return Wa===Wh}function sT(u,d){var g=Dr;Dr|=Rs;var E=c9();if(To!==u||Ua!==d){if(ls){var D=u.memoizedUpdaters;D.size>0&&(iS(u,Ua),D.clear()),WB(u,d)}zh=zB(),Fv(u,d)}il(d);do try{Vbe();break}catch($){u9(u,$)}while(!0);if(pC(),Dr=g,d9(E),Yi!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return sl(),To=null,Ua=bt,Wa}function Vbe(){for(;Yi!==null;)f9(Yi)}function $be(u,d){var g=Dr;Dr|=Rs;var E=c9();if(To!==u||Ua!==d){if(ls){var D=u.memoizedUpdaters;D.size>0&&(iS(u,Ua),D.clear()),WB(u,d)}zh=zB(),Q1(),Fv(u,d)}il(d);do try{Lbe();break}catch($){u9(u,$)}while(!0);return pC(),d9(E),Dr=g,Yi!==null?(al(),Wh):(sl(),To=null,Ua=bt,Wa)}function Lbe(){for(;Yi!==null&&!Hx();)f9(Yi)}function f9(u){var d=u.alternate;Kr(u);var g;(u.mode&Er)!==bn?(K2(u),g=Hj(d,u,wf),zC(u,!0)):g=Hj(d,u,wf),mi(),u.memoizedProps=u.pendingProps,g===null?h9(u):Yi=g,Rj.current=null}function h9(u){var d=u;do{var g=d.alternate,E=d.return;if((d.flags&Jm)===_n){Kr(d);var D=void 0;if((d.mode&Er)===bn?D=M8(g,d,wf):(K2(d),D=M8(g,d,wf),zC(d,!1)),mi(),D!==null){Yi=D;return}}else{var $=jye(g,d);if($!==null){$.flags&=bh,Yi=$;return}if((d.mode&Er)!==bn){zC(d,!1);for(var K=d.actualDuration,ee=d.child;ee!==null;)K+=ee.actualDuration,ee=ee.sibling;d.actualDuration=K}if(E!==null)E.flags|=Jm,E.subtreeFlags=_n,E.deletions=null;else{Wa=Oj,Yi=null;return}}var se=d.sibling;if(se!==null){Yi=se;return}d=E,Yi=d}while(d!==null);Wa===Wh&&(Wa=e9)}function Bv(u,d,g){var E=Hc(),D=As.transition;try{As.transition=null,us(Gl),Fbe(u,d,g,E)}finally{As.transition=D,us(E)}return null}function Fbe(u,d,g,E){do Gh();while(Ap!==null);if(Xbe(),(Dr&(Rs|Ku))!==Ba)throw new Error("Should not already be working.");var D=u.finishedWork,$=u.finishedLanes;if(np($),D===null)return Ch(),null;if($===bt&&s("root.finishedLanes should not be empty during a commit. This is a bug in React."),u.finishedWork=null,u.finishedLanes=bt,D===u.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");u.callbackNode=null,u.callbackPriority=Ni;var K=rr(D.lanes,D.childLanes);Ahe(u,K),u===To&&(To=null,Yi=null,Ua=bt),((D.subtreeFlags&bo)!==_n||(D.flags&bo)!==_n)&&(Lv||(Lv=!0,$j=g,Yj($c,function(){return Gh(),null})));var ee=(D.subtreeFlags&(tf|Yr|da|bo))!==_n,se=(D.flags&(tf|Yr|da|bo))!==_n;if(ee||se){var be=As.transition;As.transition=null;var Se=Hc();us(Gl);var Ve=Dr;Dr|=Ku,Rj.current=null,Lye(u,D),i8(),Qye(u,D,$),Zpe(u.containerInfo),u.current=D,zl($),ebe(D,u,$),pv(),Xm(),Dr=Ve,us(Se),As.transition=be}else u.current=D,i8();var Me=Lv;if(Lv?(Lv=!1,Ap=u,eS=$):(a0=0,nT=null),K=u.pendingLanes,K===bt&&(i0=null),Me||v9(u.current,!1),Eb(D.stateNode,E),ls&&u.memoizedUpdaters.clear(),bbe(),dl(u,$i()),d!==null)for(var Je=u.onRecoverableError,Xe=0;Xe<d.length;Xe++){var lt=d[Xe],Yt=lt.stack,An=lt.digest;Je(lt.value,{componentStack:Yt,digest:An})}if(eT){eT=!1;var En=Mj;throw Mj=null,En}return aa(eS,Ln)&&u.tag!==xp&&Gh(),K=u.pendingLanes,aa(K,Ln)?(Hve(),u===Lj?tS++:(tS=0,Lj=u)):tS=0,Sp(),Ch(),null}function Gh(){if(Ap!==null){var u=HB(eS),d=Ihe(Ih,u),g=As.transition,E=Hc();try{return As.transition=null,us(d),Ube()}finally{us(E),As.transition=g}}return!1}function Bbe(u){Vj.push(u),Lv||(Lv=!0,Yj($c,function(){return Gh(),null}))}function Ube(){if(Ap===null)return!1;var u=$j;$j=null;var d=Ap,g=eS;if(Ap=null,eS=bt,(Dr&(Rs|Ku))!==Ba)throw new Error("Cannot flush passive effects while already rendering.");Fj=!0,tT=!1,Bc(g);var E=Dr;Dr|=Ku,obe(d.current),rbe(d,d.current,g,u);{var D=Vj;Vj=[];for(var $=0;$<D.length;$++){var K=D[$];Wye(d,K)}}Th(),v9(d.current,!0),Dr=E,Sp(),tT?d===nT?a0++:(a0=0,nT=d):a0=0,Fj=!1,tT=!1,Qm(d);{var ee=d.current.stateNode;ee.effectDuration=0,ee.passiveEffectDuration=0}return!0}function m9(u){return i0!==null&&i0.has(u)}function Wbe(u){i0===null?i0=new Set([u]):i0.add(u)}function zbe(u){eT||(eT=!0,Mj=u)}var Hbe=zbe;function p9(u,d,g){var E=Mv(g,d),D=f8(u,E,Ln),$=Np(u,D,Ln),K=Do();$!==null&&(Jx($,Ln,K),dl($,K))}function wi(u,d,g){if(Mye(g),aS(!1),u.tag===h){p9(u,u,g);return}var E=null;for(E=d;E!==null;){if(E.tag===h){p9(E,u,g);return}else if(E.tag===c){var D=E.type,$=E.stateNode;if(typeof D.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&!m9($)){var K=Mv(g,u),ee=dj(E,K,Ln),se=Np(E,ee,Ln),be=Do();se!==null&&(Jx(se,Ln,be),dl(se,be));return}}E=E.return}s(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,g)}function Gbe(u,d,g){var E=u.pingCache;E!==null&&E.delete(d);var D=Do();BB(u,g),t0e(u),To===u&&df(Ua,g)&&(Wa===J1||Wa===XC&&ge(Ua)&&$i()-Ij<t9?Fv(u,bt):QC=rr(QC,g)),dl(u,D)}function g9(u,d){d===Ni&&(d=Cbe(u));var g=Do(),E=ll(u,d);E!==null&&(Jx(E,d,g),dl(E,g))}function Kbe(u){var d=u.memoizedState,g=Ni;d!==null&&(g=d.retryLane),g9(u,g)}function Ybe(u,d){var g=Ni,E;switch(u.tag){case P:E=u.stateNode;var D=u.memoizedState;D!==null&&(g=D.retryLane);break;case W:E=u.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}E!==null&&E.delete(d),g9(u,g)}function Jbe(u){return u<120?120:u<480?480:u<1080?1080:u<1920?1920:u<3e3?3e3:u<4320?4320:Sbe(u/1960)*1960}function qbe(){if(tS>Nbe)throw tS=0,Lj=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");a0>_be&&(a0=0,nT=null,s("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function Xbe(){Yc.flushLegacyContextWarning(),Yc.flushPendingUnsafeLifecycleWarnings()}function v9(u,d){Kr(u),oT(u,Sa,gbe),d&&oT(u,Sh,vbe),oT(u,Sa,mbe),d&&oT(u,Sh,pbe),mi()}function oT(u,d,g){for(var E=u,D=null;E!==null;){var $=E.subtreeFlags&d;E!==D&&E.child!==null&&$!==_n?E=E.child:((E.flags&d)!==_n&&g(E),E.sibling!==null?E=E.sibling:E=D=E.return)}}var lT=null;function y9(u){{if((Dr&Rs)!==Ba||!(u.mode&sr))return;var d=u.tag;if(d!==f&&d!==h&&d!==c&&d!==l&&d!==N&&d!==O&&d!==A)return;var g=kn(u)||"ReactComponent";if(lT!==null){if(lT.has(g))return;lT.add(g)}else lT=new Set([g]);var E=ra;try{Kr(u),s("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{E?Kr(u):mi()}}}var Hj;{var Zbe=null;Hj=function(u,d,g){var E=C9(Zbe,d);try{return A8(u,d,g)}catch($){if(cve()||$!==null&&typeof $=="object"&&typeof $.then=="function")throw $;if(pC(),O6(),V8(u,d),C9(d,E),d.mode&Er&&K2(d),Gm(null,A8,null,u,d,g),cv()){var D=Zd();typeof D=="object"&&D!==null&&D._suppressLogging&&typeof $=="object"&&$!==null&&!$._suppressLogging&&($._suppressLogging=!0)}throw $}}}var b9=!1,Gj;Gj=new Set;function Qbe(u){if(Ko&&!Uve())switch(u.tag){case l:case N:case A:{var d=Yi&&kn(Yi)||"Unknown",g=d;if(!Gj.has(g)){Gj.add(g);var E=kn(u)||"Unknown";s("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",E,d,d)}break}case c:{b9||(s("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),b9=!0);break}}}function iS(u,d){if(ls){var g=u.memoizedUpdaters;g.forEach(function(E){UB(u,E,d)})}}var Kj={};function Yj(u,d){{var g=nd.current;return g!==null?(g.push(d),Kj):nf(u,d)}}function w9(u){if(u!==Kj)return zx(u)}function x9(){return nd.current!==null}function e0e(u){{if(u.mode&sr){if(!Z8())return}else if(!xbe()||Dr!==Ba||u.tag!==l&&u.tag!==N&&u.tag!==A)return;if(nd.current===null){var d=ra;try{Kr(u),s(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,kn(u))}finally{d?Kr(u):mi()}}}}function t0e(u){u.tag!==xp&&Z8()&&nd.current===null&&s(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function aS(u){i9=u}var Yu=null,s0=null,n0e=function(u){Yu=u};function o0(u){{if(Yu===null)return u;var d=Yu(u);return d===void 0?u:d.current}}function Jj(u){return o0(u)}function qj(u){{if(Yu===null)return u;var d=Yu(u);if(d===void 0){if(u!=null&&typeof u.render=="function"){var g=o0(u.render);if(u.render!==g){var E={$$typeof:_e,render:g};return u.displayName!==void 0&&(E.displayName=u.displayName),E}}return u}return d.current}}function S9(u,d){{if(Yu===null)return!1;var g=u.elementType,E=d.type,D=!1,$=typeof E=="object"&&E!==null?E.$$typeof:null;switch(u.tag){case c:{typeof E=="function"&&(D=!0);break}case l:{(typeof E=="function"||$===We)&&(D=!0);break}case N:{($===_e||$===We)&&(D=!0);break}case O:case A:{($===Ze||$===We)&&(D=!0);break}default:return!1}if(D){var K=Yu(g);if(K!==void 0&&K===Yu(E))return!0}return!1}}function E9(u){{if(Yu===null||typeof WeakSet!="function")return;s0===null&&(s0=new WeakSet),s0.add(u)}}var r0e=function(u,d){{if(Yu===null)return;var g=d.staleFamilies,E=d.updatedFamilies;Gh(),Hh(function(){Xj(u.current,E,g)})}},i0e=function(u,d){{if(u.context!==Jl)return;Gh(),Hh(function(){sS(d,u,null,null)})}};function Xj(u,d,g){{var E=u.alternate,D=u.child,$=u.sibling,K=u.tag,ee=u.type,se=null;switch(K){case l:case A:case c:se=ee;break;case N:se=ee.render;break}if(Yu===null)throw new Error("Expected resolveFamily to be set during hot reload.");var be=!1,Se=!1;if(se!==null){var Ve=Yu(se);Ve!==void 0&&(g.has(Ve)?Se=!0:d.has(Ve)&&(K===c?Se=!0:be=!0))}if(s0!==null&&(s0.has(u)||E!==null&&s0.has(E))&&(Se=!0),Se&&(u._debugNeedsRemount=!0),Se||be){var Me=ll(u,Ln);Me!==null&&za(Me,u,Ln,Jr)}D!==null&&!Se&&Xj(D,d,g),$!==null&&Xj($,d,g)}}var a0e=function(u,d){{var g=new Set,E=new Set(d.map(function(D){return D.current}));return Zj(u.current,E,g),g}};function Zj(u,d,g){{var E=u.child,D=u.sibling,$=u.tag,K=u.type,ee=null;switch($){case l:case A:case c:ee=K;break;case N:ee=K.render;break}var se=!1;ee!==null&&d.has(ee)&&(se=!0),se?s0e(u,g):E!==null&&Zj(E,d,g),D!==null&&Zj(D,d,g)}}function s0e(u,d){{var g=o0e(u,d);if(g)return;for(var E=u;;){switch(E.tag){case p:d.add(E.stateNode);return;case m:d.add(E.stateNode.containerInfo);return;case h:d.add(E.stateNode.containerInfo);return}if(E.return===null)throw new Error("Expected to reach root first.");E=E.return}}}function o0e(u,d){for(var g=u,E=!1;;){if(g.tag===p)E=!0,d.add(g.stateNode);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)return E;for(;g.sibling===null;){if(g.return===null||g.return===u)return E;g=g.return}g.sibling.return=g.return,g=g.sibling}return!1}var Qj;{Qj=!1;try{var N9=Object.preventExtensions({})}catch{Qj=!0}}function l0e(u,d,g,E){this.tag=u,this.key=g,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=d,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=E,this.flags=_n,this.subtreeFlags=_n,this.deletions=null,this.lanes=bt,this.childLanes=bt,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!Qj&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var ql=function(u,d,g,E){return new l0e(u,d,g,E)};function eI(u){var d=u.prototype;return!!(d&&d.isReactComponent)}function u0e(u){return typeof u=="function"&&!eI(u)&&u.defaultProps===void 0}function c0e(u){if(typeof u=="function")return eI(u)?c:l;if(u!=null){var d=u.$$typeof;if(d===_e)return N;if(d===Ze)return O}return f}function Uv(u,d){var g=u.alternate;g===null?(g=ql(u.tag,d,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g._debugSource=u._debugSource,g._debugOwner=u._debugOwner,g._debugHookTypes=u._debugHookTypes,g.alternate=u,u.alternate=g):(g.pendingProps=d,g.type=u.type,g.flags=_n,g.subtreeFlags=_n,g.deletions=null,g.actualDuration=0,g.actualStartTime=-1),g.flags=u.flags&Ia,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue;var E=u.dependencies;switch(g.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g.selfBaseDuration=u.selfBaseDuration,g.treeBaseDuration=u.treeBaseDuration,g._debugNeedsRemount=u._debugNeedsRemount,g.tag){case f:case l:case A:g.type=o0(u.type);break;case c:g.type=Jj(u.type);break;case N:g.type=qj(u.type);break}return g}function d0e(u,d){u.flags&=Ia|yi;var g=u.alternate;if(g===null)u.childLanes=bt,u.lanes=d,u.child=null,u.subtreeFlags=_n,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null,u.selfBaseDuration=0,u.treeBaseDuration=0;else{u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=_n,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type;var E=g.dependencies;u.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},u.selfBaseDuration=g.selfBaseDuration,u.treeBaseDuration=g.treeBaseDuration}return u}function f0e(u,d,g){var E;return u===aC?(E=sr,d===!0&&(E|=ti,E|=xo)):E=bn,ls&&(E|=Er),ql(h,null,null,E)}function tI(u,d,g,E,D,$){var K=f,ee=u;if(typeof u=="function")eI(u)?(K=c,ee=Jj(ee)):ee=o0(ee);else if(typeof u=="string")K=p;else e:switch(u){case Zn:return jp(g.children,D,$,d);case ea:K=x,D|=ti,(D&sr)!==bn&&(D|=xo);break;case ue:return h0e(g,D,$,d);case Be:return m0e(g,D,$,d);case Le:return p0e(g,D,$,d);case Pt:return _9(g,D,$,d);case Ut:case wt:case Zt:case sn:case ht:default:{if(typeof u=="object"&&u!==null)switch(u.$$typeof){case xe:K=_;break e;case ne:K=S;break e;case _e:K=N,ee=qj(ee);break e;case Ze:K=O;break e;case We:K=T,ee=null;break e}var se="";{(u===void 0||typeof u=="object"&&u!==null&&Object.keys(u).length===0)&&(se+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var be=E?kn(E):null;be&&(se+=`

Check the render method of \``+be+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(u==null?u:typeof u)+"."+se))}}var Se=ql(K,g,d,D);return Se.elementType=u,Se.type=ee,Se.lanes=$,Se._debugOwner=E,Se}function nI(u,d,g){var E=null;E=u._owner;var D=u.type,$=u.key,K=u.props,ee=tI(D,$,K,E,d,g);return ee._debugSource=u._source,ee._debugOwner=u._owner,ee}function jp(u,d,g,E){var D=ql(y,u,E,d);return D.lanes=g,D}function h0e(u,d,g,E){typeof u.id!="string"&&s('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof u.id);var D=ql(k,u,E,d|Er);return D.elementType=ue,D.lanes=g,D.stateNode={effectDuration:0,passiveEffectDuration:0},D}function m0e(u,d,g,E){var D=ql(P,u,E,d);return D.elementType=Be,D.lanes=g,D}function p0e(u,d,g,E){var D=ql(W,u,E,d);return D.elementType=Le,D.lanes=g,D}function _9(u,d,g,E){var D=ql(V,u,E,d);D.elementType=Pt,D.lanes=g;var $={isHidden:!1};return D.stateNode=$,D}function rI(u,d,g){var E=ql(v,u,null,d);return E.lanes=g,E}function g0e(){var u=ql(p,null,null,bn);return u.elementType="DELETED",u}function v0e(u){var d=ql(B,null,null,bn);return d.stateNode=u,d}function iI(u,d,g){var E=u.children!==null?u.children:[],D=ql(m,E,u.key,d);return D.lanes=g,D.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},D}function C9(u,d){return u===null&&(u=ql(f,null,null,bn)),u.tag=d.tag,u.key=d.key,u.elementType=d.elementType,u.type=d.type,u.stateNode=d.stateNode,u.return=d.return,u.child=d.child,u.sibling=d.sibling,u.index=d.index,u.ref=d.ref,u.pendingProps=d.pendingProps,u.memoizedProps=d.memoizedProps,u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.dependencies=d.dependencies,u.mode=d.mode,u.flags=d.flags,u.subtreeFlags=d.subtreeFlags,u.deletions=d.deletions,u.lanes=d.lanes,u.childLanes=d.childLanes,u.alternate=d.alternate,u.actualDuration=d.actualDuration,u.actualStartTime=d.actualStartTime,u.selfBaseDuration=d.selfBaseDuration,u.treeBaseDuration=d.treeBaseDuration,u._debugSource=d._debugSource,u._debugOwner=d._debugOwner,u._debugNeedsRemount=d._debugNeedsRemount,u._debugHookTypes=d._debugHookTypes,u}function y0e(u,d,g,E,D){this.tag=d,this.containerInfo=u,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=LO,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=Ni,this.eventTimes=lO(bt),this.expirationTimes=lO(Jr),this.pendingLanes=bt,this.suspendedLanes=bt,this.pingedLanes=bt,this.expiredLanes=bt,this.mutableReadLanes=bt,this.finishedLanes=bt,this.entangledLanes=bt,this.entanglements=lO(bt),this.identifierPrefix=E,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var $=this.pendingUpdatersLaneMap=[],K=0;K<ap;K++)$.push(new Set)}switch(d){case aC:this._debugRootType=g?"hydrateRoot()":"createRoot()";break;case xp:this._debugRootType=g?"hydrate()":"render()";break}}function T9(u,d,g,E,D,$,K,ee,se,be){var Se=new y0e(u,d,g,ee,se),Ve=f0e(d,$);Se.current=Ve,Ve.stateNode=Se;{var Me={element:E,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null};Ve.memoizedState=Me}return v2(Ve),Se}var aI="18.3.1";function b0e(u,d,g){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return He(E),{$$typeof:qt,key:E==null?null:""+E,children:u,containerInfo:d,implementation:g}}var sI,oI;sI=!1,oI={};function D9(u){if(!u)return Jl;var d=Fl(u),g=tve(d);if(d.tag===c){var E=d.type;if(hf(E))return t6(d,E,g)}return g}function w0e(u,d){{var g=Fl(u);if(g===void 0){if(typeof u.render=="function")throw new Error("Unable to find node on an unmounted component.");var E=Object.keys(u).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+E)}var D=Wl(g);if(D===null)return null;if(D.mode&ti){var $=kn(g)||"Component";if(!oI[$]){oI[$]=!0;var K=ra;try{Kr(D),g.mode&ti?s("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",d,d,$):s("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",d,d,$)}finally{K?Kr(K):mi()}}}return D.stateNode}}function k9(u,d,g,E,D,$,K,ee){var se=!1,be=null;return T9(u,d,se,be,g,E,D,$,K)}function P9(u,d,g,E,D,$,K,ee,se,be){var Se=!0,Ve=T9(g,E,Se,u,D,$,K,ee,se);Ve.context=D9(null);var Me=Ve.current,Je=Do(),Xe=Rp(Me),lt=Bh(Je,Xe);return lt.callback=d??null,Np(Me,lt,Xe),Tbe(Ve,Xe,Je),Ve}function sS(u,d,g,E){hv(d,u);var D=d.current,$=Do(),K=Rp(D);ip(K);var ee=D9(g);d.context===null?d.context=ee:d.pendingContext=ee,Ko&&ra!==null&&!sI&&(sI=!0,s(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,kn(ra)||"Unknown"));var se=Bh($,K);se.payload={element:u},E=E===void 0?null:E,E!==null&&(typeof E!="function"&&s("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",E),se.callback=E);var be=Np(D,se,K);return be!==null&&(za(be,D,K,$),wC(be,D,K)),K}function uT(u){var d=u.current;if(!d.child)return null;switch(d.child.tag){case p:return d.child.stateNode;default:return d.child.stateNode}}function x0e(u){switch(u.tag){case h:{var d=u.stateNode;if(k_(d)){var g=j(d);Abe(d,g)}break}case P:{Hh(function(){var D=ll(u,Ln);if(D!==null){var $=Do();za(D,u,Ln,$)}});var E=Ln;lI(u,E);break}}}function A9(u,d){var g=u.memoizedState;g!==null&&g.dehydrated!==null&&(g.retryLane=khe(g.retryLane,d))}function lI(u,d){A9(u,d);var g=u.alternate;g&&A9(g,d)}function S0e(u){if(u.tag===P){var d=Lu,g=ll(u,d);if(g!==null){var E=Do();za(g,u,d,E)}lI(u,d)}}function E0e(u){if(u.tag===P){var d=Rp(u),g=ll(u,d);if(g!==null){var E=Do();za(g,u,d,E)}lI(u,d)}}function R9(u){var d=Wx(u);return d===null?null:d.stateNode}var O9=function(u){return null};function N0e(u){return O9(u)}var j9=function(u){return!1};function _0e(u){return j9(u)}var I9=null,M9=null,V9=null,$9=null,L9=null,F9=null,B9=null,U9=null,W9=null;{var z9=function(u,d,g){var E=d[g],D=un(u)?u.slice():gn({},u);return g+1===d.length?(un(D)?D.splice(E,1):delete D[E],D):(D[E]=z9(u[E],d,g+1),D)},H9=function(u,d){return z9(u,d,0)},G9=function(u,d,g,E){var D=d[E],$=un(u)?u.slice():gn({},u);if(E+1===d.length){var K=g[E];$[K]=$[D],un($)?$.splice(D,1):delete $[D]}else $[D]=G9(u[D],d,g,E+1);return $},K9=function(u,d,g){if(d.length!==g.length){a("copyWithRename() expects paths of the same length");return}else for(var E=0;E<g.length-1;E++)if(d[E]!==g[E]){a("copyWithRename() expects paths to be the same except for the deepest key");return}return G9(u,d,g,0)},Y9=function(u,d,g,E){if(g>=d.length)return E;var D=d[g],$=un(u)?u.slice():gn({},u);return $[D]=Y9(u[D],d,g+1,E),$},J9=function(u,d,g){return Y9(u,d,0,g)},uI=function(u,d){for(var g=u.memoizedState;g!==null&&d>0;)g=g.next,d--;return g};I9=function(u,d,g,E){var D=uI(u,d);if(D!==null){var $=J9(D.memoizedState,g,E);D.memoizedState=$,D.baseState=$,u.memoizedProps=gn({},u.memoizedProps);var K=ll(u,Ln);K!==null&&za(K,u,Ln,Jr)}},M9=function(u,d,g){var E=uI(u,d);if(E!==null){var D=H9(E.memoizedState,g);E.memoizedState=D,E.baseState=D,u.memoizedProps=gn({},u.memoizedProps);var $=ll(u,Ln);$!==null&&za($,u,Ln,Jr)}},V9=function(u,d,g,E){var D=uI(u,d);if(D!==null){var $=K9(D.memoizedState,g,E);D.memoizedState=$,D.baseState=$,u.memoizedProps=gn({},u.memoizedProps);var K=ll(u,Ln);K!==null&&za(K,u,Ln,Jr)}},$9=function(u,d,g){u.pendingProps=J9(u.memoizedProps,d,g),u.alternate&&(u.alternate.pendingProps=u.pendingProps);var E=ll(u,Ln);E!==null&&za(E,u,Ln,Jr)},L9=function(u,d){u.pendingProps=H9(u.memoizedProps,d),u.alternate&&(u.alternate.pendingProps=u.pendingProps);var g=ll(u,Ln);g!==null&&za(g,u,Ln,Jr)},F9=function(u,d,g){u.pendingProps=K9(u.memoizedProps,d,g),u.alternate&&(u.alternate.pendingProps=u.pendingProps);var E=ll(u,Ln);E!==null&&za(E,u,Ln,Jr)},B9=function(u){var d=ll(u,Ln);d!==null&&za(d,u,Ln,Jr)},U9=function(u){O9=u},W9=function(u){j9=u}}function C0e(u){var d=Wl(u);return d===null?null:d.stateNode}function T0e(u){return null}function D0e(){return ra}function k0e(u){var d=u.findFiberByHostInstance,g=n.ReactCurrentDispatcher;return Sb({bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:I9,overrideHookStateDeletePath:M9,overrideHookStateRenamePath:V9,overrideProps:$9,overridePropsDeletePath:L9,overridePropsRenamePath:F9,setErrorHandler:U9,setSuspenseHandler:W9,scheduleUpdate:B9,currentDispatcherRef:g,findHostInstanceByFiber:C0e,findFiberByHostInstance:d||T0e,findHostInstancesForRefresh:a0e,scheduleRefresh:r0e,scheduleRoot:i0e,setRefreshHandler:n0e,getCurrentFiber:D0e,reconcilerVersion:aI})}var q9=typeof reportError=="function"?reportError:function(u){console.error(u)};function cI(u){this._internalRoot=u}cT.prototype.render=cI.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?s("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):dT(arguments[1])?s("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&s("You passed a second argument to root.render(...) but it only accepts one argument.");var g=d.containerInfo;if(g.nodeType!==Vi){var E=R9(d.current);E&&E.parentNode!==g&&s("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}sS(u,d,null,null)},cT.prototype.unmount=cI.prototype.unmount=function(){typeof arguments[0]=="function"&&s("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;l9()&&s("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Hh(function(){sS(null,u,null,null)}),qU(d)}};function P0e(u,d){if(!dT(u))throw new Error("createRoot(...): Target container is not a DOM element.");X9(u);var g=!1,E=!1,D="",$=q9;d!=null&&(d.hydrate?a("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof d=="object"&&d!==null&&d.$$typeof===$r&&s(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(D=d.identifierPrefix),d.onRecoverableError!==void 0&&($=d.onRecoverableError),d.transitionCallbacks!==void 0&&d.transitionCallbacks);var K=k9(u,aC,null,g,E,D,$);Z_(K.current,u);var ee=u.nodeType===Vi?u.parentNode:u;return f1(ee),new cI(K)}function cT(u){this._internalRoot=u}function A0e(u){u&&Ghe(u)}cT.prototype.unstable_scheduleHydration=A0e;function R0e(u,d,g){if(!dT(u))throw new Error("hydrateRoot(...): Target container is not a DOM element.");X9(u),d===void 0&&s("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var E=g??null,D=g!=null&&g.hydratedSources||null,$=!1,K=!1,ee="",se=q9;g!=null&&(g.unstable_strictMode===!0&&($=!0),g.identifierPrefix!==void 0&&(ee=g.identifierPrefix),g.onRecoverableError!==void 0&&(se=g.onRecoverableError));var be=P9(d,null,u,aC,E,$,K,ee,se);if(Z_(be.current,u),f1(u),D)for(var Se=0;Se<D.length;Se++){var Ve=D[Se];Mve(be,Ve)}return new cT(be)}function dT(u){return!!(u&&(u.nodeType===is||u.nodeType===$l||u.nodeType===qg))}function oS(u){return!!(u&&(u.nodeType===is||u.nodeType===$l||u.nodeType===qg||u.nodeType===Vi&&u.nodeValue===" react-mount-point-unstable "))}function X9(u){u.nodeType===is&&u.tagName&&u.tagName.toUpperCase()==="BODY"&&s("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),E1(u)&&(u._reactRootContainer?s("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):s("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var O0e=n.ReactCurrentOwner,Z9;Z9=function(u){if(u._reactRootContainer&&u.nodeType!==Vi){var d=R9(u._reactRootContainer.current);d&&d.parentNode!==u&&s("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var g=!!u._reactRootContainer,E=dI(u),D=!!(E&&bp(E));D&&!g&&s("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),u.nodeType===is&&u.tagName&&u.tagName.toUpperCase()==="BODY"&&s("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function dI(u){return u?u.nodeType===$l?u.documentElement:u.firstChild:null}function Q9(){}function j0e(u,d,g,E,D){if(D){if(typeof E=="function"){var $=E;E=function(){var Me=uT(K);$.call(Me)}}var K=P9(d,E,u,xp,null,!1,!1,"",Q9);u._reactRootContainer=K,Z_(K.current,u);var ee=u.nodeType===Vi?u.parentNode:u;return f1(ee),Hh(),K}else{for(var se;se=u.lastChild;)u.removeChild(se);if(typeof E=="function"){var be=E;E=function(){var Me=uT(Se);be.call(Me)}}var Se=k9(u,xp,null,!1,!1,"",Q9);u._reactRootContainer=Se,Z_(Se.current,u);var Ve=u.nodeType===Vi?u.parentNode:u;return f1(Ve),Hh(function(){sS(d,Se,g,E)}),Se}}function I0e(u,d){u!==null&&typeof u!="function"&&s("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",d,u)}function fT(u,d,g,E,D){Z9(g),I0e(D===void 0?null:D,"render");var $=g._reactRootContainer,K;if(!$)K=j0e(g,d,u,D,E);else{if(K=$,typeof D=="function"){var ee=D;D=function(){var se=uT(K);ee.call(se)}}sS(d,K,u,D)}return uT(K)}var e7=!1;function M0e(u){{e7||(e7=!0,s("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var d=O0e.current;if(d!==null&&d.stateNode!==null){var g=d.stateNode._warnedAboutRefsInRender;g||s("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",$n(d.type)||"A component"),d.stateNode._warnedAboutRefsInRender=!0}}return u==null?null:u.nodeType===is?u:w0e(u,"findDOMNode")}function V0e(u,d,g){if(s("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(d))throw new Error("Target container is not a DOM element.");{var E=E1(d)&&d._reactRootContainer===void 0;E&&s("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return fT(null,u,d,!0,g)}function $0e(u,d,g){if(s("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(d))throw new Error("Target container is not a DOM element.");{var E=E1(d)&&d._reactRootContainer===void 0;E&&s("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return fT(null,u,d,!1,g)}function L0e(u,d,g,E){if(s("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(g))throw new Error("Target container is not a DOM element.");if(u==null||!Km(u))throw new Error("parentComponent must be a valid React Component");return fT(u,d,g,!1,E)}var t7=!1;function F0e(u){if(t7||(t7=!0,s("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!oS(u))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var d=E1(u)&&u._reactRootContainer===void 0;d&&s("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(u._reactRootContainer){{var g=dI(u),E=g&&!bp(g);E&&s("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Hh(function(){fT(null,null,u,!1,function(){u._reactRootContainer=null,qU(u)})}),!0}else{{var D=dI(u),$=!!(D&&bp(D)),K=u.nodeType===is&&oS(u.parentNode)&&!!u.parentNode._reactRootContainer;$&&s("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",K?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}Mhe(x0e),$he(S0e),Lhe(E0e),Fhe(Hc),Bhe(Ohe),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&s("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),lv(Upe),Du(Uj,Rbe,Hh);function B0e(u,d){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!dT(d))throw new Error("Target container is not a DOM element.");return b0e(u,d,null,g)}function U0e(u,d,g,E){return L0e(u,d,g,E)}var fI={usingClientEntryPoint:!1,Events:[bp,$b,Q_,dh,fh,Uj]};function W0e(u,d){return fI.usingClientEntryPoint||s('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),P0e(u,d)}function z0e(u,d,g){return fI.usingClientEntryPoint||s('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),R0e(u,d,g)}function H0e(u){return l9()&&s("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Hh(u)}var G0e=k0e({findFiberByHostInstance:Tv,bundleType:1,version:aI,rendererPackageName:"react-dom"});if(!G0e&&Te&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var n7=window.location.protocol;/^(https?|file):$/.test(n7)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(n7==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}eu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fI,eu.createPortal=B0e,eu.createRoot=W0e,eu.findDOMNode=M0e,eu.flushSync=H0e,eu.hydrate=V0e,eu.hydrateRoot=z0e,eu.render=$0e,eu.unmountComponentAtNode=F0e,eu.unstable_batchedUpdates=Uj,eu.unstable_renderSubtreeIntoContainer=U0e,eu.version=aI,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();zZ.exports=eu;var eb=zZ.exports;const _A=gc(eb),twe=BZ({__proto__:null,default:_A},[eb]);var hI=eb;{var hT=hI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;qV.createRoot=function(t,e){hT.usingClientEntryPoint=!0;try{return hI.createRoot(t,e)}finally{hT.usingClientEntryPoint=!1}},qV.hydrateRoot=function(t,e,n){hT.usingClientEntryPoint=!0;try{return hI.hydrateRoot(t,e,n)}finally{hT.usingClientEntryPoint=!1}}}function Zw(t={}){const{strict:e=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=t,i=R.createContext(void 0);i.displayName=r;function a(){var s;const o=R.useContext(i);if(!o&&e){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,a),l}return o}return[i.Provider,a,i]}function nwe(t){return{UNSAFE_getDOMNode(){return t.current}}}function fi(t){const e=R.useRef(null);return R.useImperativeHandle(t,()=>e.current),e}function U5(t){return Array.isArray(t)}function rwe(t){return U5(t)&&t.length===0}function KZ(t){const e=typeof t;return t!=null&&(e==="object"||e==="function")&&!U5(t)}function iwe(t){return KZ(t)&&Object.keys(t).length===0}function awe(t){return U5(t)?rwe(t):KZ(t)?iwe(t):t==null||t===""}function swe(t){return typeof t=="function"}var dt=t=>t?"true":void 0,owe=(...t)=>{let e=" ";for(const n of t)if(typeof n=="string"&&n.length>0){e=n;break}return e};function YZ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=YZ(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function tn(...t){for(var e=0,n,r,i="";e<t.length;)(n=t[e++])&&(r=YZ(n))&&(i&&(i+=" "),i+=r);return i}var lwe={},r7={};function JZ(t,e,...n){var r;const a=`[Next UI] : ${t}`;if(!(typeof console>"u")&&!r7[a]&&(r7[a]=!0,((r=process==null?void 0:lwe)==null?void 0:r.NODE_ENV)!=="production"))return console.warn(a,n)}var uwe=t=>t.charAt(0).toUpperCase()+t.slice(1);function i7(...t){return function(n){t.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}function cwe(t){return`${t}-${Math.floor(Math.random()*1e6)}`}function qZ(t){for(const e in t)e.startsWith("on")&&delete t[e];return t}function gs(t){if(!t||typeof t!="object")return"";try{return JSON.stringify(t)}catch{return""}}function dwe(t,e,n){return Math.min(Math.max(t,e),n)}function fwe(t,e=100){return Math.min(Math.max(t,0),e)}function hwe(t,e){if(t!=null){if(swe(t)){t(e);return}try{t.current=e}catch{throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}}}function Fk(...t){return e=>{t.forEach(n=>hwe(n,e))}}var mwe=Object.create,XZ=Object.defineProperty,pwe=Object.getOwnPropertyDescriptor,ZZ=Object.getOwnPropertyNames,gwe=Object.getPrototypeOf,vwe=Object.prototype.hasOwnProperty,QZ=(t,e)=>function(){return e||(0,t[ZZ(t)[0]])((e={exports:{}}).exports,e),e.exports},ywe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ZZ(e))!vwe.call(t,i)&&i!==n&&XZ(t,i,{get:()=>e[i],enumerable:!(r=pwe(e,i))||r.enumerable});return t},eQ=(t,e,n)=>(n=t!=null?mwe(gwe(t)):{},ywe(!t||!t.__esModule?XZ(n,"default",{value:t,enumerable:!0}):n,t)),bwe=QZ({"../../../node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react.development.js"(t,e){(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var n="18.2.0",r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),x=Symbol.iterator,S="@@iterator";function _(U){if(U===null||typeof U!="object")return null;var ie=x&&U[x]||U[S];return typeof ie=="function"?ie:null}var N={current:null},k={transition:null},P={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},O={current:null},A={},T=null;function L(U){T=U}A.setExtraStackFrame=function(U){T=U},A.getCurrentStack=null,A.getStackAddendum=function(){var U="";T&&(U+=T);var ie=A.getCurrentStack;return ie&&(U+=ie()||""),U};var B=!1,W=!1,Y=!1,V=!1,I=!1,H={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:k,ReactCurrentOwner:O};H.ReactDebugCurrentFrame=A,H.ReactCurrentActQueue=P;function q(U){{for(var ie=arguments.length,we=new Array(ie>1?ie-1:0),De=1;De<ie;De++)we[De-1]=arguments[De];J("warn",U,we)}}function F(U){{for(var ie=arguments.length,we=new Array(ie>1?ie-1:0),De=1;De<ie;De++)we[De-1]=arguments[De];J("error",U,we)}}function J(U,ie,we){{var De=H.ReactDebugCurrentFrame,Ue=De.getStackAddendum();Ue!==""&&(ie+="%s",we=we.concat([Ue]));var xt=we.map(function(st){return String(st)});xt.unshift("Warning: "+ie),Function.prototype.apply.call(console[U],console,xt)}}var Z={};function G(U,ie){{var we=U.constructor,De=we&&(we.displayName||we.name)||"ReactClass",Ue=De+"."+ie;if(Z[Ue])return;F("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",ie,De),Z[Ue]=!0}}var oe={isMounted:function(U){return!1},enqueueForceUpdate:function(U,ie,we){G(U,"forceUpdate")},enqueueReplaceState:function(U,ie,we,De){G(U,"replaceState")},enqueueSetState:function(U,ie,we,De){G(U,"setState")}},ae=Object.assign,te={};Object.freeze(te);function re(U,ie,we){this.props=U,this.context=ie,this.refs=te,this.updater=we||oe}re.prototype.isReactComponent={},re.prototype.setState=function(U,ie){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ie,"setState")},re.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};{var X={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},ce=function(U,ie){Object.defineProperty(re.prototype,U,{get:function(){q("%s(...) is deprecated in plain JavaScript React classes. %s",ie[0],ie[1])}})};for(var he in X)X.hasOwnProperty(he)&&ce(he,X[he])}function ve(){}ve.prototype=re.prototype;function Ne(U,ie,we){this.props=U,this.context=ie,this.refs=te,this.updater=we||oe}var ke=Ne.prototype=new ve;ke.constructor=Ne,ae(ke,re.prototype),ke.isPureReactComponent=!0;function Te(){var U={current:null};return Object.seal(U),U}var ye=Array.isArray;function Ie(U){return ye(U)}function Re(U){{var ie=typeof Symbol=="function"&&Symbol.toStringTag,we=ie&&U[Symbol.toStringTag]||U.constructor.name||"Object";return we}}function Ee(U){try{return $e(U),!1}catch{return!0}}function $e(U){return""+U}function He(U){if(Ee(U))return F("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Re(U)),$e(U)}function gt(U,ie,we){var De=U.displayName;if(De)return De;var Ue=ie.displayName||ie.name||"";return Ue!==""?we+"("+Ue+")":we}function Ye(U){return U.displayName||"Context"}function yt(U){if(U==null)return null;if(typeof U.tag=="number"&&F("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof U=="function")return U.displayName||U.name||null;if(typeof U=="string")return U;switch(U){case a:return"Fragment";case i:return"Portal";case o:return"Profiler";case s:return"StrictMode";case h:return"Suspense";case m:return"SuspenseList"}if(typeof U=="object")switch(U.$$typeof){case c:var ie=U;return Ye(ie)+".Consumer";case l:var we=U;return Ye(we._context)+".Provider";case f:return gt(U,U.render,"ForwardRef");case p:var De=U.displayName||null;return De!==null?De:yt(U.type)||"Memo";case v:{var Ue=U,xt=Ue._payload,st=Ue._init;try{return yt(st(xt))}catch{return null}}}return null}var _t=Object.prototype.hasOwnProperty,St={key:!0,ref:!0,__self:!0,__source:!0},Bt,Nt,Dt;Dt={};function Ae(U){if(_t.call(U,"ref")){var ie=Object.getOwnPropertyDescriptor(U,"ref").get;if(ie&&ie.isReactWarning)return!1}return U.ref!==void 0}function je(U){if(_t.call(U,"key")){var ie=Object.getOwnPropertyDescriptor(U,"key").get;if(ie&&ie.isReactWarning)return!1}return U.key!==void 0}function tt(U,ie){var we=function(){Bt||(Bt=!0,F("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ie))};we.isReactWarning=!0,Object.defineProperty(U,"key",{get:we,configurable:!0})}function Ot(U,ie){var we=function(){Nt||(Nt=!0,F("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ie))};we.isReactWarning=!0,Object.defineProperty(U,"ref",{get:we,configurable:!0})}function qe(U){if(typeof U.ref=="string"&&O.current&&U.__self&&O.current.stateNode!==U.__self){var ie=yt(O.current.type);Dt[ie]||(F('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ie,U.ref),Dt[ie]=!0)}}var ft=function(U,ie,we,De,Ue,xt,st){var Tt={$$typeof:r,type:U,key:ie,ref:we,props:st,_owner:xt};return Tt._store={},Object.defineProperty(Tt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Tt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:De}),Object.defineProperty(Tt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Ue}),Object.freeze&&(Object.freeze(Tt.props),Object.freeze(Tt)),Tt};function Wt(U,ie,we){var De,Ue={},xt=null,st=null,Tt=null,zt=null;if(ie!=null){Ae(ie)&&(st=ie.ref,qe(ie)),je(ie)&&(He(ie.key),xt=""+ie.key),Tt=ie.__self===void 0?null:ie.__self,zt=ie.__source===void 0?null:ie.__source;for(De in ie)_t.call(ie,De)&&!St.hasOwnProperty(De)&&(Ue[De]=ie[De])}var hn=arguments.length-2;if(hn===1)Ue.children=we;else if(hn>1){for(var Vn=Array(hn),Pn=0;Pn<hn;Pn++)Vn[Pn]=arguments[Pn+2];Object.freeze&&Object.freeze(Vn),Ue.children=Vn}if(U&&U.defaultProps){var un=U.defaultProps;for(De in un)Ue[De]===void 0&&(Ue[De]=un[De])}if(xt||st){var Gn=typeof U=="function"?U.displayName||U.name||"Unknown":U;xt&&tt(Ue,Gn),st&&Ot(Ue,Gn)}return ft(U,xt,st,Tt,zt,O.current,Ue)}function an(U,ie){var we=ft(U.type,ie,U.ref,U._self,U._source,U._owner,U.props);return we}function Un(U,ie,we){if(U==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var De,Ue=ae({},U.props),xt=U.key,st=U.ref,Tt=U._self,zt=U._source,hn=U._owner;if(ie!=null){Ae(ie)&&(st=ie.ref,hn=O.current),je(ie)&&(He(ie.key),xt=""+ie.key);var Vn;U.type&&U.type.defaultProps&&(Vn=U.type.defaultProps);for(De in ie)_t.call(ie,De)&&!St.hasOwnProperty(De)&&(ie[De]===void 0&&Vn!==void 0?Ue[De]=Vn[De]:Ue[De]=ie[De])}var Pn=arguments.length-2;if(Pn===1)Ue.children=we;else if(Pn>1){for(var un=Array(Pn),Gn=0;Gn<Pn;Gn++)un[Gn]=arguments[Gn+2];Ue.children=un}return ft(U.type,xt,st,Tt,zt,hn,Ue)}function pn(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}var ln=".",Gt=":";function Kt(U){var ie=/[=:]/g,we={"=":"=0",":":"=2"},De=U.replace(ie,function(Ue){return we[Ue]});return"$"+De}var Lt=!1,In=/\/+/g;function Tn(U){return U.replace(In,"$&/")}function Wr(U,ie){return typeof U=="object"&&U!==null&&U.key!=null?(He(U.key),Kt(""+U.key)):ie.toString(36)}function Mr(U,ie,we,De,Ue){var xt=typeof U;(xt==="undefined"||xt==="boolean")&&(U=null);var st=!1;if(U===null)st=!0;else switch(xt){case"string":case"number":st=!0;break;case"object":switch(U.$$typeof){case r:case i:st=!0}}if(st){var Tt=U,zt=Ue(Tt),hn=De===""?ln+Wr(Tt,0):De;if(Ie(zt)){var Vn="";hn!=null&&(Vn=Tn(hn)+"/"),Mr(zt,ie,Vn,"",function(th){return th})}else zt!=null&&(pn(zt)&&(zt.key&&(!Tt||Tt.key!==zt.key)&&He(zt.key),zt=an(zt,we+(zt.key&&(!Tt||Tt.key!==zt.key)?Tn(""+zt.key)+"/":"")+hn)),ie.push(zt));return 1}var Pn,un,Gn=0,ur=De===""?ln:De+Gt;if(Ie(U))for(var Ys=0;Ys<U.length;Ys++)Pn=U[Ys],un=ur+Wr(Pn,Ys),Gn+=Mr(Pn,ie,we,un,Ue);else{var Il=_(U);if(typeof Il=="function"){var bs=U;Il===bs.entries&&(Lt||q("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Lt=!0);for(var Nc=Il.call(bs),Cu,Bd=0;!(Cu=Nc.next()).done;)Pn=Cu.value,un=ur+Wr(Pn,Bd++),Gn+=Mr(Pn,ie,we,un,Ue)}else if(xt==="object"){var _c=String(U);throw new Error("Objects are not valid as a React child (found: "+(_c==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":_c)+"). If you meant to render a collection of children, use an array instead.")}}return Gn}function Hr(U,ie,we){if(U==null)return U;var De=[],Ue=0;return Mr(U,De,"","",function(xt){return ie.call(we,xt,Ue++)}),De}function Ii(U){var ie=0;return Hr(U,function(){ie++}),ie}function Wi(U,ie,we){Hr(U,function(){ie.apply(this,arguments)},we)}function Mi(U){return Hr(U,function(ie){return ie})||[]}function zi(U){if(!pn(U))throw new Error("React.Children.only expected to receive a single React element child.");return U}function xr(U){var ie={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};ie.Provider={$$typeof:l,_context:ie};var we=!1,De=!1,Ue=!1;{var xt={$$typeof:c,_context:ie};Object.defineProperties(xt,{Provider:{get:function(){return De||(De=!0,F("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),ie.Provider},set:function(st){ie.Provider=st}},_currentValue:{get:function(){return ie._currentValue},set:function(st){ie._currentValue=st}},_currentValue2:{get:function(){return ie._currentValue2},set:function(st){ie._currentValue2=st}},_threadCount:{get:function(){return ie._threadCount},set:function(st){ie._threadCount=st}},Consumer:{get:function(){return we||(we=!0,F("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),ie.Consumer}},displayName:{get:function(){return ie.displayName},set:function(st){Ue||(q("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",st),Ue=!0)}}}),ie.Consumer=xt}return ie._currentRenderer=null,ie._currentRenderer2=null,ie}var Vr=-1,$r=0,qt=1,Zn=2;function ea(U){if(U._status===Vr){var ie=U._result,we=ie();if(we.then(function(xt){if(U._status===$r||U._status===Vr){var st=U;st._status=qt,st._result=xt}},function(xt){if(U._status===$r||U._status===Vr){var st=U;st._status=Zn,st._result=xt}}),U._status===Vr){var De=U;De._status=$r,De._result=we}}if(U._status===qt){var Ue=U._result;return Ue===void 0&&F(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,Ue),"default"in Ue||F(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,Ue),Ue.default}else throw U._result}function ue(U){var ie={_status:Vr,_result:U},we={$$typeof:v,_payload:ie,_init:ea};{var De,Ue;Object.defineProperties(we,{defaultProps:{configurable:!0,get:function(){return De},set:function(xt){F("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),De=xt,Object.defineProperty(we,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return Ue},set:function(xt){F("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Ue=xt,Object.defineProperty(we,"propTypes",{enumerable:!0})}}})}return we}function xe(U){U!=null&&U.$$typeof===p?F("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof U!="function"?F("forwardRef requires a render function but was given %s.",U===null?"null":typeof U):U.length!==0&&U.length!==2&&F("forwardRef render functions accept exactly two parameters: props and ref. %s",U.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),U!=null&&(U.defaultProps!=null||U.propTypes!=null)&&F("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var ie={$$typeof:f,render:U};{var we;Object.defineProperty(ie,"displayName",{enumerable:!1,configurable:!0,get:function(){return we},set:function(De){we=De,!U.name&&!U.displayName&&(U.displayName=De)}})}return ie}var ne;ne=Symbol.for("react.module.reference");function _e(U){return!!(typeof U=="string"||typeof U=="function"||U===a||U===o||I||U===s||U===h||U===m||V||U===y||B||W||Y||typeof U=="object"&&U!==null&&(U.$$typeof===v||U.$$typeof===p||U.$$typeof===l||U.$$typeof===c||U.$$typeof===f||U.$$typeof===ne||U.getModuleId!==void 0))}function Be(U,ie){_e(U)||F("memo: The first argument must be a component. Instead received: %s",U===null?"null":typeof U);var we={$$typeof:p,type:U,compare:ie===void 0?null:ie};{var De;Object.defineProperty(we,"displayName",{enumerable:!1,configurable:!0,get:function(){return De},set:function(Ue){De=Ue,!U.name&&!U.displayName&&(U.displayName=Ue)}})}return we}function Le(){var U=N.current;return U===null&&F(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),U}function Ze(U){var ie=Le();if(U._context!==void 0){var we=U._context;we.Consumer===U?F("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):we.Provider===U&&F("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return ie.useContext(U)}function We(U){var ie=Le();return ie.useState(U)}function wt(U,ie,we){var De=Le();return De.useReducer(U,ie,we)}function ht(U){var ie=Le();return ie.useRef(U)}function Pt(U,ie){var we=Le();return we.useEffect(U,ie)}function Ut(U,ie){var we=Le();return we.useInsertionEffect(U,ie)}function Zt(U,ie){var we=Le();return we.useLayoutEffect(U,ie)}function sn(U,ie){var we=Le();return we.useCallback(U,ie)}function cn(U,ie){var we=Le();return we.useMemo(U,ie)}function hr(U,ie,we){var De=Le();return De.useImperativeHandle(U,ie,we)}function Dn(U,ie){{var we=Le();return we.useDebugValue(U,ie)}}function gn(){var U=Le();return U.useTransition()}function Gr(U){var ie=Le();return ie.useDeferredValue(U)}function xi(){var U=Le();return U.useId()}function ta(U,ie,we){var De=Le();return De.useSyncExternalStore(U,ie,we)}var si=0,oi,la,li,xa,Mn,Cr,Lr;function er(){}er.__reactDisabledLog=!0;function ei(){{if(si===0){oi=console.log,la=console.info,li=console.warn,xa=console.error,Mn=console.group,Cr=console.groupCollapsed,Lr=console.groupEnd;var U={configurable:!0,enumerable:!0,value:er,writable:!0};Object.defineProperties(console,{info:U,log:U,warn:U,error:U,group:U,groupCollapsed:U,groupEnd:U})}si++}}function Hi(){{if(si--,si===0){var U={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ae({},U,{value:oi}),info:ae({},U,{value:la}),warn:ae({},U,{value:li}),error:ae({},U,{value:xa}),group:ae({},U,{value:Mn}),groupCollapsed:ae({},U,{value:Cr}),groupEnd:ae({},U,{value:Lr})})}si<0&&F("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Fr=H.ReactCurrentDispatcher,Si;function vs(U,ie,we){{if(Si===void 0)try{throw Error()}catch(Ue){var De=Ue.stack.trim().match(/\n( *(at )?)/);Si=De&&De[1]||""}return`
`+Si+U}}var Qa=!1,Hs;{var Al=typeof WeakMap=="function"?WeakMap:Map;Hs=new Al}function Su(U,ie){if(!U||Qa)return"";{var we=Hs.get(U);if(we!==void 0)return we}var De;Qa=!0;var Ue=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var xt;xt=Fr.current,Fr.current=null,ei();try{if(ie){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(ur){De=ur}Reflect.construct(U,[],st)}else{try{st.call()}catch(ur){De=ur}U.call(st.prototype)}}else{try{throw Error()}catch(ur){De=ur}U()}}catch(ur){if(ur&&De&&typeof ur.stack=="string"){for(var Tt=ur.stack.split(`
`),zt=De.stack.split(`
`),hn=Tt.length-1,Vn=zt.length-1;hn>=1&&Vn>=0&&Tt[hn]!==zt[Vn];)Vn--;for(;hn>=1&&Vn>=0;hn--,Vn--)if(Tt[hn]!==zt[Vn]){if(hn!==1||Vn!==1)do if(hn--,Vn--,Vn<0||Tt[hn]!==zt[Vn]){var Pn=`
`+Tt[hn].replace(" at new "," at ");return U.displayName&&Pn.includes("<anonymous>")&&(Pn=Pn.replace("<anonymous>",U.displayName)),typeof U=="function"&&Hs.set(U,Pn),Pn}while(hn>=1&&Vn>=0);break}}}finally{Qa=!1,Fr.current=xt,Hi(),Error.prepareStackTrace=Ue}var un=U?U.displayName||U.name:"",Gn=un?vs(un):"";return typeof U=="function"&&Hs.set(U,Gn),Gn}function Rl(U,ie,we){return Su(U,!1)}function ys(U){var ie=U.prototype;return!!(ie&&ie.isReactComponent)}function na(U,ie,we){if(U==null)return"";if(typeof U=="function")return Su(U,ys(U));if(typeof U=="string")return vs(U);switch(U){case h:return vs("Suspense");case m:return vs("SuspenseList")}if(typeof U=="object")switch(U.$$typeof){case f:return Rl(U.render);case p:return na(U.type,ie,we);case v:{var De=U,Ue=De._payload,xt=De._init;try{return na(xt(Ue),ie,we)}catch{}}}return""}var es={},Go=H.ReactDebugCurrentFrame;function $n(U){if(U){var ie=U._owner,we=na(U.type,U._source,ie?ie.type:null);Go.setExtraStackFrame(we)}else Go.setExtraStackFrame(null)}function Gs(U,ie,we,De,Ue){{var xt=Function.call.bind(_t);for(var st in U)if(xt(U,st)){var Tt=void 0;try{if(typeof U[st]!="function"){var zt=Error((De||"React class")+": "+we+" type `"+st+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof U[st]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw zt.name="Invariant Violation",zt}Tt=U[st](ie,st,De,we,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(hn){Tt=hn}Tt&&!(Tt instanceof Error)&&($n(Ue),F("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",De||"React class",we,st,typeof Tt),$n(null)),Tt instanceof Error&&!(Tt.message in es)&&(es[Tt.message]=!0,$n(Ue),F("Failed %s type: %s",we,Tt.message),$n(null))}}}function Gi(U){if(U){var ie=U._owner,we=na(U.type,U._source,ie?ie.type:null);L(we)}else L(null)}var kn;kn=!1;function Ol(){if(O.current){var U=yt(O.current.type);if(U)return`

Check the render method of \``+U+"`."}return""}function ra(U){if(U!==void 0){var ie=U.fileName.replace(/^.*[\\\/]/,""),we=U.lineNumber;return`

Check your code at `+ie+":"+we+"."}return""}function Ko(U){return U!=null?ra(U.__source):""}var Ks={};function $d(U){var ie=Ol();if(!ie){var we=typeof U=="string"?U:U.displayName||U.name;we&&(ie=`

Check the top-level render call using <`+we+">.")}return ie}function mi(U,ie){if(!(!U._store||U._store.validated||U.key!=null)){U._store.validated=!0;var we=$d(ie);if(!Ks[we]){Ks[we]=!0;var De="";U&&U._owner&&U._owner!==O.current&&(De=" It was passed a child from "+yt(U._owner.type)+"."),Gi(U),F('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',we,De),Gi(null)}}}function Kr(U,ie){if(typeof U=="object"){if(Ie(U))for(var we=0;we<U.length;we++){var De=U[we];pn(De)&&mi(De,ie)}else if(pn(U))U._store&&(U._store.validated=!0);else if(U){var Ue=_(U);if(typeof Ue=="function"&&Ue!==U.entries)for(var xt=Ue.call(U),st;!(st=xt.next()).done;)pn(st.value)&&mi(st.value,ie)}}}function Yo(U){{var ie=U.type;if(ie==null||typeof ie=="string")return;var we;if(typeof ie=="function")we=ie.propTypes;else if(typeof ie=="object"&&(ie.$$typeof===f||ie.$$typeof===p))we=ie.propTypes;else return;if(we){var De=yt(ie);Gs(we,U.props,"prop",De,U)}else if(ie.PropTypes!==void 0&&!kn){kn=!0;var Ue=yt(ie);F("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Ue||"Unknown")}typeof ie.getDefaultProps=="function"&&!ie.getDefaultProps.isReactClassApproved&&F("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ts(U){{for(var ie=Object.keys(U.props),we=0;we<ie.length;we++){var De=ie[we];if(De!=="children"&&De!=="key"){Gi(U),F("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",De),Gi(null);break}}U.ref!==null&&(Gi(U),F("Invalid attribute `ref` supplied to `React.Fragment`."),Gi(null))}}function ia(U,ie,we){var De=_e(U);if(!De){var Ue="";(U===void 0||typeof U=="object"&&U!==null&&Object.keys(U).length===0)&&(Ue+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var xt=Ko(ie);xt?Ue+=xt:Ue+=Ol();var st;U===null?st="null":Ie(U)?st="array":U!==void 0&&U.$$typeof===r?(st="<"+(yt(U.type)||"Unknown")+" />",Ue=" Did you accidentally export a JSX literal instead of a component?"):st=typeof U,F("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",st,Ue)}var Tt=Wt.apply(this,arguments);if(Tt==null)return Tt;if(De)for(var zt=2;zt<arguments.length;zt++)Kr(arguments[zt],U);return U===a?ts(Tt):Yo(Tt),Tt}var ua=!1;function ns(U){var ie=ia.bind(null,U);return ie.type=U,ua||(ua=!0,q("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(ie,"type",{enumerable:!1,get:function(){return q("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:U}),U}}),ie}function Sc(U,ie,we){for(var De=Un.apply(this,arguments),Ue=2;Ue<arguments.length;Ue++)Kr(arguments[Ue],De.type);return Yo(De),De}function Ld(U,ie){var we=k.transition;k.transition={};var De=k.transition;k.transition._updatedFibers=new Set;try{U()}finally{if(k.transition=we,we===null&&De._updatedFibers){var Ue=De._updatedFibers.size;Ue>10&&q("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),De._updatedFibers.clear()}}}var Eu=!1,go=null;function eh(U){if(go===null)try{var ie=("require"+Math.random()).slice(0,7),we=e&&e[ie];go=we.call(e,"timers").setImmediate}catch{go=function(Ue){Eu===!1&&(Eu=!0,typeof MessageChannel>"u"&&F("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var xt=new MessageChannel;xt.port1.onmessage=Ue,xt.port2.postMessage(void 0)}}return go(U)}var ca=0,Jo=!1;function jl(U){{var ie=ca;ca++,P.current===null&&(P.current=[]);var we=P.isBatchingLegacy,De;try{if(P.isBatchingLegacy=!0,De=U(),!we&&P.didScheduleLegacyUpdate){var Ue=P.current;Ue!==null&&(P.didScheduleLegacyUpdate=!1,Ki(Ue))}}catch(un){throw rs(ie),un}finally{P.isBatchingLegacy=we}if(De!==null&&typeof De=="object"&&typeof De.then=="function"){var xt=De,st=!1,Tt={then:function(un,Gn){st=!0,xt.then(function(ur){rs(ie),ca===0?qo(ur,un,Gn):un(ur)},function(ur){rs(ie),Gn(ur)})}};return!Jo&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){st||(Jo=!0,F("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),Tt}else{var zt=De;if(rs(ie),ca===0){var hn=P.current;hn!==null&&(Ki(hn),P.current=null);var Vn={then:function(un,Gn){P.current===null?(P.current=[],qo(zt,un,Gn)):un(zt)}};return Vn}else{var Pn={then:function(un,Gn){un(zt)}};return Pn}}}}function rs(U){U!==ca-1&&F("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),ca=U}function qo(U,ie,we){{var De=P.current;if(De!==null)try{Ki(De),eh(function(){De.length===0?(P.current=null,ie(U)):qo(U,ie,we)})}catch(Ue){we(Ue)}else ie(U)}}var vo=!1;function Ki(U){if(!vo){vo=!0;var ie=0;try{for(;ie<U.length;ie++){var we=U[ie];do we=we(!0);while(we!==null)}U.length=0}catch(De){throw U=U.slice(ie+1),De}finally{vo=!1}}}var Fd=ia,Nu=Sc,Ec=ns,_u={map:Hr,forEach:Wi,count:Ii,toArray:Mi,only:zi};t.Children=_u,t.Component=re,t.Fragment=a,t.Profiler=o,t.PureComponent=Ne,t.StrictMode=s,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,t.cloneElement=Nu,t.createContext=xr,t.createElement=Fd,t.createFactory=Ec,t.createRef=Te,t.forwardRef=xe,t.isValidElement=pn,t.lazy=ue,t.memo=Be,t.startTransition=Ld,t.unstable_act=jl,t.useCallback=sn,t.useContext=Ze,t.useDebugValue=Dn,t.useDeferredValue=Gr,t.useEffect=Pt,t.useId=xi,t.useImperativeHandle=hr,t.useInsertionEffect=Ut,t.useLayoutEffect=Zt,t.useMemo=cn,t.useReducer=wt,t.useRef=ht,t.useState=We,t.useSyncExternalStore=ta,t.useTransition=gn,t.version=n,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()}}),tQ=QZ({"../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"(t,e){e.exports=bwe()}});/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *//**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a7=eQ(tQ()),wwe=(t,e)=>{var n;let r=[];const i=(n=a7.Children.map(t,s=>(0,a7.isValidElement)(s)&&s.type===e?(r.push(s),null):s))==null?void 0:n.filter(Boolean),a=r.length>=0?r:void 0;return[i,a]},xwe=new Set(["id","type","style","title","role","tabIndex","htmlFor","width","height","abbr","accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","challenge","charset","checked","cite","class","className","cols","colSpan","command","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","dropzone","encType","enterKeyHint","for","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","hidden","high","href","hrefLang","httpEquiv","icon","inputMode","isMap","itemId","itemProp","itemRef","itemScope","itemType","kind","label","lang","list","loop","manifest","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","open","optimum","pattern","ping","placeholder","poster","preload","radioGroup","referrerPolicy","readOnly","rel","required","rows","rowSpan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","slot","sortable","span","spellCheck","src","srcDoc","srcSet","start","step","target","translate","typeMustMatch","useMap","value","wmode","wrap"]),Swe=new Set(["onCopy","onCut","onPaste","onLoad","onError","onWheel","onScroll","onCompositionEnd","onCompositionStart","onCompositionUpdate","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerDown","onPointerEnter","onPointerLeave","onPointerUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd"]),s7=/^(data-.*)$/,Ewe=/^(aria-.*)$/,mT=/^(on[A-Z].*)$/;function ps(t,e={}){let{labelable:n=!0,enabled:r=!0,propNames:i,omitPropNames:a,omitEventNames:s,omitDataProps:o,omitEventProps:l}=e,c={};if(!r)return t;for(const f in t)a!=null&&a.has(f)||s!=null&&s.has(f)&&mT.test(f)||mT.test(f)&&!Swe.has(f)||o&&s7.test(f)||l&&mT.test(f)||(Object.prototype.hasOwnProperty.call(t,f)&&(xwe.has(f)||n&&Ewe.test(f)||i!=null&&i.has(f)||s7.test(f))||mT.test(f))&&(c[f]=t[f]);return c}var Nwe=eQ(tQ());function XV({Component:t,props:e,renderCustom:n}){return n&&typeof n=="function"?n(e):Nwe.createElement(t,e)}var[_we,Xa]=Zw({name:"ProviderContext",strict:!1});const Cwe=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Twe=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function nQ(t){if(Intl.Locale){let n=new Intl.Locale(t).maximize(),r=typeof n.getTextInfo=="function"?n.getTextInfo():n.textInfo;if(r)return r.direction==="rtl";if(n.script)return Cwe.has(n.script)}let e=t.split("-")[0];return Twe.has(e)}const W5={prefix:String(Math.round(Math.random()*1e10)),current:0},rQ=it.createContext(W5),Dwe=it.createContext(!1);let kwe=!!(typeof window<"u"&&window.document&&window.document.createElement),mI=new WeakMap;function Pwe(t=!1){let e=R.useContext(rQ),n=R.useRef(null);if(n.current===null&&!t){var r,i;let a=(i=it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(a){let s=mI.get(a);s==null?mI.set(a,{id:e.current,state:a.memoizedState}):a.memoizedState!==s.state&&(e.current=s.id,mI.delete(a))}n.current=++e.current}return n.current}function Awe(t){let e=R.useContext(rQ);e===W5&&!kwe&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Pwe(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function Rwe(t){let e=it.useId(),[n]=R.useState(Qw()),r=n?"react-aria":`react-aria${W5.prefix}`;return t||`${r}-${e}`}const Owe=typeof it.useId=="function"?Rwe:Awe;function jwe(){return!1}function Iwe(){return!0}function Mwe(t){return()=>{}}function Qw(){return typeof it.useSyncExternalStore=="function"?it.useSyncExternalStore(Mwe,jwe,Iwe):R.useContext(Dwe)}const Vwe=Symbol.for("react-aria.i18n.locale");function iQ(){let t=typeof window<"u"&&window[Vwe]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([t])}catch{t="en-US"}return{locale:t,direction:nQ(t)?"rtl":"ltr"}}let ZV=iQ(),KS=new Set;function o7(){ZV=iQ();for(let t of KS)t(ZV)}function aQ(){let t=Qw(),[e,n]=R.useState(ZV);return R.useEffect(()=>(KS.size===0&&window.addEventListener("languagechange",o7),KS.add(n),()=>{KS.delete(n),KS.size===0&&window.removeEventListener("languagechange",o7)}),[]),t?{locale:"en-US",direction:"ltr"}:e}const sQ=it.createContext(null);function $we(t){let{locale:e,children:n}=t,r=aQ(),i=it.useMemo(()=>e?{locale:e,direction:nQ(e)?"rtl":"ltr"}:r,[r,e]);return it.createElement(sQ.Provider,{value:i},n)}function km(){let t=aQ();return R.useContext(sQ)||t}var If=function(){return If=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},If.apply(this,arguments)};function oQ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Lwe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}const Fwe=Symbol.for("react-aria.i18n.locale"),Bwe=Symbol.for("react-aria.i18n.strings");let u0;class CA{getStringForLocale(e,n){let i=this.getStringsForLocale(n)[e];if(!i)throw new Error(`Could not find intl message ${e} in ${n} locale`);return i}getStringsForLocale(e){let n=this.strings[e];return n||(n=Uwe(e,this.strings,this.defaultLocale),this.strings[e]=n),n}static getGlobalDictionaryForPackage(e){if(typeof window>"u")return null;let n=window[Fwe];if(u0===void 0){let i=window[Bwe];if(!i)return null;u0={};for(let a in i)u0[a]=new CA({[n]:i[a]},n)}let r=u0==null?void 0:u0[e];if(!r)throw new Error(`Strings for package "${e}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return r}constructor(e,n="en-US"){this.strings=Object.fromEntries(Object.entries(e).filter(([,r])=>r)),this.defaultLocale=n}}function Uwe(t,e,n="en-US"){if(e[t])return e[t];let r=Wwe(t);if(e[r])return e[r];for(let i in e)if(i.startsWith(r+"-"))return e[i];return e[n]}function Wwe(t){return Intl.Locale?new Intl.Locale(t).language:t.split("-")[0]}const l7=new Map,u7=new Map;class zwe{format(e,n){let r=this.strings.getStringForLocale(e,this.locale);return typeof r=="function"?r(n,this):r}plural(e,n,r="cardinal"){let i=n["="+e];if(i)return typeof i=="function"?i():i;let a=this.locale+":"+r,s=l7.get(a);s||(s=new Intl.PluralRules(this.locale,{type:r}),l7.set(a,s));let o=s.select(e);return i=n[o]||n.other,typeof i=="function"?i():i}number(e){let n=u7.get(this.locale);return n||(n=new Intl.NumberFormat(this.locale),u7.set(this.locale,n)),n.format(e)}select(e,n){let r=e[n]||e.other;return typeof r=="function"?r():r}constructor(e,n){this.locale=e,this.strings=n}}const c7=new WeakMap;function Hwe(t){let e=c7.get(t);return e||(e=new CA(t),c7.set(t,e)),e}function Gwe(t,e){return e&&CA.getGlobalDictionaryForPackage(e)||Hwe(t)}function lQ(t,e){let{locale:n}=km(),r=Gwe(t,e);return R.useMemo(()=>new zwe(n,r),[n,r])}function Kwe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function uQ(t,e,n){Kwe(t,e),e.set(t,n)}const Bi=typeof document<"u"?it.useLayoutEffect:()=>{};function Us(t){const e=R.useRef(null);return Bi(()=>{e.current=t},[t]),R.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}function Ywe(t){let[e,n]=R.useState(t),r=R.useRef(null),i=Us(()=>{if(!r.current)return;let s=r.current.next();if(s.done){r.current=null;return}e===s.value?i():n(s.value)});Bi(()=>{r.current&&i()});let a=Us(s=>{r.current=s(e),i()});return[e,a]}let Jwe=!!(typeof window<"u"&&window.document&&window.document.createElement),Bk=new Map;function dc(t){let[e,n]=R.useState(t),r=R.useRef(null),i=Owe(e),a=R.useCallback(s=>{r.current=s},[]);return Jwe&&Bk.set(i,a),Bi(()=>{let s=i;return()=>{Bk.delete(s)}},[i]),R.useEffect(()=>{let s=r.current;s&&(r.current=null,n(s))}),i}function qwe(t,e){if(t===e)return t;let n=Bk.get(t);if(n)return n(e),e;let r=Bk.get(e);return r?(r(t),t):e}function fg(t=[]){let e=dc(),[n,r]=Ywe(e),i=R.useCallback(()=>{r(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,r]);return Bi(i,[e,i,...t]),n}function ho(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}const Ri=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},oc=t=>t&&"window"in t&&t.window===t?t:Ri(t).defaultView||window;function cQ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=cQ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Xwe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=cQ(t))&&(r&&(r+=" "),r+=e);return r}function kt(...t){let e={...t[0]};for(let n=1;n<t.length;n++){let r=t[n];for(let i in r){let a=e[i],s=r[i];typeof a=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=ho(a,s):(i==="className"||i==="UNSAFE_className")&&typeof a=="string"&&typeof s=="string"?e[i]=Xwe(a,s):i==="id"&&a&&s?e.id=qwe(a,s):e[i]=s!==void 0?s:a}}return e}function dQ(...t){return t.length===1?t[0]:e=>{for(let n of t)typeof n=="function"?n(e):n!=null&&(n.current=e)}}const Zwe=new Set(["id"]),Qwe=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),exe=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),txe=/^(data-.*)$/;function vc(t,e={}){let{labelable:n,isLink:r,propNames:i}=e,a={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(Zwe.has(s)||n&&Qwe.has(s)||r&&exe.has(s)||i!=null&&i.has(s)||txe.test(s))&&(a[s]=t[s]);return a}function Lf(t){if(nxe())t.focus({preventScroll:!0});else{let e=rxe(t);t.focus(),ixe(e)}}let pT=null;function nxe(){if(pT==null){pT=!1;try{document.createElement("div").focus({get preventScroll(){return pT=!0,!0}})}catch{}}return pT}function rxe(t){let e=t.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==r;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function ixe(t){for(let{element:e,scrollTop:n,scrollLeft:r}of t)e.scrollTop=n,e.scrollLeft=r}function TA(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function z5(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function bg(){return z5(/^Mac/i)}function axe(){return z5(/^iPhone/i)}function fQ(){return z5(/^iPad/i)||bg()&&navigator.maxTouchPoints>1}function DA(){return axe()||fQ()}function sxe(){return bg()||DA()}function H5(){return TA(/AppleWebKit/i)&&!oxe()}function oxe(){return TA(/Chrome/i)}function hQ(){return TA(/Android/i)}function lxe(){return TA(/Firefox/i)}const mQ=R.createContext({isNative:!0,open:dxe,useHref:t=>t});function uxe(t){let{children:e,navigate:n,useHref:r}=t,i=R.useMemo(()=>({isNative:!1,open:(a,s,o,l)=>{pQ(a,c=>{cxe(c,s)?n(o,l):wg(c,s)})},useHref:r||(a=>a)}),[n,r]);return it.createElement(mQ.Provider,{value:i},e)}function kA(){return R.useContext(mQ)}function cxe(t,e){let n=t.getAttribute("target");return(!n||n==="_self")&&t.origin===location.origin&&!t.hasAttribute("download")&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey}function wg(t,e,n=!0){var r,i;let{metaKey:a,ctrlKey:s,altKey:o,shiftKey:l}=e;lxe()&&(!((i=window.event)===null||i===void 0||(r=i.type)===null||r===void 0)&&r.startsWith("key"))&&t.target==="_blank"&&(bg()?a=!0:s=!0);let c=H5()&&bg()&&!fQ()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:s,altKey:o,shiftKey:l}):new MouseEvent("click",{metaKey:a,ctrlKey:s,altKey:o,shiftKey:l,bubbles:!0,cancelable:!0});wg.isOpening=n,Lf(t),t.dispatchEvent(c),wg.isOpening=!1}wg.isOpening=!1;function pQ(t,e){if(t instanceof HTMLAnchorElement)e(t);else if(t.hasAttribute("data-href")){let n=document.createElement("a");n.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(n.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(n.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(n.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(n.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(n),e(n),t.removeChild(n)}}function dxe(t,e){pQ(t,n=>wg(n,e))}function G5(t){let e=kA();return{href:t!=null&&t.href?e.useHref(t==null?void 0:t.href):void 0,target:t==null?void 0:t.target,rel:t==null?void 0:t.rel,download:t==null?void 0:t.download,ping:t==null?void 0:t.ping,referrerPolicy:t==null?void 0:t.referrerPolicy}}let $0=new Map,QV=new Set;function d7(){if(typeof window>"u")return;function t(r){return"propertyName"in r}let e=r=>{if(!t(r)||!r.target)return;let i=$0.get(r.target);i||(i=new Set,$0.set(r.target,i),r.target.addEventListener("transitioncancel",n,{once:!0})),i.add(r.propertyName)},n=r=>{if(!t(r)||!r.target)return;let i=$0.get(r.target);if(i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",n),$0.delete(r.target)),$0.size===0)){for(let a of QV)a();QV.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?d7():document.addEventListener("DOMContentLoaded",d7));function gQ(t){requestAnimationFrame(()=>{$0.size===0?t():QV.add(t)})}function FN(){let t=R.useRef(new Map),e=R.useCallback((i,a,s,o)=>{let l=o!=null&&o.once?(...c)=>{t.current.delete(s),s(...c)}:s;t.current.set(s,{type:a,eventTarget:i,fn:l,options:o}),i.addEventListener(a,s,o)},[]),n=R.useCallback((i,a,s,o)=>{var l;let c=((l=t.current.get(s))===null||l===void 0?void 0:l.fn)||s;i.removeEventListener(a,c,o),t.current.delete(s)},[]),r=R.useCallback(()=>{t.current.forEach((i,a)=>{n(i.eventTarget,i.type,a,i.options)})},[n]);return R.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function PA(t,e){let{id:n,"aria-label":r,"aria-labelledby":i}=t;return n=dc(n),i&&r?i=[...new Set([n,...i.trim().split(/\s+/)])].join(" "):i&&(i=i.trim().split(/\s+/).join(" ")),!r&&!i&&e&&(r=e),{id:n,"aria-label":r,"aria-labelledby":i}}function fxe(){return typeof window.ResizeObserver<"u"}function hxe(t){const{ref:e,onResize:n}=t;R.useEffect(()=>{let r=e==null?void 0:e.current;if(r)if(fxe()){const i=new window.ResizeObserver(a=>{a.length&&n()});return i.observe(r),()=>{r&&i.unobserve(r)}}else return window.addEventListener("resize",n,!1),()=>{window.removeEventListener("resize",n,!1)}},[n,e])}function vQ(t,e){Bi(()=>{if(t&&t.ref&&e)return t.ref.current=e.current,()=>{t.ref&&(t.ref.current=null)}})}function BE(t,e){let n=window.getComputedStyle(t),r=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return r&&e&&(r=t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth),r}function yQ(t,e){let n=t;for(BE(n,e)&&(n=n.parentElement);n&&!BE(n,e);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}function mxe(t,e){const n=[];for(;t&&t!==document.documentElement;)BE(t,e)&&n.push(t),t=t.parentElement;return n}let pxe=0;const pI=new Map;function gxe(t){let[e,n]=R.useState();return Bi(()=>{if(!t)return;let r=pI.get(t);if(r)n(r.element.id);else{let i=`react-aria-description-${pxe++}`;n(i);let a=document.createElement("div");a.id=i,a.style.display="none",a.textContent=t,document.body.appendChild(a),r={refCount:0,element:a},pI.set(t,r)}return r.refCount++,()=>{r&&--r.refCount===0&&(r.element.remove(),pI.delete(t))}},[t]),{"aria-describedby":t?e:void 0}}function vxe(t,e,n,r){let i=Us(n),a=n==null;R.useEffect(()=>{if(a||!t.current)return;let s=t.current;return s.addEventListener(e,i,r),()=>{s.removeEventListener(e,i,r)}},[t,e,r,a,i])}function bQ(t,e){let n=f7(t,e,"left"),r=f7(t,e,"top"),i=e.offsetWidth,a=e.offsetHeight,s=t.scrollLeft,o=t.scrollTop,{borderTopWidth:l,borderLeftWidth:c}=getComputedStyle(t),f=t.scrollLeft+parseInt(c,10),h=t.scrollTop+parseInt(l,10),m=f+t.clientWidth,p=h+t.clientHeight;n<=s?s=n-parseInt(c,10):n+i>m&&(s+=n+i-m),r<=h?o=r-parseInt(l,10):r+a>p&&(o+=r+a-p),t.scrollLeft=s,t.scrollTop=o}function f7(t,e,n){const r=n==="left"?"offsetLeft":"offsetTop";let i=0;for(;e.offsetParent&&(i+=e[r],e.offsetParent!==t);){if(e.offsetParent.contains(t)){i-=t[r];break}e=e.offsetParent}return i}function h7(t,e){if(document.contains(t)){let s=document.scrollingElement||document.documentElement;if(window.getComputedStyle(s).overflow==="hidden"){let l=mxe(t);for(let c of l)bQ(c,t)}else{var n;let{left:l,top:c}=t.getBoundingClientRect();t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"});let{left:f,top:h}=t.getBoundingClientRect();if(Math.abs(l-f)>1||Math.abs(c-h)>1){var r,i,a;e==null||(i=e.containingElement)===null||i===void 0||(r=i.scrollIntoView)===null||r===void 0||r.call(i,{block:"center",inline:"center"}),(a=t.scrollIntoView)===null||a===void 0||a.call(t,{block:"nearest"})}}}}function e3(t){return t.mozInputSource===0&&t.isTrusted?!0:hQ()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function yxe(t){return!hQ()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}function K5(t,e,n){let r=R.useRef(e),i=Us(()=>{n&&n(r.current)});R.useEffect(()=>{var a;let s=t==null||(a=t.current)===null||a===void 0?void 0:a.form;return s==null||s.addEventListener("reset",i),()=>{s==null||s.removeEventListener("reset",i)}},[t,i])}function Mg(t,e,n){let[r,i]=R.useState(t||e),a=R.useRef(t!==void 0),s=t!==void 0;R.useEffect(()=>{let c=a.current;c!==s&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}.`),a.current=s},[s]);let o=s?t:r,l=R.useCallback((c,...f)=>{let h=(m,...p)=>{n&&(Object.is(o,m)||n(m,...p)),s||(o=m)};typeof c=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),i((p,...v)=>{let y=c(s?o:p,...v);return h(y,...f),s?p:y})):(s||i(c),h(c,...f))},[s,o,n]);return[o,l]}function Iy(t,e=-1/0,n=1/0){return Math.min(Math.max(t,e),n)}function gT(t,e){let n=t,r=e.toString(),i=r.indexOf("."),a=i>=0?r.length-i:0;if(a>0){let s=Math.pow(10,a);n=Math.round(n*s)/s}return n}function uS(t,e,n,r){e=Number(e),n=Number(n);let i=(t-(isNaN(e)?0:e))%r,a=gT(Math.abs(i)*2>=r?t+Math.sign(i)*(r-Math.abs(i)):t-i,r);return isNaN(e)?!isNaN(n)&&a>n&&(a=Math.floor(gT(n/r,r))*r):a<e?a=e:!isNaN(n)&&a>n&&(a=e+Math.floor(gT((n-e)/r,r))*r),a=gT(a,r),a}let gI=new Map,t3=!1;try{t3=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let Uk=!1;try{Uk=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const wQ={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class bxe{format(e){let n="";if(!t3&&this.options.signDisplay!=null?n=xxe(this.numberFormatter,this.options.signDisplay,e):n=this.numberFormatter.format(e),this.options.style==="unit"&&!Uk){var r;let{unit:i,unitDisplay:a="short",locale:s}=this.resolvedOptions();if(!i)return n;let o=(r=wQ[i])===null||r===void 0?void 0:r[a];n+=o[s]||o.default}return n}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,n);if(n<e)throw new RangeError("End date must be >= start date");return`${this.format(e)}  ${this.format(n)}`}formatRangeToParts(e,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,n);if(n<e)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(n);return[...r.map(a=>({...a,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(a=>({...a,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!t3&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!Uk&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,n={}){this.numberFormatter=wxe(e,n),this.options=n}}function wxe(t,e={}){let{numberingSystem:n}=e;if(n&&t.includes("-nu-")&&(t.includes("-u-")||(t+="-u-"),t+=`-nu-${n}`),e.style==="unit"&&!Uk){var r;let{unit:s,unitDisplay:o="short"}=e;if(!s)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=wQ[s])===null||r===void 0)&&r[o]))throw new Error(`Unsupported unit ${s} with unitDisplay = ${o}`);e={...e,style:"decimal"}}let i=t+(e?Object.entries(e).sort((s,o)=>s[0]<o[0]?-1:1).join():"");if(gI.has(i))return gI.get(i);let a=new Intl.NumberFormat(t,e);return gI.set(i,a),a}function xxe(t,e,n){if(e==="auto")return t.format(n);if(e==="never")return t.format(Math.abs(n));{let r=!1;if(e==="always"?r=n>0||Object.is(n,0):e==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=t.format(-n),a=t.format(n),s=i.replace(a,"").replace(/\u200e|\u061C/,"");return[...s].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(a,"!!!").replace(s,"+").replace("!!!",a)}else return t.format(n)}}function Y5(t={}){let{locale:e}=km();return R.useMemo(()=>new bxe(e,t),[e,t])}let vI=new Map;function xQ(t){let{locale:e}=km(),n=e+(t?Object.entries(t).sort((i,a)=>i[0]<a[0]?-1:1).join():"");if(vI.has(n))return vI.get(n);let r=new Intl.Collator(e,t);return vI.set(n,r),r}const q0={top:"top",bottom:"top",left:"left",right:"left"},Wk={top:"bottom",bottom:"top",left:"right",right:"left"},Sxe={top:"left",left:"top"},n3={top:"height",left:"width"},SQ={width:"totalWidth",height:"totalHeight"},vT={};let fl=typeof document<"u"&&window.visualViewport;function m7(t){let e=0,n=0,r=0,i=0,a=0,s=0,o={},l=(fl==null?void 0:fl.scale)>1;if(t.tagName==="BODY"){let h=document.documentElement;r=h.clientWidth,i=h.clientHeight;var c;e=(c=fl==null?void 0:fl.width)!==null&&c!==void 0?c:r;var f;n=(f=fl==null?void 0:fl.height)!==null&&f!==void 0?f:i,o.top=h.scrollTop||t.scrollTop,o.left=h.scrollLeft||t.scrollLeft,fl&&(a=fl.offsetTop,s=fl.offsetLeft)}else({width:e,height:n,top:a,left:s}=pw(t)),o.top=t.scrollTop,o.left=t.scrollLeft,r=e,i=n;return H5()&&(t.tagName==="BODY"||t.tagName==="HTML")&&l&&(o.top=0,o.left=0,a=fl.pageTop,s=fl.pageLeft),{width:e,height:n,totalWidth:r,totalHeight:i,scroll:o,top:a,left:s}}function Exe(t){return{top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}}function p7(t,e,n,r,i,a,s){let o=i.scroll[t],l=r[n3[t]],c=r.scroll[q0[t]]+a,f=l+r.scroll[q0[t]]-a,h=e-o+s[t]-r[q0[t]],m=e-o+n+s[t]-r[q0[t]];return h<c?c-h:m>f?Math.max(f-m,c-h):0}function Nxe(t){let e=window.getComputedStyle(t);return{top:parseInt(e.marginTop,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0,right:parseInt(e.marginRight,10)||0}}function g7(t){if(vT[t])return vT[t];let[e,n]=t.split(" "),r=q0[e]||"right",i=Sxe[r];q0[n]||(n="center");let a=n3[r],s=n3[i];return vT[t]={placement:e,crossPlacement:n,axis:r,crossAxis:i,size:a,crossSize:s},vT[t]}function yI(t,e,n,r,i,a,s,o,l,c){let{placement:f,crossPlacement:h,axis:m,crossAxis:p,size:v,crossSize:y}=r,x={};x[p]=t[p],h==="center"?x[p]+=(t[y]-n[y])/2:h!==p&&(x[p]+=t[y]-n[y]),x[p]+=a;const S=t[p]-n[y]+l+c,_=t[p]+t[y]-l-c;if(x[p]=Iy(x[p],S,_),f===m){const N=o?s[v]:e[SQ[v]];x[Wk[m]]=Math.floor(N-t[m]+i)}else x[m]=Math.floor(t[m]+t[v]+i);return x}function _xe(t,e,n,r,i,a,s,o){const l=r?n.height:e[SQ.height];let c=t.top!=null?n.top+t.top:n.top+(l-t.bottom-s),f=o!=="top"?Math.max(0,e.height+e.top+e.scroll.top-c-(i.top+i.bottom+a)):Math.max(0,c+s-(e.top+e.scroll.top)-(i.top+i.bottom+a));return Math.min(e.height-a*2,f)}function v7(t,e,n,r,i,a){let{placement:s,axis:o,size:l}=a;return s===o?Math.max(0,n[o]-t[o]-t.scroll[o]+e[o]-r[o]-r[Wk[o]]-i):Math.max(0,t[l]+t[o]+t.scroll[o]-e[o]-n[o]-n[l]-r[o]-r[Wk[o]]-i)}function Cxe(t,e,n,r,i,a,s,o,l,c,f,h,m,p,v,y){let x=g7(t),{size:S,crossAxis:_,crossSize:N,placement:k,crossPlacement:P}=x,O=yI(e,o,n,x,f,h,c,m,v,y),A=f,T=v7(o,c,e,i,a+f,x);if(s&&r[S]>T){let Z=g7(`${Wk[k]} ${P}`),G=yI(e,o,n,Z,f,h,c,m,v,y);v7(o,c,e,i,a+f,Z)>T&&(x=Z,O=G,A=f)}let L="bottom";x.axis==="top"?x.placement==="top"?L="top":x.placement==="bottom"&&(L="bottom"):x.crossAxis==="top"&&(x.crossPlacement==="top"?L="bottom":x.crossPlacement==="bottom"&&(L="top"));let B=p7(_,O[_],n[N],o,l,a,c);O[_]+=B;let W=_xe(O,o,c,m,i,a,n.height,L);p&&p<W&&(W=p),n.height=Math.min(n.height,W),O=yI(e,o,n,x,A,h,c,m,v,y),B=p7(_,O[_],n[N],o,l,a,c),O[_]+=B;let Y={},V=e[_]+.5*e[N]-O[_];const I=v/2+y,H=n[N]-v/2-y,q=e[_]-O[_]+v/2,F=e[_]+e[N]-O[_]-v/2,J=Iy(V,q,F);return Y[_]=Iy(J,I,H),{position:O,maxHeight:W,arrowOffsetLeft:Y.left,arrowOffsetTop:Y.top,placement:x.placement}}function Txe(t){let{placement:e,targetNode:n,overlayNode:r,scrollNode:i,padding:a,shouldFlip:s,boundaryElement:o,offset:l,crossOffset:c,maxHeight:f,arrowSize:h=0,arrowBoundaryOffset:m=0}=t,p=r instanceof HTMLElement?Dxe(r):document.documentElement,v=p===document.documentElement;const y=window.getComputedStyle(p).position;let x=!!y&&y!=="static",S=v?pw(n):y7(n,p);if(!v){let{marginTop:T,marginLeft:L}=window.getComputedStyle(n);S.top+=parseInt(T,10)||0,S.left+=parseInt(L,10)||0}let _=pw(r),N=Nxe(r);_.width+=N.left+N.right,_.height+=N.top+N.bottom;let k=Exe(i),P=m7(o),O=m7(p),A=o.tagName==="BODY"?pw(p):y7(p,o);return p.tagName==="HTML"&&o.tagName==="BODY"&&(O.scroll.top=0,O.scroll.left=0),Cxe(e,S,_,k,N,a,s,P,O,A,l,c,x,f,h,m)}function pw(t){let{top:e,left:n,width:r,height:i}=t.getBoundingClientRect(),{scrollTop:a,scrollLeft:s,clientTop:o,clientLeft:l}=document.documentElement;return{top:e+a-o,left:n+s-l,width:r,height:i}}function y7(t,e){let n=window.getComputedStyle(t),r;if(n.position==="fixed"){let{top:i,left:a,width:s,height:o}=t.getBoundingClientRect();r={top:i,left:a,width:s,height:o}}else{r=pw(t);let i=pw(e),a=window.getComputedStyle(e);i.top+=(parseInt(a.borderTopWidth,10)||0)-e.scrollTop,i.left+=(parseInt(a.borderLeftWidth,10)||0)-e.scrollLeft,r.top-=i.top,r.left-=i.left}return r.top-=parseInt(n.marginTop,10)||0,r.left-=parseInt(n.marginLeft,10)||0,r}function Dxe(t){let e=t.offsetParent;if(e&&e===document.body&&window.getComputedStyle(e).position==="static"&&!b7(e)&&(e=document.documentElement),e==null)for(e=t.parentElement;e&&!b7(e);)e=e.parentElement;return e||document.documentElement}function b7(t){let e=window.getComputedStyle(t);return e.transform!=="none"||/transform|perspective/.test(e.willChange)||e.filter!=="none"||e.contain==="paint"||"backdropFilter"in e&&e.backdropFilter!=="none"||"WebkitBackdropFilter"in e&&e.WebkitBackdropFilter!=="none"}const EQ=new WeakMap;function kxe(t){let{triggerRef:e,isOpen:n,onClose:r}=t;R.useEffect(()=>{if(!n||r===null)return;let i=a=>{let s=a.target;if(!e.current||s instanceof Node&&!s.contains(e.current))return;let o=r||EQ.get(e.current);o&&o()};return window.addEventListener("scroll",i,!0),()=>{window.removeEventListener("scroll",i,!0)}},[n,r,e])}let ma=typeof document<"u"&&window.visualViewport;function NQ(t){let{direction:e}=km(),{arrowSize:n=0,targetRef:r,overlayRef:i,scrollRef:a=i,placement:s="bottom",containerPadding:o=12,shouldFlip:l=!0,boundaryElement:c=typeof document<"u"?document.body:null,offset:f=0,crossOffset:h=0,shouldUpdatePosition:m=!0,isOpen:p=!0,onClose:v,maxHeight:y,arrowBoundaryOffset:x=0}=t,[S,_]=R.useState({position:{},arrowOffsetLeft:void 0,arrowOffsetTop:void 0,maxHeight:void 0,placement:void 0}),N=[m,s,i.current,r.current,a.current,o,l,c,f,h,p,e,y,x,n],k=R.useRef(ma==null?void 0:ma.scale);R.useEffect(()=>{p&&(k.current=ma==null?void 0:ma.scale)},[p]);let P=R.useCallback(()=>{if(m===!1||!p||!i.current||!r.current||!a.current||!c||(ma==null?void 0:ma.scale)!==k.current)return;let T=i.current;if(!y&&i.current){var L;T.style.top="0px",T.style.bottom="";var B;T.style.maxHeight=((B=(L=window.visualViewport)===null||L===void 0?void 0:L.height)!==null&&B!==void 0?B:window.innerHeight)+"px"}let W=Txe({placement:Axe(s,e),overlayNode:i.current,targetNode:r.current,scrollNode:a.current,padding:o,shouldFlip:l,boundaryElement:c,offset:f,crossOffset:h,maxHeight:y,arrowSize:n,arrowBoundaryOffset:x});T.style.top="",T.style.bottom="",Object.keys(W.position).forEach(Y=>T.style[Y]=W.position[Y]+"px"),T.style.maxHeight=W.maxHeight!=null?W.maxHeight+"px":void 0,_(W)},N);Bi(P,N),Pxe(P),hxe({ref:i,onResize:P});let O=R.useRef(!1);Bi(()=>{let T,L=()=>{O.current=!0,clearTimeout(T),T=setTimeout(()=>{O.current=!1},500),P()},B=()=>{O.current&&L()};return ma==null||ma.addEventListener("resize",L),ma==null||ma.addEventListener("scroll",B),()=>{ma==null||ma.removeEventListener("resize",L),ma==null||ma.removeEventListener("scroll",B)}},[P]);let A=R.useCallback(()=>{O.current||v()},[v,O]);return kxe({triggerRef:r,isOpen:p,onClose:v&&A}),{overlayProps:{style:{position:"absolute",zIndex:1e5,...S.position,maxHeight:S.maxHeight}},placement:S.placement,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:S.arrowOffsetLeft,top:S.arrowOffsetTop}},updatePosition:P}}function Pxe(t){Bi(()=>(window.addEventListener("resize",t,!1),()=>{window.removeEventListener("resize",t,!1)}),[t])}function Axe(t,e){return e==="rtl"?t.replace("start","right").replace("end","left"):t.replace("start","left").replace("end","right")}let X0="default",r3="",tk=new WeakMap;function i3(t){if(DA()){if(X0==="default"){const e=Ri(t);r3=e.documentElement.style.webkitUserSelect,e.documentElement.style.webkitUserSelect="none"}X0="disabled"}else(t instanceof HTMLElement||t instanceof SVGElement)&&(tk.set(t,t.style.userSelect),t.style.userSelect="none")}function YS(t){if(DA()){if(X0!=="disabled")return;X0="restoring",setTimeout(()=>{gQ(()=>{if(X0==="restoring"){const e=Ri(t);e.documentElement.style.webkitUserSelect==="none"&&(e.documentElement.style.webkitUserSelect=r3||""),r3="",X0="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&tk.has(t)){let e=tk.get(t);t.style.userSelect==="none"&&(t.style.userSelect=e),t.getAttribute("style")===""&&t.removeAttribute("style"),tk.delete(t)}}const J5=it.createContext({register:()=>{}});J5.displayName="PressResponderContext";function Rxe(t,e){return e.get?e.get.call(t):e.value}function _Q(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function CQ(t,e){var n=_Q(t,e,"get");return Rxe(t,n)}function Oxe(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function zk(t,e,n){var r=_Q(t,e,"set");return Oxe(t,r,n),n}function jxe(t){let e=R.useContext(J5);if(e){let{register:n,...r}=e;t=kt(r,t),n()}return vQ(e,t.ref),t}var yT=new WeakMap;let bT=class{continuePropagation(){zk(this,yT,!1)}get shouldStopPropagation(){return CQ(this,yT)}constructor(e,n,r){uQ(this,yT,{writable:!0,value:void 0}),zk(this,yT,!0),this.type=e,this.pointerType=n,this.target=r.currentTarget,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.ctrlKey=r.ctrlKey,this.altKey=r.altKey}};const w7=Symbol("linkClicked");function Od(t){let{onPress:e,onPressChange:n,onPressStart:r,onPressEnd:i,onPressUp:a,isDisabled:s,isPressed:o,preventFocusOnPress:l,shouldCancelOnPointerExit:c,allowTextSelectionOnPress:f,ref:h,...m}=jxe(t),[p,v]=R.useState(!1),y=R.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:x,removeAllGlobalListeners:S}=FN(),_=Us((T,L)=>{let B=y.current;if(s||B.didFirePressStart)return!1;let W=!0;if(B.isTriggeringEvent=!0,r){let Y=new bT("pressstart",L,T);r(Y),W=Y.shouldStopPropagation}return n&&n(!0),B.isTriggeringEvent=!1,B.didFirePressStart=!0,v(!0),W}),N=Us((T,L,B=!0)=>{let W=y.current;if(!W.didFirePressStart)return!1;W.ignoreClickAfterPress=!0,W.didFirePressStart=!1,W.isTriggeringEvent=!0;let Y=!0;if(i){let V=new bT("pressend",L,T);i(V),Y=V.shouldStopPropagation}if(n&&n(!1),v(!1),e&&B&&!s){let V=new bT("press",L,T);e(V),Y&&(Y=V.shouldStopPropagation)}return W.isTriggeringEvent=!1,Y}),k=Us((T,L)=>{let B=y.current;if(s)return!1;if(a){B.isTriggeringEvent=!0;let W=new bT("pressup",L,T);return a(W),B.isTriggeringEvent=!1,W.shouldStopPropagation}return!0}),P=Us(T=>{let L=y.current;L.isPressed&&L.target&&(L.isOverTarget&&L.pointerType!=null&&N(Yh(L.target,T),L.pointerType,!1),L.isPressed=!1,L.isOverTarget=!1,L.activePointerId=null,L.pointerType=null,S(),f||YS(L.target))}),O=Us(T=>{c&&P(T)}),A=R.useMemo(()=>{let T=y.current,L={onKeyDown(W){if(bI(W.nativeEvent,W.currentTarget)&&W.currentTarget.contains(W.target)){var Y;S7(W.target,W.key)&&W.preventDefault();let V=!0;if(!T.isPressed&&!W.repeat){T.target=W.currentTarget,T.isPressed=!0,V=_(W,"keyboard");let I=W.currentTarget,H=q=>{bI(q,I)&&!q.repeat&&I.contains(q.target)&&T.target&&k(Yh(T.target,q),"keyboard")};x(Ri(W.currentTarget),"keyup",ho(H,B),!0)}V&&W.stopPropagation(),W.metaKey&&bg()&&((Y=T.metaKeyEvents)===null||Y===void 0||Y.set(W.key,W.nativeEvent))}else W.key==="Meta"&&(T.metaKeyEvents=new Map)},onClick(W){if(!(W&&!W.currentTarget.contains(W.target))&&W&&W.button===0&&!T.isTriggeringEvent&&!wg.isOpening){let Y=!0;if(s&&W.preventDefault(),!T.ignoreClickAfterPress&&!T.ignoreEmulatedMouseEvents&&!T.isPressed&&(T.pointerType==="virtual"||e3(W.nativeEvent))){!s&&!l&&Lf(W.currentTarget);let V=_(W,"virtual"),I=k(W,"virtual"),H=N(W,"virtual");Y=V&&I&&H}T.ignoreEmulatedMouseEvents=!1,T.ignoreClickAfterPress=!1,Y&&W.stopPropagation()}}},B=W=>{var Y;if(T.isPressed&&T.target&&bI(W,T.target)){var V;S7(W.target,W.key)&&W.preventDefault();let H=W.target;N(Yh(T.target,W),"keyboard",T.target.contains(H)),S(),W.key!=="Enter"&&q5(T.target)&&T.target.contains(H)&&!W[w7]&&(W[w7]=!0,wg(T.target,W,!1)),T.isPressed=!1,(V=T.metaKeyEvents)===null||V===void 0||V.delete(W.key)}else if(W.key==="Meta"&&(!((Y=T.metaKeyEvents)===null||Y===void 0)&&Y.size)){var I;let H=T.metaKeyEvents;T.metaKeyEvents=void 0;for(let q of H.values())(I=T.target)===null||I===void 0||I.dispatchEvent(new KeyboardEvent("keyup",q))}};if(typeof PointerEvent<"u"){L.onPointerDown=I=>{if(I.button!==0||!I.currentTarget.contains(I.target))return;if(yxe(I.nativeEvent)){T.pointerType="virtual";return}wI(I.currentTarget)&&I.preventDefault(),T.pointerType=I.pointerType;let H=!0;T.isPressed||(T.isPressed=!0,T.isOverTarget=!0,T.activePointerId=I.pointerId,T.target=I.currentTarget,!s&&!l&&Lf(I.currentTarget),f||i3(T.target),H=_(I,T.pointerType),x(Ri(I.currentTarget),"pointermove",W,!1),x(Ri(I.currentTarget),"pointerup",Y,!1),x(Ri(I.currentTarget),"pointercancel",V,!1)),H&&I.stopPropagation()},L.onMouseDown=I=>{I.currentTarget.contains(I.target)&&I.button===0&&(wI(I.currentTarget)&&I.preventDefault(),I.stopPropagation())},L.onPointerUp=I=>{!I.currentTarget.contains(I.target)||T.pointerType==="virtual"||I.button===0&&c0(I,I.currentTarget)&&k(I,T.pointerType||I.pointerType)};let W=I=>{I.pointerId===T.activePointerId&&(T.target&&c0(I,T.target)?!T.isOverTarget&&T.pointerType!=null&&(T.isOverTarget=!0,_(Yh(T.target,I),T.pointerType)):T.target&&T.isOverTarget&&T.pointerType!=null&&(T.isOverTarget=!1,N(Yh(T.target,I),T.pointerType,!1),O(I)))},Y=I=>{I.pointerId===T.activePointerId&&T.isPressed&&I.button===0&&T.target&&(c0(I,T.target)&&T.pointerType!=null?N(Yh(T.target,I),T.pointerType):T.isOverTarget&&T.pointerType!=null&&N(Yh(T.target,I),T.pointerType,!1),T.isPressed=!1,T.isOverTarget=!1,T.activePointerId=null,T.pointerType=null,S(),f||YS(T.target))},V=I=>{P(I)};L.onDragStart=I=>{I.currentTarget.contains(I.target)&&P(I)}}else{L.onMouseDown=V=>{if(V.button!==0||!V.currentTarget.contains(V.target))return;if(wI(V.currentTarget)&&V.preventDefault(),T.ignoreEmulatedMouseEvents){V.stopPropagation();return}T.isPressed=!0,T.isOverTarget=!0,T.target=V.currentTarget,T.pointerType=e3(V.nativeEvent)?"virtual":"mouse",!s&&!l&&Lf(V.currentTarget),_(V,T.pointerType)&&V.stopPropagation(),x(Ri(V.currentTarget),"mouseup",W,!1)},L.onMouseEnter=V=>{if(!V.currentTarget.contains(V.target))return;let I=!0;T.isPressed&&!T.ignoreEmulatedMouseEvents&&T.pointerType!=null&&(T.isOverTarget=!0,I=_(V,T.pointerType)),I&&V.stopPropagation()},L.onMouseLeave=V=>{if(!V.currentTarget.contains(V.target))return;let I=!0;T.isPressed&&!T.ignoreEmulatedMouseEvents&&T.pointerType!=null&&(T.isOverTarget=!1,I=N(V,T.pointerType,!1),O(V)),I&&V.stopPropagation()},L.onMouseUp=V=>{V.currentTarget.contains(V.target)&&!T.ignoreEmulatedMouseEvents&&V.button===0&&k(V,T.pointerType||"mouse")};let W=V=>{if(V.button===0){if(T.isPressed=!1,S(),T.ignoreEmulatedMouseEvents){T.ignoreEmulatedMouseEvents=!1;return}T.target&&c0(V,T.target)&&T.pointerType!=null?N(Yh(T.target,V),T.pointerType):T.target&&T.isOverTarget&&T.pointerType!=null&&N(Yh(T.target,V),T.pointerType,!1),T.isOverTarget=!1}};L.onTouchStart=V=>{if(!V.currentTarget.contains(V.target))return;let I=Ixe(V.nativeEvent);if(!I)return;T.activePointerId=I.identifier,T.ignoreEmulatedMouseEvents=!0,T.isOverTarget=!0,T.isPressed=!0,T.target=V.currentTarget,T.pointerType="touch",!s&&!l&&Lf(V.currentTarget),f||i3(T.target),_(V,T.pointerType)&&V.stopPropagation(),x(oc(V.currentTarget),"scroll",Y,!0)},L.onTouchMove=V=>{if(!V.currentTarget.contains(V.target))return;if(!T.isPressed){V.stopPropagation();return}let I=x7(V.nativeEvent,T.activePointerId),H=!0;I&&c0(I,V.currentTarget)?!T.isOverTarget&&T.pointerType!=null&&(T.isOverTarget=!0,H=_(V,T.pointerType)):T.isOverTarget&&T.pointerType!=null&&(T.isOverTarget=!1,H=N(V,T.pointerType,!1),O(V)),H&&V.stopPropagation()},L.onTouchEnd=V=>{if(!V.currentTarget.contains(V.target))return;if(!T.isPressed){V.stopPropagation();return}let I=x7(V.nativeEvent,T.activePointerId),H=!0;I&&c0(I,V.currentTarget)&&T.pointerType!=null?(k(V,T.pointerType),H=N(V,T.pointerType)):T.isOverTarget&&T.pointerType!=null&&(H=N(V,T.pointerType,!1)),H&&V.stopPropagation(),T.isPressed=!1,T.activePointerId=null,T.isOverTarget=!1,T.ignoreEmulatedMouseEvents=!0,T.target&&!f&&YS(T.target),S()},L.onTouchCancel=V=>{V.currentTarget.contains(V.target)&&(V.stopPropagation(),T.isPressed&&P(V))};let Y=V=>{T.isPressed&&V.target.contains(T.target)&&P({currentTarget:T.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};L.onDragStart=V=>{V.currentTarget.contains(V.target)&&P(V)}}return L},[x,s,l,S,f,P,O,N,_,k]);return R.useEffect(()=>()=>{var T;f||YS((T=y.current.target)!==null&&T!==void 0?T:void 0)},[f]),{isPressed:o||p,pressProps:kt(m,A)}}function q5(t){return t.tagName==="A"&&t.hasAttribute("href")}function bI(t,e){const{key:n,code:r}=t,i=e,a=i.getAttribute("role");return(n==="Enter"||n===" "||n==="Spacebar"||r==="Space")&&!(i instanceof oc(i).HTMLInputElement&&!TQ(i,n)||i instanceof oc(i).HTMLTextAreaElement||i.isContentEditable)&&!((a==="link"||!a&&q5(i))&&n!=="Enter")}function Ixe(t){const{targetTouches:e}=t;return e.length>0?e[0]:null}function x7(t,e){const n=t.changedTouches;for(let r=0;r<n.length;r++){const i=n[r];if(i.identifier===e)return i}return null}function Yh(t,e){return{currentTarget:t,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey}}function Mxe(t){let e=0,n=0;return t.width!==void 0?e=t.width/2:t.radiusX!==void 0&&(e=t.radiusX),t.height!==void 0?n=t.height/2:t.radiusY!==void 0&&(n=t.radiusY),{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function Vxe(t,e){return!(t.left>e.right||e.left>t.right||t.top>e.bottom||e.top>t.bottom)}function c0(t,e){let n=e.getBoundingClientRect(),r=Mxe(t);return Vxe(n,r)}function wI(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function S7(t,e){return t instanceof HTMLInputElement?!TQ(t,e):t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!q5(t)}const $xe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function TQ(t,e){return t.type==="checkbox"||t.type==="radio"?e===" ":$xe.has(t.type)}function Lxe({children:t}){let e=R.useMemo(()=>({register:()=>{}}),[]);return it.createElement(J5.Provider,{value:e},t)}let Fxe=class{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}};function DQ(t){let e=R.useRef({isFocused:!1,observer:null});Bi(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Us(r=>{t==null||t(r)});return R.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,a=s=>{e.current.isFocused=!1,i.disabled&&n(new Fxe("blur",s)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",a,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var s;(s=e.current.observer)===null||s===void 0||s.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function X5(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const a=R.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),s=DQ(a),o=R.useCallback(l=>{const c=Ri(l.target);l.target===l.currentTarget&&c.activeElement===l.target&&(n&&n(l),i&&i(!0),s(l))},[i,n,s]);return{focusProps:{onFocus:!e&&(n||i||r)?o:void 0,onBlur:!e&&(r||i)?a:void 0}}}let Sm=null,UE=new Set,pE=new Map,My=!1,a3=!1;const Bxe={Tab:!0,Escape:!0};function AA(t,e){for(let n of UE)n(t,e)}function Uxe(t){return!(t.metaKey||!bg()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function Hk(t){My=!0,Uxe(t)&&(Sm="keyboard",AA("keyboard",t))}function rc(t){Sm="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(My=!0,AA("pointer",t))}function kQ(t){e3(t)&&(My=!0,Sm="virtual")}function PQ(t){t.target===window||t.target===document||(!My&&!a3&&(Sm="virtual",AA("virtual",t)),My=!1,a3=!1)}function AQ(){My=!1,a3=!0}function Gk(t){if(typeof window>"u"||pE.get(oc(t)))return;const e=oc(t),n=Ri(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){My=!0,r.apply(this,arguments)},n.addEventListener("keydown",Hk,!0),n.addEventListener("keyup",Hk,!0),n.addEventListener("click",kQ,!0),e.addEventListener("focus",PQ,!0),e.addEventListener("blur",AQ,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",rc,!0),n.addEventListener("pointermove",rc,!0),n.addEventListener("pointerup",rc,!0)):(n.addEventListener("mousedown",rc,!0),n.addEventListener("mousemove",rc,!0),n.addEventListener("mouseup",rc,!0)),e.addEventListener("beforeunload",()=>{RQ(t)},{once:!0}),pE.set(e,{focus:r})}const RQ=(t,e)=>{const n=oc(t),r=Ri(t);e&&r.removeEventListener("DOMContentLoaded",e),pE.has(n)&&(n.HTMLElement.prototype.focus=pE.get(n).focus,r.removeEventListener("keydown",Hk,!0),r.removeEventListener("keyup",Hk,!0),r.removeEventListener("click",kQ,!0),n.removeEventListener("focus",PQ,!0),n.removeEventListener("blur",AQ,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",rc,!0),r.removeEventListener("pointermove",rc,!0),r.removeEventListener("pointerup",rc,!0)):(r.removeEventListener("mousedown",rc,!0),r.removeEventListener("mousemove",rc,!0),r.removeEventListener("mouseup",rc,!0)),pE.delete(n))};function Wxe(t){const e=Ri(t);let n;return e.readyState!=="loading"?Gk(t):(n=()=>{Gk(t)},e.addEventListener("DOMContentLoaded",n)),()=>RQ(t,n)}typeof document<"u"&&Wxe();function Tw(){return Sm!=="pointer"}function Kk(){return Sm}function Z5(t){Sm=t,AA(t,null)}function zxe(){Gk();let[t,e]=R.useState(Sm);return R.useEffect(()=>{let n=()=>{e(Sm)};return UE.add(n),()=>{UE.delete(n)}},[]),Qw()?null:t}const Hxe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Gxe(t,e,n){var r;const i=typeof window<"u"?oc(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?oc(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,s=typeof window<"u"?oc(n==null?void 0:n.target).HTMLElement:HTMLElement,o=typeof window<"u"?oc(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||(n==null?void 0:n.target)instanceof i&&!Hxe.has(n==null||(r=n.target)===null||r===void 0?void 0:r.type)||(n==null?void 0:n.target)instanceof a||(n==null?void 0:n.target)instanceof s&&(n==null?void 0:n.target.isContentEditable),!(t&&e==="keyboard"&&n instanceof o&&!Bxe[n.key])}function Kxe(t,e,n){Gk(),R.useEffect(()=>{let r=(i,a)=>{Gxe(!!(n!=null&&n.isTextInput),i,a)&&t(Tw())};return UE.add(r),()=>{UE.delete(r)}},e)}function BN(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,a=R.useRef({isFocusWithin:!1}),s=R.useCallback(c=>{a.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(a.current.isFocusWithin=!1,n&&n(c),i&&i(!1))},[n,i,a]),o=DQ(s),l=R.useCallback(c=>{!a.current.isFocusWithin&&document.activeElement===c.target&&(r&&r(c),i&&i(!0),a.current.isFocusWithin=!0,o(c))},[r,i,o]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:s}}}let Yk=!1,xI=0;function s3(){Yk=!0,setTimeout(()=>{Yk=!1},50)}function E7(t){t.pointerType==="touch"&&s3()}function Yxe(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",E7):document.addEventListener("touchend",s3),xI++,()=>{xI--,!(xI>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",E7):document.removeEventListener("touchend",s3))}}function Pl(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[a,s]=R.useState(!1),o=R.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;R.useEffect(Yxe,[]);let{hoverProps:l,triggerHoverEnd:c}=R.useMemo(()=>{let f=(p,v)=>{if(o.pointerType=v,i||v==="touch"||o.isHovered||!p.currentTarget.contains(p.target))return;o.isHovered=!0;let y=p.currentTarget;o.target=y,e&&e({type:"hoverstart",target:y,pointerType:v}),n&&n(!0),s(!0)},h=(p,v)=>{if(o.pointerType="",o.target=null,v==="touch"||!o.isHovered)return;o.isHovered=!1;let y=p.currentTarget;r&&r({type:"hoverend",target:y,pointerType:v}),n&&n(!1),s(!1)},m={};return typeof PointerEvent<"u"?(m.onPointerEnter=p=>{Yk&&p.pointerType==="mouse"||f(p,p.pointerType)},m.onPointerLeave=p=>{!i&&p.currentTarget.contains(p.target)&&h(p,p.pointerType)}):(m.onTouchStart=()=>{o.ignoreEmulatedMouseEvents=!0},m.onMouseEnter=p=>{!o.ignoreEmulatedMouseEvents&&!Yk&&f(p,"mouse"),o.ignoreEmulatedMouseEvents=!1},m.onMouseLeave=p=>{!i&&p.currentTarget.contains(p.target)&&h(p,"mouse")}),{hoverProps:m,triggerHoverEnd:h}},[e,n,r,i,o]);return R.useEffect(()=>{i&&c({currentTarget:o.target},o.pointerType)},[i]),{hoverProps:l,isHovered:a}}function Jxe(t){let{ref:e,onInteractOutside:n,isDisabled:r,onInteractOutsideStart:i}=t,a=R.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),s=Us(l=>{n&&wT(l,e)&&(i&&i(l),a.current.isPointerDown=!0)}),o=Us(l=>{n&&n(l)});R.useEffect(()=>{let l=a.current;if(r)return;const c=e.current,f=Ri(c);if(typeof PointerEvent<"u"){let h=m=>{l.isPointerDown&&wT(m,e)&&o(m),l.isPointerDown=!1};return f.addEventListener("pointerdown",s,!0),f.addEventListener("pointerup",h,!0),()=>{f.removeEventListener("pointerdown",s,!0),f.removeEventListener("pointerup",h,!0)}}else{let h=p=>{l.ignoreEmulatedMouseEvents?l.ignoreEmulatedMouseEvents=!1:l.isPointerDown&&wT(p,e)&&o(p),l.isPointerDown=!1},m=p=>{l.ignoreEmulatedMouseEvents=!0,l.isPointerDown&&wT(p,e)&&o(p),l.isPointerDown=!1};return f.addEventListener("mousedown",s,!0),f.addEventListener("mouseup",h,!0),f.addEventListener("touchstart",s,!0),f.addEventListener("touchend",m,!0),()=>{f.removeEventListener("mousedown",s,!0),f.removeEventListener("mouseup",h,!0),f.removeEventListener("touchstart",s,!0),f.removeEventListener("touchend",m,!0)}}},[e,r,s,o])}function wT(t,e){if(t.button>0)return!1;if(t.target){const n=t.target.ownerDocument;if(!n||!n.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return e.current&&!e.current.contains(t.target)}function N7(t){if(!t)return;let e=!0;return n=>{let r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){e=!1}};t(r),e&&n.stopPropagation()}}function Q5(t){return{keyboardProps:t.isDisabled?{}:{onKeyDown:N7(t.onKeyDown),onKeyUp:N7(t.onKeyUp)}}}function OQ(t){let{onMoveStart:e,onMove:n,onMoveEnd:r}=t,i=R.useRef({didMove:!1,lastPosition:null,id:null}),{addGlobalListener:a,removeGlobalListener:s}=FN(),o=Us((f,h,m,p)=>{m===0&&p===0||(i.current.didMove||(i.current.didMove=!0,e==null||e({type:"movestart",pointerType:h,shiftKey:f.shiftKey,metaKey:f.metaKey,ctrlKey:f.ctrlKey,altKey:f.altKey})),n==null||n({type:"move",pointerType:h,deltaX:m,deltaY:p,shiftKey:f.shiftKey,metaKey:f.metaKey,ctrlKey:f.ctrlKey,altKey:f.altKey}))}),l=Us((f,h)=>{YS(),i.current.didMove&&(r==null||r({type:"moveend",pointerType:h,shiftKey:f.shiftKey,metaKey:f.metaKey,ctrlKey:f.ctrlKey,altKey:f.altKey}))});return{moveProps:R.useMemo(()=>{let f={},h=()=>{i3(),i.current.didMove=!1};if(typeof PointerEvent>"u"){let p=S=>{if(S.button===0){var _,N,k,P;o(S,"mouse",S.pageX-((k=(_=i.current.lastPosition)===null||_===void 0?void 0:_.pageX)!==null&&k!==void 0?k:0),S.pageY-((P=(N=i.current.lastPosition)===null||N===void 0?void 0:N.pageY)!==null&&P!==void 0?P:0)),i.current.lastPosition={pageX:S.pageX,pageY:S.pageY}}},v=S=>{S.button===0&&(l(S,"mouse"),s(window,"mousemove",p,!1),s(window,"mouseup",v,!1))};f.onMouseDown=S=>{S.button===0&&(h(),S.stopPropagation(),S.preventDefault(),i.current.lastPosition={pageX:S.pageX,pageY:S.pageY},a(window,"mousemove",p,!1),a(window,"mouseup",v,!1))};let y=S=>{let _=[...S.changedTouches].findIndex(({identifier:A})=>A===i.current.id);if(_>=0){var N,k;let{pageX:A,pageY:T}=S.changedTouches[_];var P,O;o(S,"touch",A-((P=(N=i.current.lastPosition)===null||N===void 0?void 0:N.pageX)!==null&&P!==void 0?P:0),T-((O=(k=i.current.lastPosition)===null||k===void 0?void 0:k.pageY)!==null&&O!==void 0?O:0)),i.current.lastPosition={pageX:A,pageY:T}}},x=S=>{[...S.changedTouches].findIndex(({identifier:N})=>N===i.current.id)>=0&&(l(S,"touch"),i.current.id=null,s(window,"touchmove",y),s(window,"touchend",x),s(window,"touchcancel",x))};f.onTouchStart=S=>{if(S.changedTouches.length===0||i.current.id!=null)return;let{pageX:_,pageY:N,identifier:k}=S.changedTouches[0];h(),S.stopPropagation(),S.preventDefault(),i.current.lastPosition={pageX:_,pageY:N},i.current.id=k,a(window,"touchmove",y,!1),a(window,"touchend",x,!1),a(window,"touchcancel",x,!1)}}else{let p=y=>{if(y.pointerId===i.current.id){var x,S;let k=y.pointerType||"mouse";var _,N;o(y,k,y.pageX-((_=(x=i.current.lastPosition)===null||x===void 0?void 0:x.pageX)!==null&&_!==void 0?_:0),y.pageY-((N=(S=i.current.lastPosition)===null||S===void 0?void 0:S.pageY)!==null&&N!==void 0?N:0)),i.current.lastPosition={pageX:y.pageX,pageY:y.pageY}}},v=y=>{if(y.pointerId===i.current.id){let x=y.pointerType||"mouse";l(y,x),i.current.id=null,s(window,"pointermove",p,!1),s(window,"pointerup",v,!1),s(window,"pointercancel",v,!1)}};f.onPointerDown=y=>{y.button===0&&i.current.id==null&&(h(),y.stopPropagation(),y.preventDefault(),i.current.lastPosition={pageX:y.pageX,pageY:y.pageY},i.current.id=y.pointerId,a(window,"pointermove",p,!1),a(window,"pointerup",v,!1),a(window,"pointercancel",v,!1))}}let m=(p,v,y)=>{h(),o(p,"keyboard",v,y),l(p,"keyboard")};return f.onKeyDown=p=>{switch(p.key){case"Left":case"ArrowLeft":p.preventDefault(),p.stopPropagation(),m(p,-1,0);break;case"Right":case"ArrowRight":p.preventDefault(),p.stopPropagation(),m(p,1,0);break;case"Up":case"ArrowUp":p.preventDefault(),p.stopPropagation(),m(p,0,-1);break;case"Down":case"ArrowDown":p.preventDefault(),p.stopPropagation(),m(p,0,1);break}},f},[i,a,s,o,l])}}const qxe=500;function jQ(t){let{isDisabled:e,onLongPressStart:n,onLongPressEnd:r,onLongPress:i,threshold:a=qxe,accessibilityDescription:s}=t;const o=R.useRef();let{addGlobalListener:l,removeGlobalListener:c}=FN(),{pressProps:f}=Od({isDisabled:e,onPressStart(m){if(m.continuePropagation(),(m.pointerType==="mouse"||m.pointerType==="touch")&&(n&&n({...m,type:"longpressstart"}),o.current=setTimeout(()=>{m.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),i&&i({...m,type:"longpress"}),o.current=void 0},a),m.pointerType==="touch")){let p=v=>{v.preventDefault()};l(m.target,"contextmenu",p,{once:!0}),l(window,"pointerup",()=>{setTimeout(()=>{c(m.target,"contextmenu",p)},30)},{once:!0})}},onPressEnd(m){o.current&&clearTimeout(o.current),r&&(m.pointerType==="mouse"||m.pointerType==="touch")&&r({...m,type:"longpressend"})}}),h=gxe(i&&!e?s:void 0);return{longPressProps:kt(f,h)}}function xg(t){const e=Ri(t);if(Kk()==="virtual"){let n=e.activeElement;gQ(()=>{e.activeElement===n&&t.isConnected&&Lf(t)})}else Lf(t)}function Xxe(t){const e=oc(t);if(!(t instanceof e.HTMLElement)&&!(t instanceof e.SVGElement))return!1;let{display:n,visibility:r}=t.style,i=n!=="none"&&r!=="hidden"&&r!=="collapse";if(i){const{getComputedStyle:a}=t.ownerDocument.defaultView;let{display:s,visibility:o}=a(t);i=s!=="none"&&o!=="hidden"&&o!=="collapse"}return i}function Zxe(t,e){return!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&(t.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function IQ(t,e){return t.nodeName!=="#comment"&&Xxe(t)&&Zxe(t,e)&&(!t.parentElement||IQ(t.parentElement,t))}const _7=it.createContext(null);let Ci=null;function MQ(t){let{children:e,contain:n,restoreFocus:r,autoFocus:i}=t,a=R.useRef(null),s=R.useRef(null),o=R.useRef([]),{parentNode:l}=R.useContext(_7)||{},c=R.useMemo(()=>new o3({scopeRef:o}),[o]);Bi(()=>{let m=l||ka.root;if(ka.getTreeNode(m.scopeRef)&&Ci&&!qk(Ci,m.scopeRef)){let p=ka.getTreeNode(Ci);p&&(m=p)}m.addChild(c),ka.addNode(c)},[c,l]),Bi(()=>{let m=ka.getTreeNode(o);m&&(m.contain=!!n)},[n]),Bi(()=>{var m;let p=(m=a.current)===null||m===void 0?void 0:m.nextSibling,v=[];for(;p&&p!==s.current;)v.push(p),p=p.nextSibling;o.current=v},[e]),a1e(o,r,n),n1e(o,n),o1e(o,r,n),i1e(o,i),R.useEffect(()=>{const m=Ri(o.current?o.current[0]:void 0).activeElement;let p=null;if(ao(m,o.current)){for(let v of ka.traverse())v.scopeRef&&ao(m,v.scopeRef.current)&&(p=v);p===ka.getTreeNode(o)&&(Ci=p.scopeRef)}},[o]),Bi(()=>()=>{var m,p,v;let y=(v=(p=ka.getTreeNode(o))===null||p===void 0||(m=p.parent)===null||m===void 0?void 0:m.scopeRef)!==null&&v!==void 0?v:null;(o===Ci||qk(o,Ci))&&(!y||ka.getTreeNode(y))&&(Ci=y),ka.removeTreeNode(o)},[o]);let f=R.useMemo(()=>Qxe(o),[]),h=R.useMemo(()=>({focusManager:f,parentNode:c}),[c,f]);return it.createElement(_7.Provider,{value:h},it.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),e,it.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:s}))}function Qxe(t){return{focusNext(e={}){let n=t.current,{from:r,tabbable:i,wrap:a,accept:s}=e,o=r||Ri(n[0]).activeElement,l=n[0].previousElementSibling,c=fy(n),f=Ff(c,{tabbable:i,accept:s},n);f.currentNode=ao(o,n)?o:l;let h=f.nextNode();return!h&&a&&(f.currentNode=l,h=f.nextNode()),h&&lm(h,!0),h},focusPrevious(e={}){let n=t.current,{from:r,tabbable:i,wrap:a,accept:s}=e,o=r||Ri(n[0]).activeElement,l=n[n.length-1].nextElementSibling,c=fy(n),f=Ff(c,{tabbable:i,accept:s},n);f.currentNode=ao(o,n)?o:l;let h=f.previousNode();return!h&&a&&(f.currentNode=l,h=f.previousNode()),h&&lm(h,!0),h},focusFirst(e={}){let n=t.current,{tabbable:r,accept:i}=e,a=fy(n),s=Ff(a,{tabbable:r,accept:i},n);s.currentNode=n[0].previousElementSibling;let o=s.nextNode();return o&&lm(o,!0),o},focusLast(e={}){let n=t.current,{tabbable:r,accept:i}=e,a=fy(n),s=Ff(a,{tabbable:r,accept:i},n);s.currentNode=n[n.length-1].nextElementSibling;let o=s.previousNode();return o&&lm(o,!0),o}}}const e$=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],e1e=e$.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";e$.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const t1e=e$.join(':not([hidden]):not([tabindex="-1"]),');function fy(t){return t[0].parentElement}function JS(t){let e=ka.getTreeNode(Ci);for(;e&&e.scopeRef!==t;){if(e.contain)return!1;e=e.parent}return!0}function n1e(t,e){let n=R.useRef(),r=R.useRef();Bi(()=>{let i=t.current;if(!e){r.current&&(cancelAnimationFrame(r.current),r.current=void 0);return}const a=Ri(i?i[0]:void 0);let s=c=>{if(c.key!=="Tab"||c.altKey||c.ctrlKey||c.metaKey||!JS(t)||c.isComposing)return;let f=a.activeElement,h=t.current;if(!h||!ao(f,h))return;let m=fy(h),p=Ff(m,{tabbable:!0},h);if(!f)return;p.currentNode=f;let v=c.shiftKey?p.previousNode():p.nextNode();v||(p.currentNode=c.shiftKey?h[h.length-1].nextElementSibling:h[0].previousElementSibling,v=c.shiftKey?p.previousNode():p.nextNode()),c.preventDefault(),v&&lm(v,!0)},o=c=>{(!Ci||qk(Ci,t))&&ao(c.target,t.current)?(Ci=t,n.current=c.target):JS(t)&&!Jk(c.target,t)?n.current?n.current.focus():Ci&&Ci.current&&Xk(Ci.current):JS(t)&&(n.current=c.target)},l=c=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{if(a.activeElement&&JS(t)&&!Jk(a.activeElement,t))if(Ci=t,a.body.contains(c.target)){var f;n.current=c.target,(f=n.current)===null||f===void 0||f.focus()}else Ci.current&&Xk(Ci.current)})};return a.addEventListener("keydown",s,!1),a.addEventListener("focusin",o,!1),i==null||i.forEach(c=>c.addEventListener("focusin",o,!1)),i==null||i.forEach(c=>c.addEventListener("focusout",l,!1)),()=>{a.removeEventListener("keydown",s,!1),a.removeEventListener("focusin",o,!1),i==null||i.forEach(c=>c.removeEventListener("focusin",o,!1)),i==null||i.forEach(c=>c.removeEventListener("focusout",l,!1))}},[t,e]),Bi(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function VQ(t){return Jk(t)}function ao(t,e){return!t||!e?!1:e.some(n=>n.contains(t))}function Jk(t,e=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of ka.traverse(ka.getTreeNode(e)))if(n&&ao(t,n.current))return!0;return!1}function r1e(t){return Jk(t,Ci)}function qk(t,e){var n;let r=(n=ka.getTreeNode(e))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===t)return!0;r=r.parent}return!1}function lm(t,e=!1){if(t!=null&&!e)try{xg(t)}catch{}else if(t!=null)try{t.focus()}catch{}}function Xk(t,e=!0){let n=t[0].previousElementSibling,r=fy(t),i=Ff(r,{tabbable:e},t);i.currentNode=n;let a=i.nextNode();e&&!a&&(r=fy(t),i=Ff(r,{tabbable:!1},t),i.currentNode=n,a=i.nextNode()),lm(a)}function i1e(t,e){const n=it.useRef(e);R.useEffect(()=>{if(n.current){Ci=t;const r=Ri(t.current?t.current[0]:void 0);!ao(r.activeElement,Ci.current)&&t.current&&Xk(t.current)}n.current=!1},[t])}function a1e(t,e,n){Bi(()=>{if(e||n)return;let r=t.current;const i=Ri(r?r[0]:void 0);let a=s=>{let o=s.target;ao(o,t.current)?Ci=t:VQ(o)||(Ci=null)};return i.addEventListener("focusin",a,!1),r==null||r.forEach(s=>s.addEventListener("focusin",a,!1)),()=>{i.removeEventListener("focusin",a,!1),r==null||r.forEach(s=>s.removeEventListener("focusin",a,!1))}},[t,e,n])}function s1e(t){let e=ka.getTreeNode(Ci);for(;e&&e.scopeRef!==t;){if(e.nodeToRestore)return!1;e=e.parent}return(e==null?void 0:e.scopeRef)===t}function o1e(t,e,n){const r=R.useRef(typeof document<"u"?Ri(t.current?t.current[0]:void 0).activeElement:null);Bi(()=>{let i=t.current;const a=Ri(i?i[0]:void 0);if(!e||n)return;let s=()=>{(!Ci||qk(Ci,t))&&ao(a.activeElement,t.current)&&(Ci=t)};return a.addEventListener("focusin",s,!1),i==null||i.forEach(o=>o.addEventListener("focusin",s,!1)),()=>{a.removeEventListener("focusin",s,!1),i==null||i.forEach(o=>o.removeEventListener("focusin",s,!1))}},[t,n]),Bi(()=>{const i=Ri(t.current?t.current[0]:void 0);if(!e)return;let a=s=>{if(s.key!=="Tab"||s.altKey||s.ctrlKey||s.metaKey||!JS(t)||s.isComposing)return;let o=i.activeElement;if(!ao(o,t.current))return;let l=ka.getTreeNode(t);if(!l)return;let c=l.nodeToRestore,f=Ff(i.body,{tabbable:!0});f.currentNode=o;let h=s.shiftKey?f.previousNode():f.nextNode();if((!c||!i.body.contains(c)||c===i.body)&&(c=void 0,l.nodeToRestore=void 0),(!h||!ao(h,t.current))&&c){f.currentNode=c;do h=s.shiftKey?f.previousNode():f.nextNode();while(ao(h,t.current));s.preventDefault(),s.stopPropagation(),h?lm(h,!0):VQ(c)?lm(c,!0):o.blur()}};return n||i.addEventListener("keydown",a,!0),()=>{n||i.removeEventListener("keydown",a,!0)}},[t,e,n]),Bi(()=>{const i=Ri(t.current?t.current[0]:void 0);if(!e)return;let a=ka.getTreeNode(t);if(a){var s;return a.nodeToRestore=(s=r.current)!==null&&s!==void 0?s:void 0,()=>{let o=ka.getTreeNode(t);if(!o)return;let l=o.nodeToRestore;if(e&&l&&(ao(i.activeElement,t.current)||i.activeElement===i.body&&s1e(t))){let c=ka.clone();requestAnimationFrame(()=>{if(i.activeElement===i.body){let f=c.getTreeNode(t);for(;f;){if(f.nodeToRestore&&f.nodeToRestore.isConnected){lm(f.nodeToRestore);return}f=f.parent}for(f=c.getTreeNode(t);f;){if(f.scopeRef&&f.scopeRef.current&&ka.getTreeNode(f.scopeRef)){Xk(f.scopeRef.current,!0);return}f=f.parent}}})}}}},[t,e])}function Ff(t,e,n){let r=e!=null&&e.tabbable?t1e:e1e,i=Ri(t).createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var s;return!(e==null||(s=e.from)===null||s===void 0)&&s.contains(a)?NodeFilter.FILTER_REJECT:a.matches(r)&&IQ(a)&&(!n||ao(a,n))&&(!(e!=null&&e.accept)||e.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e!=null&&e.from&&(i.currentNode=e.from),i}class t${get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,n,r){let i=this.fastMap.get(n??null);if(!i)return;let a=new o3({scopeRef:e});i.addChild(a),a.parent=i,this.fastMap.set(e,a),r&&(a.nodeToRestore=r)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let n=this.fastMap.get(e);if(!n)return;let r=n.parent;for(let a of this.traverse())a!==n&&n.nodeToRestore&&a.nodeToRestore&&n.scopeRef&&n.scopeRef.current&&ao(a.nodeToRestore,n.scopeRef.current)&&(a.nodeToRestore=n.nodeToRestore);let i=n.children;r&&(r.removeChild(n),i.size>0&&i.forEach(a=>r&&r.addChild(a))),this.fastMap.delete(n.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let n of e.children)yield*this.traverse(n)}clone(){var e;let n=new t$;var r;for(let i of this.traverse())n.addTreeNode(i.scopeRef,(r=(e=i.parent)===null||e===void 0?void 0:e.scopeRef)!==null&&r!==void 0?r:null,i.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new o3({scopeRef:null}),this.fastMap.set(null,this.root)}}class o3{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let ka=new t$;function Bo(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=R.useRef({isFocused:!1,isFocusVisible:e||Tw()}),[a,s]=R.useState(!1),[o,l]=R.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=R.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),f=R.useCallback(p=>{i.current.isFocused=p,s(p),c()},[c]);Kxe(p=>{i.current.isFocusVisible=p,c()},[],{isTextInput:n});let{focusProps:h}=X5({isDisabled:r,onFocusChange:f}),{focusWithinProps:m}=BN({isDisabled:!r,onFocusWithinChange:f});return{isFocused:a,isFocusVisible:o,focusProps:r?m:h}}let l1e=it.createContext(null);function u1e(t){let e=R.useContext(l1e)||{};vQ(e,t);let{ref:n,...r}=e;return r}function UN(t,e){let{focusProps:n}=X5(t),{keyboardProps:r}=Q5(t),i=kt(n,r),a=u1e(e),s=t.isDisabled?{}:a,o=R.useRef(t.autoFocus);return R.useEffect(()=>{o.current&&e.current&&xg(e.current),o.current=!1},[e]),{focusableProps:kt({...i,tabIndex:t.excludeFromTabOrder&&!t.isDisabled?-1:void 0},s)}}function c1e(t,e){let n=e==null?void 0:e.isDisabled,[r,i]=R.useState(!1);return Bi(()=>{if(t!=null&&t.current&&!n){let a=()=>{if(t.current){let o=Ff(t.current,{tabbable:!0});i(!!o.nextNode())}};a();let s=new MutationObserver(a);return s.observe(t.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{s.disconnect()}}}),n?!1:r}const Jh=[];function n$(t,e){let{onClose:n,shouldCloseOnBlur:r,isOpen:i,isDismissable:a=!1,isKeyboardDismissDisabled:s=!1,shouldCloseOnInteractOutside:o}=t;R.useEffect(()=>(i&&Jh.push(e),()=>{let v=Jh.indexOf(e);v>=0&&Jh.splice(v,1)}),[i,e]);let l=()=>{Jh[Jh.length-1]===e&&n&&n()},c=v=>{(!o||o(v.target))&&Jh[Jh.length-1]===e&&(v.stopPropagation(),v.preventDefault())},f=v=>{(!o||o(v.target))&&(Jh[Jh.length-1]===e&&(v.stopPropagation(),v.preventDefault()),l())},h=v=>{v.key==="Escape"&&!s&&!v.nativeEvent.isComposing&&(v.stopPropagation(),v.preventDefault(),l())};Jxe({ref:e,onInteractOutside:a&&i?f:null,onInteractOutsideStart:c});let{focusWithinProps:m}=BN({isDisabled:!r,onBlurWithin:v=>{!v.relatedTarget||r1e(v.relatedTarget)||(!o||o(v.relatedTarget))&&n()}}),p=v=>{v.target===v.currentTarget&&v.preventDefault()};return{overlayProps:{onKeyDown:h,...m},underlayProps:{onPointerDown:p}}}function $Q(t,e,n){let{type:r}=t,{isOpen:i}=e;R.useEffect(()=>{n&&n.current&&EQ.set(n.current,e.close)});let a;r==="menu"?a=!0:r==="listbox"&&(a="listbox");let s=dc();return{triggerProps:{"aria-haspopup":a,"aria-expanded":i,"aria-controls":i?s:null,onPress:e.toggle},overlayProps:{id:s}}}const SI=typeof document<"u"&&window.visualViewport,d1e=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let xT=0,EI;function f1e(t={}){let{isDisabled:e}=t;Bi(()=>{if(!e)return xT++,xT===1&&(DA()?EI=m1e():EI=h1e()),()=>{xT--,xT===0&&EI()}},[e])}function h1e(){return ho(Z0(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),Z0(document.documentElement,"overflow","hidden"))}function m1e(){let t,e,n=c=>{t=yQ(c.target,!0),!(t===document.documentElement&&t===document.body)&&t instanceof HTMLElement&&window.getComputedStyle(t).overscrollBehavior==="auto"&&(e=Z0(t,"overscrollBehavior","contain"))},r=c=>{if(!t||t===document.documentElement||t===document.body){c.preventDefault();return}t.scrollHeight===t.clientHeight&&t.scrollWidth===t.clientWidth&&c.preventDefault()},i=c=>{let f=c.target;T7(f)&&f!==document.activeElement&&(c.preventDefault(),o(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""})),e&&e()},a=c=>{let f=c.target;T7(f)&&(o(),f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",SI&&(SI.height<window.innerHeight?requestAnimationFrame(()=>{C7(f)}):SI.addEventListener("resize",()=>C7(f),{once:!0}))}))},s=null,o=()=>{if(s)return;let c=()=>{window.scrollTo(0,0)},f=window.pageXOffset,h=window.pageYOffset;s=ho(cS(window,"scroll",c),Z0(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),Z0(document.documentElement,"overflow","hidden"),Z0(document.body,"marginTop",`-${h}px`),()=>{window.scrollTo(f,h)}),window.scrollTo(0,0)},l=ho(cS(document,"touchstart",n,{passive:!1,capture:!0}),cS(document,"touchmove",r,{passive:!1,capture:!0}),cS(document,"touchend",i,{passive:!1,capture:!0}),cS(document,"focus",a,!0));return()=>{e==null||e(),s==null||s(),l()}}function Z0(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function cS(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function C7(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let n=yQ(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let r=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top;i>r+t.clientHeight&&(n.scrollTop+=i-r)}t=n.parentElement}}function T7(t){return t instanceof HTMLInputElement&&!d1e.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}const l3=it.createContext(null);function p1e(t){let{children:e}=t,n=R.useContext(l3),[r,i]=R.useState(0),a=R.useMemo(()=>({parent:n,modalCount:r,addModal(){i(s=>s+1),n&&n.addModal()},removeModal(){i(s=>s-1),n&&n.removeModal()}}),[n,r]);return it.createElement(l3.Provider,{value:a},e)}function g1e(){let t=R.useContext(l3);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:null}}}function v1e(t){let{modalProviderProps:e}=g1e();return it.createElement("div",{"data-overlay-container":!0,...t,...e})}function LQ(t){return it.createElement(p1e,null,it.createElement(v1e,t))}function D7(t){let e=Qw(),{portalContainer:n=e?null:document.body,...r}=t;if(it.useEffect(()=>{if(n!=null&&n.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[n]),!n)return null;let i=it.createElement(LQ,r);return _A.createPortal(i,n)}var FQ={};FQ={dismiss:""};var BQ={};BQ={dismiss:""};var UQ={};UQ={dismiss:"Odstranit"};var WQ={};WQ={dismiss:"Luk"};var zQ={};zQ={dismiss:"Schlieen"};var HQ={};HQ={dismiss:""};var GQ={};GQ={dismiss:"Dismiss"};var KQ={};KQ={dismiss:"Descartar"};var YQ={};YQ={dismiss:"Lpeta"};var JQ={};JQ={dismiss:"Hylk"};var qQ={};qQ={dismiss:"Rejeter"};var XQ={};XQ={dismiss:""};var ZQ={};ZQ={dismiss:"Odbaci"};var QQ={};QQ={dismiss:"Elutasts"};var eee={};eee={dismiss:"Ignora"};var tee={};tee={dismiss:""};var nee={};nee={dismiss:""};var ree={};ree={dismiss:"Atmesti"};var iee={};iee={dismiss:"Nerdt"};var aee={};aee={dismiss:"Lukk"};var see={};see={dismiss:"Negeren"};var oee={};oee={dismiss:"Zignoruj"};var lee={};lee={dismiss:"Descartar"};var uee={};uee={dismiss:"Dispensar"};var cee={};cee={dismiss:"Revocare"};var dee={};dee={dismiss:""};var fee={};fee={dismiss:"Zrui"};var hee={};hee={dismiss:"Opusti"};var mee={};mee={dismiss:"Odbaci"};var pee={};pee={dismiss:"Avvisa"};var gee={};gee={dismiss:"Kapat"};var vee={};vee={dismiss:""};var yee={};yee={dismiss:""};var bee={};bee={dismiss:""};var wee={};wee={"ar-AE":FQ,"bg-BG":BQ,"cs-CZ":UQ,"da-DK":WQ,"de-DE":zQ,"el-GR":HQ,"en-US":GQ,"es-ES":KQ,"et-EE":YQ,"fi-FI":JQ,"fr-FR":qQ,"he-IL":XQ,"hr-HR":ZQ,"hu-HU":QQ,"it-IT":eee,"ja-JP":tee,"ko-KR":nee,"lt-LT":ree,"lv-LV":iee,"nb-NO":aee,"nl-NL":see,"pl-PL":oee,"pt-BR":lee,"pt-PT":uee,"ro-RO":cee,"ru-RU":dee,"sk-SK":fee,"sl-SI":hee,"sr-SP":mee,"sv-SE":pee,"tr-TR":gee,"uk-UA":vee,"zh-CN":yee,"zh-TW":bee};const k7={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function xee(t={}){let{style:e,isFocusable:n}=t,[r,i]=R.useState(!1),{focusWithinProps:a}=BN({isDisabled:!n,onFocusWithinChange:o=>i(o)}),s=R.useMemo(()=>r?e:e?{...k7,...e}:k7,[r]);return{visuallyHiddenProps:{...a,style:s}}}function RA(t){let{children:e,elementType:n="div",isFocusable:r,style:i,...a}=t,{visuallyHiddenProps:s}=xee(t);return it.createElement(n,kt(a,s),e)}function y1e(t){return t&&t.__esModule?t.default:t}function Dw(t){let{onDismiss:e,...n}=t,r=lQ(y1e(wee),"@react-aria/overlays"),i=PA(n,r.format("dismiss")),a=()=>{e&&e()};return it.createElement(RA,null,it.createElement("button",{...i,tabIndex:-1,onClick:a,style:{width:1,height:1}}))}let dS=new WeakMap,Ju=[];function See(t,e=document.body){let n=new Set(t),r=new Set,i=l=>{for(let m of l.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(m);let c=m=>{if(n.has(m)||r.has(m.parentElement)&&m.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let p of n)if(m.contains(p))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},f=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),h=c(l);if(h===NodeFilter.FILTER_ACCEPT&&a(l),h!==NodeFilter.FILTER_REJECT){let m=f.nextNode();for(;m!=null;)a(m),m=f.nextNode()}},a=l=>{var c;let f=(c=dS.get(l))!==null&&c!==void 0?c:0;l.getAttribute("aria-hidden")==="true"&&f===0||(f===0&&l.setAttribute("aria-hidden","true"),r.add(l),dS.set(l,f+1))};Ju.length&&Ju[Ju.length-1].disconnect(),i(e);let s=new MutationObserver(l=>{for(let c of l)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...n,...r].some(f=>f.contains(c.target))){for(let f of c.removedNodes)f instanceof Element&&(n.delete(f),r.delete(f));for(let f of c.addedNodes)(f instanceof HTMLElement||f instanceof SVGElement)&&(f.dataset.liveAnnouncer==="true"||f.dataset.reactAriaTopLayer==="true")?n.add(f):f instanceof Element&&i(f)}});s.observe(e,{childList:!0,subtree:!0});let o={observe(){s.observe(e,{childList:!0,subtree:!0})},disconnect(){s.disconnect()}};return Ju.push(o),()=>{s.disconnect();for(let l of r){let c=dS.get(l);c===1?(l.removeAttribute("aria-hidden"),dS.delete(l)):dS.set(l,c-1)}o===Ju[Ju.length-1]?(Ju.pop(),Ju.length&&Ju[Ju.length-1].observe()):Ju.splice(Ju.indexOf(o),1)}}const b1e=R.createContext({});function w1e(){var t;return(t=R.useContext(b1e))!==null&&t!==void 0?t:{}}const Eee=it.createContext(null);function r$(t){let e=Qw(),{portalContainer:n=e?null:document.body,isExiting:r}=t,[i,a]=R.useState(!1),s=R.useMemo(()=>({contain:i,setContain:a}),[i,a]),{getContainer:o}=w1e();if(!t.portalContainer&&o&&(n=o()),!n)return null;let l=t.children;return t.disableFocusManagement||(l=it.createElement(MQ,{restoreFocus:!0,contain:i&&!r},l)),l=it.createElement(Eee.Provider,{value:s},it.createElement(Lxe,null,l)),_A.createPortal(l,n)}function Nee(){let t=R.useContext(Eee),e=t==null?void 0:t.setContain;Bi(()=>{e==null||e(!0)},[e])}var _ee={exports:{}},nk={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=R,e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),v=Symbol.iterator,y="@@iterator";function x(ne){if(ne===null||typeof ne!="object")return null;var _e=v&&ne[v]||ne[y];return typeof _e=="function"?_e:null}var S=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function _(ne){{for(var _e=arguments.length,Be=new Array(_e>1?_e-1:0),Le=1;Le<_e;Le++)Be[Le-1]=arguments[Le];N("error",ne,Be)}}function N(ne,_e,Be){{var Le=S.ReactDebugCurrentFrame,Ze=Le.getStackAddendum();Ze!==""&&(_e+="%s",Be=Be.concat([Ze]));var We=Be.map(function(wt){return String(wt)});We.unshift("Warning: "+_e),Function.prototype.apply.call(console[ne],console,We)}}var k=!1,P=!1,O=!1,A=!1,T=!1,L;L=Symbol.for("react.module.reference");function B(ne){return!!(typeof ne=="string"||typeof ne=="function"||ne===r||ne===a||T||ne===i||ne===c||ne===f||A||ne===p||k||P||O||typeof ne=="object"&&ne!==null&&(ne.$$typeof===m||ne.$$typeof===h||ne.$$typeof===s||ne.$$typeof===o||ne.$$typeof===l||ne.$$typeof===L||ne.getModuleId!==void 0))}function W(ne,_e,Be){var Le=ne.displayName;if(Le)return Le;var Ze=_e.displayName||_e.name||"";return Ze!==""?Be+"("+Ze+")":Be}function Y(ne){return ne.displayName||"Context"}function V(ne){if(ne==null)return null;if(typeof ne.tag=="number"&&_("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof ne=="function")return ne.displayName||ne.name||null;if(typeof ne=="string")return ne;switch(ne){case r:return"Fragment";case n:return"Portal";case a:return"Profiler";case i:return"StrictMode";case c:return"Suspense";case f:return"SuspenseList"}if(typeof ne=="object")switch(ne.$$typeof){case o:var _e=ne;return Y(_e)+".Consumer";case s:var Be=ne;return Y(Be._context)+".Provider";case l:return W(ne,ne.render,"ForwardRef");case h:var Le=ne.displayName||null;return Le!==null?Le:V(ne.type)||"Memo";case m:{var Ze=ne,We=Ze._payload,wt=Ze._init;try{return V(wt(We))}catch{return null}}}return null}var I=Object.assign,H=0,q,F,J,Z,G,oe,ae;function te(){}te.__reactDisabledLog=!0;function re(){{if(H===0){q=console.log,F=console.info,J=console.warn,Z=console.error,G=console.group,oe=console.groupCollapsed,ae=console.groupEnd;var ne={configurable:!0,enumerable:!0,value:te,writable:!0};Object.defineProperties(console,{info:ne,log:ne,warn:ne,error:ne,group:ne,groupCollapsed:ne,groupEnd:ne})}H++}}function X(){{if(H--,H===0){var ne={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:I({},ne,{value:q}),info:I({},ne,{value:F}),warn:I({},ne,{value:J}),error:I({},ne,{value:Z}),group:I({},ne,{value:G}),groupCollapsed:I({},ne,{value:oe}),groupEnd:I({},ne,{value:ae})})}H<0&&_("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ce=S.ReactCurrentDispatcher,he;function ve(ne,_e,Be){{if(he===void 0)try{throw Error()}catch(Ze){var Le=Ze.stack.trim().match(/\n( *(at )?)/);he=Le&&Le[1]||""}return`
`+he+ne}}var Ne=!1,ke;{var Te=typeof WeakMap=="function"?WeakMap:Map;ke=new Te}function ye(ne,_e){if(!ne||Ne)return"";{var Be=ke.get(ne);if(Be!==void 0)return Be}var Le;Ne=!0;var Ze=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var We;We=ce.current,ce.current=null,re();try{if(_e){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(Dn){Le=Dn}Reflect.construct(ne,[],wt)}else{try{wt.call()}catch(Dn){Le=Dn}ne.call(wt.prototype)}}else{try{throw Error()}catch(Dn){Le=Dn}ne()}}catch(Dn){if(Dn&&Le&&typeof Dn.stack=="string"){for(var ht=Dn.stack.split(`
`),Pt=Le.stack.split(`
`),Ut=ht.length-1,Zt=Pt.length-1;Ut>=1&&Zt>=0&&ht[Ut]!==Pt[Zt];)Zt--;for(;Ut>=1&&Zt>=0;Ut--,Zt--)if(ht[Ut]!==Pt[Zt]){if(Ut!==1||Zt!==1)do if(Ut--,Zt--,Zt<0||ht[Ut]!==Pt[Zt]){var sn=`
`+ht[Ut].replace(" at new "," at ");return ne.displayName&&sn.includes("<anonymous>")&&(sn=sn.replace("<anonymous>",ne.displayName)),typeof ne=="function"&&ke.set(ne,sn),sn}while(Ut>=1&&Zt>=0);break}}}finally{Ne=!1,ce.current=We,X(),Error.prepareStackTrace=Ze}var cn=ne?ne.displayName||ne.name:"",hr=cn?ve(cn):"";return typeof ne=="function"&&ke.set(ne,hr),hr}function Ie(ne,_e,Be){return ye(ne,!1)}function Re(ne){var _e=ne.prototype;return!!(_e&&_e.isReactComponent)}function Ee(ne,_e,Be){if(ne==null)return"";if(typeof ne=="function")return ye(ne,Re(ne));if(typeof ne=="string")return ve(ne);switch(ne){case c:return ve("Suspense");case f:return ve("SuspenseList")}if(typeof ne=="object")switch(ne.$$typeof){case l:return Ie(ne.render);case h:return Ee(ne.type,_e,Be);case m:{var Le=ne,Ze=Le._payload,We=Le._init;try{return Ee(We(Ze),_e,Be)}catch{}}}return""}var $e=Object.prototype.hasOwnProperty,He={},gt=S.ReactDebugCurrentFrame;function Ye(ne){if(ne){var _e=ne._owner,Be=Ee(ne.type,ne._source,_e?_e.type:null);gt.setExtraStackFrame(Be)}else gt.setExtraStackFrame(null)}function yt(ne,_e,Be,Le,Ze){{var We=Function.call.bind($e);for(var wt in ne)if(We(ne,wt)){var ht=void 0;try{if(typeof ne[wt]!="function"){var Pt=Error((Le||"React class")+": "+Be+" type `"+wt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ne[wt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Pt.name="Invariant Violation",Pt}ht=ne[wt](_e,wt,Le,Be,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ut){ht=Ut}ht&&!(ht instanceof Error)&&(Ye(Ze),_("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Le||"React class",Be,wt,typeof ht),Ye(null)),ht instanceof Error&&!(ht.message in He)&&(He[ht.message]=!0,Ye(Ze),_("Failed %s type: %s",Be,ht.message),Ye(null))}}}var _t=Array.isArray;function St(ne){return _t(ne)}function Bt(ne){{var _e=typeof Symbol=="function"&&Symbol.toStringTag,Be=_e&&ne[Symbol.toStringTag]||ne.constructor.name||"Object";return Be}}function Nt(ne){try{return Dt(ne),!1}catch{return!0}}function Dt(ne){return""+ne}function Ae(ne){if(Nt(ne))return _("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Bt(ne)),Dt(ne)}var je=S.ReactCurrentOwner,tt={key:!0,ref:!0,__self:!0,__source:!0},Ot,qe;function ft(ne){if($e.call(ne,"ref")){var _e=Object.getOwnPropertyDescriptor(ne,"ref").get;if(_e&&_e.isReactWarning)return!1}return ne.ref!==void 0}function Wt(ne){if($e.call(ne,"key")){var _e=Object.getOwnPropertyDescriptor(ne,"key").get;if(_e&&_e.isReactWarning)return!1}return ne.key!==void 0}function an(ne,_e){typeof ne.ref=="string"&&je.current}function Un(ne,_e){{var Be=function(){Ot||(Ot=!0,_("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_e))};Be.isReactWarning=!0,Object.defineProperty(ne,"key",{get:Be,configurable:!0})}}function pn(ne,_e){{var Be=function(){qe||(qe=!0,_("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_e))};Be.isReactWarning=!0,Object.defineProperty(ne,"ref",{get:Be,configurable:!0})}}var ln=function(ne,_e,Be,Le,Ze,We,wt){var ht={$$typeof:e,type:ne,key:_e,ref:Be,props:wt,_owner:We};return ht._store={},Object.defineProperty(ht._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(ht,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Le}),Object.defineProperty(ht,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Ze}),Object.freeze&&(Object.freeze(ht.props),Object.freeze(ht)),ht};function Gt(ne,_e,Be,Le,Ze){{var We,wt={},ht=null,Pt=null;Be!==void 0&&(Ae(Be),ht=""+Be),Wt(_e)&&(Ae(_e.key),ht=""+_e.key),ft(_e)&&(Pt=_e.ref,an(_e,Ze));for(We in _e)$e.call(_e,We)&&!tt.hasOwnProperty(We)&&(wt[We]=_e[We]);if(ne&&ne.defaultProps){var Ut=ne.defaultProps;for(We in Ut)wt[We]===void 0&&(wt[We]=Ut[We])}if(ht||Pt){var Zt=typeof ne=="function"?ne.displayName||ne.name||"Unknown":ne;ht&&Un(wt,Zt),Pt&&pn(wt,Zt)}return ln(ne,ht,Pt,Ze,Le,je.current,wt)}}var Kt=S.ReactCurrentOwner,Lt=S.ReactDebugCurrentFrame;function In(ne){if(ne){var _e=ne._owner,Be=Ee(ne.type,ne._source,_e?_e.type:null);Lt.setExtraStackFrame(Be)}else Lt.setExtraStackFrame(null)}var Tn;Tn=!1;function Wr(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===e}function Mr(){{if(Kt.current){var ne=V(Kt.current.type);if(ne)return`

Check the render method of \``+ne+"`."}return""}}function Hr(ne){return""}var Ii={};function Wi(ne){{var _e=Mr();if(!_e){var Be=typeof ne=="string"?ne:ne.displayName||ne.name;Be&&(_e=`

Check the top-level render call using <`+Be+">.")}return _e}}function Mi(ne,_e){{if(!ne._store||ne._store.validated||ne.key!=null)return;ne._store.validated=!0;var Be=Wi(_e);if(Ii[Be])return;Ii[Be]=!0;var Le="";ne&&ne._owner&&ne._owner!==Kt.current&&(Le=" It was passed a child from "+V(ne._owner.type)+"."),In(ne),_('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Be,Le),In(null)}}function zi(ne,_e){{if(typeof ne!="object")return;if(St(ne))for(var Be=0;Be<ne.length;Be++){var Le=ne[Be];Wr(Le)&&Mi(Le,_e)}else if(Wr(ne))ne._store&&(ne._store.validated=!0);else if(ne){var Ze=x(ne);if(typeof Ze=="function"&&Ze!==ne.entries)for(var We=Ze.call(ne),wt;!(wt=We.next()).done;)Wr(wt.value)&&Mi(wt.value,_e)}}}function xr(ne){{var _e=ne.type;if(_e==null||typeof _e=="string")return;var Be;if(typeof _e=="function")Be=_e.propTypes;else if(typeof _e=="object"&&(_e.$$typeof===l||_e.$$typeof===h))Be=_e.propTypes;else return;if(Be){var Le=V(_e);yt(Be,ne.props,"prop",Le,ne)}else if(_e.PropTypes!==void 0&&!Tn){Tn=!0;var Ze=V(_e);_("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Ze||"Unknown")}typeof _e.getDefaultProps=="function"&&!_e.getDefaultProps.isReactClassApproved&&_("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Vr(ne){{for(var _e=Object.keys(ne.props),Be=0;Be<_e.length;Be++){var Le=_e[Be];if(Le!=="children"&&Le!=="key"){In(ne),_("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Le),In(null);break}}ne.ref!==null&&(In(ne),_("Invalid attribute `ref` supplied to `React.Fragment`."),In(null))}}var $r={};function qt(ne,_e,Be,Le,Ze,We){{var wt=B(ne);if(!wt){var ht="";(ne===void 0||typeof ne=="object"&&ne!==null&&Object.keys(ne).length===0)&&(ht+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Pt=Hr();Pt?ht+=Pt:ht+=Mr();var Ut;ne===null?Ut="null":St(ne)?Ut="array":ne!==void 0&&ne.$$typeof===e?(Ut="<"+(V(ne.type)||"Unknown")+" />",ht=" Did you accidentally export a JSX literal instead of a component?"):Ut=typeof ne,_("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ut,ht)}var Zt=Gt(ne,_e,Be,Ze,We);if(Zt==null)return Zt;if(wt){var sn=_e.children;if(sn!==void 0)if(Le)if(St(sn)){for(var cn=0;cn<sn.length;cn++)zi(sn[cn],ne);Object.freeze&&Object.freeze(sn)}else _("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else zi(sn,ne)}if($e.call(_e,"key")){var hr=V(ne),Dn=Object.keys(_e).filter(function(xi){return xi!=="key"}),gn=Dn.length>0?"{key: someKey, "+Dn.join(": ..., ")+": ...}":"{key: someKey}";if(!$r[hr+gn]){var Gr=Dn.length>0?"{"+Dn.join(": ..., ")+": ...}":"{}";_(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,gn,hr,Gr,hr),$r[hr+gn]=!0}}return ne===r?Vr(Zt):xr(Zt),Zt}}function Zn(ne,_e,Be){return qt(ne,_e,Be,!0)}function ea(ne,_e,Be){return qt(ne,_e,Be,!1)}var ue=ea,xe=Zn;nk.Fragment=r,nk.jsx=ue,nk.jsxs=xe})();_ee.exports=nk;var de=_ee.exports;const i$=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),OA=R.createContext({}),jA=R.createContext(null),a$=typeof window<"u",s$=a$?R.useLayoutEffect:R.useEffect,o$=R.createContext({strict:!1}),IA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),x1e="framerAppearId",Cee="data-"+IA(x1e),l$={skipAnimations:!1,useManualTiming:!1};function S1e(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(c){a.has(c)&&(l.schedule(c),t()),c(s)}const l={schedule:(c,f=!1,h=!1)=>{const p=h&&r?e:n;return f&&a.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),a.delete(c)},process:c=>{if(s=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(o),r=!1,i&&(i=!1,l.process(c))}};return l}const ST=["read","resolveKeyframes","update","preRender","render","postRender"],E1e=40;function Tee(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=ST.reduce((S,_)=>(S[_]=S1e(a),S),{}),{read:o,resolveKeyframes:l,update:c,preRender:f,render:h,postRender:m}=s,p=()=>{const S=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,E1e),1),i.timestamp=S,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),f.process(i),h.process(i),m.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},v=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:ST.reduce((S,_)=>{const N=s[_];return S[_]=(k,P=!1,O=!1)=>(n||v(),N.schedule(k,P,O)),S},{}),cancel:S=>{for(let _=0;_<ST.length;_++)s[ST[_]].cancel(S)},state:i,steps:s}}const{schedule:u$}=Tee(queueMicrotask,!1);function Q0(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const Dee=R.createContext({});let P7=!1;function N1e(t,e,n,r,i){var a;const{visualElement:s}=R.useContext(OA),o=R.useContext(o$),l=R.useContext(jA),c=R.useContext(i$).reducedMotion,f=R.useRef();r=r||o.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,m=R.useContext(Dee);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&C1e(f.current,n,i,m),R.useInsertionEffect(()=>{h&&h.update(n,l)});const p=n[Cee],v=R.useRef(!!p&&!window.MotionHandoffIsComplete&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,p)));return s$(()=>{h&&(h.updateFeatures(),u$.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),R.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current=!1,P7||(P7=!0,queueMicrotask(_1e)))}),h}function _1e(){window.MotionHandoffIsComplete=!0}function C1e(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:kee(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Q0(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function kee(t){if(t)return t.options.allowProjection!==!1?t.projection:kee(t.parent)}function T1e(t,e,n){return R.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Q0(n)&&(n.current=r))},[e])}function WE(t){return typeof t=="string"||Array.isArray(t)}function zE(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const c$=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],d$=["initial",...c$];function MA(t){return zE(t.animate)||d$.some(e=>WE(t[e]))}function Pee(t){return!!(MA(t)||t.variants)}function D1e(t,e){if(MA(t)){const{initial:n,animate:r}=t;return{initial:n===!1||WE(n)?n:void 0,animate:WE(r)?r:void 0}}return t.inherit!==!1?e:{}}function k1e(t){const{initial:e,animate:n}=D1e(t,R.useContext(OA));return R.useMemo(()=>({initial:e,animate:n}),[A7(e),A7(n)])}function A7(t){return Array.isArray(t)?t.join(" "):t}const R7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kw={};for(const t in R7)kw[t]={isEnabled:e=>R7[t].some(n=>!!e[n])};function u3(t){for(const e in t)kw[e]={...kw[e],...t[e]}}const HE=R.createContext({}),P1e=Symbol.for("motionComponentSymbol"),Ws=t=>t;let ex=Ws,Em=Ws;ex=(t,e)=>{!t&&typeof console<"u"&&console.warn(e)},Em=(t,e)=>{if(!t)throw new Error(e)};function A1e({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&u3(t);function a(o,l){let c;const f={...R.useContext(i$),...o,layoutId:R1e(o)},{isStatic:h}=f,m=k1e(o),p=r(o,h);if(!h&&a$){O1e(f,t);const v=j1e(f);c=v.MeasureLayout,m.visualElement=N1e(i,p,f,e,v.ProjectionNode)}return de.jsxs(OA.Provider,{value:m,children:[c&&m.visualElement?de.jsx(c,{visualElement:m.visualElement,...f}):null,n(i,o,T1e(p,m.visualElement,l),p,h,m.visualElement)]})}const s=R.forwardRef(a);return s[P1e]=i,s}function R1e({layoutId:t}){const e=R.useContext(HE).id;return e&&t!==void 0?e+"-"+t:t}function O1e(t,e){const n=R.useContext(o$).strict;if(e&&n){const r="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";t.ignoreStrict?ex(!1,r):Em(!1,r)}}function j1e(t){const{drag:e,layout:n}=kw;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function I1e(t){function e(r,i={}){return A1e(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const M1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function f$(t){return typeof t!="string"||t.includes("-")?!1:!!(M1e.indexOf(t)>-1||/[A-Z]/u.test(t))}const Zk={};function V1e(t){Object.assign(Zk,t)}const WN=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vg=new Set(WN);function Aee(t,{layout:e,layoutId:n}){return Vg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Zk[t]||t==="opacity")}const co=t=>!!(t&&t.getVelocity),Ree=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Sg=(t,e,n)=>n>e?e:n<t?t:n,tx={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gE={...tx,transform:t=>Sg(0,1,t)},ET={...tx,default:1},vE=t=>Math.round(t*1e5)/1e5,h$=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,$1e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,L1e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function zN(t){return typeof t=="string"}function F1e(t){return t==null}const HN=t=>({test:e=>zN(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Jp=HN("deg"),Wf=HN("%"),Hn=HN("px"),B1e=HN("vh"),U1e=HN("vw"),O7={...Wf,parse:t=>Wf.parse(t)/100,transform:t=>Wf.transform(t*100)},j7={...tx,transform:Math.round},m$={borderWidth:Hn,borderTopWidth:Hn,borderRightWidth:Hn,borderBottomWidth:Hn,borderLeftWidth:Hn,borderRadius:Hn,radius:Hn,borderTopLeftRadius:Hn,borderTopRightRadius:Hn,borderBottomRightRadius:Hn,borderBottomLeftRadius:Hn,width:Hn,maxWidth:Hn,height:Hn,maxHeight:Hn,size:Hn,top:Hn,right:Hn,bottom:Hn,left:Hn,padding:Hn,paddingTop:Hn,paddingRight:Hn,paddingBottom:Hn,paddingLeft:Hn,margin:Hn,marginTop:Hn,marginRight:Hn,marginBottom:Hn,marginLeft:Hn,rotate:Jp,rotateX:Jp,rotateY:Jp,rotateZ:Jp,scale:ET,scaleX:ET,scaleY:ET,scaleZ:ET,skew:Jp,skewX:Jp,skewY:Jp,distance:Hn,translateX:Hn,translateY:Hn,translateZ:Hn,x:Hn,y:Hn,z:Hn,perspective:Hn,transformPerspective:Hn,opacity:gE,originX:O7,originY:O7,originZ:Hn,zIndex:j7,backgroundPositionX:Hn,backgroundPositionY:Hn,fillOpacity:gE,strokeOpacity:gE,numOctaves:j7},W1e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},z1e=WN.length;function H1e(t,e,n){let r="",i=!0;for(let a=0;a<z1e;a++){const s=WN[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=Ree(o,m$[s]);if(!l){i=!1;const f=W1e[s]||s;r+=`${f}(${c}) `}n&&(e[s]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}const Oee=t=>e=>typeof e=="string"&&e.startsWith(t),jee=Oee("--"),G1e=Oee("var(--"),p$=t=>G1e(t)?K1e.test(t.split("/*")[0].trim()):!1,K1e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function g$(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const c=e[l];if(Vg.has(l)){s=!0;continue}else if(jee(l)){i[l]=c;continue}else{const f=Ree(c,m$[l]);l.startsWith("origin")?(o=!0,a[l]=f):r[l]=f}}if(e.transform||(s||n?r.transform=H1e(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:f=0}=a;r.transformOrigin=`${l} ${c} ${f}`}}const v$=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Iee(t,e,n){for(const r in e)!co(e[r])&&!Aee(r,n)&&(t[r]=e[r])}function Y1e({transformTemplate:t},e){return R.useMemo(()=>{const n=v$();return g$(n,e,t),Object.assign({},n.vars,n.style)},[e])}function J1e(t,e){const n=t.style||{},r={};return Iee(r,n,t),Object.assign(r,Y1e(t,e)),r}function q1e(t,e){const n={},r=J1e(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const X1e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qk(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||X1e.has(t)}let Mee=t=>!Qk(t);function Z1e(t){t&&(Mee=e=>e.startsWith("on")?!Qk(e):t(e))}try{Z1e(require("@emotion/is-prop-valid").default)}catch{}function Q1e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Mee(i)||n===!0&&Qk(i)||!e&&!Qk(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function I7(t,e,n){return typeof t=="string"?t:Hn.transform(e+n*t)}function eSe(t,e,n){const r=I7(e,t.x,t.width),i=I7(n,t.y,t.height);return`${r} ${i}`}const tSe={offset:"stroke-dashoffset",array:"stroke-dasharray"},nSe={offset:"strokeDashoffset",array:"strokeDasharray"};function rSe(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?tSe:nSe;t[a.offset]=Hn.transform(-r);const s=Hn.transform(e),o=Hn.transform(n);t[a.array]=`${s} ${o}`}function y$(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},f,h){if(g$(t,c,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p,dimensions:v}=t;m.transform&&(v&&(p.transform=m.transform),delete m.transform),v&&(i!==void 0||a!==void 0||p.transform)&&(p.transformOrigin=eSe(v,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&rSe(m,s,o,l,!1)}const Vee=()=>({...v$(),attrs:{}}),b$=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iSe(t,e,n,r){const i=R.useMemo(()=>{const a=Vee();return y$(a,e,b$(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};Iee(a,t.style,t),i.style={...a,...i.style}}return i}function aSe(t=!1){return(n,r,i,{latestValues:a},s)=>{const l=(f$(n)?iSe:q1e)(r,a,s,n),c=Q1e(r,typeof n=="string",t),f=n!==R.Fragment?{...c,...l,ref:i}:{},{children:h}=r,m=R.useMemo(()=>co(h)?h.get():h,[h]);return R.createElement(n,{...f,children:m})}}function $ee(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const Lee=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Fee(t,e,n,r){$ee(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Lee.has(i)?i:IA(i),e.attrs[i])}function w$(t,e,n){var r;const{style:i}=t,a={};for(const s in i)(co(i[s])||e.style&&co(e.style[s])||Aee(s,t)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),a}function Bee(t,e,n){const r=w$(t,e,n);for(const i in t)if(co(t[i])||co(e[i])){const a=WN.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function M7(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function x$(t,e,n,r){if(typeof e=="function"){const[i,a]=M7(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=M7(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function VA(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const c3=t=>Array.isArray(t),sSe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),oSe=t=>c3(t)?t[t.length-1]||0:t;function rk(t){const e=co(t)?t.get():t;return sSe(e)?e.toValue():e}const Uee=new Set(["opacity","clipPath","filter","transform"]);function Wee(t){if(Vg.has(t))return"transform";if(Uee.has(t))return IA(t)}function $A(t,e){t.indexOf(e)===-1&&t.push(e)}function LA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function lSe({applyWillChange:t=!1,scrapeMotionValuesFromProps:e,createRenderState:n,onMount:r},i,a,s,o){const l={latestValues:cSe(i,a,s,o?!1:t,e),renderState:n()};return r&&(l.mount=c=>r(i,c,l)),l}const zee=t=>(e,n)=>{const r=R.useContext(OA),i=R.useContext(jA),a=()=>lSe(t,e,r,i,n);return n?a():VA(a)};function uSe(t,e){const n=Wee(e);n&&$A(t,n)}function V7(t,e,n){const r=Array.isArray(e)?e:[e];for(let i=0;i<r.length;i++){const a=x$(t,r[i]);if(a){const{transitionEnd:s,transition:o,...l}=a;n(l,s)}}}function cSe(t,e,n,r,i){var a;const s={},o=[],l=r&&((a=t.style)===null||a===void 0?void 0:a.willChange)===void 0,c=i(t,{});for(const x in c)s[x]=rk(c[x]);let{initial:f,animate:h}=t;const m=MA(t),p=Pee(t);e&&p&&!m&&t.inherit!==!1&&(f===void 0&&(f=e.initial),h===void 0&&(h=e.animate));let v=n?n.initial===!1:!1;v=v||f===!1;const y=v?h:f;return y&&typeof y!="boolean"&&!zE(y)&&V7(t,y,(x,S)=>{for(const _ in x){let N=x[_];if(Array.isArray(N)){const k=v?N.length-1:0;N=N[k]}N!==null&&(s[_]=N)}for(const _ in S)s[_]=S[_]}),l&&(h&&f!==!1&&!zE(h)&&V7(t,h,x=>{for(const S in x)uSe(o,S)}),o.length&&(s.willChange=o.join(","))),s}const{schedule:hi,cancel:Nm,state:$s,steps:NI}=Tee(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ws,!0),dSe={useVisualState:zee({scrapeMotionValuesFromProps:Bee,createRenderState:Vee,onMount:(t,e,{renderState:n,latestValues:r})=>{hi.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),hi.render(()=>{y$(n,r,b$(e.tagName),t.transformTemplate),Fee(e,n)})}})},fSe={useVisualState:zee({applyWillChange:!0,scrapeMotionValuesFromProps:w$,createRenderState:v$})};function hSe(t,{forwardMotionProps:e=!1},n,r){return{...f$(t)?dSe:fSe,preloadedFeatures:n,useRender:aSe(e),createVisualElement:r,Component:t}}function um(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Hee=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function FA(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const mSe=t=>e=>Hee(e)&&t(e,FA(e));function pm(t,e,n,r){return um(t,e,mSe(n),r)}const pSe=(t,e)=>n=>e(t(n)),gm=(...t)=>t.reduce(pSe);function Gee(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const $7=Gee("dragHorizontal"),L7=Gee("dragVertical");function Kee(t){let e=!1;if(t==="y")e=L7();else if(t==="x")e=$7();else{const n=$7(),r=L7();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Yee(){const t=Kee(!0);return t?(t(),!1):!0}class $g{constructor(e){this.isMounted=!1,this.node=e}update(){}}function F7(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(a,s)=>{if(a.pointerType==="touch"||Yee())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e);const l=o[r];l&&hi.postRender(()=>l(a,s))};return pm(t.current,n,i,{passive:!t.getProps()[r]})}class gSe extends $g{mount(){this.unmount=gm(F7(this.node,!0),F7(this.node,!1))}unmount(){}}class vSe extends $g{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gm(um(this.node.current,"focus",()=>this.onFocus()),um(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Jee=(t,e)=>e?t===e?!0:Jee(t,e.parentElement):!1;function _I(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,FA(n))}class ySe extends $g{constructor(){super(...arguments),this.removeStartListeners=Ws,this.removeEndListeners=Ws,this.removeAccessibleListeners=Ws,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=pm(window,"pointerup",(o,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:f,globalTapTarget:h}=this.node.getProps(),m=!h&&!Jee(this.node.current,o.target)?f:c;m&&hi.update(()=>m(o,l))},{passive:!(r.onTap||r.onPointerUp)}),s=pm(window,"pointercancel",(o,l)=>this.cancelPress(o,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=gm(a,s),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const s=o=>{o.key!=="Enter"||!this.checkPressEnd()||_I("up",(l,c)=>{const{onTap:f}=this.node.getProps();f&&hi.postRender(()=>f(l,c))})};this.removeEndListeners(),this.removeEndListeners=um(this.node.current,"keyup",s),_I("down",(o,l)=>{this.startPress(o,l)})},n=um(this.node.current,"keydown",e),r=()=>{this.isPressing&&_I("cancel",(a,s)=>this.cancelPress(a,s))},i=um(this.node.current,"blur",r);this.removeAccessibleListeners=gm(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&hi.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Yee()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&hi.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=pm(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=um(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=gm(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const d3=new WeakMap,CI=new WeakMap,bSe=t=>{const e=d3.get(t.target);e&&e(t)},wSe=t=>{t.forEach(bSe)};function xSe({root:t,...e}){const n=t||document;CI.has(n)||CI.set(n,{});const r=CI.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wSe,{root:t,...e})),r[i]}function SSe(t,e,n){const r=xSe(e);return d3.set(t,n),r.observe(t),()=>{d3.delete(t),r.unobserve(t)}}const ESe={some:0,all:1};class NSe extends $g{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:ESe[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),m=c?f:h;m&&m(l)};return SSe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_Se(e,n))&&this.startObserver()}unmount(){}}function _Se({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const CSe={inView:{Feature:NSe},tap:{Feature:ySe},focus:{Feature:vSe},hover:{Feature:gSe}};function qee(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function BA(t,e,n){const r=t.getProps();return x$(r,e,n!==void 0?n:r.custom,t)}const zf=t=>t*1e3,vm=t=>t/1e3,TSe={type:"spring",stiffness:500,damping:25,restSpeed:10},DSe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kSe={type:"keyframes",duration:.8},PSe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ASe=(t,{keyframes:e})=>e.length>2?kSe:Vg.has(t)?t.startsWith("scale")?DSe(e[1]):TSe:PSe;function RSe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:c,...f}){return!!Object.keys(f).length}function S$(t,e){return t[e]||t.default||t}const OSe=t=>t!==null;function UA(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(OSe),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}let ik;function jSe(){ik=void 0}const hg={now:()=>(ik===void 0&&hg.set($s.isProcessing||l$.useManualTiming?$s.timestamp:performance.now()),ik),set:t=>{ik=t,queueMicrotask(jSe)}},Xee=t=>/^0[^.\s]+$/u.test(t);function ISe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Xee(t):!0}const Zee=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),MSe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VSe(t){const e=MSe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}const $Se=4;function Qee(t,e,n=1){Em(n<=$Se,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);const[r,i]=VSe(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return Zee(s)?parseFloat(s):s}return p$(i)?Qee(i,e,n+1):i}const LSe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),B7=t=>t===tx||t===Hn,U7=(t,e)=>parseFloat(t.split(", ")[e]),W7=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return U7(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?U7(a[1],t):0}},FSe=new Set(["x","y","z"]),BSe=WN.filter(t=>!FSe.has(t));function USe(t){const e=[];return BSe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Pw={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:W7(4,13),y:W7(5,14)};Pw.translateX=Pw.x;Pw.translateY=Pw.y;const ete=t=>e=>e.test(t),WSe={test:t=>t==="auto",parse:t=>t},tte=[tx,Hn,Wf,Jp,U1e,B1e,WSe],z7=t=>tte.find(ete(t)),Ny=new Set;let f3=!1,h3=!1;function nte(){if(h3){const t=Array.from(Ny).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=USe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}h3=!1,f3=!1,Ny.forEach(t=>t.complete()),Ny.clear()}function rte(){Ny.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(h3=!0)})}function zSe(){rte(),nte()}class E${constructor(e,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ny.add(this),f3||(f3=!0,hi.read(rte),hi.resolveKeyframes(nte))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ny.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ny.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const N$=(t,e)=>n=>!!(zN(n)&&L1e.test(n)&&n.startsWith(t)||e&&!F1e(n)&&Object.prototype.hasOwnProperty.call(n,e)),ite=(t,e,n)=>r=>{if(!zN(r))return r;const[i,a,s,o]=r.match(h$);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},HSe=t=>Sg(0,255,t),TI={...tx,transform:t=>Math.round(HSe(t))},hy={test:N$("rgb","red"),parse:ite("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+TI.transform(t)+", "+TI.transform(e)+", "+TI.transform(n)+", "+vE(gE.transform(r))+")"};function GSe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const m3={test:N$("#"),parse:GSe,transform:hy.transform},ew={test:N$("hsl","hue"),parse:ite("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Wf.transform(vE(e))+", "+Wf.transform(vE(n))+", "+vE(gE.transform(r))+")"},no={test:t=>hy.test(t)||m3.test(t)||ew.test(t),parse:t=>hy.test(t)?hy.parse(t):ew.test(t)?ew.parse(t):m3.parse(t),transform:t=>zN(t)?t:t.hasOwnProperty("red")?hy.transform(t):ew.transform(t)};function KSe(t){var e,n;return isNaN(t)&&zN(t)&&(((e=t.match(h$))===null||e===void 0?void 0:e.length)||0)+(((n=t.match($1e))===null||n===void 0?void 0:n.length)||0)>0}const ate="number",ste="color",YSe="var",JSe="var(",H7="${}",qSe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function GE(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(qSe,l=>(no.test(l)?(r.color.push(a),i.push(ste),n.push(no.parse(l))):l.startsWith(JSe)?(r.var.push(a),i.push(YSe),n.push(l)):(r.number.push(a),i.push(ate),n.push(parseFloat(l))),++a,H7)).split(H7);return{values:n,split:o,indexes:r,types:i}}function ote(t){return GE(t).values}function lte(t){const{split:e,types:n}=GE(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===ate?a+=vE(i[s]):o===ste?a+=no.transform(i[s]):a+=i[s]}return a}}const XSe=t=>typeof t=="number"?0:t;function ZSe(t){const e=ote(t);return lte(t)(e.map(XSe))}const Eg={test:KSe,parse:ote,createTransformer:lte,getAnimatableNone:ZSe},QSe=new Set(["brightness","contrast","saturate","opacity"]);function eEe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(h$)||[];if(!r)return t;const i=n.replace(r,"");let a=QSe.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const tEe=/\b([a-z-]*)\(.*?\)/gu,p3={...Eg,getAnimatableNone:t=>{const e=t.match(tEe);return e?e.map(eEe).join(" "):t}},nEe={...m$,color:no,backgroundColor:no,outlineColor:no,fill:no,stroke:no,borderColor:no,borderTopColor:no,borderRightColor:no,borderBottomColor:no,borderLeftColor:no,filter:p3,WebkitFilter:p3},_$=t=>nEe[t];function ute(t,e){let n=_$(t);return n!==p3&&(n=Eg),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const rEe=new Set(["auto","none","0"]);function iEe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!rEe.has(a)&&GE(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=ute(n,i)}class cte extends E${constructor(e,n,r,i){super(e,n,r,i,i==null?void 0:i.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),p$(c))){const f=Qee(c,n.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!LSe.has(r)||e.length!==2)return;const[i,a]=e,s=z7(i),o=z7(a);if(s!==o)if(B7(s)&&B7(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)ISe(e[i])&&r.push(i);r.length&&iEe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pw[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Pw[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function dte(t){let e;return()=>(e===void 0&&(e=t()),e)}const G7=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Eg.test(t)||t==="0")&&!t.startsWith("url("));function aEe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function sEe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=G7(i,e),o=G7(a,e);return ex(s===o,`You are trying to animate ${e} from "${i}" to "${a}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${a} via the \`style\` property.`),!s||!o?!1:aEe(t)||n==="spring"&&r}class fte{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&zSe(),this._resolved}onKeyframesResolved(e,n){this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!sEe(e,r,i,a))if(s)this.options.duration=0;else{l==null||l(UA(e,this.options,n)),o==null||o(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,n);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function hte(t,e){return e?t*(1e3/e):0}const oEe=5;function mte(t,e,n){const r=Math.max(e-oEe,0);return hte(n-t(r),e-r)}const DI=.001,lEe=.01,K7=10,uEe=.05,cEe=1;function dEe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,a;ex(t<=zf(K7),"Spring duration must be 10 seconds or less");let s=1-e;s=Sg(uEe,cEe,s),t=Sg(lEe,K7,vm(t)),s<1?(i=c=>{const f=c*s,h=f*t,m=f-n,p=g3(c,s),v=Math.exp(-h);return DI-m/p*v},a=c=>{const h=c*s*t,m=h*n+n,p=Math.pow(s,2)*Math.pow(c,2)*t,v=Math.exp(-h),y=g3(Math.pow(c,2),s);return(-i(c)+DI>0?-1:1)*((m-p)*v)/y}):(i=c=>{const f=Math.exp(-c*t),h=(c-n)*t+1;return-DI+f*h},a=c=>{const f=Math.exp(-c*t),h=(n-c)*(t*t);return f*h});const o=5/t,l=hEe(i,a,o);if(t=zf(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:t}}}const fEe=12;function hEe(t,e,n){let r=n;for(let i=1;i<fEe;i++)r=r-t(r)/e(r);return r}function g3(t,e){return t*Math.sqrt(1-e*e)}const mEe=["duration","bounce"],pEe=["stiffness","damping","mass"];function Y7(t,e){return e.some(n=>t[n]!==void 0)}function gEe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Y7(t,pEe)&&Y7(t,mEe)){const n=dEe(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function pte({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],a=t[t.length-1],s={done:!1,value:i},{stiffness:o,damping:l,mass:c,duration:f,velocity:h,isResolvedFromDuration:m}=gEe({...r,velocity:-vm(r.velocity||0)}),p=h||0,v=l/(2*Math.sqrt(o*c)),y=a-i,x=vm(Math.sqrt(o/c)),S=Math.abs(y)<5;n||(n=S?.01:2),e||(e=S?.005:.5);let _;if(v<1){const N=g3(x,v);_=k=>{const P=Math.exp(-v*x*k);return a-P*((p+v*x*y)/N*Math.sin(N*k)+y*Math.cos(N*k))}}else if(v===1)_=N=>a-Math.exp(-x*N)*(y+(p+x*y)*N);else{const N=x*Math.sqrt(v*v-1);_=k=>{const P=Math.exp(-v*x*k),O=Math.min(N*k,300);return a-P*((p+v*x*y)*Math.sinh(O)+N*y*Math.cosh(O))/N}}return{calculatedDuration:m&&f||null,next:N=>{const k=_(N);if(m)s.done=N>=f;else{let P=0;v<1&&(P=N===0?zf(p):mte(_,N,k));const O=Math.abs(P)<=n,A=Math.abs(a-k)<=e;s.done=O&&A}return s.value=s.done?a:k,s}}}function J7({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:c=.5,restSpeed:f}){const h=t[0],m={done:!1,value:h},p=T=>o!==void 0&&T<o||l!==void 0&&T>l,v=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let y=n*e;const x=h+y,S=s===void 0?x:s(x);S!==x&&(y=S-h);const _=T=>-y*Math.exp(-T/r),N=T=>S+_(T),k=T=>{const L=_(T),B=N(T);m.done=Math.abs(L)<=c,m.value=m.done?S:B};let P,O;const A=T=>{p(m.value)&&(P=T,O=pte({keyframes:[m.value,v(m.value)],velocity:mte(N,T,m.value),damping:i,stiffness:a,restDelta:c,restSpeed:f}))};return A(0),{calculatedDuration:null,next:T=>{let L=!1;return!O&&P===void 0&&(L=!0,k(T),A(T)),P!==void 0&&T>=P?O.next(T-P):(!L&&k(T),m)}}}const gte=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,vEe=1e-7,yEe=12;function bEe(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=gte(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>vEe&&++o<yEe);return s}function GN(t,e,n,r){if(t===e&&n===r)return Ws;const i=a=>bEe(a,0,1,t,n);return a=>a===0||a===1?a:gte(i(a),e,r)}const wEe=GN(.42,0,1,1),xEe=GN(0,0,.58,1),vte=GN(.42,0,.58,1),SEe=t=>Array.isArray(t)&&typeof t[0]!="number",yte=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bte=t=>e=>1-t(1-e),C$=t=>1-Math.sin(Math.acos(t)),wte=bte(C$),EEe=yte(C$),xte=GN(.33,1.53,.69,.99),T$=bte(xte),NEe=yte(T$),_Ee=t=>(t*=2)<1?.5*T$(t):.5*(2-Math.pow(2,-10*(t-1))),q7={linear:Ws,easeIn:wEe,easeInOut:vte,easeOut:xEe,circIn:C$,circInOut:EEe,circOut:wte,backIn:T$,backInOut:NEe,backOut:xte,anticipate:_Ee},X7=t=>{if(Array.isArray(t)){Em(t.length===4,"Cubic bezier arrays must contain four numerical values.");const[e,n,r,i]=t;return GN(e,n,r,i)}else if(typeof t=="string")return Em(q7[t]!==void 0,`Invalid easing type '${t}'`),q7[t];return t},KE=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Zi=(t,e,n)=>t+(e-t)*n;function kI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function CEe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=kI(l,o,t+1/3),a=kI(l,o,t),s=kI(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function eP(t,e){return n=>n>0?e:t}const PI=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},TEe=[m3,hy,ew],DEe=t=>TEe.find(e=>e.test(t));function Z7(t){const e=DEe(t);if(ex(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`),!e)return!1;let n=e.parse(t);return e===ew&&(n=CEe(n)),n}const Q7=(t,e)=>{const n=Z7(t),r=Z7(e);if(!n||!r)return eP(t,e);const i={...n};return a=>(i.red=PI(n.red,r.red,a),i.green=PI(n.green,r.green,a),i.blue=PI(n.blue,r.blue,a),i.alpha=Zi(n.alpha,r.alpha,a),hy.transform(i))},v3=new Set(["none","hidden"]);function kEe(t,e){return v3.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function PEe(t,e){return n=>Zi(t,e,n)}function D$(t){return typeof t=="number"?PEe:typeof t=="string"?p$(t)?eP:no.test(t)?Q7:OEe:Array.isArray(t)?Ste:typeof t=="object"?no.test(t)?Q7:AEe:eP}function Ste(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>D$(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function AEe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=D$(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function REe(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=t.indexes[s][i[s]],l=(n=t.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const OEe=(t,e)=>{const n=Eg.createTransformer(e),r=GE(t),i=GE(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?v3.has(t)&&!i.values.length||v3.has(e)&&!r.values.length?kEe(t,e):gm(Ste(REe(r,i),i.values),n):(ex(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),eP(t,e))};function Ete(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Zi(t,e,n):D$(t)(t,e)}function jEe(t,e,n){const r=[],i=n||Ete,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||Ws:e;o=gm(l,o)}r.push(o)}return r}function IEe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(Em(a===e.length,"Both input and output ranges must be the same length"),a===1)return()=>e[0];if(a===2&&t[0]===t[1])return()=>e[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=jEe(e,r,i),o=s.length,l=c=>{let f=0;if(o>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const h=KE(t[f],t[f+1],c);return s[f](h)};return n?c=>l(Sg(t[0],t[a-1],c)):l}function MEe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=KE(0,e,r);t.push(Zi(n,1,i))}}function VEe(t){const e=[0];return MEe(e,t.length-1),e}function $Ee(t,e){return t.map(n=>n*e)}function LEe(t,e){return t.map(()=>e||vte).splice(0,t.length-1)}function tP({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=SEe(r)?r.map(X7):X7(r),a={done:!1,value:e[0]},s=$Ee(n&&n.length===e.length?n:VEe(e),t),o=IEe(s,e,{ease:Array.isArray(i)?i:LEe(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const eW=2e4;function FEe(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<eW;)e+=n,r=t.next(e);return e>=eW?1/0:e}const BEe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>hi.update(e,!0),stop:()=>Nm(e),now:()=>$s.isProcessing?$s.timestamp:hg.now()}},UEe={decay:J7,inertia:J7,tween:tP,keyframes:tP,spring:pte},WEe=t=>t/100;class k$ extends fte{constructor({KeyframeResolver:e=E$,...n}){super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:o}=this.options;o&&o()};const{name:r,motionValue:i,keyframes:a}=this.options,s=(o,l)=>this.onKeyframesResolved(o,l);r&&i&&i.owner?this.resolver=i.owner.resolveKeyframes(a,s,r,i):this.resolver=new e(a,s,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=UEe[n]||tP;let l,c;o!==tP&&typeof e[0]!="number"&&(Em(e.length===2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${e}`),l=gm(WEe,Ete(e[0],e[1])),e=[0,100]);const f=o({...this.options,keyframes:e});a==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),f.calculatedDuration===null&&(f.calculatedDuration=FEe(f));const{calculatedDuration:h}=f,m=h+i,p=m*(r+1)-i;return{generator:f,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:f,resolvedDuration:h}=r;if(this.startTime===null)return a.next(0);const{delay:m,repeat:p,repeatType:v,repeatDelay:y,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const S=this.currentTime-m*(this.speed>=0?1:-1),_=this.speed>=0?S<0:S>f;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let N=this.currentTime,k=a;if(p){const T=Math.min(this.currentTime,f)/h;let L=Math.floor(T),B=T%1;!B&&T>=1&&(B=1),B===1&&L--,L=Math.min(L,p+1),!!(L%2)&&(v==="reverse"?(B=1-B,y&&(B-=y/h)):v==="mirror"&&(k=s)),N=Sg(0,1,B)*h}const P=_?{done:!1,value:l[0]}:k.next(N);o&&(P.value=o(P.value));let{done:O}=P;!_&&c!==null&&(O=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return A&&i!==void 0&&(P.value=UA(l,this.options,i)),x&&x(P.value),A&&this.finish(),P}get duration(){const{resolved:e}=this;return e?vm(e.calculatedDuration):0}get time(){return vm(this.currentTime)}set time(e){e=zf(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=vm(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=BEe,onPlay:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=r),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Nte=t=>Array.isArray(t)&&typeof t[0]=="number";function _te(t){return!!(!t||typeof t=="string"&&t in P$||Nte(t)||Array.isArray(t)&&t.every(_te))}const qS=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,P$={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qS([0,.65,.55,1]),circOut:qS([.55,0,1,.45]),backIn:qS([.31,.01,.66,-.59]),backOut:qS([.33,1.53,.69,.99])};function zEe(t){return Cte(t)||P$.easeOut}function Cte(t){if(t)return Nte(t)?qS(t):Array.isArray(t)?t.map(zEe):P$[t]}function HEe(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o,times:l}={}){const c={[e]:n};l&&(c.offset=l);const f=Cte(o);return Array.isArray(f)&&(c.easing=f),t.animate(c,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const GEe=dte(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nP=10,KEe=2e4;function YEe(t){return t.type==="spring"||!_te(t.ease)}function JEe(t,e){const n=new k$({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<KEe;)r=n.sample(a),i.push(r.value),a+=nP;return{times:void 0,keyframes:i,duration:a-nP,ease:"linear"}}class tW extends fte{constructor(e){super(e);const{name:n,motionValue:r,keyframes:i}=this.options;this.resolver=new cte(i,(a,s)=>this.onKeyframesResolved(a,s),n,r),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:a,ease:s,type:o,motionValue:l,name:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(YEe(this.options)){const{onComplete:h,onUpdate:m,motionValue:p,...v}=this.options,y=JEe(e,v);e=y.keyframes,e.length===1&&(e[1]=e[0]),i=y.duration,a=y.times,s=y.ease,o="keyframes"}const f=HEe(l.owner.current,c,e,{...this.options,duration:i,times:a,ease:s});return f.startTime=hg.now(),this.pendingTimeline?(f.timeline=this.pendingTimeline,this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:h}=this.options;l.set(UA(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:a,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return vm(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return vm(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=zf(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ws;const{animation:r}=n;r.timeline=e,r.onfinish=null}return Ws}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:f,onComplete:h,...m}=this.options,p=new k$({...m,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),v=zf(this.time);c.setWithVelocity(p.sample(v-nP).value,p.sample(v).value,nP)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=e;return GEe()&&r&&Uee.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}function qEe(t,e){let n;const r=()=>{const{currentTime:i}=e,s=(i===null?0:i.value)/100;n!==s&&t(s),n=s};return hi.update(r,!0),()=>Nm(r)}const XEe=dte(()=>window.ScrollTimeline!==void 0);class ZEe{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e){const n=this.animations.map(r=>{if(XEe()&&r.attachTimeline)r.attachTimeline(e);else return r.pause(),qEe(i=>{r.time=r.duration*i},e)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const A$=(t,e,n,r={},i,a,s)=>o=>{const l=S$(r,t)||{},c=l.delay||r.delay||0;let{elapsed:f=0}=r;f=f-zf(c);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete(),s&&s()},onStop:s,name:t,motionValue:e,element:a?void 0:i};RSe(l)||(h={...h,...ASe(t,h)}),h.duration&&(h.duration=zf(h.duration)),h.repeatDelay&&(h.repeatDelay=zf(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(m=!0)),l$.skipAnimations&&(m=!0,h.duration=0,h.delay=0),m&&!a&&e.get()!==void 0){const p=UA(h.keyframes,l);if(p!==void 0)return hi.update(()=>{h.onUpdate(p),h.onComplete()}),new ZEe([])}return!a&&tW.supports(h)?new tW(h):new k$(h)};class R${constructor(){this.subscriptions=[]}add(e){return $A(this.subscriptions,e),()=>LA(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nW=new Set;function O$(t,e,n){t||nW.has(e)||(console.warn(e),nW.add(e))}const rW=30,QEe=t=>!isNaN(parseFloat(t));class Tte{constructor(e,n={}){this.version="11.3.24",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=hg.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=hg.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=QEe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return O$(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new R$);const r=this.events[e].add(n);return e==="change"?()=>{r(),hi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hg.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rW)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rW);return hte(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function YE(t,e){return new Tte(t,e)}function eNe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,YE(n))}function tNe(t,e){const n=BA(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=oSe(a[s]);eNe(t,s,o)}}function Dte(t){return t.getProps()[Cee]}class kte extends Tte{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(e){const n=Wee(e);if(!n)return;const r=this.counts.get(n)||0;this.counts.set(n,r+1),r===0&&(this.output.push(n),this.update());let i=!1;return()=>{if(i)return;i=!0;const a=this.counts.get(n)-1;this.counts.set(n,a),a===0&&(LA(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function nNe(t){return!!(co(t)&&t.add)}function y3(t,e){var n;if(!t.applyWillChange)return;let r=t.getValue("willChange");if(!r&&!(!((n=t.props.style)===null||n===void 0)&&n.willChange)&&(r=new kte("auto"),t.addValue("willChange",r)),nNe(r))return r.add(e)}function rNe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Pte(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const c=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const m=t.getValue(h,(a=t.latestValues[h])!==null&&a!==void 0?a:null),p=l[h];if(p===void 0||f&&rNe(f,h))continue;const v={delay:n,elapsed:0,...S$(s||{},h)};let y=!1;if(window.MotionHandoffAnimation){const S=Dte(t);if(S){const _=window.MotionHandoffAnimation(S,h,hi);_!==null&&(v.elapsed=_,y=!0)}}m.start(A$(h,m,p,t.shouldReduceMotion&&Vg.has(h)?{type:!1}:v,t,y,y3(t,h)));const x=m.animation;x&&c.push(x)}return o&&Promise.all(c).then(()=>{hi.update(()=>{o&&tNe(t,o)})}),c}function b3(t,e,n={}){var r;const i=BA(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(Pte(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:m}=a;return iNe(t,e,f+c,h,m,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,f]=l==="beforeChildren"?[s,o]:[o,s];return c().then(()=>f())}else return Promise.all([s(),o(n.delay)])}function iNe(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(t.variantChildren).sort(aNe).forEach((c,f)=>{c.notify("AnimationStart",e),s.push(b3(c,e,{...a,delay:n+l(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(s)}function aNe(t,e){return t.sortNodePosition(e)}function sNe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>b3(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=b3(t,e,n);else{const i=typeof e=="function"?BA(t,e,n.custom):e;r=Promise.all(Pte(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const oNe=[...c$].reverse(),lNe=c$.length;function uNe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>sNe(t,n,r)))}function cNe(t){let e=uNe(t),n=iW(),r=!0;const i=l=>(c,f)=>{var h;const m=BA(t,f,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(m){const{transition:p,transitionEnd:v,...y}=m;c={...c,...y,...v}}return c};function a(l){e=l(t)}function s(l){const c=t.getProps(),f=t.getVariantContext(!0)||{},h=[],m=new Set;let p={},v=1/0;for(let x=0;x<lNe;x++){const S=oNe[x],_=n[S],N=c[S]!==void 0?c[S]:f[S],k=WE(N),P=S===l?_.isActive:null;P===!1&&(v=x);let O=N===f[S]&&N!==c[S]&&k;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),_.protectedKeys={...p},!_.isActive&&P===null||!N&&!_.prevProp||zE(N)||typeof N=="boolean")continue;let T=dNe(_.prevProp,N)||S===l&&_.isActive&&!O&&k||x>v&&k,L=!1;const B=Array.isArray(N)?N:[N];let W=B.reduce(i(S),{});P===!1&&(W={});const{prevResolvedValues:Y={}}=_,V={...Y,...W},I=H=>{T=!0,m.has(H)&&(L=!0,m.delete(H)),_.needsAnimating[H]=!0;const q=t.getValue(H);q&&(q.liveStyle=!1)};for(const H in V){const q=W[H],F=Y[H];if(p.hasOwnProperty(H))continue;let J=!1;c3(q)&&c3(F)?J=!qee(q,F):J=q!==F,J?q!=null?I(H):m.add(H):q!==void 0&&m.has(H)?I(H):_.protectedKeys[H]=!0}_.prevProp=N,_.prevResolvedValues=W,_.isActive&&(p={...p,...W}),r&&t.blockInitialAnimation&&(T=!1),T&&(!O||L)&&h.push(...B.map(H=>({animation:H,options:{type:S}})))}if(m.size){const x={};m.forEach(S=>{const _=t.getBaseTarget(S),N=t.getValue(S);N&&(N.liveStyle=!0),x[S]=_??null}),h.push({animation:x})}let y=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(h):Promise.resolve()}function o(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const h=s(l);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=iW(),r=!0}}}function dNe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!qee(e,t):!1}function Wv(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iW(){return{animate:Wv(!0),whileInView:Wv(),whileHover:Wv(),whileTap:Wv(),whileDrag:Wv(),whileFocus:Wv(),exit:Wv()}}class fNe extends $g{constructor(e){super(e),e.animationState||(e.animationState=cNe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let hNe=0;class mNe extends $g{constructor(){super(...arguments),this.id=hNe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const pNe={animation:{Feature:fNe},exit:{Feature:mNe}},aW=(t,e)=>Math.abs(t-e);function gNe(t,e){const n=aW(t.x,e.x),r=aW(t.y,e.y);return Math.sqrt(n**2+r**2)}class Ate{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=RI(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=gNe(h.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:v}=h,{timestamp:y}=$s;this.history.push({...v,timestamp:y});const{onStart:x,onMove:S}=this.handlers;m||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=AI(m,this.transformPagePoint),hi.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=RI(h.type==="pointercancel"?this.lastMoveEventInfo:AI(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,x),v&&v(h,x)},!Hee(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=FA(e),o=AI(s,this.transformPagePoint),{point:l}=o,{timestamp:c}=$s;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=n;f&&f(e,RI(o,this.history)),this.removeListeners=gm(pm(this.contextWindow,"pointermove",this.handlePointerMove),pm(this.contextWindow,"pointerup",this.handlePointerUp),pm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nm(this.updatePoint)}}function AI(t,e){return e?{point:e(t.point)}:t}function sW(t,e){return{x:t.x-e.x,y:t.y-e.y}}function RI({point:t},e){return{point:t,delta:sW(t,Rte(e)),offset:sW(t,vNe(e)),velocity:yNe(e,.1)}}function vNe(t){return t[0]}function Rte(t){return t[t.length-1]}function yNe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Rte(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>zf(e)));)n--;if(!r)return{x:0,y:0};const a=vm(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const Ote=1e-4,bNe=1-Ote,wNe=1+Ote,jte=.01,xNe=0-jte,SNe=0+jte;function pu(t){return t.max-t.min}function ENe(t,e,n){return Math.abs(t-e)<=n}function oW(t,e,n,r=.5){t.origin=r,t.originPoint=Zi(e.min,e.max,t.origin),t.scale=pu(n)/pu(e),t.translate=Zi(n.min,n.max,t.origin)-t.originPoint,(t.scale>=bNe&&t.scale<=wNe||isNaN(t.scale))&&(t.scale=1),(t.translate>=xNe&&t.translate<=SNe||isNaN(t.translate))&&(t.translate=0)}function yE(t,e,n,r){oW(t.x,e.x,n.x,r?r.originX:void 0),oW(t.y,e.y,n.y,r?r.originY:void 0)}function lW(t,e,n){t.min=n.min+e.min,t.max=t.min+pu(e)}function NNe(t,e,n){lW(t.x,e.x,n.x),lW(t.y,e.y,n.y)}function uW(t,e,n){t.min=e.min-n.min,t.max=t.min+pu(e)}function bE(t,e,n){uW(t.x,e.x,n.x),uW(t.y,e.y,n.y)}function _Ne(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Zi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Zi(n,t,r.max):Math.min(t,n)),t}function cW(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CNe(t,{top:e,left:n,bottom:r,right:i}){return{x:cW(t.x,n,i),y:cW(t.y,e,r)}}function dW(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function TNe(t,e){return{x:dW(t.x,e.x),y:dW(t.y,e.y)}}function DNe(t,e){let n=.5;const r=pu(t),i=pu(e);return i>r?n=KE(e.min,e.max-r,t.min):r>i&&(n=KE(t.min,t.max-i,e.min)),Sg(0,1,n)}function kNe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const w3=.35;function PNe(t=w3){return t===!1?t=0:t===!0&&(t=w3),{x:fW(t,"left","right"),y:fW(t,"top","bottom")}}function fW(t,e,n){return{min:hW(t,e),max:hW(t,n)}}function hW(t,e){return typeof t=="number"?t:t[e]||0}const mW=()=>({translate:0,scale:1,origin:0,originPoint:0}),tw=()=>({x:mW(),y:mW()}),pW=()=>({min:0,max:0}),pa=()=>({x:pW(),y:pW()});function tc(t){return[t("x"),t("y")]}function Ite({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function ANe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function RNe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function OI(t){return t===void 0||t===1}function x3({scale:t,scaleX:e,scaleY:n}){return!OI(t)||!OI(e)||!OI(n)}function Zv(t){return x3(t)||Mte(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Mte(t){return gW(t.x)||gW(t.y)}function gW(t){return t&&t!=="0%"}function rP(t,e,n){const r=t-n,i=e*r;return n+i}function vW(t,e,n,r,i){return i!==void 0&&(t=rP(t,i,r)),rP(t,n,r)+e}function S3(t,e=0,n=1,r,i){t.min=vW(t.min,e,n,r,i),t.max=vW(t.max,e,n,r,i)}function Vte(t,{x:e,y:n}){S3(t.x,e.translate,e.scale,e.originPoint),S3(t.y,n.translate,n.scale,n.originPoint)}const yW=.999999999999,bW=1.0000000000001;function ONe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&rw(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Vte(t,s)),r&&Zv(a.latestValues)&&rw(t,a.latestValues))}e.x<bW&&e.x>yW&&(e.x=1),e.y<bW&&e.y>yW&&(e.y=1)}function nw(t,e){t.min=t.min+e,t.max=t.max+e}function wW(t,e,n,r,i=.5){const a=Zi(t.min,t.max,i);S3(t,e,n,a,r)}function rw(t,e){wW(t.x,e.x,e.scaleX,e.scale,e.originX),wW(t.y,e.y,e.scaleY,e.scale,e.originY)}function $te(t,e){return Ite(RNe(t.getBoundingClientRect(),e))}function jNe(t,e,n){const r=$te(t,n),{scroll:i}=e;return i&&(nw(r.x,i.offset.x),nw(r.y,i.offset.y)),r}const Lte=({current:t})=>t?t.ownerDocument.defaultView:null,INe=new WeakMap;class MNe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pa(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(FA(f,"page").point)},a=(f,h)=>{var m;const{drag:p,dragPropagation:v,onDragStart:y}=this.getProps();if(p&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Kee(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),tc(S=>{let _=this.getAxisMotionValue(S).get()||0;if(Wf.test(_)){const{projection:N}=this.visualElement;if(N&&N.layout){const k=N.layout.layoutBox[S];k&&(_=pu(k)*(parseFloat(_)/100))}}this.originPoint[S]=_}),y&&hi.postRender(()=>y(f,h)),(m=this.removeWillChange)===null||m===void 0||m.call(this),this.removeWillChange=y3(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},s=(f,h)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:v,onDrag:y}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:x}=h;if(p&&this.currentDirection===null){this.currentDirection=VNe(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),y&&y(f,h)},o=(f,h)=>this.stop(f,h),l=()=>tc(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Ate(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Lte(this.visualElement)})}stop(e,n){var r;(r=this.removeWillChange)===null||r===void 0||r.call(this);const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:s}=this.getProps();s&&hi.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!NT(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=_Ne(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&Q0(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=CNe(i.layoutBox,n):this.constraints=!1,this.elastic=PNe(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&tc(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=kNe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Q0(e))return!1;const r=e.current;Em(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=jNe(r,i.root,this.visualElement.getTransformPagePoint());let s=TNe(i.layout.layoutBox,a);if(n){const o=n(ANe(s));this.hasMutatedConstraints=!!o,o&&(s=Ite(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=tc(f=>{if(!NT(f,n,this.currentDirection))return;let h=l&&l[f]||{};s&&(h={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,v={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,v)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(A$(e,r,0,n,this.visualElement,!1,y3(this.visualElement,e)))}stopAnimation(){tc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){tc(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){tc(n=>{const{drag:r}=this.getProps();if(!NT(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Zi(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Q0(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};tc(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=DNe({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),tc(s=>{if(!NT(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:c}=this.constraints[s];o.set(Zi(l,c,i[s]))})}addListeners(){if(!this.visualElement.current)return;INe.set(this.visualElement,this);const e=this.visualElement.current,n=pm(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Q0(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),hi.read(r);const s=um(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(tc(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=l[f].translate,h.set(h.get()+l[f].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=w3,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function NT(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function VNe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $Ne extends $g{constructor(e){super(e),this.removeGroupControls=Ws,this.removeListeners=Ws,this.controls=new MNe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ws}unmount(){this.removeGroupControls(),this.removeListeners()}}const xW=t=>(e,n)=>{t&&hi.postRender(()=>t(e,n))};class LNe extends $g{constructor(){super(...arguments),this.removePointerDownListener=Ws}onPointerDown(e){this.session=new Ate(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Lte(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:xW(e),onStart:xW(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&hi.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=pm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function FNe(){const t=R.useContext(jA);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=R.useId();R.useEffect(()=>r(i),[]);const a=R.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,a]:[!0]}const ak={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function SW(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const fS={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Hn.test(t))t=parseFloat(t);else return t;const n=SW(t,e.target.x),r=SW(t,e.target.y);return`${n}% ${r}%`}},BNe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Eg.parse(t);if(i.length>5)return r;const a=Eg.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const c=Zi(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=c),typeof i[3+s]=="number"&&(i[3+s]/=c),a(i)}};class UNe extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;V1e(WNe),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ak.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||hi.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),u$.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Fte(t){const[e,n]=FNe(),r=R.useContext(HE);return de.jsx(UNe,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(Dee),isPresent:e,safeToRemove:n})}const WNe={borderRadius:{...fS,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fS,borderTopRightRadius:fS,borderBottomLeftRadius:fS,borderBottomRightRadius:fS,boxShadow:BNe},Bte=["TopLeft","TopRight","BottomLeft","BottomRight"],zNe=Bte.length,EW=t=>typeof t=="string"?parseFloat(t):t,NW=t=>typeof t=="number"||Hn.test(t);function HNe(t,e,n,r,i,a){i?(t.opacity=Zi(0,n.opacity!==void 0?n.opacity:1,GNe(r)),t.opacityExit=Zi(e.opacity!==void 0?e.opacity:1,0,KNe(r))):a&&(t.opacity=Zi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<zNe;s++){const o=`border${Bte[s]}Radius`;let l=_W(e,o),c=_W(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||NW(l)===NW(c)?(t[o]=Math.max(Zi(EW(l),EW(c),r),0),(Wf.test(c)||Wf.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=Zi(e.rotate||0,n.rotate||0,r))}function _W(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const GNe=Ute(0,.5,wte),KNe=Ute(.5,.95,Ws);function Ute(t,e,n){return r=>r<t?0:r>e?1:n(KE(t,e,r))}function CW(t,e){t.min=e.min,t.max=e.max}function qu(t,e){CW(t.x,e.x),CW(t.y,e.y)}function TW(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function DW(t,e,n,r,i){return t-=e,t=rP(t,1/n,r),i!==void 0&&(t=rP(t,1/i,r)),t}function YNe(t,e=0,n=1,r=.5,i,a=t,s=t){if(Wf.test(e)&&(e=parseFloat(e),e=Zi(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Zi(a.min,a.max,r);t===a&&(o-=e),t.min=DW(t.min,e,n,o,i),t.max=DW(t.max,e,n,o,i)}function kW(t,e,[n,r,i],a,s){YNe(t,e[n],e[r],e[i],e.scale,a,s)}const JNe=["x","scaleX","originX"],qNe=["y","scaleY","originY"];function PW(t,e,n,r){kW(t.x,e,JNe,n?n.x:void 0,r?r.x:void 0),kW(t.y,e,qNe,n?n.y:void 0,r?r.y:void 0)}function AW(t){return t.translate===0&&t.scale===1}function Wte(t){return AW(t.x)&&AW(t.y)}function RW(t,e){return t.min===e.min&&t.max===e.max}function XNe(t,e){return RW(t.x,e.x)&&RW(t.y,e.y)}function OW(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zte(t,e){return OW(t.x,e.x)&&OW(t.y,e.y)}function jW(t){return pu(t.x)/pu(t.y)}function IW(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ZNe{constructor(){this.members=[]}add(e){$A(this.members,e),e.scheduleRender()}remove(e){if(LA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QNe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:f,rotateX:h,rotateY:m,skewX:p,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const e_e=(t,e)=>t.depth-e.depth;class t_e{constructor(){this.children=[],this.isDirty=!1}add(e){$A(this.children,e),this.isDirty=!0}remove(e){LA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(e_e),this.isDirty=!1,this.children.forEach(e)}}function n_e(t,e){const n=hg.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Nm(r),t(a-e))};return hi.read(r,!0),()=>Nm(r)}function r_e(t){return t instanceof SVGElement&&t.tagName!=="svg"}function i_e(t,e,n){const r=co(t)?t:YE(t);return r.start(A$("",r,e,n)),r.animation}const Qv={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},XS=typeof window<"u"&&window.MotionDebug!==void 0,jI=["","X","Y","Z"],a_e={visibility:"hidden"},MW=1e3;let s_e=0;function II(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Hte(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return!1;const{visualElement:e}=t.options;return e?window.MotionHasOptimisedTransformAnimation(Dte(e))?!0:t.parent&&!t.parent.hasCheckedOptimisedAppear?Hte(t.parent):!1:!1}function Gte({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=s_e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,XS&&(Qv.totalNodes=Qv.resolvedTargetDeltas=Qv.recalculatedProjection=0),this.nodes.forEach(u_e),this.nodes.forEach(m_e),this.nodes.forEach(p_e),this.nodes.forEach(c_e),XS&&window.MotionDebug.record(Qv)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new t_e)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new R$),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=r_e(s),this.instance=s;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=n_e(m,250),ak.hasAnimatedSinceResize&&(ak.hasAnimatedSinceResize=!1,this.nodes.forEach($W))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||f.getDefaultTransition()||w_e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:S}=f.getProps(),_=!this.targetLayout||!zte(this.targetLayout,v)||p,N=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||m&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,N);const k={...S$(y,"layout"),onPlay:x,onComplete:S};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else m||$W(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Nm(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(g_e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionHandoffCancelAll&&Hte(this)&&window.MotionHandoffCancelAll(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VW);return}this.isUpdating||this.nodes.forEach(f_e),this.isUpdating=!1,this.nodes.forEach(h_e),this.nodes.forEach(o_e),this.nodes.forEach(l_e),this.clearAllSnapshots();const o=hg.now();$s.delta=Sg(0,1e3/60,o-$s.timestamp),$s.timestamp=o,$s.isProcessing=!0,NI.update.process($s),NI.preRender.process($s),NI.render.process($s),$s.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,u$.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(d_e),this.sharedNodes.forEach(v_e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pa(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Wte(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;s&&(o||Zv(this.latestValues)||f)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),x_e(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return pa();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(S_e))){const{scroll:f}=this.root;f&&(nw(l.x,f.offset.x),nw(l.y,f.offset.y))}return l}removeElementScroll(s){var o;const l=pa();if(qu(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:h,options:m}=f;f!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&qu(l,s),nw(l.x,h.offset.x),nw(l.y,h.offset.y))}return l}applyTransform(s,o=!1){const l=pa();qu(l,s);for(let c=0;c<this.path.length;c++){const f=this.path[c];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&rw(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Zv(f.latestValues)&&rw(l,f.latestValues)}return Zv(this.latestValues)&&rw(l,this.latestValues),l}removeTransform(s){const o=pa();qu(o,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Zv(c.latestValues))continue;x3(c.latestValues)&&c.updateSnapshot();const f=pa(),h=c.measurePageBox();qu(f,h),PW(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return Zv(this.latestValues)&&PW(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$s.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=$s.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pa(),this.relativeTargetOrigin=pa(),bE(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),qu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pa(),this.targetWithTransforms=pa()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),NNe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qu(this.target,this.layout.layoutBox),Vte(this.target,this.targetDelta)):qu(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pa(),this.relativeTargetOrigin=pa(),bE(this.relativeTargetOrigin,this.target,p.target),qu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}XS&&Qv.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||x3(this.parent.latestValues)||Mte(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===$s.timestamp&&(c=!1),c)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;qu(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;ONe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=pa());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(TW(this.prevProjectionDelta.x,this.projectionDelta.x),TW(this.prevProjectionDelta.y,this.projectionDelta.y)),yE(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!IW(this.projectionDelta.x,this.prevProjectionDelta.x)||!IW(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),XS&&Qv.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tw(),this.projectionDelta=tw(),this.projectionDeltaWithTransform=tw()}setAnimationOrigin(s,o=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},h=tw();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=pa(),p=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=p!==v,x=this.getStack(),S=!x||x.members.length<=1,_=!!(y&&!S&&this.options.crossfade===!0&&!this.path.some(b_e));this.animationProgress=0;let N;this.mixTargetDelta=k=>{const P=k/1e3;LW(h.x,s.x,P),LW(h.y,s.y,P),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bE(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),y_e(this.relativeTarget,this.relativeTargetOrigin,m,P),N&&XNe(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=pa()),qu(N,this.relativeTarget)),y&&(this.animationValues=f,HNe(f,c,this.latestValues,P,_,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Nm(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hi.update(()=>{ak.hasAnimatedSinceResize=!0,this.currentAnimation=i_e(0,MW,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(MW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:f}=s;if(!(!o||!l||!c)){if(this!==s&&this.layout&&c&&Kte(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||pa();const h=pu(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+h;const m=pu(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+m}qu(o,l),rw(o,f),yE(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new ZNe),this.sharedNodes.get(s).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&II("z",s,c,this.animationValues);for(let f=0;f<jI.length;f++)II(`rotate${jI[f]}`,s,c,this.animationValues),II(`skew${jI[f]}`,s,c,this.animationValues);s.render();for(const f in c)s.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return a_e;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=rk(s==null?void 0:s.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=rk(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Zv(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=QNe(this.projectionDeltaWithTransform,this.treeScale,m),f&&(c.transform=f(m,c.transform));const{x:p,y:v}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(o=m.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const y in Zk){if(m[y]===void 0)continue;const{correct:x,applyTo:S}=Zk[y],_=c.transform==="none"?m[y]:x(m[y],h);if(S){const N=S.length;for(let k=0;k<N;k++)c[S[k]]=_}else c[y]=_}return this.options.layoutId&&(c.pointerEvents=h===this?rk(s==null?void 0:s.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(VW),this.root.sharedNodes.clear()}}}function o_e(t){t.updateLayout()}function l_e(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=n.source!==t.layout.source;a==="size"?tc(h=>{const m=s?n.measuredBox[h]:n.layoutBox[h],p=pu(m);m.min=r[h].min,m.max=m.min+p}):Kte(a,n.layoutBox,r)&&tc(h=>{const m=s?n.measuredBox[h]:n.layoutBox[h],p=pu(r[h]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const o=tw();yE(o,r,n.layoutBox);const l=tw();s?yE(l,t.applyTransform(i,!0),n.measuredBox):yE(l,r,n.layoutBox);const c=!Wte(o);let f=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const v=pa();bE(v,n.layoutBox,m.layoutBox);const y=pa();bE(y,r,p.layoutBox),zte(v,y)||(f=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function u_e(t){XS&&Qv.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function c_e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function d_e(t){t.clearSnapshot()}function VW(t){t.clearMeasurements()}function f_e(t){t.isLayoutDirty=!1}function h_e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $W(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function m_e(t){t.resolveTargetDelta()}function p_e(t){t.calcProjection()}function g_e(t){t.resetSkewAndRotation()}function v_e(t){t.removeLeadSnapshot()}function LW(t,e,n){t.translate=Zi(e.translate,0,n),t.scale=Zi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function FW(t,e,n,r){t.min=Zi(e.min,n.min,r),t.max=Zi(e.max,n.max,r)}function y_e(t,e,n,r){FW(t.x,e.x,n.x,r),FW(t.y,e.y,n.y,r)}function b_e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const w_e={duration:.45,ease:[.4,0,.1,1]},BW=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),UW=BW("applewebkit/")&&!BW("chrome/")?Math.round:Ws;function WW(t){t.min=UW(t.min),t.max=UW(t.max)}function x_e(t){WW(t.x),WW(t.y)}function Kte(t,e,n){return t==="position"||t==="preserve-aspect"&&!ENe(jW(e),jW(n),.2)}function S_e(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const E_e=Gte({attachResizeListener:(t,e)=>um(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),MI={current:void 0},Yte=Gte({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!MI.current){const t=new E_e({});t.mount(window),t.setOptions({layoutScroll:!0}),MI.current=t}return MI.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),N_e={pan:{Feature:LNe},drag:{Feature:$Ne,ProjectionNode:Yte,MeasureLayout:Fte}},E3={current:null},Jte={current:!1};function __e(){if(Jte.current=!0,!!a$)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>E3.current=t.matches;t.addListener(e),e()}else E3.current=!1}function C_e(t,e,n){for(const r in e){const i=e[r],a=n[r];if(co(i))t.addValue(r,i),O$(i.version==="11.3.24",`Attempting to mix Framer Motion versions ${i.version} with 11.3.24 may not work as expected.`);else if(co(a))t.addValue(r,YE(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,YE(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zW=new WeakMap,T_e=[...tte,no,Eg],D_e=t=>T_e.find(ete(t)),HW=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],k_e=d$.length;class P_e{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.applyWillChange=!1,this.resolveKeyframes=(m,p,v,y)=>new this.KeyframeResolver(m,p,v,y,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=E$,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,hi.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=MA(n),this.isVariantNode=Pee(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const p=h[m];l[m]!==void 0&&co(p)&&p.set(l[m],!1)}}mount(e){this.current=e,zW.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Jte.current||__e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:E3.current,O$(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected."),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){zW.delete(this.current),this.projection&&this.projection.unmount(),Nm(this.notifyUpdate),Nm(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){const r=Vg.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&hi.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kw){const n=kw[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pa()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<HW.length;r++){const i=HW[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=C_e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<k_e;r++){const i=d$[r],a=this.props[i];(WE(a)||a===!1)&&(n[i]=a)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=YE(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Zee(i)||Xee(i))?i=parseFloat(i):!D_e(i)&&Eg.test(n)&&(i=ute(e,n)),this.setBaseTarget(e,co(i)?i.get():i)),co(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=x$(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!co(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new R$),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class qte extends P_e{constructor(){super(...arguments),this.KeyframeResolver=cte}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function A_e(t){return window.getComputedStyle(t)}class R_e extends qte{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=$ee}readValueFromInstance(e,n){if(Vg.has(n)){const r=_$(n);return r&&r.default||0}else{const r=A_e(e),i=(jee(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return $te(e,n)}build(e,n,r){g$(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return w$(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;co(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class O_e extends qte{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pa}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Vg.has(n)){const r=_$(n);return r&&r.default||0}return n=Lee.has(n)?n:IA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Bee(e,n,r)}build(e,n,r){y$(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Fee(e,n,r,i)}mount(e){this.isSVGTag=b$(e.tagName),super.mount(e)}}const j_e=(t,e)=>f$(t)?new O_e(e):new R_e(e,{allowProjection:t!==R.Fragment}),I_e={layout:{ProjectionNode:Yte,MeasureLayout:Fte}},Td=I1e(hSe);class M_e extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function V_e({children:t,isPresent:e}){const n=R.useId(),r=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=R.useContext(i$);return R.useInsertionEffect(()=>{const{width:s,height:o,top:l,left:c}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const f=document.createElement("style");return a&&(f.nonce=a),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),de.jsx(M_e,{isPresent:e,childRef:r,sizeRef:i,children:R.cloneElement(t,{ref:r})})}const $_e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s})=>{const o=VA(L_e),l=R.useId(),c=R.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:f=>{o.set(f,!0);for(const h of o.values())if(!h)return;r&&r()},register:f=>(o.set(f,!1),()=>o.delete(f))}),a?[Math.random()]:[n]);return R.useMemo(()=>{o.forEach((f,h)=>o.set(h,!1))},[n]),R.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),s==="popLayout"&&(t=de.jsx(V_e,{isPresent:n,children:t})),de.jsx(jA.Provider,{value:c,children:t})};function L_e(){return new Map}const _T=t=>t.key||"";function GW(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const nx=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:s="sync"})=>{Em(!e,"Replace exitBeforeEnter with mode='wait'");const o=R.useMemo(()=>GW(t),[t]),l=o.map(_T),c=R.useRef(!0),f=R.useRef(o),h=VA(()=>new Map),[m,p]=R.useState(o),[v,y]=R.useState(o);s$(()=>{c.current=!1,f.current=o;for(let _=0;_<v.length;_++){const N=_T(v[_]);l.includes(N)?h.delete(N):h.get(N)!==!0&&h.set(N,!1)}},[v,l.length,l.join("-")]);const x=[];if(o!==m){let _=[...o];for(let N=0;N<v.length;N++){const k=v[N],P=_T(k);l.includes(P)||(_.splice(N,0,k),x.push(k))}s==="wait"&&x.length&&(_=x),y(GW(_)),p(o);return}s==="wait"&&v.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:S}=R.useContext(HE);return de.jsx(de.Fragment,{children:v.map(_=>{const N=_T(_),k=o===v||l.includes(N),P=()=>{if(h.has(N))h.set(N,!0);else return;let O=!0;h.forEach(A=>{A||(O=!1)}),O&&(S==null||S(),y(f.current),i&&i())};return de.jsx($_e,{isPresent:k,initial:!c.current||r?void 0:!1,custom:k?void 0:n,presenceAffectsLayout:a,mode:s,onExitComplete:k?void 0:P,children:_},N)})})};function Dd({children:t,features:e,strict:n=!1}){const[,r]=R.useState(!VI(e)),i=R.useRef(void 0);if(!VI(e)){const{renderer:a,...s}=e;i.current=a,u3(s)}return R.useEffect(()=>{VI(e)&&e().then(({renderer:a,...s})=>{u3(s),i.current=a,r(!0)})},[]),de.jsx(o$.Provider,{value:{renderer:i.current,strict:n},children:t})}function VI(t){return typeof t=="function"}const F_e=R.createContext(null);function B_e(){const t=R.useRef(!1);return s$(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function U_e(){const t=B_e(),[e,n]=R.useState(0),r=R.useCallback(()=>{t.current&&n(e+1)},[e]);return[R.useCallback(()=>hi.postRender(r),[r]),e]}const W_e=t=>!t.isLayoutDirty&&t.willUpdate(!1);function KW(){const t=new Set,e=new WeakMap,n=()=>t.forEach(W_e);return{add:r=>{t.add(r),e.set(r,r.addEventListener("willUpdate",n))},remove:r=>{t.delete(r);const i=e.get(r);i&&(i(),e.delete(r)),n()},dirty:n}}const Xte=t=>t===!0,z_e=t=>Xte(t===!0)||t==="id",Zte=({children:t,id:e,inherit:n=!0})=>{const r=R.useContext(HE),i=R.useContext(F_e),[a,s]=U_e(),o=R.useRef(null),l=r.id||i;o.current===null&&(z_e(n)&&l&&(e=e?l+"-"+e:l),o.current={id:e,group:Xte(n)&&r.group||KW()});const c=R.useMemo(()=>({...o.current,forceRender:a}),[s]);return de.jsx(HE.Provider,{value:c,children:t})},kd={renderer:j_e,...pNe,...CSe},H_e={...kd,...N_e,...I_e};function G_e(){return VA(()=>new kte("auto"))}var K_e=({children:t,navigate:e,disableAnimation:n=!1,disableRipple:r=!1,skipFramerMotionAnimations:i=n,validationBehavior:a="aria",locale:s="en-US",defaultDates:o,createCalendar:l,...c})=>{let f=t;e&&(f=de.jsx(uxe,{navigate:e,children:f}));const h=R.useMemo(()=>(n&&i&&(l$.skipAnimations=!0),{createCalendar:l,defaultDates:o,disableAnimation:n,disableRipple:r,validationBehavior:a}),[l,o==null?void 0:o.maxDate,o==null?void 0:o.minDate,n,r,a]);return de.jsx(_we,{value:h,children:de.jsx($we,{locale:s,children:de.jsx(LQ,{...c,children:f})})})};function dr(t){return R.forwardRef(t)}var zs=(t,e,n=!0)=>{if(!e)return[t,{}];const r=e.reduce((i,a)=>a in t?{...i,[a]:t[a]}:i,{});return n?[Object.keys(t).filter(a=>!e.includes(a)).reduce((a,s)=>({...a,[s]:t[s]}),{}),r]:[t,r]},Y_e={default:"bg-default text-default-foreground",primary:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",success:"bg-success text-success-foreground",warning:"bg-warning text-warning-foreground",danger:"bg-danger text-danger-foreground",foreground:"bg-foreground text-background"},J_e={default:"shadow-lg shadow-default/50 bg-default text-default-foreground",primary:"shadow-lg shadow-primary/40 bg-primary text-primary-foreground",secondary:"shadow-lg shadow-secondary/40 bg-secondary text-secondary-foreground",success:"shadow-lg shadow-success/40 bg-success text-success-foreground",warning:"shadow-lg shadow-warning/40 bg-warning text-warning-foreground",danger:"shadow-lg shadow-danger/40 bg-danger text-danger-foreground"},q_e={default:"bg-transparent border-default text-foreground",primary:"bg-transparent border-primary text-primary",secondary:"bg-transparent border-secondary text-secondary",success:"bg-transparent border-success text-success",warning:"bg-transparent border-warning text-warning",danger:"bg-transparent border-danger text-danger"},X_e={default:"bg-default/40 text-default-foreground",primary:"bg-primary/20 text-primary",secondary:"bg-secondary/20 text-secondary",success:"bg-success/20 text-success-600 dark:text-success",warning:"bg-warning/20 text-warning-600 dark:text-warning",danger:"bg-danger/20 text-danger dark:text-danger-500"},Z_e={default:"border-default bg-default-100 text-default-foreground",primary:"border-default bg-default-100 text-primary",secondary:"border-default bg-default-100 text-secondary",success:"border-default bg-default-100 text-success",warning:"border-default bg-default-100 text-warning",danger:"border-default bg-default-100 text-danger"},Q_e={default:"bg-transparent text-default-foreground",primary:"bg-transparent text-primary",secondary:"bg-transparent text-secondary",success:"bg-transparent text-success",warning:"bg-transparent text-warning",danger:"bg-transparent text-danger"},eCe={default:"border-default text-default-foreground hover:!bg-default",primary:"border-primary text-primary hover:!text-primary-foreground hover:!bg-primary",secondary:"border-secondary text-secondary hover:text-secondary-foreground hover:!bg-secondary",success:"border-success text-success hover:!text-success-foreground hover:!bg-success",warning:"border-warning text-warning hover:!text-warning-foreground hover:!bg-warning",danger:"border-danger text-danger hover:!text-danger-foreground hover:!bg-danger"},jt={solid:Y_e,shadow:J_e,bordered:q_e,flat:X_e,faded:Z_e,light:Q_e,ghost:eCe},CT=["small","medium","large"],YW={theme:{opacity:["disabled"],spacing:["divider"],borderWidth:CT,borderRadius:CT},classGroups:{shadow:[{shadow:CT}],"font-size":[{text:["tiny",...CT]}],"bg-image":["bg-stripe-gradient"]}},JW=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,tu=t=>!t||typeof t!="object"||Object.keys(t).length===0,tCe=(t,e)=>JSON.stringify(t)===JSON.stringify(e);function Qte(t,e){t.forEach(function(n){Array.isArray(n)?Qte(n,e):e.push(n)})}function ene(t){let e=[];return Qte(t,e),e}var tne=(...t)=>ene(t).filter(Boolean),nne=(t,e)=>{let n={},r=Object.keys(t),i=Object.keys(e);for(let a of r)if(i.includes(a)){let s=t[a],o=e[a];typeof s=="object"&&typeof o=="object"?n[a]=nne(s,o):Array.isArray(s)||Array.isArray(o)?n[a]=tne(o,s):n[a]=o+" "+s}else n[a]=t[a];for(let a of i)r.includes(a)||(n[a]=e[a]);return n},qW=t=>!t||typeof t!="string"?t:t.replace(/\s+/g," ").trim();function nCe(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=rne(e))&&(r&&(r+=" "),r+=n);return r}function rne(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=rne(t[r]))&&(n&&(n+=" "),n+=e);return n}var j$="-";function rCe(t){var e=aCe(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function a(o){var l=o.split(j$);return l[0]===""&&l.length!==1&&l.shift(),ine(l,e)||iCe(o)}function s(o,l){var c=n[o]||[];return l&&i[o]?[].concat(c,i[o]):c}return{getClassGroupId:a,getConflictingClassGroupIds:s}}function ine(t,e){var s;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?ine(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var a=t.join(j$);return(s=e.validators.find(function(o){var l=o.validator;return l(a)}))==null?void 0:s.classGroupId}}var XW=/^\[(.+)\]$/;function iCe(t){if(XW.test(t)){var e=XW.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function aCe(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=oCe(Object.entries(t.classGroups),n);return i.forEach(function(a){var s=a[0],o=a[1];N3(o,r,s,e)}),r}function N3(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var a=i===""?e:ZW(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(sCe(i)){N3(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(s){var o=s[0],l=s[1];N3(l,ZW(e,o),n,r)})})}function ZW(t,e){var n=t;return e.split(j$).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function sCe(t){return t.isThemeGetter}function oCe(t,e){return e?t.map(function(n){var r=n[0],i=n[1],a=i.map(function(s){return typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(function(o){var l=o[0],c=o[1];return[e+l,c]})):s});return[r,a]}):t}function lCe(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(a,s){n.set(a,s),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(s){var o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set:function(s,o){n.has(s)?n.set(s,o):i(s,o)}}}var ane="!";function uCe(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(s){for(var o=[],l=0,c=0,f,h=0;h<s.length;h++){var m=s[h];if(l===0){if(m===r&&(n||s.slice(h,h+i)===e)){o.push(s.slice(c,h)),c=h+i;continue}if(m==="/"){f=h;continue}}m==="["?l++:m==="]"&&l--}var p=o.length===0?s:s.substring(c),v=p.startsWith(ane),y=v?p.substring(1):p,x=f&&f>c?f-c:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:x}}}function cCe(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function dCe(t){return{cache:lCe(t.cacheSize),splitModifiers:uCe(t),...rCe(t)}}var fCe=/\s+/;function hCe(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,a=new Set;return t.trim().split(fCe).map(function(s){var o=n(s),l=o.modifiers,c=o.hasImportantModifier,f=o.baseClassName,h=o.maybePostfixModifierPosition,m=r(h?f.substring(0,h):f),p=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:s};if(m=r(f),!m)return{isTailwindClass:!1,originalClassName:s};p=!1}var v=cCe(l).join(":"),y=c?v+ane:v;return{isTailwindClass:!0,modifierId:y,classGroupId:m,originalClassName:s,hasPostfixModifier:p}}).reverse().filter(function(s){if(!s.isTailwindClass)return!0;var o=s.modifierId,l=s.classGroupId,c=s.hasPostfixModifier,f=o+l;return a.has(f)?!1:(a.add(f),i(l,c).forEach(function(h){return a.add(o+h)}),!0)}).reverse().map(function(s){return s.originalClassName}).join(" ")}function _3(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,a,s=o;function o(c){var f=e[0],h=e.slice(1),m=h.reduce(function(p,v){return v(p)},f());return r=dCe(m),i=r.cache.get,a=r.cache.set,s=l,l(c)}function l(c){var f=i(c);if(f)return f;var h=hCe(c,r);return a(c,h),h}return function(){return s(nCe.apply(null,arguments))}}function ki(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var sne=/^\[(?:([a-z-]+):)?(.+)\]$/i,mCe=/^\d+\/\d+$/,pCe=new Set(["px","full","screen"]),gCe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vCe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yCe=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function rd(t){return my(t)||pCe.has(t)||mCe.test(t)||C3(t)}function C3(t){return tb(t,"length",NCe)}function bCe(t){return tb(t,"size",one)}function wCe(t){return tb(t,"position",one)}function xCe(t){return tb(t,"url",_Ce)}function TT(t){return tb(t,"number",my)}function my(t){return!Number.isNaN(Number(t))}function SCe(t){return t.endsWith("%")&&my(t.slice(0,-1))}function hS(t){return QW(t)||tb(t,"number",QW)}function jr(t){return sne.test(t)}function mS(){return!0}function Ip(t){return gCe.test(t)}function ECe(t){return tb(t,"",CCe)}function tb(t,e,n){var r=sne.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function NCe(t){return vCe.test(t)}function one(){return!1}function _Ce(t){return t.startsWith("url(")}function QW(t){return Number.isInteger(Number(t))}function CCe(t){return yCe.test(t)}function T3(){var t=ki("colors"),e=ki("spacing"),n=ki("blur"),r=ki("brightness"),i=ki("borderColor"),a=ki("borderRadius"),s=ki("borderSpacing"),o=ki("borderWidth"),l=ki("contrast"),c=ki("grayscale"),f=ki("hueRotate"),h=ki("invert"),m=ki("gap"),p=ki("gradientColorStops"),v=ki("gradientColorStopPositions"),y=ki("inset"),x=ki("margin"),S=ki("opacity"),_=ki("padding"),N=ki("saturate"),k=ki("scale"),P=ki("sepia"),O=ki("skew"),A=ki("space"),T=ki("translate"),L=function(){return["auto","contain","none"]},B=function(){return["auto","hidden","clip","visible","scroll"]},W=function(){return["auto",jr,e]},Y=function(){return[jr,e]},V=function(){return["",rd]},I=function(){return["auto",my,jr]},H=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},q=function(){return["solid","dashed","dotted","double","none"]},F=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},J=function(){return["start","end","center","between","around","evenly","stretch"]},Z=function(){return["","0",jr]},G=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},oe=function(){return[my,TT]},ae=function(){return[my,jr]};return{cacheSize:500,theme:{colors:[mS],spacing:[rd],blur:["none","",Ip,jr],brightness:oe(),borderColor:[t],borderRadius:["none","","full",Ip,jr],borderSpacing:Y(),borderWidth:V(),contrast:oe(),grayscale:Z(),hueRotate:ae(),invert:Z(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[SCe,C3],inset:W(),margin:W(),opacity:oe(),padding:Y(),saturate:oe(),scale:oe(),sepia:Z(),skew:ae(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",jr]}],container:["container"],columns:[{columns:[Ip]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(H(),[jr])}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",hS]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",jr]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",hS]}],"grid-cols":[{"grid-cols":[mS]}],"col-start-end":[{col:["auto",{span:["full",hS]},jr]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[mS]}],"row-start-end":[{row:["auto",{span:[hS]},jr]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",jr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",jr]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(J())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(J(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(J(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",jr,e]}],"min-w":[{"min-w":["min","max","fit",jr,rd]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ip]},Ip,jr]}],h:[{h:[jr,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",jr,rd]}],"max-h":[{"max-h":[jr,e,"min","max","fit"]}],"font-size":[{text:["base",Ip,C3]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",TT]}],"font-family":[{font:[mS]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",jr]}],"line-clamp":[{"line-clamp":["none",my,TT]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jr,rd]}],"list-image":[{"list-image":["none",jr]}],"list-style-type":[{list:["none","disc","decimal",jr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(q(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",rd]}],"underline-offset":[{"underline-offset":["auto",jr,rd]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",jr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",jr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(H(),[wCe])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bCe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xCe]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[].concat(q(),["hidden"])}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(q())}],"outline-offset":[{"outline-offset":[jr,rd]}],"outline-w":[{outline:[rd]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[rd]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ip,ECe]}],"shadow-color":[{shadow:[mS]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":F()}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ip,jr]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[N]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",jr]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",jr]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",jr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[hS,jr]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",jr]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",jr]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",jr]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[rd,TT]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}function TCe(t,e){for(var n in e)lne(t,n,e[n]);return t}var DCe=Object.prototype.hasOwnProperty,kCe=new Set(["string","number","boolean"]);function lne(t,e,n){if(!DCe.call(t,e)||kCe.has(typeof n)||n===null){t[e]=n;return}if(Array.isArray(n)&&Array.isArray(t[e])){t[e]=t[e].concat(n);return}if(typeof n=="object"&&typeof t[e]=="object"){if(t[e]===null){t[e]=n;return}for(var r in n)lne(t[e],r,n[r])}}function PCe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return typeof t=="function"?_3.apply(void 0,[T3,t].concat(n)):_3.apply(void 0,[function(){return TCe(T3(),t)}].concat(n))}var ACe=_3(T3),RCe={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},une=t=>t||void 0,JE=(...t)=>une(ene(t).filter(Boolean).join(" ")),$I=null,iP={},D3=!1,pS=(...t)=>e=>e.twMerge?((!$I||D3)&&(D3=!1,$I=tu(iP)?ACe:PCe(iP)),une($I(JE(t)))):JE(t),ez=(t,e)=>{for(let n in e)t.hasOwnProperty(n)?t[n]=JE(t[n],e[n]):t[n]=e[n];return t},OCe=(t,e)=>{let{extend:n=null,slots:r={},variants:i={},compoundVariants:a=[],compoundSlots:s=[],defaultVariants:o={}}=t,l={...RCe,...e},c=n!=null&&n.base?JE(n.base,t==null?void 0:t.base):t==null?void 0:t.base,f=n!=null&&n.variants&&!tu(n.variants)?nne(i,n.variants):i,h=n!=null&&n.defaultVariants&&!tu(n.defaultVariants)?{...n.defaultVariants,...o}:o;!tu(l.twMergeConfig)&&!tCe(l.twMergeConfig,iP)&&(D3=!0,iP=l.twMergeConfig);let m=tu(n==null?void 0:n.slots),p=tu(r)?{}:{base:JE(t==null?void 0:t.base,m&&(n==null?void 0:n.base)),...r},v=m?p:ez({...n==null?void 0:n.slots},tu(p)?{base:t==null?void 0:t.base}:p),y=S=>{if(tu(f)&&tu(r)&&m)return pS(c,S==null?void 0:S.class,S==null?void 0:S.className)(l);if(a&&!Array.isArray(a))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof a}`);if(s&&!Array.isArray(s))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof s}`);let _=(Y,V,I=[],H)=>{let q=I;if(typeof V=="string")q=q.concat(qW(V).split(" ").map(F=>`${Y}:${F}`));else if(Array.isArray(V))q=q.concat(V.reduce((F,J)=>F.concat(`${Y}:${J}`),[]));else if(typeof V=="object"&&typeof H=="string"){for(let F in V)if(V.hasOwnProperty(F)&&F===H){let J=V[F];if(J&&typeof J=="string"){let Z=qW(J);q[H]?q[H]=q[H].concat(Z.split(" ").map(G=>`${Y}:${G}`)):q[H]=Z.split(" ").map(G=>`${Y}:${G}`)}else Array.isArray(J)&&J.length>0&&(q[H]=J.reduce((Z,G)=>Z.concat(`${Y}:${G}`),[]))}}return q},N=(Y,V=f,I=null,H=null)=>{var q;let F=V[Y];if(!F||tu(F))return null;let J=(q=H==null?void 0:H[Y])!=null?q:S==null?void 0:S[Y];if(J===null)return null;let Z=JW(J),G=Array.isArray(l.responsiveVariants)&&l.responsiveVariants.length>0||l.responsiveVariants===!0,oe=h==null?void 0:h[Y],ae=[];if(typeof Z=="object"&&G)for(let[re,X]of Object.entries(Z)){let ce=F[X];if(re==="initial"){oe=X;continue}Array.isArray(l.responsiveVariants)&&!l.responsiveVariants.includes(re)||(ae=_(re,ce,ae,I))}let te=F[Z]||F[JW(oe)];return typeof ae=="object"&&typeof I=="string"&&ae[I]?ez(ae,te):ae.length>0?(ae.push(te),ae):te},k=()=>f?Object.keys(f).map(Y=>N(Y,f)):null,P=(Y,V)=>{if(!f||typeof f!="object")return null;let I=new Array;for(let H in f){let q=N(H,f,Y,V),F=Y==="base"&&typeof q=="string"?q:q&&q[Y];F&&(I[I.length]=F)}return I},O={};for(let Y in S)S[Y]!==void 0&&(O[Y]=S[Y]);let A=(Y,V)=>{var I;let H=typeof(S==null?void 0:S[Y])=="object"?{[Y]:(I=S[Y])==null?void 0:I.initial}:{};return{...h,...O,...H,...V}},T=(Y=[],V)=>{let I=[];for(let{class:H,className:q,...F}of Y){let J=!0;for(let[Z,G]of Object.entries(F)){let oe=A(Z,V);if(Array.isArray(G)){if(!G.includes(oe[Z])){J=!1;break}}else if(oe[Z]!==G){J=!1;break}}J&&(H&&I.push(H),q&&I.push(q))}return I},L=Y=>{let V=T(a,Y),I=T(n==null?void 0:n.compoundVariants,Y);return tne(I,V)},B=Y=>{let V=L(Y);if(!Array.isArray(V))return V;let I={};for(let H of V)if(typeof H=="string"&&(I.base=pS(I.base,H)(l)),typeof H=="object")for(let[q,F]of Object.entries(H))I[q]=pS(I[q],F)(l);return I},W=Y=>{if(s.length<1)return null;let V={};for(let{slots:I=[],class:H,className:q,...F}of s){if(!tu(F)){let J=!0;for(let Z of Object.keys(F)){let G=A(Z,Y)[Z];if(G===void 0||(Array.isArray(F[Z])?!F[Z].includes(G):F[Z]!==G)){J=!1;break}}if(!J)continue}for(let J of I)V[J]=V[J]||[],V[J].push([H,q])}return V};if(!tu(r)||!m){let Y={};if(typeof v=="object"&&!tu(v))for(let V of Object.keys(v))Y[V]=I=>{var H,q;return pS(v[V],P(V,I),((H=B(I))!=null?H:[])[V],((q=W(I))!=null?q:[])[V],I==null?void 0:I.class,I==null?void 0:I.className)(l)};return Y}return pS(c,k(),L(),S==null?void 0:S.class,S==null?void 0:S.className)(l)},x=()=>{if(!(!f||typeof f!="object"))return Object.keys(f)};return y.variantKeys=x(),y.extend=n,y.base=c,y.slots=v,y.variants=f,y.defaultVariants=h,y.compoundSlots=s,y.compoundVariants=a,y},ji=(t,e)=>{var n,r,i;return OCe(t,{...e,twMerge:(n=e==null?void 0:e.twMerge)!=null?n:!0,twMergeConfig:{...e==null?void 0:e.twMergeConfig,theme:{...(r=e==null?void 0:e.twMergeConfig)==null?void 0:r.theme,...YW.theme},classGroups:{...(i=e==null?void 0:e.twMergeConfig)==null?void 0:i.classGroups,...YW.classGroups}}})},fc=["outline-none","data-[focus-visible=true]:z-10","data-[focus-visible=true]:outline-2","data-[focus-visible=true]:outline-focus","data-[focus-visible=true]:outline-offset-2"],cne=["outline-none","group-data-[focus-visible=true]:z-10","group-data-[focus-visible=true]:ring-2","group-data-[focus-visible=true]:ring-focus","group-data-[focus-visible=true]:ring-offset-2","group-data-[focus-visible=true]:ring-offset-background"],jCe=["outline-none","ring-2","ring-focus","ring-offset-2","ring-offset-background"],d0={default:["[&+.border-medium.border-default]:ms-[calc(theme(borderWidth.medium)*-1)]"],primary:["[&+.border-medium.border-primary]:ms-[calc(theme(borderWidth.medium)*-1)]"],secondary:["[&+.border-medium.border-secondary]:ms-[calc(theme(borderWidth.medium)*-1)]"],success:["[&+.border-medium.border-success]:ms-[calc(theme(borderWidth.medium)*-1)]"],warning:["[&+.border-medium.border-warning]:ms-[calc(theme(borderWidth.medium)*-1)]"],danger:["[&+.border-medium.border-danger]:ms-[calc(theme(borderWidth.medium)*-1)]"]},tz=ji({slots:{base:"inline-flex",tabList:["flex","p-1","h-fit","gap-2","items-center","flex-nowrap","overflow-x-scroll","scrollbar-hide","bg-default-100"],tab:["z-0","w-full","px-3","py-1","flex","group","relative","justify-center","items-center","outline-none","cursor-pointer","transition-opacity","tap-highlight-transparent","data-[disabled=true]:cursor-not-allowed","data-[disabled=true]:opacity-30","data-[hover-unselected=true]:opacity-disabled",...fc],tabContent:["relative","z-10","text-inherit","whitespace-nowrap","transition-colors","text-default-500","group-data-[selected=true]:text-foreground"],cursor:["absolute","z-0","bg-white"],panel:["py-3","px-1","outline-none","data-[inert=true]:hidden",...fc],wrapper:[]},variants:{variant:{solid:{cursor:"inset-0"},light:{tabList:"bg-transparent dark:bg-transparent",cursor:"inset-0"},underlined:{tabList:"bg-transparent dark:bg-transparent",cursor:"h-[2px] w-[80%] bottom-0 shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]"},bordered:{tabList:"bg-transparent dark:bg-transparent border-medium border-default-200 shadow-sm",cursor:"inset-0"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{tabList:"rounded-medium",tab:"h-7 text-tiny rounded-small",cursor:"rounded-small"},md:{tabList:"rounded-medium",tab:"h-8 text-small rounded-small",cursor:"rounded-small"},lg:{tabList:"rounded-large",tab:"h-9 text-medium rounded-medium",cursor:"rounded-medium"}},radius:{none:{tabList:"rounded-none",tab:"rounded-none",cursor:"rounded-none"},sm:{tabList:"rounded-medium",tab:"rounded-small",cursor:"rounded-small"},md:{tabList:"rounded-medium",tab:"rounded-small",cursor:"rounded-small"},lg:{tabList:"rounded-large",tab:"rounded-medium",cursor:"rounded-medium"},full:{tabList:"rounded-full",tab:"rounded-full",cursor:"rounded-full"}},fullWidth:{true:{base:"w-full",tabList:"w-full"}},isDisabled:{true:{tabList:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{tab:"transition-none",tabContent:"transition-none"}},placement:{top:{},start:{tabList:"flex-col",panel:"py-0 px-3",wrapper:"flex"},end:{tabList:"flex-col",panel:"py-0 px-3",wrapper:"flex flex-row-reverse"},bottom:{wrapper:"flex flex-col-reverse"}}},defaultVariants:{color:"default",variant:"solid",size:"md",fullWidth:!1,isDisabled:!1},compoundVariants:[{variant:["solid","bordered","light"],color:"default",class:{cursor:["bg-background","dark:bg-default","shadow-small"],tabContent:"group-data-[selected=true]:text-default-foreground"}},{variant:["solid","bordered","light"],color:"primary",class:{cursor:jt.solid.primary,tabContent:"group-data-[selected=true]:text-primary-foreground"}},{variant:["solid","bordered","light"],color:"secondary",class:{cursor:jt.solid.secondary,tabContent:"group-data-[selected=true]:text-secondary-foreground"}},{variant:["solid","bordered","light"],color:"success",class:{cursor:jt.solid.success,tabContent:"group-data-[selected=true]:text-success-foreground"}},{variant:["solid","bordered","light"],color:"warning",class:{cursor:jt.solid.warning,tabContent:"group-data-[selected=true]:text-warning-foreground"}},{variant:["solid","bordered","light"],color:"danger",class:{cursor:jt.solid.danger,tabContent:"group-data-[selected=true]:text-danger-foreground"}},{variant:"underlined",color:"default",class:{cursor:"bg-foreground",tabContent:"group-data-[selected=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{cursor:"bg-primary",tabContent:"group-data-[selected=true]:text-primary"}},{variant:"underlined",color:"secondary",class:{cursor:"bg-secondary",tabContent:"group-data-[selected=true]:text-secondary"}},{variant:"underlined",color:"success",class:{cursor:"bg-success",tabContent:"group-data-[selected=true]:text-success"}},{variant:"underlined",color:"warning",class:{cursor:"bg-warning",tabContent:"group-data-[selected=true]:text-warning"}},{variant:"underlined",color:"danger",class:{cursor:"bg-danger",tabContent:"group-data-[selected=true]:text-danger"}},{disableAnimation:!0,variant:"underlined",class:{tab:["after:content-['']","after:absolute","after:bottom-0","after:h-[2px]","after:w-[80%]","after:opacity-0","after:shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","data-[selected=true]:after:opacity-100"]}},{disableAnimation:!0,color:"default",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-default data-[selected=true]:text-default-foreground"}},{disableAnimation:!0,color:"primary",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-primary data-[selected=true]:text-primary-foreground"}},{disableAnimation:!0,color:"secondary",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-secondary data-[selected=true]:text-secondary-foreground"}},{disableAnimation:!0,color:"success",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-success data-[selected=true]:text-success-foreground"}},{disableAnimation:!0,color:"warning",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-warning data-[selected=true]:text-warning-foreground"}},{disableAnimation:!0,color:"danger",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-danger data-[selected=true]:text-danger-foreground"}},{disableAnimation:!0,color:"default",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-foreground"}},{disableAnimation:!0,color:"primary",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-primary"}},{disableAnimation:!0,color:"secondary",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-secondary"}},{disableAnimation:!0,color:"success",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-success"}},{disableAnimation:!0,color:"warning",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-warning"}},{disableAnimation:!0,color:"danger",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-danger"}}],compoundSlots:[{variant:"underlined",slots:["tab","tabList","cursor"],class:["rounded-none"]}]}),nz=ji({slots:{base:"group relative max-w-fit inline-flex items-center justify-start cursor-pointer touch-none tap-highlight-transparent",wrapper:["px-1","relative","inline-flex","items-center","justify-start","flex-shrink-0","overflow-hidden","bg-default-200","rounded-full",...cne],thumb:["z-10","flex","items-center","justify-center","bg-white","shadow-small","rounded-full","origin-right"],startContent:"z-0 absolute left-1.5 rtl:right-1.5 rtl:left-[unset] text-current",endContent:"z-0 absolute right-1.5 rtl:left-1.5 rtl:right-[unset] text-default-600",thumbIcon:"text-black",label:"relative text-foreground select-none"},variants:{color:{default:{wrapper:["group-data-[selected=true]:bg-default-400","group-data-[selected=true]:text-default-foreground"]},primary:{wrapper:["group-data-[selected=true]:bg-primary","group-data-[selected=true]:text-primary-foreground"]},secondary:{wrapper:["group-data-[selected=true]:bg-secondary","group-data-[selected=true]:text-secondary-foreground"]},success:{wrapper:["group-data-[selected=true]:bg-success","group-data-[selected=true]:text-success-foreground"]},warning:{wrapper:["group-data-[selected=true]:bg-warning","group-data-[selected=true]:text-warning-foreground"]},danger:{wrapper:["group-data-[selected=true]:bg-danger","data-[selected=true]:text-danger-foreground"]}},size:{sm:{wrapper:"w-10 h-6 mr-2 rtl:ml-2 rtl:mr-[unset]",thumb:["w-4 h-4 text-tiny","group-data-[selected=true]:ml-4 rtl:group-data-[selected=true]:ml-0 rtl:group-data-[selected=true]:mr-4"],endContent:"text-tiny",startContent:"text-tiny",label:"text-small"},md:{wrapper:"w-12 h-7 mr-2 rtl:ml-2 rtl:mr-[unset]",thumb:["w-5 h-5 text-small","group-data-[selected=true]:ml-5 rtl:group-data-[selected=true]:ml-0 rtl:group-data-[selected=true]:mr-5"],endContent:"text-small",startContent:"text-small",label:"text-medium"},lg:{wrapper:"w-14 h-8 mr-2 rtl:ml-2 rtl:mr-[unset]",thumb:["w-6 h-6 text-medium","group-data-[selected=true]:ml-6 rtl:group-data-[selected=true]:ml-0 rtl:group-data-[selected=true]:mr-6"],endContent:"text-medium",startContent:"text-medium",label:"text-large"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{wrapper:"transition-none",thumb:"transition-none"},false:{wrapper:"transition-background",thumb:"transition-all",startContent:["opacity-0","scale-50","transition-transform-opacity","group-data-[selected=true]:scale-100","group-data-[selected=true]:opacity-100"],endContent:["opacity-100","transition-transform-opacity","group-data-[selected=true]:translate-x-3","group-data-[selected=true]:opacity-0"]}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1},compoundVariants:[{disableAnimation:!1,size:"sm",class:{thumb:["group-data-[pressed=true]:w-5","group-data-[selected]:group-data-[pressed]:ml-3"]}},{disableAnimation:!1,size:"md",class:{thumb:["group-data-[pressed=true]:w-6","group-data-[selected]:group-data-[pressed]:ml-4"]}},{disableAnimation:!1,size:"lg",class:{thumb:["group-data-[pressed=true]:w-7","group-data-[selected]:group-data-[pressed]:ml-5"]}}]}),ICe=["data-[top-scroll=true]:[mask-image:linear-gradient(0deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[bottom-scroll=true]:[mask-image:linear-gradient(180deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[top-bottom-scroll=true]:[mask-image:linear-gradient(#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"],MCe=["data-[left-scroll=true]:[mask-image:linear-gradient(270deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[right-scroll=true]:[mask-image:linear-gradient(90deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[left-right-scroll=true]:[mask-image:linear-gradient(to_right,#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"],rz=ji({base:[],variants:{orientation:{vertical:["overflow-y-auto",...ICe],horizontal:["overflow-x-auto",...MCe]},hideScrollBar:{true:"scrollbar-hide",false:""}},defaultVariants:{orientation:"vertical",hideScrollBar:!1}}),iz=ji({slots:{base:["group inline-flex flex-col relative w-full"],label:["block","absolute","z-10","origin-top-left","rtl:origin-top-right","subpixel-antialiased","text-small","text-foreground-500","pointer-events-none"],mainWrapper:"w-full flex flex-col",trigger:"relative px-3 gap-3 w-full inline-flex flex-row items-center shadow-sm outline-none tap-highlight-transparent",innerWrapper:"inline-flex h-full w-[calc(100%_-_theme(spacing.6))] min-h-4 items-center gap-1.5 box-border",selectorIcon:"absolute right-3 rtl:left-3 rtl:right-[unset] w-4 h-4",spinner:"absolute right-3 rtl:left-3 rtl:right-[unset]",value:["text-foreground-500","font-normal","w-full","text-left","rtl:text-right"],listboxWrapper:"scroll-py-6 max-h-64 w-full",listbox:"",popoverContent:"w-full p-1 overflow-hidden",helperWrapper:"p-1 flex relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{trigger:["bg-default-100","data-[hover=true]:bg-default-200","group-data-[focus=true]:bg-default-100"]},faded:{trigger:["bg-default-100","border-medium","border-default-200","data-[hover=true]:border-default-400"],value:"group-data-[has-value=true]:text-default-foreground"},bordered:{trigger:["border-medium","border-default-200","data-[hover=true]:border-default-400","data-[open=true]:border-default-foreground","data-[focus=true]:border-default-foreground","data-[focus=true]:border-default-foreground"]},underlined:{trigger:["!px-1","!pb-0","!gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","data-[open=true]:after:w-full","data-[focus=true]:after:w-full"],label:"group-data-[filled=true]:text-foreground"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:"text-tiny",trigger:"h-8 min-h-8 px-2 rounded-small",value:"text-small"},md:{trigger:"h-10 min-h-10 rounded-medium",value:"text-small"},lg:{trigger:"h-12 min-h-12 rounded-large",value:"text-medium"}},radius:{none:{trigger:"rounded-none"},sm:{trigger:"rounded-small"},md:{trigger:"rounded-medium"},lg:{trigger:"rounded-large"},full:{trigger:"rounded-full"}},labelPlacement:{outside:{base:"flex flex-col"},"outside-left":{base:"flex-row items-center flex-nowrap items-start",label:"relative pr-2 rtl:pl-2 rtl:pr-[unset] text-foreground"},inside:{label:"text-tiny cursor-pointer",trigger:"flex-col items-start justify-center gap-0"}},fullWidth:{true:{base:"w-full"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",trigger:"pointer-events-none"}},isInvalid:{true:{label:"!text-danger",value:"!text-danger",selectorIcon:"text-danger"}},isRequired:{true:{label:"after:content-['*'] after:text-danger after:ml-0.5"}},isMultiline:{true:{label:"relative",trigger:"!h-auto"},false:{value:"truncate"}},disableAnimation:{true:{trigger:"after:transition-none",base:"transition-none",label:"transition-none",selectorIcon:"transition-none"},false:{base:"transition-background motion-reduce:transition-none !duration-150",label:["will-change-auto","origin-top-left","rtl:origin-top-right","!duration-200","!ease-out","transition-[transform,color,left,opacity]","motion-reduce:transition-none"],selectorIcon:"transition-transform duration-150 ease motion-reduce:transition-none"}},disableSelectorIconRotation:{true:{},false:{selectorIcon:"data-[open=true]:rotate-180"}}},defaultVariants:{variant:"flat",color:"default",size:"md",labelPlacement:"inside",fullWidth:!0,isDisabled:!1,isMultiline:!1,disableSelectorIconRotation:!1},compoundVariants:[{variant:"flat",color:"default",class:{value:"group-data-[has-value=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{trigger:["bg-primary-50","text-primary","data-[hover=true]:bg-primary-100","group-data-[focus=true]:bg-primary-50"],value:"text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{trigger:["bg-secondary-50","text-secondary","data-[hover=true]:bg-secondary-100","group-data-[focus=true]:bg-secondary-50"],value:"text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{trigger:["bg-success-50","text-success-600","dark:text-success","data-[hover=true]:bg-success-100","group-data-[focus=true]:bg-success-50"],value:"text-success-600 dark:text-success",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{trigger:["bg-warning-50","text-warning-600","dark:text-warning","data-[hover=true]:bg-warning-100","group-data-[focus=true]:bg-warning-50"],value:"text-warning-600 dark:text-warning",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{trigger:["bg-danger-50","text-danger","dark:text-danger-500","data-[hover=true]:bg-danger-100","group-data-[focus=true]:bg-danger-50"],value:"text-danger dark:text-danger-500",label:"text-danger dark:text-danger-500"}},{variant:"faded",color:"primary",class:{trigger:"data-[hover=true]:border-primary",label:"text-primary"}},{variant:"faded",color:"secondary",class:{trigger:"data-[hover=true]:border-secondary",label:"text-secondary"}},{variant:"faded",color:"success",class:{trigger:"data-[hover=true]:border-success",label:"text-success"}},{variant:"faded",color:"warning",class:{trigger:"data-[hover=true]:border-warning",label:"text-warning"}},{variant:"faded",color:"danger",class:{trigger:"data-[hover=true]:border-danger",label:"text-danger"}},{variant:"underlined",color:"default",class:{value:"group-data-[has-value=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{trigger:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{trigger:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{trigger:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{trigger:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{trigger:"after:bg-danger",label:"text-danger"}},{variant:"bordered",color:"primary",class:{trigger:["data-[open=true]:border-primary","data-[focus=true]:border-primary"],label:"text-primary"}},{variant:"bordered",color:"secondary",class:{trigger:["data-[open=true]:border-secondary","data-[focus=true]:border-secondary"],label:"text-secondary"}},{variant:"bordered",color:"success",class:{trigger:["data-[open=true]:border-success","data-[focus=true]:border-success"],label:"text-success"}},{variant:"bordered",color:"warning",class:{trigger:["data-[open=true]:border-warning","data-[focus=true]:border-warning"],label:"text-warning"}},{variant:"bordered",color:"danger",class:{trigger:["data-[open=true]:border-danger","data-[focus=true]:border-danger"],label:"text-danger"}},{labelPlacement:"inside",color:"default",class:{label:"group-data-[filled=true]:text-default-600"}},{labelPlacement:"outside",color:"default",class:{label:"group-data-[filled=true]:text-foreground"}},{radius:"full",size:["sm"],class:{trigger:"px-3"}},{radius:"full",size:"md",class:{trigger:"px-4"}},{radius:"full",size:"lg",class:{trigger:"px-5"}},{disableAnimation:!1,variant:["faded","bordered"],class:{trigger:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{trigger:"after:transition-width motion-reduce:after:transition-none"}},{variant:["flat","faded"],class:{trigger:[...fc]}},{isInvalid:!0,variant:"flat",class:{trigger:["bg-danger-50","data-[hover=true]:bg-danger-100","group-data-[focus=true]:bg-danger-50"]}},{isInvalid:!0,variant:"bordered",class:{trigger:"!border-danger group-data-[focus=true]:border-danger"}},{isInvalid:!0,variant:"underlined",class:{trigger:"after:bg-danger"}},{labelPlacement:"inside",size:"sm",class:{trigger:"h-12 min-h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{trigger:"h-14 min-h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{label:"text-small",trigger:"h-16 min-h-16 py-2.5 gap-0"}},{labelPlacement:["inside","outside"],class:{label:["group-data-[filled=true]:pointer-events-auto"]}},{labelPlacement:"outside",isMultiline:!1,class:{base:"group relative justify-end",label:["pb-0","z-20","top-1/2","-translate-y-1/2","group-data-[filled=true]:left-0","rtl:group-data-[filled=true]:right-0","rtl:group-data-[filled=true]:left-[unset]"]}},{labelPlacement:["inside"],class:{label:"group-data-[filled=true]:scale-85"}},{labelPlacement:"inside",size:["sm","md"],class:{label:"text-small"}},{labelPlacement:"inside",isMultiline:!1,size:"sm",class:{label:["group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)]"],innerWrapper:"group-data-[has-label=true]:pt-4"}},{labelPlacement:"inside",isMultiline:!1,size:"md",class:{label:["group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)]"],innerWrapper:"group-data-[has-label=true]:pt-4"}},{labelPlacement:"inside",isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)]"],innerWrapper:"group-data-[has-label=true]:pt-5"}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"sm",class:{label:["group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:["group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"sm",class:{label:["group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"md",class:{label:["group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)]"]}},{labelPlacement:"outside",size:"sm",isMultiline:!1,class:{label:["left-2","rtl:right-2","rtl:left-[unset]","text-tiny","group-data-[filled=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)]"}},{labelPlacement:"outside",isMultiline:!1,size:"md",class:{label:["left-3","rtl:right-3","rtl:left-[unset]","text-small","group-data-[filled=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)]"}},{labelPlacement:"outside",isMultiline:!1,size:"lg",class:{label:["left-3","rtl:right-3","rtl:left-[unset]","text-medium","group-data-[filled=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)]"}},{labelPlacement:"outside",isMultiline:!0,class:{label:"pb-1.5"}},{labelPlacement:["inside","outside"],class:{label:["pe-2","max-w-full","text-ellipsis","overflow-hidden"]}}]}),LI=ji({slots:{base:"flex flex-col w-full gap-1",labelWrapper:"w-full flex justify-between items-center",label:"",value:"",step:["h-1.5","w-1.5","absolute","rounded-full","bg-default-300/50","data-[in-range=true]:bg-background/50"],mark:["absolute","text-small","cursor-default","opacity-50","data-[in-range=true]:opacity-100"],trackWrapper:"relative flex gap-2",track:["flex","w-full","relative","rounded-full","bg-default-300/50"],filler:"h-full absolute",thumb:["flex","justify-center","items-center","before:absolute","before:w-11","before:h-11","before:rounded-full","after:shadow-small","after:shadow-small","after:bg-background","data-[focused=true]:z-10",fc],startContent:[],endContent:[]},variants:{size:{sm:{label:"text-small",value:"text-small",thumb:"w-5 h-5 after:w-4 after:h-4",step:"data-[in-range=false]:bg-default-200"},md:{thumb:"w-6 h-6 after:w-5 after:h-5",label:"text-small",value:"text-small"},lg:{thumb:"h-7 w-7 after:w-5 after:h-5",step:"w-2 h-2",label:"text-medium",value:"text-medium",mark:"mt-2"}},radius:{none:{thumb:"rounded-none after:rounded-none"},sm:{thumb:"rounded-[calc(theme(borderRadius.small)/2)] after:rounded-[calc(theme(borderRadius.small)/3)]"},md:{thumb:"rounded-[calc(theme(borderRadius.medium)/2)] after:rounded-[calc(theme(borderRadius.medium)/3)]"},lg:{thumb:"rounded-[calc(theme(borderRadius.large)/1.5)] after:rounded-[calc(theme(borderRadius.large)/2)]"},full:{thumb:"rounded-full after:rounded-full"}},color:{foreground:{filler:"bg-foreground",thumb:"bg-foreground"},primary:{filler:"bg-primary",thumb:"bg-primary"},secondary:{filler:"bg-secondary",thumb:"bg-secondary"},success:{filler:"bg-success",thumb:"bg-success"},warning:{filler:"bg-warning",thumb:"bg-warning"},danger:{filler:"bg-danger",thumb:"bg-danger"}},isVertical:{true:{base:"w-auto h-full flex-col-reverse items-center",trackWrapper:"flex-col h-full justify-center items-center",filler:"w-full h-auto",thumb:"left-1/2",track:"h-full border-y-transparent",labelWrapper:"flex-col justify-center items-center",step:["left-1/2","-translate-x-1/2","translate-y-1/2"],mark:["left-1/2","ml-1","translate-x-1/2","translate-y-1/2"]},false:{thumb:"top-1/2",trackWrapper:"items-center",track:"border-x-transparent",step:["top-1/2","-translate-x-1/2","-translate-y-1/2"],mark:["top-1/2","mt-1","-translate-x-1/2","translate-y-1/2"]}},isDisabled:{false:{thumb:["cursor-grab","data-[dragging=true]:cursor-grabbing"]},true:{base:"opacity-disabled",thumb:"cursor-default"}},hasMarks:{true:{base:"mb-5",mark:"cursor-pointer"},false:{}},showOutline:{true:{thumb:"ring-2 ring-background"},false:{thumb:"ring-transparent border-0"}},hideValue:{true:{value:"sr-only"}},hideThumb:{true:{thumb:"sr-only",track:"cursor-pointer"}},hasSingleThumb:{true:{},false:{}},disableAnimation:{true:{thumb:"data-[dragging=true]:after:scale-100"},false:{thumb:"after:transition-all motion-reduce:after:transition-none",mark:"transition-opacity motion-reduce:transition-none"}},disableThumbScale:{true:{},false:{thumb:"data-[dragging=true]:after:scale-80"}}},compoundVariants:[{size:["sm","md"],showOutline:!1,class:{thumb:"shadow-small"}},{size:"sm",color:"foreground",class:{step:"data-[in-range=true]:bg-foreground"}},{size:"sm",color:"primary",class:{step:"data-[in-range=true]:bg-primary"}},{size:"sm",color:"secondary",class:{step:"data-[in-range=true]:bg-secondary"}},{size:"sm",color:"success",class:{step:"data-[in-range=true]:bg-success"}},{size:"sm",color:"warning",class:{step:"data-[in-range=true]:bg-warning"}},{size:"sm",color:"danger",class:{step:"data-[in-range=true]:bg-danger"}},{size:"sm",isVertical:!1,class:{track:"h-1 my-[calc((theme(spacing.5)-theme(spacing.1))/2)] border-x-[calc(theme(spacing.5)/2)]"}},{size:"md",isVertical:!1,class:{track:"h-3 my-[calc((theme(spacing.6)-theme(spacing.3))/2)] border-x-[calc(theme(spacing.6)/2)]"}},{size:"lg",isVertical:!1,class:{track:"h-7 my-[calc((theme(spacing.7)-theme(spacing.5))/2)] border-x-[calc(theme(spacing.7)/2)]"}},{size:"sm",isVertical:!0,class:{track:"w-1 mx-[calc((theme(spacing.5)-theme(spacing.1))/2)] border-y-[calc(theme(spacing.5)/2)]"}},{size:"md",isVertical:!0,class:{track:"w-3 mx-[calc((theme(spacing.6)-theme(spacing.3))/2)] border-y-[calc(theme(spacing.6)/2)]"}},{size:"lg",isVertical:!0,class:{track:"w-7 mx-[calc((theme(spacing.7)-theme(spacing.5))/2)] border-y-[calc(theme(spacing.7)/2)]"}},{color:"foreground",isVertical:!1,hasSingleThumb:!0,class:{track:"border-s-foreground"}},{color:"primary",isVertical:!1,hasSingleThumb:!0,class:{track:"border-s-primary"}},{color:"secondary",isVertical:!1,hasSingleThumb:!0,class:{track:"border-s-secondary"}},{color:"success",isVertical:!1,hasSingleThumb:!0,class:{track:"border-s-success"}},{color:"warning",isVertical:!1,hasSingleThumb:!0,class:{track:"border-s-warning"}},{color:"danger",isVertical:!1,hasSingleThumb:!0,class:{track:"border-s-danger"}},{color:"foreground",isVertical:!0,hasSingleThumb:!0,class:{track:"border-b-foreground"}},{color:"primary",isVertical:!0,hasSingleThumb:!0,class:{track:"border-b-primary"}},{color:"secondary",isVertical:!0,hasSingleThumb:!0,class:{track:"border-b-secondary"}},{color:"success",isVertical:!0,hasSingleThumb:!0,class:{track:"border-b-success"}},{color:"warning",isVertical:!0,hasSingleThumb:!0,class:{track:"border-b-warning"}},{color:"danger",isVertical:!0,hasSingleThumb:!0,class:{track:"border-b-danger"}}],defaultVariants:{size:"md",color:"primary",radius:"full",hideValue:!1,hideThumb:!1,isDisabled:!1,disableThumbScale:!1,showOutline:!1}}),az=ji({slots:{base:"relative inline-flex flex-col gap-2 items-center justify-center",wrapper:"relative flex",circle1:["absolute","w-full","h-full","rounded-full","animate-spinner-ease-spin","border-2","border-solid","border-t-transparent","border-l-transparent","border-r-transparent"],circle2:["absolute","w-full","h-full","rounded-full","opacity-75","animate-spinner-linear-spin","border-2","border-dotted","border-t-transparent","border-l-transparent","border-r-transparent"],label:"text-foreground dark:text-foreground-dark font-regular"},variants:{size:{sm:{wrapper:"w-5 h-5",circle1:"border-2",circle2:"border-2",label:"text-small"},md:{wrapper:"w-8 h-8",circle1:"border-3",circle2:"border-3",label:"text-medium"},lg:{wrapper:"w-10 h-10",circle1:"border-3",circle2:"border-3",label:"text-large"}},color:{current:{circle1:"border-b-current",circle2:"border-b-current"},white:{circle1:"border-b-white",circle2:"border-b-white"},default:{circle1:"border-b-default",circle2:"border-b-default"},primary:{circle1:"border-b-primary",circle2:"border-b-primary"},secondary:{circle1:"border-b-secondary",circle2:"border-b-secondary"},success:{circle1:"border-b-success",circle2:"border-b-success"},warning:{circle1:"border-b-warning",circle2:"border-b-warning"},danger:{circle1:"border-b-danger",circle2:"border-b-danger"}},labelColor:{foreground:{label:"text-foreground"},primary:{label:"text-primary"},secondary:{label:"text-secondary"},success:{label:"text-success"},warning:{label:"text-warning"},danger:{label:"text-danger"}}},defaultVariants:{size:"md",color:"primary",labelColor:"foreground"}}),dne=ji({slots:{base:"w-full relative flex flex-col gap-1 p-1",list:"w-full flex flex-col gap-0.5 outline-none",emptyContent:["h-10","px-2","py-1.5","w-full","h-full","text-foreground-400","text-start"]}}),aP=ji({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","subpixel-antialiased","outline-none","cursor-pointer","tap-highlight-transparent",...fc,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal truncate",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:["border-small border-transparent hover:border-default data-[hover=true]:bg-default-100","data-[selectable=true]:focus:border-default data-[selectable=true]:focus:bg-default-100"]},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},showDivider:{true:{base:["mb-1.5","after:content-['']","after:absolute","after:-bottom-1","after:left-0","after:right-0","after:h-divider","after:bg-divider"]},false:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{base:"data-[hover=true]:transition-colors"}}},defaultVariants:{variant:"solid",color:"default",showDivider:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:["data-[hover=true]:bg-default","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"solid",color:"primary",class:{base:["data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"solid",color:"secondary",class:{base:["data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"solid",color:"success",class:{base:["data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"solid",color:"warning",class:{base:["data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"solid",color:"danger",class:{base:["data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"shadow",color:"default",class:{base:["data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:shadow-default/50 data-[selectable=true]:focus:bg-default data-[selectable=true]:focus:text-default-foreground"]}},{variant:"shadow",color:"primary",class:{base:["data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:shadow-primary/30 data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"shadow",color:"secondary",class:{base:["data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:shadow-secondary/30 data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"shadow",color:"success",class:{base:["data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:shadow-success/30 data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"shadow",color:"warning",class:{base:["data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:shadow-warning/30 data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"shadow",color:"danger",class:{base:["data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:shadow-danger/30 data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"bordered",color:"default",class:{base:["data-[hover=true]:border-default","data-[selectable=true]:focus:border-default"]}},{variant:"bordered",color:"primary",class:{base:["data-[hover=true]:border-primary data-[hover=true]:text-primary","data-[selectable=true]:focus:border-primary data-[selectable=true]:focus:text-primary"]}},{variant:"bordered",color:"secondary",class:{base:["data-[hover=true]:border-secondary data-[hover=true]:text-secondary","data-[selectable=true]:focus:border-secondary data-[selectable=true]:focus:text-secondary"]}},{variant:"bordered",color:"success",class:{base:["data-[hover=true]:border-success data-[hover=true]:text-success","data-[selectable=true]:focus:border-success data-[selectable=true]:focus:text-success"]}},{variant:"bordered",color:"warning",class:{base:["data-[hover=true]:border-warning data-[hover=true]:text-warning","data-[selectable=true]:focus:border-warning data-[selectable=true]:focus:text-warning"]}},{variant:"bordered",color:"danger",class:{base:["data-[hover=true]:border-danger data-[hover=true]:text-danger","data-[selectable=true]:focus:border-danger data-[selectable=true]:focus:text-danger"]}},{variant:"flat",color:"default",class:{base:["data-[hover=true]:bg-default/40","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default/40","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"flat",color:"primary",class:{base:["data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary","data-[selectable=true]:focus:bg-primary/20 data-[selectable=true]:focus:text-primary"]}},{variant:"flat",color:"secondary",class:{base:["data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary","data-[selectable=true]:focus:bg-secondary/20 data-[selectable=true]:focus:text-secondary"]}},{variant:"flat",color:"success",class:{base:["data-[hover=true]:bg-success/20 data-[hover=true]:text-success","data-[selectable=true]:focus:bg-success/20 data-[selectable=true]:focus:text-success"]}},{variant:"flat",color:"warning",class:{base:["data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning","data-[selectable=true]:focus:bg-warning/20 data-[selectable=true]:focus:text-warning"]}},{variant:"flat",color:"danger",class:{base:["data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger","data-[selectable=true]:focus:bg-danger/20 data-[selectable=true]:focus:text-danger"]}},{variant:"faded",color:"default",class:{base:["data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"faded",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"faded",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"faded",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"faded",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"faded",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}},{variant:"light",color:"default",class:{base:["data-[hover=true]:text-default-500","data-[selectable=true]:focus:text-default-500"]}},{variant:"light",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"light",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"light",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"light",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"light",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}}]}),fne=ji({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}}),sz=ji({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-none","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-none","select-none","top-1","right-1","rtl:left-1","rtl:right-[unset]","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...fc]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),sP=ji({slots:{base:["z-0","relative","bg-transparent","before:content-['']","before:hidden","before:z-[-1]","before:absolute","before:rotate-45","before:w-2.5","before:h-2.5","before:rounded-sm","data-[arrow=true]:before:block","data-[placement=top]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top]:before:left-1/2","data-[placement=top]:before:-translate-x-1/2","data-[placement=top-start]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top-start]:before:left-3","data-[placement=top-end]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top-end]:before:right-3","data-[placement=bottom]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom]:before:left-1/2","data-[placement=bottom]:before:-translate-x-1/2","data-[placement=bottom-start]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom-start]:before:left-3","data-[placement=bottom-end]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom-end]:before:right-3","data-[placement=left]:before:-right-[calc(theme(spacing.5)/4_-_2px)]","data-[placement=left]:before:top-1/2","data-[placement=left]:before:-translate-y-1/2","data-[placement=left-start]:before:-right-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=left-start]:before:top-1/4","data-[placement=left-end]:before:-right-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=left-end]:before:bottom-1/4","data-[placement=right]:before:-left-[calc(theme(spacing.5)/4_-_2px)]","data-[placement=right]:before:top-1/2","data-[placement=right]:before:-translate-y-1/2","data-[placement=right-start]:before:-left-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=right-start]:before:top-1/4","data-[placement=right-end]:before:-left-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=right-end]:before:bottom-1/4",...fc],content:["z-10","px-2.5","py-1","w-full","inline-flex","flex-col","items-center","justify-center","box-border","subpixel-antialiased","outline-none","box-border"],trigger:["z-10"],backdrop:["hidden"],arrow:[]},variants:{size:{sm:{content:"text-tiny"},md:{content:"text-small"},lg:{content:"text-medium"}},color:{default:{base:"before:bg-content1 before:shadow-small",content:"bg-content1"},foreground:{base:"before:bg-foreground",content:jt.solid.foreground},primary:{base:"before:bg-primary",content:jt.solid.primary},secondary:{base:"before:bg-secondary",content:jt.solid.secondary},success:{base:"before:bg-success",content:jt.solid.success},warning:{base:"before:bg-warning",content:jt.solid.warning},danger:{base:"before:bg-danger",content:jt.solid.danger}},radius:{none:{content:"rounded-none"},sm:{content:"rounded-small"},md:{content:"rounded-medium"},lg:{content:"rounded-large"},full:{content:"rounded-full"}},shadow:{sm:{content:"shadow-small"},md:{content:"shadow-medium"},lg:{content:"shadow-large"}},backdrop:{transparent:{},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-sm backdrop-saturate-150 bg-overlay/30"}},triggerScaleOnOpen:{true:{trigger:["aria-expanded:scale-[0.97]","aria-expanded:opacity-70","subpixel-antialiased"]},false:{}},disableAnimation:{true:{base:"animate-none"}},isTriggerDisabled:{true:{trigger:"opacity-disabled pointer-events-none"},false:{}}},defaultVariants:{color:"default",radius:"lg",size:"md",shadow:"md",backdrop:"transparent",triggerScaleOnOpen:!0},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"block w-full h-full fixed inset-0 -z-30"}}]}),oz=ji({slots:{base:"flex flex-col gap-2 w-full",label:"",labelWrapper:"flex justify-between",value:"",track:"z-0 relative bg-default-300/50 overflow-hidden",indicator:"h-full"},variants:{color:{default:{indicator:"bg-default-400"},primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},success:{indicator:"bg-success"},warning:{indicator:"bg-warning"},danger:{indicator:"bg-danger"}},size:{sm:{label:"text-small",value:"text-small",track:"h-1"},md:{label:"text-medium",value:"text-medium",track:"h-3"},lg:{label:"text-large",value:"text-large",track:"h-5"}},radius:{none:{track:"rounded-none",indicator:"rounded-none"},sm:{track:"rounded-small",indicator:"rounded-small"},md:{track:"rounded-medium",indicator:"rounded-medium"},lg:{track:"rounded-large",indicator:"rounded-large"},full:{track:"rounded-full",indicator:"rounded-full"}},isStriped:{true:{indicator:"bg-stripe-gradient bg-[length:1.25rem_1.25rem]"}},isIndeterminate:{true:{indicator:["absolute","w-full","origin-left","animate-indeterminate-bar"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-transform !duration-500"}}},defaultVariants:{color:"primary",size:"md",radius:"full",isStriped:!1,isIndeterminate:!1,isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{indicator:"!transition-none motion-reduce:transition-none"}}]},{twMerge:!0}),VCe=ji({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}}),$Ce=ji({base:["w-full","p-1","min-w-[200px]"]});ji({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","outline-none","cursor-pointer","tap-highlight-transparent","data-[pressed=true]:opacity-70",...fc,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal truncate",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:"border-small border-transparent hover:border-default data-[hover=true]:bg-default-100"},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{}}},defaultVariants:{variant:"solid",color:"default"},compoundVariants:[{variant:"solid",color:"default",class:{base:"data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"solid",color:"primary",class:{base:"data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"solid",color:"secondary",class:{base:"data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"solid",color:"success",class:{base:"data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"solid",color:"warning",class:{base:"data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"solid",color:"danger",class:{base:"data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"shadow",color:"default",class:{base:"data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"shadow",color:"primary",class:{base:"data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"shadow",color:"secondary",class:{base:"data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"shadow",color:"success",class:{base:"data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"shadow",color:"warning",class:{base:"data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"shadow",color:"danger",class:{base:"data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"bordered",color:"default",class:{base:"data-[hover=true]:border-default"}},{variant:"bordered",color:"primary",class:{base:"data-[hover=true]:border-primary data-[hover=true]:text-primary"}},{variant:"bordered",color:"secondary",class:{base:"data-[hover=true]:border-secondary data-[hover=true]:text-secondary"}},{variant:"bordered",color:"success",class:{base:"data-[hover=true]:border-success data-[hover=true]:text-success"}},{variant:"bordered",color:"warning",class:{base:"data-[hover=true]:border-warning data-[hover=true]:text-warning"}},{variant:"bordered",color:"danger",class:{base:"data-[hover=true]:border-danger data-[hover=true]:text-danger"}},{variant:"flat",color:"default",class:{base:"data-[hover=true]:bg-default/40 data-[hover=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{base:"data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary"}},{variant:"flat",color:"secondary",class:{base:"data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary"}},{variant:"flat",color:"success",class:{base:"data-[hover=true]:bg-success/20 data-[hover=true]:text-success "}},{variant:"flat",color:"warning",class:{base:"data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning"}},{variant:"flat",color:"danger",class:{base:"data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger"}},{variant:"faded",color:"default",class:{base:"data-[hover=true]:text-default-foreground"}},{variant:"faded",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"faded",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"faded",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"faded",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"faded",color:"danger",class:{base:"data-[hover=true]:text-danger"}},{variant:"light",color:"default",class:{base:"data-[hover=true]:text-default-500"}},{variant:"light",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"light",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"light",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"light",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"light",color:"danger",class:{base:"data-[hover=true]:text-danger"}}]});ji({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}});ji({base:"w-full flex flex-col gap-0.5 p-1"});var lz=ji({slots:{base:"group flex flex-col data-[hidden=true]:hidden",label:["absolute","z-10","pointer-events-none","origin-top-left","rtl:origin-top-right","subpixel-antialiased","block","text-small","text-foreground-500"],mainWrapper:"h-full",inputWrapper:"relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-sm px-3 gap-3",innerWrapper:"inline-flex w-full items-center h-full box-border",input:["w-full font-normal bg-transparent !outline-none placeholder:text-foreground-500 focus-visible:outline-none","data-[has-start-content=true]:ps-1.5","data-[has-end-content=true]:pe-1.5","file:cursor-pointer file:bg-transparent file:border-0","autofill:bg-transparent bg-clip-text"],clearButton:["p-2","-m-2","z-10","hidden","absolute","right-3","rtl:right-auto","rtl:left-3","appearance-none","outline-none","select-none","opacity-0","hover:!opacity-100","cursor-pointer","active:!opacity-70","rounded-full",...fc],helperWrapper:"hidden group-data-[has-helper=true]:flex p-1 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","data-[hover=true]:bg-default-200","group-data-[focus=true]:bg-default-100"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","data-[hover=true]:border-default-400"],value:"group-data-[has-value=true]:text-default-foreground"},bordered:{inputWrapper:["border-medium","border-default-200","data-[hover=true]:border-default-400","group-data-[focus=true]:border-default-foreground"]},underlined:{inputWrapper:["!px-1","!pb-0","!gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","group-data-[focus=true]:after:w-full"],innerWrapper:"pb-1",label:"group-data-[filled-within=true]:text-foreground"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:"text-tiny",inputWrapper:"h-8 min-h-8 px-2 rounded-small",input:"text-small",clearButton:"text-medium"},md:{inputWrapper:"h-10 min-h-10 rounded-medium",input:"text-small",clearButton:"text-large"},lg:{inputWrapper:"h-12 min-h-12 rounded-large",input:"text-medium",clearButton:"text-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{mainWrapper:"flex flex-col"},"outside-left":{base:"flex-row items-center flex-nowrap data-[has-helper=true]:items-start",inputWrapper:"flex-1",mainWrapper:"flex flex-col",label:"relative text-foreground pr-2 rtl:pr-0 rtl:pl-2"},inside:{label:"text-tiny cursor-text",inputWrapper:"flex-col items-start justify-center gap-0",innerWrapper:"group-data-[has-label=true]:items-end"}},fullWidth:{true:{base:"w-full"}},isClearable:{true:{input:"peer pr-6 rtl:pr-0 rtl:pl-6",clearButton:"peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},isInvalid:{true:{label:"!text-danger",input:"!placeholder:text-danger !text-danger"}},isRequired:{true:{label:"after:content-['*'] after:text-danger after:ml-0.5 rtl:after:ml-[unset] rtl:after:mr-0.5"}},isMultiline:{true:{label:"relative",inputWrapper:"!h-auto",innerWrapper:"items-start group-data-[has-label=true]:items-start",input:"resize-none data-[hide-scroll=true]:scrollbar-hide"}},disableAnimation:{true:{input:"transition-none",inputWrapper:"transition-none",label:"transition-none"},false:{inputWrapper:"transition-background motion-reduce:transition-none !duration-150",label:["will-change-auto","!duration-200","!ease-out","motion-reduce:transition-none","transition-[transform,color,left,opacity]"],clearButton:["transition-opacity","motion-reduce:transition-none"]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,labelPlacement:"inside",isDisabled:!1,isMultiline:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:"group-data-[has-value=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{inputWrapper:["bg-primary-50","data-[hover=true]:bg-primary-100","text-primary","group-data-[focus=true]:bg-primary-50","placeholder:text-primary"],input:"placeholder:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{inputWrapper:["bg-secondary-50","text-secondary","data-[hover=true]:bg-secondary-100","group-data-[focus=true]:bg-secondary-50","placeholder:text-secondary"],input:"placeholder:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{inputWrapper:["bg-success-50","text-success-600","dark:text-success","placeholder:text-success-600","dark:placeholder:text-success","data-[hover=true]:bg-success-100","group-data-[focus=true]:bg-success-50"],input:"placeholder:text-success-600 dark:placeholder:text-success",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{inputWrapper:["bg-warning-50","text-warning-600","dark:text-warning","placeholder:text-warning-600","dark:placeholder:text-warning","data-[hover=true]:bg-warning-100","group-data-[focus=true]:bg-warning-50"],input:"placeholder:text-warning-600 dark:placeholder:text-warning",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{inputWrapper:["bg-danger-50","text-danger","dark:text-danger-500","placeholder:text-danger","dark:placeholder:text-danger-500","data-[hover=true]:bg-danger-100","group-data-[focus=true]:bg-danger-50"],input:"placeholder:text-danger dark:placeholder:text-danger-500",label:"text-danger dark:text-danger-500"}},{variant:"faded",color:"primary",class:{label:"text-primary",inputWrapper:"data-[hover=true]:border-primary focus-within:border-primary"}},{variant:"faded",color:"secondary",class:{label:"text-secondary",inputWrapper:"data-[hover=true]:border-secondary focus-within:border-secondary"}},{variant:"faded",color:"success",class:{label:"text-success",inputWrapper:"data-[hover=true]:border-success focus-within:border-success"}},{variant:"faded",color:"warning",class:{label:"text-warning",inputWrapper:"data-[hover=true]:border-warning focus-within:border-warning"}},{variant:"faded",color:"danger",class:{label:"text-danger",inputWrapper:"data-[hover=true]:border-danger focus-within:border-danger"}},{variant:"underlined",color:"default",class:{input:"group-data-[has-value=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{inputWrapper:"after:bg-danger",label:"text-danger"}},{variant:"bordered",color:"primary",class:{inputWrapper:"group-data-[focus=true]:border-primary",label:"text-primary"}},{variant:"bordered",color:"secondary",class:{inputWrapper:"group-data-[focus=true]:border-secondary",label:"text-secondary"}},{variant:"bordered",color:"success",class:{inputWrapper:"group-data-[focus=true]:border-success",label:"text-success"}},{variant:"bordered",color:"warning",class:{inputWrapper:"group-data-[focus=true]:border-warning",label:"text-warning"}},{variant:"bordered",color:"danger",class:{inputWrapper:"group-data-[focus=true]:border-danger",label:"text-danger"}},{labelPlacement:"inside",color:"default",class:{label:"group-data-[filled-within=true]:text-default-600"}},{labelPlacement:"outside",color:"default",class:{label:"group-data-[filled-within=true]:text-foreground"}},{radius:"full",size:["sm"],class:{inputWrapper:"px-3"}},{radius:"full",size:"md",class:{inputWrapper:"px-4"}},{radius:"full",size:"lg",class:{inputWrapper:"px-5"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}},{variant:["flat","faded"],class:{inputWrapper:[...cne]}},{isInvalid:!0,variant:"flat",class:{inputWrapper:["!bg-danger-50","data-[hover=true]:!bg-danger-100","group-data-[focus=true]:!bg-danger-50"]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:"!border-danger group-data-[focus=true]:!border-danger"}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:"after:!bg-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{label:"text-small",inputWrapper:"h-16 py-2.5 gap-0"}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:"py-1"}},{labelPlacement:["inside","outside"],class:{label:["group-data-[filled-within=true]:pointer-events-auto"]}},{labelPlacement:"outside",isMultiline:!1,class:{base:"group relative justify-end",label:["pb-0","z-20","top-1/2","-translate-y-1/2","group-data-[filled-within=true]:left-0"]}},{labelPlacement:["inside"],class:{label:["group-data-[filled-within=true]:scale-85"]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:"pb-0.5"}},{variant:"underlined",size:"sm",class:{innerWrapper:"pb-1"}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:"pb-1.5"}},{labelPlacement:"inside",size:["sm","md"],class:{label:"text-small"}},{labelPlacement:"inside",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"lg",isMultiline:!1,class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)]"]}},{labelPlacement:"outside",size:"sm",isMultiline:!1,class:{label:["left-2","text-tiny","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)]"}},{labelPlacement:"outside",size:"md",isMultiline:!1,class:{label:["left-3","rtl:left-auto","rtl:right-3","text-small","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)]"}},{labelPlacement:"outside",size:"lg",isMultiline:!1,class:{label:["left-3","rtl:left-auto","rtl:right-3","text-medium","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)]"}},{labelPlacement:"outside-left",size:"sm",class:{label:"group-data-[has-helper=true]:pt-2"}},{labelPlacement:"outside-left",size:"md",class:{label:"group-data-[has-helper=true]:pt-3"}},{labelPlacement:"outside-left",size:"lg",class:{label:"group-data-[has-helper=true]:pt-4"}},{labelPlacement:["outside","outside-left"],isMultiline:!0,class:{inputWrapper:"py-2"}},{labelPlacement:"outside",isMultiline:!0,class:{label:"pb-1.5"}},{labelPlacement:"inside",isMultiline:!0,class:{label:"pb-0.5",input:"pt-0"}},{isMultiline:!0,disableAnimation:!1,class:{input:"transition-height !duration-100 motion-reduce:transition-none"}},{labelPlacement:["inside","outside"],class:{label:["pe-2","max-w-full","text-ellipsis","overflow-hidden"]}},{isMultiline:!0,radius:"full",class:{inputWrapper:"data-[has-multiple-rows=true]:rounded-large"}}]}),uz=ji({slots:{base:["px-1.5","py-0.5","inline-flex","space-x-0.5","rtl:space-x-reverse","items-center","font-sans","font-normal","text-center","text-small","shadow-small","bg-default-100","text-foreground-600","rounded-small"],abbr:"no-underline",content:""},variants:{},defaultVariants:{}}),cz=ji({slots:{base:["flex","flex-col","relative","overflow-hidden","h-auto","outline-none","text-foreground","box-border","bg-content1",...fc],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}}),dz=ji({slots:{base:["relative","max-w-fit","min-w-min","inline-flex","items-center","justify-between","box-border","whitespace-nowrap"],content:"flex-1 text-inherit font-normal",dot:["w-2","h-2","ml-1","rounded-full"],avatar:"flex-shrink-0",closeButton:["z-10","appearance-none","outline-none","select-none","transition-opacity","opacity-70","hover:opacity-100","cursor-pointer","active:opacity-disabled","tap-highlight-transparent"]},variants:{variant:{solid:{},bordered:{base:"border-medium bg-transparent"},light:{base:"bg-transparent"},flat:{},faded:{base:"border-medium"},shadow:{},dot:{base:"border-medium border-default text-foreground bg-transparent"}},color:{default:{dot:"bg-default-400"},primary:{dot:"bg-primary"},secondary:{dot:"bg-secondary"},success:{dot:"bg-success"},warning:{dot:"bg-warning"},danger:{dot:"bg-danger"}},size:{sm:{base:"px-1 h-6 text-tiny",content:"px-1",closeButton:"text-medium",avatar:"w-4 h-4"},md:{base:"px-1 h-7 text-small",content:"px-2",closeButton:"text-large",avatar:"w-5 h-5"},lg:{base:"px-2 h-8 text-medium",content:"px-2",closeButton:"text-xl",avatar:"w-6 h-6"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isOneChar:{true:{},false:{}},isCloseable:{true:{},false:{}},hasStartContent:{true:{}},hasEndContent:{true:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isCloseButtonFocusVisible:{true:{closeButton:[...jCe,"ring-1","rounded-full"]}}},defaultVariants:{variant:"solid",color:"default",size:"md",radius:"full",isDisabled:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:jt.solid.default}},{variant:"solid",color:"primary",class:{base:jt.solid.primary}},{variant:"solid",color:"secondary",class:{base:jt.solid.secondary}},{variant:"solid",color:"success",class:{base:jt.solid.success}},{variant:"solid",color:"warning",class:{base:jt.solid.warning}},{variant:"solid",color:"danger",class:{base:jt.solid.danger}},{variant:"shadow",color:"default",class:{base:jt.shadow.default}},{variant:"shadow",color:"primary",class:{base:jt.shadow.primary}},{variant:"shadow",color:"secondary",class:{base:jt.shadow.secondary}},{variant:"shadow",color:"success",class:{base:jt.shadow.success}},{variant:"shadow",color:"warning",class:{base:jt.shadow.warning}},{variant:"shadow",color:"danger",class:{base:jt.shadow.danger}},{variant:"bordered",color:"default",class:{base:jt.bordered.default}},{variant:"bordered",color:"primary",class:{base:jt.bordered.primary}},{variant:"bordered",color:"secondary",class:{base:jt.bordered.secondary}},{variant:"bordered",color:"success",class:{base:jt.bordered.success}},{variant:"bordered",color:"warning",class:{base:jt.bordered.warning}},{variant:"bordered",color:"danger",class:{base:jt.bordered.danger}},{variant:"flat",color:"default",class:{base:jt.flat.default}},{variant:"flat",color:"primary",class:{base:jt.flat.primary}},{variant:"flat",color:"secondary",class:{base:jt.flat.secondary}},{variant:"flat",color:"success",class:{base:jt.flat.success}},{variant:"flat",color:"warning",class:{base:jt.flat.warning}},{variant:"flat",color:"danger",class:{base:jt.flat.danger}},{variant:"faded",color:"default",class:{base:jt.faded.default}},{variant:"faded",color:"primary",class:{base:jt.faded.primary}},{variant:"faded",color:"secondary",class:{base:jt.faded.secondary}},{variant:"faded",color:"success",class:{base:jt.faded.success}},{variant:"faded",color:"warning",class:{base:jt.faded.warning}},{variant:"faded",color:"danger",class:{base:jt.faded.danger}},{variant:"light",color:"default",class:{base:jt.light.default}},{variant:"light",color:"primary",class:{base:jt.light.primary}},{variant:"light",color:"secondary",class:{base:jt.light.secondary}},{variant:"light",color:"success",class:{base:jt.light.success}},{variant:"light",color:"warning",class:{base:jt.light.warning}},{variant:"light",color:"danger",class:{base:jt.light.danger}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"sm",class:{base:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"md",class:{base:"w-6 h-6 min-w-6 min-h-6"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"lg",class:{base:"w-7 h-7 min-w-7 min-h-7"}},{isOneChar:!0,isCloseable:!1,hasStartContent:!1,hasEndContent:!1,class:{base:"px-0 justify-center",content:"px-0 flex-none"}},{isOneChar:!0,isCloseable:!0,hasStartContent:!1,hasEndContent:!1,class:{base:"w-auto"}},{isOneChar:!0,variant:"dot",class:{base:"w-auto h-7 px-1 items-center",content:"px-2"}},{hasStartContent:!0,size:"sm",class:{content:"pl-0.5"}},{hasStartContent:!0,size:["md","lg"],class:{content:"pl-1"}},{hasEndContent:!0,size:"sm",class:{content:"pr-0.5"}},{hasEndContent:!0,size:["md","lg"],class:{content:"pr-1"}}]}),LCe=ji({base:"px-2",variants:{variant:{light:"",shadow:"px-4 shadow-medium rounded-medium bg-content1",bordered:"px-4 border-medium border-divider rounded-medium",splitted:"flex flex-col gap-2"},fullWidth:{true:"w-full"}},defaultVariants:{variant:"light",fullWidth:!0}}),FCe=ji({slots:{base:"",heading:"",trigger:["flex py-4 w-full h-full gap-3 outline-none items-center tap-highlight-transparent",...fc],startContent:"flex-shrink-0",indicator:"text-default-400",titleWrapper:"flex-1 flex flex-col text-start",title:"text-foreground text-large",subtitle:"text-small text-foreground-500 font-normal",content:"py-2"},variants:{variant:{splitted:{base:"px-4 bg-content1 shadow-medium rounded-medium"}},isCompact:{true:{trigger:"py-2",title:"text-medium",subtitle:"text-small",indicator:"text-medium",content:"py-1"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},hideIndicator:{true:{indicator:"hidden"}},disableAnimation:{true:{content:"hidden data-[open=true]:block"},false:{indicator:"transition-transform",trigger:"transition-opacity"}},disableIndicatorAnimation:{true:{indicator:"transition-none"},false:{indicator:"rotate-0 data-[open=true]:-rotate-90 rtl:-rotate-180 rtl:data-[open=true]:-rotate-90"}}},defaultVariants:{size:"md",radius:"lg",isDisabled:!1,hideIndicator:!1,disableIndicatorAnimation:!1}}),BCe=ji({base:["z-0","group","relative","inline-flex","items-center","justify-center","box-border","appearance-none","outline-none","select-none","whitespace-nowrap","min-w-max","font-normal","subpixel-antialiased","overflow-hidden","tap-highlight-transparent","data-[pressed=true]:scale-[0.97]",...fc],variants:{variant:{solid:"",bordered:"border-medium bg-transparent",light:"bg-transparent",flat:"",faded:"border-medium",shadow:"",ghost:"border-medium bg-transparent"},size:{sm:"px-3 min-w-16 h-8 text-tiny gap-2 rounded-small",md:"px-4 min-w-20 h-10 text-small gap-2 rounded-medium",lg:"px-6 min-w-24 h-12 text-medium gap-3 rounded-large"},color:{default:"",primary:"",secondary:"",success:"",warning:"",danger:""},radius:{none:"rounded-none",sm:"rounded-small",md:"rounded-medium",lg:"rounded-large",full:"rounded-full"},fullWidth:{true:"w-full"},isDisabled:{true:"opacity-disabled pointer-events-none"},isInGroup:{true:"[&:not(:first-child):not(:last-child)]:rounded-none"},isIconOnly:{true:"px-0 !gap-0",false:"[&>svg]:max-w-[theme(spacing.8)]"},disableAnimation:{true:"!transition-none data-[pressed=true]:scale-100",false:"transition-transform-colors-opacity motion-reduce:transition-none"}},defaultVariants:{size:"md",variant:"solid",color:"default",fullWidth:!1,isDisabled:!1,isInGroup:!1},compoundVariants:[{variant:"solid",color:"default",class:jt.solid.default},{variant:"solid",color:"primary",class:jt.solid.primary},{variant:"solid",color:"secondary",class:jt.solid.secondary},{variant:"solid",color:"success",class:jt.solid.success},{variant:"solid",color:"warning",class:jt.solid.warning},{variant:"solid",color:"danger",class:jt.solid.danger},{variant:"shadow",color:"default",class:jt.shadow.default},{variant:"shadow",color:"primary",class:jt.shadow.primary},{variant:"shadow",color:"secondary",class:jt.shadow.secondary},{variant:"shadow",color:"success",class:jt.shadow.success},{variant:"shadow",color:"warning",class:jt.shadow.warning},{variant:"shadow",color:"danger",class:jt.shadow.danger},{variant:"bordered",color:"default",class:jt.bordered.default},{variant:"bordered",color:"primary",class:jt.bordered.primary},{variant:"bordered",color:"secondary",class:jt.bordered.secondary},{variant:"bordered",color:"success",class:jt.bordered.success},{variant:"bordered",color:"warning",class:jt.bordered.warning},{variant:"bordered",color:"danger",class:jt.bordered.danger},{variant:"flat",color:"default",class:jt.flat.default},{variant:"flat",color:"primary",class:jt.flat.primary},{variant:"flat",color:"secondary",class:jt.flat.secondary},{variant:"flat",color:"success",class:jt.flat.success},{variant:"flat",color:"warning",class:jt.flat.warning},{variant:"flat",color:"danger",class:jt.flat.danger},{variant:"faded",color:"default",class:jt.faded.default},{variant:"faded",color:"primary",class:jt.faded.primary},{variant:"faded",color:"secondary",class:jt.faded.secondary},{variant:"faded",color:"success",class:jt.faded.success},{variant:"faded",color:"warning",class:jt.faded.warning},{variant:"faded",color:"danger",class:jt.faded.danger},{variant:"light",color:"default",class:[jt.light.default,"data-[hover=true]:bg-default/40"]},{variant:"light",color:"primary",class:[jt.light.primary,"data-[hover=true]:bg-primary/20"]},{variant:"light",color:"secondary",class:[jt.light.secondary,"data-[hover=true]:bg-secondary/20"]},{variant:"light",color:"success",class:[jt.light.success,"data-[hover=true]:bg-success/20"]},{variant:"light",color:"warning",class:[jt.light.warning,"data-[hover=true]:bg-warning/20"]},{variant:"light",color:"danger",class:[jt.light.danger,"data-[hover=true]:bg-danger/20"]},{variant:"ghost",color:"default",class:jt.ghost.default},{variant:"ghost",color:"primary",class:jt.ghost.primary},{variant:"ghost",color:"secondary",class:jt.ghost.secondary},{variant:"ghost",color:"success",class:jt.ghost.success},{variant:"ghost",color:"warning",class:jt.ghost.warning},{variant:"ghost",color:"danger",class:jt.ghost.danger},{isInGroup:!0,class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,size:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,isRounded:!0,class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,radius:"none",class:"rounded-none first:rounded-s-none last:rounded-e-none"},{isInGroup:!0,radius:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,radius:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,radius:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,radius:"full",class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,variant:["ghost","bordered"],color:"default",className:d0.default},{isInGroup:!0,variant:["ghost","bordered"],color:"primary",className:d0.primary},{isInGroup:!0,variant:["ghost","bordered"],color:"secondary",className:d0.secondary},{isInGroup:!0,variant:["ghost","bordered"],color:"success",className:d0.success},{isInGroup:!0,variant:["ghost","bordered"],color:"warning",className:d0.warning},{isInGroup:!0,variant:["ghost","bordered"],color:"danger",className:d0.danger},{isIconOnly:!0,size:"sm",class:"min-w-8 w-8 h-8"},{isIconOnly:!0,size:"md",class:"min-w-10 w-10 h-10"},{isIconOnly:!0,size:"lg",class:"min-w-12 w-12 h-12"},{variant:["solid","faded","flat","bordered","shadow"],class:"data-[hover=true]:opacity-hover"}]}),fz=ji({base:"inline-flex items-center justify-center h-auto",variants:{fullWidth:{true:"w-full"}},defaultVariants:{fullWidth:!1}});function UCe(t,e){let{elementType:n="button",isDisabled:r,onPress:i,onPressStart:a,onPressEnd:s,onPressUp:o,onPressChange:l,preventFocusOnPress:c,allowFocusWhenDisabled:f,onClick:h,href:m,target:p,rel:v,type:y="button"}=t,x;n==="button"?x={type:y,disabled:r}:x={role:"button",tabIndex:r?void 0:0,href:n==="a"&&r?void 0:m,target:n==="a"?p:void 0,type:n==="input"?y:void 0,disabled:n==="input"?r:void 0,"aria-disabled":!r||n==="input"?void 0:r,rel:n==="a"?v:void 0};let{pressProps:S,isPressed:_}=Od({onPressStart:a,onPressEnd:s,onPressChange:l,onPress:i,onPressUp:o,isDisabled:r,preventFocusOnPress:c,ref:e}),{focusableProps:N}=UN(t,e);f&&(N.tabIndex=r?-1:N.tabIndex);let k=kt(N,S,vc(t,{labelable:!0}));return{isPressed:_,buttonProps:kt(x,k,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],onClick:P=>{h&&(h(P),console.warn("onClick is deprecated, please use onPress"))}})}}function WCe(t,e,n){let{item:r,isDisabled:i}=t,a=r.key,s=e.selectionManager,o=R.useId(),l=R.useId(),c=e.disabledKeys.has(r.key)||i;R.useEffect(()=>{a===e.focusedKey&&document.activeElement!==n.current&&n.current&&xg(n.current)},[n,a,e.focusedKey]);let f=R.useCallback(y=>{s.canSelectItem(a)&&(s.select(a,y),e.toggleKey(a))},[a,s]);const h=R.useCallback(y=>{s.selectionBehavior==="replace"&&s.extendSelection(y),s.setFocusedKey(y)},[s]),m=R.useCallback(y=>{const S={ArrowDown:()=>{const _=e.collection.getKeyAfter(a);if(_&&e.disabledKeys.has(_)){const N=e.collection.getKeyAfter(_);N&&h(N)}else _&&h(_)},ArrowUp:()=>{const _=e.collection.getKeyBefore(a);if(_&&e.disabledKeys.has(_)){const N=e.collection.getKeyBefore(_);N&&h(N)}else _&&h(_)},Home:()=>{const _=e.collection.getFirstKey();_&&h(_)},End:()=>{const _=e.collection.getLastKey();_&&h(_)}}[y.key];S&&(y.preventDefault(),s.canSelectItem(a)&&S(y))},[a,s]);let{buttonProps:p}=UCe({id:o,elementType:"button",isDisabled:c,onKeyDown:m,onPress:f},n),v=e.selectionManager.isSelected(r.key);return{buttonProps:{...p,"aria-expanded":v,"aria-controls":v?l:void 0},regionProps:{id:l,role:"region","aria-labelledby":o}}}function k3(t){return sxe()?t.altKey:t.ctrlKey}function L0(t){return bg()?t.metaKey:t.ctrlKey}const zCe=1e3;function hne(t){let{keyboardDelegate:e,selectionManager:n,onTypeSelect:r}=t,i=R.useRef({search:"",timeout:null}).current,a=s=>{let o=HCe(s.key);if(!o||s.ctrlKey||s.metaKey||!s.currentTarget.contains(s.target))return;o===" "&&i.search.trim().length>0&&(s.preventDefault(),"continuePropagation"in s||s.stopPropagation()),i.search+=o;let l=e.getKeyForSearch(i.search,n.focusedKey);l==null&&(l=e.getKeyForSearch(i.search)),l!=null&&(n.setFocusedKey(l),r&&r(l)),clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},zCe)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?a:null}}}function HCe(t){return t.length===1||!/^[A-Z]/i.test(t)?t:""}function mne(t){let{selectionManager:e,keyboardDelegate:n,ref:r,autoFocus:i=!1,shouldFocusWrap:a=!1,disallowEmptySelection:s=!1,disallowSelectAll:o=!1,selectOnFocus:l=e.selectionBehavior==="replace",disallowTypeAhead:c=!1,shouldUseVirtualFocus:f,allowsTabNavigation:h=!1,isVirtualized:m,scrollRef:p=r,linkBehavior:v="action"}=t,{direction:y}=km(),x=kA(),S=B=>{if(B.altKey&&B.key==="Tab"&&B.preventDefault(),!r.current.contains(B.target))return;const W=(G,oe)=>{if(G!=null){if(e.isLink(G)&&v==="selection"&&l&&!k3(B)){eb.flushSync(()=>{e.setFocusedKey(G,oe)});let ae=p.current.querySelector(`[data-key="${CSS.escape(G.toString())}"]`),te=e.getItemProps(G);x.open(ae,B,te.href,te.routerOptions);return}if(e.setFocusedKey(G,oe),e.isLink(G)&&v==="override")return;B.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(G):l&&!k3(B)&&e.replaceSelection(G)}};switch(B.key){case"ArrowDown":if(n.getKeyBelow){var Y,V;B.preventDefault();let G=e.focusedKey!=null?n.getKeyBelow(e.focusedKey):(Y=n.getFirstKey)===null||Y===void 0?void 0:Y.call(n);G==null&&a&&(G=(V=n.getFirstKey)===null||V===void 0?void 0:V.call(n,e.focusedKey)),W(G)}break;case"ArrowUp":if(n.getKeyAbove){var I,H;B.preventDefault();let G=e.focusedKey!=null?n.getKeyAbove(e.focusedKey):(I=n.getLastKey)===null||I===void 0?void 0:I.call(n);G==null&&a&&(G=(H=n.getLastKey)===null||H===void 0?void 0:H.call(n,e.focusedKey)),W(G)}break;case"ArrowLeft":if(n.getKeyLeftOf){var q,F;B.preventDefault();let G=n.getKeyLeftOf(e.focusedKey);G==null&&a&&(G=y==="rtl"?(q=n.getFirstKey)===null||q===void 0?void 0:q.call(n,e.focusedKey):(F=n.getLastKey)===null||F===void 0?void 0:F.call(n,e.focusedKey)),W(G,y==="rtl"?"first":"last")}break;case"ArrowRight":if(n.getKeyRightOf){var J,Z;B.preventDefault();let G=n.getKeyRightOf(e.focusedKey);G==null&&a&&(G=y==="rtl"?(J=n.getLastKey)===null||J===void 0?void 0:J.call(n,e.focusedKey):(Z=n.getFirstKey)===null||Z===void 0?void 0:Z.call(n,e.focusedKey)),W(G,y==="rtl"?"last":"first")}break;case"Home":if(n.getFirstKey){B.preventDefault();let G=n.getFirstKey(e.focusedKey,L0(B));e.setFocusedKey(G),L0(B)&&B.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(G):l&&e.replaceSelection(G)}break;case"End":if(n.getLastKey){B.preventDefault();let G=n.getLastKey(e.focusedKey,L0(B));e.setFocusedKey(G),L0(B)&&B.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(G):l&&e.replaceSelection(G)}break;case"PageDown":if(n.getKeyPageBelow){B.preventDefault();let G=n.getKeyPageBelow(e.focusedKey);W(G)}break;case"PageUp":if(n.getKeyPageAbove){B.preventDefault();let G=n.getKeyPageAbove(e.focusedKey);W(G)}break;case"a":L0(B)&&e.selectionMode==="multiple"&&o!==!0&&(B.preventDefault(),e.selectAll());break;case"Escape":!s&&e.selectedKeys.size!==0&&(B.stopPropagation(),B.preventDefault(),e.clearSelection());break;case"Tab":if(!h){if(B.shiftKey)r.current.focus();else{let G=Ff(r.current,{tabbable:!0}),oe,ae;do ae=G.lastChild(),ae&&(oe=ae);while(ae);oe&&!oe.contains(document.activeElement)&&Lf(oe)}break}}},_=R.useRef({top:0,left:0});vxe(p,"scroll",m?null:()=>{_.current={top:p.current.scrollTop,left:p.current.scrollLeft}});let N=B=>{if(e.isFocused){B.currentTarget.contains(B.target)||e.setFocused(!1);return}if(B.currentTarget.contains(B.target)){if(e.setFocused(!0),e.focusedKey==null){let V=H=>{H!=null&&(e.setFocusedKey(H),l&&e.replaceSelection(H))},I=B.relatedTarget;var W,Y;I&&B.currentTarget.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_FOLLOWING?V((W=e.lastSelectedKey)!==null&&W!==void 0?W:n.getLastKey()):V((Y=e.firstSelectedKey)!==null&&Y!==void 0?Y:n.getFirstKey())}else m||(p.current.scrollTop=_.current.top,p.current.scrollLeft=_.current.left);if(!m&&e.focusedKey!=null){let V=p.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);V&&(V.contains(document.activeElement)||Lf(V),Kk()==="keyboard"&&h7(V,{containingElement:r.current}))}}},k=B=>{B.currentTarget.contains(B.relatedTarget)||e.setFocused(!1)};const P=R.useRef(i);R.useEffect(()=>{if(P.current){let B=null;i==="first"&&(B=n.getFirstKey()),i==="last"&&(B=n.getLastKey());let W=e.selectedKeys;if(W.size){for(let Y of W)if(e.canSelectItem(Y)){B=Y;break}}e.setFocused(!0),e.setFocusedKey(B),B==null&&!f&&xg(r.current)}},[]);let O=R.useRef(e.focusedKey);R.useEffect(()=>{let B=Kk();if(e.isFocused&&e.focusedKey!=null&&(p!=null&&p.current)){let W=p.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);W&&(B==="keyboard"||P.current)&&(m||bQ(p.current,W),B!=="virtual"&&h7(W,{containingElement:r.current}))}e.isFocused&&e.focusedKey==null&&O.current!=null&&xg(r.current),O.current=e.focusedKey,P.current=!1},[m,p,e.focusedKey,e.isFocused,r]);let A={onKeyDown:S,onFocus:N,onBlur:k,onMouseDown(B){p.current===B.target&&B.preventDefault()}},{typeSelectProps:T}=hne({keyboardDelegate:n,selectionManager:e});c||(A=kt(T,A));let L;return f||(L=e.focusedKey==null?0:-1),{collectionProps:{...A,tabIndex:L}}}function I$(t){let{selectionManager:e,key:n,ref:r,shouldSelectOnPressUp:i,shouldUseVirtualFocus:a,focus:s,isDisabled:o,onAction:l,allowsDifferentPressOrigin:c,linkBehavior:f="action"}=t,h=kA(),m=F=>{if(F.pointerType==="keyboard"&&k3(F))e.toggleSelection(n);else{if(e.selectionMode==="none")return;if(e.isLink(n)){if(f==="selection"){let J=e.getItemProps(n);h.open(r.current,F,J.href,J.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(f==="override"||f==="none")return}e.selectionMode==="single"?e.isSelected(n)&&!e.disallowEmptySelection?e.toggleSelection(n):e.replaceSelection(n):F&&F.shiftKey?e.extendSelection(n):e.selectionBehavior==="toggle"||F&&(L0(F)||F.pointerType==="touch"||F.pointerType==="virtual")?e.toggleSelection(n):e.replaceSelection(n)}};R.useEffect(()=>{n===e.focusedKey&&e.isFocused&&!a&&(s?s():document.activeElement!==r.current&&xg(r.current))},[r,n,e.focusedKey,e.childFocusStrategy,e.isFocused,a]),o=o||e.isDisabled(n);let p={};!a&&!o?p={tabIndex:n===e.focusedKey?0:-1,onFocus(F){F.target===r.current&&e.setFocusedKey(n)}}:o&&(p.onMouseDown=F=>{F.preventDefault()});let v=e.isLink(n)&&f==="override",y=e.isLink(n)&&f!=="selection"&&f!=="none",x=!o&&e.canSelectItem(n)&&!v,S=(l||y)&&!o,_=S&&(e.selectionBehavior==="replace"?!x:!x||e.isEmpty),N=S&&x&&e.selectionBehavior==="replace",k=_||N,P=R.useRef(null),O=k&&x,A=R.useRef(!1),T=R.useRef(!1),L=F=>{if(l&&l(),y){let J=e.getItemProps(n);h.open(r.current,F,J.href,J.routerOptions)}},B={};i?(B.onPressStart=F=>{P.current=F.pointerType,A.current=O,F.pointerType==="keyboard"&&(!k||mz())&&m(F)},c?(B.onPressUp=_?null:F=>{F.pointerType!=="keyboard"&&x&&m(F)},B.onPress=_?L:null):B.onPress=F=>{if(_||N&&F.pointerType!=="mouse"){if(F.pointerType==="keyboard"&&!hz())return;L(F)}else F.pointerType!=="keyboard"&&x&&m(F)}):(B.onPressStart=F=>{P.current=F.pointerType,A.current=O,T.current=_,x&&(F.pointerType==="mouse"&&!_||F.pointerType==="keyboard"&&(!S||mz()))&&m(F)},B.onPress=F=>{(F.pointerType==="touch"||F.pointerType==="pen"||F.pointerType==="virtual"||F.pointerType==="keyboard"&&k&&hz()||F.pointerType==="mouse"&&T.current)&&(k?L(F):x&&m(F))}),p["data-key"]=n,B.preventFocusOnPress=a;let{pressProps:W,isPressed:Y}=Od(B),V=N?F=>{P.current==="mouse"&&(F.stopPropagation(),F.preventDefault(),L(F))}:void 0,{longPressProps:I}=jQ({isDisabled:!O,onLongPress(F){F.pointerType==="touch"&&(m(F),e.setSelectionBehavior("toggle"))}}),H=F=>{P.current==="touch"&&A.current&&F.preventDefault()},q=e.isLink(n)?F=>{wg.isOpening||F.preventDefault()}:void 0;return{itemProps:kt(p,x||_?W:{},O?I:{},{onDoubleClick:V,onDragStartCapture:H,onClick:q}),isPressed:Y,isSelected:e.isSelected(n),isFocused:e.isFocused&&e.focusedKey===n,isDisabled:o,allowsSelection:x,hasAction:k}}function hz(){let t=window.event;return(t==null?void 0:t.key)==="Enter"}function mz(){let t=window.event;return(t==null?void 0:t.key)===" "||(t==null?void 0:t.code)==="Space"}class pne{isDisabled(e){var n;return this.disabledBehavior==="all"&&(((n=e.props)===null||n===void 0?void 0:n.isDisabled)||this.disabledKeys.has(e.key))}getNextKey(e){for(e=this.collection.getKeyAfter(e);e!=null;){let n=this.collection.getItem(e);if(n.type==="item"&&!this.isDisabled(n))return e;e=this.collection.getKeyAfter(e)}return null}getPreviousKey(e){for(e=this.collection.getKeyBefore(e);e!=null;){let n=this.collection.getItem(e);if(n.type==="item"&&!this.isDisabled(n))return e;e=this.collection.getKeyBefore(e)}return null}findKey(e,n,r){let i=this.getItem(e);if(!i)return null;let a=i.getBoundingClientRect();do e=n(e),i=this.getItem(e);while(i&&r(a,i.getBoundingClientRect()));return e}isSameRow(e,n){return e.top===n.top||e.left!==n.left}isSameColumn(e,n){return e.left===n.left||e.top!==n.top}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getNextKey(n),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getPreviousKey(n),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,n){return n?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,n=>this.getNextColumn(n,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,n=>this.getNextColumn(n,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){let n=this.collection.getItem(e);if((n==null?void 0:n.type)==="item"&&!this.isDisabled(n))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){let n=this.collection.getItem(e);if(n.type==="item"&&!this.isDisabled(n))return e;e=this.collection.getKeyBefore(e)}return null}getItem(e){return e!==null?this.ref.current.querySelector(`[data-key="${CSS.escape(e.toString())}"]`):null}getKeyPageAbove(e){let n=this.ref.current,r=this.getItem(e);if(!r)return null;if(!BE(n))return this.getFirstKey();let i=n.getBoundingClientRect(),a=r.getBoundingClientRect();if(this.orientation==="horizontal"){let s=i.x-n.scrollLeft,o=Math.max(0,a.x-s+a.width-i.width);for(;r&&a.x-s>o;)e=this.getKeyAbove(e),r=e==null?null:this.getItem(e),a=r==null?void 0:r.getBoundingClientRect()}else{let s=i.y-n.scrollTop,o=Math.max(0,a.y-s+a.height-i.height);for(;r&&a.y-s>o;)e=this.getKeyAbove(e),r=e==null?null:this.getItem(e),a=r==null?void 0:r.getBoundingClientRect()}return e??this.getFirstKey()}getKeyPageBelow(e){let n=this.ref.current,r=this.getItem(e);if(!r)return null;if(!BE(n))return this.getLastKey();let i=n.getBoundingClientRect(),a=r.getBoundingClientRect();if(this.orientation==="horizontal"){let s=i.x-n.scrollLeft,o=Math.min(n.scrollWidth,a.x-s-a.width+i.width);for(;r&&a.x-s<o;)e=this.getKeyBelow(e),r=e==null?null:this.getItem(e),a=r==null?void 0:r.getBoundingClientRect()}else{let s=i.y-n.scrollTop,o=Math.min(n.scrollHeight,a.y-s-a.height+i.height);for(;r&&a.y-s<o;)e=this.getKeyBelow(e),r=e==null?null:this.getItem(e),a=r==null?void 0:r.getBoundingClientRect()}return e??this.getLastKey()}getKeyForSearch(e,n){if(!this.collator)return null;let r=this.collection,i=n||this.getFirstKey();for(;i!=null;){let a=r.getItem(i),s=a.textValue.slice(0,e.length);if(a.textValue&&this.collator.compare(s,e)===0)return i;i=this.getKeyBelow(i)}return null}constructor(...e){if(e.length===1){let n=e[0];this.collection=n.collection,this.ref=n.ref,this.collator=n.collator,this.disabledKeys=n.disabledKeys||new Set,this.disabledBehavior=n.disabledBehavior||"all",this.orientation=n.orientation,this.direction=n.direction,this.layout=n.layout||"stack"}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all";this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function M$(t){let{selectionManager:e,collection:n,disabledKeys:r,ref:i,keyboardDelegate:a}=t,s=xQ({usage:"search",sensitivity:"base"}),o=e.disabledBehavior,l=R.useMemo(()=>a||new pne({collection:n,disabledKeys:r,disabledBehavior:o,ref:i,collator:s}),[a,n,r,i,s,o]),{collectionProps:c}=mne({...t,ref:i,selectionManager:e,keyboardDelegate:l});return{listProps:c}}function GCe(t,e,n){let{listProps:r}=M$({...t,...e,allowsTabNavigation:!0,disallowSelectAll:!0,ref:n});return delete r.onKeyDownCapture,{accordionProps:{...r,tabIndex:void 0}}}function KCe(t){var e,n;const r=Xa(),{ref:i,as:a,item:s,onFocusChange:o}=t,{state:l,className:c,indicator:f,children:h,title:m,subtitle:p,startContent:v,motionProps:y,focusedKey:x,variant:S,isCompact:_=!1,classNames:N={},isDisabled:k=!1,hideIndicator:P=!1,disableAnimation:O=(e=r==null?void 0:r.disableAnimation)!=null?e:!1,keepContentMounted:A=!1,disableIndicatorAnimation:T=!1,HeadingComponent:L=a||"h2",onPress:B,onPressStart:W,onPressEnd:Y,onPressChange:V,onPressUp:I,onClick:H,...q}=t,F=a||"div",J=typeof F=="string",Z=fi(i),G=l.disabledKeys.has(s.key)||k,oe=l.selectionManager.isSelected(s.key),{buttonProps:ae,regionProps:te}=WCe({item:s,isDisabled:G},{...l,focusedKey:x},Z),{onFocus:re,onBlur:X,...ce}=ae,{isFocused:he,isFocusVisible:ve,focusProps:Ne}=Bo({autoFocus:(n=s.props)==null?void 0:n.autoFocus}),{isHovered:ke,hoverProps:Te}=Pl({isDisabled:G}),{pressProps:ye,isPressed:Ie}=Od({ref:Z,isDisabled:G,onPress:B,onPressStart:W,onPressEnd:Y,onPressChange:V,onPressUp:I}),Re=R.useCallback(()=>{o==null||o(!0,s.key)},[]),Ee=R.useCallback(()=>{o==null||o(!1,s.key)},[]),$e=R.useMemo(()=>({...N}),[gs(N)]),He=R.useMemo(()=>FCe({isCompact:_,isDisabled:G,hideIndicator:P,disableAnimation:O,disableIndicatorAnimation:T,variant:S}),[_,G,P,O,T,S]),gt=tn($e==null?void 0:$e.base,c),Ye=R.useCallback((Ae={})=>({"data-open":dt(oe),"data-disabled":dt(G),className:He.base({class:gt}),...kt(ps(q,{enabled:J}),Ae)}),[gt,J,q,He,s.props,oe,G]),yt=(Ae={})=>{var je,tt;return{ref:Z,"data-open":dt(oe),"data-focus":dt(he),"data-focus-visible":dt(ve),"data-disabled":dt(G),"data-hover":dt(ke),"data-pressed":dt(Ie),className:He.trigger({class:$e==null?void 0:$e.trigger}),onFocus:i7(Re,re,Ne.onFocus,q.onFocus,(je=s.props)==null?void 0:je.onFocus),onBlur:i7(Ee,X,Ne.onBlur,q.onBlur,(tt=s.props)==null?void 0:tt.onBlur),...kt(ce,Te,ye,Ae,{onClick:ho(ye.onClick,H)})}},_t=R.useCallback((Ae={})=>({"data-open":dt(oe),"data-disabled":dt(G),className:He.content({class:$e==null?void 0:$e.content}),...kt(te,Ae)}),[He,$e,te,oe,G,$e==null?void 0:$e.content]),St=R.useCallback((Ae={})=>({"aria-hidden":dt(!0),"data-open":dt(oe),"data-disabled":dt(G),className:He.indicator({class:$e==null?void 0:$e.indicator}),...Ae}),[He,$e==null?void 0:$e.indicator,oe,G,$e==null?void 0:$e.indicator]),Bt=R.useCallback((Ae={})=>({"data-open":dt(oe),"data-disabled":dt(G),className:He.heading({class:$e==null?void 0:$e.heading}),...Ae}),[He,$e==null?void 0:$e.heading,oe,G,$e==null?void 0:$e.heading]),Nt=R.useCallback((Ae={})=>({"data-open":dt(oe),"data-disabled":dt(G),className:He.title({class:$e==null?void 0:$e.title}),...Ae}),[He,$e==null?void 0:$e.title,oe,G,$e==null?void 0:$e.title]),Dt=R.useCallback((Ae={})=>({"data-open":dt(oe),"data-disabled":dt(G),className:He.subtitle({class:$e==null?void 0:$e.subtitle}),...Ae}),[He,$e,oe,G,$e==null?void 0:$e.subtitle]);return{Component:F,HeadingComponent:L,item:s,slots:He,classNames:$e,domRef:Z,indicator:f,children:h,title:m,subtitle:p,startContent:v,isOpen:oe,isDisabled:G,hideIndicator:P,keepContentMounted:A,disableAnimation:O,motionProps:y,getBaseProps:Ye,getHeadingProps:Bt,getButtonProps:yt,getContentProps:_t,getIndicatorProps:St,getTitleProps:Nt,getSubtitleProps:Dt}}var pz=t=>de.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...t,children:de.jsx("path",{d:"M15.5 19l-7-7 7-7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),gne=t=>de.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...t,children:de.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})}),YCe=t=>{const{isSelected:e,isIndeterminate:n,disableAnimation:r,...i}=t;return de.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...i,children:de.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})},JCe=({strokeWidth:t=1.5,...e})=>de.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,viewBox:"0 0 24 24",width:"1em",...e,children:de.jsx("path",{d:"m6 9 6 6 6-6"})}),wE={ease:[.36,.66,.4,1]},Ng={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:wE.ease}},exit:{opacity:0,transition:{duration:.3,ease:wE.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}},vne=dr((t,e)=>{const{Component:n,HeadingComponent:r,classNames:i,slots:a,indicator:s,children:o,title:l,subtitle:c,startContent:f,isOpen:h,isDisabled:m,hideIndicator:p,keepContentMounted:v,disableAnimation:y,motionProps:x,getBaseProps:S,getHeadingProps:_,getButtonProps:N,getTitleProps:k,getSubtitleProps:P,getContentProps:O,getIndicatorProps:A}=KCe({...t,ref:e}),T=G_e(),B=R.useMemo(()=>typeof s=="function"?s({indicator:de.jsx(pz,{}),isOpen:h,isDisabled:m}):s||null,[s,h,m])||de.jsx(pz,{}),W=R.useMemo(()=>{if(y)return de.jsx("div",{...O(),children:o});const Y={exit:{...Ng.collapse.exit,overflowY:"hidden"},enter:{...Ng.collapse.enter,overflowY:"unset"}};return v?de.jsx(Dd,{features:kd,children:de.jsx(Td.section,{animate:h?"enter":"exit",exit:"exit",initial:"exit",style:{willChange:T},variants:Y,onKeyDown:V=>{V.stopPropagation()},...x,children:de.jsx("div",{...O(),children:o})},"accordion-content")}):de.jsx(nx,{initial:!1,children:h&&de.jsx(Dd,{features:kd,children:de.jsx(Td.section,{animate:"enter",exit:"exit",initial:"exit",style:{willChange:T},variants:Y,onKeyDown:V=>{V.stopPropagation()},...x,children:de.jsx("div",{...O(),children:o})},"accordion-content")})})},[h,y,v,o,x]);return de.jsxs(n,{...S(),children:[de.jsx(r,{..._(),children:de.jsxs("button",{...N(),children:[f&&de.jsx("div",{className:a.startContent({class:i==null?void 0:i.startContent}),children:f}),de.jsxs("div",{className:a.titleWrapper({class:i==null?void 0:i.titleWrapper}),children:[l&&de.jsx("span",{...k(),children:l}),c&&de.jsx("span",{...P(),children:c})]}),!p&&B&&de.jsx("span",{...A(),children:B})]})}),W]})});vne.displayName="NextUI.AccordionItem";var qCe=vne;class XCe{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let n=this.keyMap.get(e);return n?n.prevKey:null}getKeyAfter(e){let n=this.keyMap.get(e);return n?n.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const n=[...this.getKeys()];return this.getItem(n[e])}constructor(e,{expandedKeys:n}={}){this.keyMap=new Map,this.iterable=e,n=n||new Set;let r=s=>{if(this.keyMap.set(s.key,s),s.childNodes&&(s.type==="section"||n.has(s.key)))for(let o of s.childNodes)r(o)};for(let s of e)r(s);let i,a=0;for(let[s,o]of this.keyMap)i?(i.nextKey=s,o.prevKey=i.key):(this.firstKey=s,o.prevKey=void 0),o.type==="item"&&(o.index=a++),i=o,i.nextKey=void 0;this.lastKey=i==null?void 0:i.key}}class fd extends Set{constructor(e,n,r){super(e),e instanceof fd?(this.anchorKey=n||e.anchorKey,this.currentKey=r||e.currentKey):(this.anchorKey=n,this.currentKey=r)}}function ZCe(t,e,n){let[r,i]=R.useState(t||e),a=R.useRef(t!==void 0),s=t!==void 0;R.useEffect(()=>{let c=a.current;c!==s&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}.`),a.current=s},[s]);let o=s?t:r,l=R.useCallback((c,...f)=>{let h=(m,...p)=>{n&&(Object.is(o,m)||n(m,...p)),s||(o=m)};typeof c=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),i((p,...v)=>{let y=c(s?o:p,...v);return h(y,...f),s?p:y})):(s||i(c),h(c,...f))},[s,o,n]);return[o,l]}function QCe(t,e){if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}function yne(t){let{selectionMode:e="none",disallowEmptySelection:n,allowDuplicateSelectionEvents:r,selectionBehavior:i="toggle",disabledBehavior:a="all"}=t,s=R.useRef(!1),[,o]=R.useState(!1),l=R.useRef(null),c=R.useRef(null),[,f]=R.useState(null),h=R.useMemo(()=>gz(t.selectedKeys),[t.selectedKeys]),m=R.useMemo(()=>gz(t.defaultSelectedKeys,new fd),[t.defaultSelectedKeys]),[p,v]=ZCe(h,m,t.onSelectionChange),y=R.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),[x,S]=R.useState(i);i==="replace"&&x==="toggle"&&typeof p=="object"&&p.size===0&&S("replace");let _=R.useRef(i);return R.useEffect(()=>{i!==_.current&&(S(i),_.current=i)},[i]),{selectionMode:e,disallowEmptySelection:n,selectionBehavior:x,setSelectionBehavior:S,get isFocused(){return s.current},setFocused(N){s.current=N,o(N)},get focusedKey(){return l.current},get childFocusStrategy(){return c.current},setFocusedKey(N,k="first"){l.current=N,c.current=k,f(N)},selectedKeys:p,setSelectedKeys(N){(r||!QCe(N,p))&&v(N)},disabledKeys:y,disabledBehavior:a}}function gz(t,e){return t?t==="all"?"all":new fd(t):e}function eTe(t,e){return typeof e.getChildren=="function"?e.getChildren(t.key):t.childNodes}function tTe(t){return nTe(t)}function nTe(t,e){for(let n of t)return n}function FI(t,e,n){if(e.parentKey===n.parentKey)return e.index-n.index;let r=[...vz(t,e),e],i=[...vz(t,n),n],a=r.slice(0,i.length).findIndex((s,o)=>s!==i[o]);return a!==-1?(e=r[a],n=i[a],e.index-n.index):r.findIndex(s=>s===n)>=0?1:(i.findIndex(s=>s===e)>=0,-1)}function vz(t,e){let n=[];for(;(e==null?void 0:e.parentKey)!=null;)e=t.getItem(e.parentKey),n.unshift(e);return n}class bne{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,n){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,n)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),n=this.state.selectedKeys;return this._isSelectAll=e.every(r=>n.has(r)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let n of this.state.selectedKeys){let r=this.collection.getItem(n);(!e||r&&FI(this.collection,r,e)<0)&&(e=r)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let n of this.state.selectedKeys){let r=this.collection.getItem(n);(!e||r&&FI(this.collection,r,e)>0)&&(e=r)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let n;if(this.state.selectedKeys==="all")n=new fd([e],e,e);else{let r=this.state.selectedKeys,i=r.anchorKey||e;n=new fd(r,i,e);for(let a of this.getKeyRange(i,r.currentKey||e))n.delete(a);for(let a of this.getKeyRange(e,i))this.canSelectItem(a)&&n.add(a)}this.state.setSelectedKeys(n)}getKeyRange(e,n){let r=this.collection.getItem(e),i=this.collection.getItem(n);return r&&i?FI(this.collection,r,i)<=0?this.getKeyRangeInternal(e,n):this.getKeyRangeInternal(n,e):[]}getKeyRangeInternal(e,n){let r=[],i=e;for(;i;){let a=this.collection.getItem(i);if((a&&a.type==="item"||a.type==="cell"&&this.allowsCellSelection)&&r.push(i),i===n)return r;i=this.collection.getKeyAfter(i)}return[]}getKey(e){let n=this.collection.getItem(e);if(!n||n.type==="cell"&&this.allowsCellSelection)return e;for(;n.type!=="item"&&n.parentKey!=null;)n=this.collection.getItem(n.parentKey);return!n||n.type!=="item"?null:n.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let n=new fd(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);n.has(e)?n.delete(e):this.canSelectItem(e)&&(n.add(e),n.anchorKey=e,n.currentKey=e),!(this.disallowEmptySelection&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let n=this.canSelectItem(e)?new fd([e],e,e):new fd;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode==="none")return;let n=new fd;for(let r of e)if(r=this.getKey(r),r!=null&&(n.add(r),this.selectionMode==="single"))break;this.state.setSelectedKeys(n)}getSelectAllKeys(){let e=[],n=r=>{for(;r!=null;){if(this.canSelectItem(r)){let i=this.collection.getItem(r);i.type==="item"&&e.push(r),i.hasChildNodes&&(this.allowsCellSelection||i.type!=="item")&&n(tTe(eTe(i,this.collection)).key)}r=this.collection.getKeyAfter(r)}};return n(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new fd)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,n){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||n&&(n.pointerType==="touch"||n.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let n=this.selectedKeys;if(e.size!==n.size)return!1;for(let r of e)if(!n.has(r))return!1;for(let r of n)if(!e.has(r))return!1;return!0}canSelectItem(e){var n;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let r=this.collection.getItem(e);return!(!r||!(r==null||(n=r.props)===null||n===void 0)&&n.isDisabled||r.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var n,r;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.isDisabled))}isLink(e){var n,r;return!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.href)}getItemProps(e){var n;return(n=this.collection.getItem(e))===null||n===void 0?void 0:n.props}constructor(e,n,r){this.collection=e,this.state=n;var i;this.allowsCellSelection=(i=r==null?void 0:r.allowsCellSelection)!==null&&i!==void 0?i:!1,this._isSelectAll=null}}function wne(t){return null}wne.getCollectionNode=function*(e,n){let{childItems:r,title:i,children:a}=e,s=e.title||e.children,o=e.textValue||(typeof s=="string"?s:"")||e["aria-label"]||"";!o&&!(n!=null&&n.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:s,textValue:o,"aria-label":e["aria-label"],hasChildNodes:rTe(e),*childNodes(){if(r)for(let l of r)yield{type:"item",value:l};else if(i){let l=[];it.Children.forEach(a,c=>{l.push({type:"item",element:c})}),yield*l}}}};function rTe(t){return t.hasChildItems!=null?t.hasChildItems:!!(t.childItems||t.title&&it.Children.count(t.children)>0)}let WA=wne;class iTe{build(e,n){return this.context=n,yz(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:n,items:r}=e;if(typeof n=="function"){if(!r)throw new Error("props.children was a function but props.items is missing");for(let i of e.items)yield*this.getFullNode({value:i},{renderer:n})}else{let i=[];it.Children.forEach(n,s=>{i.push(s)});let a=0;for(let s of i){let o=this.getFullNode({element:s,index:a},{});for(let l of o)a++,yield l}}}getKey(e,n,r,i){if(e.key!=null)return e.key;if(n.type==="cell"&&n.key!=null)return`${i}${n.key}`;let a=n.value;if(a!=null){var s;let o=(s=a.key)!==null&&s!==void 0?s:a.id;if(o==null)throw new Error("No key found for item");return o}return i?`${i}.${n.index}`:`$.${n.index}`}getChildState(e,n){return{renderer:n.renderer||e.renderer}}*getFullNode(e,n,r,i){let a=e.element;if(!a&&e.value&&n&&n.renderer){let l=this.cache.get(e.value);if(l&&(!l.shouldInvalidate||!l.shouldInvalidate(this.context))){l.index=e.index,l.parentKey=i?i.key:null,yield l;return}a=n.renderer(e.value)}if(it.isValidElement(a)){let l=a.type;if(typeof l!="function"&&typeof l.getCollectionNode!="function"){let m=typeof a.type=="function"?a.type.name:a.type;throw new Error(`Unknown element <${m}> in collection.`)}let c=l.getCollectionNode(a.props,this.context),f=e.index,h=c.next();for(;!h.done&&h.value;){let m=h.value;e.index=f;let p=m.key;p||(p=m.element?null:this.getKey(a,e,n,r));let y=[...this.getFullNode({...m,key:p,index:f,wrapper:aTe(e.wrapper,m.wrapper)},this.getChildState(n,m),r?`${r}${a.key}`:a.key,i)];for(let x of y){if(x.value=m.value||e.value,x.value&&this.cache.set(x.value,x),e.type&&x.type!==e.type)throw new Error(`Unsupported type <${BI(x.type)}> in <${BI(i.type)}>. Only <${BI(e.type)}> is supported.`);f++,yield x}h=c.next(y)}return}if(e.key==null)return;let s=this,o={type:e.type,props:e.props,key:e.key,parentKey:i?i.key:null,value:e.value,level:i?i.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:yz(function*(){if(!e.hasChildNodes)return;let l=0;for(let c of e.childNodes()){c.key!=null&&(c.key=`${o.key}${c.key}`),c.index=l;let f=s.getFullNode(c,s.getChildState(n,c),o.key,o);for(let h of f)l++,yield h}})};yield o}constructor(){this.cache=new WeakMap}}function yz(t){let e=[],n=null;return{*[Symbol.iterator](){for(let r of e)yield r;n||(n=t());for(let r of n)e.push(r),yield r}}}function aTe(t,e){if(t&&e)return n=>t(e(n));if(t)return t;if(e)return e}function BI(t){return t[0].toUpperCase()+t.slice(1)}function xne(t,e,n){let r=R.useMemo(()=>new iTe,[]),{children:i,items:a,collection:s}=t;return R.useMemo(()=>{if(s)return s;let l=r.build({children:i,items:a},n);return e(l)},[r,i,a,s,n,e])}function sTe(t,e){return typeof e.getChildren=="function"?e.getChildren(t.key):t.childNodes}const bz=new WeakMap;function Sne(t){let e=bz.get(t);if(e!=null)return e;e=0;let n=r=>{for(let i of r)i.type==="section"?n(sTe(i,t)):e++};return n(t),bz.set(t,e),e}function Ene(t){let{onExpandedChange:e}=t,[n,r]=Mg(t.expandedKeys?new Set(t.expandedKeys):void 0,t.defaultExpandedKeys?new Set(t.defaultExpandedKeys):new Set,e),i=yne(t),a=R.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),s=xne(t,R.useCallback(l=>new XCe(l,{expandedKeys:n}),[n]),null);return R.useEffect(()=>{i.focusedKey!=null&&!s.getItem(i.focusedKey)&&i.setFocusedKey(null)},[s,i.focusedKey]),{collection:s,expandedKeys:n,disabledKeys:a,toggleKey:l=>{r(oTe(n,l))},setExpandedKeys:r,selectionManager:new bne(s,i)}}function oTe(t,e){let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}function lTe(t){var e;const n=Xa(),{ref:r,as:i,className:a,items:s,variant:o,motionProps:l,expandedKeys:c,disabledKeys:f,selectedKeys:h,children:m,defaultExpandedKeys:p,selectionMode:v="single",selectionBehavior:y="toggle",keepContentMounted:x=!1,disallowEmptySelection:S,defaultSelectedKeys:_,onExpandedChange:N,onSelectionChange:k,dividerProps:P={},isCompact:O=!1,isDisabled:A=!1,showDivider:T=!0,hideIndicator:L=!1,disableAnimation:B=(e=n==null?void 0:n.disableAnimation)!=null?e:!1,disableIndicatorAnimation:W=!1,itemClasses:Y,...V}=t,[I,H]=R.useState(null),q=i||"div",F=typeof q=="string",J=fi(r),Z=R.useMemo(()=>LCe({variant:o,className:a}),[o,a]),oe={children:R.useMemo(()=>{let Ne=[];return it.Children.map(m,ke=>{var Te;if(it.isValidElement(ke)&&typeof((Te=ke.props)==null?void 0:Te.children)!="string"){const ye=it.cloneElement(ke,{hasChildItems:!1});Ne.push(ye)}else Ne.push(ke)}),Ne},[m]),items:s},ae={expandedKeys:c,defaultExpandedKeys:p,onExpandedChange:N},te={disabledKeys:f,selectedKeys:h,selectionMode:v,selectionBehavior:y,disallowEmptySelection:S,defaultSelectedKeys:_??p,onSelectionChange:k,...oe,...ae},re=Ene(te);re.selectionManager.setFocusedKey=Ne=>{H(Ne)};const{accordionProps:X}=GCe({...oe,...ae},re,J),ce=R.useMemo(()=>({state:re,focusedKey:I,motionProps:l,isCompact:O,isDisabled:A,hideIndicator:L,disableAnimation:B,keepContentMounted:x,disableIndicatorAnimation:W}),[I,O,A,L,h,B,x,re==null?void 0:re.expandedKeys.values,W,re.expandedKeys.size,re.disabledKeys.size,l]),he=R.useCallback((Ne={})=>({ref:J,className:Z,"data-orientation":"vertical",...kt(X,ps(V,{enabled:F}),Ne)}),[]),ve=R.useCallback((Ne,ke)=>{Ne&&H(ke)},[]);return{Component:q,values:ce,state:re,focusedKey:I,getBaseProps:he,isSplitted:o==="splitted",classNames:Z,showDivider:T,dividerProps:P,disableAnimation:B,handleFocusChanged:ve,itemClasses:Y}}function uTe(t){let e=ps(t,{enabled:typeof t.elementType=="string"}),n;return t.orientation==="vertical"&&(n="vertical"),t.elementType!=="hr"?{separatorProps:{...e,role:"separator","aria-orientation":n}}:{separatorProps:e}}function cTe(t){const{as:e,className:n,orientation:r,...i}=t;let a=e||"hr";a==="hr"&&r==="vertical"&&(a="div");const{separatorProps:s}=uTe({elementType:typeof a=="string"?a:"hr",orientation:r}),o=R.useMemo(()=>VCe({orientation:r,className:n}),[r,n]),l=R.useCallback((c={})=>({className:o,role:"separator","data-orientation":r,...s,...i,...c}),[o,r,s,i]);return{Component:a,getDividerProps:l}}var Nne=dr((t,e)=>{const{Component:n,getDividerProps:r}=cTe({...t});return de.jsx(n,{ref:e,...r()})});Nne.displayName="NextUI.Divider";var Bn=Nne,_ne=dr((t,e)=>{const{Component:n,values:r,state:i,isSplitted:a,showDivider:s,getBaseProps:o,disableAnimation:l,handleFocusChanged:c,itemClasses:f,dividerProps:h}=lTe({...t,ref:e}),m=R.useCallback((v,y)=>c(v,y),[c]),p=R.useMemo(()=>[...i.collection].map((v,y)=>{const x={...f,...v.props.classNames||{}};return de.jsxs(R.Fragment,{children:[de.jsx(qCe,{item:v,variant:t.variant,onFocusChange:m,...r,...v.props,classNames:x}),!v.props.hidden&&!a&&s&&y<i.collection.size-1&&de.jsx(Bn,{...h})]},v.key)}),[r,f,m,a,s,i.collection]);return de.jsx(n,{...o(),children:l?p:de.jsx(Zte,{children:p})})});_ne.displayName="NextUI.Accordion";var Cne=_ne,V$=t=>{const e={top:{originY:1},bottom:{originY:0},left:{originX:1},right:{originX:0},"top-start":{originX:0,originY:1},"top-end":{originX:1,originY:1},"bottom-start":{originX:0,originY:0},"bottom-end":{originX:1,originY:0},"right-start":{originX:0,originY:0},"right-end":{originX:0,originY:1},"left-start":{originX:1,originY:0},"left-end":{originX:1,originY:1}};return(e==null?void 0:e[t])||{}},Tne=t=>({top:"top",bottom:"bottom",left:"left",right:"right","top-start":"top start","top-end":"top end","bottom-start":"bottom start","bottom-end":"bottom end","left-start":"left top","left-end":"left bottom","right-start":"right top","right-end":"right bottom"})[t],dTe=(t,e)=>{if(e.includes("-")){const[n]=e.split("-");if(n.includes(t))return!1}return!0},oP=(t,e)=>{if(e.includes("-")){const[,n]=e.split("-");return`${t}-${n}`}return t},gS=new WeakMap,Xu=[];function fTe(t,e=document.body){let n=new Set(t),r=new Set,i=l=>{for(let m of l.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(m);let c=m=>{const p=m.parentElement;if(n.has(m)||r.has(p)&&p.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let v of n)if(m.contains(v))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},f=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),h=c(l);if(h===NodeFilter.FILTER_ACCEPT&&a(l),h!==NodeFilter.FILTER_REJECT){let m=f.nextNode();for(;m!=null;)a(m),m=f.nextNode()}},a=l=>{var c;let f=(c=gS.get(l))!=null?c:0;l.getAttribute("aria-hidden")==="true"&&f===0||(f===0&&l.setAttribute("aria-hidden","true"),r.add(l),gS.set(l,f+1))};Xu.length&&Xu[Xu.length-1].disconnect(),i(e);let s=new MutationObserver(l=>{for(let c of l)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...n,...r].some(f=>f.contains(c.target))){for(let f of c.removedNodes)f instanceof Element&&(n.delete(f),r.delete(f));for(let f of c.addedNodes)(f instanceof HTMLElement||f instanceof SVGElement)&&(f.dataset.liveAnnouncer==="true"||f.dataset.reactAriaTopLayer==="true")?n.add(f):f instanceof Element&&i(f)}});s.observe(e,{childList:!0,subtree:!0});let o={observe(){s.observe(e,{childList:!0,subtree:!0})},disconnect(){s.disconnect()}};return Xu.push(o),()=>{s.disconnect();for(let l of r){let c=gS.get(l);c!=null&&(c===1?(l.removeAttribute("aria-hidden"),gS.delete(l)):gS.set(l,c-1))}o===Xu[Xu.length-1]?(Xu.pop(),Xu.length&&Xu[Xu.length-1].observe()):Xu.splice(Xu.indexOf(o),1)}}var $$=(t,e,n)=>{const r=e==null?void 0:e.current;if(!r||!r.contains(t)){const i=document.querySelectorAll("body > span[data-focus-scope-start]");let a=[];if(i.forEach(s=>{a.push(s.nextElementSibling)}),a.length===1)return n.close(),!1}return!r||!r.contains(t)},hTe=WA,Dne=hTe,rx=globalThis!=null&&globalThis.document?R.useLayoutEffect:R.useEffect;function mTe(t){var e,n;const r=Xa(),[i,a]=zs(t,fz.variantKeys),{ref:s,as:o,children:l,color:c="default",size:f="md",variant:h="solid",radius:m,isDisabled:p=!1,isIconOnly:v=!1,disableRipple:y=(e=r==null?void 0:r.disableRipple)!=null?e:!1,disableAnimation:x=(n=r==null?void 0:r.disableAnimation)!=null?n:!1,className:S,..._}=i,N=o||"div",k=fi(s),P=R.useMemo(()=>fz({...a,className:S}),[gs(a),S]),O=R.useMemo(()=>({size:f,color:c,variant:h,radius:m,isIconOnly:v,isDisabled:p,disableAnimation:x,disableRipple:y,fullWidth:!!(t!=null&&t.fullWidth)}),[f,c,h,m,p,v,x,y,t==null?void 0:t.fullWidth]),A=R.useCallback(()=>({role:"group",..._}),[_]);return{Component:N,children:l,domRef:k,context:O,classNames:P,getButtonGroupProps:A}}var[pTe,gTe]=Zw({name:"ButtonGroupContext",strict:!1}),kne=dr((t,e)=>{const{Component:n,domRef:r,context:i,children:a,classNames:s,getButtonGroupProps:o}=mTe({...t,ref:e});return de.jsx(pTe,{value:i,children:de.jsx(n,{ref:r,className:s,...o(),children:a})})});kne.displayName="NextUI.ButtonGroup";var vTe=kne;function KN(t,e){let{elementType:n="button",isDisabled:r,onPress:i,onPressStart:a,onPressEnd:s,onPressChange:o,preventFocusOnPress:l,allowFocusWhenDisabled:c,onClick:f,href:h,target:m,rel:p,type:v="button",allowTextSelectionOnPress:y}=t,x;n==="button"?x={type:v,disabled:r}:x={role:"button",tabIndex:r?void 0:0,href:n==="a"&&r?void 0:h,target:n==="a"?m:void 0,type:n==="input"?v:void 0,disabled:n==="input"?r:void 0,"aria-disabled":!r||n==="input"?void 0:r,rel:n==="a"?p:void 0};let{pressProps:S,isPressed:_}=Od({onPressStart:a,onPressEnd:s,onPressChange:o,onPress:i,isDisabled:r,preventFocusOnPress:l,allowTextSelectionOnPress:y,ref:e}),{focusableProps:N}=UN(t,e);c&&(N.tabIndex=r?-1:N.tabIndex);let k=kt(N,S,vc(t,{labelable:!0}));return{isPressed:_,buttonProps:kt(x,k,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],onClick:P=>{f==null||f(P)}})}}var Pne=t=>{const{ripples:e=[],motionProps:n,color:r="currentColor",style:i,onClear:a}=t;return de.jsx(de.Fragment,{children:e.map(s=>{const o=dwe(.01*s.size,.2,s.size>100?.75:.5);return de.jsx(Dd,{features:kd,children:de.jsx(nx,{mode:"popLayout",children:de.jsx(Td.span,{animate:{transform:"scale(2)",opacity:0},className:"nextui-ripple",exit:{opacity:0},initial:{transform:"scale(0)",opacity:.35},style:{position:"absolute",backgroundColor:r,borderRadius:"100%",transformOrigin:"center",pointerEvents:"none",overflow:"hidden",inset:0,zIndex:0,top:s.y,left:s.x,width:`${s.size}px`,height:`${s.size}px`,...i},transition:{duration:o},onAnimationComplete:()=>{a(s.key)},...n})})},s.key)})})};Pne.displayName="NextUI.Ripple";var Ane=Pne;function Rne(t={}){const[e,n]=R.useState([]),r=R.useCallback(a=>{const s=a.currentTarget,o=Math.max(s.clientWidth,s.clientHeight),l=s.getBoundingClientRect();n(c=>[...c,{key:cwe(c.length.toString()),size:o,x:a.clientX-l.left-o/2,y:a.clientY-l.top-o/2}])},[]),i=R.useCallback(a=>{n(s=>s.filter(o=>o.key!==a))},[]);return{ripples:e,onClick:r,onClear:i,...t}}function yTe(t){var e,n,r,i,a,s,o,l,c;const f=gTe(),h=Xa(),m=!!f,{ref:p,as:v,children:y,startContent:x,endContent:S,autoFocus:_,className:N,spinner:k,isLoading:P=!1,disableRipple:O=!1,fullWidth:A=(e=f==null?void 0:f.fullWidth)!=null?e:!1,radius:T=f==null?void 0:f.radius,size:L=(n=f==null?void 0:f.size)!=null?n:"md",color:B=(r=f==null?void 0:f.color)!=null?r:"default",variant:W=(i=f==null?void 0:f.variant)!=null?i:"solid",disableAnimation:Y=(s=(a=f==null?void 0:f.disableAnimation)!=null?a:h==null?void 0:h.disableAnimation)!=null?s:!1,isDisabled:V=(o=f==null?void 0:f.isDisabled)!=null?o:!1,isIconOnly:I=(l=f==null?void 0:f.isIconOnly)!=null?l:!1,spinnerPlacement:H="start",onPress:q,onClick:F,...J}=t,Z=v||"button",G=typeof Z=="string",oe=fi(p),ae=(c=O||(h==null?void 0:h.disableRipple))!=null?c:Y,{isFocusVisible:te,isFocused:re,focusProps:X}=Bo({autoFocus:_}),ce=V||P,he=R.useMemo(()=>BCe({size:L,color:B,variant:W,radius:T,fullWidth:A,isDisabled:ce,isInGroup:m,disableAnimation:Y,isIconOnly:I,className:N}),[L,B,W,T,A,ce,m,I,Y,N]),{onClick:ve,onClear:Ne,ripples:ke}=Rne(),Te=R.useCallback(St=>{ae||ce||Y||oe.current&&ve(St)},[ae,ce,Y,oe,ve]),{buttonProps:ye,isPressed:Ie}=KN({elementType:v,isDisabled:ce,onPress:q,onClick:ho(F,Te),...J},oe),{isHovered:Re,hoverProps:Ee}=Pl({isDisabled:ce}),$e=R.useCallback((St={})=>({"data-disabled":dt(ce),"data-focus":dt(re),"data-pressed":dt(Ie),"data-focus-visible":dt(te),"data-hover":dt(Re),"data-loading":dt(P),...kt(ye,X,Ee,ps(J,{enabled:G}),ps(St))}),[P,ce,re,Ie,G,te,Re,ye,X,Ee,J]),He=St=>R.isValidElement(St)?R.cloneElement(St,{"aria-hidden":!0,focusable:!1,tabIndex:-1}):null,gt=He(x),Ye=He(S),yt=R.useMemo(()=>({sm:"sm",md:"sm",lg:"md"})[L],[L]),_t=R.useCallback(()=>({ripples:ke,onClear:Ne}),[ke,Ne]);return{Component:Z,children:y,domRef:oe,spinner:k,styles:he,startContent:gt,endContent:Ye,isLoading:P,spinnerPlacement:H,spinnerSize:yt,disableRipple:ae,getButtonProps:$e,getRippleProps:_t,isIconOnly:I}}function bTe(t){const[e,n]=zs(t,az.variantKeys),{children:r,className:i,classNames:a,label:s,...o}=e,l=R.useMemo(()=>az({...n}),[gs(n)]),c=tn(a==null?void 0:a.base,i),f=s||r,h=R.useMemo(()=>f&&typeof f=="string"?f:o["aria-label"]?"":"Loading",[r,f,o["aria-label"]]),m=R.useCallback(()=>({"aria-label":h,className:l.base({class:c}),...o}),[h,l,c,o]);return{label:f,slots:l,classNames:a,getSpinnerProps:m}}var One=dr((t,e)=>{const{slots:n,classNames:r,label:i,getSpinnerProps:a}=bTe({...t});return de.jsxs("div",{ref:e,...a(),children:[de.jsxs("div",{className:n.wrapper({class:r==null?void 0:r.wrapper}),children:[de.jsx("i",{className:n.circle1({class:r==null?void 0:r.circle1})}),de.jsx("i",{className:n.circle2({class:r==null?void 0:r.circle2})})]}),i&&de.jsx("span",{className:n.label({class:r==null?void 0:r.label}),children:i})]})});One.displayName="NextUI.Spinner";var L$=One,jne=dr((t,e)=>{const{Component:n,domRef:r,children:i,styles:a,spinnerSize:s,spinner:o=de.jsx(L$,{color:"current",size:s}),spinnerPlacement:l,startContent:c,endContent:f,isLoading:h,disableRipple:m,getButtonProps:p,getRippleProps:v,isIconOnly:y}=yTe({...t,ref:e});return de.jsxs(n,{ref:r,className:a,...p(),children:[c,h&&l==="start"&&o,h&&y?null:i,h&&l==="end"&&o,f,!m&&de.jsx(Ane,{...v()})]})});jne.displayName="NextUI.Button";var et=jne,[wTe,F$]=Zw({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"}),Ine=dr((t,e)=>{var n;const{as:r,className:i,children:a,...s}=t,o=r||"div",l=fi(e),{slots:c,classNames:f}=F$(),h=tn(f==null?void 0:f.body,i);return de.jsx(o,{ref:l,className:(n=c.body)==null?void 0:n.call(c,{class:h}),...s,children:a})});Ine.displayName="NextUI.CardBody";var vn=Ine,Mne=dr((t,e)=>{var n;const{as:r,className:i,children:a,...s}=t,o=r||"div",l=fi(e),{slots:c,classNames:f}=F$(),h=tn(f==null?void 0:f.footer,i);return de.jsx(o,{ref:l,className:(n=c.footer)==null?void 0:n.call(c,{class:h}),...s,children:a})});Mne.displayName="NextUI.CardFooter";var xTe=Mne,Vne=dr((t,e)=>{var n;const{as:r,className:i,children:a,...s}=t,o=r||"div",l=fi(e),{slots:c,classNames:f}=F$(),h=tn(f==null?void 0:f.header,i);return de.jsx(o,{ref:l,className:(n=c.header)==null?void 0:n.call(c,{class:h}),...s,children:a})});Vne.displayName="NextUI.CardHeader";var Kn=Vne;function STe(t){var e,n,r,i;const a=Xa(),[s,o]=zs(t,cz.variantKeys),{ref:l,as:c,children:f,onClick:h,onPress:m,autoFocus:p,className:v,classNames:y,allowTextSelectionOnPress:x=!0,...S}=s,_=fi(l),N=c||(t.isPressable?"button":"div"),k=typeof N=="string",P=(n=(e=t.disableAnimation)!=null?e:a==null?void 0:a.disableAnimation)!=null?n:!1,O=(i=(r=t.disableRipple)!=null?r:a==null?void 0:a.disableRipple)!=null?i:!1,A=tn(y==null?void 0:y.base,v),{onClick:T,onClear:L,ripples:B}=Rne(),W=te=>{!P&&!O&&_.current&&T(te)},{buttonProps:Y,isPressed:V}=KN({onPress:m,elementType:c,isDisabled:!t.isPressable,onClick:ho(h,W),allowTextSelectionOnPress:x,...S},_),{hoverProps:I,isHovered:H}=Pl({isDisabled:!t.isHoverable,...S}),{isFocusVisible:q,isFocused:F,focusProps:J}=Bo({autoFocus:p}),Z=R.useMemo(()=>cz({...o,disableAnimation:P}),[gs(o),P]),G=R.useMemo(()=>({slots:Z,classNames:y,disableAnimation:P,isDisabled:t.isDisabled,isFooterBlurred:t.isFooterBlurred,fullWidth:t.fullWidth}),[Z,y,t.isDisabled,t.isFooterBlurred,P,t.fullWidth]),oe=R.useCallback((te={})=>({ref:_,className:Z.base({class:A}),tabIndex:t.isPressable?0:-1,"data-hover":dt(H),"data-pressed":dt(V),"data-focus":dt(F),"data-focus-visible":dt(q),"data-disabled":dt(t.isDisabled),...kt(t.isPressable?{...Y,...J,role:"button"}:{},t.isHoverable?I:{},ps(S,{enabled:k}),ps(te))}),[_,Z,A,k,t.isPressable,t.isHoverable,t.isDisabled,H,V,q,Y,J,I,S]),ae=R.useCallback(()=>({ripples:B,onClear:L}),[B,L]);return{context:G,domRef:_,Component:N,classNames:y,children:f,isHovered:H,isPressed:V,disableAnimation:P,isPressable:t.isPressable,isHoverable:t.isHoverable,disableRipple:O,handleClick:W,isFocusVisible:q,getCardProps:oe,getRippleProps:ae}}var $ne=dr((t,e)=>{const{children:n,context:r,Component:i,isPressable:a,disableAnimation:s,disableRipple:o,getCardProps:l,getRippleProps:c}=STe({...t,ref:e});return de.jsxs(i,{...l(),children:[de.jsx(wTe,{value:r,children:n}),a&&!s&&!o&&de.jsx(Ane,{...c()})]})});$ne.displayName="NextUI.Card";var wn=$ne;function ETe(t){const[e,n]=zs(t,dz.variantKeys),{ref:r,as:i,children:a,avatar:s,startContent:o,endContent:l,onClose:c,classNames:f,className:h,...m}=e,p=i||"div",v=fi(r),y=tn(f==null?void 0:f.base,h),x=!!c,S=t.variant==="dot",{focusProps:_,isFocusVisible:N}=Bo(),k=R.useMemo(()=>typeof a=="string"&&(a==null?void 0:a.length)===1,[a]),P=R.useMemo(()=>!!s||!!o,[s,o]),O=R.useMemo(()=>!!l||x,[l,x]),A=R.useMemo(()=>dz({...n,hasStartContent:P,hasEndContent:O,isOneChar:k,isCloseable:x,isCloseButtonFocusVisible:N}),[gs(n),N,P,O,k,x]),{pressProps:T}=Od({isDisabled:!!(t!=null&&t.isDisabled),onPress:c}),L=()=>({ref:v,className:A.base({class:y}),...m}),B=()=>({role:"button",tabIndex:0,className:A.closeButton({class:f==null?void 0:f.closeButton}),"aria-label":"close chip",...kt(T,_)}),W=V=>R.isValidElement(V)?R.cloneElement(V,{className:A.avatar({class:f==null?void 0:f.avatar})}):null,Y=V=>R.isValidElement(V)?R.cloneElement(V,{className:tn("max-h-[80%]",V.props.className)}):null;return{Component:p,children:a,slots:A,classNames:f,isDot:S,isCloseable:x,startContent:W(s)||Y(o),endContent:Y(l),getCloseButtonProps:B,getChipProps:L}}var Lne=dr((t,e)=>{const{Component:n,children:r,slots:i,classNames:a,isDot:s,isCloseable:o,startContent:l,endContent:c,getCloseButtonProps:f,getChipProps:h}=ETe({...t,ref:e}),m=R.useMemo(()=>s&&!l?de.jsx("span",{className:i.dot({class:a==null?void 0:a.dot})}):l,[i,l,s]),p=R.useMemo(()=>o?de.jsx("span",{...f(),children:c||de.jsx(gne,{})}):c,[c,o,f]);return de.jsxs(n,{...h(),children:[m,de.jsx("span",{className:i.content({class:a==null?void 0:a.content}),children:r}),p]})});Lne.displayName="NextUI.Chip";var Fn=Lne;function Fne(t,e,n){let{validationBehavior:r,focus:i}=t;Bi(()=>{if(r==="native"&&(n!=null&&n.current)){let l=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";n.current.setCustomValidity(l),n.current.hasAttribute("title")||(n.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(_Te(n.current))}});let a=Us(()=>{e.resetValidation()}),s=Us(l=>{var c;e.displayValidation.isInvalid||e.commitValidation();let f=n==null||(c=n.current)===null||c===void 0?void 0:c.form;if(!l.defaultPrevented&&n&&f&&CTe(f)===n.current){var h;i?i():(h=n.current)===null||h===void 0||h.focus(),Z5("keyboard")}l.preventDefault()}),o=Us(()=>{e.commitValidation()});R.useEffect(()=>{let l=n==null?void 0:n.current;if(!l)return;let c=l.form;return l.addEventListener("invalid",s),l.addEventListener("change",o),c==null||c.addEventListener("reset",a),()=>{l.removeEventListener("invalid",s),l.removeEventListener("change",o),c==null||c.removeEventListener("reset",a)}},[n,s,o,a,r])}function NTe(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function _Te(t){return{isInvalid:!t.validity.valid,validationDetails:NTe(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function CTe(t){for(let e=0;e<t.elements.length;e++){let n=t.elements[e];if(!n.validity.valid)return n}return null}const Bne={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},Une={...Bne,customError:!0,valid:!1},vS={isInvalid:!1,validationDetails:Bne,validationErrors:[]},TTe=R.createContext({}),wz="__formValidationState"+Date.now();function Wne(t){if(t[wz]){let{realtimeValidation:e,displayValidation:n,updateValidation:r,resetValidation:i,commitValidation:a}=t[wz];return{realtimeValidation:e,displayValidation:n,updateValidation:r,resetValidation:i,commitValidation:a}}return DTe(t)}function DTe(t){let{isInvalid:e,validationState:n,name:r,value:i,builtinValidation:a,validate:s,validationBehavior:o="aria"}=t;n&&(e||(e=n==="invalid"));let l=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:Une}:null,c=R.useMemo(()=>xz(kTe(s,i)),[s,i]);a!=null&&a.validationDetails.valid&&(a=null);let f=R.useContext(TTe),h=R.useMemo(()=>r?Array.isArray(r)?r.flatMap(B=>P3(f[B])):P3(f[r]):[],[f,r]),[m,p]=R.useState(f),[v,y]=R.useState(!1);f!==m&&(p(f),y(!1));let x=R.useMemo(()=>xz(v?[]:h),[v,h]),S=R.useRef(vS),[_,N]=R.useState(vS),k=R.useRef(vS),P=()=>{if(!O)return;A(!1);let B=c||a||S.current;UI(B,k.current)||(k.current=B,N(B))},[O,A]=R.useState(!1);return R.useEffect(P),{realtimeValidation:l||x||c||a||vS,displayValidation:o==="native"?l||x||_:l||x||c||a||_,updateValidation(B){o==="aria"&&!UI(_,B)?N(B):S.current=B},resetValidation(){let B=vS;UI(B,k.current)||(k.current=B,N(B)),o==="native"&&A(!1),y(!0)},commitValidation(){o==="native"&&A(!0),y(!0)}}}function P3(t){return t?Array.isArray(t)?t:[t]:[]}function kTe(t,e){if(typeof t=="function"){let n=t(e);if(n&&typeof n!="boolean")return P3(n)}return[]}function xz(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:Une}:null}function UI(t,e){return t===e?!0:t&&e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((n,r)=>n===e.validationErrors[r])&&Object.entries(t.validationDetails).every(([n,r])=>e.validationDetails[n]===r)}const B$=typeof document<"u"?it.useLayoutEffect:()=>{};function oy(t){const e=R.useRef(null);return B$(()=>{e.current=t},[t]),R.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}let Sz=new Map;function PTe(t,e){if(t===e)return t;let n=Sz.get(t);if(n)return n(e),e;let r=Sz.get(e);return r?(r(t),t):e}function zne(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}const cu=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},Aw=t=>t&&"window"in t&&t.window===t?t:cu(t).defaultView||window;function Hne(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Hne(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ATe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Hne(t))&&(r&&(r+=" "),r+=e);return r}function _y(...t){let e={...t[0]};for(let n=1;n<t.length;n++){let r=t[n];for(let i in r){let a=e[i],s=r[i];typeof a=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=zne(a,s):(i==="className"||i==="UNSAFE_className")&&typeof a=="string"&&typeof s=="string"?e[i]=ATe(a,s):i==="id"&&a&&s?e.id=PTe(a,s):e[i]=s!==void 0?s:a}}return e}const RTe=new Set(["id"]),OTe=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),jTe=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),ITe=/^(data-.*)$/;function MTe(t,e={}){let{labelable:n,isLink:r,propNames:i}=e,a={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(RTe.has(s)||n&&OTe.has(s)||r&&jTe.has(s)||i!=null&&i.has(s)||ITe.test(s))&&(a[s]=t[s]);return a}function py(t){if(VTe())t.focus({preventScroll:!0});else{let e=$Te(t);t.focus(),LTe(e)}}let DT=null;function VTe(){if(DT==null){DT=!1;try{document.createElement("div").focus({get preventScroll(){return DT=!0,!0}})}catch{}}return DT}function $Te(t){let e=t.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==r;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function LTe(t){for(let{element:e,scrollTop:n,scrollLeft:r}of t)e.scrollTop=n,e.scrollLeft=r}function zA(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function U$(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Lg(t){let e=null;return()=>(e==null&&(e=t()),e)}const qE=Lg(function(){return U$(/^Mac/i)}),FTe=Lg(function(){return U$(/^iPhone/i)}),Gne=Lg(function(){return U$(/^iPad/i)||qE()&&navigator.maxTouchPoints>1}),Kne=Lg(function(){return FTe()||Gne()}),BTe=Lg(function(){return zA(/AppleWebKit/i)&&!UTe()}),UTe=Lg(function(){return zA(/Chrome/i)}),Yne=Lg(function(){return zA(/Android/i)}),WTe=Lg(function(){return zA(/Firefox/i)});function XE(t,e,n=!0){var r,i;let{metaKey:a,ctrlKey:s,altKey:o,shiftKey:l}=e;WTe()&&(!((i=window.event)===null||i===void 0||(r=i.type)===null||r===void 0)&&r.startsWith("key"))&&t.target==="_blank"&&(qE()?a=!0:s=!0);let c=BTe()&&qE()&&!Gne()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:s,altKey:o,shiftKey:l}):new MouseEvent("click",{metaKey:a,ctrlKey:s,altKey:o,shiftKey:l,bubbles:!0,cancelable:!0});XE.isOpening=n,py(t),t.dispatchEvent(c),XE.isOpening=!1}XE.isOpening=!1;let F0=new Map,A3=new Set;function Ez(){if(typeof window>"u")return;function t(r){return"propertyName"in r}let e=r=>{if(!t(r)||!r.target)return;let i=F0.get(r.target);i||(i=new Set,F0.set(r.target,i),r.target.addEventListener("transitioncancel",n,{once:!0})),i.add(r.propertyName)},n=r=>{if(!t(r)||!r.target)return;let i=F0.get(r.target);if(i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",n),F0.delete(r.target)),F0.size===0)){for(let a of A3)a();A3.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?Ez():document.addEventListener("DOMContentLoaded",Ez));function Jne(t){requestAnimationFrame(()=>{F0.size===0?t():A3.add(t)})}function zTe(){let t=R.useRef(new Map),e=R.useCallback((i,a,s,o)=>{let l=o!=null&&o.once?(...c)=>{t.current.delete(s),s(...c)}:s;t.current.set(s,{type:a,eventTarget:i,fn:l,options:o}),i.addEventListener(a,s,o)},[]),n=R.useCallback((i,a,s,o)=>{var l;let c=((l=t.current.get(s))===null||l===void 0?void 0:l.fn)||s;i.removeEventListener(a,c,o),t.current.delete(s)},[]),r=R.useCallback(()=>{t.current.forEach((i,a)=>{n(i.eventTarget,i.type,a,i.options)})},[n]);return R.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function qne(t,e){B$(()=>{if(t&&t.ref&&e)return t.ref.current=e.current,()=>{t.ref&&(t.ref.current=null)}})}function R3(t){return t.mozInputSource===0&&t.isTrusted?!0:Yne()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function HTe(t){return!Yne()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}function GTe(t,e,n){let r=R.useRef(e),i=oy(()=>{n&&n(r.current)});R.useEffect(()=>{var a;let s=t==null||(a=t.current)===null||a===void 0?void 0:a.form;return s==null||s.addEventListener("reset",i),()=>{s==null||s.removeEventListener("reset",i)}},[t,i])}let iw="default",O3="",sk=new WeakMap;function Nz(t){if(Kne()){if(iw==="default"){const e=cu(t);O3=e.documentElement.style.webkitUserSelect,e.documentElement.style.webkitUserSelect="none"}iw="disabled"}else(t instanceof HTMLElement||t instanceof SVGElement)&&(sk.set(t,t.style.userSelect),t.style.userSelect="none")}function kT(t){if(Kne()){if(iw!=="disabled")return;iw="restoring",setTimeout(()=>{Jne(()=>{if(iw==="restoring"){const e=cu(t);e.documentElement.style.webkitUserSelect==="none"&&(e.documentElement.style.webkitUserSelect=O3||""),O3="",iw="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&sk.has(t)){let e=sk.get(t);t.style.userSelect==="none"&&(t.style.userSelect=e),t.getAttribute("style")===""&&t.removeAttribute("style"),sk.delete(t)}}const Xne=it.createContext({register:()=>{}});Xne.displayName="PressResponderContext";function KTe(t){let e=R.useContext(Xne);if(e){let{register:n,...r}=e;t=_y(r,t),n()}return qne(e,t.ref),t}var PT=new WeakMap;class AT{continuePropagation(){zk(this,PT,!1)}get shouldStopPropagation(){return CQ(this,PT)}constructor(e,n,r,i){uQ(this,PT,{writable:!0,value:void 0}),zk(this,PT,!0);var a;let s=(a=i==null?void 0:i.target)!==null&&a!==void 0?a:r.currentTarget;const o=s==null?void 0:s.getBoundingClientRect();let l,c=0,f,h=null;r.clientX!=null&&r.clientY!=null&&(f=r.clientX,h=r.clientY),o&&(f!=null&&h!=null?(l=f-o.left,c=h-o.top):(l=o.width/2,c=o.height/2)),this.type=e,this.pointerType=n,this.target=r.currentTarget,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.x=l,this.y=c}}const _z=Symbol("linkClicked");function Cz(t){let{onPress:e,onPressChange:n,onPressStart:r,onPressEnd:i,onPressUp:a,isDisabled:s,isPressed:o,preventFocusOnPress:l,shouldCancelOnPointerExit:c,allowTextSelectionOnPress:f,ref:h,...m}=KTe(t),[p,v]=R.useState(!1),y=R.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:x,removeAllGlobalListeners:S}=zTe(),_=oy((T,L)=>{let B=y.current;if(s||B.didFirePressStart)return!1;let W=!0;if(B.isTriggeringEvent=!0,r){let Y=new AT("pressstart",L,T);r(Y),W=Y.shouldStopPropagation}return n&&n(!0),B.isTriggeringEvent=!1,B.didFirePressStart=!0,v(!0),W}),N=oy((T,L,B=!0)=>{let W=y.current;if(!W.didFirePressStart)return!1;W.ignoreClickAfterPress=!0,W.didFirePressStart=!1,W.isTriggeringEvent=!0;let Y=!0;if(i){let V=new AT("pressend",L,T);i(V),Y=V.shouldStopPropagation}if(n&&n(!1),v(!1),e&&B&&!s){let V=new AT("press",L,T);e(V),Y&&(Y=V.shouldStopPropagation)}return W.isTriggeringEvent=!1,Y}),k=oy((T,L)=>{let B=y.current;if(s)return!1;if(a){B.isTriggeringEvent=!0;let W=new AT("pressup",L,T);return a(W),B.isTriggeringEvent=!1,W.shouldStopPropagation}return!0}),P=oy(T=>{let L=y.current;L.isPressed&&L.target&&(L.isOverTarget&&L.pointerType!=null&&N(qh(L.target,T),L.pointerType,!1),L.isPressed=!1,L.isOverTarget=!1,L.activePointerId=null,L.pointerType=null,S(),f||kT(L.target))}),O=oy(T=>{c&&P(T)}),A=R.useMemo(()=>{let T=y.current,L={onKeyDown(W){if(WI(W.nativeEvent,W.currentTarget)&&W.currentTarget.contains(W.target)){var Y;Dz(W.target,W.key)&&W.preventDefault();let V=!0;if(!T.isPressed&&!W.repeat){T.target=W.currentTarget,T.isPressed=!0,V=_(W,"keyboard");let I=W.currentTarget,H=q=>{WI(q,I)&&!q.repeat&&I.contains(q.target)&&T.target&&k(qh(T.target,q),"keyboard")};x(cu(W.currentTarget),"keyup",zne(H,B),!0)}V&&W.stopPropagation(),W.metaKey&&qE()&&((Y=T.metaKeyEvents)===null||Y===void 0||Y.set(W.key,W.nativeEvent))}else W.key==="Meta"&&(T.metaKeyEvents=new Map)},onClick(W){if(!(W&&!W.currentTarget.contains(W.target))&&W&&W.button===0&&!T.isTriggeringEvent&&!XE.isOpening){let Y=!0;if(s&&W.preventDefault(),!T.ignoreClickAfterPress&&!T.ignoreEmulatedMouseEvents&&!T.isPressed&&(T.pointerType==="virtual"||R3(W.nativeEvent))){!s&&!l&&py(W.currentTarget);let V=_(W,"virtual"),I=k(W,"virtual"),H=N(W,"virtual");Y=V&&I&&H}T.ignoreEmulatedMouseEvents=!1,T.ignoreClickAfterPress=!1,Y&&W.stopPropagation()}}},B=W=>{var Y;if(T.isPressed&&T.target&&WI(W,T.target)){var V;Dz(W.target,W.key)&&W.preventDefault();let H=W.target;N(qh(T.target,W),"keyboard",T.target.contains(H)),S(),W.key!=="Enter"&&W$(T.target)&&T.target.contains(H)&&!W[_z]&&(W[_z]=!0,XE(T.target,W,!1)),T.isPressed=!1,(V=T.metaKeyEvents)===null||V===void 0||V.delete(W.key)}else if(W.key==="Meta"&&(!((Y=T.metaKeyEvents)===null||Y===void 0)&&Y.size)){var I;let H=T.metaKeyEvents;T.metaKeyEvents=void 0;for(let q of H.values())(I=T.target)===null||I===void 0||I.dispatchEvent(new KeyboardEvent("keyup",q))}};if(typeof PointerEvent<"u"){L.onPointerDown=I=>{if(I.button!==0||!I.currentTarget.contains(I.target))return;if(HTe(I.nativeEvent)){T.pointerType="virtual";return}zI(I.currentTarget)&&I.preventDefault(),T.pointerType=I.pointerType;let H=!0;T.isPressed||(T.isPressed=!0,T.isOverTarget=!0,T.activePointerId=I.pointerId,T.target=I.currentTarget,!s&&!l&&py(I.currentTarget),f||Nz(T.target),H=_(I,T.pointerType),x(cu(I.currentTarget),"pointermove",W,!1),x(cu(I.currentTarget),"pointerup",Y,!1),x(cu(I.currentTarget),"pointercancel",V,!1)),H&&I.stopPropagation()},L.onMouseDown=I=>{I.currentTarget.contains(I.target)&&I.button===0&&(zI(I.currentTarget)&&I.preventDefault(),I.stopPropagation())},L.onPointerUp=I=>{!I.currentTarget.contains(I.target)||T.pointerType==="virtual"||I.button===0&&f0(I,I.currentTarget)&&k(I,T.pointerType||I.pointerType)};let W=I=>{I.pointerId===T.activePointerId&&(T.target&&f0(I,T.target)?!T.isOverTarget&&T.pointerType!=null&&(T.isOverTarget=!0,_(qh(T.target,I),T.pointerType)):T.target&&T.isOverTarget&&T.pointerType!=null&&(T.isOverTarget=!1,N(qh(T.target,I),T.pointerType,!1),O(I)))},Y=I=>{I.pointerId===T.activePointerId&&T.isPressed&&I.button===0&&T.target&&(f0(I,T.target)&&T.pointerType!=null?N(qh(T.target,I),T.pointerType):T.isOverTarget&&T.pointerType!=null&&N(qh(T.target,I),T.pointerType,!1),T.isPressed=!1,T.isOverTarget=!1,T.activePointerId=null,T.pointerType=null,S(),f||kT(T.target))},V=I=>{P(I)};L.onDragStart=I=>{I.currentTarget.contains(I.target)&&P(I)}}else{L.onMouseDown=V=>{if(V.button!==0||!V.currentTarget.contains(V.target))return;if(zI(V.currentTarget)&&V.preventDefault(),T.ignoreEmulatedMouseEvents){V.stopPropagation();return}T.isPressed=!0,T.isOverTarget=!0,T.target=V.currentTarget,T.pointerType=R3(V.nativeEvent)?"virtual":"mouse",!s&&!l&&py(V.currentTarget),_(V,T.pointerType)&&V.stopPropagation(),x(cu(V.currentTarget),"mouseup",W,!1)},L.onMouseEnter=V=>{if(!V.currentTarget.contains(V.target))return;let I=!0;T.isPressed&&!T.ignoreEmulatedMouseEvents&&T.pointerType!=null&&(T.isOverTarget=!0,I=_(V,T.pointerType)),I&&V.stopPropagation()},L.onMouseLeave=V=>{if(!V.currentTarget.contains(V.target))return;let I=!0;T.isPressed&&!T.ignoreEmulatedMouseEvents&&T.pointerType!=null&&(T.isOverTarget=!1,I=N(V,T.pointerType,!1),O(V)),I&&V.stopPropagation()},L.onMouseUp=V=>{V.currentTarget.contains(V.target)&&!T.ignoreEmulatedMouseEvents&&V.button===0&&k(V,T.pointerType||"mouse")};let W=V=>{if(V.button===0){if(T.isPressed=!1,S(),T.ignoreEmulatedMouseEvents){T.ignoreEmulatedMouseEvents=!1;return}T.target&&f0(V,T.target)&&T.pointerType!=null?N(qh(T.target,V),T.pointerType):T.target&&T.isOverTarget&&T.pointerType!=null&&N(qh(T.target,V),T.pointerType,!1),T.isOverTarget=!1}};L.onTouchStart=V=>{if(!V.currentTarget.contains(V.target))return;let I=YTe(V.nativeEvent);if(!I)return;T.activePointerId=I.identifier,T.ignoreEmulatedMouseEvents=!0,T.isOverTarget=!0,T.isPressed=!0,T.target=V.currentTarget,T.pointerType="touch",!s&&!l&&py(V.currentTarget),f||Nz(T.target),_(Mp(T.target,V),T.pointerType)&&V.stopPropagation(),x(Aw(V.currentTarget),"scroll",Y,!0)},L.onTouchMove=V=>{if(!V.currentTarget.contains(V.target))return;if(!T.isPressed){V.stopPropagation();return}let I=Tz(V.nativeEvent,T.activePointerId),H=!0;I&&f0(I,V.currentTarget)?!T.isOverTarget&&T.pointerType!=null&&(T.isOverTarget=!0,H=_(Mp(T.target,V),T.pointerType)):T.isOverTarget&&T.pointerType!=null&&(T.isOverTarget=!1,H=N(Mp(T.target,V),T.pointerType,!1),O(Mp(T.target,V))),H&&V.stopPropagation()},L.onTouchEnd=V=>{if(!V.currentTarget.contains(V.target))return;if(!T.isPressed){V.stopPropagation();return}let I=Tz(V.nativeEvent,T.activePointerId),H=!0;I&&f0(I,V.currentTarget)&&T.pointerType!=null?(k(Mp(T.target,V),T.pointerType),H=N(Mp(T.target,V),T.pointerType)):T.isOverTarget&&T.pointerType!=null&&(H=N(Mp(T.target,V),T.pointerType,!1)),H&&V.stopPropagation(),T.isPressed=!1,T.activePointerId=null,T.isOverTarget=!1,T.ignoreEmulatedMouseEvents=!0,T.target&&!f&&kT(T.target),S()},L.onTouchCancel=V=>{V.currentTarget.contains(V.target)&&(V.stopPropagation(),T.isPressed&&P(Mp(T.target,V)))};let Y=V=>{T.isPressed&&V.target.contains(T.target)&&P({currentTarget:T.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};L.onDragStart=V=>{V.currentTarget.contains(V.target)&&P(V)}}return L},[x,s,l,S,f,P,O,N,_,k]);return R.useEffect(()=>()=>{var T;f||kT((T=y.current.target)!==null&&T!==void 0?T:void 0)},[f]),{isPressed:o||p,pressProps:_y(m,A)}}function W$(t){return t.tagName==="A"&&t.hasAttribute("href")}function WI(t,e){const{key:n,code:r}=t,i=e,a=i.getAttribute("role");return(n==="Enter"||n===" "||n==="Spacebar"||r==="Space")&&!(i instanceof Aw(i).HTMLInputElement&&!Zne(i,n)||i instanceof Aw(i).HTMLTextAreaElement||i.isContentEditable)&&!((a==="link"||!a&&W$(i))&&n!=="Enter")}function YTe(t){const{targetTouches:e}=t;return e.length>0?e[0]:null}function Tz(t,e){const n=t.changedTouches;for(let r=0;r<n.length;r++){const i=n[r];if(i.identifier===e)return i}return null}function Mp(t,e){let n=0,r=0;return e.targetTouches&&e.targetTouches.length===1&&(n=e.targetTouches[0].clientX,r=e.targetTouches[0].clientY),{currentTarget:t,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,clientX:n,clientY:r}}function qh(t,e){let n=e.clientX,r=e.clientY;return{currentTarget:t,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,clientX:n,clientY:r}}function JTe(t){let e=0,n=0;return t.width!==void 0?e=t.width/2:t.radiusX!==void 0&&(e=t.radiusX),t.height!==void 0?n=t.height/2:t.radiusY!==void 0&&(n=t.radiusY),{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function qTe(t,e){return!(t.left>e.right||e.left>t.right||t.top>e.bottom||e.top>t.bottom)}function f0(t,e){let n=e.getBoundingClientRect(),r=JTe(t);return qTe(n,r)}function zI(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function Dz(t,e){return t instanceof HTMLInputElement?!Zne(t,e):t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!W$(t)}const XTe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Zne(t,e){return t.type==="checkbox"||t.type==="radio"?e===" ":XTe.has(t.type)}class ZTe{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function QTe(t){let e=R.useRef({isFocused:!1,observer:null});B$(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=oy(r=>{t==null||t(r)});return R.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,a=s=>{e.current.isFocused=!1,i.disabled&&n(new ZTe("blur",s)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",a,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var s;(s=e.current.observer)===null||s===void 0||s.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function eDe(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const a=R.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),s=QTe(a),o=R.useCallback(l=>{const c=cu(l.target);l.target===l.currentTarget&&c.activeElement===l.target&&(n&&n(l),i&&i(!0),s(l))},[i,n,s]);return{focusProps:{onFocus:!e&&(n||i||r)?o:void 0,onBlur:!e&&(r||i)?a:void 0}}}let YN=null,tDe=new Set,xE=new Map,Vy=!1,j3=!1;function z$(t,e){for(let n of tDe)n(t,e)}function nDe(t){return!(t.metaKey||!qE()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function lP(t){Vy=!0,nDe(t)&&(YN="keyboard",z$("keyboard",t))}function ic(t){YN="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Vy=!0,z$("pointer",t))}function Qne(t){R3(t)&&(Vy=!0,YN="virtual")}function ere(t){t.target===window||t.target===document||(!Vy&&!j3&&(YN="virtual",z$("virtual",t)),Vy=!1,j3=!1)}function tre(){Vy=!1,j3=!0}function kz(t){if(typeof window>"u"||xE.get(Aw(t)))return;const e=Aw(t),n=cu(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Vy=!0,r.apply(this,arguments)},n.addEventListener("keydown",lP,!0),n.addEventListener("keyup",lP,!0),n.addEventListener("click",Qne,!0),e.addEventListener("focus",ere,!0),e.addEventListener("blur",tre,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",ic,!0),n.addEventListener("pointermove",ic,!0),n.addEventListener("pointerup",ic,!0)):(n.addEventListener("mousedown",ic,!0),n.addEventListener("mousemove",ic,!0),n.addEventListener("mouseup",ic,!0)),e.addEventListener("beforeunload",()=>{nre(t)},{once:!0}),xE.set(e,{focus:r})}const nre=(t,e)=>{const n=Aw(t),r=cu(t);e&&r.removeEventListener("DOMContentLoaded",e),xE.has(n)&&(n.HTMLElement.prototype.focus=xE.get(n).focus,r.removeEventListener("keydown",lP,!0),r.removeEventListener("keyup",lP,!0),r.removeEventListener("click",Qne,!0),n.removeEventListener("focus",ere,!0),n.removeEventListener("blur",tre,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",ic,!0),r.removeEventListener("pointermove",ic,!0),r.removeEventListener("pointerup",ic,!0)):(r.removeEventListener("mousedown",ic,!0),r.removeEventListener("mousemove",ic,!0),r.removeEventListener("mouseup",ic,!0)),xE.delete(n))};function rDe(t){const e=cu(t);let n;return e.readyState!=="loading"?kz(t):(n=()=>{kz(t)},e.addEventListener("DOMContentLoaded",n)),()=>nre(t,n)}typeof document<"u"&&rDe();function iDe(){return YN}function Pz(t){if(!t)return;let e=!0;return n=>{let r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){e=!1}};t(r),e&&n.stopPropagation()}}function aDe(t){return{keyboardProps:t.isDisabled?{}:{onKeyDown:Pz(t.onKeyDown),onKeyUp:Pz(t.onKeyUp)}}}function sDe(t){const e=cu(t);if(iDe()==="virtual"){let n=e.activeElement;Jne(()=>{e.activeElement===n&&t.isConnected&&py(t)})}else py(t)}let oDe=it.createContext(null);function lDe(t){let e=R.useContext(oDe)||{};qne(e,t);let{ref:n,...r}=e;return r}function uDe(t,e){let{focusProps:n}=eDe(t),{keyboardProps:r}=aDe(t),i=_y(n,r),a=lDe(e),s=t.isDisabled?{}:a,o=R.useRef(t.autoFocus);return R.useEffect(()=>{o.current&&e.current&&sDe(e.current),o.current=!1},[e]),{focusableProps:_y({...i,tabIndex:t.excludeFromTabOrder&&!t.isDisabled?-1:void 0},s)}}function cDe(t,e,n){let{isDisabled:r=!1,isReadOnly:i=!1,value:a,name:s,children:o,"aria-label":l,"aria-labelledby":c,validationState:f="valid",isInvalid:h}=t,m=O=>{O.stopPropagation(),e.setSelected(O.target.checked)},p=o!=null,v=l!=null||c!=null;!p&&!v&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:y,isPressed:x}=Cz({isDisabled:r}),{pressProps:S,isPressed:_}=Cz({isDisabled:r||i,onPress(){e.toggle()}}),{focusableProps:N}=uDe(t,n),k=_y(y,N),P=MTe(t,{labelable:!0});return GTe(n,e.isSelected,e.setSelected),{labelProps:_y(S,{onClick:O=>O.preventDefault()}),inputProps:_y(P,{"aria-invalid":h||f==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-controls":t["aria-controls"],"aria-readonly":i||void 0,onChange:m,disabled:r,...a==null?{}:{value:a},name:s,type:"checkbox",...k}),isSelected:e.isSelected,isPressed:x||_,isDisabled:r,isReadOnly:i,isInvalid:h||f==="invalid"}}function JN(t){let{id:e,label:n,"aria-labelledby":r,"aria-label":i,labelElementType:a="label"}=t;e=dc(e);let s=dc(),o={};n?(r=r?`${s} ${r}`:s,o={id:s,htmlFor:a==="label"?e:void 0}):!r&&!i&&console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility");let l=PA({id:e,"aria-label":i,"aria-labelledby":r});return{labelProps:o,fieldProps:l}}function rre(t){let{description:e,errorMessage:n,isInvalid:r,validationState:i}=t,{labelProps:a,fieldProps:s}=JN(t),o=fg([!!e,!!n,r,i]),l=fg([!!e,!!n,r,i]);return s=kt(s,{"aria-describedby":[o,l,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:a,fieldProps:s,descriptionProps:{id:o},errorMessageProps:{id:l}}}function dDe(t={}){let{isReadOnly:e}=t,[n,r]=Mg(t.isSelected,t.defaultSelected||!1,t.onChange);function i(s){e||r(s)}function a(){e||r(!n)}return{isSelected:n,setSelected:i,toggle:a}}function Az(t,e=[]){const n=R.useRef(t);return rx(()=>{n.current=t}),R.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},e)}const Rz=t=>typeof t=="object"&&t!=null&&t.nodeType===1,Oz=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",HI=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return Oz(n.overflowY,e)||Oz(n.overflowX,e)||(r=>{const i=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(t)}return!1},RT=(t,e,n,r,i,a,s,o)=>a<t&&s>e||a>t&&s<e?0:a<=t&&o<=n||s>=e&&o>=n?a-t-r:s>e&&o<n||a<t&&o>n?s-e+i:0,fDe=t=>{const e=t.parentElement;return e??(t.getRootNode().host||null)},uP=(t,e)=>{var n,r,i,a;if(typeof document>"u")return[];const{scrollMode:s,block:o,inline:l,boundary:c,skipOverflowHiddenElements:f}=e,h=typeof c=="function"?c:q=>q!==c;if(!Rz(t))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,p=[];let v=t;for(;Rz(v)&&h(v);){if(v=fDe(v),v===m){p.push(v);break}v!=null&&v===document.body&&HI(v)&&!HI(document.documentElement)||v!=null&&HI(v,f)&&p.push(v)}const y=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,x=(a=(i=window.visualViewport)==null?void 0:i.height)!=null?a:innerHeight,{scrollX:S,scrollY:_}=window,{height:N,width:k,top:P,right:O,bottom:A,left:T}=t.getBoundingClientRect(),{top:L,right:B,bottom:W,left:Y}=(q=>{const F=window.getComputedStyle(q);return{top:parseFloat(F.scrollMarginTop)||0,right:parseFloat(F.scrollMarginRight)||0,bottom:parseFloat(F.scrollMarginBottom)||0,left:parseFloat(F.scrollMarginLeft)||0}})(t);let V=o==="start"||o==="nearest"?P-L:o==="end"?A+W:P+N/2-L+W,I=l==="center"?T+k/2-Y+B:l==="end"?O+B:T-Y;const H=[];for(let q=0;q<p.length;q++){const F=p[q],{height:J,width:Z,top:G,right:oe,bottom:ae,left:te}=F.getBoundingClientRect();if(s==="if-needed"&&P>=0&&T>=0&&A<=x&&O<=y&&P>=G&&A<=ae&&T>=te&&O<=oe)return H;const re=getComputedStyle(F),X=parseInt(re.borderLeftWidth,10),ce=parseInt(re.borderTopWidth,10),he=parseInt(re.borderRightWidth,10),ve=parseInt(re.borderBottomWidth,10);let Ne=0,ke=0;const Te="offsetWidth"in F?F.offsetWidth-F.clientWidth-X-he:0,ye="offsetHeight"in F?F.offsetHeight-F.clientHeight-ce-ve:0,Ie="offsetWidth"in F?F.offsetWidth===0?0:Z/F.offsetWidth:0,Re="offsetHeight"in F?F.offsetHeight===0?0:J/F.offsetHeight:0;if(m===F)Ne=o==="start"?V:o==="end"?V-x:o==="nearest"?RT(_,_+x,x,ce,ve,_+V,_+V+N,N):V-x/2,ke=l==="start"?I:l==="center"?I-y/2:l==="end"?I-y:RT(S,S+y,y,X,he,S+I,S+I+k,k),Ne=Math.max(0,Ne+_),ke=Math.max(0,ke+S);else{Ne=o==="start"?V-G-ce:o==="end"?V-ae+ve+ye:o==="nearest"?RT(G,ae,J,ce,ve+ye,V,V+N,N):V-(G+J/2)+ye/2,ke=l==="start"?I-te-X:l==="center"?I-(te+Z/2)+Te/2:l==="end"?I-oe+he+Te:RT(te,oe,Z,X,he+Te,I,I+k,k);const{scrollLeft:Ee,scrollTop:$e}=F;Ne=Re===0?0:Math.max(0,Math.min($e+Ne/Re,F.scrollHeight-J/Re+ye)),ke=Ie===0?0:Math.max(0,Math.min(Ee+ke/Ie,F.scrollWidth-Z/Ie+Te)),V+=$e-Ne,I+=Ee-ke}H.push({el:F,top:Ne,left:ke})}return H},hDe=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function mDe(t,e){if(!t.isConnected||!(r=>{let i=r;for(;i&&i.parentNode;){if(i.parentNode===document)return!0;i=i.parentNode instanceof ShadowRoot?i.parentNode.host:i.parentNode}return!1})(t))return;if((r=>typeof r=="object"&&typeof r.behavior=="function")(e))return e.behavior(uP(t,e));const n=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:r,top:i,left:a}of uP(t,hDe(e)))r.scroll({top:i,left:a,behavior:n})}function HA(t){let[e,n]=Mg(t.isOpen,t.defaultOpen||!1,t.onOpenChange);const r=R.useCallback(()=>{n(!0)},[n]),i=R.useCallback(()=>{n(!1)},[n]),a=R.useCallback(()=>{n(!e)},[n,e]);return{isOpen:e,setOpen:n,open:r,close:i,toggle:a}}const pDe=1500,jz=500;let zv={},gDe=0,yS=!1,Xh=null,Hv=null;function vDe(t={}){let{delay:e=pDe,closeDelay:n=jz}=t,{isOpen:r,open:i,close:a}=HA(t),s=R.useMemo(()=>`${++gDe}`,[]),o=R.useRef(),l=()=>{zv[s]=h},c=()=>{for(let p in zv)p!==s&&(zv[p](!0),delete zv[p])},f=()=>{clearTimeout(o.current),o.current=null,c(),l(),yS=!0,i(),Xh&&(clearTimeout(Xh),Xh=null),Hv&&(clearTimeout(Hv),Hv=null)},h=p=>{p||n<=0?(clearTimeout(o.current),o.current=null,a()):o.current||(o.current=setTimeout(()=>{o.current=null,a()},n)),Xh&&(clearTimeout(Xh),Xh=null),yS&&(Hv&&clearTimeout(Hv),Hv=setTimeout(()=>{delete zv[s],Hv=null,yS=!1},Math.max(jz,n)))},m=()=>{c(),l(),!r&&!Xh&&!yS?Xh=setTimeout(()=>{Xh=null,yS=!0,f()},e):r||f()};return R.useEffect(()=>()=>{clearTimeout(o.current),zv[s]&&delete zv[s]},[s]),{isOpen:r,open:p=>{!p&&e>0&&!o.current?m():f()},close:h}}function yDe(t,e){let n=vc(t,{labelable:!0}),{hoverProps:r}=Pl({onHoverStart:()=>e==null?void 0:e.open(!0),onHoverEnd:()=>e==null?void 0:e.close()});return{tooltipProps:kt(n,r,{role:"tooltip"})}}function bDe(t,e,n){let{isDisabled:r,trigger:i}=t,a=dc(),s=R.useRef(!1),o=R.useRef(!1),l=()=>{(s.current||o.current)&&e.open(o.current)},c=S=>{!s.current&&!o.current&&e.close(S)};R.useEffect(()=>{let S=_=>{n&&n.current&&_.key==="Escape"&&(_.stopPropagation(),e.close(!0))};if(e.isOpen)return document.addEventListener("keydown",S,!0),()=>{document.removeEventListener("keydown",S,!0)}},[n,e]);let f=()=>{i!=="focus"&&(Kk()==="pointer"?s.current=!0:s.current=!1,l())},h=()=>{i!=="focus"&&(o.current=!1,s.current=!1,c())},m=()=>{o.current=!1,s.current=!1,c(!0)},p=()=>{Tw()&&(o.current=!0,l())},v=()=>{o.current=!1,s.current=!1,c(!0)},{hoverProps:y}=Pl({isDisabled:r,onHoverStart:f,onHoverEnd:h}),{focusableProps:x}=UN({isDisabled:r,onFocus:p,onBlur:v},n);return{triggerProps:{"aria-describedby":e.isOpen?a:void 0,...kt(x,y,{onPointerDown:m,onKeyDown:m})},tooltipProps:{id:a}}}function wDe(t){var e,n;const r=Xa(),[i,a]=zs(t,sP.variantKeys),{ref:s,as:o,isOpen:l,content:c,children:f,defaultOpen:h,onOpenChange:m,isDisabled:p,trigger:v,shouldFlip:y=!0,containerPadding:x=12,placement:S="top",delay:_=0,closeDelay:N=500,showArrow:k=!1,offset:P=7,crossOffset:O=0,isDismissable:A,shouldCloseOnBlur:T=!0,portalContainer:L,isKeyboardDismissDisabled:B=!1,updatePositionDeps:W=[],shouldCloseOnInteractOutside:Y,className:V,onClose:I,motionProps:H,classNames:q,...F}=i,J=o||"div",Z=(n=(e=t==null?void 0:t.disableAnimation)!=null?e:r==null?void 0:r.disableAnimation)!=null?n:!1,G=vDe({delay:_,closeDelay:N,isDisabled:p,defaultOpen:h,isOpen:l,onOpenChange:$e=>{m==null||m($e),$e||I==null||I()}}),oe=R.useRef(null),ae=R.useRef(null),te=R.useId(),re=G.isOpen&&!p;R.useImperativeHandle(s,()=>nwe(ae));const{triggerProps:X,tooltipProps:ce}=bDe({isDisabled:p,trigger:v},G,oe),{tooltipProps:he}=yDe({isOpen:re,...kt(i,ce)},G),{overlayProps:ve,placement:Ne,updatePosition:ke}=NQ({isOpen:re,targetRef:oe,placement:Tne(S),overlayRef:ae,offset:k?P+3:P,crossOffset:O,shouldFlip:y,containerPadding:x});rx(()=>{W.length&&ke()},W);const{overlayProps:Te}=n$({isOpen:re,onClose:G.close,isDismissable:A,shouldCloseOnBlur:T,isKeyboardDismissDisabled:B,shouldCloseOnInteractOutside:Y},ae),ye=R.useMemo(()=>{var $e,He,gt;return sP({...a,disableAnimation:Z,radius:($e=t==null?void 0:t.radius)!=null?$e:"md",size:(He=t==null?void 0:t.size)!=null?He:"md",shadow:(gt=t==null?void 0:t.shadow)!=null?gt:"sm"})},[gs(a),Z,t==null?void 0:t.radius,t==null?void 0:t.size,t==null?void 0:t.shadow]),Ie=R.useCallback(($e={},He=null)=>({...kt(X,$e),ref:Fk(He,oe),"aria-describedby":re?te:void 0}),[X,re,te,G]),Re=R.useCallback(()=>({ref:ae,"data-slot":"base","data-open":dt(re),"data-arrow":dt(k),"data-disabled":dt(p),"data-placement":oP(Ne,S),...kt(he,Te,F),style:kt(ve.style,F.style,i.style),className:ye.base({class:q==null?void 0:q.base}),id:te}),[ye,re,k,p,Ne,S,he,Te,F,ve,i,te]),Ee=R.useCallback(()=>({"data-slot":"content","data-open":dt(re),"data-arrow":dt(k),"data-disabled":dt(p),"data-placement":oP(Ne,S),className:ye.content({class:tn(q==null?void 0:q.content,V)})}),[ye,re,k,p,Ne,S,q]);return{Component:J,content:c,children:f,isOpen:re,triggerRef:oe,showArrow:k,portalContainer:L,placement:S,disableAnimation:Z,isDisabled:p,motionProps:H,getTooltipContentProps:Ee,getTriggerProps:Ie,getTooltipProps:Re}}var ire=dr((t,e)=>{const{Component:n,children:r,content:i,isOpen:a,portalContainer:s,placement:o,disableAnimation:l,motionProps:c,getTriggerProps:f,getTooltipProps:h,getTooltipContentProps:m}=wDe({...t,ref:e});let p;try{if(R.Children.count(r)!==1)throw new Error;if(!R.isValidElement(r))p=de.jsx("p",{...f(),children:r});else{const k=r;p=R.cloneElement(k,f(k.props,k.ref))}}catch{p=de.jsx("span",{}),JZ("Tooltip must have only one child node. Please, check your code.")}const{ref:v,id:y,style:x,...S}=h(),_=de.jsx("div",{ref:v,id:y,style:x,children:de.jsx(Dd,{features:kd,children:de.jsx(Td.div,{animate:"enter",exit:"exit",initial:"exit",variants:Ng.scaleSpring,...kt(c,S),style:{...V$(o)},children:de.jsx(n,{...m(),children:i})})})});return de.jsxs(de.Fragment,{children:[p,l&&a?de.jsx(D7,{portalContainer:s,children:de.jsx("div",{ref:v,id:y,style:x,...S,children:de.jsx(n,{...m(),children:i})})}):de.jsx(nx,{children:a?de.jsx(D7,{portalContainer:s,children:_}):null})]})});ire.displayName="NextUI.Tooltip";var so=ire;function xDe(t,e,n){let{labelProps:r,inputProps:i,isSelected:a,isPressed:s,isDisabled:o,isReadOnly:l}=cDe(t,e,n);return{labelProps:r,inputProps:{...i,role:"switch",checked:a},isSelected:a,isPressed:s,isDisabled:o,isReadOnly:l}}function SDe(t={}){var e,n;const r=Xa(),[i,a]=zs(t,nz.variantKeys),{ref:s,as:o,name:l,value:c="",isReadOnly:f=!1,autoFocus:h=!1,startContent:m,endContent:p,defaultSelected:v,isSelected:y,children:x,thumbIcon:S,className:_,classNames:N,onChange:k,onValueChange:P,...O}=i,A=o||"label",T=R.useRef(null),L=R.useRef(null),B=(n=(e=t.disableAnimation)!=null?e:r==null?void 0:r.disableAnimation)!=null?n:!1,W=R.useId(),Y=R.useMemo(()=>{const Ye=O["aria-label"]||typeof x=="string"?x:void 0;return{name:l,value:c,children:x,autoFocus:h,defaultSelected:v,isSelected:y,isDisabled:!!t.isDisabled,isReadOnly:f,"aria-label":Ye,"aria-labelledby":O["aria-labelledby"]||W,onChange:P}},[c,l,W,x,h,f,y,v,t.isDisabled,O["aria-label"],O["aria-labelledby"],P]),V=dDe(Y);rx(()=>{if(!L.current)return;const Ye=!!L.current.checked;V.setSelected(Ye)},[L.current]);const{inputProps:I,isPressed:H,isReadOnly:q}=xDe(Y,V,L),{focusProps:F,isFocused:J,isFocusVisible:Z}=Bo({autoFocus:I.autoFocus}),{hoverProps:G,isHovered:oe}=Pl({isDisabled:I.disabled}),ae=Y.isDisabled||q,[te,re]=R.useState(!1),{pressProps:X}=Od({isDisabled:ae,onPressStart(Ye){Ye.pointerType!=="keyboard"&&re(!0)},onPressEnd(Ye){Ye.pointerType!=="keyboard"&&re(!1)}}),ce=ae?!1:te||H,he=I.checked,ve=I.disabled,Ne=R.useMemo(()=>nz({...a,disableAnimation:B}),[gs(a),B]),ke=tn(N==null?void 0:N.base,_),Te=Ye=>({...kt(G,X,O,Ye),ref:T,className:Ne.base({class:tn(ke,Ye==null?void 0:Ye.className)}),"data-disabled":dt(ve),"data-selected":dt(he),"data-readonly":dt(q),"data-focus":dt(J),"data-focus-visible":dt(Z),"data-hover":dt(oe),"data-pressed":dt(ce)}),ye=R.useCallback((Ye={})=>({...Ye,"aria-hidden":!0,className:tn(Ne.wrapper({class:tn(N==null?void 0:N.wrapper,Ye==null?void 0:Ye.className)}))}),[Ne,N==null?void 0:N.wrapper]),Ie=(Ye={})=>({...kt(I,F,Ye),ref:Fk(L,s),id:I.id,onChange:ho(k,I.onChange)}),Re=R.useCallback((Ye={})=>({...Ye,className:Ne.thumb({class:tn(N==null?void 0:N.thumb,Ye==null?void 0:Ye.className)})}),[Ne,N==null?void 0:N.thumb]),Ee=R.useCallback((Ye={})=>({...Ye,id:W,className:Ne.label({class:tn(N==null?void 0:N.label,Ye==null?void 0:Ye.className)})}),[Ne,N==null?void 0:N.label,ve,he]),$e=R.useCallback((Ye={includeStateProps:!1})=>kt({width:"1em",height:"1em",className:Ne.thumbIcon({class:tn(N==null?void 0:N.thumbIcon)})},Ye.includeStateProps?{isSelected:he}:{}),[Ne,N==null?void 0:N.thumbIcon,he]),He=R.useCallback((Ye={})=>({width:"1em",height:"1em",...Ye,className:Ne.startContent({class:tn(N==null?void 0:N.startContent,Ye==null?void 0:Ye.className)})}),[Ne,N==null?void 0:N.startContent,he]),gt=R.useCallback((Ye={})=>({width:"1em",height:"1em",...Ye,className:Ne.endContent({class:tn(N==null?void 0:N.endContent,Ye==null?void 0:Ye.className)})}),[Ne,N==null?void 0:N.endContent,he]);return{Component:A,slots:Ne,classNames:N,domRef:T,children:x,thumbIcon:S,startContent:m,endContent:p,isHovered:oe,isSelected:he,isPressed:ce,isFocused:J,isFocusVisible:Z,isDisabled:ve,getBaseProps:Te,getWrapperProps:ye,getInputProps:Ie,getLabelProps:Ee,getThumbProps:Re,getThumbIconProps:$e,getStartContentProps:He,getEndContentProps:gt}}var are=dr((t,e)=>{const{Component:n,children:r,startContent:i,endContent:a,thumbIcon:s,getBaseProps:o,getInputProps:l,getWrapperProps:c,getThumbProps:f,getThumbIconProps:h,getLabelProps:m,getStartContentProps:p,getEndContentProps:v}=SDe({...t,ref:e}),y=typeof s=="function"?s(h({includeStateProps:!0})):s&&R.cloneElement(s,h()),x=i&&R.cloneElement(i,p()),S=a&&R.cloneElement(a,v());return de.jsxs(n,{...o(),children:[de.jsx(RA,{elementType:"span",children:de.jsx("input",{...l()})}),de.jsxs("span",{...c(),children:[i&&x,de.jsx("span",{...f(),children:s&&y}),a&&S]}),r&&de.jsx("span",{...m(),children:r})]})});are.displayName="NextUI.Switch";var ZS=are;function sre(t={}){const{rerender:e=!1,delay:n=0}=t,r=R.useRef(!1),[i,a]=R.useState(!1);return R.useEffect(()=>{r.current=!0;let s=null;return e&&(n>0?s=setTimeout(()=>{a(!0)},n):a(!0)),()=>{r.current=!1,e&&a(!1),s&&clearTimeout(s)}},[e]),[R.useCallback(()=>r.current,[]),i]}function EDe(t){let{value:e=0,minValue:n=0,maxValue:r=100,valueLabel:i,isIndeterminate:a,formatOptions:s={style:"percent"}}=t,o=vc(t,{labelable:!0}),{labelProps:l,fieldProps:c}=JN({...t,labelElementType:"span"});e=Iy(e,n,r);let f=(e-n)/(r-n),h=Y5(s);if(!a&&!i){let m=s.style==="percent"?f:e;i=h.format(m)}return{progressBarProps:kt(o,{...c,"aria-valuenow":a?void 0:e,"aria-valuemin":n,"aria-valuemax":r,"aria-valuetext":a?void 0:i,role:"progressbar"}),labelProps:l}}function NDe(t){var e,n;const r=Xa(),[i,a]=zs(t,oz.variantKeys),{ref:s,as:o,id:l,className:c,classNames:f,label:h,valueLabel:m,value:p=0,minValue:v=0,maxValue:y=100,showValueLabel:x=!1,formatOptions:S={style:"percent"},..._}=i,N=o||"div",k=fi(s),P=tn(f==null?void 0:f.base,c),[,O]=sre({rerender:!0,delay:100}),A=t.isIndeterminate,T=(n=(e=t.disableAnimation)!=null?e:r==null?void 0:r.disableAnimation)!=null?n:!1,{progressBarProps:L,labelProps:B}=EDe({id:l,label:h,value:p,minValue:v,maxValue:y,valueLabel:m,formatOptions:S,isIndeterminate:A,"aria-labelledby":t["aria-labelledby"],"aria-label":t["aria-label"]}),W=R.useMemo(()=>oz({...a,disableAnimation:T}),[gs(a),T]),Y=T?!0:O,V=R.useMemo(()=>A||!Y?void 0:fwe((p-v)/(y-v)*100),[Y,A,p,v,y]),I=R.useCallback((q={})=>({ref:k,"data-indeterminate":dt(A),"data-disabled":dt(t.isDisabled),className:W.base({class:P}),...kt(L,_,q)}),[k,W,A,t.isDisabled,P,L,_]),H=R.useCallback((q={})=>({className:W.label({class:f==null?void 0:f.label}),...kt(B,q)}),[W,f,B]);return{Component:N,domRef:k,slots:W,classNames:f,label:h,percentage:V,showValueLabel:x,getProgressBarProps:I,getLabelProps:H}}var ore=dr((t,e)=>{const{Component:n,slots:r,classNames:i,label:a,percentage:s,showValueLabel:o,getProgressBarProps:l,getLabelProps:c}=NDe({...t,ref:e}),f=l(),h=a||o;return de.jsxs(n,{...f,children:[h?de.jsxs("div",{className:r.labelWrapper({class:i==null?void 0:i.labelWrapper}),children:[a&&de.jsx("span",{...c(),children:a}),o&&de.jsx("span",{className:r.value({class:i==null?void 0:i.value}),children:f["aria-valuetext"]})]}):null,de.jsx("div",{className:r.track({class:i==null?void 0:i.track}),children:de.jsx("div",{className:r.indicator({class:i==null?void 0:i.indicator}),style:{transform:`translateX(-${100-(s||0)}%)`}})})]})});ore.displayName="NextUI.Progress";var ZE=ore;function _De(t,e){let{inputElementType:n="input",isDisabled:r=!1,isRequired:i=!1,isReadOnly:a=!1,type:s="text",validationBehavior:o="aria"}=t,[l,c]=Mg(t.value,t.defaultValue||"",t.onChange),{focusableProps:f}=UN(t,e),h=Wne({...t,value:l}),{isInvalid:m,validationErrors:p,validationDetails:v}=h.displayValidation,{labelProps:y,fieldProps:x,descriptionProps:S,errorMessageProps:_}=rre({...t,isInvalid:m,errorMessage:t.errorMessage||p}),N=vc(t,{labelable:!0});const k={type:s,pattern:t.pattern};return K5(e,l,c),Fne(t,h,e),R.useEffect(()=>{if(e.current instanceof oc(e.current).HTMLTextAreaElement){let P=e.current;Object.defineProperty(P,"defaultValue",{get:()=>P.value,set:()=>{},configurable:!0})}},[e]),{labelProps:y,inputProps:kt(N,n==="input"&&k,{disabled:r,readOnly:a,required:i&&o==="native","aria-required":i&&o==="aria"||void 0,"aria-invalid":m||void 0,"aria-errormessage":t["aria-errormessage"],"aria-activedescendant":t["aria-activedescendant"],"aria-autocomplete":t["aria-autocomplete"],"aria-haspopup":t["aria-haspopup"],value:l,onChange:P=>c(P.target.value),autoComplete:t.autoComplete,autoCapitalize:t.autoCapitalize,maxLength:t.maxLength,minLength:t.minLength,name:t.name,placeholder:t.placeholder,inputMode:t.inputMode,onCopy:t.onCopy,onCut:t.onCut,onPaste:t.onPaste,onCompositionEnd:t.onCompositionEnd,onCompositionStart:t.onCompositionStart,onCompositionUpdate:t.onCompositionUpdate,onSelect:t.onSelect,onBeforeInput:t.onBeforeInput,onInput:t.onInput,...f,...x}),descriptionProps:S,errorMessageProps:_,isInvalid:m,validationErrors:p,validationDetails:v}}function lre(t){var e,n,r,i;const a=Xa(),[s,o]=zs(t,lz.variantKeys),{ref:l,as:c,type:f,label:h,baseRef:m,wrapperRef:p,description:v,className:y,classNames:x,autoFocus:S,startContent:_,endContent:N,onClear:k,onChange:P,validationState:O,validationBehavior:A=(e=a==null?void 0:a.validationBehavior)!=null?e:"aria",innerWrapperRef:T,onValueChange:L=()=>{},...B}=s,W=R.useCallback(qt=>{L(qt??"")},[L]),[Y,V]=R.useState(!1),I=c||"div",H=(r=(n=t.disableAnimation)!=null?n:a==null?void 0:a.disableAnimation)!=null?r:!1,q=fi(l),F=fi(m),J=fi(p),Z=fi(T),[G,oe]=Mg(s.value,(i=s.defaultValue)!=null?i:"",W),ae=["date","time","month","week","range"].includes(f),te=!awe(G)||ae,re=te||Y,X=f==="hidden",ce=t.isMultiline,he=f==="file",ve=tn(x==null?void 0:x.base,y,te?"is-filled":""),Ne=R.useCallback(()=>{var qt;oe(""),k==null||k(),(qt=q.current)==null||qt.focus()},[oe,k]);rx(()=>{q.current&&oe(q.current.value)},[q.current]);const{labelProps:ke,inputProps:Te,isInvalid:ye,validationErrors:Ie,validationDetails:Re,descriptionProps:Ee,errorMessageProps:$e}=_De({...t,validationBehavior:A,autoCapitalize:t.autoCapitalize,value:G,"aria-label":owe(t["aria-label"],t.label,t.placeholder),inputElementType:ce?"textarea":"input",onChange:oe},q);he&&(delete Te.value,delete Te.onChange);const{isFocusVisible:He,isFocused:gt,focusProps:Ye}=Bo({autoFocus:S,isTextInput:!0}),{isHovered:yt,hoverProps:_t}=Pl({isDisabled:!!(t!=null&&t.isDisabled)}),{focusProps:St,isFocusVisible:Bt}=Bo(),{focusWithinProps:Nt}=BN({onFocusWithinChange:V}),{pressProps:Dt}=Od({isDisabled:!!(t!=null&&t.isDisabled),onPress:Ne}),Ae=O==="invalid"||t.isInvalid||ye,je=R.useMemo(()=>{var qt;if(he){if(!t.labelPlacement)return"outside";if(t.labelPlacement==="inside")return JZ("Input with file type doesn't support inside label. Converting to outside ..."),"outside"}return(!t.labelPlacement||t.labelPlacement==="inside")&&!h?"outside":(qt=t.labelPlacement)!=null?qt:"inside"},[t.labelPlacement,h]),tt=typeof s.errorMessage=="function"?s.errorMessage({isInvalid:Ae,validationErrors:Ie,validationDetails:Re}):s.errorMessage||(Ie==null?void 0:Ie.join(" ")),Ot=!!k||t.isClearable,qe=!!h||!!v||!!tt,ft=!!s.placeholder,Wt=!!h,an=!!v||!!tt,Un=je==="outside"||je==="outside-left",pn=je==="inside",ln=q.current?(!q.current.value||q.current.value===""||!G||G==="")&&ft:!1,Gt=je==="outside-left",Kt=!!_,Lt=Un?je==="outside-left"||ft||je==="outside"&&Kt:!1,In=je==="outside"&&!ft&&!Kt,Tn=R.useMemo(()=>lz({...o,isInvalid:Ae,labelPlacement:je,isClearable:Ot,disableAnimation:H}),[gs(o),Ae,je,Ot,Kt,H]),Wr=R.useCallback((qt={})=>({ref:F,className:Tn.base({class:ve}),"data-slot":"base","data-filled":dt(te||ft||Kt||ln||he),"data-filled-within":dt(re||ft||Kt||ln||he),"data-focus-within":dt(Y),"data-focus-visible":dt(He),"data-readonly":dt(t.isReadOnly),"data-focus":dt(gt),"data-hover":dt(yt),"data-required":dt(t.isRequired),"data-invalid":dt(Ae),"data-disabled":dt(t.isDisabled),"data-has-elements":dt(qe),"data-has-helper":dt(an),"data-has-label":dt(Wt),"data-has-value":dt(!ln),"data-hidden":dt(X),...Nt,...qt}),[Tn,ve,te,gt,yt,Ae,an,Wt,qe,ln,Kt,Y,He,re,ft,Nt,X,t.isReadOnly,t.isRequired,t.isDisabled]),Mr=R.useCallback((qt={})=>({"data-slot":"label",className:Tn.label({class:x==null?void 0:x.label}),...ke,...qt}),[Tn,ke,x==null?void 0:x.label]),Hr=R.useCallback((qt={})=>({ref:q,"data-slot":"input","data-filled":dt(te),"data-filled-within":dt(re),"data-has-start-content":dt(Kt),"data-has-end-content":dt(!!N),className:Tn.input({class:tn(x==null?void 0:x.input,te?"is-filled":"")}),...kt(Ye,Te,ps(B,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(Te))}),qt),"aria-readonly":dt(t.isReadOnly),onChange:ho(Te.onChange,P)}),[Tn,G,Ye,Te,B,te,re,Kt,N,x==null?void 0:x.input,t.isReadOnly,t.isRequired,P]),Ii=R.useCallback((qt={})=>({ref:J,"data-slot":"input-wrapper","data-hover":dt(yt),"data-focus-visible":dt(He),"data-focus":dt(gt),className:Tn.inputWrapper({class:tn(x==null?void 0:x.inputWrapper,te?"is-filled":"")}),...kt(qt,_t),onClick:Zn=>{q.current&&Zn.currentTarget===Zn.target&&q.current.focus()},style:{cursor:"text",...qt.style}}),[Tn,yt,He,gt,G,x==null?void 0:x.inputWrapper]),Wi=R.useCallback((qt={})=>({...qt,ref:Z,"data-slot":"inner-wrapper",onClick:Zn=>{q.current&&Zn.currentTarget===Zn.target&&q.current.focus()},className:Tn.innerWrapper({class:tn(x==null?void 0:x.innerWrapper,qt==null?void 0:qt.className)})}),[Tn,x==null?void 0:x.innerWrapper]),Mi=R.useCallback((qt={})=>({...qt,"data-slot":"main-wrapper",className:Tn.mainWrapper({class:tn(x==null?void 0:x.mainWrapper,qt==null?void 0:qt.className)})}),[Tn,x==null?void 0:x.mainWrapper]),zi=R.useCallback((qt={})=>({...qt,"data-slot":"helper-wrapper",className:Tn.helperWrapper({class:tn(x==null?void 0:x.helperWrapper,qt==null?void 0:qt.className)})}),[Tn,x==null?void 0:x.helperWrapper]),xr=R.useCallback((qt={})=>({...qt,...Ee,"data-slot":"description",className:Tn.description({class:tn(x==null?void 0:x.description,qt==null?void 0:qt.className)})}),[Tn,x==null?void 0:x.description]),Vr=R.useCallback((qt={})=>({...qt,...$e,"data-slot":"error-message",className:Tn.errorMessage({class:tn(x==null?void 0:x.errorMessage,qt==null?void 0:qt.className)})}),[Tn,$e,x==null?void 0:x.errorMessage]),$r=R.useCallback((qt={})=>({...qt,role:"button",tabIndex:0,"aria-label":"clear input","data-slot":"clear-button","data-focus-visible":dt(Bt),className:Tn.clearButton({class:tn(x==null?void 0:x.clearButton,qt==null?void 0:qt.className)}),...kt(Dt,St)}),[Tn,Bt,Dt,St,x==null?void 0:x.clearButton]);return{Component:I,classNames:x,domRef:q,label:h,description:v,startContent:_,endContent:N,labelPlacement:je,isClearable:Ot,hasHelper:an,hasStartContent:Kt,isLabelOutside:Lt,isOutsideLeft:Gt,isLabelOutsideAsPlaceholder:In,shouldLabelBeOutside:Un,shouldLabelBeInside:pn,hasPlaceholder:ft,isInvalid:Ae,errorMessage:tt,getBaseProps:Wr,getLabelProps:Mr,getInputProps:Hr,getMainWrapperProps:Mi,getInputWrapperProps:Ii,getInnerWrapperProps:Wi,getHelperWrapperProps:zi,getDescriptionProps:xr,getErrorMessageProps:Vr,getClearButtonProps:$r}}var ure=dr((t,e)=>{const{Component:n,label:r,description:i,isClearable:a,startContent:s,endContent:o,labelPlacement:l,hasHelper:c,isOutsideLeft:f,shouldLabelBeOutside:h,errorMessage:m,isInvalid:p,getBaseProps:v,getLabelProps:y,getInputProps:x,getInnerWrapperProps:S,getInputWrapperProps:_,getMainWrapperProps:N,getHelperWrapperProps:k,getDescriptionProps:P,getErrorMessageProps:O,getClearButtonProps:A}=lre({...t,ref:e}),T=r?de.jsx("label",{...y(),children:r}):null,L=R.useMemo(()=>a?de.jsx("span",{...A(),children:o||de.jsx(gne,{})}):o,[a,A]),B=R.useMemo(()=>c?de.jsx("div",{...k(),children:p&&m?de.jsx("div",{...O(),children:m}):i?de.jsx("div",{...P(),children:i}):null}):null,[c,p,m,i,k,O,P]),W=R.useMemo(()=>de.jsxs("div",{...S(),children:[s,de.jsx("input",{...x()}),L]}),[s,L,x,S]),Y=R.useMemo(()=>h?de.jsxs("div",{...N(),children:[de.jsxs("div",{..._(),children:[f?null:T,W]}),B]}):de.jsxs(de.Fragment,{children:[de.jsxs("div",{..._(),children:[T,W]}),B]}),[l,B,h,T,W,m,i,N,_,O,P]);return de.jsxs(n,{...v(),children:[f?T:null,Y]})});ure.displayName="NextUI.Input";var on=ure;function I3(){return I3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I3.apply(null,arguments)}function CDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var TDe=R.useLayoutEffect,DDe=function(e){var n=R.useRef(e);return TDe(function(){n.current=e}),n},Iz=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},kDe=function(e,n){var r=R.useRef();return R.useCallback(function(i){e.current=i,r.current&&Iz(r.current,null),r.current=n,n&&Iz(n,i)},[n])},Mz={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},PDe=function(e){Object.keys(Mz).forEach(function(n){e.style.setProperty(n,Mz[n],"important")})},Vz=PDe,Ao=null,$z=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function ADe(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ao||(Ao=document.createElement("textarea"),Ao.setAttribute("tabindex","-1"),Ao.setAttribute("aria-hidden","true"),Vz(Ao)),Ao.parentNode===null&&document.body.appendChild(Ao);var i=t.paddingSize,a=t.borderSize,s=t.sizingStyle,o=s.boxSizing;Object.keys(s).forEach(function(m){var p=m;Ao.style[p]=s[p]}),Vz(Ao),Ao.value=e;var l=$z(Ao,t);Ao.value=e,l=$z(Ao,t),Ao.value="x";var c=Ao.scrollHeight-i,f=c*n;o==="border-box"&&(f=f+i+a),l=Math.max(f,l);var h=c*r;return o==="border-box"&&(h=h+i+a),l=Math.min(h,l),[l,c]}var Lz=function(){},RDe=function(e,n){return e.reduce(function(r,i){return r[i]=n[i],r},{})},ODe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],jDe=!!document.documentElement.currentStyle,IDe=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=RDe(ODe,n),i=r.boxSizing;if(i==="")return null;jDe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:s}},MDe=IDe;function cre(t,e,n){var r=DDe(n);R.useLayoutEffect(function(){var i=function(s){return r.current(s)};if(t)return t.addEventListener(e,i),function(){return t.removeEventListener(e,i)}},[])}var VDe=function(e){cre(window,"resize",e)},$De=function(e){cre(document.fonts,"loadingdone",e)},LDe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],FDe=function(e,n){var r=e.cacheMeasurements,i=e.maxRows,a=e.minRows,s=e.onChange,o=s===void 0?Lz:s,l=e.onHeightChange,c=l===void 0?Lz:l,f=CDe(e,LDe);if(f.style){if("maxHeight"in f.style)throw new Error("Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.");if("minHeight"in f.style)throw new Error("Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.")}var h=f.value!==void 0,m=R.useRef(null),p=kDe(m,n),v=R.useRef(0),y=R.useRef(),x=function(){var N=m.current,k=r&&y.current?y.current:MDe(N);if(k){y.current=k;var P=ADe(k,N.value||N.placeholder||"x",a,i),O=P[0],A=P[1];v.current!==O&&(v.current=O,N.style.setProperty("height",O+"px","important"),c(O,{rowHeight:A}))}},S=function(N){h||x(),o(N)};return R.useLayoutEffect(x),VDe(x),$De(x),R.createElement("textarea",I3({},f,{onChange:S,ref:p}))},BDe=R.forwardRef(FDe),dre=dr(({style:t,minRows:e=3,maxRows:n=8,cacheMeasurements:r=!1,disableAutosize:i=!1,onHeightChange:a,...s},o)=>{const{Component:l,label:c,description:f,startContent:h,endContent:m,hasHelper:p,shouldLabelBeOutside:v,shouldLabelBeInside:y,isInvalid:x,errorMessage:S,getBaseProps:_,getLabelProps:N,getInputProps:k,getInnerWrapperProps:P,getInputWrapperProps:O,getHelperWrapperProps:A,getDescriptionProps:T,getErrorMessageProps:L}=lre({...s,ref:o,isMultiline:!0}),[B,W]=R.useState(e>1),[Y,V]=R.useState(!1),I=c?de.jsx("label",{...N(),children:c}):null,H=k(),q=(Z,G)=>{if(e===1&&W(Z>=G.rowHeight*2),n>e){const oe=Z>=n*G.rowHeight;V(oe)}a==null||a(Z,G)},F=i?de.jsx("textarea",{...H,style:kt(H.style,t??{})}):de.jsx(BDe,{...H,cacheMeasurements:r,"data-hide-scroll":dt(!Y),maxRows:n,minRows:e,style:kt(H.style,t??{}),onHeightChange:q}),J=R.useMemo(()=>h||m?de.jsxs("div",{...P(),children:[h,F,m]}):de.jsx("div",{...P(),children:F}),[h,H,m,P]);return de.jsxs(l,{..._(),children:[v?I:null,de.jsxs("div",{...O(),"data-has-multiple-rows":dt(B),children:[y?I:null,J]}),p?de.jsx("div",{...A(),children:x&&S?de.jsx("div",{...L(),children:S}):f?de.jsx("div",{...T(),children:f}):null}):null]})});dre.displayName="NextUI.Textarea";var nr=dre;function UDe(t,e){const{triggerRef:n,popoverRef:r,showArrow:i,offset:a=7,crossOffset:s=0,scrollRef:o,shouldFlip:l,boundaryElement:c,isDismissable:f=!0,shouldCloseOnBlur:h=!0,placement:m="top",containerPadding:p,shouldCloseOnInteractOutside:v,isNonModal:y,isKeyboardDismissDisabled:x,updatePositionDeps:S=[],..._}=t,N=y??!0,{overlayProps:k,underlayProps:P}=n$({isOpen:e.isOpen,onClose:e.close,shouldCloseOnBlur:h,isDismissable:f,isKeyboardDismissDisabled:x,shouldCloseOnInteractOutside:v||(B=>$$(B,n,e))},r),{overlayProps:O,arrowProps:A,placement:T,updatePosition:L}=NQ({..._,shouldFlip:l,crossOffset:s,targetRef:n,overlayRef:r,isOpen:e.isOpen,scrollRef:o,boundaryElement:c,containerPadding:p,placement:Tne(m),offset:i?a+3:a,onClose:N?e.close:()=>{}});return rx(()=>{S.length&&L()},S),R.useEffect(()=>{if(e.isOpen&&!N&&r.current)return fTe([r.current])},[N,e.isOpen,r]),{popoverProps:kt(k,O),arrowProps:A,underlayProps:P,placement:T}}function fre(t){var e,n,r;const i=Xa(),[a,s]=zs(t,sP.variantKeys),{as:o,ref:l,children:c,state:f,triggerRef:h,scrollRef:m,defaultOpen:p,onOpenChange:v,isOpen:y,isNonModal:x=!0,shouldFlip:S=!0,containerPadding:_=12,shouldBlockScroll:N=!1,isDismissable:k=!0,shouldCloseOnBlur:P,portalContainer:O,updatePositionDeps:A,dialogProps:T,placement:L="top",triggerType:B="dialog",showArrow:W=!1,offset:Y=7,crossOffset:V=0,boundaryElement:I,isKeyboardDismissDisabled:H,shouldCloseOnInteractOutside:q,motionProps:F,className:J,classNames:Z,onClose:G,...oe}=a,ae=o||"div",te=fi(l),re=R.useRef(null),X=R.useRef(!1),ce=h||re,he=(n=(e=t.disableAnimation)!=null?e:i==null?void 0:i.disableAnimation)!=null?n:!1,ve=HA({isOpen:y,defaultOpen:p,onOpenChange:Ae=>{v==null||v(Ae),Ae||G==null||G()}}),Ne=f||ve,{popoverProps:ke,underlayProps:Te,placement:ye}=UDe({triggerRef:ce,isNonModal:x,popoverRef:te,placement:L,offset:Y,scrollRef:m,isDismissable:k,shouldCloseOnBlur:P,boundaryElement:I,crossOffset:V,shouldFlip:S,containerPadding:_,updatePositionDeps:A,isKeyboardDismissDisabled:H,shouldCloseOnInteractOutside:q},Ne),{triggerProps:Ie}=$Q({type:B},Ne,ce),{isFocusVisible:Re,isFocused:Ee,focusProps:$e}=Bo(),He=R.useMemo(()=>sP({...s}),[gs(s)]),gt=tn(Z==null?void 0:Z.base,J),Ye=(Ae={})=>({ref:te,...kt(ke,oe,Ae),style:kt(ke.style,oe.style,Ae.style)}),yt=(Ae={})=>({"data-slot":"base","data-open":dt(Ne.isOpen),"data-focus":dt(Ee),"data-arrow":dt(W),"data-focus-visible":dt(Re),"data-placement":oP(ye,L),...kt($e,T,Ae),className:He.base({class:tn(gt)}),style:{outline:"none"}}),_t=R.useCallback((Ae={})=>({"data-slot":"content","data-open":dt(Ne.isOpen),"data-arrow":dt(W),"data-placement":oP(ye,L),className:He.content({class:tn(Z==null?void 0:Z.content,Ae.className)})}),[He,Ne.isOpen,W,ye,L,Z]),St=R.useMemo(()=>dTe(ye,L)&&ye||L,[ye,L]),Bt=R.useCallback(Ae=>{var je;let tt;return Ae.pointerType==="touch"&&((t==null?void 0:t.backdrop)==="blur"||(t==null?void 0:t.backdrop)==="opaque")?tt=setTimeout(()=>{X.current=!0},100):X.current=!0,(je=Ie.onPress)==null||je.call(Ie,Ae),()=>{clearTimeout(tt)}},[Ie==null?void 0:Ie.onPress]),Nt=R.useCallback((Ae={},je=null)=>{const{isDisabled:tt,...Ot}=Ae;return{"data-slot":"trigger","aria-haspopup":"dialog",...kt(Ie,Ot),onPress:Bt,isDisabled:tt,className:He.trigger({class:tn(Z==null?void 0:Z.trigger,Ae.className),isTriggerDisabled:tt}),ref:dQ(je,ce)}},[Ne,Ie,Bt,ce]),Dt=R.useCallback((Ae={})=>({"data-slot":"backdrop",className:He.backdrop({class:Z==null?void 0:Z.backdrop}),onClick:je=>{if(!X.current){je.preventDefault();return}Ne.close(),X.current=!1},...Te,...Ae}),[He,Ne.isOpen,Z,Te]);return R.useEffect(()=>{if(Ne.isOpen&&(te!=null&&te.current))return See([te==null?void 0:te.current])},[Ne.isOpen,te]),{state:Ne,Component:ae,children:c,classNames:Z,showArrow:W,triggerRef:ce,placement:St,isNonModal:x,popoverRef:te,portalContainer:O,isOpen:Ne.isOpen,onClose:Ne.close,disableAnimation:he,shouldBlockScroll:N,backdrop:(r=t.backdrop)!=null?r:"transparent",motionProps:F,getBackdropProps:Dt,getPopoverProps:Ye,getTriggerProps:Nt,getDialogProps:yt,getContentProps:_t}}function H$(t,e){let{role:n="dialog"}=t,r=fg();r=t["aria-label"]?void 0:r;let i=R.useRef(!1);return R.useEffect(()=>{if(e.current&&!e.current.contains(document.activeElement)){xg(e.current);let a=setTimeout(()=>{document.activeElement===e.current&&(i.current=!0,e.current&&(e.current.blur(),xg(e.current)),i.current=!1)},500);return()=>{clearTimeout(a)}}},[e]),Nee(),{dialogProps:{...vc(t,{labelable:!0}),role:n,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||r,onBlur:a=>{i.current&&a.stopPropagation()}},titleProps:{id:r}}}var hre=dr(({children:t,motionProps:e,placement:n,disableAnimation:r,style:i={},transformOrigin:a={},...s},o)=>{let l=i;return a.originX!==void 0||a.originY!==void 0?l={...l,transformOrigin:a}:l={...l,...V$(n==="center"?"top":n)},r?de.jsx("div",{...s,ref:o,children:t}):de.jsx(Dd,{features:kd,children:de.jsx(Td.div,{ref:o,animate:"enter",exit:"exit",initial:"initial",style:l,variants:Ng.scaleSpringOpacity,...kt(s,e),children:t})})});hre.displayName="NextUI.FreeSoloPopoverWrapper";var mre=dr(({children:t,transformOrigin:e,disableDialogFocus:n=!1,...r},i)=>{const{Component:a,state:s,placement:o,backdrop:l,portalContainer:c,disableAnimation:f,motionProps:h,isNonModal:m,getPopoverProps:p,getBackdropProps:v,getDialogProps:y,getContentProps:x}=fre({...r,ref:i}),S=R.useRef(null),{dialogProps:_,titleProps:N}=H$({},S),k=y({...!n&&{ref:S},..._}),P=R.useMemo(()=>l==="transparent"?null:f?de.jsx("div",{...v()}):de.jsx(Dd,{features:kd,children:de.jsx(Td.div,{animate:"enter",exit:"exit",initial:"exit",variants:Ng.fade,...v()})}),[l,f,v]);return de.jsxs(r$,{portalContainer:c,children:[!m&&P,de.jsx(a,{...p(),children:de.jsxs(hre,{disableAnimation:f,motionProps:h,placement:o,tabIndex:-1,transformOrigin:e,...k,children:[!m&&de.jsx(Dw,{onDismiss:s.close}),de.jsx("div",{...x(),children:typeof t=="function"?t(N):t}),de.jsx(Dw,{onDismiss:s.close})]})})]})});mre.displayName="NextUI.FreeSoloPopover";var WDe=mre,[zDe,pre]=Zw({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),ok="right-scroll-bar-position",lk="width-before-scroll-bar",HDe="with-scroll-bars-hidden",GDe="--removed-body-scroll-bar-size";function GI(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function KDe(t,e){var n=R.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var YDe=typeof window<"u"?R.useLayoutEffect:R.useEffect,Fz=new WeakMap;function JDe(t,e){var n=KDe(null,function(r){return t.forEach(function(i){return GI(i,r)})});return YDe(function(){var r=Fz.get(n);if(r){var i=new Set(r),a=new Set(t),s=n.current;i.forEach(function(o){a.has(o)||GI(o,null)}),a.forEach(function(o){i.has(o)||GI(o,s)})}Fz.set(n,t)},[t]),n}function qDe(t){return t}function XDe(t,e){e===void 0&&(e=qDe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var s=e(a,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(a){for(r=!0;n.length;){var s=n;n=[],s.forEach(a)}n={push:function(o){return a(o)},filter:function(){return n}}},assignMedium:function(a){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(a),s=n}var l=function(){var f=s;s=[],f.forEach(a)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(f){s.push(f),c()},filter:function(f){return s=s.filter(f),n}}}};return i}function ZDe(t){t===void 0&&(t={});var e=XDe(null);return e.options=If({async:!0,ssr:!1},t),e}var gre=function(t){var e=t.sideCar,n=oQ(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,If({},n))};gre.isSideCarExport=!0;function QDe(t,e){return t.useMedium(e),gre}var vre=ZDe(),KI=function(){},GA=R.forwardRef(function(t,e){var n=R.useRef(null),r=R.useState({onScrollCapture:KI,onWheelCapture:KI,onTouchMoveCapture:KI}),i=r[0],a=r[1],s=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,f=t.enabled,h=t.shards,m=t.sideCar,p=t.noIsolation,v=t.inert,y=t.allowPinchZoom,x=t.as,S=x===void 0?"div":x,_=t.gapMode,N=oQ(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,P=JDe([n,e]),O=If(If({},N),i);return R.createElement(R.Fragment,null,f&&R.createElement(k,{sideCar:vre,removeScrollBar:c,shards:h,noIsolation:p,inert:v,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:_}),s?R.cloneElement(R.Children.only(o),If(If({},O),{ref:P})):R.createElement(S,If({},O,{className:l,ref:P}),o))});GA.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};GA.classNames={fullWidth:lk,zeroRight:ok};var eke=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function tke(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=eke();return e&&t.setAttribute("nonce",e),t}function nke(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function rke(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ike=function(){var t=0,e=null;return{add:function(n){t==0&&(e=tke())&&(nke(e,n),rke(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ake=function(){var t=ike();return function(e,n){R.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},yre=function(){var t=ake(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},ske={left:0,top:0,right:0,gap:0},YI=function(t){return parseInt(t||"",10)||0},oke=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[YI(n),YI(r),YI(i)]},lke=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ske;var e=oke(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},uke=yre(),gw="data-scroll-locked",cke=function(t,e,n,r){var i=t.left,a=t.top,s=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(HDe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(gw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ok,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(lk,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(ok," .").concat(ok,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(lk," .").concat(lk,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(gw,`] {
    `).concat(GDe,": ").concat(o,`px;
  }
`)},Bz=function(){var t=parseInt(document.body.getAttribute(gw)||"0",10);return isFinite(t)?t:0},dke=function(){R.useEffect(function(){return document.body.setAttribute(gw,(Bz()+1).toString()),function(){var t=Bz()-1;t<=0?document.body.removeAttribute(gw):document.body.setAttribute(gw,t.toString())}},[])},fke=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;dke();var a=R.useMemo(function(){return lke(i)},[i]);return R.createElement(uke,{styles:cke(a,!e,i,n?"":"!important")})},M3=!1;if(typeof window<"u")try{var OT=Object.defineProperty({},"passive",{get:function(){return M3=!0,!0}});window.addEventListener("test",OT,OT),window.removeEventListener("test",OT,OT)}catch{M3=!1}var h0=M3?{passive:!1}:!1,hke=function(t){return t.tagName==="TEXTAREA"},bre=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!hke(t)&&n[e]==="visible")},mke=function(t){return bre(t,"overflowY")},pke=function(t){return bre(t,"overflowX")},Uz=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=wre(t,r);if(i){var a=xre(t,r),s=a[1],o=a[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},gke=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},vke=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},wre=function(t,e){return t==="v"?mke(e):pke(e)},xre=function(t,e){return t==="v"?gke(e):vke(e)},yke=function(t,e){return t==="h"&&e==="rtl"?-1:1},bke=function(t,e,n,r,i){var a=yke(t,window.getComputedStyle(e).direction),s=a*r,o=n.target,l=e.contains(o),c=!1,f=s>0,h=0,m=0;do{var p=xre(t,o),v=p[0],y=p[1],x=p[2],S=y-x-a*v;(v||S)&&wre(t,o)&&(h+=S,m+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(c=!0),c},jT=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Wz=function(t){return[t.deltaX,t.deltaY]},zz=function(t){return t&&"current"in t?t.current:t},wke=function(t,e){return t[0]===e[0]&&t[1]===e[1]},xke=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Ske=0,m0=[];function Eke(t){var e=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),i=R.useState(Ske++)[0],a=R.useState(yre)[0],s=R.useRef(t);R.useEffect(function(){s.current=t},[t]),R.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Lwe([t.lockRef.current],(t.shards||[]).map(zz),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=R.useCallback(function(y,x){if("touches"in y&&y.touches.length===2)return!s.current.allowPinchZoom;var S=jT(y),_=n.current,N="deltaX"in y?y.deltaX:_[0]-S[0],k="deltaY"in y?y.deltaY:_[1]-S[1],P,O=y.target,A=Math.abs(N)>Math.abs(k)?"h":"v";if("touches"in y&&A==="h"&&O.type==="range")return!1;var T=Uz(A,O);if(!T)return!0;if(T?P=A:(P=A==="v"?"h":"v",T=Uz(A,O)),!T)return!1;if(!r.current&&"changedTouches"in y&&(N||k)&&(r.current=P),!P)return!0;var L=r.current||P;return bke(L,x,y,L==="h"?N:k)},[]),l=R.useCallback(function(y){var x=y;if(!(!m0.length||m0[m0.length-1]!==a)){var S="deltaY"in x?Wz(x):jT(x),_=e.current.filter(function(P){return P.name===x.type&&(P.target===x.target||x.target===P.shadowParent)&&wke(P.delta,S)})[0];if(_&&_.should){x.cancelable&&x.preventDefault();return}if(!_){var N=(s.current.shards||[]).map(zz).filter(Boolean).filter(function(P){return P.contains(x.target)}),k=N.length>0?o(x,N[0]):!s.current.noIsolation;k&&x.cancelable&&x.preventDefault()}}},[]),c=R.useCallback(function(y,x,S,_){var N={name:y,delta:x,target:S,should:_,shadowParent:Nke(S)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(k){return k!==N})},1)},[]),f=R.useCallback(function(y){n.current=jT(y),r.current=void 0},[]),h=R.useCallback(function(y){c(y.type,Wz(y),y.target,o(y,t.lockRef.current))},[]),m=R.useCallback(function(y){c(y.type,jT(y),y.target,o(y,t.lockRef.current))},[]);R.useEffect(function(){return m0.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,h0),document.addEventListener("touchmove",l,h0),document.addEventListener("touchstart",f,h0),function(){m0=m0.filter(function(y){return y!==a}),document.removeEventListener("wheel",l,h0),document.removeEventListener("touchmove",l,h0),document.removeEventListener("touchstart",f,h0)}},[]);var p=t.removeScrollBar,v=t.inert;return R.createElement(R.Fragment,null,v?R.createElement(a,{styles:xke(i)}):null,p?R.createElement(fke,{gapMode:t.gapMode}):null)}function Nke(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _ke=QDe(vre,Eke);var Sre=R.forwardRef(function(t,e){return R.createElement(GA,If({},t,{ref:e,sideCar:_ke}))});Sre.classNames=GA.classNames;var Ere=dr((t,e)=>{const{as:n,children:r,className:i,...a}=t,{Component:s,isOpen:o,placement:l,backdrop:c,motionProps:f,disableAnimation:h,shouldBlockScroll:m,getPopoverProps:p,getDialogProps:v,getBackdropProps:y,getContentProps:x,isNonModal:S,onClose:_}=pre(),N=R.useRef(null),{dialogProps:k,titleProps:P}=H$({},N),O=v({ref:N,...k,...a}),A=n||s||"div",T=de.jsxs(de.Fragment,{children:[!S&&de.jsx(Dw,{onDismiss:_}),de.jsx(A,{...O,children:de.jsx("div",{...x({className:i}),children:typeof r=="function"?r(P):r})}),de.jsx(Dw,{onDismiss:_})]}),L=R.useMemo(()=>c==="transparent"?null:h?de.jsx("div",{...y()}):de.jsx(Dd,{features:kd,children:de.jsx(Td.div,{animate:"enter",exit:"exit",initial:"exit",variants:Ng.fade,...y()})}),[c,h,y]),B=de.jsx(Sre,{enabled:m&&o,removeScrollBar:!1,children:h?T:de.jsx(Dd,{features:kd,children:de.jsx(Td.div,{animate:"enter",exit:"exit",initial:"initial",style:{...V$(l==="center"?"top":l)},variants:Ng.scaleSpringOpacity,...f,children:T})})});return de.jsxs("div",{...p(),children:[L,B]})});Ere.displayName="NextUI.PopoverContent";var G$=Ere,Nre=dr((t,e)=>{const{triggerRef:n,getTriggerProps:r}=pre(),{children:i,...a}=t,s=R.useMemo(()=>typeof i=="string"?de.jsx("p",{children:i}):R.Children.only(i),[i]),{onPress:o,isDisabled:l,...c}=R.useMemo(()=>r(kt(a,s.props),s.ref),[r,s.props,a,s.ref]),[,f]=wwe(i,et),{buttonProps:h}=KN({onPress:o,isDisabled:l},n),m=R.useMemo(()=>(f==null?void 0:f[0])!==void 0,[f]);return R.cloneElement(s,kt(c,m?{onPress:o,isDisabled:l}:h))});Nre.displayName="NextUI.PopoverTrigger";var K$=Nre,_re=dr((t,e)=>{const{children:n,...r}=t,i=fre({...r,ref:e}),[a,s]=R.Children.toArray(n),o=de.jsx(r$,{portalContainer:i.portalContainer,children:s});return de.jsxs(zDe,{value:i,children:[a,i.disableAnimation&&i.isOpen?o:de.jsx(nx,{children:i.isOpen?o:null})]})});_re.displayName="NextUI.Popover";var Y$=_re,[Cke,Cre]=Zw({name:"DropdownContext",errorMessage:"useDropdownContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Dropdown />`"});function Tke(t){const{isSelected:e,disableAnimation:n,...r}=t;return de.jsx("svg",{"aria-hidden":"true","data-selected":e,role:"presentation",viewBox:"0 0 17 18",...r,children:de.jsx("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:e?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,style:n?{}:{transition:"stroke-dashoffset 200ms ease"}})})}var Tre=new WeakMap;function Dke(t,e,n){let{shouldFocusWrap:r=!0,onKeyDown:i,onKeyUp:a,...s}=t;!t["aria-label"]&&!t["aria-labelledby"]&&console.warn("An aria-label or aria-labelledby prop is required for accessibility.");let o=vc(t,{labelable:!0}),{listProps:l}=M$({...s,ref:n,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,shouldFocusWrap:r,linkBehavior:"override"});return Tre.set(e,{onClose:t.onClose,onAction:t.onAction}),{menuProps:kt(o,{onKeyDown:i,onKeyUp:a},{role:"menu",...l,onKeyDown:c=>{c.key!=="Escape"&&l.onKeyDown&&l.onKeyDown(c)}})}}function kke(t,e,n){var r,i;let{key:a,closeOnSelect:s,isVirtualized:o,"aria-haspopup":l,onPressStart:c,onPressUp:f,onPress:h,onPressChange:m,onPressEnd:p,onHoverStart:v,onHoverChange:y,onHoverEnd:x,onKeyDown:S,onKeyUp:_,onFocus:N,onFocusChange:k,onBlur:P,onClick:O}=t,A=!!l,T=(r=t.isDisabled)!=null?r:e.selectionManager.isDisabled(a),L=(i=t.isSelected)!=null?i:e.selectionManager.isSelected(a),B=Tre.get(e),W=e.collection.getItem(a),Y=t.onClose||B.onClose,V=kA(),I=ye=>{var Ie;A||((Ie=W==null?void 0:W.props)!=null&&Ie.onAction&&W.props.onAction(),t.onAction?t.onAction(a):B.onAction&&B.onAction(a),ye.target instanceof HTMLAnchorElement&&V.open(ye.target,ye,W.props.href,W.props.routerOptions))},H="menuitem";A||(e.selectionManager.selectionMode==="single"?H="menuitemradio":e.selectionManager.selectionMode==="multiple"&&(H="menuitemcheckbox"));let q=fg(),F=fg(),J=fg(),Z={"aria-disabled":T||void 0,role:H,"aria-label":t["aria-label"],"aria-labelledby":q,"aria-describedby":[F,J].filter(Boolean).join(" ")||void 0,"aria-controls":t["aria-controls"],"aria-haspopup":l,"aria-expanded":t["aria-expanded"]};e.selectionManager.selectionMode!=="none"&&!A&&(Z["aria-checked"]=L),o&&(Z["aria-posinset"]=W==null?void 0:W.index,Z["aria-setsize"]=Sne(e.collection));let G=ye=>{ye.pointerType==="keyboard"&&I(ye),c==null||c(ye)},oe=ye=>{ye.pointerType!=="keyboard"&&(setTimeout(()=>{I(ye)}),!A&&Y&&(s??(e.selectionManager.selectionMode!=="multiple"||e.selectionManager.isLink(a)))&&setTimeout(()=>{Y==null||Y()})),f==null||f(ye)},{itemProps:ae,isFocused:te}=I$({selectionManager:e.selectionManager,key:a,ref:n,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,linkBehavior:"none"}),{pressProps:re,isPressed:X}=Od({onPressStart:G,onPress:h,onPressUp:oe,onPressChange:m,onPressEnd:p,isDisabled:T}),{isHovered:ce,hoverProps:he}=Pl({isDisabled:T,onHoverStart(ye){Tw()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(a)),v==null||v(ye)},onHoverChange:y,onHoverEnd:x}),{keyboardProps:ve}=Q5({onKeyDown:ye=>{if(ye.repeat){ye.continuePropagation();return}switch(ye.key){case" ":!T&&e.selectionManager.selectionMode==="none"&&!A&&s!==!1&&Y&&Y();break;case"Enter":!T&&s!==!1&&!A&&Y&&Y();break;default:A||ye.continuePropagation(),S==null||S(ye);break}},onKeyUp:_}),{focusProps:Ne}=X5({onBlur:P,onFocus:N,onFocusChange:k}),ke=vc(W.props);delete ke.id;let Te=G5(W.props);return{menuItemProps:{...Z,...kt(ke,Te,A?{onFocus:ae.onFocus}:ae,re,he,ve,Ne,{onClick:ho(O,re.onClick)}),tabIndex:ae.tabIndex!=null?-1:void 0},labelProps:{id:q},descriptionProps:{id:F},keyboardShortcutProps:{id:J},isHovered:ce,isFocused:te,isSelected:L,isPressed:X,isDisabled:T}}var Pke=700;function Dre(){return Qw()||typeof window>"u"?!1:window.screen.width<=Pke}function Ake(t){var e,n;const r=Xa(),[i,a]=zs(t,aP.variantKeys),{as:s,item:o,state:l,shortcut:c,description:f,startContent:h,endContent:m,isVirtualized:p,selectedIcon:v,className:y,classNames:x,onAction:S,autoFocus:_,onClick:N,onPress:k,onPressStart:P,onPressUp:O,onPressEnd:A,onPressChange:T,hideSelectedIcon:L=!1,isReadOnly:B=!1,closeOnSelect:W,onClose:Y,...V}=i,I=(n=(e=t.disableAnimation)!=null?e:r==null?void 0:r.disableAnimation)!=null?n:!1,H=R.useRef(null),q=s||(V!=null&&V.href?"a":"li"),F=typeof q=="string",{rendered:J,key:Z}=o,G=l.disabledKeys.has(Z)||t.isDisabled,oe=l.selectionManager.selectionMode!=="none",ae=Dre(),{isFocusVisible:te,focusProps:re}=Bo({autoFocus:_}),{isHovered:X,isPressed:ce,isFocused:he,isSelected:ve,menuItemProps:Ne,labelProps:ke,descriptionProps:Te,keyboardShortcutProps:ye}=kke({key:Z,onClose:Y,isDisabled:G,onPress:k,onClick:N,onPressStart:P,onPressUp:O,onPressEnd:A,onPressChange:T,"aria-label":i["aria-label"],closeOnSelect:W,isVirtualized:p,onAction:S},l,H);let Ie=Ne;const Re=R.useMemo(()=>aP({...a,isDisabled:G,disableAnimation:I}),[gs(a),G,I]),Ee=tn(x==null?void 0:x.base,y);B&&(Ie=qZ(Ie));const $e=(_t={})=>({ref:H,...kt(B?{}:re,ps(V,{enabled:F}),Ie,_t),"data-focus":dt(he),"data-selectable":dt(oe),"data-hover":dt(ae?X||ce:X),"data-disabled":dt(G),"data-selected":dt(ve),"data-pressed":dt(ce),"data-focus-visible":dt(te),className:Re.base({class:tn(Ee,_t.className)})}),He=(_t={})=>({...kt(ke,_t),className:Re.title({class:x==null?void 0:x.title})}),gt=(_t={})=>({...kt(Te,_t),className:Re.description({class:x==null?void 0:x.description})}),Ye=(_t={})=>({...kt(ye,_t),className:Re.shortcut({class:x==null?void 0:x.shortcut})}),yt=R.useCallback((_t={})=>({"aria-hidden":dt(!0),"data-disabled":dt(G),className:Re.selectedIcon({class:x==null?void 0:x.selectedIcon}),..._t}),[G,Re,x]);return{Component:q,domRef:H,slots:Re,classNames:x,isSelectable:oe,isSelected:ve,isDisabled:G,rendered:J,shortcut:c,description:f,startContent:h,endContent:m,selectedIcon:v,disableAnimation:I,getItemProps:$e,getLabelProps:He,hideSelectedIcon:L,getDescriptionProps:gt,getKeyboardShortcutProps:Ye,getSelectedIconProps:yt}}var kre=dr((t,e)=>{const{Component:n,slots:r,classNames:i,rendered:a,shortcut:s,description:o,isSelectable:l,isSelected:c,isDisabled:f,selectedIcon:h,startContent:m,endContent:p,disableAnimation:v,hideSelectedIcon:y,getItemProps:x,getLabelProps:S,getDescriptionProps:_,getKeyboardShortcutProps:N,getSelectedIconProps:k}=Ake(t),P=R.useMemo(()=>{const O=de.jsx(Tke,{disableAnimation:v,isSelected:c});return typeof h=="function"?h({icon:O,isSelected:c,isDisabled:f}):h||O},[h,c,f,v]);return de.jsxs(n,{...x(),children:[m,o?de.jsxs("div",{className:r.wrapper({class:i==null?void 0:i.wrapper}),children:[de.jsx("span",{...S(),children:a}),de.jsx("span",{..._(),children:o})]}):de.jsx("span",{...S(),children:a}),s&&de.jsx("kbd",{...N(),children:s}),l&&!y&&de.jsx("span",{...k(),children:P}),p]})});kre.displayName="NextUI.MenuItem";var Pre=kre,Are={};Are={longPressMessage:"     Alt +    "};var Rre={};Rre={longPressMessage:"    Alt+  ,    "};var Ore={};Ore={longPressMessage:"Dlouhm stiskem nebo stisknutm klves Alt + ipka dol otevete nabdku"};var jre={};jre={longPressMessage:"Langt tryk eller tryk p Alt + pil ned for at bne menuen"};var Ire={};Ire={longPressMessage:"Drcken Sie lange oder drcken Sie Alt + Nach-unten, um das Men zu ffnen"};var Mre={};Mre={longPressMessage:"    Alt +       "};var Vre={};Vre={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var $re={};$re={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el men"};var Lre={};Lre={longPressMessage:"Men avamiseks vajutage pikalt vi vajutage klahve Alt + allanool"};var Fre={};Fre={longPressMessage:"Avaa valikko painamalla pohjassa tai nppinyhdistelmll Alt + Alanuoli"};var Bre={};Bre={longPressMessage:"Appuyez de manire prolonge ou appuyez sur Alt+Flche vers le bas pour ouvrir le menu."};var Ure={};Ure={longPressMessage:"     Alt + ArrowDown    "};var Wre={};Wre={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var zre={};zre={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyl gombot a men megnyitshoz"};var Hre={};Hre={longPressMessage:"Premere a lungo o premere Alt + Freccia gi per aprire il menu"};var Gre={};Gre={longPressMessage:" Alt+"};var Kre={};Kre={longPressMessage:"  Alt +     "};var Yre={};Yre={longPressMessage:"Nordami atidaryti meniu, nuspaud palaikykite arba paspauskite Alt + ArrowDown."};var Jre={};Jre={longPressMessage:"Lai atvrtu izvlni, turiet nospiestu vai nospiediet taustiu kombinciju Alt + lejupvrst bultia"};var qre={};qre={longPressMessage:"Langt trykk eller trykk Alt + PilNed for  pne menyen"};var Xre={};Xre={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var Zre={};Zre={longPressMessage:"Nacinij i przytrzymaj lub nacinij klawisze Alt + Strzaka w d, aby otworzy menu"};var Qre={};Qre={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var eie={};eie={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var tie={};tie={longPressMessage:"Apsai lung sau apsai pe Alt + sgeat n jos pentru a deschide meniul"};var nie={};nie={longPressMessage:"     Alt +  ,   "};var rie={};rie={longPressMessage:"Ponuku otvorte dlhm stlaenm alebo stlaenm klvesu Alt + klvesu so pkou nadol"};var iie={};iie={longPressMessage:"Za odprtje menija pritisnite in drite gumb ali pritisnite Alt+puica navzdol"};var aie={};aie={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var sie={};sie={longPressMessage:"Hll nedtryckt eller tryck p Alt + pil nedt fr att ppna menyn"};var oie={};oie={longPressMessage:"Meny amak iin uzun basn veya Alt + Aa Ok tuuna basn"};var lie={};lie={longPressMessage:"      Alt   ,   "};var uie={};uie={longPressMessage:" Alt + "};var cie={};cie={longPressMessage:" Alt+"};var die={};die={"ar-AE":Are,"bg-BG":Rre,"cs-CZ":Ore,"da-DK":jre,"de-DE":Ire,"el-GR":Mre,"en-US":Vre,"es-ES":$re,"et-EE":Lre,"fi-FI":Fre,"fr-FR":Bre,"he-IL":Ure,"hr-HR":Wre,"hu-HU":zre,"it-IT":Hre,"ja-JP":Gre,"ko-KR":Kre,"lt-LT":Yre,"lv-LV":Jre,"nb-NO":qre,"nl-NL":Xre,"pl-PL":Zre,"pt-BR":Qre,"pt-PT":eie,"ro-RO":tie,"ru-RU":nie,"sk-SK":rie,"sl-SI":iie,"sr-SP":aie,"sv-SE":sie,"tr-TR":oie,"uk-UA":lie,"zh-CN":uie,"zh-TW":cie};function Rke(t){return t&&t.__esModule?t.default:t}function fie(t,e,n){let{type:r="menu",isDisabled:i,trigger:a="press"}=t,s=dc(),{triggerProps:o,overlayProps:l}=$Q({type:r},e,n),c=p=>{if(!i&&!(a==="longPress"&&!p.altKey)&&n&&n.current)switch(p.key){case"Enter":case" ":if(a==="longPress")return;case"ArrowDown":"continuePropagation"in p||p.stopPropagation(),p.preventDefault(),e.toggle("first");break;case"ArrowUp":"continuePropagation"in p||p.stopPropagation(),p.preventDefault(),e.toggle("last");break;default:"continuePropagation"in p&&p.continuePropagation()}},f=lQ(Rke(die),"@react-aria/menu"),{longPressProps:h}=jQ({isDisabled:i||a!=="longPress",accessibilityDescription:f.format("longPressMessage"),onLongPressStart(){e.close()},onLongPress(){e.open("first")}}),m={onPressStart(p){p.pointerType!=="touch"&&p.pointerType!=="keyboard"&&!i&&e.open(p.pointerType==="virtual"?"first":null)},onPress(p){p.pointerType==="touch"&&!i&&e.toggle()}};return delete o.onPress,{menuTriggerProps:{...o,...a==="press"?m:h,id:s,onKeyDown:c},menuProps:{...l,"aria-labelledby":s,autoFocus:e.focusStrategy||!0,onClose:e.close}}}function Oke(t){let{heading:e,"aria-label":n}=t,r=dc();return{itemProps:{role:"presentation"},headingProps:e?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":e?r:void 0}}}var hie=dr(({item:t,state:e,as:n,variant:r,color:i,disableAnimation:a,onAction:s,closeOnSelect:o,className:l,classNames:c,showDivider:f=!1,hideSelectedIcon:h,dividerProps:m={},itemClasses:p,title:v,...y},x)=>{const S=n||"li",_=R.useMemo(()=>fne(),[]),N=tn(c==null?void 0:c.base,l),k=tn(c==null?void 0:c.divider,m==null?void 0:m.className),{itemProps:P,headingProps:O,groupProps:A}=Oke({heading:t.rendered,"aria-label":t["aria-label"]});return de.jsxs(S,{"data-slot":"base",...kt(P,y),className:_.base({class:N}),children:[t.rendered&&de.jsx("span",{...O,className:_.heading({class:c==null?void 0:c.heading}),"data-slot":"heading",children:t.rendered}),de.jsxs("ul",{...A,className:_.group({class:c==null?void 0:c.group}),"data-has-title":!!t.rendered,"data-slot":"group",children:[[...t.childNodes].map(T=>{const{key:L,props:B}=T;let W=de.jsx(Pre,{classNames:p,closeOnSelect:o,color:i,disableAnimation:a,hideSelectedIcon:h,item:T,state:e,variant:r,onAction:s,...B},L);return T.wrapper&&(W=T.wrapper(W)),W}),f&&de.jsx(Bn,{as:"li",className:_.divider({class:k}),...m})]})]})});hie.displayName="NextUI.MenuSection";var jke=hie;function Ike(t){var e;const n=Xa(),{as:r,ref:i,variant:a,color:s,children:o,disableAnimation:l=(e=n==null?void 0:n.disableAnimation)!=null?e:!1,onAction:c,closeOnSelect:f,itemClasses:h,className:m,state:p,topContent:v,bottomContent:y,hideEmptyContent:x=!1,hideSelectedIcon:S=!1,emptyContent:_="No items.",menuProps:N,onClose:k,classNames:P,...O}=t,A=r||"ul",T=fi(i),L=typeof A=="string",B=Ene({...O,...N,children:o}),W=p||B,{menuProps:Y}=Dke({...O,...N},W,T),V=R.useMemo(()=>dne({className:m}),[m]),I=tn(P==null?void 0:P.base,m);return{Component:A,state:W,variant:a,color:s,disableAnimation:l,onAction:c,onClose:k,topContent:v,bottomContent:y,closeOnSelect:f,className:m,itemClasses:h,getBaseProps:(J={})=>({ref:T,"data-slot":"base",className:V.base({class:I}),...ps(O,{enabled:L}),...J}),getListProps:(J={})=>({"data-slot":"list",className:V.list({class:P==null?void 0:P.list}),...Y,...J}),hideEmptyContent:x,hideSelectedIcon:S,getEmptyContentProps:(J={})=>({children:_,className:V.emptyContent({class:P==null?void 0:P.emptyContent}),...J})}}function mie(t,e){const{Component:n,state:r,closeOnSelect:i,color:a,disableAnimation:s,hideSelectedIcon:o,hideEmptyContent:l,variant:c,onClose:f,onAction:h,topContent:m,bottomContent:p,itemClasses:v,getBaseProps:y,getListProps:x,getEmptyContentProps:S}=Ike({...t,ref:e}),_=de.jsxs(n,{...x(),children:[!r.collection.size&&!l&&de.jsx("li",{children:de.jsx("div",{...S()})}),[...r.collection].map(N=>{const k={closeOnSelect:i,color:a,disableAnimation:s,item:N,state:r,variant:c,onClose:f,onAction:h,hideSelectedIcon:o,...N.props};if(N.type==="section")return de.jsx(jke,{...k,itemClasses:v},N.key);let P=de.jsx(Pre,{...k,classNames:v},N.key);return N.wrapper&&(P=N.wrapper(P)),P})]});return de.jsxs("div",{...y(),children:[m,_,p]})}var Mke=dr(mie);mie.displayName="NextUI.Menu";var Vke=WA,B0=Vke;function pie(t,e){const{getMenuProps:n}=Cre();return de.jsx(G$,{children:de.jsx(MQ,{contain:!0,restoreFocus:!0,children:de.jsx(Mke,{...n(t,e)})})})}var gie=dr(pie);pie.displayName="NextUI.DropdownMenu";var vie=dr((t,e)=>{const{getMenuTriggerProps:n}=Cre(),{children:r,...i}=t;return de.jsx(K$,{...n(i),children:r})});vie.displayName="NextUI.DropdownTrigger";var yie=vie;function bie(t){let e=HA(t),[n,r]=R.useState(null),[i,a]=R.useState([]),s=()=>{a([]),e.close()};return{focusStrategy:n,...e,open(c=null){r(c),e.open()},toggle(c=null){r(c),e.toggle()},close(){s()},expandedKeysStack:i,openSubmenu:(c,f)=>{a(h=>f>h.length?h:[...h.slice(0,f),c])},closeSubmenu:(c,f)=>{a(h=>h[f]===c?h.slice(0,f):h)}}}function $ke(t){var e;const n=Xa(),{as:r,triggerRef:i,isOpen:a,defaultOpen:s,onOpenChange:o,isDisabled:l,type:c="menu",trigger:f="press",placement:h="bottom",closeOnSelect:m=!0,shouldBlockScroll:p=!0,classNames:v,disableAnimation:y=(e=n==null?void 0:n.disableAnimation)!=null?e:!1,onClose:x,className:S,..._}=t,N=r||"div",k=R.useRef(null),P=i||k,O=R.useRef(null),A=R.useRef(null),T=bie({trigger:f,isOpen:a,defaultOpen:s,onOpenChange:q=>{o==null||o(q),q||x==null||x()}}),{menuTriggerProps:L,menuProps:B}=fie({type:c,trigger:f,isDisabled:l},T,P),W=R.useMemo(()=>$Ce({className:S}),[S]),Y=q=>{q!==void 0&&!q||m&&T.close()},V=(q={})=>{const F=kt(_,q);return{state:T,placement:h,ref:A,disableAnimation:y,shouldBlockScroll:p,scrollRef:O,triggerRef:P,...F,classNames:{...v,...q.classNames,content:tn(W,v==null?void 0:v.content,q.className)},shouldCloseOnInteractOutside:F!=null&&F.shouldCloseOnInteractOutside?F.shouldCloseOnInteractOutside:J=>$$(J,k,T)}},I=(q={},F=null)=>{const{onPress:J,onPressStart:Z,...G}=L;return{...kt(G,{isDisabled:l},q),ref:Fk(F,k)}},H=(q,F=null)=>({ref:Fk(F,O),menuProps:B,closeOnSelect:m,...kt(q,{onAction:()=>Y(q==null?void 0:q.closeOnSelect),onClose:T.close})});return{Component:N,menuRef:O,menuProps:B,classNames:W,closeOnSelect:m,onClose:T.close,autoFocus:T.focusStrategy||!0,disableAnimation:y,getPopoverProps:V,getMenuProps:H,getMenuTriggerProps:I}}var wie=t=>{const{children:e,...n}=t,r=$ke(n),[i,a]=it.Children.toArray(e);return de.jsx(Cke,{value:r,children:de.jsxs(Y$,{...r.getPopoverProps(),children:[i,a]})})};wie.displayName="NextUI.Dropdown";var xie=wie,[Lke,KA]=Zw({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),Sie=dr((t,e)=>{const{as:n,children:r,className:i,...a}=t,{slots:s,classNames:o,bodyId:l,setBodyMounted:c}=KA(),f=fi(e),h=n||"div";return R.useEffect(()=>(c(!0),()=>c(!1)),[c]),de.jsx(h,{ref:f,className:s.body({class:tn(o==null?void 0:o.body,i)}),id:l,...a,children:r})});Sie.displayName="NextUI.ModalBody";var $y=Sie,Fke={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,transition:{scale:{duration:.4,ease:wE.ease},opacity:{duration:.4,ease:wE.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,transition:{duration:.3,ease:wE.ease}}},Eie=dr((t,e)=>{const{as:n,children:r,role:i="dialog",...a}=t,{Component:s,domRef:o,slots:l,classNames:c,motionProps:f,backdrop:h,closeButton:m,hideCloseButton:p,disableAnimation:v,getDialogProps:y,getBackdropProps:x,getCloseButtonProps:S,onClose:_}=KA(),N=n||s||"div",{dialogProps:k}=H$({role:i},o),P=R.isValidElement(m)?R.cloneElement(m,S()):de.jsx("button",{...S(),children:de.jsx(YCe,{})}),O=R.useCallback(W=>{W.key==="Tab"&&W.nativeEvent.isComposing&&(W.stopPropagation(),W.preventDefault())},[]),A=y(kt(k,a)),T=de.jsxs(N,{...A,onKeyDown:ho(A.onKeyDown,O),children:[de.jsx(Dw,{onDismiss:_}),!p&&P,typeof r=="function"?r(_):r,de.jsx(Dw,{onDismiss:_})]}),L=R.useMemo(()=>h==="transparent"?null:v?de.jsx("div",{...x()}):de.jsx(Dd,{features:kd,children:de.jsx(Td.div,{animate:"enter",exit:"exit",initial:"exit",variants:Ng.fade,...x()})}),[h,v,x]),B=v?de.jsx("div",{className:l.wrapper({class:c==null?void 0:c.wrapper}),"data-slot":"wrapper",children:T}):de.jsx(Dd,{features:kd,children:de.jsx(Td.div,{animate:"enter",className:l.wrapper({class:c==null?void 0:c.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:Fke,...f,children:T})});return de.jsxs("div",{tabIndex:-1,children:[L,B]})});Eie.displayName="NextUI.ModalContent";var Ly=Eie,Nie=dr((t,e)=>{const{as:n,children:r,className:i,...a}=t,{slots:s,classNames:o}=KA(),l=fi(e),c=n||"footer";return de.jsx(c,{ref:l,className:s.footer({class:tn(o==null?void 0:o.footer,i)}),...a,children:r})});Nie.displayName="NextUI.ModalFooter";var Rw=Nie,_ie=dr((t,e)=>{const{as:n,children:r,className:i,...a}=t,{slots:s,classNames:o,headerId:l,setHeaderMounted:c}=KA(),f=fi(e),h=n||"header";return R.useEffect(()=>(c(!0),()=>c(!1)),[c]),de.jsx(h,{ref:f,className:s.header({class:tn(o==null?void 0:o.header,i)}),id:l,...a,children:r})});_ie.displayName="NextUI.ModalHeader";var Fy=_ie;function Bke(t={shouldBlockScroll:!0},e,n){let{overlayProps:r,underlayProps:i}=n$({...t,isOpen:e.isOpen,onClose:e.close},n);return f1e({isDisabled:!e.isOpen||!t.shouldBlockScroll}),Nee(),R.useEffect(()=>{if(e.isOpen&&n.current)return See([n.current])},[e.isOpen,n]),{modalProps:kt(r),underlayProps:i}}function Uke(t){var e,n,r;const i=Xa(),[a,s]=zs(t,sz.variantKeys),{ref:o,as:l,className:c,classNames:f,isOpen:h,defaultOpen:m,onOpenChange:p,motionProps:v,closeButton:y,isDismissable:x=!0,hideCloseButton:S=!1,shouldBlockScroll:_=!0,portalContainer:N,isKeyboardDismissDisabled:k=!1,onClose:P,...O}=a,A=l||"section",T=fi(o),L=R.useRef(null),[B,W]=R.useState(!1),[Y,V]=R.useState(!1),I=(n=(e=t.disableAnimation)!=null?e:i==null?void 0:i.disableAnimation)!=null?n:!1,H=R.useId(),q=R.useId(),F=R.useId(),J=HA({isOpen:h,defaultOpen:m,onOpenChange:Ne=>{p==null||p(Ne),Ne||P==null||P()}}),{modalProps:Z,underlayProps:G}=Bke({isDismissable:x,shouldBlockScroll:_,isKeyboardDismissDisabled:k},J,T),{buttonProps:oe}=KN({onPress:J.close},L),{isFocusVisible:ae,focusProps:te}=Bo(),re=tn(f==null?void 0:f.base,c),X=R.useMemo(()=>sz({...s,disableAnimation:I}),[gs(s),I]),ce=(Ne={},ke=null)=>({ref:dQ(ke,T),...kt(Z,O,Ne),className:X.base({class:tn(re,Ne.className)}),id:H,"data-open":dt(J.isOpen),"data-dismissable":dt(x),"aria-modal":dt(!0),"aria-labelledby":B?q:void 0,"aria-describedby":Y?F:void 0}),he=R.useCallback((Ne={})=>({className:X.backdrop({class:f==null?void 0:f.backdrop}),onClick:()=>J.close(),...G,...Ne}),[X,f,G]),ve=()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":dt(ae),className:X.closeButton({class:f==null?void 0:f.closeButton}),...kt(oe,te)});return{Component:A,slots:X,domRef:T,headerId:q,bodyId:F,motionProps:v,classNames:f,isDismissable:x,closeButton:y,hideCloseButton:S,portalContainer:N,shouldBlockScroll:_,backdrop:(r=t.backdrop)!=null?r:"opaque",isOpen:J.isOpen,onClose:J.close,disableAnimation:I,setBodyMounted:V,setHeaderMounted:W,getDialogProps:ce,getBackdropProps:he,getCloseButtonProps:ve}}var Cie=dr((t,e)=>{const{children:n,...r}=t,i=Uke({...r,ref:e}),a=de.jsx(r$,{portalContainer:i.portalContainer,children:n});return de.jsx(Lke,{value:i,children:i.disableAnimation&&i.isOpen?a:de.jsx(nx,{children:i.isOpen?a:null})})});Cie.displayName="NextUI.Modal";var By=Cie;function QE(t={}){const{id:e,defaultOpen:n,isOpen:r,onClose:i,onOpen:a,onChange:s=()=>{}}=t,o=Az(a),l=Az(i),[c,f]=Mg(r,n||!1,s),h=R.useId(),m=e||h,p=r!==void 0,v=R.useCallback(()=>{p||f(!1),l==null||l()},[p,l]),y=R.useCallback(()=>{p||f(!0),o==null||o()},[p,o]),x=R.useCallback(()=>{(c?v:y)()},[c,y,v]);return{isOpen:!!c,onOpen:y,onClose:v,onOpenChange:x,isControlled:p,getButtonProps:(S={})=>({...S,"aria-expanded":c,"aria-controls":m,onClick:ho(S.onClick,x)}),getDisclosureProps:(S={})=>({...S,hidden:!c,id:m})}}function Wke(t){const[e,n]=zs(t,uz.variantKeys),{as:r,children:i,className:a,keys:s,title:o,classNames:l,...c}=e,f=r||"kbd",h=R.useMemo(()=>uz({...n}),[gs(n)]),m=tn(l==null?void 0:l.base,a),p=typeof s=="string"?[s]:Array.isArray(s)?s:[];return{Component:f,slots:h,classNames:l,title:o,children:i,keysToRender:p,getKbdProps:(y={})=>({...c,...y,className:tn(h.base({class:tn(m,y.className)}))})}}var zke={command:"",shift:"",ctrl:"",option:"",enter:"",delete:"",escape:"",tab:"",capslock:"",up:"",right:"",down:"",left:"",pageup:"",pagedown:"",home:"",end:"",help:"?",space:""},Hke={command:"Command",shift:"Shift",ctrl:"Control",option:"Option",enter:"Enter",delete:"Delete",escape:"Escape",tab:"Tab",capslock:"Caps Lock",up:"Up",right:"Right",down:"Down",left:"Left",pageup:"Page Up",pagedown:"Page Down",home:"Home",end:"End",help:"Help",space:"Space"},Tie=dr((t,e)=>{const{Component:n,children:r,slots:i,classNames:a,keysToRender:s,getKbdProps:o}=Wke({...t}),l=R.useMemo(()=>s.map(c=>de.jsx("abbr",{className:i.abbr({class:a==null?void 0:a.abbr}),title:Hke[c],children:zke[c]},c)),[s]);return de.jsxs(n,{ref:e,...o(),children:[l,r&&de.jsx("span",{className:i.content({class:a==null?void 0:a.content}),children:r})]})});Tie.displayName="NextUI.Kbd";var Gke=Tie;const Die=new WeakMap;function cP(t,e,n){return typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${Die.get(t)}-${n}-${e}`}function Kke(t,e,n){let{key:r,isDisabled:i,shouldSelectOnPressUp:a}=t,{selectionManager:s,selectedKey:o}=e,l=r===o,c=i||e.isDisabled||e.selectionManager.isDisabled(r),{itemProps:f,isPressed:h}=I$({selectionManager:s,key:r,ref:n,isDisabled:c,shouldSelectOnPressUp:a,linkBehavior:"selection"}),m=cP(e,r,"tab"),p=cP(e,r,"tabpanel"),{tabIndex:v}=f,y=e.collection.getItem(r),x=vc(y==null?void 0:y.props,{labelable:!0});delete x.id;let S=G5(y==null?void 0:y.props);return{tabProps:kt(x,S,f,{id:m,"aria-selected":l,"aria-disabled":c||void 0,"aria-controls":l?p:void 0,tabIndex:c?void 0:v,role:"tab"}),isSelected:l,isDisabled:c,isPressed:h}}function Yke(t,e,n){let r=c1e(n)?void 0:0;var i;const a=cP(e,(i=t.id)!==null&&i!==void 0?i:e==null?void 0:e.selectedKey,"tabpanel"),s=PA({...t,id:a,"aria-labelledby":cP(e,e==null?void 0:e.selectedKey,"tab")});return{tabPanelProps:kt(s,{tabIndex:r,role:"tabpanel","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"]})}}class Jke{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}getKeyAbove(e){return this.getPreviousKey(e)}getKeyBelow(e){return this.getNextKey(e)}isDisabled(e){var n,r;return this.disabledKeys.has(e)||!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getNextKey(e){do e=this.collection.getKeyAfter(e),e==null&&(e=this.collection.getFirstKey());while(this.isDisabled(e));return e}getPreviousKey(e){do e=this.collection.getKeyBefore(e),e==null&&(e=this.collection.getLastKey());while(this.isDisabled(e));return e}constructor(e,n,r,i=new Set){this.collection=e,this.flipDirection=n==="rtl"&&r==="horizontal",this.disabledKeys=i}}function qke(t,e,n){let{orientation:r="horizontal",keyboardActivation:i="automatic"}=t,{collection:a,selectionManager:s,disabledKeys:o}=e,{direction:l}=km(),c=R.useMemo(()=>new Jke(a,l,r,o),[a,o,r,l]),{collectionProps:f}=mne({ref:n,selectionManager:s,keyboardDelegate:c,selectOnFocus:i==="automatic",disallowEmptySelection:!0,scrollRef:n,linkBehavior:"selection"}),h=dc();Die.set(e,h);let m=PA({...t,id:h});return{tabListProps:{...kt(f,m),role:"tablist","aria-orientation":r,tabIndex:void 0}}}var kie=dr((t,e)=>{var n,r;const{as:i,tabKey:a,destroyInactiveTabPanel:s,state:o,className:l,slots:c,classNames:f,...h}=t,m=i||"div",p=fi(e),{tabPanelProps:v}=Yke({...t,id:String(a)},o,p),{focusProps:y,isFocused:x,isFocusVisible:S}=Bo(),_=o.selectedItem,N=o.collection.getItem(a).props.children,k=tn(f==null?void 0:f.panel,l,(n=_==null?void 0:_.props)==null?void 0:n.className),P=a===(_==null?void 0:_.key);return!N||!P&&s?null:de.jsx(m,{ref:p,"data-focus":x,"data-focus-visible":S,"data-inert":P?void 0:"true",inert:P?void 0:"true",...P&&kt(v,y,h),className:(r=c.panel)==null?void 0:r.call(c,{class:k}),"data-slot":"panel",children:N})});kie.displayName="NextUI.TabPanel";var Xke=kie,Pie=dr((t,e)=>{var n;const{className:r,as:i,item:a,state:s,classNames:o,isDisabled:l,listRef:c,slots:f,motionProps:h,disableAnimation:m,disableCursorAnimation:p,shouldSelectOnPressUp:v,onClick:y,...x}=t,{key:S}=a,_=fi(e),N=i||(t.href?"a":"button"),k=typeof N=="string",{tabProps:P,isSelected:O,isDisabled:A,isPressed:T}=Kke({key:S,isDisabled:l,shouldSelectOnPressUp:v},s,_);t.children==null&&delete P["aria-controls"];const L=l||A,{focusProps:B,isFocused:W,isFocusVisible:Y}=Bo(),{hoverProps:V,isHovered:I}=Pl({isDisabled:L}),H=tn(o==null?void 0:o.tab,r),[,q]=sre({rerender:!0}),F=()=>{ho(y,P.onClick),!(!(_!=null&&_.current)||!(c!=null&&c.current))&&mDe(_.current,{scrollMode:"if-needed",behavior:"smooth",block:"end",inline:"end",boundary:c==null?void 0:c.current})};return de.jsxs(N,{ref:_,"data-disabled":dt(A),"data-focus":dt(W),"data-focus-visible":dt(Y),"data-hover":dt(I),"data-hover-unselected":dt((I||T)&&!O),"data-pressed":dt(T),"data-selected":dt(O),"data-slot":"tab",...kt(P,L?{}:{...B,...V},ps(x,{enabled:k,omitPropNames:new Set(["title"])}),{onClick:F}),className:(n=f.tab)==null?void 0:n.call(f,{class:H}),title:x==null?void 0:x.titleValue,type:N==="button"?"button":void 0,children:[O&&!m&&!p&&q?de.jsx(Dd,{features:H_e,children:de.jsx(Td.span,{className:f.cursor({class:o==null?void 0:o.cursor}),"data-slot":"cursor",layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.5},...h})}):null,de.jsx("div",{className:f.tabContent({class:o==null?void 0:o.tabContent}),"data-slot":"tabContent",children:a.rendered})]})});Pie.displayName="NextUI.Tab";var Zke=Pie;class Hz{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let n=this.keyMap.get(e);return n?n.prevKey:null}getKeyAfter(e){let n=this.keyMap.get(e);return n?n.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const n=[...this.getKeys()];return this.getItem(n[e])}getChildren(e){let n=this.keyMap.get(e);return(n==null?void 0:n.childNodes)||[]}constructor(e){this.keyMap=new Map,this.iterable=e;let n=a=>{if(this.keyMap.set(a.key,a),a.childNodes&&a.type==="section")for(let s of a.childNodes)n(s)};for(let a of e)n(a);let r,i=0;for(let[a,s]of this.keyMap)r?(r.nextKey=a,s.prevKey=r.key):(this.firstKey=a,s.prevKey=void 0),s.type==="item"&&(s.index=i++),r=s,r.nextKey=void 0;this.lastKey=r==null?void 0:r.key}}function J$(t){let{filter:e}=t,n=yne(t),r=R.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),i=R.useCallback(c=>e?new Hz(e(c)):new Hz(c),[e]),a=R.useMemo(()=>({suppressTextValueWarning:t.suppressTextValueWarning}),[t.suppressTextValueWarning]),s=xne(t,i,a),o=R.useMemo(()=>new bne(s,n),[s,n]);const l=R.useRef(null);return R.useEffect(()=>{if(n.focusedKey!=null&&!s.getItem(n.focusedKey)){const c=l.current.getItem(n.focusedKey),f=[...l.current.getKeys()].map(y=>{const x=l.current.getItem(y);return x.type==="item"?x:null}).filter(y=>y!==null),h=[...s.getKeys()].map(y=>{const x=s.getItem(y);return x.type==="item"?x:null}).filter(y=>y!==null),m=f.length-h.length;let p=Math.min(m>1?Math.max(c.index-m+1,0):c.index,h.length-1),v;for(;p>=0;){if(!o.isDisabled(h[p].key)){v=h[p];break}p<h.length-1?p++:(p>c.index&&(p=c.index),p--)}n.setFocusedKey(v?v.key:null)}l.current=s},[s,o,n,n.focusedKey]),{collection:s,disabledKeys:r,selectionManager:o}}function Qke(t){var e;let[n,r]=Mg(t.selectedKey,(e=t.defaultSelectedKey)!==null&&e!==void 0?e:null,t.onSelectionChange),i=R.useMemo(()=>n!=null?[n]:[],[n]),{collection:a,disabledKeys:s,selectionManager:o}=J$({...t,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:i,onSelectionChange:c=>{var f;let h=(f=c.values().next().value)!==null&&f!==void 0?f:null;h===n&&t.onSelectionChange&&t.onSelectionChange(h),r(h)}}),l=n!=null?a.getItem(n):null;return{collection:a,disabledKeys:s,selectionManager:o,selectedKey:n,setSelectedKey:r,selectedItem:l}}function ePe(t){var e;let n=Qke({...t,suppressTextValueWarning:!0,defaultSelectedKey:(e=t.defaultSelectedKey)!==null&&e!==void 0?e:Gz(t.collection,t.disabledKeys?new Set(t.disabledKeys):new Set)}),{selectionManager:r,collection:i,selectedKey:a}=n,s=R.useRef(a);return R.useEffect(()=>{let o=a;(r.isEmpty||!i.getItem(o))&&(o=Gz(i,n.disabledKeys),o!=null&&r.setSelectedKeys([o])),(o!=null&&r.focusedKey==null||!r.isFocused&&o!==s.current)&&r.setFocusedKey(o),s.current=o}),{...n,isDisabled:t.isDisabled||!1}}function Gz(t,e){let n=null;if(t){for(n=t.getFirstKey();e.has(n)&&n!==t.getLastKey();)n=t.getKeyAfter(n);e.has(n)&&n===t.getLastKey()&&(n=t.getFirstKey())}return n}function tPe(t){var e,n,r;const i=Xa(),[a,s]=zs(t,tz.variantKeys),{ref:o,as:l,className:c,classNames:f,children:h,disableCursorAnimation:m,motionProps:p,isVertical:v=!1,shouldSelectOnPressUp:y=!0,destroyInactiveTabPanel:x=!0,...S}=a,_=l||"div",N=typeof _=="string",k=fi(o),P=(n=(e=t==null?void 0:t.disableAnimation)!=null?e:i==null?void 0:i.disableAnimation)!=null?n:!1,O=ePe({children:h,...S}),{tabListProps:A}=qke(S,O,k),T=R.useMemo(()=>tz({...s,className:c,disableAnimation:P,...v?{placement:"start"}:{}}),[gs(s),c,P,v]),L=tn(f==null?void 0:f.base,c),B=R.useMemo(()=>({state:O,slots:T,classNames:f,motionProps:p,disableAnimation:P,listRef:k,shouldSelectOnPressUp:y,disableCursorAnimation:m,isDisabled:t==null?void 0:t.isDisabled}),[O,T,k,p,P,m,y,t==null?void 0:t.isDisabled,f]),W=R.useCallback(H=>({"data-slot":"base",className:T.base({class:tn(L,H==null?void 0:H.className)}),...kt(ps(S,{enabled:N}),H)}),[L,S,T]),Y=(r=s.placement)!=null?r:v?"start":"top",V=R.useCallback(H=>({"data-slot":"tabWrapper",className:T.wrapper({class:tn(f==null?void 0:f.wrapper,H==null?void 0:H.className)}),"data-placement":Y,"data-vertical":v||Y==="start"||Y==="end"?"vertical":"horizontal"}),[f,T,Y,v]),I=R.useCallback(H=>({ref:k,"data-slot":"tabList",className:T.tabList({class:tn(f==null?void 0:f.tabList,H==null?void 0:H.className)}),...kt(A,H)}),[k,A,f,T]);return{Component:_,domRef:k,state:O,values:B,destroyInactiveTabPanel:x,getBaseProps:W,getTabListProps:I,getWrapperProps:V}}function Aie(t,e){const{Component:n,values:r,state:i,destroyInactiveTabPanel:a,getBaseProps:s,getTabListProps:o,getWrapperProps:l}=tPe({...t,ref:e}),c=R.useId(),f=!t.disableAnimation&&!t.disableCursorAnimation,h={state:i,listRef:r.listRef,slots:r.slots,classNames:r.classNames,isDisabled:r.isDisabled,motionProps:r.motionProps,disableAnimation:r.disableAnimation,shouldSelectOnPressUp:r.shouldSelectOnPressUp,disableCursorAnimation:r.disableCursorAnimation},m=[...i.collection].map(v=>de.jsx(Zke,{item:v,...h,...v.props},v.key)),p=de.jsxs(de.Fragment,{children:[de.jsx("div",{...s(),children:de.jsx(n,{...o(),children:f?de.jsx(Zte,{id:c,children:m}):m})}),[...i.collection].map(v=>de.jsx(Xke,{classNames:r.classNames,destroyInactiveTabPanel:a,slots:r.slots,state:r.state,tabKey:v.key},v.key))]});return"placement"in t||"isVertical"in t?de.jsx("div",{...l(),children:p}):p}var qN=dr(Aie);Aie.displayName="NextUI.Tabs";var nPe=WA,du=nPe;function rPe(t={}){const{domRef:e,isEnabled:n=!0,overflowCheck:r="vertical",visibility:i="auto",offset:a=0,onVisibilityChange:s,updateDeps:o=[]}=t,l=R.useRef(i);R.useEffect(()=>{const c=e==null?void 0:e.current;if(!c||!n)return;const f=(p,v,y,x,S)=>{if(i==="auto"){const _=`${x}${uwe(S)}Scroll`;v&&y?(c.dataset[_]="true",c.removeAttribute(`data-${x}-scroll`),c.removeAttribute(`data-${S}-scroll`)):(c.dataset[`${x}Scroll`]=v.toString(),c.dataset[`${S}Scroll`]=y.toString(),c.removeAttribute(`data-${x}-${S}-scroll`))}else{const _=v&&y?"both":v?x:y?S:"none";_!==l.current&&(s==null||s(_),l.current=_)}},h=()=>{const p=[{type:"vertical",prefix:"top",suffix:"bottom"},{type:"horizontal",prefix:"left",suffix:"right"}];for(const{type:v,prefix:y,suffix:x}of p)if(r===v||r==="both"){const S=v==="vertical"?c.scrollTop>a:c.scrollLeft>a,_=v==="vertical"?c.scrollTop+c.clientHeight+a<c.scrollHeight:c.scrollLeft+c.clientWidth+a<c.scrollWidth;f(v,S,_,y,x)}},m=()=>{["top","bottom","top-bottom","left","right","left-right"].forEach(p=>{c.removeAttribute(`data-${p}-scroll`)})};return h(),c.addEventListener("scroll",h),i!=="auto"&&(m(),i==="both"?(c.dataset.topBottomScroll=String(r==="vertical"),c.dataset.leftRightScroll=String(r==="horizontal")):(c.dataset.topBottomScroll="false",c.dataset.leftRightScroll="false",["top","bottom","left","right"].forEach(p=>{c.dataset[`${p}Scroll`]=String(i===p)}))),()=>{c.removeEventListener("scroll",h),m()}},[...o,n,i,r,s,e])}function iPe(t){var e;const[n,r]=zs(t,rz.variantKeys),{ref:i,as:a,children:s,className:o,style:l,size:c=40,offset:f=0,visibility:h="auto",isEnabled:m=!0,onVisibilityChange:p,...v}=n,y=a||"div",x=fi(i);rPe({domRef:x,offset:f,visibility:h,isEnabled:m,onVisibilityChange:p,updateDeps:[s],overflowCheck:(e=t.orientation)!=null?e:"vertical"});const S=R.useMemo(()=>rz({...r,className:o}),[gs(r),o]);return{Component:y,styles:S,domRef:x,children:s,getBaseProps:(N={})=>{var k;return{ref:x,className:S,"data-orientation":(k=t.orientation)!=null?k:"vertical",style:{"--scroll-shadow-size":`${c}px`,...l,...N.style},...v,...N}}}}var Rie=dr((t,e)=>{const{Component:n,children:r,getBaseProps:i}=iPe({...t,ref:e});return de.jsx(n,{...i(),children:r})});Rie.displayName="NextUI.ScrollShadow";var aPe=Rie;function sPe(t){const{collection:e,disabledKeys:n,selectionManager:r,selectionManager:{setSelectedKeys:i,selectedKeys:a,selectionMode:s}}=J$(t),o=R.useMemo(()=>!t.isLoading&&a.size!==0?Array.from(a).filter(Boolean).filter(c=>!e.getItem(c)):[],[a,e]),l=a.size!==0?Array.from(a).map(c=>e.getItem(c)).filter(Boolean):null;return o.length&&console.warn(`Select: Keys "${o.join(", ")}" passed to "selectedKeys" are not present in the collection.`),{collection:e,disabledKeys:n,selectionManager:r,selectionMode:s,selectedKeys:a,setSelectedKeys:i.bind(r),selectedItems:l}}function oPe(t){const[e,n]=R.useState(!1),[r,i]=R.useState(null),a=bie(t),s=sPe({...t,onSelectionChange:l=>{t.onSelectionChange!=null&&(l==="all"?t.onSelectionChange(new Set(s.collection.getKeys())):t.onSelectionChange(l)),t.selectionMode==="single"&&a.close()}}),o=Wne({...t,validationBehavior:"native",value:s.selectedKeys});return{...o,...s,...a,focusStrategy:r,close(){a.close()},open(l=null){s.collection.size!==0&&(i(l),a.open())},toggle(l=null){s.collection.size!==0&&(i(l),a.toggle(),o.commitValidation())},isFocused:e,setFocused:n}}function lPe(t,e,n){const{disallowEmptySelection:r,isDisabled:i}=t,a=xQ({usage:"search",sensitivity:"base"}),s=R.useMemo(()=>new pne(e.collection,e.disabledKeys,null,a),[e.collection,e.disabledKeys,a]),{menuTriggerProps:o,menuProps:l}=fie({isDisabled:i,type:"listbox"},e,n),c=P=>{if(e.selectionMode==="single")switch(P.key){case"ArrowLeft":{P.preventDefault();const O=e.selectedKeys.size>0?s.getKeyAbove(e.selectedKeys.values().next().value):s.getFirstKey();O&&e.setSelectedKeys([O]);break}case"ArrowRight":{P.preventDefault();const O=e.selectedKeys.size>0?s.getKeyBelow(e.selectedKeys.values().next().value):s.getFirstKey();O&&e.setSelectedKeys([O]);break}}},{typeSelectProps:f}=hne({keyboardDelegate:s,selectionManager:e.selectionManager,onTypeSelect(P){e.setSelectedKeys([P])}}),{isInvalid:h,validationErrors:m,validationDetails:p}=e.displayValidation,{labelProps:v,fieldProps:y,descriptionProps:x,errorMessageProps:S}=rre({...t,labelElementType:"span",isInvalid:h,errorMessage:t.errorMessage||m});f.onKeyDown=f.onKeyDownCapture,delete f.onKeyDownCapture;const _=vc(t,{labelable:!0}),N=kt(f,o,y),k=dc();return{labelProps:{...v,onClick:()=>{var P;t.isDisabled||((P=n.current)==null||P.focus(),Z5("keyboard"))}},triggerProps:kt(_,{...N,onKeyDown:ho(N.onKeyDown,c,t.onKeyDown),onKeyUp:t.onKeyUp,"aria-labelledby":[k,_["aria-label"]!==void 0?_["aria-labelledby"]!==void 0?_["aria-labelledby"]:N.id:N["aria-labelledby"]].join(" "),onFocus(P){e.isFocused||(t.onFocus&&t.onFocus(P),e.setFocused(!0))},onBlur(P){e.isOpen||(t.onBlur&&t.onBlur(P),e.setFocused(!1))}}),valueProps:{id:k},menuProps:{...l,disallowEmptySelection:r,autoFocus:e.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,onBlur:P=>{P.currentTarget.contains(P.relatedTarget)||(t.onBlur&&t.onBlur(P),e.setFocused(!1))},onFocus:l==null?void 0:l.onFocus,"aria-labelledby":[y["aria-labelledby"],N["aria-label"]&&!y["aria-labelledby"]?N.id:null].filter(Boolean).join(" ")},descriptionProps:x,errorMessageProps:S,isInvalid:h,validationErrors:m,validationDetails:p}}var Oie=new WeakMap;function uPe(t){var e,n,r,i,a;const s=Xa(),[o,l]=zs(t,iz.variantKeys),c=(n=(e=t.disableAnimation)!=null?e:s==null?void 0:s.disableAnimation)!=null?n:!1,{ref:f,as:h,label:m,name:p,isLoading:v,selectorIcon:y,isOpen:x,defaultOpen:S,onOpenChange:_,startContent:N,endContent:k,description:P,renderValue:O,onSelectionChange:A,placeholder:T,children:L,disallowEmptySelection:B=!1,selectionMode:W="single",spinnerRef:Y,scrollRef:V,popoverProps:I={},scrollShadowProps:H={},listboxProps:q={},spinnerProps:F={},validationState:J,onChange:Z,onClose:G,className:oe,classNames:ae,...te}=o,re=fi(V),X={popoverProps:kt({placement:"bottom",triggerScaleOnOpen:!1,offset:5,disableAnimation:c},I),scrollShadowProps:kt({ref:re,isEnabled:(r=t.showScrollIndicators)!=null?r:!0,hideScrollBar:!0,offset:15},H),listboxProps:kt({disableAnimation:c},q)},ce=h||"button",he=typeof ce=="string",ve=fi(f),Ne=R.useRef(null),ke=R.useRef(null),Te=R.useRef(null);let ye=oPe({...o,isOpen:x,selectionMode:W,disallowEmptySelection:B,children:L,isRequired:t.isRequired,isDisabled:t.isDisabled,defaultOpen:S,onOpenChange:ne=>{_==null||_(ne),ne||G==null||G()},onSelectionChange:ne=>{if(A==null||A(ne),Z&&typeof Z=="function"&&ve.current){const _e={target:{...ve.current,value:Array.from(ne).join(","),name:ve.current.name}};Z(_e)}}});ye={...ye,...t.isDisabled&&{disabledKeys:new Set([...ye.collection.getKeys()])}},rx(()=>{var ne;(ne=ve.current)!=null&&ne.value&&ye.setSelectedKeys(new Set([...ye.selectedKeys,ve.current.value]))},[ve.current]);const{labelProps:Ie,triggerProps:Re,valueProps:Ee,menuProps:$e,descriptionProps:He,errorMessageProps:gt,isInvalid:Ye,validationErrors:yt,validationDetails:_t}=lPe({...o,disallowEmptySelection:B,isDisabled:t.isDisabled},ye,Ne),St=t.isInvalid||J==="invalid"||Ye,{isPressed:Bt,buttonProps:Nt}=KN(Re,Ne),{focusProps:Dt,isFocused:Ae,isFocusVisible:je}=Bo(),{isHovered:tt,hoverProps:Ot}=Pl({isDisabled:t.isDisabled}),qe=R.useMemo(()=>{var ne;return(!t.labelPlacement||t.labelPlacement==="inside")&&!m?"outside":(ne=t.labelPlacement)!=null?ne:"inside"},[t.labelPlacement,m]),ft=!!T,Wt=qe==="outside-left"||qe==="outside"&&(ft||!!t.isMultiline),an=qe==="inside",Un=qe==="outside-left",pn=ye.isOpen||ft||!!((i=ye.selectedItems)!=null&&i.length)||!!N||!!k||!!t.isMultiline,ln=!!((a=ye.selectedItems)!=null&&a.length),Gt=!!m,Kt=tn(ae==null?void 0:ae.base,oe),Lt=R.useMemo(()=>iz({...l,isInvalid:St,labelPlacement:qe,disableAnimation:c,className:oe}),[gs(l),St,qe,c,oe]);R.useEffect(()=>{if(ye.isOpen&&Te.current&&ke.current){let ne=ke.current.querySelector("[aria-selected=true] [data-label=true]"),_e=re.current;if(ne&&_e&&ne.parentElement){let Le=(_e==null?void 0:_e.getBoundingClientRect()).height;_e.scrollTop=ne.parentElement.offsetTop-Le/2+ne.parentElement.clientHeight/2}}},[ye.isOpen,c]);const In=typeof o.errorMessage=="function"?o.errorMessage({isInvalid:St,validationErrors:yt,validationDetails:_t}):o.errorMessage||(yt==null?void 0:yt.join(" ")),Tn=!!P||!!In;R.useEffect(()=>{if(ye.isOpen&&Te.current&&Ne.current){let ne=Ne.current.getBoundingClientRect(),_e=Te.current;_e.style.width=ne.width+"px"}},[ye.isOpen]);const Wr=R.useCallback((ne={})=>({"data-slot":"base","data-filled":dt(pn),"data-has-value":dt(ln),"data-has-label":dt(Gt),"data-has-helper":dt(Tn),"data-invalid":dt(St),className:Lt.base({class:tn(Kt,ne.className)}),...ne}),[Lt,Tn,ln,Gt,pn,Kt]),Mr=R.useCallback((ne={})=>({ref:Ne,"data-slot":"trigger","data-open":dt(ye.isOpen),"data-disabled":dt(t==null?void 0:t.isDisabled),"data-focus":dt(Ae),"data-pressed":dt(Bt),"data-focus-visible":dt(je),"data-hover":dt(tt),className:Lt.trigger({class:ae==null?void 0:ae.trigger}),...kt(Nt,Dt,Ot,ps(te,{enabled:he}),ps(ne))}),[Lt,Ne,ye.isOpen,ae==null?void 0:ae.trigger,t==null?void 0:t.isDisabled,Ae,Bt,je,tt,Nt,Dt,Ot,te,he]),Hr=R.useCallback((ne={})=>({state:ye,triggerRef:Ne,selectRef:ve,selectionMode:W,label:t==null?void 0:t.label,name:t==null?void 0:t.name,isRequired:t==null?void 0:t.isRequired,autoComplete:t==null?void 0:t.autoComplete,isDisabled:t==null?void 0:t.isDisabled,onChange:Z,...ne}),[ye,W,t==null?void 0:t.label,t==null?void 0:t.autoComplete,t==null?void 0:t.name,t==null?void 0:t.isDisabled,Ne]),Ii=R.useCallback((ne={})=>({"data-slot":"label",className:Lt.label({class:tn(ae==null?void 0:ae.label,ne.className)}),...Ie,...ne}),[Lt,ae==null?void 0:ae.label,Ie]),Wi=R.useCallback((ne={})=>({"data-slot":"value",className:Lt.value({class:tn(ae==null?void 0:ae.value,ne.className)}),...Ee,...ne}),[Lt,ae==null?void 0:ae.value,Ee]),Mi=R.useCallback((ne={})=>({"data-slot":"listboxWrapper",className:Lt.listboxWrapper({class:tn(ae==null?void 0:ae.listboxWrapper,ne==null?void 0:ne.className)}),...kt(X.scrollShadowProps,ne)}),[Lt.listboxWrapper,ae==null?void 0:ae.listboxWrapper,X.scrollShadowProps]),zi=(ne={})=>({state:ye,ref:ke,"data-slot":"listbox",className:Lt.listbox({class:tn(ae==null?void 0:ae.listbox,ne==null?void 0:ne.className)}),...kt(X.listboxProps,ne,$e)}),xr=R.useCallback((ne={})=>{var _e,Be;const Le=kt(X.popoverProps,ne);return{state:ye,triggerRef:Ne,ref:Te,"data-slot":"popover",scrollRef:ke,triggerType:"listbox",classNames:{content:Lt.popoverContent({class:tn(ae==null?void 0:ae.popoverContent,ne.className)})},...Le,offset:ye.selectedItems&&ye.selectedItems.length>0?ye.selectedItems.length*1e-8+(((_e=X.popoverProps)==null?void 0:_e.offset)||0):(Be=X.popoverProps)==null?void 0:Be.offset,shouldCloseOnInteractOutside:Le!=null&&Le.shouldCloseOnInteractOutside?Le.shouldCloseOnInteractOutside:Ze=>$$(Ze,ve,ye)}},[Lt,ae==null?void 0:ae.popoverContent,X.popoverProps,Ne,ye,ye.selectedItems]),Vr=R.useCallback(()=>({"data-slot":"selectorIcon","aria-hidden":dt(!0),"data-open":dt(ye.isOpen),className:Lt.selectorIcon({class:ae==null?void 0:ae.selectorIcon})}),[Lt,ae==null?void 0:ae.selectorIcon,ye.isOpen]),$r=R.useCallback((ne={})=>({...ne,"data-slot":"innerWrapper",className:Lt.innerWrapper({class:tn(ae==null?void 0:ae.innerWrapper,ne==null?void 0:ne.className)})}),[Lt,ae==null?void 0:ae.innerWrapper]),qt=R.useCallback((ne={})=>({...ne,"data-slot":"helperWrapper",className:Lt.helperWrapper({class:tn(ae==null?void 0:ae.helperWrapper,ne==null?void 0:ne.className)})}),[Lt,ae==null?void 0:ae.helperWrapper]),Zn=R.useCallback((ne={})=>({...ne,...He,"data-slot":"description",className:Lt.description({class:tn(ae==null?void 0:ae.description,ne==null?void 0:ne.className)})}),[Lt,ae==null?void 0:ae.description]),ea=R.useCallback((ne={})=>({...ne,"data-slot":"mainWrapper",className:Lt.mainWrapper({class:tn(ae==null?void 0:ae.mainWrapper,ne==null?void 0:ne.className)})}),[Lt,ae==null?void 0:ae.mainWrapper]),ue=R.useCallback((ne={})=>({...ne,...gt,"data-slot":"errorMessage",className:Lt.errorMessage({class:tn(ae==null?void 0:ae.errorMessage,ne==null?void 0:ne.className)})}),[Lt,gt,ae==null?void 0:ae.errorMessage]),xe=R.useCallback((ne={})=>({"aria-hidden":dt(!0),"data-slot":"spinner",color:"current",size:"sm",...F,...ne,ref:Y,className:Lt.spinner({class:tn(ae==null?void 0:ae.spinner,ne==null?void 0:ne.className)})}),[Lt,Y,F,ae==null?void 0:ae.spinner]);return Oie.set(ye,{isDisabled:t==null?void 0:t.isDisabled,isRequired:t==null?void 0:t.isRequired,name:t==null?void 0:t.name,validationBehavior:"native"}),{Component:ce,domRef:ve,state:ye,label:m,name:p,triggerRef:Ne,isLoading:v,placeholder:T,startContent:N,endContent:k,description:P,selectorIcon:y,hasHelper:Tn,labelPlacement:qe,hasPlaceholder:ft,renderValue:O,selectionMode:W,disableAnimation:c,isOutsideLeft:Un,shouldLabelBeOutside:Wt,shouldLabelBeInside:an,isInvalid:St,errorMessage:In,getBaseProps:Wr,getTriggerProps:Mr,getLabelProps:Ii,getValueProps:Wi,getListboxProps:zi,getPopoverProps:xr,getSpinnerProps:xe,getMainWrapperProps:ea,getListboxWrapperProps:Mi,getHiddenSelectProps:Hr,getInnerWrapperProps:$r,getHelperWrapperProps:qt,getDescriptionProps:Zn,getErrorMessageProps:ue,getSelectorIconProps:Vr}}function cPe(t,e,n){var r,i;let a=Oie.get(e)||{},{autoComplete:s,name:o=a.name,isDisabled:l=a.isDisabled,selectionMode:c,onChange:f}=t,{validationBehavior:h,isRequired:m}=a,p=zxe(),{visuallyHiddenProps:v}=xee();return K5(t.selectRef,e.selectedKeys,e.setSelectedKeys),Fne({validationBehavior:h,focus:()=>{var y;return(y=n.current)==null?void 0:y.focus()}},e,t.selectRef),{containerProps:{...v,"aria-hidden":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{type:"text",tabIndex:p==null||e.isFocused||e.isOpen?-1:0,autoComplete:s,value:(r=[...e.selectedKeys].join(","))!=null?r:"",required:m,style:{fontSize:16},onFocus:()=>{var y;return(y=n.current)==null?void 0:y.focus()},disabled:l,onChange:()=>{}},selectProps:{name:o,tabIndex:-1,autoComplete:s,disabled:l,size:e.collection.size,value:c==="multiple"?[...e.selectedKeys].map(y=>String(y)):(i=[...e.selectedKeys][0])!=null?i:"",multiple:c==="multiple",onChange:y=>{e.setSelectedKeys(y.target.value),f==null||f(y)}}}}function dPe(t){var e;let{state:n,triggerRef:r,selectRef:i,label:a,name:s,isDisabled:o}=t,{containerProps:l,inputProps:c,selectProps:f}=cPe({...t,selectRef:i},n,r);return n.collection.size<=300?de.jsxs("div",{...l,"data-testid":"hidden-select-container",children:[de.jsx("input",{...c}),de.jsxs("label",{children:[a,de.jsxs("select",{...f,ref:i,children:[de.jsx("option",{}),[...n.collection.getKeys()].map(h=>{let m=n.collection.getItem(h);if((m==null?void 0:m.type)==="item")return de.jsx("option",{value:m.key,children:m.textValue},m.key)})]})]})]}):s?de.jsx("input",{autoComplete:f.autoComplete,disabled:o,name:s,type:"hidden",value:(e=[...n.selectedKeys].join(","))!=null?e:""}):null}function fPe(t){const{isSelected:e,disableAnimation:n,...r}=t;return de.jsx("svg",{"aria-hidden":"true","data-selected":e,role:"presentation",viewBox:"0 0 17 18",...r,children:de.jsx("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:e?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,style:n?{}:{transition:"stroke-dashoffset 200ms ease"}})})}const q$=new WeakMap;function hPe(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function mPe(t,e){let n=q$.get(t);if(!n)throw new Error("Unknown list");return`${n.id}-option-${hPe(e)}`}function pPe(t,e,n){let r=vc(t,{labelable:!0}),i=t.selectionBehavior||"toggle",a=t.linkBehavior||(i==="replace"?"action":"override");i==="toggle"&&a==="action"&&(a="override");let{listProps:s}=M$({...t,ref:n,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:a}),{focusWithinProps:o}=BN({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),l=dc(t.id);q$.set(e,{id:l,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:a});let{labelProps:c,fieldProps:f}=JN({...t,id:l,labelElementType:"span"});return{labelProps:c,listBoxProps:kt(r,o,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...kt(f,s)})}}function gPe(t,e,n){var r,i;let{key:a}=t,s=q$.get(e);var o;let l=(o=t.isDisabled)!==null&&o!==void 0?o:e.selectionManager.isDisabled(a);var c;let f=(c=t.isSelected)!==null&&c!==void 0?c:e.selectionManager.isSelected(a);var h;let m=(h=t.shouldSelectOnPressUp)!==null&&h!==void 0?h:s==null?void 0:s.shouldSelectOnPressUp;var p;let v=(p=t.shouldFocusOnHover)!==null&&p!==void 0?p:s==null?void 0:s.shouldFocusOnHover;var y;let x=(y=t.shouldUseVirtualFocus)!==null&&y!==void 0?y:s==null?void 0:s.shouldUseVirtualFocus;var S;let _=(S=t.isVirtualized)!==null&&S!==void 0?S:s==null?void 0:s.isVirtualized,N=fg(),k=fg(),P={role:"option","aria-disabled":l||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?f:void 0};bg()&&H5()||(P["aria-label"]=t["aria-label"],P["aria-labelledby"]=N,P["aria-describedby"]=k);let O=e.collection.getItem(a);if(_){let q=Number(O==null?void 0:O.index);P["aria-posinset"]=Number.isNaN(q)?void 0:q+1,P["aria-setsize"]=Sne(e.collection)}let A=s!=null&&s.onAction?()=>{var q;return s==null||(q=s.onAction)===null||q===void 0?void 0:q.call(s,a)}:void 0,{itemProps:T,isPressed:L,isFocused:B,hasAction:W,allowsSelection:Y}=I$({selectionManager:e.selectionManager,key:a,ref:n,shouldSelectOnPressUp:m,allowsDifferentPressOrigin:m&&v,isVirtualized:_,shouldUseVirtualFocus:x,isDisabled:l,onAction:A||!(O==null||(r=O.props)===null||r===void 0)&&r.onAction?ho(O==null||(i=O.props)===null||i===void 0?void 0:i.onAction,A):void 0,linkBehavior:s==null?void 0:s.linkBehavior}),{hoverProps:V}=Pl({isDisabled:l||!v,onHoverStart(){Tw()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(a))}}),I=vc(O==null?void 0:O.props);delete I.id;let H=G5(O==null?void 0:O.props);return{optionProps:{...P,...kt(I,T,V,H),id:mPe(e,a)},labelProps:{id:N},descriptionProps:{id:k},isFocused:B,isFocusVisible:B&&Tw(),isSelected:f,isDisabled:l,isPressed:L,allowsSelection:Y,hasAction:W}}function vPe(t){let{heading:e,"aria-label":n}=t,r=dc();return{itemProps:{role:"presentation"},headingProps:e?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":e?r:void 0}}}function yPe(t){var e,n;const r=Xa(),[i,a]=zs(t,aP.variantKeys),{as:s,item:o,state:l,description:c,startContent:f,endContent:h,isVirtualized:m,selectedIcon:p,className:v,classNames:y,autoFocus:x,onPress:S,onClick:_,shouldHighlightOnFocus:N,hideSelectedIcon:k=!1,isReadOnly:P=!1,...O}=i,A=(n=(e=t.disableAnimation)!=null?e:r==null?void 0:r.disableAnimation)!=null?n:!1,T=R.useRef(null),L=s||(t.href?"a":"li"),B=typeof L=="string",{rendered:W,key:Y}=o,V=l.disabledKeys.has(Y)||t.isDisabled,I=l.selectionManager.selectionMode!=="none",H=Dre(),{pressProps:q,isPressed:F}=Od({ref:T,isDisabled:V,onPress:S}),{isHovered:J,hoverProps:Z}=Pl({isDisabled:V}),{isFocusVisible:G,focusProps:oe}=Bo({autoFocus:x}),{isFocused:ae,isSelected:te,optionProps:re,labelProps:X,descriptionProps:ce}=gPe({key:Y,isDisabled:V,"aria-label":i["aria-label"],isVirtualized:m},l,T);let he=re;const ve=R.useMemo(()=>aP({...a,isDisabled:V,disableAnimation:A}),[gs(a),V,A]),Ne=tn(y==null?void 0:y.base,v);P&&(he=qZ(he));const ke=R.useMemo(()=>N&&ae?!0:H?J||F:J,[J,F,ae,H,N]),Te=($e={})=>({ref:T,...kt({onClick:_},he,P?{}:kt(oe,q),Z,ps(O,{enabled:B}),$e),"data-selectable":dt(I),"data-focus":dt(ae),"data-hover":dt(ke),"data-disabled":dt(V),"data-selected":dt(te),"data-pressed":dt(F),"data-focus-visible":dt(G),className:ve.base({class:tn(Ne,$e.className)})}),ye=($e={})=>({...kt(X,$e),"data-label":dt(!0),className:ve.title({class:y==null?void 0:y.title})}),Ie=($e={})=>({...kt(ce,$e),className:ve.description({class:y==null?void 0:y.description})}),Re=($e={})=>({...kt($e),className:ve.wrapper({class:y==null?void 0:y.wrapper})}),Ee=R.useCallback(($e={})=>({"aria-hidden":dt(!0),"data-disabled":dt(V),className:ve.selectedIcon({class:y==null?void 0:y.selectedIcon}),...$e}),[V,ve,y]);return{Component:L,domRef:T,slots:ve,classNames:y,isSelectable:I,isSelected:te,isDisabled:V,rendered:W,description:c,startContent:f,endContent:h,selectedIcon:p,hideSelectedIcon:k,disableAnimation:A,getItemProps:Te,getLabelProps:ye,getWrapperProps:Re,getDescriptionProps:Ie,getSelectedIconProps:Ee}}var jie=dr((t,e)=>{const{Component:n,rendered:r,description:i,isSelectable:a,isSelected:s,isDisabled:o,selectedIcon:l,startContent:c,endContent:f,hideSelectedIcon:h,disableAnimation:m,getItemProps:p,getLabelProps:v,getWrapperProps:y,getDescriptionProps:x,getSelectedIconProps:S}=yPe(t),_=R.useMemo(()=>{const N=de.jsx(fPe,{disableAnimation:m,isSelected:s});return typeof l=="function"?l({icon:N,isSelected:s,isDisabled:o}):l||N},[l,s,o,m]);return de.jsxs(n,{...p(),children:[c,i?de.jsxs("div",{...y(),children:[de.jsx("span",{...v(),children:r}),de.jsx("span",{...x(),children:i})]}):de.jsx("span",{...v(),children:r}),a&&!h&&de.jsx("span",{...S(),children:_}),f]})});jie.displayName="NextUI.ListboxItem";var Iie=jie,Mie=dr(({item:t,state:e,as:n,variant:r,color:i,disableAnimation:a,className:s,classNames:o,hideSelectedIcon:l,showDivider:c=!1,dividerProps:f={},itemClasses:h,title:m,...p},v)=>{const y=n||"li",x=R.useMemo(()=>fne(),[]),S=tn(o==null?void 0:o.base,s),_=tn(o==null?void 0:o.divider,f==null?void 0:f.className),{itemProps:N,headingProps:k,groupProps:P}=vPe({heading:t.rendered,"aria-label":t["aria-label"]});return de.jsxs(y,{"data-slot":"base",...kt(N,p),className:x.base({class:S}),children:[t.rendered&&de.jsx("span",{...k,className:x.heading({class:o==null?void 0:o.heading}),"data-slot":"heading",children:t.rendered}),de.jsxs("ul",{...P,className:x.group({class:o==null?void 0:o.group}),"data-has-title":!!t.rendered,"data-slot":"group",children:[[...t.childNodes].map(O=>{const{key:A,props:T}=O;let L=de.jsx(Iie,{classNames:h,color:i,disableAnimation:a,hideSelectedIcon:l,item:O,state:e,variant:r,...T},A);return O.wrapper&&(L=O.wrapper(L)),L}),c&&de.jsx(Bn,{as:"li",className:x.divider({class:_}),...f})]})]},t.key)});Mie.displayName="NextUI.ListboxSection";var bPe=Mie;function wPe(t){var e;const n=Xa(),{ref:r,as:i,state:a,variant:s,color:o,onAction:l,children:c,onSelectionChange:f,disableAnimation:h=(e=n==null?void 0:n.disableAnimation)!=null?e:!1,itemClasses:m,className:p,topContent:v,bottomContent:y,emptyContent:x="No items.",hideSelectedIcon:S=!1,hideEmptyContent:_=!1,shouldHighlightOnFocus:N=!1,classNames:k,...P}=t,O=i||"ul",A=typeof O=="string",T=fi(r),L=J$({...t,children:c,onSelectionChange:f}),B=a||L,{listBoxProps:W}=pPe({...t,onAction:l},B,T),Y=R.useMemo(()=>dne({className:p}),[p]),V=tn(k==null?void 0:k.base,p);return{Component:O,state:B,variant:s,color:o,slots:Y,classNames:k,topContent:v,bottomContent:y,emptyContent:x,hideEmptyContent:_,shouldHighlightOnFocus:N,hideSelectedIcon:S,disableAnimation:h,className:p,itemClasses:m,getBaseProps:(F={})=>({ref:T,"data-slot":"base",className:Y.base({class:V}),...ps(P,{enabled:A}),...F}),getListProps:(F={})=>({"data-slot":"list",className:Y.list({class:k==null?void 0:k.list}),...W,...F}),getEmptyContentProps:(F={})=>({"data-slot":"empty-content",children:x,className:Y.emptyContent({class:k==null?void 0:k.emptyContent}),...F})}}function Vie(t,e){const{Component:n,state:r,color:i,variant:a,itemClasses:s,getBaseProps:o,topContent:l,bottomContent:c,hideEmptyContent:f,hideSelectedIcon:h,shouldHighlightOnFocus:m,disableAnimation:p,getEmptyContentProps:v,getListProps:y}=wPe({...t,ref:e}),x=de.jsxs(n,{...y(),children:[!r.collection.size&&!f&&de.jsx("li",{children:de.jsx("div",{...v()})}),[...r.collection].map(S=>{var _;const N={color:i,item:S,state:r,variant:a,disableAnimation:p,hideSelectedIcon:h,...S.props};if(S.type==="section")return de.jsx(bPe,{...N,itemClasses:s},S.key);let k=de.jsx(Iie,{...N,classNames:kt(s,(_=S.props)==null?void 0:_.classNames),shouldHighlightOnFocus:m},S.key);return S.wrapper&&(k=S.wrapper(k)),k})]});return de.jsxs("div",{...o(),children:[l,x,c]})}Vie.displayName="NextUI.Listbox";var xPe=dr(Vie),SPe=WA,jn=SPe;function $ie(t,e){const{Component:n,state:r,label:i,hasHelper:a,isLoading:s,triggerRef:o,selectorIcon:l=de.jsx(JCe,{}),description:c,errorMessage:f,isInvalid:h,startContent:m,endContent:p,placeholder:v,renderValue:y,isOutsideLeft:x,disableAnimation:S,getBaseProps:_,getLabelProps:N,getTriggerProps:k,getValueProps:P,getListboxProps:O,getPopoverProps:A,getSpinnerProps:T,getMainWrapperProps:L,getInnerWrapperProps:B,getHiddenSelectProps:W,getHelperWrapperProps:Y,getListboxWrapperProps:V,getDescriptionProps:I,getErrorMessageProps:H,getSelectorIconProps:q}=uPe({...t,ref:e}),F=i?de.jsx("label",{...N(),children:i}):null,J=R.cloneElement(l,q()),Z=R.useMemo(()=>a?de.jsx("div",{...Y(),children:h&&f?de.jsx("div",{...H(),children:f}):c?de.jsx("div",{...I(),children:c}):null}):null,[a,h,f,c,Y,H,I]),G=R.useMemo(()=>{var te;if(!((te=r.selectedItems)!=null&&te.length))return v;if(y&&typeof y=="function"){const re=[...r.selectedItems].map(X=>({key:X.key,data:X.value,type:X.type,props:X.props,textValue:X.textValue,rendered:X.rendered,"aria-label":X["aria-label"]}));return y(re)}return r.selectedItems.map(re=>re.textValue).join(", ")},[r.selectedItems,y,v]),oe=R.useMemo(()=>s?de.jsx(L$,{...T()}):J,[s,J,T]),ae=R.useMemo(()=>r.isOpen?de.jsx(WDe,{...A(),children:de.jsx(aPe,{...V(),children:de.jsx(xPe,{...O()})})}):null,[r.isOpen,A,r,o,V,O]);return de.jsxs("div",{..._(),children:[de.jsx(dPe,{...W()}),x?F:null,de.jsxs("div",{...L(),children:[de.jsxs(n,{...k(),children:[x?null:F,de.jsxs("div",{...B(),children:[m,de.jsx("span",{...P(),children:G}),p&&r.selectedItems&&de.jsx(RA,{elementType:"span",children:","}),p]}),oe]}),Z]}),S?ae:de.jsx(nx,{children:ae})]})}var io=dr($ie);$ie.displayName="NextUI.Select";const X$=new WeakMap;function V3(t,e){let n=X$.get(t);if(!n)throw new Error("Unknown slider state");return`${n.id}-${e}`}function EPe(t,e,n){let{labelProps:r,fieldProps:i}=JN(t),a=t.orientation==="vertical";var s;X$.set(e,{id:(s=r.id)!==null&&s!==void 0?s:i.id,"aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"]});let{direction:o}=km(),{addGlobalListener:l,removeGlobalListener:c}=FN();const f=R.useRef(null),h=o==="rtl",m=R.useRef(null),{moveProps:p}=OQ({onMoveStart(){m.current=null},onMove({deltaX:S,deltaY:_}){let{height:N,width:k}=n.current.getBoundingClientRect(),P=a?N:k;m.current==null&&(m.current=e.getThumbPercent(f.current)*P);let O=a?_:S;if((a||h)&&(O=-O),m.current+=O,f.current!=null&&n.current){const A=Iy(m.current/P,0,1);e.setThumbPercent(f.current,A)}},onMoveEnd(){f.current!=null&&(e.setThumbDragging(f.current,!1),f.current=null)}});let v=R.useRef(void 0),y=(S,_,N,k)=>{if(n.current&&!t.isDisabled&&e.values.every((P,O)=>!e.isThumbDragging(O))){let{height:P,width:O,top:A,left:T}=n.current.getBoundingClientRect(),L=a?P:O,V=((a?k:N)-(a?A:T))/L;(o==="rtl"||a)&&(V=1-V);let I=e.getPercentValue(V),H,q=e.values.findIndex(F=>I-F<0);if(q===0)H=q;else if(q===-1)H=e.values.length-1;else{let F=e.values[q-1],J=e.values[q];Math.abs(F-I)<Math.abs(J-I)?H=q-1:H=q}H>=0&&e.isThumbEditable(H)?(S.preventDefault(),f.current=H,e.setFocusedThumb(H),v.current=_,e.setThumbDragging(f.current,!0),e.setThumbValue(H,I),l(window,"mouseup",x,!1),l(window,"touchend",x,!1),l(window,"pointerup",x,!1)):f.current=null}},x=S=>{var _,N;((N=S.pointerId)!==null&&N!==void 0?N:(_=S.changedTouches)===null||_===void 0?void 0:_[0].identifier)===v.current&&(f.current!=null&&(e.setThumbDragging(f.current,!1),f.current=null),c(window,"mouseup",x,!1),c(window,"touchend",x,!1),c(window,"pointerup",x,!1))};return"htmlFor"in r&&r.htmlFor&&(delete r.htmlFor,r.onClick=()=>{var S;(S=document.getElementById(V3(e,0)))===null||S===void 0||S.focus(),Z5("keyboard")}),{labelProps:r,groupProps:{role:"group",...i},trackProps:kt({onMouseDown(S){S.button!==0||S.altKey||S.ctrlKey||S.metaKey||y(S,void 0,S.clientX,S.clientY)},onPointerDown(S){S.pointerType==="mouse"&&(S.button!==0||S.altKey||S.ctrlKey||S.metaKey)||y(S,S.pointerId,S.clientX,S.clientY)},onTouchStart(S){y(S,S.changedTouches[0].identifier,S.changedTouches[0].clientX,S.changedTouches[0].clientY)},style:{position:"relative",touchAction:"none"}},p),outputProps:{htmlFor:e.values.map((S,_)=>V3(e,_)).join(" "),"aria-live":"off"}}}function NPe(t,e){let{index:n=0,isRequired:r,validationState:i,isInvalid:a,trackRef:s,inputRef:o,orientation:l=e.orientation,name:c}=t,f=t.isDisabled||e.isDisabled,h=l==="vertical",{direction:m}=km(),{addGlobalListener:p,removeGlobalListener:v}=FN(),y=X$.get(e);var x;const{labelProps:S,fieldProps:_}=JN({...t,id:V3(e,n),"aria-labelledby":`${y.id} ${(x=t["aria-labelledby"])!==null&&x!==void 0?x:""}`.trim()}),N=e.values[n],k=R.useCallback(()=>{o.current&&Lf(o.current)},[o]),P=e.focusedThumb===n;R.useEffect(()=>{P&&k()},[P,k]);let O=m==="rtl",A=R.useRef(null),{keyboardProps:T}=Q5({onKeyDown(q){let{getThumbMaxValue:F,getThumbMinValue:J,decrementThumb:Z,incrementThumb:G,setThumbValue:oe,setThumbDragging:ae,pageSize:te}=e;if(!/^(PageUp|PageDown|Home|End)$/.test(q.key)){q.continuePropagation();return}switch(q.preventDefault(),ae(n,!0),q.key){case"PageUp":G(n,te);break;case"PageDown":Z(n,te);break;case"Home":oe(n,J(n));break;case"End":oe(n,F(n));break}ae(n,!1)}}),{moveProps:L}=OQ({onMoveStart(){A.current=null,e.setThumbDragging(n,!0)},onMove({deltaX:q,deltaY:F,pointerType:J,shiftKey:Z}){const{getThumbPercent:G,setThumbPercent:oe,decrementThumb:ae,incrementThumb:te,step:re,pageSize:X}=e;let{width:ce,height:he}=s.current.getBoundingClientRect(),ve=h?he:ce;if(A.current==null&&(A.current=G(n)*ve),J==="keyboard")q>0&&O||q<0&&!O||F>0?ae(n,Z?X:re):te(n,Z?X:re);else{let Ne=h?F:q;(h||O)&&(Ne=-Ne),A.current+=Ne,oe(n,Iy(A.current/ve,0,1))}},onMoveEnd(){e.setThumbDragging(n,!1)}});e.setThumbEditable(n,!f);const{focusableProps:B}=UN(kt(t,{onFocus:()=>e.setFocusedThumb(n),onBlur:()=>e.setFocusedThumb(void 0)}),o);let W=R.useRef(void 0),Y=q=>{k(),W.current=q,e.setThumbDragging(n,!0),p(window,"mouseup",V,!1),p(window,"touchend",V,!1),p(window,"pointerup",V,!1)},V=q=>{var F,J;((J=q.pointerId)!==null&&J!==void 0?J:(F=q.changedTouches)===null||F===void 0?void 0:F[0].identifier)===W.current&&(k(),e.setThumbDragging(n,!1),v(window,"mouseup",V,!1),v(window,"touchend",V,!1),v(window,"pointerup",V,!1))},I=e.getThumbPercent(n);(h||m==="rtl")&&(I=1-I);let H=f?{}:kt(T,L,{onMouseDown:q=>{q.button!==0||q.altKey||q.ctrlKey||q.metaKey||Y()},onPointerDown:q=>{q.button!==0||q.altKey||q.ctrlKey||q.metaKey||Y(q.pointerId)},onTouchStart:q=>{Y(q.changedTouches[0].identifier)}});return K5(o,N,q=>{e.setThumbValue(n,q)}),{inputProps:kt(B,_,{type:"range",tabIndex:f?void 0:0,min:e.getThumbMinValue(n),max:e.getThumbMaxValue(n),step:e.step,value:N,name:c,disabled:f,"aria-orientation":l,"aria-valuetext":e.getThumbValueLabel(n),"aria-required":r||void 0,"aria-invalid":a||i==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-describedby":[y["aria-describedby"],t["aria-describedby"]].filter(Boolean).join(" "),"aria-details":[y["aria-details"],t["aria-details"]].filter(Boolean).join(" "),onChange:q=>{e.setThumbValue(n,parseFloat(q.target.value))}}),thumbProps:{...H,style:{position:"absolute",[h?"top":"left"]:`${I*100}%`,transform:"translate(-50%, -50%)",touchAction:"none"}},labelProps:S,isDragging:e.isThumbDragging(n),isDisabled:f,isFocused:P}}function _Pe(t){const{ref:e,as:n,state:r,index:i,name:a,trackRef:s,className:o,tooltipProps:l,isVertical:c,showTooltip:f,formatOptions:h,renderThumb:m,...p}=t,v=n||"div",y=fi(e),x=R.useRef(null),S=Y5(h),{thumbProps:_,inputProps:N,isDragging:k,isFocused:P}=NPe({index:i,trackRef:s,inputRef:x,name:a,...p},r),{hoverProps:O,isHovered:A}=Pl({isDisabled:r.isDisabled}),{focusProps:T,isFocusVisible:L}=Bo(),{pressProps:B,isPressed:W}=Od({isDisabled:r.isDisabled});return{Component:v,index:i,showTooltip:f,renderThumb:m,getThumbProps:(H={})=>({ref:y,"data-slot":"thumb","data-hover":dt(A),"data-pressed":dt(W),"data-dragging":dt(k),"data-focused":dt(P),"data-focus-visible":dt(L),...kt(_,B,O,p),className:o,...H}),getTooltipProps:()=>{const H=S?S.format(r.values[i??0]):r.values[i??0];return{...l,placement:l!=null&&l.placement?l==null?void 0:l.placement:c?"right":"top",content:l!=null&&l.content?l==null?void 0:l.content:H,updatePositionDeps:[k,A,H],isOpen:(l==null?void 0:l.isOpen)!==void 0?l==null?void 0:l.isOpen:A||k}},getInputProps:(H={})=>({ref:x,...kt(N,T),...H})}}var Lie=dr((t,e)=>{const{Component:n,index:r,renderThumb:i,showTooltip:a,getTooltipProps:s,getThumbProps:o,getInputProps:l}=_Pe({...t,ref:e}),c={...o(),index:r,children:de.jsx(RA,{children:de.jsx("input",{...l()})})},f=XV({Component:n,props:c,renderCustom:i});return a?de.jsx(so,{...s(),children:f}):f});Lie.displayName="NextUI.SliderThumb";var CPe=Lie;const TPe=0,DPe=100,kPe=1;function PPe(t){const{isDisabled:e=!1,minValue:n=TPe,maxValue:r=DPe,numberFormatter:i,step:a=kPe,orientation:s="horizontal"}=t;let o=R.useMemo(()=>{let oe=(r-n)/10;return oe=uS(oe,0,oe+a,a),Math.max(oe,a)},[a,r,n]),l=R.useCallback(oe=>oe==null?void 0:oe.map((ae,te)=>{let re=te===0?n:ae[te-1],X=te===oe.length-1?r:ae[te+1];return uS(ae,re,X,a)}),[n,r,a]),c=R.useMemo(()=>l(Yz(t.value)),[t.value]),f=R.useMemo(()=>{var oe;return l((oe=Yz(t.defaultValue))!==null&&oe!==void 0?oe:[n])},[t.defaultValue,n]),h=Jz(t.value,t.defaultValue,t.onChange),m=Jz(t.value,t.defaultValue,t.onChangeEnd);const[p,v]=Mg(c,f,h),[y,x]=R.useState(new Array(p.length).fill(!1)),S=R.useRef(new Array(p.length).fill(!0)),[_,N]=R.useState(void 0),k=R.useRef(p),P=R.useRef(y);let O=oe=>{k.current=oe,v(oe)},A=oe=>{P.current=oe,x(oe)};function T(oe){return(oe-n)/(r-n)}function L(oe){return oe===0?n:p[oe-1]}function B(oe){return oe===p.length-1?r:p[oe+1]}function W(oe){return S.current[oe]}function Y(oe,ae){S.current[oe]=ae}function V(oe,ae){if(e||!W(oe))return;const te=L(oe),re=B(oe);ae=uS(ae,te,re,a);let X=Kz(k.current,oe,ae);O(X)}function I(oe,ae){if(e||!W(oe))return;ae&&(k.current=p);const te=P.current[oe];P.current=Kz(P.current,oe,ae),A(P.current),m&&te&&!P.current.some(Boolean)&&m(k.current)}function H(oe){return i.format(oe)}function q(oe,ae){V(oe,J(ae))}function F(oe){return Math.round((oe-n)/a)*a+n}function J(oe){const ae=oe*(r-n)+n;return Iy(F(ae),n,r)}function Z(oe,ae=1){let te=Math.max(ae,a);V(oe,uS(p[oe]+te,n,r,a))}function G(oe,ae=1){let te=Math.max(ae,a);V(oe,uS(p[oe]-te,n,r,a))}return{values:p,getThumbValue:oe=>p[oe],setThumbValue:V,setThumbPercent:q,isThumbDragging:oe=>y[oe],setThumbDragging:I,focusedThumb:_,setFocusedThumb:N,getThumbPercent:oe=>T(p[oe]),getValuePercent:T,getThumbValueLabel:oe=>H(p[oe]),getFormattedValue:H,getThumbMinValue:L,getThumbMaxValue:B,getPercentValue:J,isThumbEditable:W,setThumbEditable:Y,incrementThumb:Z,decrementThumb:G,step:a,pageSize:o,orientation:s,isDisabled:e}}function Kz(t,e,n){return t[e]===n?t:[...t.slice(0,e),n,...t.slice(e+1)]}function Yz(t){if(t!=null)return Array.isArray(t)?t:[t]}function Jz(t,e,n){return r=>{typeof t=="number"||typeof e=="number"?n==null||n(r[0]):n==null||n(r)}}function APe(t){var e,n,r,i;const a=Xa(),[s,o]=zs(t,LI.variantKeys),{ref:l,as:c,name:f,label:h,formatOptions:m,value:p,maxValue:v=100,minValue:y=0,step:x=1,showSteps:S=!1,showTooltip:_=!1,orientation:N="horizontal",marks:k=[],startContent:P,endContent:O,fillOffset:A,className:T,classNames:L,renderThumb:B,renderLabel:W,renderValue:Y,onChange:V,onChangeEnd:I,getValue:H,tooltipValueFormatOptions:q=m,tooltipProps:F={},...J}=s,Z=c||"div",G=typeof Z=="string",oe=(n=(e=t==null?void 0:t.disableAnimation)!=null?e:a==null?void 0:a.disableAnimation)!=null?n:!1,ae=fi(l),te=R.useRef(null),re=Y5(m),{direction:X}=km(),ce=R.useCallback(Gt=>Math.min(Math.max(Gt,y),v),[y,v]),he=R.useMemo(()=>{if(p!==void 0)return Array.isArray(p)?p.map(ce):ce(p)},[p,ce]),ve=PPe({...J,value:he,isDisabled:(r=t==null?void 0:t.isDisabled)!=null?r:!1,orientation:N,step:x,minValue:y,maxValue:v,numberFormatter:re,onChange:V,onChangeEnd:I}),Ne={offset:5,delay:0,size:"sm",showArrow:!0,color:t!=null&&t.color?t==null?void 0:t.color:(i=LI.defaultVariants)==null?void 0:i.color,isDisabled:t.isDisabled,...F},{groupProps:ke,trackProps:Te,labelProps:ye,outputProps:Ie}=EPe(t,ve,te),{isHovered:Re,hoverProps:Ee}=Pl({isDisabled:t.isDisabled}),$e=tn(L==null?void 0:L.base,T),He=N==="vertical",gt=(k==null?void 0:k.length)>0,Ye=A===void 0?ve.values.length===1:!1,yt=R.useMemo(()=>LI({...o,hasMarks:gt,disableAnimation:oe,hasSingleThumb:Ye,isVertical:He,className:T}),[gs(o),He,oe,Ye,gt,T]),[_t,St]=[ve.values.length>1?ve.getThumbPercent(0):A!==void 0?ve.getValuePercent(A):0,ve.getThumbPercent(ve.values.length-1)].sort(),Bt=ve.values.length===1?re.format(ve.values[0]):re.formatRange(ve.values[0],ve.values[ve.values.length-1]),Nt=S?Math.floor((v-y)/x)+1:0;return{Component:Z,state:ve,value:Bt,domRef:ae,label:h,steps:Nt,marks:k,startContent:P,endContent:O,getStepProps:Gt=>{const Kt=ve.getValuePercent(Gt*x+y);return{className:yt.step({class:L==null?void 0:L.step}),"data-slot":"step","data-in-range":Kt<=St&&Kt>=_t,style:{[He?"bottom":X==="rtl"?"right":"left"]:`${Kt*100}%`}}},getBaseProps:(Gt={})=>({ref:ae,"data-orientation":ve.orientation,"data-slot":"base","data-hover":Re,className:yt.base({class:$e}),...kt(ke,Ee,ps(J,{enabled:G}),ps(Gt))}),getValue:H,renderLabel:W,renderValue:Y,getTrackWrapperProps:(Gt={})=>({"data-slot":"track-wrapper",className:yt.trackWrapper({class:L==null?void 0:L.trackWrapper}),...Gt}),getLabelWrapperProps:(Gt={})=>({className:yt.labelWrapper({class:L==null?void 0:L.labelWrapper}),"data-slot":"labelWrapper",...Gt}),getLabelProps:(Gt={})=>({"data-slot":"label",className:yt.label({class:L==null?void 0:L.label}),children:h,...ye,...Gt}),getValueProps:(Gt={})=>({"data-slot":"value",className:yt.value({class:L==null?void 0:L.value}),children:H&&typeof H=="function"?H(ve.values):Bt,...Ie,...Gt}),getTrackProps:(Gt={})=>({ref:te,"data-slot":"track","data-thumb-hidden":!!(t!=null&&t.hideThumb),"data-vertical":He,className:yt.track({class:L==null?void 0:L.track}),...Te,...Gt}),getFillerProps:(Gt={})=>({"data-slot":"filler",className:yt.filler({class:L==null?void 0:L.filler}),...Gt,style:{...Gt.style,[He?"bottom":X==="rtl"?"right":"left"]:`${_t*100}%`,...He?{height:`${(St-_t)*100}%`}:{width:`${(St-_t)*100}%`}}}),getThumbProps:Gt=>({name:f,index:Gt,state:ve,trackRef:te,orientation:N,isVertical:He,tooltipProps:Ne,showTooltip:_,renderThumb:B,formatOptions:q,className:yt.thumb({class:L==null?void 0:L.thumb})}),getMarkProps:Gt=>{const Kt=ve.getValuePercent(Gt.value);return{className:yt.mark({class:L==null?void 0:L.mark}),"data-slot":"mark","data-in-range":Kt<=St&&Kt>=_t,style:{[He?"bottom":X==="rtl"?"right":"left"]:`${Kt*100}%`},onMouseDown:Lt=>Lt.stopPropagation(),onPointerDown:Lt=>Lt.stopPropagation(),onClick:Lt=>{if(Lt.stopPropagation(),ve.values.length===1)ve.setThumbPercent(0,Kt);else{const In=ve.values[0],Tn=ve.values[1];Gt.value<In?ve.setThumbPercent(0,Kt):Gt.value>Tn?ve.setThumbPercent(1,Kt):Math.abs(Gt.value-In)<Math.abs(Gt.value-Tn)?ve.setThumbPercent(0,Kt):ve.setThumbPercent(1,Kt)}}}},getStartContentProps:(Gt={})=>({"data-slot":"startContent",className:yt.startContent({class:L==null?void 0:L.startContent}),...Gt}),getEndContentProps:(Gt={})=>({"data-slot":"endContent",className:yt.endContent({class:L==null?void 0:L.endContent}),...Gt})}}var Fie=dr((t,e)=>{const{Component:n,state:r,label:i,steps:a,marks:s,startContent:o,endContent:l,getStepProps:c,getBaseProps:f,renderValue:h,renderLabel:m,getTrackWrapperProps:p,getLabelWrapperProps:v,getLabelProps:y,getValueProps:x,getTrackProps:S,getFillerProps:_,getThumbProps:N,getMarkProps:k,getStartContentProps:P,getEndContentProps:O}=APe({...t,ref:e});return de.jsxs(n,{...f(),children:[i&&de.jsxs("div",{...v(),children:[XV({Component:"label",props:y(),renderCustom:m}),XV({Component:"output",props:x(),renderCustom:h})]}),de.jsxs("div",{...p(),children:[o&&de.jsx("div",{...P(),children:o}),de.jsxs("div",{...S(),children:[de.jsx("div",{..._()}),Number.isFinite(a)&&Array.from({length:a},(A,T)=>de.jsx("div",{...c(T)},T)),r.values.map((A,T)=>de.jsx(CPe,{...N(T)},T)),(s==null?void 0:s.length)>0&&s.map((A,T)=>de.jsx("div",{...k(A),children:A.label},T))]}),l&&de.jsx("div",{...O(),children:l})]})]})});Fie.displayName="NextUI.Slider";var YA=Fie;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xi(){return Xi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xi.apply(this,arguments)}var Da;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Da||(Da={}));const qz="popstate";function RPe(t){t===void 0&&(t={});function e(i,a){let{pathname:s="/",search:o="",hash:l=""}=Pm(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),eN("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof a=="string"?a:_g(a))}function r(i,a){qa(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return jPe(e,n,r,t)}function vr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OPe(){return Math.random().toString(36).substr(2,8)}function Xz(t,e){return{usr:t.state,key:t.key,idx:e}}function eN(t,e,n,r){return n===void 0&&(n=null),Xi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pm(e):e,{state:n,key:e&&e.key||r||OPe()})}function _g(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Pm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function jPe(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=Da.Pop,l=null,c=f();c==null&&(c=0,s.replaceState(Xi({},s.state,{idx:c}),""));function f(){return(s.state||{idx:null}).idx}function h(){o=Da.Pop;let x=f(),S=x==null?null:x-c;c=x,l&&l({action:o,location:y.location,delta:S})}function m(x,S){o=Da.Push;let _=eN(y.location,x,S);n&&n(_,x),c=f()+1;let N=Xz(_,c),k=y.createHref(_);try{s.pushState(N,"",k)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(k)}a&&l&&l({action:o,location:y.location,delta:1})}function p(x,S){o=Da.Replace;let _=eN(y.location,x,S);n&&n(_,x),c=f();let N=Xz(_,c),k=y.createHref(_);s.replaceState(N,"",k),a&&l&&l({action:o,location:y.location,delta:0})}function v(x){let S=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof x=="string"?x:_g(x);return _=_.replace(/ $/,"%20"),vr(S,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,S)}let y={get action(){return o},get location(){return t(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(qz,h),l=x,()=>{i.removeEventListener(qz,h),l=null}},createHref(x){return e(i,x)},createURL:v,encodeLocation(x){let S=v(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:p,go(x){return s.go(x)}};return y}var vi;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vi||(vi={}));const IPe=new Set(["lazy","caseSensitive","path","id","index","children"]);function MPe(t){return t.index===!0}function tN(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,a)=>{let s=[...n,String(a)],o=typeof i.id=="string"?i.id:s.join("-");if(vr(i.index!==!0||!i.children,"Cannot specify children on an index route"),vr(!r[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),MPe(i)){let l=Xi({},i,e(i),{id:o});return r[o]=l,l}else{let l=Xi({},i,e(i),{id:o,children:void 0});return r[o]=l,i.children&&(l.children=tN(i.children,e,s,r)),l}})}function ly(t,e,n){return n===void 0&&(n="/"),uk(t,e,n,!1)}function uk(t,e,n,r){let i=typeof e=="string"?Pm(e):e,a=Pd(i.pathname||"/",n);if(a==null)return null;let s=Bie(t);$Pe(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=JPe(a);o=KPe(s[l],c,r)}return o}function VPe(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Bie(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(vr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Hf([r,l.relativePath]),f=n.concat(l);a.children&&a.children.length>0&&(vr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Bie(a.children,e,f,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:HPe(c,a.index),routesMeta:f})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of Uie(a.path))i(a,s,l)}),e}function Uie(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=Uie(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function $Pe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:GPe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const LPe=/^:[\w-]+$/,FPe=3,BPe=2,UPe=1,WPe=10,zPe=-2,Zz=t=>t==="*";function HPe(t,e){let n=t.split("/"),r=n.length;return n.some(Zz)&&(r+=zPe),e&&(r+=BPe),n.filter(i=>!Zz(i)).reduce((i,a)=>i+(LPe.test(a)?FPe:a===""?UPe:WPe),r)}function GPe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function KPe(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=dP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),m=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=dP({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Hf([a,h.pathname]),pathnameBase:ZPe(Hf([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=Hf([a,h.pathnameBase]))}return s}function dP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=YPe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,f,h)=>{let{paramName:m,isOptional:p}=f;if(m==="*"){let y=o[h]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[h];return p&&!v?c[m]=void 0:c[m]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:t}}function YPe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function JPe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qa(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qPe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Pm(t):t;return{pathname:n?n.startsWith("/")?n:XPe(n,e):e,search:QPe(r),hash:eAe(i)}}function XPe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function JI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Wie(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Z$(t,e){let n=Wie(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Q$(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Pm(t):(i=Xi({},t),vr(!i.pathname||!i.pathname.includes("?"),JI("?","pathname","search",i)),vr(!i.pathname||!i.pathname.includes("#"),JI("#","pathname","hash",i)),vr(!i.search||!i.search.includes("#"),JI("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=qPe(i,o),c=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const Hf=t=>t.join("/").replace(/\/\/+/g,"/"),ZPe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QPe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class fP{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function JA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zie=["post","put","patch","delete"],tAe=new Set(zie),nAe=["get",...zie],rAe=new Set(nAe),iAe=new Set([301,302,303,307,308]),aAe=new Set([307,308]),qI={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sAe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bS={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},eL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oAe=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Hie="remix-router-transitions";function lAe(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;vr(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let ue=t.detectErrorBoundary;i=xe=>({hasErrorBoundary:ue(xe)})}else i=oAe;let a={},s=tN(t.routes,i,void 0,a),o,l=t.basename||"/",c=t.unstable_dataStrategy||hAe,f=t.unstable_patchRoutesOnNavigation,h=Xi({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,p=new Set,v=1e3,y=new Set,x=null,S=null,_=null,N=t.hydrationData!=null,k=ly(s,t.history.location,l),P=null;if(k==null&&!f){let ue=Vo(404,{pathname:t.history.location.pathname}),{matches:xe,route:ne}=lH(s);k=xe,P={[ne.id]:ue}}k&&!t.hydrationData&&Vr(k,s,t.history.location.pathname).active&&(k=null);let O;if(k)if(k.some(ue=>ue.route.lazy))O=!1;else if(!k.some(ue=>ue.route.loader))O=!0;else if(h.v7_partialHydration){let ue=t.hydrationData?t.hydrationData.loaderData:null,xe=t.hydrationData?t.hydrationData.errors:null,ne=_e=>_e.route.loader?typeof _e.route.loader=="function"&&_e.route.loader.hydrate===!0?!1:ue&&ue[_e.route.id]!==void 0||xe&&xe[_e.route.id]!==void 0:!0;if(xe){let _e=k.findIndex(Be=>xe[Be.route.id]!==void 0);O=k.slice(0,_e+1).every(ne)}else O=k.every(ne)}else O=t.hydrationData!=null;else if(O=!1,k=[],h.v7_partialHydration){let ue=Vr(null,s,t.history.location.pathname);ue.active&&ue.matches&&(k=ue.matches)}let A,T={historyAction:t.history.action,location:t.history.location,matches:k,initialized:O,navigation:qI,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||P,fetchers:new Map,blockers:new Map},L=Da.Pop,B=!1,W,Y=!1,V=new Map,I=null,H=!1,q=!1,F=[],J=new Set,Z=new Map,G=0,oe=-1,ae=new Map,te=new Set,re=new Map,X=new Map,ce=new Set,he=new Map,ve=new Map,Ne=new Map,ke=!1;function Te(){if(m=t.history.listen(ue=>{let{action:xe,location:ne,delta:_e}=ue;if(ke){ke=!1;return}qa(ve.size===0||_e!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Be=Wr({currentLocation:T.location,nextLocation:ne,historyAction:xe});if(Be&&_e!=null){ke=!0,t.history.go(_e*-1),Tn(Be,{state:"blocked",location:ne,proceed(){Tn(Be,{state:"proceeding",proceed:void 0,reset:void 0,location:ne}),t.history.go(_e)},reset(){let Le=new Map(T.blockers);Le.set(Be,bS),Re({blockers:Le})}});return}return gt(xe,ne)}),n){CAe(e,V);let ue=()=>TAe(e,V);e.addEventListener("pagehide",ue),I=()=>e.removeEventListener("pagehide",ue)}return T.initialized||gt(Da.Pop,T.location,{initialHydration:!0}),A}function ye(){m&&m(),I&&I(),p.clear(),W&&W.abort(),T.fetchers.forEach((ue,xe)=>an(xe)),T.blockers.forEach((ue,xe)=>In(xe))}function Ie(ue){return p.add(ue),()=>p.delete(ue)}function Re(ue,xe){xe===void 0&&(xe={}),T=Xi({},T,ue);let ne=[],_e=[];h.v7_fetcherPersist&&T.fetchers.forEach((Be,Le)=>{Be.state==="idle"&&(ce.has(Le)?_e.push(Le):ne.push(Le))}),[...p].forEach(Be=>Be(T,{deletedFetchers:_e,unstable_viewTransitionOpts:xe.viewTransitionOpts,unstable_flushSync:xe.flushSync===!0})),h.v7_fetcherPersist&&(ne.forEach(Be=>T.fetchers.delete(Be)),_e.forEach(Be=>an(Be)))}function Ee(ue,xe,ne){var _e,Be;let{flushSync:Le}=ne===void 0?{}:ne,Ze=T.actionData!=null&&T.navigation.formMethod!=null&&hd(T.navigation.formMethod)&&T.navigation.state==="loading"&&((_e=ue.state)==null?void 0:_e._isRedirect)!==!0,We;xe.actionData?Object.keys(xe.actionData).length>0?We=xe.actionData:We=null:Ze?We=T.actionData:We=null;let wt=xe.loaderData?sH(T.loaderData,xe.loaderData,xe.matches||[],xe.errors):T.loaderData,ht=T.blockers;ht.size>0&&(ht=new Map(ht),ht.forEach((Zt,sn)=>ht.set(sn,bS)));let Pt=B===!0||T.navigation.formMethod!=null&&hd(T.navigation.formMethod)&&((Be=ue.state)==null?void 0:Be._isRedirect)!==!0;o&&(s=o,o=void 0),H||L===Da.Pop||(L===Da.Push?t.history.push(ue,ue.state):L===Da.Replace&&t.history.replace(ue,ue.state));let Ut;if(L===Da.Pop){let Zt=V.get(T.location.pathname);Zt&&Zt.has(ue.pathname)?Ut={currentLocation:T.location,nextLocation:ue}:V.has(ue.pathname)&&(Ut={currentLocation:ue,nextLocation:T.location})}else if(Y){let Zt=V.get(T.location.pathname);Zt?Zt.add(ue.pathname):(Zt=new Set([ue.pathname]),V.set(T.location.pathname,Zt)),Ut={currentLocation:T.location,nextLocation:ue}}Re(Xi({},xe,{actionData:We,loaderData:wt,historyAction:L,location:ue,initialized:!0,navigation:qI,revalidation:"idle",restoreScrollPosition:xr(ue,xe.matches||T.matches),preventScrollReset:Pt,blockers:ht}),{viewTransitionOpts:Ut,flushSync:Le===!0}),L=Da.Pop,B=!1,Y=!1,H=!1,q=!1,F=[]}async function $e(ue,xe){if(typeof ue=="number"){t.history.go(ue);return}let ne=$3(T.location,T.matches,l,h.v7_prependBasename,ue,h.v7_relativeSplatPath,xe==null?void 0:xe.fromRouteId,xe==null?void 0:xe.relative),{path:_e,submission:Be,error:Le}=Qz(h.v7_normalizeFormMethod,!1,ne,xe),Ze=T.location,We=eN(T.location,_e,xe&&xe.state);We=Xi({},We,t.history.encodeLocation(We));let wt=xe&&xe.replace!=null?xe.replace:void 0,ht=Da.Push;wt===!0?ht=Da.Replace:wt===!1||Be!=null&&hd(Be.formMethod)&&Be.formAction===T.location.pathname+T.location.search&&(ht=Da.Replace);let Pt=xe&&"preventScrollReset"in xe?xe.preventScrollReset===!0:void 0,Ut=(xe&&xe.unstable_flushSync)===!0,Zt=Wr({currentLocation:Ze,nextLocation:We,historyAction:ht});if(Zt){Tn(Zt,{state:"blocked",location:We,proceed(){Tn(Zt,{state:"proceeding",proceed:void 0,reset:void 0,location:We}),$e(ue,xe)},reset(){let sn=new Map(T.blockers);sn.set(Zt,bS),Re({blockers:sn})}});return}return await gt(ht,We,{submission:Be,pendingError:Le,preventScrollReset:Pt,replace:xe&&xe.replace,enableViewTransition:xe&&xe.unstable_viewTransition,flushSync:Ut})}function He(){if(Ot(),Re({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){gt(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}gt(L||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation})}}async function gt(ue,xe,ne){W&&W.abort(),W=null,L=ue,H=(ne&&ne.startUninterruptedRevalidation)===!0,zi(T.location,T.matches),B=(ne&&ne.preventScrollReset)===!0,Y=(ne&&ne.enableViewTransition)===!0;let _e=o||s,Be=ne&&ne.overrideNavigation,Le=ly(_e,xe,l),Ze=(ne&&ne.flushSync)===!0,We=Vr(Le,_e,xe.pathname);if(We.active&&We.matches&&(Le=We.matches),!Le){let{error:cn,notFoundMatches:hr,route:Dn}=Mr(xe.pathname);Ee(xe,{matches:hr,loaderData:{},errors:{[Dn.id]:cn}},{flushSync:Ze});return}if(T.initialized&&!q&&bAe(T.location,xe)&&!(ne&&ne.submission&&hd(ne.submission.formMethod))){Ee(xe,{matches:Le},{flushSync:Ze});return}W=new AbortController;let wt=p0(t.history,xe,W.signal,ne&&ne.submission),ht;if(ne&&ne.pendingError)ht=[aw(Le).route.id,{type:vi.error,error:ne.pendingError}];else if(ne&&ne.submission&&hd(ne.submission.formMethod)){let cn=await Ye(wt,xe,ne.submission,Le,We.active,{replace:ne.replace,flushSync:Ze});if(cn.shortCircuited)return;if(cn.pendingActionResult){let[hr,Dn]=cn.pendingActionResult;if(uu(Dn)&&JA(Dn.error)&&Dn.error.status===404){W=null,Ee(xe,{matches:cn.matches,loaderData:{},errors:{[hr]:Dn.error}});return}}Le=cn.matches||Le,ht=cn.pendingActionResult,Be=XI(xe,ne.submission),Ze=!1,We.active=!1,wt=p0(t.history,wt.url,wt.signal)}let{shortCircuited:Pt,matches:Ut,loaderData:Zt,errors:sn}=await yt(wt,xe,Le,We.active,Be,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,Ze,ht);Pt||(W=null,Ee(xe,Xi({matches:Ut||Le},oH(ht),{loaderData:Zt,errors:sn})))}async function Ye(ue,xe,ne,_e,Be,Le){Le===void 0&&(Le={}),Ot();let Ze=NAe(xe,ne);if(Re({navigation:Ze},{flushSync:Le.flushSync===!0}),Be){let ht=await $r(_e,xe.pathname,ue.signal);if(ht.type==="aborted")return{shortCircuited:!0};if(ht.type==="error"){let{boundaryId:Pt,error:Ut}=Hr(xe.pathname,ht);return{matches:ht.partialMatches,pendingActionResult:[Pt,{type:vi.error,error:Ut}]}}else if(ht.matches)_e=ht.matches;else{let{notFoundMatches:Pt,error:Ut,route:Zt}=Mr(xe.pathname);return{matches:Pt,pendingActionResult:[Zt.id,{type:vi.error,error:Ut}]}}}let We,wt=QS(_e,xe);if(!wt.route.action&&!wt.route.lazy)We={type:vi.error,error:Vo(405,{method:ue.method,pathname:xe.pathname,routeId:wt.route.id})};else if(We=(await je("action",ue,[wt],_e))[0],ue.signal.aborted)return{shortCircuited:!0};if(vy(We)){let ht;return Le&&Le.replace!=null?ht=Le.replace:ht=rH(We.response.headers.get("Location"),new URL(ue.url),l)===T.location.pathname+T.location.search,await Ae(ue,We,{submission:ne,replace:ht}),{shortCircuited:!0}}if(gy(We))throw Vo(400,{type:"defer-action"});if(uu(We)){let ht=aw(_e,wt.route.id);return(Le&&Le.replace)!==!0&&(L=Da.Push),{matches:_e,pendingActionResult:[ht.route.id,We]}}return{matches:_e,pendingActionResult:[wt.route.id,We]}}async function yt(ue,xe,ne,_e,Be,Le,Ze,We,wt,ht,Pt){let Ut=Be||XI(xe,Le),Zt=Le||Ze||fH(Ut),sn=!H&&(!h.v7_partialHydration||!wt);if(_e){if(sn){let Cr=_t(Pt);Re(Xi({navigation:Ut},Cr!==void 0?{actionData:Cr}:{}),{flushSync:ht})}let Mn=await $r(ne,xe.pathname,ue.signal);if(Mn.type==="aborted")return{shortCircuited:!0};if(Mn.type==="error"){let{boundaryId:Cr,error:Lr}=Hr(xe.pathname,Mn);return{matches:Mn.partialMatches,loaderData:{},errors:{[Cr]:Lr}}}else if(Mn.matches)ne=Mn.matches;else{let{error:Cr,notFoundMatches:Lr,route:er}=Mr(xe.pathname);return{matches:Lr,loaderData:{},errors:{[er.id]:Cr}}}}let cn=o||s,[hr,Dn]=eH(t.history,T,ne,Zt,xe,h.v7_partialHydration&&wt===!0,h.v7_skipActionErrorRevalidation,q,F,J,ce,re,te,cn,l,Pt);if(Ii(Mn=>!(ne&&ne.some(Cr=>Cr.route.id===Mn))||hr&&hr.some(Cr=>Cr.route.id===Mn)),oe=++G,hr.length===0&&Dn.length===0){let Mn=Gt();return Ee(xe,Xi({matches:ne,loaderData:{},errors:Pt&&uu(Pt[1])?{[Pt[0]]:Pt[1].error}:null},oH(Pt),Mn?{fetchers:new Map(T.fetchers)}:{}),{flushSync:ht}),{shortCircuited:!0}}if(sn){let Mn={};if(!_e){Mn.navigation=Ut;let Cr=_t(Pt);Cr!==void 0&&(Mn.actionData=Cr)}Dn.length>0&&(Mn.fetchers=St(Dn)),Re(Mn,{flushSync:ht})}Dn.forEach(Mn=>{Z.has(Mn.key)&&pn(Mn.key),Mn.controller&&Z.set(Mn.key,Mn.controller)});let gn=()=>Dn.forEach(Mn=>pn(Mn.key));W&&W.signal.addEventListener("abort",gn);let{loaderResults:Gr,fetcherResults:xi}=await tt(T.matches,ne,hr,Dn,ue);if(ue.signal.aborted)return{shortCircuited:!0};W&&W.signal.removeEventListener("abort",gn),Dn.forEach(Mn=>Z.delete(Mn.key));let ta=uH([...Gr,...xi]);if(ta){if(ta.idx>=hr.length){let Mn=Dn[ta.idx-hr.length].key;te.add(Mn)}return await Ae(ue,ta.result,{replace:We}),{shortCircuited:!0}}let{loaderData:si,errors:oi}=aH(T,ne,hr,Gr,Pt,Dn,xi,he);he.forEach((Mn,Cr)=>{Mn.subscribe(Lr=>{(Lr||Mn.done)&&he.delete(Cr)})}),h.v7_partialHydration&&wt&&T.errors&&Object.entries(T.errors).filter(Mn=>{let[Cr]=Mn;return!hr.some(Lr=>Lr.route.id===Cr)}).forEach(Mn=>{let[Cr,Lr]=Mn;oi=Object.assign(oi||{},{[Cr]:Lr})});let la=Gt(),li=Kt(oe),xa=la||li||Dn.length>0;return Xi({matches:ne,loaderData:si,errors:oi},xa?{fetchers:new Map(T.fetchers)}:{})}function _t(ue){if(ue&&!uu(ue[1]))return{[ue[0]]:ue[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function St(ue){return ue.forEach(xe=>{let ne=T.fetchers.get(xe.key),_e=wS(void 0,ne?ne.data:void 0);T.fetchers.set(xe.key,_e)}),new Map(T.fetchers)}function Bt(ue,xe,ne,_e){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Z.has(ue)&&pn(ue);let Be=(_e&&_e.unstable_flushSync)===!0,Le=o||s,Ze=$3(T.location,T.matches,l,h.v7_prependBasename,ne,h.v7_relativeSplatPath,xe,_e==null?void 0:_e.relative),We=ly(Le,Ze,l),wt=Vr(We,Le,Ze);if(wt.active&&wt.matches&&(We=wt.matches),!We){ft(ue,xe,Vo(404,{pathname:Ze}),{flushSync:Be});return}let{path:ht,submission:Pt,error:Ut}=Qz(h.v7_normalizeFormMethod,!0,Ze,_e);if(Ut){ft(ue,xe,Ut,{flushSync:Be});return}let Zt=QS(We,ht);if(B=(_e&&_e.preventScrollReset)===!0,Pt&&hd(Pt.formMethod)){Nt(ue,xe,ht,Zt,We,wt.active,Be,Pt);return}re.set(ue,{routeId:xe,path:ht}),Dt(ue,xe,ht,Zt,We,wt.active,Be,Pt)}async function Nt(ue,xe,ne,_e,Be,Le,Ze,We){Ot(),re.delete(ue);function wt(er){if(!er.route.action&&!er.route.lazy){let ei=Vo(405,{method:We.formMethod,pathname:ne,routeId:xe});return ft(ue,xe,ei,{flushSync:Ze}),!0}return!1}if(!Le&&wt(_e))return;let ht=T.fetchers.get(ue);qe(ue,_Ae(We,ht),{flushSync:Ze});let Pt=new AbortController,Ut=p0(t.history,ne,Pt.signal,We);if(Le){let er=await $r(Be,ne,Ut.signal);if(er.type==="aborted")return;if(er.type==="error"){let{error:ei}=Hr(ne,er);ft(ue,xe,ei,{flushSync:Ze});return}else if(er.matches){if(Be=er.matches,_e=QS(Be,ne),wt(_e))return}else{ft(ue,xe,Vo(404,{pathname:ne}),{flushSync:Ze});return}}Z.set(ue,Pt);let Zt=G,cn=(await je("action",Ut,[_e],Be))[0];if(Ut.signal.aborted){Z.get(ue)===Pt&&Z.delete(ue);return}if(h.v7_fetcherPersist&&ce.has(ue)){if(vy(cn)||uu(cn)){qe(ue,qp(void 0));return}}else{if(vy(cn))if(Z.delete(ue),oe>Zt){qe(ue,qp(void 0));return}else return te.add(ue),qe(ue,wS(We)),Ae(Ut,cn,{fetcherSubmission:We});if(uu(cn)){ft(ue,xe,cn.error);return}}if(gy(cn))throw Vo(400,{type:"defer-action"});let hr=T.navigation.location||T.location,Dn=p0(t.history,hr,Pt.signal),gn=o||s,Gr=T.navigation.state!=="idle"?ly(gn,T.navigation.location,l):T.matches;vr(Gr,"Didn't find any matches after fetcher action");let xi=++G;ae.set(ue,xi);let ta=wS(We,cn.data);T.fetchers.set(ue,ta);let[si,oi]=eH(t.history,T,Gr,We,hr,!1,h.v7_skipActionErrorRevalidation,q,F,J,ce,re,te,gn,l,[_e.route.id,cn]);oi.filter(er=>er.key!==ue).forEach(er=>{let ei=er.key,Hi=T.fetchers.get(ei),Fr=wS(void 0,Hi?Hi.data:void 0);T.fetchers.set(ei,Fr),Z.has(ei)&&pn(ei),er.controller&&Z.set(ei,er.controller)}),Re({fetchers:new Map(T.fetchers)});let la=()=>oi.forEach(er=>pn(er.key));Pt.signal.addEventListener("abort",la);let{loaderResults:li,fetcherResults:xa}=await tt(T.matches,Gr,si,oi,Dn);if(Pt.signal.aborted)return;Pt.signal.removeEventListener("abort",la),ae.delete(ue),Z.delete(ue),oi.forEach(er=>Z.delete(er.key));let Mn=uH([...li,...xa]);if(Mn){if(Mn.idx>=si.length){let er=oi[Mn.idx-si.length].key;te.add(er)}return Ae(Dn,Mn.result)}let{loaderData:Cr,errors:Lr}=aH(T,T.matches,si,li,void 0,oi,xa,he);if(T.fetchers.has(ue)){let er=qp(cn.data);T.fetchers.set(ue,er)}Kt(xi),T.navigation.state==="loading"&&xi>oe?(vr(L,"Expected pending action"),W&&W.abort(),Ee(T.navigation.location,{matches:Gr,loaderData:Cr,errors:Lr,fetchers:new Map(T.fetchers)})):(Re({errors:Lr,loaderData:sH(T.loaderData,Cr,Gr,Lr),fetchers:new Map(T.fetchers)}),q=!1)}async function Dt(ue,xe,ne,_e,Be,Le,Ze,We){let wt=T.fetchers.get(ue);qe(ue,wS(We,wt?wt.data:void 0),{flushSync:Ze});let ht=new AbortController,Pt=p0(t.history,ne,ht.signal);if(Le){let cn=await $r(Be,ne,Pt.signal);if(cn.type==="aborted")return;if(cn.type==="error"){let{error:hr}=Hr(ne,cn);ft(ue,xe,hr,{flushSync:Ze});return}else if(cn.matches)Be=cn.matches,_e=QS(Be,ne);else{ft(ue,xe,Vo(404,{pathname:ne}),{flushSync:Ze});return}}Z.set(ue,ht);let Ut=G,sn=(await je("loader",Pt,[_e],Be))[0];if(gy(sn)&&(sn=await qie(sn,Pt.signal,!0)||sn),Z.get(ue)===ht&&Z.delete(ue),!Pt.signal.aborted){if(ce.has(ue)){qe(ue,qp(void 0));return}if(vy(sn))if(oe>Ut){qe(ue,qp(void 0));return}else{te.add(ue),await Ae(Pt,sn);return}if(uu(sn)){ft(ue,xe,sn.error);return}vr(!gy(sn),"Unhandled fetcher deferred data"),qe(ue,qp(sn.data))}}async function Ae(ue,xe,ne){let{submission:_e,fetcherSubmission:Be,replace:Le}=ne===void 0?{}:ne;xe.response.headers.has("X-Remix-Revalidate")&&(q=!0);let Ze=xe.response.headers.get("Location");vr(Ze,"Expected a Location header on the redirect Response"),Ze=rH(Ze,new URL(ue.url),l);let We=eN(T.location,Ze,{_isRedirect:!0});if(n){let sn=!1;if(xe.response.headers.has("X-Remix-Reload-Document"))sn=!0;else if(eL.test(Ze)){const cn=t.history.createURL(Ze);sn=cn.origin!==e.location.origin||Pd(cn.pathname,l)==null}if(sn){Le?e.location.replace(Ze):e.location.assign(Ze);return}}W=null;let wt=Le===!0||xe.response.headers.has("X-Remix-Replace")?Da.Replace:Da.Push,{formMethod:ht,formAction:Pt,formEncType:Ut}=T.navigation;!_e&&!Be&&ht&&Pt&&Ut&&(_e=fH(T.navigation));let Zt=_e||Be;if(aAe.has(xe.response.status)&&Zt&&hd(Zt.formMethod))await gt(wt,We,{submission:Xi({},Zt,{formAction:Ze}),preventScrollReset:B});else{let sn=XI(We,_e);await gt(wt,We,{overrideNavigation:sn,fetcherSubmission:Be,preventScrollReset:B})}}async function je(ue,xe,ne,_e){try{let Be=await mAe(c,ue,xe,ne,_e,a,i);return await Promise.all(Be.map((Le,Ze)=>{if(xAe(Le)){let We=Le.result;return{type:vi.redirect,response:vAe(We,xe,ne[Ze].route.id,_e,l,h.v7_relativeSplatPath)}}return gAe(Le)}))}catch(Be){return ne.map(()=>({type:vi.error,error:Be}))}}async function tt(ue,xe,ne,_e,Be){let[Le,...Ze]=await Promise.all([ne.length?je("loader",Be,ne,xe):[],..._e.map(We=>{if(We.matches&&We.match&&We.controller){let wt=p0(t.history,We.path,We.controller.signal);return je("loader",wt,[We.match],We.matches).then(ht=>ht[0])}else return Promise.resolve({type:vi.error,error:Vo(404,{pathname:We.path})})})]);return await Promise.all([dH(ue,ne,Le,Le.map(()=>Be.signal),!1,T.loaderData),dH(ue,_e.map(We=>We.match),Ze,_e.map(We=>We.controller?We.controller.signal:null),!0)]),{loaderResults:Le,fetcherResults:Ze}}function Ot(){q=!0,F.push(...Ii()),re.forEach((ue,xe)=>{Z.has(xe)&&(J.add(xe),pn(xe))})}function qe(ue,xe,ne){ne===void 0&&(ne={}),T.fetchers.set(ue,xe),Re({fetchers:new Map(T.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function ft(ue,xe,ne,_e){_e===void 0&&(_e={});let Be=aw(T.matches,xe);an(ue),Re({errors:{[Be.route.id]:ne},fetchers:new Map(T.fetchers)},{flushSync:(_e&&_e.flushSync)===!0})}function Wt(ue){return h.v7_fetcherPersist&&(X.set(ue,(X.get(ue)||0)+1),ce.has(ue)&&ce.delete(ue)),T.fetchers.get(ue)||sAe}function an(ue){let xe=T.fetchers.get(ue);Z.has(ue)&&!(xe&&xe.state==="loading"&&ae.has(ue))&&pn(ue),re.delete(ue),ae.delete(ue),te.delete(ue),ce.delete(ue),J.delete(ue),T.fetchers.delete(ue)}function Un(ue){if(h.v7_fetcherPersist){let xe=(X.get(ue)||0)-1;xe<=0?(X.delete(ue),ce.add(ue)):X.set(ue,xe)}else an(ue);Re({fetchers:new Map(T.fetchers)})}function pn(ue){let xe=Z.get(ue);vr(xe,"Expected fetch controller: "+ue),xe.abort(),Z.delete(ue)}function ln(ue){for(let xe of ue){let ne=Wt(xe),_e=qp(ne.data);T.fetchers.set(xe,_e)}}function Gt(){let ue=[],xe=!1;for(let ne of te){let _e=T.fetchers.get(ne);vr(_e,"Expected fetcher: "+ne),_e.state==="loading"&&(te.delete(ne),ue.push(ne),xe=!0)}return ln(ue),xe}function Kt(ue){let xe=[];for(let[ne,_e]of ae)if(_e<ue){let Be=T.fetchers.get(ne);vr(Be,"Expected fetcher: "+ne),Be.state==="loading"&&(pn(ne),ae.delete(ne),xe.push(ne))}return ln(xe),xe.length>0}function Lt(ue,xe){let ne=T.blockers.get(ue)||bS;return ve.get(ue)!==xe&&ve.set(ue,xe),ne}function In(ue){T.blockers.delete(ue),ve.delete(ue)}function Tn(ue,xe){let ne=T.blockers.get(ue)||bS;vr(ne.state==="unblocked"&&xe.state==="blocked"||ne.state==="blocked"&&xe.state==="blocked"||ne.state==="blocked"&&xe.state==="proceeding"||ne.state==="blocked"&&xe.state==="unblocked"||ne.state==="proceeding"&&xe.state==="unblocked","Invalid blocker state transition: "+ne.state+" -> "+xe.state);let _e=new Map(T.blockers);_e.set(ue,xe),Re({blockers:_e})}function Wr(ue){let{currentLocation:xe,nextLocation:ne,historyAction:_e}=ue;if(ve.size===0)return;ve.size>1&&qa(!1,"A router only supports one blocker at a time");let Be=Array.from(ve.entries()),[Le,Ze]=Be[Be.length-1],We=T.blockers.get(Le);if(!(We&&We.state==="proceeding")&&Ze({currentLocation:xe,nextLocation:ne,historyAction:_e}))return Le}function Mr(ue){let xe=Vo(404,{pathname:ue}),ne=o||s,{matches:_e,route:Be}=lH(ne);return Ii(),{notFoundMatches:_e,route:Be,error:xe}}function Hr(ue,xe){return{boundaryId:aw(xe.partialMatches).route.id,error:Vo(400,{type:"route-discovery",pathname:ue,message:xe.error!=null&&"message"in xe.error?xe.error:String(xe.error)})}}function Ii(ue){let xe=[];return he.forEach((ne,_e)=>{(!ue||ue(_e))&&(ne.cancel(),xe.push(_e),he.delete(_e))}),xe}function Wi(ue,xe,ne){if(x=ue,_=xe,S=ne||null,!N&&T.navigation===qI){N=!0;let _e=xr(T.location,T.matches);_e!=null&&Re({restoreScrollPosition:_e})}return()=>{x=null,_=null,S=null}}function Mi(ue,xe){return S&&S(ue,xe.map(_e=>VPe(_e,T.loaderData)))||ue.key}function zi(ue,xe){if(x&&_){let ne=Mi(ue,xe);x[ne]=_()}}function xr(ue,xe){if(x){let ne=Mi(ue,xe),_e=x[ne];if(typeof _e=="number")return _e}return null}function Vr(ue,xe,ne){if(f){if(y.has(ne))return{active:!1,matches:ue};if(ue){if(Object.keys(ue[0].params).length>0)return{active:!0,matches:uk(xe,ne,l,!0)}}else return{active:!0,matches:uk(xe,ne,l,!0)||[]}}return{active:!1,matches:null}}async function $r(ue,xe,ne){let _e=ue;for(;;){let Be=o==null,Le=o||s;try{await fAe(f,xe,_e,Le,a,i,Ne,ne)}catch(wt){return{type:"error",error:wt,partialMatches:_e}}finally{Be&&(s=[...s])}if(ne.aborted)return{type:"aborted"};let Ze=ly(Le,xe,l);if(Ze)return qt(xe,y),{type:"success",matches:Ze};let We=uk(Le,xe,l,!0);if(!We||_e.length===We.length&&_e.every((wt,ht)=>wt.route.id===We[ht].route.id))return qt(xe,y),{type:"success",matches:null};_e=We}}function qt(ue,xe){if(xe.size>=v){let ne=xe.values().next().value;xe.delete(ne)}xe.add(ue)}function Zn(ue){a={},o=tN(ue,i,void 0,a)}function ea(ue,xe){let ne=o==null;Kie(ue,xe,o||s,a,i),ne&&(s=[...s],Re({}))}return A={get basename(){return l},get future(){return h},get state(){return T},get routes(){return s},get window(){return e},initialize:Te,subscribe:Ie,enableScrollRestoration:Wi,navigate:$e,fetch:Bt,revalidate:He,createHref:ue=>t.history.createHref(ue),encodeLocation:ue=>t.history.encodeLocation(ue),getFetcher:Wt,deleteFetcher:Un,dispose:ye,getBlocker:Lt,deleteBlocker:In,patchRoutes:ea,_internalFetchControllers:Z,_internalActiveDeferreds:he,_internalSetRoutes:Zn},A}function uAe(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function $3(t,e,n,r,i,a,s,o){let l,c;if(s){l=[];for(let h of e)if(l.push(h),h.route.id===s){c=h;break}}else l=e,c=e[e.length-1];let f=Q$(i||".",Z$(l,a),Pd(t.pathname,n)||t.pathname,o==="path");return i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!tL(f.search)&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Hf([n,f.pathname])),_g(f)}function Qz(t,e,n,r){if(!r||!uAe(r))return{path:n};if(r.formMethod&&!EAe(r.formMethod))return{path:n,error:Vo(405,{method:r.formMethod})};let i=()=>({path:n,error:Vo(400,{type:"invalid-body"})}),a=r.formMethod||"get",s=t?a.toUpperCase():a.toLowerCase(),o=Yie(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!hd(s))return i();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,v)=>{let[y,x]=v;return""+p+y+"="+x+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!hd(s))return i();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}vr(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=L3(r.formData),c=r.formData;else if(r.body instanceof FormData)l=L3(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=iH(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=iH(l)}catch{return i()}let f={formMethod:s,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(hd(f.formMethod))return{path:n,submission:f};let h=Pm(n);return e&&h.search&&tL(h.search)&&l.append("index",""),h.search="?"+l,{path:_g(h),submission:f}}function cAe(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function eH(t,e,n,r,i,a,s,o,l,c,f,h,m,p,v,y){let x=y?uu(y[1])?y[1].error:y[1].data:void 0,S=t.createURL(e.location),_=t.createURL(i),N=y&&uu(y[1])?y[0]:void 0,k=N?cAe(n,N):n,P=y?y[1].statusCode:void 0,O=s&&P&&P>=400,A=k.filter((L,B)=>{let{route:W}=L;if(W.lazy)return!0;if(W.loader==null)return!1;if(a)return typeof W.loader!="function"||W.loader.hydrate?!0:e.loaderData[W.id]===void 0&&(!e.errors||e.errors[W.id]===void 0);if(dAe(e.loaderData,e.matches[B],L)||l.some(I=>I===L.route.id))return!0;let Y=e.matches[B],V=L;return tH(L,Xi({currentUrl:S,currentParams:Y.params,nextUrl:_,nextParams:V.params},r,{actionResult:x,actionStatus:P,defaultShouldRevalidate:O?!1:o||S.pathname+S.search===_.pathname+_.search||S.search!==_.search||Gie(Y,V)}))}),T=[];return h.forEach((L,B)=>{if(a||!n.some(H=>H.route.id===L.routeId)||f.has(B))return;let W=ly(p,L.path,v);if(!W){T.push({key:B,routeId:L.routeId,path:L.path,matches:null,match:null,controller:null});return}let Y=e.fetchers.get(B),V=QS(W,L.path),I=!1;m.has(B)?I=!1:c.has(B)?(c.delete(B),I=!0):Y&&Y.state!=="idle"&&Y.data===void 0?I=o:I=tH(V,Xi({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:x,actionStatus:P,defaultShouldRevalidate:O?!1:o})),I&&T.push({key:B,routeId:L.routeId,path:L.path,matches:W,match:V,controller:new AbortController})}),[A,T]}function dAe(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Gie(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function tH(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function fAe(t,e,n,r,i,a,s,o){let l=[e,...n.map(c=>c.route.id)].join("-");try{let c=s.get(l);c||(c=t({path:e,matches:n,patch:(f,h)=>{o.aborted||Kie(f,h,r,i,a)}}),s.set(l,c)),c&&wAe(c)&&await c}finally{s.delete(l)}}function Kie(t,e,n,r,i){if(t){var a;let s=r[t];vr(s,"No route found to patch children into: routeId = "+t);let o=tN(e,i,[t,"patch",String(((a=s.children)==null?void 0:a.length)||"0")],r);s.children?s.children.push(...o):s.children=o}else{let s=tN(e,i,["patch",String(n.length||"0")],r);n.push(...s)}}async function nH(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];vr(i,"No route found in manifest");let a={};for(let s in r){let l=i[s]!==void 0&&s!=="hasErrorBoundary";qa(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!IPe.has(s)&&(a[s]=r[s])}Object.assign(i,a),Object.assign(i,Xi({},e(i),{lazy:void 0}))}function hAe(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function mAe(t,e,n,r,i,a,s,o){let l=r.reduce((h,m)=>h.add(m.route.id),new Set),c=new Set,f=await t({matches:i.map(h=>{let m=l.has(h.route.id);return Xi({},h,{shouldLoad:m,resolve:v=>(c.add(h.route.id),m?pAe(e,n,h,a,s,v,o):Promise.resolve({type:vi.data,result:void 0}))})}),request:n,params:i[0].params,context:o});return i.forEach(h=>vr(c.has(h.route.id),'`match.resolve()` was not called for route id "'+h.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),f.filter((h,m)=>l.has(i[m].route.id))}async function pAe(t,e,n,r,i,a,s){let o,l,c=f=>{let h,m=new Promise((y,x)=>h=x);l=()=>h(),e.signal.addEventListener("abort",l);let p=y=>typeof f!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):f({request:e,params:n.params,context:s},...y!==void 0?[y]:[]),v;return a?v=a(y=>p(y)):v=(async()=>{try{return{type:"data",result:await p()}}catch(y){return{type:"error",result:y}}})(),Promise.race([v,m])};try{let f=n.route[t];if(n.route.lazy)if(f){let h,[m]=await Promise.all([c(f).catch(p=>{h=p}),nH(n.route,i,r)]);if(h!==void 0)throw h;o=m}else if(await nH(n.route,i,r),f=n.route[t],f)o=await c(f);else if(t==="action"){let h=new URL(e.url),m=h.pathname+h.search;throw Vo(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:vi.data,result:void 0};else if(f)o=await c(f);else{let h=new URL(e.url),m=h.pathname+h.search;throw Vo(404,{pathname:m})}vr(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(f){return{type:vi.error,result:f}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function gAe(t){let{result:e,type:n}=t;if(Jie(e)){let c;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(f){return{type:vi.error,error:f}}return n===vi.error?{type:vi.error,error:new fP(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:vi.data,data:c,statusCode:e.status,headers:e.headers}}if(n===vi.error){if(cH(e)){var r;if(e.data instanceof Error){var i;return{type:vi.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new fP(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:vi.error,error:e,statusCode:JA(e)?e.status:void 0}}if(SAe(e)){var a,s;return{type:vi.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}if(cH(e)){var o,l;return{type:vi.data,data:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:vi.data,data:e}}function vAe(t,e,n,r,i,a){let s=t.headers.get("Location");if(vr(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!eL.test(s)){let o=r.slice(0,r.findIndex(l=>l.route.id===n)+1);s=$3(new URL(e.url),o,i,!0,s,a),t.headers.set("Location",s)}return t}function rH(t,e,n){if(eL.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=Pd(i.pathname,n)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return t}function p0(t,e,n,r){let i=t.createURL(Yie(e)).toString(),a={signal:n};if(r&&hd(r.formMethod)){let{formMethod:s,formEncType:o}=r;a.method=s.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(r.json)):o==="text/plain"?a.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?a.body=L3(r.formData):a.body=r.formData}return new Request(i,a)}function L3(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function iH(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function yAe(t,e,n,r,i,a){let s={},o=null,l,c=!1,f={},h=r&&uu(r[1])?r[1].error:void 0;return n.forEach((m,p)=>{let v=e[p].route.id;if(vr(!vy(m),"Cannot handle redirect results in processLoaderData"),uu(m)){let y=m.error;h!==void 0&&(y=h,h=void 0),o=o||{};{let x=aw(t,v);o[x.route.id]==null&&(o[x.route.id]=y)}s[v]=void 0,c||(c=!0,l=JA(m.error)?m.error.status:500),m.headers&&(f[v]=m.headers)}else gy(m)?(i.set(v,m.deferredData),s[v]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!c&&(l=m.statusCode),m.headers&&(f[v]=m.headers)):(s[v]=m.data,m.statusCode&&m.statusCode!==200&&!c&&(l=m.statusCode),m.headers&&(f[v]=m.headers))}),h!==void 0&&r&&(o={[r[0]]:h},s[r[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:f}}function aH(t,e,n,r,i,a,s,o){let{loaderData:l,errors:c}=yAe(e,n,r,i,o);for(let f=0;f<a.length;f++){let{key:h,match:m,controller:p}=a[f];vr(s!==void 0&&s[f]!==void 0,"Did not find corresponding fetcher result");let v=s[f];if(!(p&&p.signal.aborted))if(uu(v)){let y=aw(t.matches,m==null?void 0:m.route.id);c&&c[y.route.id]||(c=Xi({},c,{[y.route.id]:v.error})),t.fetchers.delete(h)}else if(vy(v))vr(!1,"Unhandled fetcher revalidation redirect");else if(gy(v))vr(!1,"Unhandled fetcher deferred data");else{let y=qp(v.data);t.fetchers.set(h,y)}}return{loaderData:l,errors:c}}function sH(t,e,n,r){let i=Xi({},e);for(let a of n){let s=a.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&a.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function oH(t){return t?uu(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function aw(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function lH(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Vo(t,e){let{pathname:n,routeId:r,method:i,type:a,message:s}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",a==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+s):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?l="defer() is not supported in actions":a==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",l='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new fP(t||500,o,new Error(l),!0)}function uH(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(vy(n))return{result:n,idx:e}}}function Yie(t){let e=typeof t=="string"?Pm(t):t;return _g(Xi({},e,{hash:""}))}function bAe(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function wAe(t){return typeof t=="object"&&t!=null&&"then"in t}function xAe(t){return Jie(t.result)&&iAe.has(t.result.status)}function gy(t){return t.type===vi.deferred}function uu(t){return t.type===vi.error}function vy(t){return(t&&t.type)===vi.redirect}function cH(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function SAe(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Jie(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function EAe(t){return rAe.has(t.toLowerCase())}function hd(t){return tAe.has(t.toLowerCase())}async function dH(t,e,n,r,i,a){for(let s=0;s<n.length;s++){let o=n[s],l=e[s];if(!l)continue;let c=t.find(h=>h.route.id===l.route.id),f=c!=null&&!Gie(c,l)&&(a&&a[l.route.id])!==void 0;if(gy(o)&&(i||f)){let h=r[s];vr(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await qie(o,h,i).then(m=>{m&&(n[s]=m||n[s])})}}}async function qie(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:vi.data,data:t.deferredData.unwrappedData}}catch(i){return{type:vi.error,error:i}}return{type:vi.data,data:t.deferredData.data}}}function tL(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function QS(t,e){let n=typeof e=="string"?Pm(e).search:e.search;if(t[t.length-1].route.index&&tL(n||""))return t[t.length-1];let r=Wie(t);return r[r.length-1]}function fH(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:a,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function XI(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function NAe(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function wS(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function _Ae(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function qp(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function CAe(t,e){try{let n=t.sessionStorage.getItem(Hie);if(n){let r=JSON.parse(n);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function TAe(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Hie,JSON.stringify(n))}catch(r){qa(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hP(){return hP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hP.apply(this,arguments)}const ix=R.createContext(null);ix.displayName="DataRouter";const qA=R.createContext(null);qA.displayName="DataRouterState";const DAe=R.createContext(null);DAe.displayName="Await";const jd=R.createContext(null);jd.displayName="Navigation";const XA=R.createContext(null);XA.displayName="Location";const Am=R.createContext({outlet:null,matches:[],isDataRoute:!1});Am.displayName="Route";const nL=R.createContext(null);nL.displayName="RouteError";function kAe(t,e){let{relative:n}=e===void 0?{}:e;XN()||vr(!1,"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=R.useContext(jd),{hash:a,pathname:s,search:o}=ZN(t,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:Hf([r,s])),i.createHref({pathname:l,search:o,hash:a})}function XN(){return R.useContext(XA)!=null}function ax(){return XN()||vr(!1,"useLocation() may be used only in the context of a <Router> component."),R.useContext(XA).location}const Xie="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zie(t){R.useContext(jd).static||R.useLayoutEffect(t)}function PAe(){let{isDataRoute:t}=R.useContext(Am);return t?WAe():AAe()}function AAe(){XN()||vr(!1,"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(ix),{basename:e,future:n,navigator:r}=R.useContext(jd),{matches:i}=R.useContext(Am),{pathname:a}=ax(),s=JSON.stringify(Z$(i,n.v7_relativeSplatPath)),o=R.useRef(!1);return Zie(()=>{o.current=!0}),R.useCallback(function(c,f){if(f===void 0&&(f={}),qa(o.current,Xie),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=Q$(c,JSON.parse(s),a,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Hf([e,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[e,r,s,a,t])}function ZN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(jd),{matches:i}=R.useContext(Am),{pathname:a}=ax(),s=JSON.stringify(Z$(i,r.v7_relativeSplatPath));return R.useMemo(()=>Q$(t,JSON.parse(s),a,n==="path"),[t,s,a,n])}function RAe(t,e,n,r){XN()||vr(!1,"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=R.useContext(jd),{matches:a}=R.useContext(Am),s=a[a.length-1],o=s?s.params:{},l=s?s.pathname:"/",c=s?s.pathnameBase:"/",f=s&&s.route;{let S=f&&f.path||"";eae(l,!f||S.endsWith("*"),"You rendered descendant <Routes> (or called `useRoutes()`) at "+('"'+l+'" (under <Route path="'+S+'">) but the ')+`parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

`+('Please change the parent <Route path="'+S+'"> to <Route ')+('path="'+(S==="/"?"*":S+"/*")+'">.'))}let h=ax(),m;m=h;let p=m.pathname||"/",v=p;if(c!=="/"){let S=c.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=ly(t,{pathname:v});return qa(f||y!=null,'No routes matched location "'+m.pathname+m.search+m.hash+'" '),qa(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,'Matched leaf route at location "'+m.pathname+m.search+m.hash+'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'),VAe(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:Hf([c,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Hf([c,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r)}function OAe(){let t=UAe(),e=JA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:a},"ErrorBoundary")," or"," ",R.createElement("code",{style:a},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,s)}const jAe=R.createElement(OAe,null);class IAe extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Am.Provider,{value:this.props.routeContext},R.createElement(nL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MAe(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(ix);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Am.Provider,{value:e},r)}function VAe(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let f=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);f>=0||vr(!1,"Could not find a matching route for errors on route IDs: "+Object.keys(o).join(",")),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let h=s[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:m,errors:p}=n,v=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((f,h,m)=>{let p,v=!1,y=null,x=null;n&&(p=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||jAe,l&&(c<0&&m===0?(eae("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,x=null):c===m&&(v=!0,x=h.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,m+1)),_=()=>{let N;return p?N=y:v?N=x:h.route.Component?N=R.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=f,R.createElement(MAe,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:N})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?R.createElement(IAe,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):_()},null)}var Qie=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Qie||{}),nN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(nN||{});function rL(t){return t+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}function $Ae(t){let e=R.useContext(ix);return e||vr(!1,rL(t)),e}function LAe(t){let e=R.useContext(qA);return e||vr(!1,rL(t)),e}function FAe(t){let e=R.useContext(Am);return e||vr(!1,rL(t)),e}function iL(t){let e=FAe(t),n=e.matches[e.matches.length-1];return n.route.id||vr(!1,t+' can only be used on routes that contain a unique "id"'),n.route.id}function BAe(){return iL(nN.UseRouteId)}function UAe(){var t;let e=R.useContext(nL),n=LAe(nN.UseRouteError),r=iL(nN.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function WAe(){let{router:t}=$Ae(Qie.UseNavigateStable),e=iL(nN.UseNavigateStable),n=R.useRef(!1);return Zie(()=>{n.current=!0}),R.useCallback(function(i,a){a===void 0&&(a={}),qa(n.current,Xie),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,hP({fromRouteId:e},a)))},[t,e])}const hH={};function eae(t,e,n){!e&&!hH[t]&&(hH[t]=!0,qa(!1,n))}function zAe(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Da.Pop,navigator:a,static:s=!1,future:o}=t;XN()&&vr(!1,"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:a,static:s,future:hP({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=Pm(r));let{pathname:f="/",search:h="",hash:m="",state:p=null,key:v="default"}=r,y=R.useMemo(()=>{let x=Pd(f,l);return x==null?null:{location:{pathname:x,search:h,hash:m,state:p,key:v},navigationType:i}},[l,f,h,m,p,v,i]);return qa(y!=null,'<Router basename="'+l+'"> is not able to match the URL '+('"'+f+h+m+'" because it does not start with the ')+"basename, so the <Router> won't render anything."),y==null?null:R.createElement(jd.Provider,{value:c},R.createElement(XA.Provider,{children:n,value:y}))}new Promise(()=>{});function HAe(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&qa(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:R.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&qa(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:R.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&qa(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:R.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cg(){return Cg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cg.apply(this,arguments)}function aL(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const ck="get",dk="application/x-www-form-urlencoded";function ZA(t){return t!=null&&typeof t.tagName=="string"}function GAe(t){return ZA(t)&&t.tagName.toLowerCase()==="button"}function KAe(t){return ZA(t)&&t.tagName.toLowerCase()==="form"}function YAe(t){return ZA(t)&&t.tagName.toLowerCase()==="input"}function JAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qAe(t,e){return t.button===0&&(!e||e==="_self")&&!JAe(t)}let IT=null;function XAe(){if(IT===null)try{new FormData(document.createElement("form"),0),IT=!1}catch{IT=!0}return IT}const ZAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ZI(t){return t!=null&&!ZAe.has(t)?(qa(!1,'"'+t+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+dk+'"')),null):t}function QAe(t,e){let n,r,i,a,s;if(KAe(t)){let o=t.getAttribute("action");r=o?Pd(o,e):null,n=t.getAttribute("method")||ck,i=ZI(t.getAttribute("enctype"))||dk,a=new FormData(t)}else if(GAe(t)||YAe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?Pd(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||ck,i=ZI(t.getAttribute("formenctype"))||ZI(o.getAttribute("enctype"))||dk,a=new FormData(o,t),!XAe()){let{name:c,type:f,value:h}=t;if(f==="image"){let m=c?c+".":"";a.append(m+"x","0"),a.append(m+"y","0")}else c&&a.append(c,h)}}else{if(ZA(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ck,r=null,i=dk,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}const eRe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],tRe=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],nRe=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","unstable_viewTransition"],rRe="6";try{window.__reactRouterVersion=rRe}catch{}function iRe(t,e){return lAe({basename:void 0,future:Cg({},void 0,{v7_prependBasename:!0}),history:RPe({window:void 0}),hydrationData:aRe(),routes:t,mapRouteProperties:HAe,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function aRe(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Cg({},e,{errors:sRe(e.errors)})),e}function sRe(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new fP(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let a=new Error(i.message);a.stack="",n[r]=a}}else n[r]=i;return n}const sL=R.createContext({isTransitioning:!1});sL.displayName="ViewTransition";const tae=R.createContext(new Map);tae.displayName="Fetchers";const oRe="startTransition",mH=Q0e[oRe],lRe="flushSync",pH=twe[lRe];function uRe(t){mH?mH(t):t()}function xS(t){pH?pH(t):t()}class cRe{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function dRe(t){let{fallbackElement:e,router:n,future:r}=t,[i,a]=R.useState(n.state),[s,o]=R.useState(),[l,c]=R.useState({isTransitioning:!1}),[f,h]=R.useState(),[m,p]=R.useState(),[v,y]=R.useState(),x=R.useRef(new Map),{v7_startTransition:S}=r||{},_=R.useCallback(T=>{S?uRe(T):T()},[S]),N=R.useCallback((T,L)=>{let{deletedFetchers:B,unstable_flushSync:W,unstable_viewTransitionOpts:Y}=L;B.forEach(I=>x.current.delete(I)),T.fetchers.forEach((I,H)=>{I.data!==void 0&&x.current.set(H,I.data)});let V=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!Y||V){W?xS(()=>a(T)):_(()=>a(T));return}if(W){xS(()=>{m&&(f&&f.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation})});let I=n.window.document.startViewTransition(()=>{xS(()=>a(T))});I.finished.finally(()=>{xS(()=>{h(void 0),p(void 0),o(void 0),c({isTransitioning:!1})})}),xS(()=>p(I));return}m?(f&&f.resolve(),m.skipTransition(),y({state:T,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation})):(o(T),c({isTransitioning:!0,flushSync:!1,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation}))},[n.window,m,f,x,_]);R.useLayoutEffect(()=>n.subscribe(N),[n,N]),R.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new cRe)},[l]),R.useEffect(()=>{if(f&&s&&n.window){let T=s,L=f.promise,B=n.window.document.startViewTransition(async()=>{_(()=>a(T)),await L});B.finished.finally(()=>{h(void 0),p(void 0),o(void 0),c({isTransitioning:!1})}),p(B)}},[_,s,f,n.window]),R.useEffect(()=>{f&&s&&i.location.key===s.location.key&&f.resolve()},[f,m,i.location,s]),R.useEffect(()=>{!l.isTransitioning&&v&&(o(v.state),c({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),y(void 0))},[l.isTransitioning,v]),R.useEffect(()=>{qa(e==null||!n.future.v7_partialHydration,"`<RouterProvider fallbackElement>` is deprecated when using `v7_partialHydration`, use a `HydrateFallback` component instead")},[]);let k=R.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,L,B)=>n.navigate(T,{state:L,preventScrollReset:B==null?void 0:B.preventScrollReset}),replace:(T,L,B)=>n.navigate(T,{replace:!0,state:L,preventScrollReset:B==null?void 0:B.preventScrollReset})}),[n]),P=n.basename||"/",O=R.useMemo(()=>({router:n,navigator:k,static:!1,basename:P}),[n,k,P]),A=R.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return R.createElement(R.Fragment,null,R.createElement(ix.Provider,{value:O},R.createElement(qA.Provider,{value:i},R.createElement(tae.Provider,{value:x.current},R.createElement(sL.Provider,{value:l},R.createElement(zAe,{basename:P,location:i.location,navigationType:i.historyAction,navigator:k,future:A},i.initialized||n.future.v7_partialHydration?R.createElement(fRe,{routes:n.routes,future:n.future,state:i}):e))))),null)}const fRe=R.memo(hRe);function hRe(t){let{routes:e,future:n,state:r}=t;return RAe(e,void 0,r,n)}const mRe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pRe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nae=R.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:f,unstable_viewTransition:h}=e,m=aL(e,eRe),{basename:p}=R.useContext(jd),v,y=!1;if(typeof c=="string"&&pRe.test(c)&&(v=c,mRe))try{let N=new URL(window.location.href),k=c.startsWith("//")?new URL(N.protocol+c):new URL(c),P=Pd(k.pathname,p);k.origin===N.origin&&P!=null?c=P+k.search+k.hash:y=!0}catch{qa(!1,'<Link to="'+c+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let x=kAe(c,{relative:i}),S=bRe(c,{replace:s,state:o,target:l,preventScrollReset:f,relative:i,unstable_viewTransition:h});function _(N){r&&r(N),N.defaultPrevented||S(N)}return R.createElement("a",Cg({},m,{href:v||x,onClick:y||a?r:_,ref:n,target:l}))});nae.displayName="Link";const gRe=R.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,unstable_viewTransition:c,children:f}=e,h=aL(e,tRe),m=ZN(l,{relative:h.relative}),p=ax(),v=R.useContext(qA),{navigator:y,basename:x}=R.useContext(jd),S=v!=null&&_Re(m)&&c===!0,_=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,N=p.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(N=N.toLowerCase(),k=k?k.toLowerCase():null,_=_.toLowerCase()),k&&x&&(k=Pd(k,x)||k);const P=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let O=N===_||!s&&N.startsWith(_)&&N.charAt(P)==="/",A=k!=null&&(k===_||!s&&k.startsWith(_)&&k.charAt(_.length)==="/"),T={isActive:O,isPending:A,isTransitioning:S},L=O?r:void 0,B;typeof a=="function"?B=a(T):B=[a,O?"active":null,A?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let W=typeof o=="function"?o(T):o;return R.createElement(nae,Cg({},h,{"aria-current":L,className:B,ref:n,style:W,to:l,unstable_viewTransition:c}),typeof f=="function"?f(T):f)});gRe.displayName="NavLink";const vRe=R.forwardRef((t,e)=>{let{fetcherKey:n,navigate:r,reloadDocument:i,replace:a,state:s,method:o=ck,action:l,onSubmit:c,relative:f,preventScrollReset:h,unstable_viewTransition:m}=t,p=aL(t,nRe),v=ERe(),y=NRe(l,{relative:f}),x=o.toLowerCase()==="get"?"get":"post",S=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let N=_.nativeEvent.submitter,k=(N==null?void 0:N.getAttribute("formmethod"))||o;v(N||_.currentTarget,{fetcherKey:n,method:k,navigate:r,replace:a,state:s,relative:f,preventScrollReset:h,unstable_viewTransition:m})};return R.createElement("form",Cg({ref:e,method:x,action:y,onSubmit:i?c:S},p))});vRe.displayName="Form";var mP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mP||(mP={}));var gH;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gH||(gH={}));function yRe(t){return t+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}function rae(t){let e=R.useContext(ix);return e||vr(!1,yRe(t)),e}function bRe(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o}=e===void 0?{}:e,l=PAe(),c=ax(),f=ZN(t,{relative:s});return R.useCallback(h=>{if(qAe(h,n)){h.preventDefault();let m=r!==void 0?r:_g(c)===_g(f);l(t,{replace:m,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o})}},[c,l,f,r,i,n,t,a,s,o])}function wRe(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let xRe=0,SRe=()=>"__"+String(++xRe)+"__";function ERe(){let{router:t}=rae(mP.UseSubmit),{basename:e}=R.useContext(jd),n=BAe();return R.useCallback(function(r,i){i===void 0&&(i={}),wRe();let{action:a,method:s,encType:o,formData:l,body:c}=QAe(r,e);if(i.navigate===!1){let f=i.fetcherKey||SRe();t.fetch(f,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,unstable_flushSync:i.unstable_flushSync})}else t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,unstable_flushSync:i.unstable_flushSync,unstable_viewTransition:i.unstable_viewTransition})},[t,e,n])}function NRe(t,e){let{relative:n}=e===void 0?{}:e,{basename:r}=R.useContext(jd),i=R.useContext(Am);i||vr(!1,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s=Cg({},ZN(t||".",{relative:n})),o=ax();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search);l.has("index")&&l.get("index")===""&&(l.delete("index"),s.search=l.toString()?"?"+l.toString():"")}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Hf([r,s.pathname])),_g(s)}function _Re(t,e){e===void 0&&(e={});let n=R.useContext(sL);n==null&&vr(!1,"`unstable_useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=rae(mP.useViewTransitionState),i=ZN(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Pd(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Pd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return dP(i.pathname,s)!=null||dP(i.pathname,a)!=null}var iae={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vH=it.createContext&&it.createContext(iae),CRe=["attr","size","title"];function TRe(t,e){if(t==null)return{};var n=DRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pP(){return pP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pP.apply(this,arguments)}function yH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yH(Object(n),!0).forEach(function(r){kRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kRe(t,e,n){return e=PRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PRe(t){var e=ARe(t,"string");return typeof e=="symbol"?e:e+""}function ARe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aae(t){return t&&t.map((e,n)=>it.createElement(e.tag,gP({key:n},e.attr),aae(e.child)))}function nn(t){return e=>it.createElement(RRe,pP({attr:gP({},t.attr)},e),aae(t.child))}function RRe(t){var e=n=>{var{attr:r,size:i,title:a}=t,s=TRe(t,CRe),o=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),it.createElement("svg",pP({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:gP(gP({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&it.createElement("title",null,a),t.children)};return vH!==void 0?it.createElement(vH.Consumer,null,n=>e(n)):e(iae)}function ORe(t){return nn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(t)}function jRe(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M341.6 29.2L240.1 130.8l-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4L482.8 170.4c39-39 39-102.2 0-141.1s-102.2-39-141.1 0zM55.4 323.3c-15 15-23.4 35.4-23.4 56.6v42.4L5.4 462.2c-8.5 12.7-6.8 29.6 4 40.4s27.7 12.5 40.4 4L89.7 480h42.4c21.2 0 41.6-8.4 56.6-23.4L309.4 335.9l-45.3-45.3L143.4 411.3c-3 3-7.1 4.7-11.3 4.7H96V379.9c0-4.2 1.7-8.3 4.7-11.3L221.4 247.9l-45.3-45.3L55.4 323.3z"},child:[]}]})(t)}function sae(t){return nn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"},child:[]}]})(t)}function IRe(t){return nn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"},child:[]}]})(t)}function MRe(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M58.79 439.13A16 16 0 0 1 48 424c0-73.1 14.68-131.56 43.65-173.77 35-51 90.21-78.46 164.35-81.87V88a16 16 0 0 1 27.05-11.57l176 168a16 16 0 0 1 0 23.14l-176 168A16 16 0 0 1 256 424v-79.77c-45 1.36-79 8.65-106.07 22.64-29.25 15.12-50.46 37.71-73.32 67a16 16 0 0 1-17.82 5.28z"},child:[]}]})(t)}function VRe(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 440a16 16 0 0 1-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 0 1-27 11.57l-176-168a16 16 0 0 1 0-23.14l176-168A16 16 0 0 1 256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 0 1-16 16z"},child:[]}]})(t)}function oae(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm-50.22 116.82C218.45 151.39 236.28 144 256 144s37.39 7.44 50.11 20.94c12.89 13.68 19.16 32.06 17.68 51.82C320.83 256 290.43 288 256 288s-64.89-32-67.79-71.25c-1.47-19.92 4.79-38.36 17.57-51.93zM256 432a175.49 175.49 0 0 1-126-53.22 122.91 122.91 0 0 1 35.14-33.44C190.63 329 222.89 320 256 320s65.37 9 90.83 25.34A122.87 122.87 0 0 1 382 378.78 175.45 175.45 0 0 1 256 432z"},child:[]}]})(t)}function $Re(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m465.94 119.76-73.7-73.7A47.68 47.68 0 0 0 358.3 32H96a64 64 0 0 0-64 64v320a64 64 0 0 0 64 64h320a64 64 0 0 0 64-64V153.7a47.68 47.68 0 0 0-14.06-33.94zM120 112h176a8 8 0 0 1 8 8v48a8 8 0 0 1-8 8H120a8 8 0 0 1-8-8v-48a8 8 0 0 1 8-8zm139.75 319.91a80 80 0 1 1 76.16-76.16 80.06 80.06 0 0 1-76.16 76.16z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"352",r:"48"},child:[]}]})(t)}function lae(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m476.59 227.05-.16-.07L49.35 49.84A23.56 23.56 0 0 0 27.14 52 24.65 24.65 0 0 0 16 72.59v113.29a24 24 0 0 0 19.52 23.57l232.93 43.07a4 4 0 0 1 0 7.86L35.53 303.45A24 24 0 0 0 16 327v113.31A23.57 23.57 0 0 0 26.59 460a23.94 23.94 0 0 0 13.22 4 24.55 24.55 0 0 0 9.52-1.93L476.4 285.94l.19-.09a32 32 0 0 0 0-58.8z"},child:[]}]})(t)}function LRe(t){return nn({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M88,88v80H40a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8H160a8,8,0,0,1,8,8V88Zm128,0H168v80H88v48a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V96A8,8,0,0,0,216,88Z"},child:[]}]})(t)}function FRe(t){return nn({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,88H168V40a8,8,0,0,0-8-8H40a8,8,0,0,0-8,8V160a8,8,0,0,0,8,8H88v48a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V96A8,8,0,0,0,216,88ZM48,152V48H152V88H96a8,8,0,0,0-8,8v56Zm160,56H104V168h56a8,8,0,0,0,8-8V104h40Z"},child:[]}]})(t)}function BRe(t){return nn({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,88H168V40a8,8,0,0,0-8-8H40a8,8,0,0,0-8,8V160a8,8,0,0,0,8,8H88v48a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V96A8,8,0,0,0,216,88ZM48,48H152V152H48Z"},child:[]}]})(t)}function URe(t){return nn({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,96V216a8,8,0,0,1-8,8H96a8,8,0,0,1-8-8V168H40a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8H160a8,8,0,0,1,8,8V88h48A8,8,0,0,1,224,96Z"},child:[]}]})(t)}function WRe(t){return nn({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224.32,114.24a56,56,0,0,0-60.07-76.57A56,56,0,0,0,67.93,51.44a56,56,0,0,0-36.25,90.32A56,56,0,0,0,69,217,56.39,56.39,0,0,0,83.59,219a55.75,55.75,0,0,0,8.17-.61,56,56,0,0,0,96.31-13.78,56,56,0,0,0,36.25-90.32ZM182.85,54.43a40,40,0,0,1,28.56,48c-.95-.63-1.91-1.24-2.91-1.81L164,74.88a8,8,0,0,0-8,0l-44,25.41V81.81l40.5-23.38A39.76,39.76,0,0,1,182.85,54.43ZM144,137.24l-16,9.24-16-9.24V118.76l16-9.24,16,9.24ZM80,72a40,40,0,0,1,67.53-29c-1,.51-2,1-3,1.62L100,70.27a8,8,0,0,0-4,6.92V128l-16-9.24ZM40.86,86.93A39.75,39.75,0,0,1,64.12,68.57C64.05,69.71,64,70.85,64,72v51.38a8,8,0,0,0,4,6.93l44,25.4L96,165,55.5,141.57A40,40,0,0,1,40.86,86.93ZM73.15,201.57a40,40,0,0,1-28.56-48c.95.63,1.91,1.24,2.91,1.81L92,181.12a8,8,0,0,0,8,0l44-25.41v18.48l-40.5,23.38A39.76,39.76,0,0,1,73.15,201.57ZM176,184a40,40,0,0,1-67.52,29.05c1-.51,2-1.05,3-1.63L156,185.73a8,8,0,0,0,4-6.92V128l16,9.24Zm39.14-14.93a39.75,39.75,0,0,1-23.26,18.36c.07-1.14.12-2.28.12-3.43V132.62a8,8,0,0,0-4-6.93l-44-25.4,16-9.24,40.5,23.38A40,40,0,0,1,215.14,169.07Z"},child:[]}]})(t)}class zRe extends Error{constructor(n,r,i,a,s){super(n);Mt(this,"name","Assertion");Mt(this,"code","ERR_ASSERTION");Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.actual=r,this.expected=i,this.generated=s,this.operator=a}}function Fe(t,e){uae(!!t,!1,!0,"ok","Expected value to be truthy",e)}function QI(t){uae(!1,!1,!0,"ok","Unreachable",t)}function uae(t,e,n,r,i,a){if(!t)throw a instanceof Error?a:new zRe(a||i,e,n,r,!a)}function HRe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const GRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,KRe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,YRe={};function bH(t,e){return(YRe.jsx?KRe:GRe).test(t)}const JRe=/[ \t\n\f\r]/g;function qRe(t){return typeof t=="object"?t.type==="text"?wH(t.value):!1:wH(t)}function wH(t){return t.replace(JRe,"")===""}class QN{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}QN.prototype.property={};QN.prototype.normal={};QN.prototype.space=null;function cae(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new QN(n,r,e)}function F3(t){return t.toLowerCase()}class yc{constructor(e,n){this.property=e,this.attribute=n}}yc.prototype.space=null;yc.prototype.boolean=!1;yc.prototype.booleanish=!1;yc.prototype.overloadedBoolean=!1;yc.prototype.number=!1;yc.prototype.commaSeparated=!1;yc.prototype.spaceSeparated=!1;yc.prototype.commaOrSpaceSeparated=!1;yc.prototype.mustUseProperty=!1;yc.prototype.defined=!1;let XRe=0;const cr=nb(),Ta=nb(),dae=nb(),Rt=nb(),_i=nb(),vw=nb(),nu=nb();function nb(){return 2**++XRe}const B3=Object.freeze(Object.defineProperty({__proto__:null,boolean:cr,booleanish:Ta,commaOrSpaceSeparated:nu,commaSeparated:vw,number:Rt,overloadedBoolean:dae,spaceSeparated:_i},Symbol.toStringTag,{value:"Module"})),eM=Object.keys(B3);class oL extends yc{constructor(e,n,r,i){let a=-1;if(super(e,n),xH(this,"space",i),typeof r=="number")for(;++a<eM.length;){const s=eM[a];xH(this,eM[a],(r&B3[s])===B3[s])}}}oL.prototype.defined=!0;function xH(t,e,n){n&&(t[e]=n)}const ZRe={}.hasOwnProperty;function sx(t){const e={},n={};let r;for(r in t.properties)if(ZRe.call(t.properties,r)){const i=t.properties[r],a=new oL(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[F3(r)]=r,n[F3(a.attribute)]=r}return new QN(e,n,t.space)}const fae=sx({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),hae=sx({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function mae(t,e){return e in t?t[e]:e}function pae(t,e){return mae(t,e.toLowerCase())}const gae=sx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:pae,properties:{xmlns:null,xmlnsXLink:null}}),vae=sx({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Ta,ariaAutoComplete:null,ariaBusy:Ta,ariaChecked:Ta,ariaColCount:Rt,ariaColIndex:Rt,ariaColSpan:Rt,ariaControls:_i,ariaCurrent:null,ariaDescribedBy:_i,ariaDetails:null,ariaDisabled:Ta,ariaDropEffect:_i,ariaErrorMessage:null,ariaExpanded:Ta,ariaFlowTo:_i,ariaGrabbed:Ta,ariaHasPopup:null,ariaHidden:Ta,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:_i,ariaLevel:Rt,ariaLive:null,ariaModal:Ta,ariaMultiLine:Ta,ariaMultiSelectable:Ta,ariaOrientation:null,ariaOwns:_i,ariaPlaceholder:null,ariaPosInSet:Rt,ariaPressed:Ta,ariaReadOnly:Ta,ariaRelevant:null,ariaRequired:Ta,ariaRoleDescription:_i,ariaRowCount:Rt,ariaRowIndex:Rt,ariaRowSpan:Rt,ariaSelected:Ta,ariaSetSize:Rt,ariaSort:null,ariaValueMax:Rt,ariaValueMin:Rt,ariaValueNow:Rt,ariaValueText:null,role:null}}),QRe=sx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:pae,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:vw,acceptCharset:_i,accessKey:_i,action:null,allow:null,allowFullScreen:cr,allowPaymentRequest:cr,allowUserMedia:cr,alt:null,as:null,async:cr,autoCapitalize:null,autoComplete:_i,autoFocus:cr,autoPlay:cr,blocking:_i,capture:null,charSet:null,checked:cr,cite:null,className:_i,cols:Rt,colSpan:null,content:null,contentEditable:Ta,controls:cr,controlsList:_i,coords:Rt|vw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:cr,defer:cr,dir:null,dirName:null,disabled:cr,download:dae,draggable:Ta,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:cr,formTarget:null,headers:_i,height:Rt,hidden:cr,high:Rt,href:null,hrefLang:null,htmlFor:_i,httpEquiv:_i,id:null,imageSizes:null,imageSrcSet:null,inert:cr,inputMode:null,integrity:null,is:null,isMap:cr,itemId:null,itemProp:_i,itemRef:_i,itemScope:cr,itemType:_i,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:cr,low:Rt,manifest:null,max:null,maxLength:Rt,media:null,method:null,min:null,minLength:Rt,multiple:cr,muted:cr,name:null,nonce:null,noModule:cr,noValidate:cr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:cr,optimum:Rt,pattern:null,ping:_i,placeholder:null,playsInline:cr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:cr,referrerPolicy:null,rel:_i,required:cr,reversed:cr,rows:Rt,rowSpan:Rt,sandbox:_i,scope:null,scoped:cr,seamless:cr,selected:cr,shadowRootClonable:cr,shadowRootDelegatesFocus:cr,shadowRootMode:null,shape:null,size:Rt,sizes:null,slot:null,span:Rt,spellCheck:Ta,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Rt,step:null,style:null,tabIndex:Rt,target:null,title:null,translate:null,type:null,typeMustMatch:cr,useMap:null,value:Ta,width:Rt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:_i,axis:null,background:null,bgColor:null,border:Rt,borderColor:null,bottomMargin:Rt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:cr,declare:cr,event:null,face:null,frame:null,frameBorder:null,hSpace:Rt,leftMargin:Rt,link:null,longDesc:null,lowSrc:null,marginHeight:Rt,marginWidth:Rt,noResize:cr,noHref:cr,noShade:cr,noWrap:cr,object:null,profile:null,prompt:null,rev:null,rightMargin:Rt,rules:null,scheme:null,scrolling:Ta,standby:null,summary:null,text:null,topMargin:Rt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Rt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:cr,disableRemotePlayback:cr,prefix:null,property:null,results:Rt,security:null,unselectable:null}}),eOe=sx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:mae,properties:{about:nu,accentHeight:Rt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Rt,amplitude:Rt,arabicForm:null,ascent:Rt,attributeName:null,attributeType:null,azimuth:Rt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Rt,by:null,calcMode:null,capHeight:Rt,className:_i,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Rt,diffuseConstant:Rt,direction:null,display:null,dur:null,divisor:Rt,dominantBaseline:null,download:cr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Rt,enableBackground:null,end:null,event:null,exponent:Rt,externalResourcesRequired:null,fill:null,fillOpacity:Rt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:vw,g2:vw,glyphName:vw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Rt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Rt,horizOriginX:Rt,horizOriginY:Rt,id:null,ideographic:Rt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Rt,k:Rt,k1:Rt,k2:Rt,k3:Rt,k4:Rt,kernelMatrix:nu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Rt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Rt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Rt,overlineThickness:Rt,paintOrder:null,panose1:null,path:null,pathLength:Rt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:_i,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Rt,pointsAtY:Rt,pointsAtZ:Rt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nu,rev:nu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nu,requiredFeatures:nu,requiredFonts:nu,requiredFormats:nu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Rt,specularExponent:Rt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Rt,strikethroughThickness:Rt,string:null,stroke:null,strokeDashArray:nu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Rt,strokeOpacity:Rt,strokeWidth:null,style:null,surfaceScale:Rt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nu,tabIndex:Rt,tableValues:null,target:null,targetX:Rt,targetY:Rt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nu,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Rt,underlineThickness:Rt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Rt,values:null,vAlphabetic:Rt,vMathematical:Rt,vectorEffect:null,vHanging:Rt,vIdeographic:Rt,version:null,vertAdvY:Rt,vertOriginX:Rt,vertOriginY:Rt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Rt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),tOe=/^data[-\w.:]+$/i,SH=/-[a-z]/g,nOe=/[A-Z]/g;function rOe(t,e){const n=F3(e);let r=e,i=yc;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&tOe.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(SH,aOe);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!SH.test(a)){let s=a.replace(nOe,iOe);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}i=oL}return new i(r,e)}function iOe(t){return"-"+t.toLowerCase()}function aOe(t){return t.charAt(1).toUpperCase()}const sOe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},oOe=cae([hae,fae,gae,vae,QRe],"html"),lL=cae([hae,fae,gae,vae,eOe],"svg");function lOe(t){return t.join(" ").trim()}var yae={},EH=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,uOe=/\n/g,cOe=/^\s*/,dOe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,fOe=/^:\s*/,hOe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,mOe=/^[;\s]*/,pOe=/^\s+|\s+$/g,gOe=`
`,NH="/",_H="*",uy="",vOe="comment",yOe="declaration",bOe=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(v){var y=v.match(uOe);y&&(n+=y.length);var x=v.lastIndexOf(gOe);r=~x?v.length-x:r+v.length}function a(){var v={line:n,column:r};return function(y){return y.position=new s(v),c(),y}}function s(v){this.start=v,this.end={line:n,column:r},this.source=e.source}s.prototype.content=t;function o(v){var y=new Error(e.source+":"+n+":"+r+": "+v);if(y.reason=v,y.filename=e.source,y.line=n,y.column=r,y.source=t,!e.silent)throw y}function l(v){var y=v.exec(t);if(y){var x=y[0];return i(x),t=t.slice(x.length),y}}function c(){l(cOe)}function f(v){var y;for(v=v||[];y=h();)y!==!1&&v.push(y);return v}function h(){var v=a();if(!(NH!=t.charAt(0)||_H!=t.charAt(1))){for(var y=2;uy!=t.charAt(y)&&(_H!=t.charAt(y)||NH!=t.charAt(y+1));)++y;if(y+=2,uy===t.charAt(y-1))return o("End of comment missing");var x=t.slice(2,y-2);return r+=2,i(x),t=t.slice(y),r+=2,v({type:vOe,comment:x})}}function m(){var v=a(),y=l(dOe);if(y){if(h(),!l(fOe))return o("property missing ':'");var x=l(hOe),S=v({type:yOe,property:CH(y[0].replace(EH,uy)),value:x?CH(x[0].replace(EH,uy)):uy});return l(mOe),S}}function p(){var v=[];f(v);for(var y;y=m();)y!==!1&&(v.push(y),f(v));return v}return c(),p()};function CH(t){return t?t.replace(pOe,uy):uy}var wOe=$f&&$f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yae,"__esModule",{value:!0});var xOe=wOe(bOe);function SOe(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,xOe.default)(t),i=typeof e=="function";return r.forEach(function(a){if(a.type==="declaration"){var s=a.property,o=a.value;i?e(s,o,a):o&&(n=n||{},n[s]=o)}}),n}var TH=yae.default=SOe;const EOe=TH.default||TH,bae=wae("end"),uL=wae("start");function wae(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function NOe(t){const e=uL(t),n=bae(t);if(e&&n)return{start:e,end:n}}function SE(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?DH(t.position):"start"in t||"end"in t?DH(t):"line"in t||"column"in t?U3(t):""}function U3(t){return kH(t&&t.line)+":"+kH(t&&t.column)}function DH(t){return U3(t&&t.start)+"-"+U3(t&&t.end)}function kH(t){return t&&typeof t=="number"?t:1}class po extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},s=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?i=e:!a.cause&&e&&(s=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=o?o.line:void 0,this.name=SE(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}po.prototype.file="";po.prototype.name="";po.prototype.reason="";po.prototype.message="";po.prototype.stack="";po.prototype.column=void 0;po.prototype.line=void 0;po.prototype.ancestors=void 0;po.prototype.cause=void 0;po.prototype.fatal=void 0;po.prototype.place=void 0;po.prototype.ruleId=void 0;po.prototype.source=void 0;const cL={}.hasOwnProperty,_Oe=new Map,COe=/[A-Z]/g,TOe=/-([a-z])/g,DOe=new Set(["table","tbody","thead","tfoot","tr"]),kOe=new Set(["td","th"]),xae="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function POe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=$Oe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=VOe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?lL:oOe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=Sae(i,t,void 0);return a&&typeof a!="string"?a:i.create(t,i.Fragment,{children:a||void 0},void 0)}function Sae(t,e,n){if(e.type==="element")return AOe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return ROe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return jOe(t,e,n);if(e.type==="mdxjsEsm")return OOe(t,e);if(e.type==="root")return IOe(t,e,n);if(e.type==="text")return MOe(t,e)}function AOe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=lL,t.schema=i),t.ancestors.push(e);const a=Nae(t,e.tagName,!1),s=LOe(t,e);let o=fL(t,e);return DOe.has(e.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!qRe(l):!0})),Eae(t,s,a,e),dL(s,o),t.ancestors.pop(),t.schema=r,t.create(e,a,s,n)}function ROe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return Fe(r.type==="ExpressionStatement"),t.evaluater.evaluateExpression(r.expression)}rN(t,e.position)}function OOe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);rN(t,e.position)}function jOe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=lL,t.schema=i),t.ancestors.push(e);const a=e.name===null?t.Fragment:Nae(t,e.name,!0),s=FOe(t,e),o=fL(t,e);return Eae(t,s,a,e),dL(s,o),t.ancestors.pop(),t.schema=r,t.create(e,a,s,n)}function IOe(t,e,n){const r={};return dL(r,fL(t,e)),t.create(e,t.Fragment,r,n)}function MOe(t,e){return e.value}function Eae(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function dL(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function VOe(t,e,n){return r;function r(i,a,s,o){const c=Array.isArray(s.children)?n:e;return o?c(a,s,o):c(a,s)}}function $Oe(t,e){return n;function n(r,i,a,s){const o=Array.isArray(a.children),l=uL(r);return e(i,a,s,o,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function LOe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&cL.call(e.properties,i)){const a=BOe(t,i,e.properties[i]);if(a){const[s,o]=a;t.tableCellAlignToStyle&&s==="align"&&typeof o=="string"&&kOe.has(e.tagName)?r=o:n[s]=o}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function FOe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];Fe(a.type==="ExpressionStatement");const s=a.expression;Fe(s.type==="ObjectExpression");const o=s.properties[0];Fe(o.type==="SpreadElement"),Object.assign(n,t.evaluater.evaluateExpression(o.argument))}else rN(t,e.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const o=r.value.data.estree.body[0];Fe(o.type==="ExpressionStatement"),a=t.evaluater.evaluateExpression(o.expression)}else rN(t,e.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function fL(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:_Oe;for(;++r<e.children.length;){const a=e.children[r];let s;if(t.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const c=i.get(l)||0;s=l+"-"+c,i.set(l,c+1)}}const o=Sae(t,a,s);o!==void 0&&n.push(o)}return n}function BOe(t,e,n){const r=rOe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?HRe(n):lOe(n)),r.property==="style"){let i=typeof n=="object"?n:UOe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=WOe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?sOe[r.property]||r.property:r.attribute,n]}}function UOe(t,e){const n={};try{EOe(e,r)}catch(i){if(!t.ignoreInvalidStyle){const a=i,s=new po("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=xae+"#cannot-parse-style-attribute",s}}return n;function r(i,a){let s=i;s.slice(0,2)!=="--"&&(s.slice(0,4)==="-ms-"&&(s="ms-"+s.slice(4)),s=s.replace(TOe,HOe)),n[s]=a}}function Nae(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,s;for(;++a<i.length;){const o=bH(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};s=s?{type:"MemberExpression",object:s,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}Fe(s,"always a result"),r=s}else r=bH(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return cL.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);rN(t)}function rN(t,e){const n=new po("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=xae+"#cannot-handle-mdx-estrees-without-createevaluater",n}function WOe(t){const e={};let n;for(n in t)cL.call(t,n)&&(e[zOe(n)]=t[n]);return e}function zOe(t){let e=t.replace(COe,GOe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function HOe(t,e){return e.toUpperCase()}function GOe(t){return"-"+t.toLowerCase()}const tM={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},KOe={};function YOe(t,e){const n=KOe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return _ae(t,r,i)}function _ae(t,e,n){if(JOe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return PH(t.children,e,n)}return Array.isArray(t)?PH(t,e,n):""}function PH(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=_ae(t[i],e,n);return r.join("")}function JOe(t){return!!(t&&typeof t=="object")}const AH=document.createElement("i");function hL(t){const e="&"+t+";";AH.innerHTML=e;const n=AH.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}const pe={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,horizontalTab:-2,virtualSpace:-1,eof:null,nul:0,ht:9,lf:10,vt:11,cr:13,space:32,exclamationMark:33,quotationMark:34,numberSign:35,percentSign:37,ampersand:38,apostrophe:39,leftParenthesis:40,rightParenthesis:41,asterisk:42,plusSign:43,dash:45,dot:46,slash:47,digit0:48,digit1:49,digit2:50,digit3:51,digit4:52,digit5:53,digit6:54,digit7:55,digit8:56,digit9:57,colon:58,semicolon:59,lessThan:60,equalsTo:61,greaterThan:62,questionMark:63,atSign:64,uppercaseX:88,leftSquareBracket:91,backslash:92,rightSquareBracket:93,caret:94,underscore:95,graveAccent:96,lowercaseX:120,tilde:126,del:127,byteOrderMarker:65279,replacementCharacter:65533},en={atxHeadingOpeningFenceSizeMax:6,autolinkDomainSizeMax:63,autolinkSchemeSizeMax:32,cdataOpeningString:"CDATA[",characterGroupWhitespace:1,characterGroupPunctuation:2,characterReferenceDecimalSizeMax:7,characterReferenceHexadecimalSizeMax:6,characterReferenceNamedSizeMax:31,codeFencedSequenceSizeMin:3,contentTypeFlow:"flow",contentTypeContent:"content",contentTypeString:"string",contentTypeText:"text",hardBreakPrefixSizeMin:2,htmlRaw:1,htmlComment:2,htmlInstruction:3,htmlDeclaration:4,htmlCdata:5,htmlBasic:6,htmlComplete:7,htmlRawSizeMax:8,linkResourceDestinationBalanceMax:32,linkReferenceSizeMax:999,listItemValueSizeMax:10,numericBaseDecimal:10,numericBaseHexadecimal:16,tabSize:4,thematicBreakMarkerCountMin:3,v8MaxSafeChunkSize:1e4},me={data:"data",whitespace:"whitespace",lineEnding:"lineEnding",lineEndingBlank:"lineEndingBlank",linePrefix:"linePrefix",lineSuffix:"lineSuffix",atxHeading:"atxHeading",atxHeadingSequence:"atxHeadingSequence",atxHeadingText:"atxHeadingText",autolink:"autolink",autolinkEmail:"autolinkEmail",autolinkMarker:"autolinkMarker",autolinkProtocol:"autolinkProtocol",characterEscape:"characterEscape",characterEscapeValue:"characterEscapeValue",characterReference:"characterReference",characterReferenceMarker:"characterReferenceMarker",characterReferenceMarkerNumeric:"characterReferenceMarkerNumeric",characterReferenceMarkerHexadecimal:"characterReferenceMarkerHexadecimal",characterReferenceValue:"characterReferenceValue",codeFenced:"codeFenced",codeFencedFence:"codeFencedFence",codeFencedFenceSequence:"codeFencedFenceSequence",codeFencedFenceInfo:"codeFencedFenceInfo",codeFencedFenceMeta:"codeFencedFenceMeta",codeFlowValue:"codeFlowValue",codeIndented:"codeIndented",codeText:"codeText",codeTextData:"codeTextData",codeTextPadding:"codeTextPadding",codeTextSequence:"codeTextSequence",content:"content",definition:"definition",definitionDestination:"definitionDestination",definitionDestinationLiteral:"definitionDestinationLiteral",definitionDestinationLiteralMarker:"definitionDestinationLiteralMarker",definitionDestinationRaw:"definitionDestinationRaw",definitionDestinationString:"definitionDestinationString",definitionLabel:"definitionLabel",definitionLabelMarker:"definitionLabelMarker",definitionLabelString:"definitionLabelString",definitionMarker:"definitionMarker",definitionTitle:"definitionTitle",definitionTitleMarker:"definitionTitleMarker",definitionTitleString:"definitionTitleString",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",escapeMarker:"escapeMarker",hardBreakEscape:"hardBreakEscape",hardBreakTrailing:"hardBreakTrailing",htmlFlow:"htmlFlow",htmlFlowData:"htmlFlowData",htmlText:"htmlText",htmlTextData:"htmlTextData",image:"image",label:"label",labelText:"labelText",labelLink:"labelLink",labelImage:"labelImage",labelMarker:"labelMarker",labelImageMarker:"labelImageMarker",labelEnd:"labelEnd",link:"link",paragraph:"paragraph",reference:"reference",referenceMarker:"referenceMarker",referenceString:"referenceString",resource:"resource",resourceDestination:"resourceDestination",resourceDestinationLiteral:"resourceDestinationLiteral",resourceDestinationLiteralMarker:"resourceDestinationLiteralMarker",resourceDestinationRaw:"resourceDestinationRaw",resourceDestinationString:"resourceDestinationString",resourceMarker:"resourceMarker",resourceTitle:"resourceTitle",resourceTitleMarker:"resourceTitleMarker",resourceTitleString:"resourceTitleString",setextHeading:"setextHeading",setextHeadingText:"setextHeadingText",setextHeadingLine:"setextHeadingLine",setextHeadingLineSequence:"setextHeadingLineSequence",strong:"strong",strongSequence:"strongSequence",strongText:"strongText",thematicBreak:"thematicBreak",thematicBreakSequence:"thematicBreakSequence",blockQuote:"blockQuote",blockQuotePrefix:"blockQuotePrefix",blockQuoteMarker:"blockQuoteMarker",blockQuotePrefixWhitespace:"blockQuotePrefixWhitespace",listOrdered:"listOrdered",listUnordered:"listUnordered",listItemIndent:"listItemIndent",listItemMarker:"listItemMarker",listItemPrefix:"listItemPrefix",listItemPrefixWhitespace:"listItemPrefixWhitespace",listItemValue:"listItemValue",chunkContent:"chunkContent",chunkFlow:"chunkFlow",chunkText:"chunkText",chunkString:"chunkString"},Af={ht:"	",lf:`
`,cr:"\r",space:" ",replacementCharacter:""};function _m(t,e,n,r){const i=t.length;let a=0,s;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<en.v8MaxSafeChunkSize)s=Array.from(r),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);a<r.length;)s=r.slice(a,a+en.v8MaxSafeChunkSize),s.unshift(e,0),t.splice(...s),a+=en.v8MaxSafeChunkSize,e+=en.v8MaxSafeChunkSize}function ac(t,e){return t.length>0?(_m(t,t.length,0,e),t):e}const RH={}.hasOwnProperty;function qOe(t){const e={};let n=-1;for(;++n<t.length;)XOe(e,t[n]);return e}function XOe(t,e){let n;for(n in e){const i=(RH.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let s;if(a)for(s in a){RH.call(i,s)||(i[s]=[]);const o=a[s];ZOe(i[s],Array.isArray(o)?o:o?[o]:[])}}}function ZOe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);_m(t,0,0,r)}function Cae(t,e){const n=Number.parseInt(t,e);return n<pe.ht||n===pe.vt||n>pe.cr&&n<pe.space||n>pe.tilde&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?Af.replacementCharacter:String.fromCodePoint(n)}function yw(t){return t.replace(/[\t\n\r ]+/g,Af.space).replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Mf=Fg(/[A-Za-z]/),fu=Fg(/[\dA-Za-z]/),QOe=Fg(/[#-'*+\--9=?A-Z^-~]/);function W3(t){return t!==null&&(t<pe.space||t===pe.del)}const z3=Fg(/\d/),e2e=Fg(/[\dA-Fa-f]/),t2e=Fg(/[!-/:-@[-`{-~]/);function Sn(t){return t!==null&&t<pe.horizontalTab}function Tl(t){return t!==null&&(t<pe.nul||t===pe.space)}function Xr(t){return t===pe.horizontalTab||t===pe.virtualSpace||t===pe.space}const n2e=Fg(new RegExp("\\p{P}|\\p{S}","u")),r2e=Fg(/\s/);function Fg(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function ox(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const a=t.charCodeAt(n);let s="";if(a===pe.percentSign&&fu(t.charCodeAt(n+1))&&fu(t.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const o=t.charCodeAt(n+1);a<56320&&o>56319&&o<57344?(s=String.fromCharCode(a,o),i=1):s=Af.replacementCharacter}else s=String.fromCharCode(a);s&&(e.push(t.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Ti(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(l){return Xr(l)?(t.enter(n),o(l)):e(l)}function o(l){return Xr(l)&&a++<i?(t.consume(l),o):(t.exit(n),e(l))}}const i2e={tokenize:a2e};function a2e(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(o){if(Fe(o===pe.eof||Sn(o),"expected eol or eof"),o===pe.eof){t.consume(o);return}return t.enter(me.lineEnding),t.consume(o),t.exit(me.lineEnding),Ti(t,e,me.linePrefix)}function i(o){return Fe(o!==pe.eof&&!Sn(o),"expected anything other than a line ending or EOF"),t.enter(me.paragraph),a(o)}function a(o){const l=t.enter(me.chunkText,{contentType:en.contentTypeText,previous:n});return n&&(n.next=l),n=l,s(o)}function s(o){if(o===pe.eof){t.exit(me.chunkText),t.exit(me.paragraph),t.consume(o);return}return Sn(o)?(t.consume(o),t.exit(me.chunkText),a):(t.consume(o),s)}}const s2e={tokenize:o2e},OH={tokenize:l2e};function o2e(t){const e=this,n=[];let r=0,i,a,s;return o;function o(N){if(r<n.length){const k=n[r];return e.containerState=k[1],Fe(k[0].continuation,"expected `continuation` to be defined on container construct"),t.attempt(k[0].continuation,l,c)(N)}return c(N)}function l(N){if(Fe(e.containerState,"expected `containerState` to be defined after continuation"),r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&_();const k=e.events.length;let P=k,O;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type===me.chunkFlow){O=e.events[P][1].end;break}Fe(O,"could not find previous flow chunk"),S(r);let A=k;for(;A<e.events.length;)e.events[A][1].end=Object.assign({},O),A++;return _m(e.events,P+1,0,e.events.slice(k)),e.events.length=A,c(N)}return o(N)}function c(N){if(r===n.length){if(!i)return m(N);if(i.currentConstruct&&i.currentConstruct.concrete)return v(N);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(OH,f,h)(N)}function f(N){return i&&_(),S(r),m(N)}function h(N){return e.parser.lazy[e.now().line]=r!==n.length,s=e.now().offset,v(N)}function m(N){return e.containerState={},t.attempt(OH,p,v)(N)}function p(N){return Fe(e.currentConstruct,"expected `currentConstruct` to be defined on tokenizer"),Fe(e.containerState,"expected `containerState` to be defined on tokenizer"),r++,n.push([e.currentConstruct,e.containerState]),m(N)}function v(N){if(N===pe.eof){i&&_(),S(0),t.consume(N);return}return i=i||e.parser.flow(e.now()),t.enter(me.chunkFlow,{contentType:en.contentTypeFlow,previous:a,_tokenizer:i}),y(N)}function y(N){if(N===pe.eof){x(t.exit(me.chunkFlow),!0),S(0),t.consume(N);return}return Sn(N)?(t.consume(N),x(t.exit(me.chunkFlow)),r=0,e.interrupt=void 0,o):(t.consume(N),y)}function x(N,k){Fe(i,"expected `childFlow` to be defined when continuing");const P=e.sliceStream(N);if(k&&P.push(null),N.previous=a,a&&(a.next=N),a=N,i.defineSkip(N.start),i.write(P),e.parser.lazy[N.start.line]){let O=i.events.length;for(;O--;)if(i.events[O][1].start.offset<s&&(!i.events[O][1].end||i.events[O][1].end.offset>s))return;const A=e.events.length;let T=A,L,B;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type===me.chunkFlow){if(L){B=e.events[T][1].end;break}L=!0}for(Fe(B,"could not find previous flow chunk"),S(r),O=A;O<e.events.length;)e.events[O][1].end=Object.assign({},B),O++;_m(e.events,T+1,0,e.events.slice(A)),e.events.length=O}}function S(N){let k=n.length;for(;k-- >N;){const P=n[k];e.containerState=P[1],Fe(P[0].exit,"expected `exit` to be defined on container construct"),P[0].exit.call(e,t)}n.length=N}function _(){Fe(e.containerState,"expected `containerState` to be defined when closing flow"),Fe(i,"expected `childFlow` to be defined when closing it"),i.write([pe.eof]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function l2e(t,e,n){return Fe(this.parser.constructs.disable.null,"expected `disable.null` to be populated"),Ti(t,t.attempt(this.parser.constructs.document,e,n),me.linePrefix,this.parser.constructs.disable.null.includes("codeIndented")?void 0:en.tabSize)}function jH(t){if(t===pe.eof||Tl(t)||r2e(t))return en.characterGroupWhitespace;if(n2e(t))return en.characterGroupPunctuation}function mL(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const a=t[i].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const H3={name:"attention",tokenize:c2e,resolveAll:u2e};function u2e(t,e){let n=-1,r,i,a,s,o,l,c,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h=Object.assign({},t[r][1].end),m=Object.assign({},t[n][1].start);IH(h,-l),IH(m,l),s={type:l>1?me.strongSequence:me.emphasisSequence,start:h,end:Object.assign({},t[r][1].end)},o={type:l>1?me.strongSequence:me.emphasisSequence,start:Object.assign({},t[n][1].start),end:m},a={type:l>1?me.strongText:me.emphasisText,start:Object.assign({},t[r][1].end),end:Object.assign({},t[n][1].start)},i={type:l>1?me.strong:me.emphasis,start:Object.assign({},s.start),end:Object.assign({},o.end)},t[r][1].end=Object.assign({},s.start),t[n][1].start=Object.assign({},o.end),c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=ac(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=ac(c,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",a,e]]),Fe(e.parser.constructs.insideSpan.null,"expected `insideSpan` to be populated"),c=ac(c,mL(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=ac(c,[["exit",a,e],["enter",o,e],["exit",o,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,c=ac(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,_m(t,r-1,n-r+3,c),n=r+c.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function c2e(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=jH(r);let a;return s;function s(l){return Fe(l===pe.asterisk||l===pe.underscore,"expected asterisk or underscore"),a=l,t.enter("attentionSequence"),o(l)}function o(l){if(l===a)return t.consume(l),o;const c=t.exit("attentionSequence"),f=jH(l);Fe(n,"expected `attentionMarkers` to be populated");const h=!f||f===en.characterGroupPunctuation&&i||n.includes(l),m=!i||i===en.characterGroupPunctuation&&f||n.includes(r);return c._open=!!(a===pe.asterisk?h:h&&(i||!m)),c._close=!!(a===pe.asterisk?m:m&&(f||!h)),e(l)}}function IH(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const d2e={name:"autolink",tokenize:f2e};function f2e(t,e,n){let r=0;return i;function i(p){return Fe(p===pe.lessThan,"expected `<`"),t.enter(me.autolink),t.enter(me.autolinkMarker),t.consume(p),t.exit(me.autolinkMarker),t.enter(me.autolinkProtocol),a}function a(p){return Mf(p)?(t.consume(p),s):p===pe.atSign?n(p):c(p)}function s(p){return p===pe.plusSign||p===pe.dash||p===pe.dot||fu(p)?(r=1,o(p)):c(p)}function o(p){return p===pe.colon?(t.consume(p),r=0,l):(p===pe.plusSign||p===pe.dash||p===pe.dot||fu(p))&&r++<en.autolinkSchemeSizeMax?(t.consume(p),o):(r=0,c(p))}function l(p){return p===pe.greaterThan?(t.exit(me.autolinkProtocol),t.enter(me.autolinkMarker),t.consume(p),t.exit(me.autolinkMarker),t.exit(me.autolink),e):p===pe.eof||p===pe.space||p===pe.lessThan||W3(p)?n(p):(t.consume(p),l)}function c(p){return p===pe.atSign?(t.consume(p),f):QOe(p)?(t.consume(p),c):n(p)}function f(p){return fu(p)?h(p):n(p)}function h(p){return p===pe.dot?(t.consume(p),r=0,f):p===pe.greaterThan?(t.exit(me.autolinkProtocol).type=me.autolinkEmail,t.enter(me.autolinkMarker),t.consume(p),t.exit(me.autolinkMarker),t.exit(me.autolink),e):m(p)}function m(p){if((p===pe.dash||fu(p))&&r++<en.autolinkDomainSizeMax){const v=p===pe.dash?m:h;return t.consume(p),v}return n(p)}}const QA={tokenize:h2e,partial:!0};function h2e(t,e,n){return r;function r(a){return Xr(a)?Ti(t,i,me.linePrefix)(a):i(a)}function i(a){return a===pe.eof||Sn(a)?e(a):n(a)}}const Tae={name:"blockQuote",tokenize:m2e,continuation:{tokenize:p2e},exit:g2e};function m2e(t,e,n){const r=this;return i;function i(s){if(s===pe.greaterThan){const o=r.containerState;return Fe(o,"expected `containerState` to be defined in container"),o.open||(t.enter(me.blockQuote,{_container:!0}),o.open=!0),t.enter(me.blockQuotePrefix),t.enter(me.blockQuoteMarker),t.consume(s),t.exit(me.blockQuoteMarker),a}return n(s)}function a(s){return Xr(s)?(t.enter(me.blockQuotePrefixWhitespace),t.consume(s),t.exit(me.blockQuotePrefixWhitespace),t.exit(me.blockQuotePrefix),e):(t.exit(me.blockQuotePrefix),e(s))}}function p2e(t,e,n){const r=this;return i;function i(s){return Xr(s)?(Fe(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),Ti(t,a,me.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:en.tabSize)(s)):a(s)}function a(s){return t.attempt(Tae,e,n)(s)}}function g2e(t){t.exit(me.blockQuote)}const Dae={name:"characterEscape",tokenize:v2e};function v2e(t,e,n){return r;function r(a){return Fe(a===pe.backslash,"expected `\\`"),t.enter(me.characterEscape),t.enter(me.escapeMarker),t.consume(a),t.exit(me.escapeMarker),i}function i(a){return t2e(a)?(t.enter(me.characterEscapeValue),t.consume(a),t.exit(me.characterEscapeValue),t.exit(me.characterEscape),e):n(a)}}const kae={name:"characterReference",tokenize:y2e};function y2e(t,e,n){const r=this;let i=0,a,s;return o;function o(h){return Fe(h===pe.ampersand,"expected `&`"),t.enter(me.characterReference),t.enter(me.characterReferenceMarker),t.consume(h),t.exit(me.characterReferenceMarker),l}function l(h){return h===pe.numberSign?(t.enter(me.characterReferenceMarkerNumeric),t.consume(h),t.exit(me.characterReferenceMarkerNumeric),c):(t.enter(me.characterReferenceValue),a=en.characterReferenceNamedSizeMax,s=fu,f(h))}function c(h){return h===pe.uppercaseX||h===pe.lowercaseX?(t.enter(me.characterReferenceMarkerHexadecimal),t.consume(h),t.exit(me.characterReferenceMarkerHexadecimal),t.enter(me.characterReferenceValue),a=en.characterReferenceHexadecimalSizeMax,s=e2e,f):(t.enter(me.characterReferenceValue),a=en.characterReferenceDecimalSizeMax,s=z3,f(h))}function f(h){if(h===pe.semicolon&&i){const m=t.exit(me.characterReferenceValue);return s===fu&&!hL(r.sliceSerialize(m))?n(h):(t.enter(me.characterReferenceMarker),t.consume(h),t.exit(me.characterReferenceMarker),t.exit(me.characterReference),e)}return s(h)&&i++<a?(t.consume(h),f):n(h)}}const MH={tokenize:w2e,partial:!0},VH={name:"codeFenced",tokenize:b2e,concrete:!0};function b2e(t,e,n){const r=this,i={tokenize:P,partial:!0};let a=0,s=0,o;return l;function l(O){return c(O)}function c(O){Fe(O===pe.graveAccent||O===pe.tilde,"expected `` ` `` or `~`");const A=r.events[r.events.length-1];return a=A&&A[1].type===me.linePrefix?A[2].sliceSerialize(A[1],!0).length:0,o=O,t.enter(me.codeFenced),t.enter(me.codeFencedFence),t.enter(me.codeFencedFenceSequence),f(O)}function f(O){return O===o?(s++,t.consume(O),f):s<en.codeFencedSequenceSizeMin?n(O):(t.exit(me.codeFencedFenceSequence),Xr(O)?Ti(t,h,me.whitespace)(O):h(O))}function h(O){return O===pe.eof||Sn(O)?(t.exit(me.codeFencedFence),r.interrupt?e(O):t.check(MH,y,k)(O)):(t.enter(me.codeFencedFenceInfo),t.enter(me.chunkString,{contentType:en.contentTypeString}),m(O))}function m(O){return O===pe.eof||Sn(O)?(t.exit(me.chunkString),t.exit(me.codeFencedFenceInfo),h(O)):Xr(O)?(t.exit(me.chunkString),t.exit(me.codeFencedFenceInfo),Ti(t,p,me.whitespace)(O)):O===pe.graveAccent&&O===o?n(O):(t.consume(O),m)}function p(O){return O===pe.eof||Sn(O)?h(O):(t.enter(me.codeFencedFenceMeta),t.enter(me.chunkString,{contentType:en.contentTypeString}),v(O))}function v(O){return O===pe.eof||Sn(O)?(t.exit(me.chunkString),t.exit(me.codeFencedFenceMeta),h(O)):O===pe.graveAccent&&O===o?n(O):(t.consume(O),v)}function y(O){return Fe(Sn(O),"expected eol"),t.attempt(i,k,x)(O)}function x(O){return Fe(Sn(O),"expected eol"),t.enter(me.lineEnding),t.consume(O),t.exit(me.lineEnding),S}function S(O){return a>0&&Xr(O)?Ti(t,_,me.linePrefix,a+1)(O):_(O)}function _(O){return O===pe.eof||Sn(O)?t.check(MH,y,k)(O):(t.enter(me.codeFlowValue),N(O))}function N(O){return O===pe.eof||Sn(O)?(t.exit(me.codeFlowValue),_(O)):(t.consume(O),N)}function k(O){return t.exit(me.codeFenced),e(O)}function P(O,A,T){let L=0;return B;function B(H){return Fe(Sn(H),"expected eol"),O.enter(me.lineEnding),O.consume(H),O.exit(me.lineEnding),W}function W(H){return Fe(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),O.enter(me.codeFencedFence),Xr(H)?Ti(O,Y,me.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:en.tabSize)(H):Y(H)}function Y(H){return H===o?(O.enter(me.codeFencedFenceSequence),V(H)):T(H)}function V(H){return H===o?(L++,O.consume(H),V):L>=s?(O.exit(me.codeFencedFenceSequence),Xr(H)?Ti(O,I,me.whitespace)(H):I(H)):T(H)}function I(H){return H===pe.eof||Sn(H)?(O.exit(me.codeFencedFence),A(H)):T(H)}}}function w2e(t,e,n){const r=this;return i;function i(s){return s===pe.eof?n(s):(Fe(Sn(s),"expected eol"),t.enter(me.lineEnding),t.consume(s),t.exit(me.lineEnding),a)}function a(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}const nM={name:"codeIndented",tokenize:S2e},x2e={tokenize:E2e,partial:!0};function S2e(t,e,n){const r=this;return i;function i(c){return Fe(Xr(c)),t.enter(me.codeIndented),Ti(t,a,me.linePrefix,en.tabSize+1)(c)}function a(c){const f=r.events[r.events.length-1];return f&&f[1].type===me.linePrefix&&f[2].sliceSerialize(f[1],!0).length>=en.tabSize?s(c):n(c)}function s(c){return c===pe.eof?l(c):Sn(c)?t.attempt(x2e,s,l)(c):(t.enter(me.codeFlowValue),o(c))}function o(c){return c===pe.eof||Sn(c)?(t.exit(me.codeFlowValue),s(c)):(t.consume(c),o)}function l(c){return t.exit(me.codeIndented),e(c)}}function E2e(t,e,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):Sn(s)?(t.enter(me.lineEnding),t.consume(s),t.exit(me.lineEnding),i):Ti(t,a,me.linePrefix,en.tabSize+1)(s)}function a(s){const o=r.events[r.events.length-1];return o&&o[1].type===me.linePrefix&&o[2].sliceSerialize(o[1],!0).length>=en.tabSize?e(s):Sn(s)?i(s):n(s)}}const N2e={name:"codeText",tokenize:C2e,resolve:_2e,previous:Pae};function _2e(t){let e=t.length-4,n=3,r,i;if((t[n][1].type===me.lineEnding||t[n][1].type==="space")&&(t[e][1].type===me.lineEnding||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type===me.codeTextData){t[n][1].type=me.codeTextPadding,t[e][1].type=me.codeTextPadding,n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!==me.lineEnding&&(i=r):(r===e||t[r][1].type===me.lineEnding)&&(t[i][1].type=me.codeTextData,r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function Pae(t){return t!==pe.graveAccent||this.events[this.events.length-1][1].type===me.characterEscape}function C2e(t,e,n){const r=this;let i=0,a,s;return o;function o(m){return Fe(m===pe.graveAccent,"expected `` ` ``"),Fe(Pae.call(r,r.previous),"expected correct previous"),t.enter(me.codeText),t.enter(me.codeTextSequence),l(m)}function l(m){return m===pe.graveAccent?(t.consume(m),i++,l):(t.exit(me.codeTextSequence),c(m))}function c(m){return m===pe.eof?n(m):m===pe.space?(t.enter("space"),t.consume(m),t.exit("space"),c):m===pe.graveAccent?(s=t.enter(me.codeTextSequence),a=0,h(m)):Sn(m)?(t.enter(me.lineEnding),t.consume(m),t.exit(me.lineEnding),c):(t.enter(me.codeTextData),f(m))}function f(m){return m===pe.eof||m===pe.space||m===pe.graveAccent||Sn(m)?(t.exit(me.codeTextData),c(m)):(t.consume(m),f)}function h(m){return m===pe.graveAccent?(t.consume(m),a++,h):a===i?(t.exit(me.codeTextSequence),t.exit(me.codeText),e(m)):(s.type=me.codeTextData,f(m))}}class T2e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&SS(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),SS(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),SS(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);SS(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);SS(this.left,n.reverse())}}}function SS(t,e){let n=0;if(e.length<en.v8MaxSafeChunkSize)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+en.v8MaxSafeChunkSize)),n+=en.v8MaxSafeChunkSize}function Aae(t){const e={};let n=-1,r,i,a,s,o,l,c;const f=new T2e(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type===me.chunkFlow&&f.get(n-1)[1].type===me.listItemPrefix&&(Fe(r[1]._tokenizer,"expected `_tokenizer` on subtokens"),l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type===me.lineEndingBlank&&(a+=2),a<l.length&&l[a][1].type===me.content))for(;++a<l.length&&l[a][1].type!==me.content;)l[a][1].type===me.chunkText&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,D2e(f,n)),n=e[n],c=!0);else if(r[1]._container){for(a=n,i=void 0;a--&&(s=f.get(a),s[1].type===me.lineEnding||s[1].type===me.lineEndingBlank);)s[0]==="enter"&&(i&&(f.get(i)[1].type=me.lineEndingBlank),s[1].type=me.lineEnding,i=a);i&&(r[1].end=Object.assign({},f.get(i)[1].start),o=f.slice(i,n),o.unshift(r),f.splice(i,n-i+1,o))}}return _m(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!c}function D2e(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const a=[];Fe(n.contentType,"expected `contentType` on subtokens");const s=n._tokenizer||r.parser[n.contentType](n.start),o=s.events,l=[],c={};let f,h,m=-1,p=n,v=0,y=0;const x=[y];for(;p;){for(;t.get(++i)[1]!==p;);Fe(!h||p.previous===h,"expected previous to match"),Fe(!h||h.next===p,"expected next to match"),a.push(i),p._tokenizer||(f=r.sliceStream(p),p.next||f.push(pe.eof),h&&s.defineSkip(p.start),p._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(f),p._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++m<o.length;)o[m][0]==="exit"&&o[m-1][0]==="enter"&&o[m][1].type===o[m-1][1].type&&o[m][1].start.line!==o[m][1].end.line&&(Fe(p,"expected a current token"),y=m+1,x.push(y),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(s.events=[],p?(p._tokenizer=void 0,p.previous=void 0,Fe(!p.next,"expected no next token")):x.pop(),m=x.length;m--;){const S=o.slice(x[m],x[m+1]),_=a.pop();Fe(_!==void 0,"expected a start position when splicing"),l.push([_,_+S.length-1]),t.splice(_,2,S)}for(l.reverse(),m=-1;++m<l.length;)c[v+l[m][0]]=v+l[m][1],v+=l[m][1]-l[m][0]-1;return c}const k2e={tokenize:R2e,resolve:A2e},P2e={tokenize:O2e,partial:!0};function A2e(t){return Aae(t),t}function R2e(t,e){let n;return r;function r(o){return Fe(o!==pe.eof&&!Sn(o),"expected no eof or eol"),t.enter(me.content),n=t.enter(me.chunkContent,{contentType:en.contentTypeContent}),i(o)}function i(o){return o===pe.eof?a(o):Sn(o)?t.check(P2e,s,a)(o):(t.consume(o),i)}function a(o){return t.exit(me.chunkContent),t.exit(me.content),e(o)}function s(o){return Fe(Sn(o),"expected eol"),t.consume(o),t.exit(me.chunkContent),Fe(n,"expected previous token"),n.next=t.enter(me.chunkContent,{contentType:en.contentTypeContent,previous:n}),n=n.next,i}}function O2e(t,e,n){const r=this;return i;function i(s){return Fe(Sn(s),"expected a line ending"),t.exit(me.chunkContent),t.enter(me.lineEnding),t.consume(s),t.exit(me.lineEnding),Ti(t,a,me.linePrefix)}function a(s){if(s===pe.eof||Sn(s))return n(s);Fe(r.parser.constructs.disable.null,"expected `disable.null` to be populated");const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type===me.linePrefix&&o[2].sliceSerialize(o[1],!0).length>=en.tabSize?e(s):t.interrupt(r.parser.constructs.flow,n,e)(s)}}function Rae(t,e,n,r,i,a,s,o,l){const c=l||Number.POSITIVE_INFINITY;let f=0;return h;function h(S){return S===pe.lessThan?(t.enter(r),t.enter(i),t.enter(a),t.consume(S),t.exit(a),m):S===pe.eof||S===pe.space||S===pe.rightParenthesis||W3(S)?n(S):(t.enter(r),t.enter(s),t.enter(o),t.enter(me.chunkString,{contentType:en.contentTypeString}),y(S))}function m(S){return S===pe.greaterThan?(t.enter(a),t.consume(S),t.exit(a),t.exit(i),t.exit(r),e):(t.enter(o),t.enter(me.chunkString,{contentType:en.contentTypeString}),p(S))}function p(S){return S===pe.greaterThan?(t.exit(me.chunkString),t.exit(o),m(S)):S===pe.eof||S===pe.lessThan||Sn(S)?n(S):(t.consume(S),S===pe.backslash?v:p)}function v(S){return S===pe.lessThan||S===pe.greaterThan||S===pe.backslash?(t.consume(S),p):p(S)}function y(S){return!f&&(S===pe.eof||S===pe.rightParenthesis||Tl(S))?(t.exit(me.chunkString),t.exit(o),t.exit(s),t.exit(r),e(S)):f<c&&S===pe.leftParenthesis?(t.consume(S),f++,y):S===pe.rightParenthesis?(t.consume(S),f--,y):S===pe.eof||S===pe.space||S===pe.leftParenthesis||W3(S)?n(S):(t.consume(S),S===pe.backslash?x:y)}function x(S){return S===pe.leftParenthesis||S===pe.rightParenthesis||S===pe.backslash?(t.consume(S),y):y(S)}}function Oae(t,e,n,r,i,a){const s=this;let o=0,l;return c;function c(p){return Fe(p===pe.leftSquareBracket,"expected `[`"),t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(a),f}function f(p){return o>en.linkReferenceSizeMax||p===pe.eof||p===pe.leftSquareBracket||p===pe.rightSquareBracket&&!l||p===pe.caret&&!o&&"_hiddenFootnoteSupport"in s.parser.constructs?n(p):p===pe.rightSquareBracket?(t.exit(a),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):Sn(p)?(t.enter(me.lineEnding),t.consume(p),t.exit(me.lineEnding),f):(t.enter(me.chunkString,{contentType:en.contentTypeString}),h(p))}function h(p){return p===pe.eof||p===pe.leftSquareBracket||p===pe.rightSquareBracket||Sn(p)||o++>en.linkReferenceSizeMax?(t.exit(me.chunkString),f(p)):(t.consume(p),l||(l=!Xr(p)),p===pe.backslash?m:h)}function m(p){return p===pe.leftSquareBracket||p===pe.backslash||p===pe.rightSquareBracket?(t.consume(p),o++,h):h(p)}}function jae(t,e,n,r,i,a){let s;return o;function o(m){return m===pe.quotationMark||m===pe.apostrophe||m===pe.leftParenthesis?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),s=m===pe.leftParenthesis?pe.rightParenthesis:m,l):n(m)}function l(m){return m===s?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(a),c(m))}function c(m){return m===s?(t.exit(a),l(s)):m===pe.eof?n(m):Sn(m)?(t.enter(me.lineEnding),t.consume(m),t.exit(me.lineEnding),Ti(t,c,me.linePrefix)):(t.enter(me.chunkString,{contentType:en.contentTypeString}),f(m))}function f(m){return m===s||m===pe.eof||Sn(m)?(t.exit(me.chunkString),c(m)):(t.consume(m),m===pe.backslash?h:f)}function h(m){return m===s||m===pe.backslash?(t.consume(m),f):f(m)}}function EE(t,e){let n;return r;function r(i){return Sn(i)?(t.enter(me.lineEnding),t.consume(i),t.exit(me.lineEnding),n=!0,r):Xr(i)?Ti(t,r,n?me.linePrefix:me.lineSuffix)(i):e(i)}}const j2e={name:"definition",tokenize:M2e},I2e={tokenize:V2e,partial:!0};function M2e(t,e,n){const r=this;let i;return a;function a(p){return t.enter(me.definition),s(p)}function s(p){return Fe(p===pe.leftSquareBracket,"expected `[`"),Oae.call(r,t,o,n,me.definitionLabel,me.definitionLabelMarker,me.definitionLabelString)(p)}function o(p){return i=yw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===pe.colon?(t.enter(me.definitionMarker),t.consume(p),t.exit(me.definitionMarker),l):n(p)}function l(p){return Tl(p)?EE(t,c)(p):c(p)}function c(p){return Rae(t,f,n,me.definitionDestination,me.definitionDestinationLiteral,me.definitionDestinationLiteralMarker,me.definitionDestinationRaw,me.definitionDestinationString)(p)}function f(p){return t.attempt(I2e,h,h)(p)}function h(p){return Xr(p)?Ti(t,m,me.whitespace)(p):m(p)}function m(p){return p===pe.eof||Sn(p)?(t.exit(me.definition),r.parser.defined.push(i),e(p)):n(p)}}function V2e(t,e,n){return r;function r(o){return Tl(o)?EE(t,i)(o):n(o)}function i(o){return jae(t,a,n,me.definitionTitle,me.definitionTitleMarker,me.definitionTitleString)(o)}function a(o){return Xr(o)?Ti(t,s,me.whitespace)(o):s(o)}function s(o){return o===pe.eof||Sn(o)?e(o):n(o)}}const $2e={name:"hardBreakEscape",tokenize:L2e};function L2e(t,e,n){return r;function r(a){return Fe(a===pe.backslash,"expected `\\`"),t.enter(me.hardBreakEscape),t.consume(a),i}function i(a){return Sn(a)?(t.exit(me.hardBreakEscape),e(a)):n(a)}}const F2e={name:"headingAtx",tokenize:U2e,resolve:B2e};function B2e(t,e){let n=t.length-2,r=3,i,a;return t[r][1].type===me.whitespace&&(r+=2),n-2>r&&t[n][1].type===me.whitespace&&(n-=2),t[n][1].type===me.atxHeadingSequence&&(r===n-1||n-4>r&&t[n-2][1].type===me.whitespace)&&(n-=r+1===n?2:4),n>r&&(i={type:me.atxHeadingText,start:t[r][1].start,end:t[n][1].end},a={type:me.chunkText,start:t[r][1].start,end:t[n][1].end,contentType:en.contentTypeText},_m(t,r,n-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),t}function U2e(t,e,n){let r=0;return i;function i(f){return t.enter(me.atxHeading),a(f)}function a(f){return Fe(f===pe.numberSign,"expected `#`"),t.enter(me.atxHeadingSequence),s(f)}function s(f){return f===pe.numberSign&&r++<en.atxHeadingOpeningFenceSizeMax?(t.consume(f),s):f===pe.eof||Tl(f)?(t.exit(me.atxHeadingSequence),o(f)):n(f)}function o(f){return f===pe.numberSign?(t.enter(me.atxHeadingSequence),l(f)):f===pe.eof||Sn(f)?(t.exit(me.atxHeading),e(f)):Xr(f)?Ti(t,o,me.whitespace)(f):(t.enter(me.atxHeadingText),c(f))}function l(f){return f===pe.numberSign?(t.consume(f),l):(t.exit(me.atxHeadingSequence),o(f))}function c(f){return f===pe.eof||f===pe.numberSign||Tl(f)?(t.exit(me.atxHeadingText),o(f)):(t.consume(f),c)}}const W2e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$H=["pre","script","style","textarea"],z2e={name:"htmlFlow",tokenize:Y2e,resolveTo:K2e,concrete:!0},H2e={tokenize:q2e,partial:!0},G2e={tokenize:J2e,partial:!0};function K2e(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type===me.htmlFlow););return e>1&&t[e-2][1].type===me.linePrefix&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Y2e(t,e,n){const r=this;let i,a,s,o,l;return c;function c(te){return f(te)}function f(te){return Fe(te===pe.lessThan,"expected `<`"),t.enter(me.htmlFlow),t.enter(me.htmlFlowData),t.consume(te),h}function h(te){return te===pe.exclamationMark?(t.consume(te),m):te===pe.slash?(t.consume(te),a=!0,y):te===pe.questionMark?(t.consume(te),i=en.htmlInstruction,r.interrupt?e:G):Mf(te)?(t.consume(te),s=String.fromCharCode(te),x):n(te)}function m(te){return te===pe.dash?(t.consume(te),i=en.htmlComment,p):te===pe.leftSquareBracket?(t.consume(te),i=en.htmlCdata,o=0,v):Mf(te)?(t.consume(te),i=en.htmlDeclaration,r.interrupt?e:G):n(te)}function p(te){return te===pe.dash?(t.consume(te),r.interrupt?e:G):n(te)}function v(te){const re=en.cdataOpeningString;return te===re.charCodeAt(o++)?(t.consume(te),o===re.length?r.interrupt?e:Y:v):n(te)}function y(te){return Mf(te)?(t.consume(te),s=String.fromCharCode(te),x):n(te)}function x(te){if(te===pe.eof||te===pe.slash||te===pe.greaterThan||Tl(te)){const re=te===pe.slash,X=s.toLowerCase();return!re&&!a&&$H.includes(X)?(i=en.htmlRaw,r.interrupt?e(te):Y(te)):W2e.includes(s.toLowerCase())?(i=en.htmlBasic,re?(t.consume(te),S):r.interrupt?e(te):Y(te)):(i=en.htmlComplete,r.interrupt&&!r.parser.lazy[r.now().line]?n(te):a?_(te):N(te))}return te===pe.dash||fu(te)?(t.consume(te),s+=String.fromCharCode(te),x):n(te)}function S(te){return te===pe.greaterThan?(t.consume(te),r.interrupt?e:Y):n(te)}function _(te){return Xr(te)?(t.consume(te),_):B(te)}function N(te){return te===pe.slash?(t.consume(te),B):te===pe.colon||te===pe.underscore||Mf(te)?(t.consume(te),k):Xr(te)?(t.consume(te),N):B(te)}function k(te){return te===pe.dash||te===pe.dot||te===pe.colon||te===pe.underscore||fu(te)?(t.consume(te),k):P(te)}function P(te){return te===pe.equalsTo?(t.consume(te),O):Xr(te)?(t.consume(te),P):N(te)}function O(te){return te===pe.eof||te===pe.lessThan||te===pe.equalsTo||te===pe.greaterThan||te===pe.graveAccent?n(te):te===pe.quotationMark||te===pe.apostrophe?(t.consume(te),l=te,A):Xr(te)?(t.consume(te),O):T(te)}function A(te){return te===l?(t.consume(te),l=null,L):te===pe.eof||Sn(te)?n(te):(t.consume(te),A)}function T(te){return te===pe.eof||te===pe.quotationMark||te===pe.apostrophe||te===pe.slash||te===pe.lessThan||te===pe.equalsTo||te===pe.greaterThan||te===pe.graveAccent||Tl(te)?P(te):(t.consume(te),T)}function L(te){return te===pe.slash||te===pe.greaterThan||Xr(te)?N(te):n(te)}function B(te){return te===pe.greaterThan?(t.consume(te),W):n(te)}function W(te){return te===pe.eof||Sn(te)?Y(te):Xr(te)?(t.consume(te),W):n(te)}function Y(te){return te===pe.dash&&i===en.htmlComment?(t.consume(te),q):te===pe.lessThan&&i===en.htmlRaw?(t.consume(te),F):te===pe.greaterThan&&i===en.htmlDeclaration?(t.consume(te),oe):te===pe.questionMark&&i===en.htmlInstruction?(t.consume(te),G):te===pe.rightSquareBracket&&i===en.htmlCdata?(t.consume(te),Z):Sn(te)&&(i===en.htmlBasic||i===en.htmlComplete)?(t.exit(me.htmlFlowData),t.check(H2e,ae,V)(te)):te===pe.eof||Sn(te)?(t.exit(me.htmlFlowData),V(te)):(t.consume(te),Y)}function V(te){return t.check(G2e,I,ae)(te)}function I(te){return Fe(Sn(te)),t.enter(me.lineEnding),t.consume(te),t.exit(me.lineEnding),H}function H(te){return te===pe.eof||Sn(te)?V(te):(t.enter(me.htmlFlowData),Y(te))}function q(te){return te===pe.dash?(t.consume(te),G):Y(te)}function F(te){return te===pe.slash?(t.consume(te),s="",J):Y(te)}function J(te){if(te===pe.greaterThan){const re=s.toLowerCase();return $H.includes(re)?(t.consume(te),oe):Y(te)}return Mf(te)&&s.length<en.htmlRawSizeMax?(t.consume(te),s+=String.fromCharCode(te),J):Y(te)}function Z(te){return te===pe.rightSquareBracket?(t.consume(te),G):Y(te)}function G(te){return te===pe.greaterThan?(t.consume(te),oe):te===pe.dash&&i===en.htmlComment?(t.consume(te),G):Y(te)}function oe(te){return te===pe.eof||Sn(te)?(t.exit(me.htmlFlowData),ae(te)):(t.consume(te),oe)}function ae(te){return t.exit(me.htmlFlow),e(te)}}function J2e(t,e,n){const r=this;return i;function i(s){return Sn(s)?(t.enter(me.lineEnding),t.consume(s),t.exit(me.lineEnding),a):n(s)}function a(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}function q2e(t,e,n){return r;function r(i){return Fe(Sn(i),"expected a line ending"),t.enter(me.lineEnding),t.consume(i),t.exit(me.lineEnding),t.attempt(QA,e,n)}}const X2e={name:"htmlText",tokenize:Z2e};function Z2e(t,e,n){const r=this;let i,a,s;return o;function o(G){return Fe(G===pe.lessThan,"expected `<`"),t.enter(me.htmlText),t.enter(me.htmlTextData),t.consume(G),l}function l(G){return G===pe.exclamationMark?(t.consume(G),c):G===pe.slash?(t.consume(G),P):G===pe.questionMark?(t.consume(G),N):Mf(G)?(t.consume(G),T):n(G)}function c(G){return G===pe.dash?(t.consume(G),f):G===pe.leftSquareBracket?(t.consume(G),a=0,v):Mf(G)?(t.consume(G),_):n(G)}function f(G){return G===pe.dash?(t.consume(G),p):n(G)}function h(G){return G===pe.eof?n(G):G===pe.dash?(t.consume(G),m):Sn(G)?(s=h,F(G)):(t.consume(G),h)}function m(G){return G===pe.dash?(t.consume(G),p):h(G)}function p(G){return G===pe.greaterThan?q(G):G===pe.dash?m(G):h(G)}function v(G){const oe=en.cdataOpeningString;return G===oe.charCodeAt(a++)?(t.consume(G),a===oe.length?y:v):n(G)}function y(G){return G===pe.eof?n(G):G===pe.rightSquareBracket?(t.consume(G),x):Sn(G)?(s=y,F(G)):(t.consume(G),y)}function x(G){return G===pe.rightSquareBracket?(t.consume(G),S):y(G)}function S(G){return G===pe.greaterThan?q(G):G===pe.rightSquareBracket?(t.consume(G),S):y(G)}function _(G){return G===pe.eof||G===pe.greaterThan?q(G):Sn(G)?(s=_,F(G)):(t.consume(G),_)}function N(G){return G===pe.eof?n(G):G===pe.questionMark?(t.consume(G),k):Sn(G)?(s=N,F(G)):(t.consume(G),N)}function k(G){return G===pe.greaterThan?q(G):N(G)}function P(G){return Mf(G)?(t.consume(G),O):n(G)}function O(G){return G===pe.dash||fu(G)?(t.consume(G),O):A(G)}function A(G){return Sn(G)?(s=A,F(G)):Xr(G)?(t.consume(G),A):q(G)}function T(G){return G===pe.dash||fu(G)?(t.consume(G),T):G===pe.slash||G===pe.greaterThan||Tl(G)?L(G):n(G)}function L(G){return G===pe.slash?(t.consume(G),q):G===pe.colon||G===pe.underscore||Mf(G)?(t.consume(G),B):Sn(G)?(s=L,F(G)):Xr(G)?(t.consume(G),L):q(G)}function B(G){return G===pe.dash||G===pe.dot||G===pe.colon||G===pe.underscore||fu(G)?(t.consume(G),B):W(G)}function W(G){return G===pe.equalsTo?(t.consume(G),Y):Sn(G)?(s=W,F(G)):Xr(G)?(t.consume(G),W):L(G)}function Y(G){return G===pe.eof||G===pe.lessThan||G===pe.equalsTo||G===pe.greaterThan||G===pe.graveAccent?n(G):G===pe.quotationMark||G===pe.apostrophe?(t.consume(G),i=G,V):Sn(G)?(s=Y,F(G)):Xr(G)?(t.consume(G),Y):(t.consume(G),I)}function V(G){return G===i?(t.consume(G),i=void 0,H):G===pe.eof?n(G):Sn(G)?(s=V,F(G)):(t.consume(G),V)}function I(G){return G===pe.eof||G===pe.quotationMark||G===pe.apostrophe||G===pe.lessThan||G===pe.equalsTo||G===pe.graveAccent?n(G):G===pe.slash||G===pe.greaterThan||Tl(G)?L(G):(t.consume(G),I)}function H(G){return G===pe.slash||G===pe.greaterThan||Tl(G)?L(G):n(G)}function q(G){return G===pe.greaterThan?(t.consume(G),t.exit(me.htmlTextData),t.exit(me.htmlText),e):n(G)}function F(G){return Fe(s,"expected return state"),Fe(Sn(G),"expected eol"),t.exit(me.htmlTextData),t.enter(me.lineEnding),t.consume(G),t.exit(me.lineEnding),J}function J(G){return Fe(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),Xr(G)?Ti(t,Z,me.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:en.tabSize)(G):Z(G)}function Z(G){return t.enter(me.htmlTextData),s(G)}}const pL={name:"labelEnd",tokenize:ije,resolveTo:rje,resolveAll:nje},Q2e={tokenize:aje},eje={tokenize:sje},tje={tokenize:oje};function nje(t){let e=-1;for(;++e<t.length;){const n=t[e][1];(n.type===me.labelImage||n.type===me.labelLink||n.type===me.labelEnd)&&(t.splice(e+1,n.type===me.labelImage?4:2),n.type=me.data,e++)}return t}function rje(t,e){let n=t.length,r=0,i,a,s,o;for(;n--;)if(i=t[n][1],a){if(i.type===me.link||i.type===me.labelLink&&i._inactive)break;t[n][0]==="enter"&&i.type===me.labelLink&&(i._inactive=!0)}else if(s){if(t[n][0]==="enter"&&(i.type===me.labelImage||i.type===me.labelLink)&&!i._balanced&&(a=n,i.type!==me.labelLink)){r=2;break}}else i.type===me.labelEnd&&(s=n);Fe(a!==void 0,"`open` is supposed to be found"),Fe(s!==void 0,"`close` is supposed to be found");const l={type:t[a][1].type===me.labelLink?me.link:me.image,start:Object.assign({},t[a][1].start),end:Object.assign({},t[t.length-1][1].end)},c={type:me.label,start:Object.assign({},t[a][1].start),end:Object.assign({},t[s][1].end)},f={type:me.labelText,start:Object.assign({},t[a+r+2][1].end),end:Object.assign({},t[s-2][1].start)};return o=[["enter",l,e],["enter",c,e]],o=ac(o,t.slice(a+1,a+r+3)),o=ac(o,[["enter",f,e]]),Fe(e.parser.constructs.insideSpan.null,"expected `insideSpan.null` to be populated"),o=ac(o,mL(e.parser.constructs.insideSpan.null,t.slice(a+r+4,s-3),e)),o=ac(o,[["exit",f,e],t[s-2],t[s-1],["exit",c,e]]),o=ac(o,t.slice(s+1)),o=ac(o,[["exit",l,e]]),_m(t,a,t.length,o),t}function ije(t,e,n){const r=this;let i=r.events.length,a,s;for(;i--;)if((r.events[i][1].type===me.labelImage||r.events[i][1].type===me.labelLink)&&!r.events[i][1]._balanced){a=r.events[i][1];break}return o;function o(m){return Fe(m===pe.rightSquareBracket,"expected `]`"),a?a._inactive?h(m):(s=r.parser.defined.includes(yw(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter(me.labelEnd),t.enter(me.labelMarker),t.consume(m),t.exit(me.labelMarker),t.exit(me.labelEnd),l):n(m)}function l(m){return m===pe.leftParenthesis?t.attempt(Q2e,f,s?f:h)(m):m===pe.leftSquareBracket?t.attempt(eje,f,s?c:h)(m):s?f(m):h(m)}function c(m){return t.attempt(tje,f,h)(m)}function f(m){return e(m)}function h(m){return a._balanced=!0,n(m)}}function aje(t,e,n){return r;function r(h){return Fe(h===pe.leftParenthesis,"expected left paren"),t.enter(me.resource),t.enter(me.resourceMarker),t.consume(h),t.exit(me.resourceMarker),i}function i(h){return Tl(h)?EE(t,a)(h):a(h)}function a(h){return h===pe.rightParenthesis?f(h):Rae(t,s,o,me.resourceDestination,me.resourceDestinationLiteral,me.resourceDestinationLiteralMarker,me.resourceDestinationRaw,me.resourceDestinationString,en.linkResourceDestinationBalanceMax)(h)}function s(h){return Tl(h)?EE(t,l)(h):f(h)}function o(h){return n(h)}function l(h){return h===pe.quotationMark||h===pe.apostrophe||h===pe.leftParenthesis?jae(t,c,n,me.resourceTitle,me.resourceTitleMarker,me.resourceTitleString)(h):f(h)}function c(h){return Tl(h)?EE(t,f)(h):f(h)}function f(h){return h===pe.rightParenthesis?(t.enter(me.resourceMarker),t.consume(h),t.exit(me.resourceMarker),t.exit(me.resource),e):n(h)}}function sje(t,e,n){const r=this;return i;function i(o){return Fe(o===pe.leftSquareBracket,"expected left bracket"),Oae.call(r,t,a,s,me.reference,me.referenceMarker,me.referenceString)(o)}function a(o){return r.parser.defined.includes(yw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):n(o)}function s(o){return n(o)}}function oje(t,e,n){return r;function r(a){return Fe(a===pe.leftSquareBracket,"expected left bracket"),t.enter(me.reference),t.enter(me.referenceMarker),t.consume(a),t.exit(me.referenceMarker),i}function i(a){return a===pe.rightSquareBracket?(t.enter(me.referenceMarker),t.consume(a),t.exit(me.referenceMarker),t.exit(me.reference),e):n(a)}}const lje={name:"labelStartImage",tokenize:uje,resolveAll:pL.resolveAll};function uje(t,e,n){const r=this;return i;function i(o){return Fe(o===pe.exclamationMark,"expected `!`"),t.enter(me.labelImage),t.enter(me.labelImageMarker),t.consume(o),t.exit(me.labelImageMarker),a}function a(o){return o===pe.leftSquareBracket?(t.enter(me.labelMarker),t.consume(o),t.exit(me.labelMarker),t.exit(me.labelImage),s):n(o)}function s(o){return o===pe.caret&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const cje={name:"labelStartLink",tokenize:dje,resolveAll:pL.resolveAll};function dje(t,e,n){const r=this;return i;function i(s){return Fe(s===pe.leftSquareBracket,"expected `[`"),t.enter(me.labelLink),t.enter(me.labelMarker),t.consume(s),t.exit(me.labelMarker),t.exit(me.labelLink),a}function a(s){return s===pe.caret&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const rM={name:"lineEnding",tokenize:fje};function fje(t,e){return n;function n(r){return Fe(Sn(r),"expected eol"),t.enter(me.lineEnding),t.consume(r),t.exit(me.lineEnding),Ti(t,e,me.linePrefix)}}const fk={name:"thematicBreak",tokenize:hje};function hje(t,e,n){let r=0,i;return a;function a(c){return t.enter(me.thematicBreak),s(c)}function s(c){return Fe(c===pe.asterisk||c===pe.dash||c===pe.underscore,"expected `*`, `-`, or `_`"),i=c,o(c)}function o(c){return c===i?(t.enter(me.thematicBreakSequence),l(c)):r>=en.thematicBreakMarkerCountMin&&(c===pe.eof||Sn(c))?(t.exit(me.thematicBreak),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit(me.thematicBreakSequence),Xr(c)?Ti(t,o,me.whitespace)(c):o(c))}}const ml={name:"list",tokenize:gje,continuation:{tokenize:vje},exit:bje},mje={tokenize:wje,partial:!0},pje={tokenize:yje,partial:!0};function gje(t,e,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type===me.linePrefix?i[2].sliceSerialize(i[1],!0).length:0,s=0;return o;function o(p){Fe(r.containerState,"expected state");const v=r.containerState.type||(p===pe.asterisk||p===pe.plusSign||p===pe.dash?me.listUnordered:me.listOrdered);if(v===me.listUnordered?!r.containerState.marker||p===r.containerState.marker:z3(p)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v===me.listUnordered)return t.enter(me.listItemPrefix),p===pe.asterisk||p===pe.dash?t.check(fk,n,c)(p):c(p);if(!r.interrupt||p===pe.digit1)return t.enter(me.listItemPrefix),t.enter(me.listItemValue),l(p)}return n(p)}function l(p){return Fe(r.containerState,"expected state"),z3(p)&&++s<en.listItemValueSizeMax?(t.consume(p),l):(!r.interrupt||s<2)&&(r.containerState.marker?p===r.containerState.marker:p===pe.rightParenthesis||p===pe.dot)?(t.exit(me.listItemValue),c(p)):n(p)}function c(p){return Fe(r.containerState,"expected state"),Fe(p!==pe.eof,"eof (`null`) is not a marker"),t.enter(me.listItemMarker),t.consume(p),t.exit(me.listItemMarker),r.containerState.marker=r.containerState.marker||p,t.check(QA,r.interrupt?n:f,t.attempt(mje,m,h))}function f(p){return Fe(r.containerState,"expected state"),r.containerState.initialBlankLine=!0,a++,m(p)}function h(p){return Xr(p)?(t.enter(me.listItemPrefixWhitespace),t.consume(p),t.exit(me.listItemPrefixWhitespace),m):n(p)}function m(p){return Fe(r.containerState,"expected state"),r.containerState.size=a+r.sliceSerialize(t.exit(me.listItemPrefix),!0).length,e(p)}}function vje(t,e,n){const r=this;return Fe(r.containerState,"expected state"),r.containerState._closeFlow=void 0,t.check(QA,i,a);function i(o){return Fe(r.containerState,"expected state"),Fe(typeof r.containerState.size=="number","expected size"),r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ti(t,e,me.listItemIndent,r.containerState.size+1)(o)}function a(o){return Fe(r.containerState,"expected state"),r.containerState.furtherBlankLines||!Xr(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(pje,e,s)(o))}function s(o){return Fe(r.containerState,"expected state"),r.containerState._closeFlow=!0,r.interrupt=void 0,Fe(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),Ti(t,t.attempt(ml,e,n),me.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:en.tabSize)(o)}}function yje(t,e,n){const r=this;return Fe(r.containerState,"expected state"),Fe(typeof r.containerState.size=="number","expected size"),Ti(t,i,me.listItemIndent,r.containerState.size+1);function i(a){Fe(r.containerState,"expected state");const s=r.events[r.events.length-1];return s&&s[1].type===me.listItemIndent&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?e(a):n(a)}}function bje(t){Fe(this.containerState,"expected state"),Fe(typeof this.containerState.type=="string","expected type"),t.exit(this.containerState.type)}function wje(t,e,n){const r=this;return Fe(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),Ti(t,i,me.listItemPrefixWhitespace,r.parser.constructs.disable.null.includes("codeIndented")?void 0:en.tabSize+1);function i(a){const s=r.events[r.events.length-1];return!Xr(a)&&s&&s[1].type===me.listItemPrefixWhitespace?e(a):n(a)}}const LH={name:"setextUnderline",tokenize:Sje,resolveTo:xje};function xje(t,e){let n=t.length,r,i,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type===me.content){r=n;break}t[n][1].type===me.paragraph&&(i=n)}else t[n][1].type===me.content&&t.splice(n,1),!a&&t[n][1].type===me.definition&&(a=n);Fe(i!==void 0,"expected a `text` index to be found"),Fe(r!==void 0,"expected a `text` index to be found");const s={type:me.setextHeading,start:Object.assign({},t[i][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[i][1].type=me.setextHeadingText,a?(t.splice(i,0,["enter",s,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end=Object.assign({},t[a][1].end)):t[r][1]=s,t.push(["exit",s,e]),t}function Sje(t,e,n){const r=this;let i;return a;function a(c){let f=r.events.length,h;for(Fe(c===pe.dash||c===pe.equalsTo,"expected `=` or `-`");f--;)if(r.events[f][1].type!==me.lineEnding&&r.events[f][1].type!==me.linePrefix&&r.events[f][1].type!==me.content){h=r.events[f][1].type===me.paragraph;break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter(me.setextHeadingLine),i=c,s(c)):n(c)}function s(c){return t.enter(me.setextHeadingLineSequence),o(c)}function o(c){return c===i?(t.consume(c),o):(t.exit(me.setextHeadingLineSequence),Xr(c)?Ti(t,l,me.lineSuffix)(c):l(c))}function l(c){return c===pe.eof||Sn(c)?(t.exit(me.setextHeadingLine),e(c)):n(c)}}const Eje={tokenize:Nje};function Nje(t){const e=this,n=t.attempt(QA,r,t.attempt(this.parser.constructs.flowInitial,i,Ti(t,t.attempt(this.parser.constructs.flow,i,t.attempt(k2e,i)),me.linePrefix)));return n;function r(a){if(Fe(a===pe.eof||Sn(a),"expected eol or eof"),a===pe.eof){t.consume(a);return}return t.enter(me.lineEndingBlank),t.consume(a),t.exit(me.lineEndingBlank),e.currentConstruct=void 0,n}function i(a){if(Fe(a===pe.eof||Sn(a),"expected eol or eof"),a===pe.eof){t.consume(a);return}return t.enter(me.lineEnding),t.consume(a),t.exit(me.lineEnding),e.currentConstruct=void 0,n}}const _je={resolveAll:Mae()},Cje=Iae("string"),Tje=Iae("text");function Iae(t){return{tokenize:e,resolveAll:Mae(t==="text"?Dje:void 0)};function e(n){const r=this,i=this.parser.constructs[t],a=n.attempt(i,s,o);return s;function s(f){return c(f)?a(f):o(f)}function o(f){if(f===pe.eof){n.consume(f);return}return n.enter(me.data),n.consume(f),l}function l(f){return c(f)?(n.exit(me.data),a(f)):(n.consume(f),l)}function c(f){if(f===pe.eof)return!0;const h=i[f];let m=-1;if(h)for(Fe(Array.isArray(h),"expected `disable.null` to be populated");++m<h.length;){const p=h[m];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function Mae(t){return e;function e(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type===me.data&&(a=i,i++):(!n[i]||n[i][1].type!==me.data)&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return t?t(n,r):n}}function Dje(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type===me.lineEnding)&&t[n-1][1].type===me.data){const r=t[n-1][1],i=e.sliceStream(r);let a=i.length,s=-1,o=0,l;for(;a--;){const c=i[a];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===pe.space;)o++,s--;if(s)break;s=-1}else if(c===pe.horizontalTab)l=!0,o++;else if(c!==pe.virtualSpace){a++;break}}if(o){const c={type:n===t.length||l||o<en.hardBreakPrefixSizeMin?me.lineSuffix:me.hardBreakTrailing,start:{line:r.end.line,column:r.end.column-o,offset:r.end.offset-o,_index:r.start._index+a,_bufferIndex:a?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},c.start),r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}var G3={exports:{}},iM,FH;function kje(){if(FH)return iM;FH=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,a=r*365.25;iM=function(f,h){h=h||{};var m=typeof f;if(m==="string"&&f.length>0)return s(f);if(m==="number"&&isFinite(f))return h.long?l(f):o(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function s(f){if(f=String(f),!(f.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(h){var m=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*a;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function o(f){var h=Math.abs(f);return h>=r?Math.round(f/r)+"d":h>=n?Math.round(f/n)+"h":h>=e?Math.round(f/e)+"m":h>=t?Math.round(f/t)+"s":f+"ms"}function l(f){var h=Math.abs(f);return h>=r?c(f,h,r,"day"):h>=n?c(f,h,n,"hour"):h>=e?c(f,h,e,"minute"):h>=t?c(f,h,t,"second"):f+" ms"}function c(f,h,m,p){var v=h>=m*1.5;return Math.round(f/m)+" "+p+(v?"s":"")}return iM}function Pje(t){n.debug=n,n.default=n,n.coerce=l,n.disable=a,n.enable=i,n.enabled=s,n.humanize=kje(),n.destroy=c,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function e(f){let h=0;for(let m=0;m<f.length;m++)h=(h<<5)-h+f.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(f){let h,m=null,p,v;function y(...x){if(!y.enabled)return;const S=y,_=Number(new Date),N=_-(h||_);S.diff=N,S.prev=h,S.curr=_,h=_,x[0]=n.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let k=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(O,A)=>{if(O==="%%")return"%";k++;const T=n.formatters[A];if(typeof T=="function"){const L=x[k];O=T.call(S,L),x.splice(k,1),k--}return O}),n.formatArgs.call(S,x),(S.log||n.log).apply(S,x)}return y.namespace=f,y.useColors=n.useColors(),y.color=n.selectColor(f),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(p!==n.namespaces&&(p=n.namespaces,v=n.enabled(f)),v),set:x=>{m=x}}),typeof n.init=="function"&&n.init(y),y}function r(f,h){const m=n(this.namespace+(typeof h>"u"?":":h)+f);return m.log=this.log,m}function i(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let h;const m=(typeof f=="string"?f:"").split(/[\s,]+/),p=m.length;for(h=0;h<p;h++)m[h]&&(f=m[h].replace(/\*/g,".*?"),f[0]==="-"?n.skips.push(new RegExp("^"+f.slice(1)+"$")):n.names.push(new RegExp("^"+f+"$")))}function a(){const f=[...n.names.map(o),...n.skips.map(o).map(h=>"-"+h)].join(",");return n.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let h,m;for(h=0,m=n.skips.length;h<m;h++)if(n.skips[h].test(f))return!1;for(h=0,m=n.names.length;h<m;h++)if(n.names[h].test(f))return!0;return!1}function o(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var Aje=Pje;(function(t,e){var n={};e.formatArgs=i,e.save=a,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;c.splice(1,0,f,"color: inherit");let h=0,m=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(h++,p==="%c"&&(m=h))}),c.splice(m,0,f)}e.log=console.debug||console.log||(()=>{});function a(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=Aje(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(G3,G3.exports);var Rje=G3.exports;const Oje=gc(Rje),Gv=Oje("micromark");function jje(t,e,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let s=[],o=[],l=!0;const c={consume:k,enter:P,exit:O,attempt:L(A),check:L(T),interrupt:L(T,{interrupt:!0})},f={previous:pe.eof,code:pe.eof,containerState:{},events:[],parser:t,sliceStream:y,sliceSerialize:v,now:x,defineSkip:S,write:p};let h=e.tokenize.call(f,c),m;return e.resolveAll&&a.push(e),f;function p(V){return s=ac(s,V),_(),s[s.length-1]!==pe.eof?[]:(B(e,0),f.events=mL(a,f.events,f),f.events)}function v(V,I){return Mje(y(V),I)}function y(V){return Ije(s,V)}function x(){const{line:V,column:I,offset:H,_index:q,_bufferIndex:F}=r;return{line:V,column:I,offset:H,_index:q,_bufferIndex:F}}function S(V){i[V.line]=V.column,Y(),Gv("position: define skip: `%j`",r)}function _(){let V;for(;r._index<s.length;){const I=s[r._index];if(typeof I=="string")for(V=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===V&&r._bufferIndex<I.length;)N(I.charCodeAt(r._bufferIndex));else N(I)}}function N(V){Fe(l===!0,"expected character to be consumed"),l=void 0,Gv("main: passing `%s` to %s",V,h&&h.name),m=V,Fe(typeof h=="function","expected state"),h=h(V)}function k(V){Fe(V===m,"expected given code to equal expected code"),Gv("consume: `%s`",V),Fe(l===void 0,"expected code to not have been consumed: this might be because `return x(code)` instead of `return x` was used"),Fe(V===null?f.events.length===0||f.events[f.events.length-1][0]==="exit":f.events[f.events.length-1][0]==="enter","expected last token to be open"),Sn(V)?(r.line++,r.column=1,r.offset+=V===pe.carriageReturnLineFeed?2:1,Y(),Gv("position: after eol: `%j`",r)):V!==pe.virtualSpace&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=V,l=!0}function P(V,I){const H=I||{};return H.type=V,H.start=x(),Fe(typeof V=="string","expected string type"),Fe(V.length>0,"expected non-empty string"),Gv("enter: `%s`",V),f.events.push(["enter",H,f]),o.push(H),H}function O(V){Fe(typeof V=="string","expected string type"),Fe(V.length>0,"expected non-empty string");const I=o.pop();return Fe(I,"cannot close w/o open tokens"),I.end=x(),Fe(V===I.type,"expected exit token to match current token"),Fe(!(I.start._index===I.end._index&&I.start._bufferIndex===I.end._bufferIndex),"expected non-empty token (`"+V+"`)"),Gv("exit: `%s`",I.type),f.events.push(["exit",I,f]),I}function A(V,I){B(V,I.from)}function T(V,I){I.restore()}function L(V,I){return H;function H(q,F,J){let Z,G,oe,ae;return Array.isArray(q)?re(q):"tokenize"in q?re([q]):te(q);function te(ve){return Ne;function Ne(ke){const Te=ke!==null&&ve[ke],ye=ke!==null&&ve.null,Ie=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return re(Ie)(ke)}}function re(ve){return Z=ve,G=0,ve.length===0?(Fe(J,"expected `bogusState` to be given"),J):X(ve[G])}function X(ve){return Ne;function Ne(ke){return ae=W(),oe=ve,ve.partial||(f.currentConstruct=ve),Fe(f.parser.constructs.disable.null,"expected `disable.null` to be populated"),ve.name&&f.parser.constructs.disable.null.includes(ve.name)?he(ke):ve.tokenize.call(I?Object.assign(Object.create(f),I):f,c,ce,he)(ke)}}function ce(ve){return Fe(ve===m,"expected code"),l=!0,V(oe,ae),F}function he(ve){return Fe(ve===m,"expected code"),l=!0,ae.restore(),++G<Z.length?X(Z[G]):J}}}function B(V,I){V.resolveAll&&!a.includes(V)&&a.push(V),V.resolve&&_m(f.events,I,f.events.length-I,V.resolve(f.events.slice(I),f)),V.resolveTo&&(f.events=V.resolveTo(f.events,f)),Fe(V.partial||f.events.length===0||f.events[f.events.length-1][0]==="exit","expected last token to end")}function W(){const V=x(),I=f.previous,H=f.currentConstruct,q=f.events.length,F=Array.from(o);return{restore:J,from:q};function J(){r=V,f.previous=I,f.currentConstruct=H,f.events.length=q,o=F,Y(),Gv("position: restore: `%j`",r)}}function Y(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Ije(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let s;if(n===i)Fe(a>-1,"expected non-negative end buffer index"),Fe(r>-1,"expected non-negative start buffer index"),s=[t[n].slice(r,a)];else{if(s=t.slice(n,i),r>-1){const o=s[0];typeof o=="string"?s[0]=o.slice(r):(Fe(r===0,"expected `startBufferIndex` to be `0`"),s.shift())}a>0&&s.push(t[i].slice(0,a))}return s}function Mje(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const a=t[n];let s;if(typeof a=="string")s=a;else switch(a){case pe.carriageReturn:{s=Af.cr;break}case pe.lineFeed:{s=Af.lf;break}case pe.carriageReturnLineFeed:{s=Af.cr+Af.lf;break}case pe.horizontalTab:{s=e?Af.space:Af.ht;break}case pe.virtualSpace:{if(!e&&i)continue;s=Af.space;break}default:Fe(typeof a=="number","expected number"),s=String.fromCharCode(a)}i=a===pe.horizontalTab,r.push(s)}return r.join("")}const Vje={[pe.asterisk]:ml,[pe.plusSign]:ml,[pe.dash]:ml,[pe.digit0]:ml,[pe.digit1]:ml,[pe.digit2]:ml,[pe.digit3]:ml,[pe.digit4]:ml,[pe.digit5]:ml,[pe.digit6]:ml,[pe.digit7]:ml,[pe.digit8]:ml,[pe.digit9]:ml,[pe.greaterThan]:Tae},$je={[pe.leftSquareBracket]:j2e},Lje={[pe.horizontalTab]:nM,[pe.virtualSpace]:nM,[pe.space]:nM},Fje={[pe.numberSign]:F2e,[pe.asterisk]:fk,[pe.dash]:[LH,fk],[pe.lessThan]:z2e,[pe.equalsTo]:LH,[pe.underscore]:fk,[pe.graveAccent]:VH,[pe.tilde]:VH},Bje={[pe.ampersand]:kae,[pe.backslash]:Dae},Uje={[pe.carriageReturn]:rM,[pe.lineFeed]:rM,[pe.carriageReturnLineFeed]:rM,[pe.exclamationMark]:lje,[pe.ampersand]:kae,[pe.asterisk]:H3,[pe.lessThan]:[d2e,X2e],[pe.leftSquareBracket]:cje,[pe.backslash]:[$2e,Dae],[pe.rightSquareBracket]:pL,[pe.underscore]:H3,[pe.graveAccent]:N2e},Wje={null:[H3,_je]},zje={null:[pe.asterisk,pe.underscore]},Hje={null:[]},Gje=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:zje,contentInitial:$je,disable:Hje,document:Vje,flow:Fje,flowInitial:Lje,insideSpan:Wje,string:Bje,text:Uje},Symbol.toStringTag,{value:"Module"}));function Kje(t){const n=qOe([Gje,...(t||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(i2e),document:i(s2e),flow:i(Eje),string:i(Cje),text:i(Tje)};return r;function i(a){return s;function s(o){return jje(r,a,o)}}}function Yje(t){for(;!Aae(t););return t}const BH=/[\0\t\n\r]/g;function Jje(){let t=1,e="",n=!0,r;return i;function i(a,s,o){const l=[];let c,f,h,m,p;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),h=0,e="",n&&(a.charCodeAt(0)===pe.byteOrderMarker&&h++,n=void 0);h<a.length;){if(BH.lastIndex=h,c=BH.exec(a),m=c&&c.index!==void 0?c.index:a.length,p=a.charCodeAt(m),!c){e=a.slice(h);break}if(p===pe.lf&&h===m&&r)l.push(pe.carriageReturnLineFeed),r=void 0;else switch(r&&(l.push(pe.carriageReturn),r=void 0),h<m&&(l.push(a.slice(h,m)),t+=m-h),p){case pe.nul:{l.push(pe.replacementCharacter),t++;break}case pe.ht:{for(f=Math.ceil(t/en.tabSize)*en.tabSize,l.push(pe.horizontalTab);t++<f;)l.push(pe.virtualSpace);break}case pe.lf:{l.push(pe.lineFeed),t=1;break}default:r=!0,t=1}h=m+1}return o&&(r&&l.push(pe.carriageReturn),e&&l.push(e),l.push(pe.eof)),l}}const qje=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Xje(t){return t.replace(qje,Zje)}function Zje(t,e,n){if(e)return e;if(n.charCodeAt(0)===pe.numberSign){const i=n.charCodeAt(1),a=i===pe.lowercaseX||i===pe.uppercaseX;return Cae(n.slice(a?2:1),a?en.numericBaseHexadecimal:en.numericBaseDecimal)}return hL(n)||t}const Vae={}.hasOwnProperty;function Qje(t,e,n){return typeof e!="string"&&(n=e,e=void 0),eIe(n)(Yje(Kje(n).document().write(Jje()(t,e,!0))))}function eIe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ye),autolinkProtocol:L,autolinkEmail:L,atxHeading:a(Ee),blockQuote:a(ke),characterEscape:L,characterReference:L,codeFenced:a(Te),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(Te,s),codeText:a(ye,s),codeTextData:L,data:L,codeFlowValue:L,definition:a(Ie),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(Re),hardBreakEscape:a($e),hardBreakTrailing:a($e),htmlFlow:a(He,s),htmlFlowData:L,htmlText:a(He,s),htmlTextData:L,image:a(gt),label:s,link:a(Ye),listItem:a(_t),listItemValue:m,listOrdered:a(yt,h),listUnordered:a(yt),paragraph:a(St),reference:te,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(Ee),strong:a(Bt),thematicBreak:a(Dt)},exit:{atxHeading:l(),atxHeadingSequence:P,autolink:l(),autolinkEmail:Ne,autolinkProtocol:ve,blockQuote:l(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:ce,characterReference:he,codeFenced:l(x),codeFencedFence:y,codeFencedFenceInfo:p,codeFencedFenceMeta:v,codeFlowValue:B,codeIndented:l(S),codeText:l(H),codeTextData:B,data:B,definition:l(),definitionDestinationString:k,definitionLabelString:_,definitionTitleString:N,emphasis:l(),hardBreakEscape:l(Y),hardBreakTrailing:l(Y),htmlFlow:l(V),htmlFlowData:B,htmlText:l(I),htmlTextData:B,image:l(F),label:Z,labelText:J,lineEnding:W,link:l(q),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:re,resourceDestinationString:G,resourceTitleString:oe,resource:ae,setextHeading:l(T),setextHeadingLineSequence:A,setextHeadingText:O,strong:l(),thematicBreak:l()}};$ae(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Ae){let je={type:"root",children:[]};const tt={stack:[je],tokenStack:[],config:e,enter:o,exit:c,buffer:s,resume:f,data:n},Ot=[];let qe=-1;for(;++qe<Ae.length;)if(Ae[qe][1].type===me.listOrdered||Ae[qe][1].type===me.listUnordered)if(Ae[qe][0]==="enter")Ot.push(qe);else{const ft=Ot.pop();Fe(typeof ft=="number","expected list ot be open"),qe=i(Ae,ft,qe)}for(qe=-1;++qe<Ae.length;){const ft=e[Ae[qe][0]];Vae.call(ft,Ae[qe][1].type)&&ft[Ae[qe][1].type].call(Object.assign({sliceSerialize:Ae[qe][2].sliceSerialize},tt),Ae[qe][1])}if(tt.tokenStack.length>0){const ft=tt.tokenStack[tt.tokenStack.length-1];(ft[1]||UH).call(tt,void 0,ft[0])}for(je.position={start:Vp(Ae.length>0?Ae[0][1].start:{line:1,column:1,offset:0}),end:Vp(Ae.length>0?Ae[Ae.length-2][1].end:{line:1,column:1,offset:0})},qe=-1;++qe<e.transforms.length;)je=e.transforms[qe](je)||je;return je}function i(Ae,je,tt){let Ot=je-1,qe=-1,ft=!1,Wt,an,Un,pn;for(;++Ot<=tt;){const ln=Ae[Ot];switch(ln[1].type){case me.listUnordered:case me.listOrdered:case me.blockQuote:{ln[0]==="enter"?qe++:qe--,pn=void 0;break}case me.lineEndingBlank:{ln[0]==="enter"&&(Wt&&!pn&&!qe&&!Un&&(Un=Ot),pn=void 0);break}case me.linePrefix:case me.listItemValue:case me.listItemMarker:case me.listItemPrefix:case me.listItemPrefixWhitespace:break;default:pn=void 0}if(!qe&&ln[0]==="enter"&&ln[1].type===me.listItemPrefix||qe===-1&&ln[0]==="exit"&&(ln[1].type===me.listUnordered||ln[1].type===me.listOrdered)){if(Wt){let Gt=Ot;for(an=void 0;Gt--;){const Kt=Ae[Gt];if(Kt[1].type===me.lineEnding||Kt[1].type===me.lineEndingBlank){if(Kt[0]==="exit")continue;an&&(Ae[an][1].type=me.lineEndingBlank,ft=!0),Kt[1].type=me.lineEnding,an=Gt}else if(!(Kt[1].type===me.linePrefix||Kt[1].type===me.blockQuotePrefix||Kt[1].type===me.blockQuotePrefixWhitespace||Kt[1].type===me.blockQuoteMarker||Kt[1].type===me.listItemIndent))break}Un&&(!an||Un<an)&&(Wt._spread=!0),Wt.end=Object.assign({},an?Ae[an][1].start:ln[1].end),Ae.splice(an||Ot,0,["exit",Wt,ln[2]]),Ot++,tt++}if(ln[1].type===me.listItemPrefix){const Gt={type:"listItem",_spread:!1,start:Object.assign({},ln[1].start),end:void 0};Wt=Gt,Ae.splice(Ot,0,["enter",Gt,ln[2]]),Ot++,tt++,Un=void 0,pn=!0}}}return Ae[je][1]._spread=ft,tt}function a(Ae,je){return tt;function tt(Ot){o.call(this,Ae(Ot),Ot),je&&je.call(this,Ot)}}function s(){this.stack.push({type:"fragment",children:[]})}function o(Ae,je,tt){const Ot=this.stack[this.stack.length-1];Fe(Ot,"expected `parent`"),Fe("children"in Ot,"expected `parent`"),Ot.children.push(Ae),this.stack.push(Ae),this.tokenStack.push([je,tt]),Ae.position={start:Vp(je.start),end:void 0}}function l(Ae){return je;function je(tt){Ae&&Ae.call(this,tt),c.call(this,tt)}}function c(Ae,je){const tt=this.stack.pop();Fe(tt,"expected `node`");const Ot=this.tokenStack.pop();if(Ot)Ot[0].type!==Ae.type&&(je?je.call(this,Ae,Ot[0]):(Ot[1]||UH).call(this,Ae,Ot[0]));else throw new Error("Cannot close `"+Ae.type+"` ("+SE({start:Ae.start,end:Ae.end})+"): its not open");Fe(tt.type!=="fragment","unexpected fragment `exit`ed"),Fe(tt.position,"expected `position` to be defined"),tt.position.end=Vp(Ae.end)}function f(){return YOe(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(Ae){if(this.data.expectingFirstListItemValue){const je=this.stack[this.stack.length-2];Fe(je,"expected nodes on stack"),Fe(je.type==="list","expected list on stack"),je.start=Number.parseInt(this.sliceSerialize(Ae),en.numericBaseDecimal),this.data.expectingFirstListItemValue=void 0}}function p(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="code","expected code on stack"),je.lang=Ae}function v(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="code","expected code on stack"),je.meta=Ae}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="code","expected code on stack"),je.value=Ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="code","expected code on stack"),je.value=Ae.replace(/(\r?\n|\r)$/g,"")}function _(Ae){const je=this.resume(),tt=this.stack[this.stack.length-1];Fe(tt,"expected node on stack"),Fe(tt.type==="definition","expected definition on stack"),tt.label=je,tt.identifier=yw(this.sliceSerialize(Ae)).toLowerCase()}function N(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="definition","expected definition on stack"),je.title=Ae}function k(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="definition","expected definition on stack"),je.url=Ae}function P(Ae){const je=this.stack[this.stack.length-1];if(Fe(je,"expected node on stack"),Fe(je.type==="heading","expected heading on stack"),!je.depth){const tt=this.sliceSerialize(Ae).length;Fe(tt===1||tt===2||tt===3||tt===4||tt===5||tt===6,"expected `depth` between `1` and `6`"),je.depth=tt}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function A(Ae){const je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="heading","expected heading on stack"),je.depth=this.sliceSerialize(Ae).codePointAt(0)===pe.equalsTo?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function L(Ae){const je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe("children"in je,"expected parent on stack");const tt=je.children;let Ot=tt[tt.length-1];(!Ot||Ot.type!=="text")&&(Ot=Nt(),Ot.position={start:Vp(Ae.start),end:void 0},tt.push(Ot)),this.stack.push(Ot)}function B(Ae){const je=this.stack.pop();Fe(je,"expected a `node` to be on the stack"),Fe("value"in je,"expected a `literal` to be on the stack"),Fe(je.position,"expected `node` to have an open position"),je.value+=this.sliceSerialize(Ae),je.position.end=Vp(Ae.end)}function W(Ae){const je=this.stack[this.stack.length-1];if(Fe(je,"expected `node`"),this.data.atHardBreak){Fe("children"in je,"expected `parent`");const tt=je.children[je.children.length-1];Fe(tt.position,"expected tail to have a starting position"),tt.position.end=Vp(Ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(je.type)&&(L.call(this,Ae),B.call(this,Ae))}function Y(){this.data.atHardBreak=!0}function V(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="html","expected html on stack"),je.value=Ae}function I(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="html","expected html on stack"),je.value=Ae}function H(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="inlineCode","expected inline code on stack"),je.value=Ae}function q(){const Ae=this.stack[this.stack.length-1];if(Fe(Ae,"expected node on stack"),Fe(Ae.type==="link","expected link on stack"),this.data.inReference){const je=this.data.referenceType||"shortcut";Ae.type+="Reference",Ae.referenceType=je,delete Ae.url,delete Ae.title}else delete Ae.identifier,delete Ae.label;this.data.referenceType=void 0}function F(){const Ae=this.stack[this.stack.length-1];if(Fe(Ae,"expected node on stack"),Fe(Ae.type==="image","expected image on stack"),this.data.inReference){const je=this.data.referenceType||"shortcut";Ae.type+="Reference",Ae.referenceType=je,delete Ae.url,delete Ae.title}else delete Ae.identifier,delete Ae.label;this.data.referenceType=void 0}function J(Ae){const je=this.sliceSerialize(Ae),tt=this.stack[this.stack.length-2];Fe(tt,"expected ancestor on stack"),Fe(tt.type==="image"||tt.type==="link","expected image or link on stack"),tt.label=Xje(je),tt.identifier=yw(je).toLowerCase()}function Z(){const Ae=this.stack[this.stack.length-1];Fe(Ae,"expected node on stack"),Fe(Ae.type==="fragment","expected fragment on stack");const je=this.resume(),tt=this.stack[this.stack.length-1];if(Fe(tt,"expected node on stack"),Fe(tt.type==="image"||tt.type==="link","expected image or link on stack"),this.data.inReference=!0,tt.type==="link"){const Ot=Ae.children;tt.children=Ot}else tt.alt=je}function G(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="image"||je.type==="link","expected image or link on stack"),je.url=Ae}function oe(){const Ae=this.resume(),je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="image"||je.type==="link","expected image or link on stack"),je.title=Ae}function ae(){this.data.inReference=void 0}function te(){this.data.referenceType="collapsed"}function re(Ae){const je=this.resume(),tt=this.stack[this.stack.length-1];Fe(tt,"expected node on stack"),Fe(tt.type==="image"||tt.type==="link","expected image reference or link reference on stack"),tt.label=je,tt.identifier=yw(this.sliceSerialize(Ae)).toLowerCase(),this.data.referenceType="full"}function X(Ae){Fe(Ae.type==="characterReferenceMarkerNumeric"||Ae.type==="characterReferenceMarkerHexadecimal"),this.data.characterReferenceType=Ae.type}function ce(Ae){const je=this.sliceSerialize(Ae),tt=this.data.characterReferenceType;let Ot;if(tt)Ot=Cae(je,tt===me.characterReferenceMarkerNumeric?en.numericBaseDecimal:en.numericBaseHexadecimal),this.data.characterReferenceType=void 0;else{const ft=hL(je);Fe(ft!==!1,"expected reference to decode"),Ot=ft}const qe=this.stack[this.stack.length-1];Fe(qe,"expected `node`"),Fe("value"in qe,"expected `node.value`"),qe.value+=Ot}function he(Ae){const je=this.stack.pop();Fe(je,"expected `node`"),Fe(je.position,"expected `node.position`"),je.position.end=Vp(Ae.end)}function ve(Ae){B.call(this,Ae);const je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="link","expected link on stack"),je.url=this.sliceSerialize(Ae)}function Ne(Ae){B.call(this,Ae);const je=this.stack[this.stack.length-1];Fe(je,"expected node on stack"),Fe(je.type==="link","expected link on stack"),je.url="mailto:"+this.sliceSerialize(Ae)}function ke(){return{type:"blockquote",children:[]}}function Te(){return{type:"code",lang:null,meta:null,value:""}}function ye(){return{type:"inlineCode",value:""}}function Ie(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function Ee(){return{type:"heading",depth:0,children:[]}}function $e(){return{type:"break"}}function He(){return{type:"html",value:""}}function gt(){return{type:"image",title:null,url:"",alt:null}}function Ye(){return{type:"link",title:null,url:"",children:[]}}function yt(Ae){return{type:"list",ordered:Ae.type==="listOrdered",start:null,spread:Ae._spread,children:[]}}function _t(Ae){return{type:"listItem",spread:Ae._spread,checked:null,children:[]}}function St(){return{type:"paragraph",children:[]}}function Bt(){return{type:"strong",children:[]}}function Nt(){return{type:"text",value:""}}function Dt(){return{type:"thematicBreak"}}}function Vp(t){return{line:t.line,column:t.column,offset:t.offset}}function $ae(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?$ae(t,r):tIe(t,r)}}function tIe(t,e){let n;for(n in e)if(Vae.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function UH(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+SE({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+SE({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+SE({start:e.start,end:e.end})+") is still open")}function nIe(t){const e=this;e.parser=n;function n(r){return Qje(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function rIe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function iIe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function aIe(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function sIe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oIe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function lIe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=ox(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let s,o=t.footnoteCounts.get(r);o===void 0?(o=0,t.footnoteOrder.push(r),s=t.footnoteOrder.length):s=a+1,o+=1,t.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function uIe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cIe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Lae(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function dIe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Lae(t,e);const i={src:ox(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,a),t.applyData(e,a)}function fIe(t,e){const n={src:ox(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function hIe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function mIe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Lae(t,e);const i={href:ox(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function pIe(t,e){const n={href:ox(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function gIe(t,e,n){const r=t.all(e),i=n?vIe(n):Fae(e),a={},s=[];if(typeof e.checked=="boolean"){const f=r[0];let h;f&&f.type==="element"&&f.tagName==="p"?h=f:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const f=r[o];(i||o!==0||f.type!=="element"||f.tagName!=="p")&&s.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?s.push(...f.children):s.push(f)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&s.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:s};return t.patch(e,c),t.applyData(e,c)}function vIe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=Fae(n[r])}return e}function Fae(t){const e=t.spread;return e??t.children.length>1}function yIe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function bIe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wIe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function xIe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function SIe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],s),i.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},o=uL(e.children[1]),l=bae(e.children[e.children.length-1]);o&&l&&(s.position={start:o,end:l}),i.push(s)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,a),t.applyData(e,a)}function EIe(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,o=s?s.length:e.children.length;let l=-1;const c=[];for(;++l<o;){const h=e.children[l],m={},p=s?s[l]:void 0;p&&(m.align=p);let v={type:"element",tagName:a,properties:m,children:[]};h&&(v.children=t.all(h),t.patch(h,v),v=t.applyData(h,v)),c.push(v)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,f),t.applyData(e,f)}function NIe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const WH=9,zH=32;function _Ie(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const a=[];for(;r;)a.push(HH(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return a.push(HH(e.slice(i),i>0,!1)),a.join("")}function HH(t,e,n){let r=0,i=t.length;if(e){let a=t.codePointAt(r);for(;a===WH||a===zH;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(i-1);for(;a===WH||a===zH;)i--,a=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function CIe(t,e){const n={type:"text",value:_Ie(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function TIe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const DIe={blockquote:rIe,break:iIe,code:aIe,delete:sIe,emphasis:oIe,footnoteReference:lIe,heading:uIe,html:cIe,imageReference:dIe,image:fIe,inlineCode:hIe,linkReference:mIe,link:pIe,listItem:gIe,list:yIe,paragraph:bIe,root:wIe,strong:xIe,table:SIe,tableCell:NIe,tableRow:EIe,text:CIe,thematicBreak:TIe,toml:MT,yaml:MT,definition:MT,footnoteDefinition:MT};function MT(){}const Bae=-1,eR=0,vP=1,yP=2,gL=3,vL=4,yL=5,bL=6,Uae=7,Wae=8,GH=typeof self=="object"?self:globalThis,kIe=(t,e)=>{const n=(i,a)=>(t.set(a,i),i),r=i=>{if(t.has(i))return t.get(i);const[a,s]=e[i];switch(a){case eR:case Bae:return n(s,i);case vP:{const o=n([],i);for(const l of s)o.push(r(l));return o}case yP:{const o=n({},i);for(const[l,c]of s)o[r(l)]=r(c);return o}case gL:return n(new Date(s),i);case vL:{const{source:o,flags:l}=s;return n(new RegExp(o,l),i)}case yL:{const o=n(new Map,i);for(const[l,c]of s)o.set(r(l),r(c));return o}case bL:{const o=n(new Set,i);for(const l of s)o.add(r(l));return o}case Uae:{const{name:o,message:l}=s;return n(new GH[o](l),i)}case Wae:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i)}return n(new GH[a](s),i)};return r},KH=t=>kIe(new Map,t)(0),g0="",{toString:PIe}={},{keys:AIe}=Object,ES=t=>{const e=typeof t;if(e!=="object"||!t)return[eR,e];const n=PIe.call(t).slice(8,-1);switch(n){case"Array":return[vP,g0];case"Object":return[yP,g0];case"Date":return[gL,g0];case"RegExp":return[vL,g0];case"Map":return[yL,g0];case"Set":return[bL,g0]}return n.includes("Array")?[vP,n]:n.includes("Error")?[Uae,n]:[yP,n]},VT=([t,e])=>t===eR&&(e==="function"||e==="symbol"),RIe=(t,e,n,r)=>{const i=(s,o)=>{const l=r.push(s)-1;return n.set(o,l),l},a=s=>{if(n.has(s))return n.get(s);let[o,l]=ES(s);switch(o){case eR:{let f=s;switch(l){case"bigint":o=Wae,f=s.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);f=null;break;case"undefined":return i([Bae],s)}return i([o,f],s)}case vP:{if(l)return i([l,[...s]],s);const f=[],h=i([o,f],s);for(const m of s)f.push(a(m));return h}case yP:{if(l)switch(l){case"BigInt":return i([l,s.toString()],s);case"Boolean":case"Number":case"String":return i([l,s.valueOf()],s)}if(e&&"toJSON"in s)return a(s.toJSON());const f=[],h=i([o,f],s);for(const m of AIe(s))(t||!VT(ES(s[m])))&&f.push([a(m),a(s[m])]);return h}case gL:return i([o,s.toISOString()],s);case vL:{const{source:f,flags:h}=s;return i([o,{source:f,flags:h}],s)}case yL:{const f=[],h=i([o,f],s);for(const[m,p]of s)(t||!(VT(ES(m))||VT(ES(p))))&&f.push([a(m),a(p)]);return h}case bL:{const f=[],h=i([o,f],s);for(const m of s)(t||!VT(ES(m)))&&f.push(a(m));return h}}const{message:c}=s;return i([o,{name:l,message:c}],s)};return a},YH=(t,{json:e,lossy:n}={})=>{const r=[];return RIe(!(e||n),!!e,new Map,r)(t),r},bP=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?KH(YH(t,e)):structuredClone(t):(t,e)=>KH(YH(t,e));function OIe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function jIe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function IIe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||OIe,r=t.options.footnoteBackLabel||jIe,i=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",s=t.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const f=t.all(c),h=String(c.identifier).toUpperCase(),m=ox(h.toLowerCase());let p=0;const v=[],y=t.footnoteCounts.get(h);for(;y!==void 0&&++p<=y;){v.length>0&&v.push({type:"text",value:" "});let _=typeof n=="string"?n:n(l,p);typeof _=="string"&&(_={type:"text",value:_}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const x=f[f.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const _=x.children[x.children.length-1];_&&_.type==="text"?_.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...v)}else f.push(...v);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(f,!0)};t.patch(c,S),o.push(S)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...bP(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(o,!0)},{type:"text",value:`
`}]}}const zae=function(t){if(t==null)return LIe;if(typeof t=="function")return tR(t);if(typeof t=="object")return Array.isArray(t)?MIe(t):VIe(t);if(typeof t=="string")return $Ie(t);throw new Error("Expected function, string, or object as test")};function MIe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=zae(t[n]);return tR(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function VIe(t){const e=t;return tR(n);function n(r){const i=r;let a;for(a in t)if(i[a]!==e[a])return!1;return!0}}function $Ie(t){return tR(e);function e(n){return n&&n.type===t}}function tR(t){return e;function e(n,r,i){return!!(FIe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function LIe(){return!0}function FIe(t){return t!==null&&typeof t=="object"&&"type"in t}const Hae=[],BIe=!0,JH=!1,UIe="skip";function WIe(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const a=zae(i),s=r?-1:1;o(t,void 0,[])();function o(l,c,f){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return m;function m(){let p=Hae,v,y,x;if((!e||a(l,c,f[f.length-1]||void 0))&&(p=zIe(n(l,f)),p[0]===JH))return p;if("children"in l&&l.children){const S=l;if(S.children&&p[0]!==UIe)for(y=(r?S.children.length:-1)+s,x=f.concat(S);y>-1&&y<S.children.length;){const _=S.children[y];if(v=o(_,y,x)(),v[0]===JH)return v;y=typeof v[1]=="number"?v[1]:y+s}}return p}}}function zIe(t){return Array.isArray(t)?t:typeof t=="number"?[BIe,t]:t==null?Hae:[t]}function Gae(t,e,n,r){let i,a,s;typeof e=="function"&&typeof n!="function"?(a=void 0,s=e,i=n):(a=e,s=n,i=r),WIe(t,a,o,i);function o(l,c){const f=c[c.length-1],h=f?f.children.indexOf(l):void 0;return s(l,h,f)}}const K3={}.hasOwnProperty,HIe={};function GIe(t,e){const n=e||HIe,r=new Map,i=new Map,a=new Map,s={...DIe,...n.handlers},o={all:c,applyData:YIe,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:s,one:l,options:n,patch:KIe,wrap:qIe};return Gae(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const h=f.type==="definition"?r:i,m=String(f.identifier).toUpperCase();h.has(m)||h.set(m,f)}}),o;function l(f,h){const m=f.type,p=o.handlers[m];if(K3.call(o.handlers,m)&&p)return p(o,f,h);if(o.options.passThrough&&o.options.passThrough.includes(m)){if("children"in f){const{children:y,...x}=f,S=bP(x);return S.children=o.all(f),S}return bP(f)}return(o.options.unknownHandler||JIe)(o,f,h)}function c(f){const h=[];if("children"in f){const m=f.children;let p=-1;for(;++p<m.length;){const v=o.one(m[p],f);if(v){if(p&&m[p-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=qH(v.value)),!Array.isArray(v)&&v.type==="element")){const y=v.children[0];y&&y.type==="text"&&(y.value=qH(y.value))}Array.isArray(v)?h.push(...v):h.push(v)}}}return h}}function KIe(t,e){t.position&&(e.position=NOe(t))}function YIe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&a&&Object.assign(n.properties,bP(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function JIe(t,e){const n=e.data||{},r="value"in e&&!(K3.call(n,"hProperties")||K3.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function qIe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function qH(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function XH(t,e){const n=GIe(t,e),r=n.one(t,void 0),i=IIe(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&(Fe("children"in a),a.children.push({type:"text",value:`
`},i)),a}function XIe(t,e){return t&&"run"in t?async function(n,r){const i=XH(n,{file:r,...e});await t.run(i,r)}:function(n,r){return XH(n,{file:r,...e||t})}}function ZH(t){if(t)throw t}var hk=Object.prototype.hasOwnProperty,Kae=Object.prototype.toString,QH=Object.defineProperty,eG=Object.getOwnPropertyDescriptor,tG=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Kae.call(e)==="[object Array]"},nG=function(e){if(!e||Kae.call(e)!=="[object Object]")return!1;var n=hk.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&hk.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||hk.call(e,i)},rG=function(e,n){QH&&n.name==="__proto__"?QH(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},iG=function(e,n){if(n==="__proto__")if(hk.call(e,n)){if(eG)return eG(e,n).value}else return;return e[n]},ZIe=function t(){var e,n,r,i,a,s,o=arguments[0],l=1,c=arguments.length,f=!1;for(typeof o=="boolean"&&(f=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=iG(o,n),i=iG(e,n),o!==i&&(f&&i&&(nG(i)||(a=tG(i)))?(a?(a=!1,s=r&&tG(r)?r:[]):s=r&&nG(r)?r:{},rG(o,{name:n,newValue:t(f,s,i)})):typeof i<"u"&&rG(o,{name:n,newValue:i}));return o};const aM=gc(ZIe);function Y3(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function QIe(){const t=[],e={run:n,use:r};return e;function n(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);o(null,...i);function o(l,...c){const f=t[++a];let h=-1;if(l){s(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,f?eMe(f,o)(...c):s(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function eMe(t,e){let n;return r;function r(...s){const o=t.length>s.length;let l;o&&s.push(i);try{l=t.apply(this,s)}catch(c){const f=c;if(o&&n)throw f;return i(f)}o||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(s,...o){n||(n=!0,e(s,...o))}function a(s){i(null,s)}}const Pf={basename:tMe,dirname:nMe,extname:rMe,join:iMe,sep:"/"};function tMe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');e_(t);let n=0,r=-1,i=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let s=-1,o=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else s<0&&(a=!0,s=i+1),o>-1&&(t.codePointAt(i)===e.codePointAt(o--)?o<0&&(r=i):(o=-1,r=s));return n===r?r=s:r<0&&(r=t.length),t.slice(n,r)}function nMe(t){if(e_(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function rMe(t){e_(t);let e=t.length,n=-1,r=0,i=-1,a=0,s;for(;e--;){const o=t.codePointAt(e);if(o===47){if(s){r=e+1;break}continue}n<0&&(s=!0,n=e+1),o===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function iMe(...t){let e=-1,n;for(;++e<t.length;)e_(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":aMe(n)}function aMe(t){e_(t);const e=t.codePointAt(0)===47;let n=sMe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function sMe(t,e){let n="",r=0,i=-1,a=0,s=-1,o,l;for(;++s<=t.length;){if(s<t.length)o=t.codePointAt(s);else{if(o===47)break;o=47}if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=s,a=0;continue}}else if(n.length>0){n="",r=0,i=s,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,s):n=t.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a>-1?a++:a=-1}return n}function e_(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const oMe={cwd:lMe};function lMe(){return"/"}function J3(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function uMe(t){if(typeof t=="string")t=new URL(t);else if(!J3(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return cMe(t)}function cMe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const sM=["history","path","basename","stem","extname","dirname"];class Yae{constructor(e){let n;e?J3(e)?n={path:e}:typeof e=="string"||dMe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":oMe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<sM.length;){const a=sM[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)sM.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Pf.basename(this.path):void 0}set basename(e){lM(e,"basename"),oM(e,"basename"),this.path=Pf.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Pf.dirname(this.path):void 0}set dirname(e){aG(this.basename,"dirname"),this.path=Pf.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Pf.extname(this.path):void 0}set extname(e){if(oM(e,"extname"),aG(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pf.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){J3(e)&&(e=uMe(e)),lM(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Pf.basename(this.path,this.extname):void 0}set stem(e){lM(e,"stem"),oM(e,"stem"),this.path=Pf.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new po(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function oM(t,e){if(t&&t.includes(Pf.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Pf.sep+"`")}function lM(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function aG(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function dMe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const fMe=function(t){const r=this.constructor.prototype,i=r[t],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},hMe={}.hasOwnProperty;class wL extends fMe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=QIe()}copy(){const e=new wL;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(aM(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(dM("data",this.frozen),this.namespace[e]=n,this):hMe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(dM("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=$T(e),r=this.parser||this.Parser;return uM("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),uM("process",this.parser||this.Parser),cM("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,s){const o=$T(e),l=r.parse(o);r.run(l,o,function(f,h,m){if(f||!h||!m)return c(f);const p=h,v=r.stringify(p,m);gMe(v)?m.value=v:m.result=v,c(f,m)});function c(f,h){f||!h?s(f):a?a(h):(Fe(n,"`done` is defined if `resolve` is not"),n(void 0,h))}}}processSync(e){let n=!1,r;return this.freeze(),uM("processSync",this.parser||this.Parser),cM("processSync",this.compiler||this.Compiler),this.process(e,i),oG("processSync","process",n),Fe(r,"we either bailed on an error or have a tree"),r;function i(a,s){n=!0,ZH(a),r=s}}run(e,n,r){sG(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(s,o){Fe(typeof n!="function","`file` cant be a `done` anymore, we checked");const l=$T(n);i.run(e,l,c);function c(f,h,m){const p=h||e;f?o(f):s?s(p):(Fe(r,"`done` is defined if `resolve` is not"),r(void 0,p,m))}}}runSync(e,n){let r=!1,i;return this.run(e,n,a),oG("runSync","run",r),Fe(i,"we either bailed on an error or have a tree"),i;function a(s,o){ZH(s),i=o,r=!0}}stringify(e,n){this.freeze();const r=$T(n),i=this.compiler||this.Compiler;return cM("stringify",i),sG(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(dM("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?o(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[f,...h]=c;l(f,h)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(c.plugins),c.settings&&(i.settings=aM(!0,i.settings,c.settings))}function o(c){let f=-1;if(c!=null)if(Array.isArray(c))for(;++f<c.length;){const h=c[f];a(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,f){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===c){m=h;break}if(m===-1)r.push([c,...f]);else if(f.length>0){let[p,...v]=f;const y=r[m][1];Y3(y)&&Y3(p)&&(p=aM(!0,y,p)),r[m]=[c,p,...v]}}}}const mMe=new wL().freeze();function uM(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function cM(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function dM(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function sG(t){if(!Y3(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function oG(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function $T(t){return pMe(t)?t:new Yae(t)}function pMe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function gMe(t){return typeof t=="string"||vMe(t)}function vMe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yMe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",lG=[],uG={allowDangerousHtml:!0},bMe=/^(https?|ircs?|mailto|xmpp)$/i,wMe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function xMe(t){const e=t.allowedElements,n=t.allowElement,r=t.children||"",i=t.className,a=t.components,s=t.disallowedElements,o=t.rehypePlugins||lG,l=t.remarkPlugins||lG,c=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...uG}:uG,f=t.skipHtml,h=t.unwrapDisallowed,m=t.urlTransform||SMe,p=mMe().use(nIe).use(l).use(XIe,c).use(o),v=new Yae;typeof r=="string"?v.value=r:QI("Unexpected value `"+r+"` for `children` prop, expected `string`"),e&&s&&QI("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other");for(const _ of wMe)Object.hasOwn(t,_.from)&&QI("Unexpected `"+_.from+"` prop, "+(_.to?"use `"+_.to+"` instead":"remove it")+" (see <"+yMe+"#"+_.id+"> for more info)");const y=p.parse(v);let x=p.runSync(y,v);return i&&(x={type:"element",tagName:"div",properties:{className:i},children:x.type==="root"?x.children:[x]}),Gae(x,S),POe(x,{Fragment:de.Fragment,components:a,ignoreInvalidStyle:!0,jsx:de.jsx,jsxs:de.jsxs,passKeys:!0,passNode:!0});function S(_,N,k){if(_.type==="raw"&&k&&typeof N=="number")return f?k.children.splice(N,1):k.children[N]={type:"text",value:_.value},N;if(_.type==="element"){let P;for(P in tM)if(Object.hasOwn(tM,P)&&Object.hasOwn(_.properties,P)){const O=_.properties[P],A=tM[P];(A===null||A.includes(_.tagName))&&(_.properties[P]=m(String(O||""),P,_))}}if(_.type==="element"){let P=e?!e.includes(_.tagName):s?s.includes(_.tagName):!1;if(!P&&n&&typeof N=="number"&&(P=!n(_,N,k)),P&&k&&typeof N=="number")return h&&_.children?k.children.splice(N,1,..._.children):k.children.splice(N,1),N}}}function SMe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e<0||i>-1&&e>i||n>-1&&e>n||r>-1&&e>r||bMe.test(t.slice(0,e))?t:""}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function cG(t){return Object.prototype.toString.call(t)==="[object Object]"}function Fs(t){var e,n;return cG(t)===!1?!1:(e=t.constructor,e===void 0?!0:(n=e.prototype,!(cG(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var Jae=Symbol.for("immer-nothing"),dG=Symbol.for("immer-draftable"),gu=Symbol.for("immer-state"),EMe=[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}];function El(t,...e){{const n=EMe[t],r=typeof n=="function"?n.apply(null,e):n;throw new Error(`[Immer] ${r}`)}}var Ow=Object.getPrototypeOf;function Uy(t){return!!t&&!!t[gu]}function Wy(t){var e;return t?qae(t)||Array.isArray(t)||!!t[dG]||!!((e=t.constructor)!=null&&e[dG])||rR(t)||iR(t):!1}var NMe=Object.prototype.constructor.toString();function qae(t){if(!t||typeof t!="object")return!1;const e=Ow(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===NMe}function wP(t,e){nR(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function nR(t){const e=t[gu];return e?e.type_:Array.isArray(t)?1:rR(t)?2:iR(t)?3:0}function q3(t,e){return nR(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Xae(t,e,n){const r=nR(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function _Me(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function rR(t){return t instanceof Map}function iR(t){return t instanceof Set}function ey(t){return t.copy_||t.base_}function X3(t,e){if(rR(t))return new Map(t);if(iR(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=qae(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[gu];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Ow(t),r)}else{const r=Ow(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function xL(t,e=!1){return aR(t)||Uy(t)||!Wy(t)||(nR(t)>1&&(t.set=t.add=t.clear=t.delete=CMe),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>xL(r,!0))),t}function CMe(){El(2)}function aR(t){return Object.isFrozen(t)}var TMe={};function zy(t){const e=TMe[t];return e||El(0,t),e}var iN;function Zae(){return iN}function DMe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fG(t,e){e&&(zy("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Z3(t){Q3(t),t.drafts_.forEach(kMe),t.drafts_=null}function Q3(t){t===iN&&(iN=t.parent_)}function hG(t){return iN=DMe(iN,t)}function kMe(t){const e=t[gu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function mG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[gu].modified_&&(Z3(e),El(4)),Wy(t)&&(t=xP(e,t),e.parent_||SP(e,t)),e.patches_&&zy("Patches").generateReplacementPatches_(n[gu].base_,t,e.patches_,e.inversePatches_)):t=xP(e,n,[]),Z3(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Jae?t:void 0}function xP(t,e,n){if(aR(e))return e;const r=e[gu];if(!r)return wP(e,(i,a)=>pG(t,r,e,i,a,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return SP(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,s=!1;r.type_===3&&(a=new Set(i),i.clear(),s=!0),wP(a,(o,l)=>pG(t,r,i,o,l,n,s)),SP(t,i,!1),n&&t.patches_&&zy("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function pG(t,e,n,r,i,a,s){if(i===n&&El(5),Uy(i)){const o=a&&e&&e.type_!==3&&!q3(e.assigned_,r)?a.concat(r):void 0,l=xP(t,i,o);if(Xae(n,r,l),Uy(l))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Wy(i)&&!aR(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;xP(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&SP(t,i)}}function SP(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&xL(e,n)}function PMe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Zae(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=SL;n&&(i=[r],a=aN);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var SL={get(t,e){if(e===gu)return t;const n=ey(t);if(!q3(n,e))return AMe(t,n,e);const r=n[e];return t.finalized_||!Wy(r)?r:r===fM(t.base_,e)?(hM(t),t.copy_[e]=t4(r,t)):r},has(t,e){return e in ey(t)},ownKeys(t){return Reflect.ownKeys(ey(t))},set(t,e,n){const r=Qae(ey(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=fM(ey(t),e),a=i==null?void 0:i[gu];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(_Me(n,i)&&(n!==void 0||q3(t.base_,e)))return!0;hM(t),e4(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return fM(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,hM(t),e4(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ey(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){El(11)},getPrototypeOf(t){return Ow(t.base_)},setPrototypeOf(){El(12)}},aN={};wP(SL,(t,e)=>{aN[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});aN.deleteProperty=function(t,e){return isNaN(parseInt(e))&&El(13),aN.set.call(this,t,e,void 0)};aN.set=function(t,e,n){return e!=="length"&&isNaN(parseInt(e))&&El(14),SL.set.call(this,t[0],e,n,t[0])};function fM(t,e){const n=t[gu];return(n?ey(n):t)[e]}function AMe(t,e,n){var i;const r=Qae(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Qae(t,e){if(!(e in t))return;let n=Ow(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ow(n)}}function e4(t){t.modified_||(t.modified_=!0,t.parent_&&e4(t.parent_))}function hM(t){t.copy_||(t.copy_=X3(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var RMe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(l=a,...c){return s.produce(l,f=>n.call(this,f,...c))}}typeof n!="function"&&El(6),r!==void 0&&typeof r!="function"&&El(7);let i;if(Wy(e)){const a=hG(this),s=t4(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?Z3(a):Q3(a)}return fG(a,r),mG(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Jae&&(i=void 0),this.autoFreeze_&&xL(i,!0),r){const a=[],s=[];zy("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else El(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Wy(t)||El(8),Uy(t)&&(t=OMe(t));const e=hG(this),n=t4(t,void 0);return n[gu].isManual_=!0,Q3(e),n}finishDraft(t,e){const n=t&&t[gu];(!n||!n.isManual_)&&El(9);const{scope_:r}=n;return fG(r,e),mG(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=zy("Patches").applyPatches_;return Uy(t)?r(t,e):this.produce(t,i=>r(i,e))}};function t4(t,e){const n=rR(t)?zy("MapSet").proxyMap_(t,e):iR(t)?zy("MapSet").proxySet_(t,e):PMe(t,e);return(e?e.scope_:Zae()).drafts_.push(n),n}function OMe(t){return Uy(t)||El(10,t),ese(t)}function ese(t){if(!Wy(t)||aR(t))return t;const e=t[gu];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=X3(t,e.scope_.immer_.useStrictShallowCopy_)}else n=X3(t,!0);return wP(n,(r,i)=>{Xae(n,r,ese(i))}),e&&(e.finalized_=!1),n}var vu=new RMe,EL=vu.produce;vu.produceWithPatches.bind(vu);vu.setAutoFreeze.bind(vu);vu.setUseStrictShallowCopy.bind(vu);vu.applyPatches.bind(vu);var gG=vu.createDraft.bind(vu),vG=vu.finishDraft.bind(vu),jMe={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=Oe.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},IMe={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=pr.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},MMe={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=nt.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},EP=new WeakMap,NP=new WeakMap,NE=new WeakMap,tse=new WeakMap,yG=new WeakMap,bG=new WeakMap,wG=new WeakMap,Oe={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,r=Oe.levels(t,e);return n?r=r.slice(1):r=r.slice(0,-1),r},common(t,e){for(var n=[],r=0;r<t.length&&r<e.length;r++){var i=t[r],a=e[r];if(i!==a)break;n.push(i)}return n},compare(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return 0},endsAfter(t,e){var n=t.length-1,r=t.slice(0,n),i=e.slice(0,n),a=t[n],s=e[n];return Oe.equals(r,i)&&a>s},endsAt(t,e){var n=t.length,r=t.slice(0,n),i=e.slice(0,n);return Oe.equals(r,i)},endsBefore(t,e){var n=t.length-1,r=t.slice(0,n),i=e.slice(0,n),a=t[n],s=e[n];return Oe.equals(r,i)&&a<s},equals(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return Oe.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&Oe.compare(t,e)===0},isBefore(t,e){return Oe.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&Oe.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&Oe.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&Oe.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&Oe.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var n=t.slice(0,-1),r=e.slice(0,-1),i=t[t.length-1],a=e[e.length-1];return i!==a&&Oe.equals(n,r)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,r=[],i=0;i<=t.length;i++)r.push(t.slice(0,i));return n&&r.reverse(),r},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!Oe.isAncestor(e,t)&&!Oe.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var r=[...t],{affinity:i="forward"}=n;if(t.length===0)return r;switch(e.type){case"insert_node":{var{path:a}=e;(Oe.equals(a,r)||Oe.endsBefore(a,r)||Oe.isAncestor(a,r))&&(r[a.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(Oe.equals(s,r)||Oe.isAncestor(s,r))return null;Oe.endsBefore(s,r)&&(r[s.length-1]-=1);break}case"merge_node":{var{path:o,position:l}=e;Oe.equals(o,r)||Oe.endsBefore(o,r)?r[o.length-1]-=1:Oe.isAncestor(o,r)&&(r[o.length-1]-=1,r[o.length]+=l);break}case"split_node":{var{path:c,position:f}=e;if(Oe.equals(c,r)){if(i==="forward")r[r.length-1]+=1;else if(i!=="backward")return null}else Oe.endsBefore(c,r)?r[c.length-1]+=1:Oe.isAncestor(c,r)&&t[c.length]>=f&&(r[c.length-1]+=1,r[c.length]-=f);break}case"move_node":{var{path:h,newPath:m}=e;if(Oe.equals(h,m))return r;if(Oe.isAncestor(h,r)||Oe.equals(h,r)){var p=m.slice();return Oe.endsBefore(h,m)&&h.length<m.length&&(p[h.length-1]-=1),p.concat(r.slice(h.length))}else Oe.isSibling(h,m)&&(Oe.isAncestor(m,r)||Oe.equals(m,r))?Oe.endsBefore(h,r)?r[h.length-1]-=1:r[h.length-1]+=1:Oe.endsBefore(m,r)||Oe.equals(m,r)||Oe.isAncestor(m,r)?(Oe.endsBefore(h,r)&&(r[h.length-1]-=1),r[m.length-1]+=1):Oe.endsBefore(h,r)&&(Oe.equals(m,r)&&(r[m.length-1]+=1),r[h.length-1]-=1);break}}return r}};function sN(t){"@babel/helpers - typeof";return sN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sN(t)}function VMe(t,e){if(sN(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sN(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Me(t){var e=VMe(t,"string");return sN(e)==="symbol"?e:String(e)}function zo(t,e,n){return e=$Me(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var LMe=(t,e,n)=>{switch(n.type){case"insert_node":{var{path:r,node:i}=n,a=vt.parent(t,r),s=r[r.length-1];if(s>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(a.children.splice(s,0,i),e)for(var[o,l]of nt.points(e))e[l]=pr.transform(o,n);break}case"insert_text":{var{path:c,offset:f,text:h}=n;if(h.length===0)break;var m=vt.leaf(t,c),p=m.text.slice(0,f),v=m.text.slice(f);if(m.text=p+h+v,e)for(var[y,x]of nt.points(e))e[x]=pr.transform(y,n);break}case"merge_node":{var{path:S}=n,_=vt.get(t,S),N=Oe.previous(S),k=vt.get(t,N),P=vt.parent(t,S),O=S[S.length-1];if(fn.isText(_)&&fn.isText(k))k.text+=_.text;else if(!fn.isText(_)&&!fn.isText(k))k.children.push(..._.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(S,"] to nodes of different interfaces: ").concat(fs.stringify(_)," ").concat(fs.stringify(k)));if(P.children.splice(O,1),e)for(var[A,T]of nt.points(e))e[T]=pr.transform(A,n);break}case"move_node":{var{path:L,newPath:B}=n;if(Oe.isAncestor(L,B))throw new Error("Cannot move a path [".concat(L,"] to new path [").concat(B,"] because the destination is inside itself."));var W=vt.get(t,L),Y=vt.parent(t,L),V=L[L.length-1];Y.children.splice(V,1);var I=Oe.transform(L,n),H=vt.get(t,Oe.parent(I)),q=I[I.length-1];if(H.children.splice(q,0,W),e)for(var[F,J]of nt.points(e))e[J]=pr.transform(F,n);break}case"remove_node":{var{path:Z}=n,G=Z[Z.length-1],oe=vt.parent(t,Z);if(oe.children.splice(G,1),e)for(var[ae,te]of nt.points(e)){var re=pr.transform(ae,n);if(e!=null&&re!=null)e[te]=re;else{var X=void 0,ce=void 0;for(var[he,ve]of vt.texts(t))if(Oe.compare(ve,Z)===-1)X=[he,ve];else{ce=[he,ve];break}var Ne=!1;X&&ce&&(Oe.equals(ce[1],Z)?Ne=!Oe.hasPrevious(ce[1]):Ne=Oe.common(X[1],Z).length<Oe.common(ce[1],Z).length),X&&!Ne?(ae.path=X[1],ae.offset=X[0].text.length):ce?(ae.path=ce[1],ae.offset=0):e=null}}break}case"remove_text":{var{path:ke,offset:Te,text:ye}=n;if(ye.length===0)break;var Ie=vt.leaf(t,ke),Re=Ie.text.slice(0,Te),Ee=Ie.text.slice(Te+ye.length);if(Ie.text=Re+Ee,e)for(var[$e,He]of nt.points(e))e[He]=pr.transform($e,n);break}case"set_node":{var{path:gt,properties:Ye,newProperties:yt}=n;if(gt.length===0)throw new Error("Cannot set properties on the root node!");var _t=vt.get(t,gt);for(var St in yt){if(St==="children"||St==="text")throw new Error('Cannot set the "'.concat(St,'" property of nodes!'));var Bt=yt[St];Bt==null?delete _t[St]:_t[St]=Bt}for(var Nt in Ye)yt.hasOwnProperty(Nt)||delete _t[Nt];break}case"set_selection":{var{newProperties:Dt}=n;if(Dt==null)e=Dt;else{if(e==null){if(!nt.isRange(Dt))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(fs.stringify(Dt)," when there is no current selection."));e=NS({},Dt)}for(var Ae in Dt){var je=Dt[Ae];if(je==null){if(Ae==="anchor"||Ae==="focus")throw new Error('Cannot remove the "'.concat(Ae,'" selection property'));delete e[Ae]}else e[Ae]=je}}break}case"split_node":{var{path:tt,position:Ot,properties:qe}=n;if(tt.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(tt,"] because the root node cannot be split."));var ft=vt.get(t,tt),Wt=vt.parent(t,tt),an=tt[tt.length-1],Un;if(fn.isText(ft)){var pn=ft.text.slice(0,Ot),ln=ft.text.slice(Ot);ft.text=pn,Un=NS(NS({},qe),{},{text:ln})}else{var Gt=ft.children.slice(0,Ot),Kt=ft.children.slice(Ot);ft.children=Gt,Un=NS(NS({},qe),{},{children:Kt})}if(Wt.children.splice(an+1,0,Un),e)for(var[Lt,In]of nt.points(e))e[In]=pr.transform(Lt,n);break}}return e},FMe={transform(t,e){t.children=gG(t.children);var n=t.selection&&gG(t.selection);try{n=LMe(t,n,e)}finally{t.children=vG(t.children),n?t.selection=Uy(n)?vG(n):n:t.selection=null}}},BMe={insertNodes(t,e,n){t.insertNodes(e,n)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,n){t.setNodes(e,n)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,n){t.unsetNodes(e,n)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,n){t.wrapNodes(e,n)}},UMe={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,n){t.setPoint(e,n)},setSelection(t,e){t.setSelection(e)}},nse=(t,e)=>{for(var n in t){var r=t[n],i=e[n];if(Fs(r)&&Fs(i)){if(!nse(r,i))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(r[a]!==i[a])return!1}else if(r!==i)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0};function WMe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Cm(t,e){if(t==null)return{};var n=WMe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var zMe=["anchor","focus"];function SG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HMe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var nt={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,{anchor:r,focus:i}=t;return nt.isBackward(t)===n?[r,i]:[i,r]},end(t){var[,e]=nt.edges(t);return e},equals(t,e){return pr.equals(t.anchor,e.anchor)&&pr.equals(t.focus,e.focus)},includes(t,e){if(nt.isRange(e)){if(nt.includes(t,e.anchor)||nt.includes(t,e.focus))return!0;var[n,r]=nt.edges(t),[i,a]=nt.edges(e);return pr.isBefore(n,i)&&pr.isAfter(r,a)}var[s,o]=nt.edges(t),l=!1,c=!1;return pr.isPoint(e)?(l=pr.compare(e,s)>=0,c=pr.compare(e,o)<=0):(l=Oe.compare(e,s.path)>=0,c=Oe.compare(e,o.path)<=0),l&&c},intersection(t,e){var n=Cm(t,zMe),[r,i]=nt.edges(t),[a,s]=nt.edges(e),o=pr.isBefore(r,a)?a:r,l=pr.isBefore(i,s)?i:s;return pr.isBefore(l,o)?null:HMe({anchor:o,focus:l},n)},isBackward(t){var{anchor:e,focus:n}=t;return pr.isAfter(e,n)},isCollapsed(t){var{anchor:e,focus:n}=t;return pr.equals(e,n)},isExpanded(t){return!nt.isCollapsed(t)},isForward(t){return!nt.isBackward(t)},isRange(t){return Fs(t)&&pr.isPoint(t.anchor)&&pr.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=nt.edges(t);return e},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return EL(t,r=>{if(r===null)return null;var{affinity:i="inward"}=n,a,s;if(i==="inward"){var o=nt.isCollapsed(r);nt.isForward(r)?(a="forward",s=o?a:"backward"):(a="backward",s=o?a:"forward")}else i==="outward"?nt.isForward(r)?(a="backward",s="forward"):(a="forward",s="backward"):(a=i,s=i);var l=pr.transform(r.anchor,e,{affinity:a}),c=pr.transform(r.focus,e,{affinity:s});if(!l||!c)return null;r.anchor=l,r.focus=c})}},EG=t=>Fs(t)&&vt.isNodeList(t.children)&&!fe.isEditor(t),mn={isAncestor(t){return Fs(t)&&vt.isNodeList(t.children)},isElement:EG,isElementList(t){return Array.isArray(t)&&t.every(e=>mn.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return EG(e)&&e[r]===n},matches(t,e){for(var n in e)if(n!=="children"&&t[n]!==e[n])return!1;return!0}},GMe=["children"],KMe=["text"],NG=new WeakMap,vt={ancestor(t,e){var n=vt.get(t,e);if(fn.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(fs.stringify(n)));return n},ancestors(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of Oe.ancestors(e,n)){var i=vt.ancestor(t,r),a=[i,r];yield a}}()},child(t,e){if(fn.isText(t))throw new Error("Cannot get the child of a text node: ".concat(fs.stringify(t)));var n=t.children[e];if(n==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(fs.stringify(t)));return n},children(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,i=vt.ancestor(t,e),{children:a}=i,s=r?a.length-1:0;r?s>=0:s<a.length;){var o=vt.child(i,s),l=e.concat(s);yield[o,l],s=r?s-1:s+1}}()},common(t,e,n){var r=Oe.common(e,n),i=vt.get(t,r);return[i,r]},descendant(t,e){var n=vt.get(t,e);if(fe.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(fs.stringify(n)));return n},descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of vt.nodes(t,e))r.length!==0&&(yield[n,r])}()},elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of vt.nodes(t,e))mn.isElement(n)&&(yield[n,r])}()},extractProps(t){if(mn.isAncestor(t)){var e=Cm(t,GMe);return e}else{var e=Cm(t,KMe);return e}},first(t,e){for(var n=e.slice(),r=vt.get(t,n);r&&!(fn.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(t,e){if(fn.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(fs.stringify(t)));var n=EL({children:t.children},r=>{var[i,a]=nt.edges(e),s=vt.nodes(r,{reverse:!0,pass:m=>{var[,p]=m;return!nt.includes(e,p)}});for(var[,o]of s){if(!nt.includes(e,o)){var l=vt.parent(r,o),c=o[o.length-1];l.children.splice(c,1)}if(Oe.equals(o,a.path)){var f=vt.leaf(r,o);f.text=f.text.slice(0,a.offset)}if(Oe.equals(o,i.path)){var h=vt.leaf(r,o);h.text=h.text.slice(i.offset)}}fe.isEditor(r)&&(r.selection=null)});return n.children},get(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(fn.isText(n)||!n.children[i])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(fs.stringify(t)));n=n.children[i]}return n},has(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(fn.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(t){return fn.isText(t)||mn.isElement(t)||fe.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=NG.get(t);if(e!==void 0)return e;var n=t.every(r=>vt.isNode(r));return NG.set(t,n),n},last(t,e){for(var n=e.slice(),r=vt.get(t,n);r&&!(fn.isText(r)||r.children.length===0);){var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(t,e){var n=vt.get(t,e);if(!fn.isText(n))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(fs.stringify(n)));return n},levels(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of Oe.levels(e,n)){var i=vt.get(t,r);yield[i,r]}}()},matches(t,e){return mn.isElement(t)&&mn.isElementProps(e)&&mn.matches(t,e)||fn.isText(t)&&fn.isTextProps(e)&&fn.matches(t,e)},nodes(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=e,{from:i=[],to:a}=e,s=new Set,o=[],l=t;!(a&&(r?Oe.isBefore(o,a):Oe.isAfter(o,a)));){if(s.has(l)||(yield[l,o]),!s.has(l)&&!fn.isText(l)&&l.children.length!==0&&(n==null||n([l,o])===!1)){s.add(l);var c=r?l.children.length-1:0;Oe.isAncestor(o,i)&&(c=i[o.length]),o=o.concat(c),l=vt.get(t,o);continue}if(o.length===0)break;if(!r){var f=Oe.next(o);if(vt.has(t,f)){o=f,l=vt.get(t,o);continue}}if(r&&o[o.length-1]!==0){var h=Oe.previous(o);o=h,l=vt.get(t,o);continue}o=Oe.parent(o),l=vt.get(t,o),s.add(l)}}()},parent(t,e){var n=Oe.parent(e),r=vt.get(t,n);if(fn.isText(r))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return r},string(t){return fn.isText(t)?t.text:t.children.map(vt.string).join("")},texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of vt.nodes(t,e))fn.isText(n)&&(yield[n,r])}()}};function _G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Li(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_G(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var sg={isNodeOperation(t){return sg.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!Fs(t))return!1;switch(t.type){case"insert_node":return Oe.isPath(t.path)&&vt.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&Oe.isPath(t.path);case"merge_node":return typeof t.position=="number"&&Oe.isPath(t.path)&&Fs(t.properties);case"move_node":return Oe.isPath(t.path)&&Oe.isPath(t.newPath);case"remove_node":return Oe.isPath(t.path)&&vt.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&Oe.isPath(t.path);case"set_node":return Oe.isPath(t.path)&&Fs(t.properties)&&Fs(t.newProperties);case"set_selection":return t.properties===null&&nt.isRange(t.newProperties)||t.newProperties===null&&nt.isRange(t.properties)||Fs(t.properties)&&Fs(t.newProperties);case"split_node":return Oe.isPath(t.path)&&typeof t.position=="number"&&Fs(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>sg.isOperation(e))},isSelectionOperation(t){return sg.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return sg.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return Li(Li({},t),{},{type:"remove_node"});case"insert_text":return Li(Li({},t),{},{type:"remove_text"});case"merge_node":return Li(Li({},t),{},{type:"split_node",path:Oe.previous(t.path)});case"move_node":{var{newPath:e,path:n}=t;if(Oe.equals(e,n))return t;if(Oe.isSibling(n,e))return Li(Li({},t),{},{path:e,newPath:n});var r=Oe.transform(n,t),i=Oe.transform(Oe.next(n),t);return Li(Li({},t),{},{path:r,newPath:i})}case"remove_node":return Li(Li({},t),{},{type:"insert_node"});case"remove_text":return Li(Li({},t),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:s}=t;return Li(Li({},t),{},{properties:s,newProperties:a})}case"set_selection":{var{properties:o,newProperties:l}=t;return o==null?Li(Li({},t),{},{properties:l,newProperties:null}):l==null?Li(Li({},t),{},{properties:null,newProperties:o}):Li(Li({},t),{},{properties:l,newProperties:o})}case"split_node":return Li(Li({},t),{},{type:"merge_node",path:Oe.next(t.path)})}}},CG=new WeakMap,YMe=t=>{var e=CG.get(t);if(e!==void 0)return e;if(!Fs(t))return!1;var n=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||Fs(t.marks))&&(t.selection===null||nt.isRange(t.selection))&&vt.isNodeList(t.children)&&sg.isOperationList(t.operations);return CG.set(t,n),n},fe={above(t,e){return t.above(e)},addMark(t,e,n){t.addMark(e,n)},after(t,e,n){return t.after(e,n)},before(t,e,n){return t.before(e,n)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=e;t.deleteBackward(n)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=e;t.deleteForward(n)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,n){t.insertFragment(e,n)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,n){return t.isEdge(e,n)},isEditor(t){return YMe(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,n){return t.isEnd(e,n)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,n){return t.isStart(e,n)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,n){return t.leaf(e,n)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,n){return t.node(e,n)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,n){return t.parent(e,n)},path(t,e,n){return t.path(e,n)},pathRef(t,e,n){return t.pathRef(e,n)},pathRefs(t){return t.pathRefs()},point(t,e,n){return t.point(e,n)},pointRef(t,e,n){return t.pointRef(e,n)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,n){return t.range(e,n)},rangeRef(t,e,n){return t.rangeRef(e,n)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,n){return t.string(e,n)},unhangRange(t,e,n){return t.unhangRange(e,n)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(t,e,n)=>t.shouldMergeNodesRemovePrevNode(e,n)},JMe={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(Oe.isPath)}};function TG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pr={compare(t,e){var n=Oe.compare(t.path,e.path);return n===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:n},isAfter(t,e){return pr.compare(t,e)===1},isBefore(t,e){return pr.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&Oe.equals(t.path,e.path)},isPoint(t){return Fs(t)&&typeof t.offset=="number"&&Oe.isPath(t.path)},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return EL(t,r=>{if(r===null)return null;var{affinity:i="forward"}=n,{path:a,offset:s}=r;switch(e.type){case"insert_node":case"move_node":{r.path=Oe.transform(a,e,n);break}case"insert_text":{Oe.equals(e.path,a)&&(e.offset<s||e.offset===s&&i==="forward")&&(r.offset+=e.text.length);break}case"merge_node":{Oe.equals(e.path,a)&&(r.offset+=e.position),r.path=Oe.transform(a,e,n);break}case"remove_text":{Oe.equals(e.path,a)&&e.offset<=s&&(r.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(Oe.equals(e.path,a)||Oe.isAncestor(e.path,a))return null;r.path=Oe.transform(a,e,n);break}case"split_node":{if(Oe.equals(e.path,a)){if(e.position===s&&i==null)return null;(e.position<s||e.position===s&&i==="forward")&&(r.offset-=e.position,r.path=Oe.transform(a,e,DG(DG({},n),{},{affinity:"forward"})))}else r.path=Oe.transform(a,e,n);break}}})}},kG=void 0,fs={setScrubber(t){kG=t},stringify(t){return JSON.stringify(t,kG)}},qMe=["text"],XMe=["anchor","focus"];function PG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var fn={equals(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function i(a){var s=Cm(a,qMe);return s}return nse(r?i(t):t,r?i(e):e)},isText(t){return Fs(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>fn.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var n in e)if(n!=="text"&&(!t.hasOwnProperty(n)||t[n]!==e[n]))return!1;return!0},decorations(t,e){var n=[Zh({},t)];for(var r of e){var i=Cm(r,XMe),[a,s]=nt.edges(r),o=[],l=0,c=a.offset,f=s.offset;for(var h of n){var{length:m}=h.text,p=l;if(l+=m,c<=p&&l<=f){Object.assign(h,i),o.push(h);continue}if(c!==f&&(c===l||f===p)||c>l||f<p||f===p&&p!==0){o.push(h);continue}var v=h,y=void 0,x=void 0;if(f<l){var S=f-p;x=Zh(Zh({},v),{},{text:v.text.slice(S)}),v=Zh(Zh({},v),{},{text:v.text.slice(0,S)})}if(c>p){var _=c-p;y=Zh(Zh({},v),{},{text:v.text.slice(0,_)}),v=Zh(Zh({},v),{},{text:v.text.slice(_)})}Object.assign(v,i),y&&o.push(y),o.push(v),x&&o.push(x)}n=o}return n}},NL=t=>t.selection?t.selection:t.children.length>0?fe.end(t,[]):[0],lx=(t,e)=>{var[n]=fe.node(t,e);return r=>r===n},_L=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,i=n?rVe(e):e,a=tr.None,s=tr.None,o=0,l=null,c=null;for(var f of i){var h=f.codePointAt(0);if(!h)break;var m=pVe(f,h);if([a,s]=r?[s,m]:[m,a],sw(a,tr.ZWJ)&&sw(s,tr.ExtPict)&&(r?l=AG(e.substring(0,o)):l=AG(e.substring(0,e.length-o)),!l)||sw(a,tr.RI)&&sw(s,tr.RI)&&(c!==null?c=!c:r?c=!0:c=wVe(e.substring(0,e.length-o)),!c)||a!==tr.None&&s!==tr.None&&vVe(a,s))break;o+=f.length}return o||1},ZMe=/\s/,QMe=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,eVe=/['\u2018\u2019]/,tVe=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,i=!1;e.length>0;){var a=_L(e,n),[s,o]=CL(e,a,n);if(nVe(s,o,n))i=!0,r+=a;else if(!i)r+=a;else break;e=o}return r},CL=(t,e,n)=>{if(n){var r=t.length-e;return[t.slice(r,t.length),t.slice(0,r)]}return[t.slice(0,e),t.slice(e)]},nVe=function t(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(ZMe.test(e))return!1;if(eVe.test(e)){var i=_L(n,r),[a,s]=CL(n,i,r);if(t(a,s,r))return!0}return!QMe.test(e)},rVe=function*(e){for(var n=e.length-1,r=0;r<e.length;r++){var i=e.charAt(n-r);if(aVe(i.charCodeAt(0))){var a=e.charAt(n-r-1);if(iVe(a.charCodeAt(0))){yield a+i,r++;continue}}yield i}},iVe=t=>t>=55296&&t<=56319,aVe=t=>t>=56320&&t<=57343,tr;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(tr||(tr={}));var sVe=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,oVe=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,lVe=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,uVe=/^[\u1100-\u115F\uA960-\uA97C]$/,cVe=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,dVe=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,fVe=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,hVe=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,mVe=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,pVe=(t,e)=>{var n=tr.Any;return t.search(sVe)!==-1&&(n|=tr.Extend),e===8205&&(n|=tr.ZWJ),e>=127462&&e<=127487&&(n|=tr.RI),t.search(oVe)!==-1&&(n|=tr.Prepend),t.search(lVe)!==-1&&(n|=tr.SpacingMark),t.search(uVe)!==-1&&(n|=tr.L),t.search(cVe)!==-1&&(n|=tr.V),t.search(dVe)!==-1&&(n|=tr.T),t.search(fVe)!==-1&&(n|=tr.LV),t.search(hVe)!==-1&&(n|=tr.LVT),t.search(mVe)!==-1&&(n|=tr.ExtPict),n};function sw(t,e){return(t&e)!==0}var gVe=[[tr.L,tr.L|tr.V|tr.LV|tr.LVT],[tr.LV|tr.V,tr.V|tr.T],[tr.LVT|tr.T,tr.T],[tr.Any,tr.Extend|tr.ZWJ],[tr.Any,tr.SpacingMark],[tr.Prepend,tr.Any],[tr.ZWJ,tr.ExtPict],[tr.RI,tr.RI]];function vVe(t,e){return gVe.findIndex(n=>sw(t,n[0])&&sw(e,n[1]))===-1}var yVe=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,AG=t=>t.search(yVe)!==-1,bVe=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,wVe=t=>{var e=t.match(bVe);if(e===null)return!1;var n=e[0].length/2;return n%2===1},xVe={delete(t,e){t.delete(e)},insertFragment(t,e,n){t.insertFragment(e,n)},insertText(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe.withoutNormalizing(t,()=>{var{voids:r=!1}=n,{at:i=NL(t)}=n;if(Oe.isPath(i)&&(i=fe.range(t,i)),nt.isRange(i))if(nt.isCollapsed(i))i=i.anchor;else{var a=nt.end(i);if(!r&&fe.void(t,{at:a}))return;var s=nt.start(i),o=fe.pointRef(t,s),l=fe.pointRef(t,a);ot.delete(t,{at:i,voids:r});var c=o.unref(),f=l.unref();i=c||f,ot.setSelection(t,{anchor:i,focus:i})}if(!(!r&&fe.void(t,{at:i})||fe.elementReadOnly(t,{at:i}))){var{path:h,offset:m}=i;e.length>0&&t.apply({type:"insert_text",path:h,offset:m,text:e})}})}};function RG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ot=LT(LT(LT(LT({},FMe),BMe),UMe),xVe),mk=new WeakMap,SVe=t=>mk.get(t)||!1,EVe=(t,e,n)=>{var r=mk.get(t)||!1;mk.set(t,!0);try{e(),n()}finally{mk.set(t,r)}};function rse(t,e,n){var r=EP.get(t)||[],i=NP.get(t)||new Set,a,s,o=h=>{if(h){var m=h.join(",");s.has(m)||(s.add(m),a.push(h))}};if(n){a=[],s=new Set;for(var l of r){var c=n(l);o(c)}}else a=r,s=i;for(var f of e)o(f);EP.set(t,a),NP.set(t,s)}var NVe=(t,e)=>{for(var n of fe.pathRefs(t))jMe.transform(n,e);for(var r of fe.pointRefs(t))IMe.transform(r,e);for(var i of fe.rangeRefs(t))MMe.transform(i,e);if(!SVe(t)){var a=Oe.operationCanTransformPath(e)?s=>Oe.transform(s,e):void 0;rse(t,t.getDirtyPaths(e),a)}ot.transform(t,e),t.operations.push(e),fe.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),NE.get(t)||(NE.set(t,!0),Promise.resolve().then(()=>{NE.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},_Ve=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=e;return Oe.levels(n)}case"insert_node":{var{node:r,path:i}=e,a=Oe.levels(i),s=fn.isText(r)?[]:Array.from(vt.nodes(r),B=>{var[,W]=B;return i.concat(W)});return[...a,...s]}case"merge_node":{var{path:o}=e,l=Oe.ancestors(o),c=Oe.previous(o);return[...l,c]}case"move_node":{var{path:f,newPath:h}=e;if(Oe.equals(f,h))return[];var m=[],p=[];for(var v of Oe.ancestors(f)){var y=Oe.transform(v,e);m.push(y)}for(var x of Oe.ancestors(h)){var S=Oe.transform(x,e);p.push(S)}var _=p[p.length-1],N=h[h.length-1],k=_.concat(N);return[...m,...p,k]}case"remove_node":{var{path:P}=e,O=Oe.ancestors(P);return[...O]}case"split_node":{var{path:A}=e,T=Oe.levels(A),L=Oe.next(A);return[...T,L]}default:return[]}},CVe=t=>{var{selection:e}=t;return e?vt.fragment(t,e):[]},TVe=(t,e)=>{var[n,r]=e;if(!fn.isText(n)){if(mn.isElement(n)&&n.children.length===0){var i={text:""};ot.insertNodes(t,i,{at:r.concat(0),voids:!0});return}for(var a=fe.isEditor(n)?!1:mn.isElement(n)&&(t.isInline(n)||n.children.length===0||fn.isText(n.children[0])||t.isInline(n.children[0])),s=0,o=0;o<n.children.length;o++,s++){var l=vt.get(t,r);if(!fn.isText(l)){var c=l.children[s],f=l.children[s-1],h=o===n.children.length-1,m=fn.isText(c)||mn.isElement(c)&&t.isInline(c);if(m!==a)ot.removeNodes(t,{at:r.concat(s),voids:!0}),s--;else if(mn.isElement(c)){if(t.isInline(c)){if(f==null||!fn.isText(f)){var p={text:""};ot.insertNodes(t,p,{at:r.concat(s),voids:!0}),s++}else if(h){var v={text:""};ot.insertNodes(t,v,{at:r.concat(s+1),voids:!0}),s++}}}else{if(!fn.isText(c)&&!("children"in c)){var y=c;y.children=[]}f!=null&&fn.isText(f)&&(fn.equals(c,f,{loose:!0})?(ot.mergeNodes(t,{at:r.concat(s),voids:!0}),s--):f.text===""?(ot.removeNodes(t,{at:r.concat(s-1),voids:!0}),s--):c.text===""&&(ot.removeNodes(t,{at:r.concat(s),voids:!0}),s--))}}}}},DVe=(t,e)=>{var{iteration:n,initialDirtyPathsLength:r}=e,i=r*42;if(n>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},kVe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:i="lowest",at:a=e.selection,match:s}=n;if(a){var o=fe.path(e,a),l=i==="lowest";for(var[c,f]of fe.levels(e,{at:o,voids:r,match:s,reverse:l}))if(!fn.isText(c)){if(nt.isRange(a)){if(Oe.isAncestor(f,a.anchor.path)&&Oe.isAncestor(f,a.focus.path))return[c,f]}else if(!Oe.equals(o,f))return[c,f]}}};function OG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var PVe=(t,e,n)=>{var{selection:r}=t;if(r){var i=(h,m)=>{if(!fn.isText(h))return!1;var[p,v]=fe.parent(t,m);return!t.isVoid(p)||t.markableVoid(p)},a=nt.isExpanded(r),s=!1;if(!a){var[o,l]=fe.node(t,r);if(o&&i(o,l)){var[c]=fe.parent(t,l);s=c&&t.markableVoid(c)}}if(a||s)ot.setNodes(t,{[e]:n},{match:i,split:!0,voids:!0});else{var f=jG(jG({},fe.marks(t)||{}),{},{[e]:n});t.marks=f,NE.get(t)||t.onChange()}}};function IG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var AVe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=fe.point(e,n,{edge:"end"}),a=fe.end(e,[]),s={anchor:i,focus:a},{distance:o=1}=r,l=0,c;for(var f of fe.positions(e,MG(MG({},r),{},{at:s}))){if(l>o)break;l!==0&&(c=f),l++}return c};function VG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $G(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var RVe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=fe.start(e,[]),a=fe.point(e,n,{edge:"start"}),s={anchor:i,focus:a},{distance:o=1}=r,l=0,c;for(var f of fe.positions(e,$G($G({},r),{},{at:s,reverse:!0}))){if(l>o)break;l!==0&&(c=f),l++}return c},OVe=(t,e)=>{var{selection:n}=t;n&&nt.isCollapsed(n)&&ot.delete(t,{unit:e,reverse:!0})},jVe=(t,e)=>{var{selection:n}=t;n&&nt.isCollapsed(n)&&ot.delete(t,{unit:e})},IVe=function(e){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e;r&&nt.isExpanded(r)&&ot.delete(e,{reverse:n==="backward"})},MVe=(t,e)=>[fe.start(t,e),fe.end(t,e)];function LG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var VVe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return fe.above(e,FG(FG({},n),{},{match:r=>mn.isElement(r)&&fe.isElementReadOnly(e,r)}))},$Ve=(t,e)=>fe.point(t,e,{edge:"end"}),LVe=(t,e)=>{var n=fe.path(t,e,{edge:"start"});return fe.node(t,n)},FVe=(t,e)=>{var n=fe.range(t,e);return vt.fragment(t,n)};function BG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var BVe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return fe.above(e,UG(UG({},n),{},{match:r=>mn.isElement(r)&&fe.isVoid(e,r)}))},UVe=(t,e)=>e.children.some(n=>mn.isElement(n)&&fe.isBlock(t,n)),WVe=(t,e)=>e.children.some(n=>fn.isText(n)||fe.isInline(t,n)),zVe=(t,e)=>vt.has(t,e),HVe=(t,e)=>e.children.every(n=>fn.isText(n)),GVe=t=>{ot.splitNodes(t,{always:!0})},KVe=(t,e,n)=>{ot.insertNodes(t,e,n)},YVe=t=>{ot.splitNodes(t,{always:!0})};function WG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JVe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qVe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i,marks:a}=e;if(i){if(a){var s=JVe({text:n},a);ot.insertNodes(e,s,{at:r.at,voids:r.voids})}else ot.insertText(e,n,r);e.marks=null}},XVe=(t,e)=>!t.isInline(e),ZVe=(t,e,n)=>fe.isStart(t,e,n)||fe.isEnd(t,e,n),QVe=(t,e)=>{var{children:n}=e,[r]=n;return n.length===0||n.length===1&&fn.isText(r)&&r.text===""&&!t.isVoid(e)},e3e=(t,e,n)=>{var r=fe.end(t,n);return pr.equals(e,r)},t3e=t=>{var e=tse.get(t);return e===void 0?!0:e},n3e=(t,e,n)=>{if(e.offset!==0)return!1;var r=fe.start(t,n);return pr.equals(e,r)},r3e=(t,e)=>{var n=fe.path(t,e,{edge:"end"});return fe.node(t,n)},i3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=fe.path(e,n,r),a=vt.leaf(e,i);return[a,i]};function a3e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,reverse:r=!1,voids:i=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!n){var s=[],o=fe.path(t,n);for(var[l,c]of vt.levels(t,o))if(a(l,c)&&(s.push([l,c]),!i&&mn.isElement(l)&&fe.isVoid(t,l)))break;r&&s.reverse(),yield*s}}()}var s3e=["text"],o3e=["text"],l3e=function(e){var{marks:n,selection:r}=e;if(!r)return null;var{anchor:i,focus:a}=r;if(n)return n;if(nt.isExpanded(r)){var s=fe.isEnd(e,i,i.path);if(s){var o=fe.after(e,i);o&&(i=o)}var[l]=fe.nodes(e,{match:fn.isText,at:{anchor:i,focus:a}});if(l){var[c]=l,f=Cm(c,s3e);return f}else return{}}var{path:h}=i,[m]=fe.leaf(e,h);if(i.offset===0){var p=fe.previous(e,{at:h,match:fn.isText}),v=fe.above(e,{match:k=>mn.isElement(k)&&fe.isVoid(e,k)&&e.markableVoid(k)});if(!v){var y=fe.above(e,{match:k=>mn.isElement(k)&&fe.isBlock(e,k)});if(p&&y){var[x,S]=p,[,_]=y;Oe.isAncestor(_,S)&&(m=x)}}}var N=Cm(m,o3e);return N},u3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:a,at:s=e.selection}=n;if(s){var o=fe.after(e,s,{voids:i});if(o){var[,l]=fe.last(e,[]),c=[o.path,l];if(Oe.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(Oe.isPath(s)){var[f]=fe.parent(e,s);a=m=>f.children.includes(m)}else a=()=>!0;var[h]=fe.nodes(e,{at:c,match:a,mode:r,voids:i});return h}}},c3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=fe.path(e,n,r),a=vt.get(e,i);return[a,i]};function d3e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,mode:r="all",universal:i=!1,reverse:a=!1,voids:s=!1,ignoreNonSelectable:o=!1}=e,{match:l}=e;if(l||(l=()=>!0),!!n){var c,f;if(JMe.isSpan(n))c=n[0],f=n[1];else{var h=fe.path(t,n,{edge:"start"}),m=fe.path(t,n,{edge:"end"});c=a?m:h,f=a?h:m}var p=vt.nodes(t,{reverse:a,from:c,to:f,pass:k=>{var[P]=k;return mn.isElement(P)?!!(!s&&(fe.isVoid(t,P)||fe.isElementReadOnly(t,P))||o&&!fe.isSelectable(t,P)):!1}}),v=[],y;for(var[x,S]of p)if(!(o&&mn.isElement(x)&&!fe.isSelectable(t,x))){var _=y&&Oe.compare(S,y[1])===0;if(!(r==="highest"&&_)){if(!l(x,S)){if(i&&!_&&fn.isText(x))return;continue}if(r==="lowest"&&_){y=[x,S];continue}var N=r==="lowest"?y:[x,S];N&&(i?v.push(N):yield N),y=[x,S]}}r==="lowest"&&y&&(i?v.push(y):yield y),i&&(yield*v)}}()}var f3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:i}=n,a=f=>EP.get(f)||[],s=f=>NP.get(f)||new Set,o=f=>{var h=a(f).pop(),m=h.join(",");return s(f).delete(m),h};if(fe.isNormalizing(e)){if(r){var l=Array.from(vt.nodes(e),f=>{var[,h]=f;return h}),c=new Set(l.map(f=>f.join(",")));EP.set(e,l),NP.set(e,c)}a(e).length!==0&&fe.withoutNormalizing(e,()=>{for(var f of a(e))if(vt.has(e,f)){var h=fe.node(e,f),[m,p]=h;mn.isElement(m)&&m.children.length===0&&e.normalizeNode(h,{operation:i})}for(var v=a(e),y=v.length,x=0;v.length!==0;){if(!e.shouldNormalize({dirtyPaths:v,iteration:x,initialDirtyPathsLength:y,operation:i}))return;var S=o(e);if(vt.has(e,S)){var _=fe.node(e,S);e.normalizeNode(_,{operation:i})}x++,v=a(e)}})}},h3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=fe.path(e,n,r),a=Oe.parent(i),s=fe.node(e,a);return s},m3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,a={current:n,affinity:i,unref(){var{current:o}=a,l=fe.pathRefs(e);return l.delete(a),a.current=null,o}},s=fe.pathRefs(e);return s.add(a),a},p3e=t=>{var e=yG.get(t);return e||(e=new Set,yG.set(t,e)),e},g3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:i,edge:a}=r;if(Oe.isPath(n)){if(a==="start"){var[,s]=vt.first(e,n);n=s}else if(a==="end"){var[,o]=vt.last(e,n);n=o}}return nt.isRange(n)&&(a==="start"?n=nt.start(n):a==="end"?n=nt.end(n):n=Oe.common(n.anchor.path,n.focus.path)),pr.isPoint(n)&&(n=n.path),i!=null&&(n=n.slice(0,i)),n},v3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,a={current:n,affinity:i,unref(){var{current:o}=a,l=fe.pointRefs(e);return l.delete(a),a.current=null,o}},s=fe.pointRefs(e);return s.add(a),a},y3e=t=>{var e=bG.get(t);return e||(e=new Set,bG.set(t,e)),e},b3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:i="start"}=r;if(Oe.isPath(n)){var a;if(i==="end"){var[,s]=vt.last(e,n);a=s}else{var[,o]=vt.first(e,n);a=o}var l=vt.get(e,a);if(!fn.isText(l))throw new Error("Cannot get the ".concat(i," point in the node at path [").concat(n,"] because it has no ").concat(i," text node."));return{path:a,offset:i==="end"?l.text.length:0}}if(nt.isRange(n)){var[c,f]=nt.edges(n);return i==="start"?c:f}return n};function w3e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,unit:r="offset",reverse:i=!1,voids:a=!1,ignoreNonSelectable:s=!1}=e;if(!n)return;var o=fe.range(t,n),[l,c]=nt.edges(o),f=i?c:l,h=!1,m="",p=0,v=0,y=0;for(var[x,S]of fe.nodes(t,{at:n,reverse:i,voids:a,ignoreNonSelectable:s})){if(mn.isElement(x)){if(!a&&(t.isVoid(x)||t.isElementReadOnly(x))){yield fe.start(t,S);continue}if(t.isInline(x))continue;if(fe.hasInlines(t,x)){var _=Oe.isAncestor(S,c.path)?c:fe.end(t,S),N=Oe.isAncestor(S,l.path)?l:fe.start(t,S);m=fe.string(t,{anchor:N,focus:_},{voids:a}),h=!0}}if(fn.isText(x)){var k=Oe.equals(S,f.path);for(k?(v=i?f.offset:x.text.length-f.offset,y=f.offset):(v=x.text.length,y=i?v:0),(k||h||r==="offset")&&(yield{path:S,offset:y},h=!1);;){if(p===0){if(m==="")break;p=P(m,r,i),m=CL(m,p,i)[1]}if(y=i?y-p:y+p,v=v-p,v<0){p=-v;break}p=0,yield{path:S,offset:y}}}}function P(O,A,T){return A==="character"?_L(O,T):A==="word"?tVe(O,T):A==="line"||A==="block"?O.length:1}}()}var x3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:a,at:s=e.selection}=n;if(s){var o=fe.before(e,s,{voids:i});if(o){var[,l]=fe.first(e,[]),c=[o.path,l];if(Oe.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(Oe.isPath(s)){var[f]=fe.parent(e,s);a=m=>f.children.includes(m)}else a=()=>!0;var[h]=fe.nodes(e,{reverse:!0,at:c,match:a,mode:r,voids:i});return h}}},S3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,a={current:n,affinity:i,unref(){var{current:o}=a,l=fe.rangeRefs(e);return l.delete(a),a.current=null,o}},s=fe.rangeRefs(e);return s.add(a),a},E3e=t=>{var e=wG.get(t);return e||(e=new Set,wG.set(t,e)),e},N3e=(t,e,n)=>{if(nt.isRange(e)&&!n)return e;var r=fe.start(t,e),i=fe.end(t,n||e);return{anchor:r,focus:i}};function zG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var C3e=(t,e)=>{var{selection:n}=t;if(n){var r=(f,h)=>{if(!fn.isText(f))return!1;var[m,p]=fe.parent(t,h);return!t.isVoid(m)||t.markableVoid(m)},i=nt.isExpanded(n),a=!1;if(!i){var[s,o]=fe.node(t,n);if(s&&r(s,o)){var[l]=fe.parent(t,o);a=l&&t.markableVoid(l)}}if(i||a)ot.unsetNodes(t,e,{match:r,split:!0,voids:!0});else{var c=_3e({},fe.marks(t)||{});delete c[e],t.marks=c,NE.get(t)||t.onChange()}}},T3e=(t,e)=>{tse.set(t,e)},D3e=(t,e)=>fe.point(t,e,{edge:"start"}),k3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,a=fe.range(e,n),[s,o]=nt.edges(a),l="";for(var[c,f]of fe.nodes(e,{at:a,match:fn.isText,voids:i})){var h=c.text;Oe.equals(f,o.path)&&(h=h.slice(0,o.offset)),Oe.equals(f,s.path)&&(h=h.slice(s.offset)),l+=h}return l},P3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,[a,s]=nt.edges(n);if(a.offset!==0||s.offset!==0||nt.isCollapsed(n)||Oe.hasPrevious(s.path))return n;var o=fe.above(e,{at:s,match:v=>mn.isElement(v)&&fe.isBlock(e,v),voids:i}),l=o?o[1]:[],c=fe.start(e,a),f={anchor:c,focus:s},h=!0;for(var[m,p]of fe.nodes(e,{at:f,match:fn.isText,reverse:!0,voids:i})){if(h){h=!1;continue}if(m.text!==""||Oe.isBefore(p,l)){s={path:p,offset:m.text.length};break}}return{anchor:a,focus:s}},A3e=(t,e)=>{var n=fe.isNormalizing(t);fe.setNormalizing(t,!1);try{e()}finally{fe.setNormalizing(t,n)}fe.normalize(t)},R3e=(t,e,n)=>{var[r,i]=e;return mn.isElement(r)&&fe.isEmpty(t,r)||fn.isText(r)&&r.text===""&&i[i.length-1]!==0},O3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe.withoutNormalizing(e,()=>{var r,i,{reverse:a=!1,unit:s="character",distance:o=1,voids:l=!1}=n,{at:c=e.selection,hanging:f=!1}=n;if(c){var h=!1;if(nt.isRange(c)&&nt.isCollapsed(c)&&(h=!0,c=c.anchor),pr.isPoint(c)){var m=fe.void(e,{at:c,mode:"highest"});if(!l&&m){var[,p]=m;c=p}else{var v={unit:s,distance:o},y=a?fe.before(e,c,v)||fe.start(e,[]):fe.after(e,c,v)||fe.end(e,[]);c={anchor:c,focus:y},f=!0}}if(Oe.isPath(c)){ot.removeNodes(e,{at:c,voids:l});return}if(!nt.isCollapsed(c)){if(!f){var[,x]=nt.edges(c),S=fe.end(e,[]);pr.equals(x,S)||(c=fe.unhangRange(e,c,{voids:l}))}var[_,N]=nt.edges(c),k=fe.above(e,{match:Re=>mn.isElement(Re)&&fe.isBlock(e,Re),at:_,voids:l}),P=fe.above(e,{match:Re=>mn.isElement(Re)&&fe.isBlock(e,Re),at:N,voids:l}),O=k&&P&&!Oe.equals(k[1],P[1]),A=Oe.equals(_.path,N.path),T=l?null:(r=fe.void(e,{at:_,mode:"highest"}))!==null&&r!==void 0?r:fe.elementReadOnly(e,{at:_,mode:"highest"}),L=l?null:(i=fe.void(e,{at:N,mode:"highest"}))!==null&&i!==void 0?i:fe.elementReadOnly(e,{at:N,mode:"highest"});if(T){var B=fe.before(e,_);B&&k&&Oe.isAncestor(k[1],B.path)&&(_=B)}if(L){var W=fe.after(e,N);W&&P&&Oe.isAncestor(P[1],W.path)&&(N=W)}var Y=[],V;for(var I of fe.nodes(e,{at:c,voids:l})){var[H,q]=I;V&&Oe.compare(q,V)===0||(!l&&mn.isElement(H)&&(fe.isVoid(e,H)||fe.isElementReadOnly(e,H))||!Oe.isCommon(q,_.path)&&!Oe.isCommon(q,N.path))&&(Y.push(I),V=q)}var F=Array.from(Y,Re=>{var[,Ee]=Re;return fe.pathRef(e,Ee)}),J=fe.pointRef(e,_),Z=fe.pointRef(e,N),G="";if(!A&&!T){var oe=J.current,[ae]=fe.leaf(e,oe),{path:te}=oe,{offset:re}=_,X=ae.text.slice(re);X.length>0&&(e.apply({type:"remove_text",path:te,offset:re,text:X}),G=X)}if(F.reverse().map(Re=>Re.unref()).filter(Re=>Re!==null).forEach(Re=>ot.removeNodes(e,{at:Re,voids:l})),!L){var ce=Z.current,[he]=fe.leaf(e,ce),{path:ve}=ce,Ne=A?_.offset:0,ke=he.text.slice(Ne,N.offset);ke.length>0&&(e.apply({type:"remove_text",path:ve,offset:Ne,text:ke}),G=ke)}!A&&O&&Z.current&&J.current&&ot.mergeNodes(e,{at:Z.current,hanging:!0,voids:l}),h&&a&&s==="character"&&G.length>1&&G.match(/[\u0E00-\u0E7F]+/)&&ot.insertText(e,G.slice(0,G.length-o));var Te=J.unref(),ye=Z.unref(),Ie=a?Te||ye:ye||Te;n.at==null&&Ie&&ot.select(e,Ie)}}})},j3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe.withoutNormalizing(e,()=>{var{hanging:i=!1,voids:a=!1}=r,{at:s=NL(e),batchDirty:o=!0}=r;if(n.length){if(nt.isRange(s))if(i||(s=fe.unhangRange(e,s,{voids:a})),nt.isCollapsed(s))s=s.anchor;else{var[,l]=nt.edges(s);if(!a&&fe.void(e,{at:l}))return;var c=fe.pointRef(e,l);ot.delete(e,{at:s}),s=c.unref()}else Oe.isPath(s)&&(s=fe.start(e,s));if(!(!a&&fe.void(e,{at:s}))){var f=fe.above(e,{at:s,match:X=>mn.isElement(X)&&fe.isInline(e,X),mode:"highest",voids:a});if(f){var[,h]=f;if(fe.isEnd(e,s,h)){var m=fe.after(e,h);s=m}else if(fe.isStart(e,s,h)){var p=fe.before(e,h);s=p}}var v=fe.above(e,{match:X=>mn.isElement(X)&&fe.isBlock(e,X),at:s,voids:a}),[,y]=v,x=fe.isStart(e,s,y),S=fe.isEnd(e,s,y),_=x&&S,N=!x||x&&S,k=!S,[,P]=vt.first({children:n},[]),[,O]=vt.last({children:n},[]),A=[],T=X=>{var[ce,he]=X,ve=he.length===0;return ve?!1:_?!0:!(N&&Oe.isAncestor(he,P)&&mn.isElement(ce)&&!e.isVoid(ce)&&!e.isInline(ce)||k&&Oe.isAncestor(he,O)&&mn.isElement(ce)&&!e.isVoid(ce)&&!e.isInline(ce))};for(var L of vt.nodes({children:n},{pass:T}))T(L)&&A.push(L);var B=[],W=[],Y=[],V=!0,I=!1;for(var[H]of A)mn.isElement(H)&&!e.isInline(H)?(V=!1,I=!0,W.push(H)):V?B.push(H):Y.push(H);var[q]=fe.nodes(e,{at:s,match:X=>fn.isText(X)||fe.isInline(e,X),mode:"highest",voids:a}),[,F]=q,J=fe.isStart(e,s,F),Z=fe.isEnd(e,s,F),G=fe.pathRef(e,S&&!Y.length?Oe.next(y):y),oe=fe.pathRef(e,Z?Oe.next(F):F);ot.splitNodes(e,{at:s,match:X=>I?mn.isElement(X)&&fe.isBlock(e,X):fn.isText(X)||fe.isInline(e,X),mode:I?"lowest":"highest",always:I&&(!x||B.length>0)&&(!S||Y.length>0),voids:a});var ae=fe.pathRef(e,!J||J&&Z?Oe.next(F):F);if(ot.insertNodes(e,B,{at:ae.current,match:X=>fn.isText(X)||fe.isInline(e,X),mode:"highest",voids:a,batchDirty:o}),_&&!B.length&&W.length&&!Y.length&&ot.delete(e,{at:y,voids:a}),ot.insertNodes(e,W,{at:G.current,match:X=>mn.isElement(X)&&fe.isBlock(e,X),mode:"lowest",voids:a,batchDirty:o}),ot.insertNodes(e,Y,{at:oe.current,match:X=>fn.isText(X)||fe.isInline(e,X),mode:"highest",voids:a,batchDirty:o}),!r.at){var te;if(Y.length>0&&oe.current?te=Oe.previous(oe.current):W.length>0&&G.current?te=Oe.previous(G.current):ae.current&&(te=Oe.previous(ae.current)),te){var re=fe.end(e,te);ot.select(e,re)}}ae.unref(),G.unref(),oe.unref()}}})},I3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:i}=e;if(i){if(r==="anchor")ot.select(e,i.anchor);else if(r==="focus")ot.select(e,i.focus);else if(r==="start"){var[a]=nt.edges(i);ot.select(e,a)}else if(r==="end"){var[,s]=nt.edges(i);ot.select(e,s)}}else return},M3e=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},V3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e,{distance:i=1,unit:a="character",reverse:s=!1}=n,{edge:o=null}=n;if(r){o==="start"&&(o=nt.isBackward(r)?"focus":"anchor"),o==="end"&&(o=nt.isBackward(r)?"anchor":"focus");var{anchor:l,focus:c}=r,f={distance:i,unit:a,ignoreNonSelectable:!0},h={};if(o==null||o==="anchor"){var m=s?fe.before(e,l,f):fe.after(e,l,f);m&&(h.anchor=m)}if(o==null||o==="focus"){var p=s?fe.before(e,c,f):fe.after(e,c,f);p&&(h.focus=p)}ot.setSelection(e,h)}},$3e=(t,e)=>{var{selection:n}=t;if(e=fe.range(t,e),n){ot.setSelection(t,e);return}if(!nt.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(fs.stringify(e)));t.apply({type:"set_selection",properties:n,newProperties:e})};function HG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var L3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i}=e,{edge:a="both"}=r;if(i){a==="start"&&(a=nt.isBackward(i)?"focus":"anchor"),a==="end"&&(a=nt.isBackward(i)?"anchor":"focus");var{anchor:s,focus:o}=i,l=a==="anchor"?s:o;ot.setSelection(e,{[a==="anchor"?"anchor":"focus"]:GG(GG({},l),n)})}},F3e=(t,e)=>{var{selection:n}=t,r={},i={};if(n){for(var a in e)(a==="anchor"&&e.anchor!=null&&!pr.equals(e.anchor,n.anchor)||a==="focus"&&e.focus!=null&&!pr.equals(e.focus,n.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==n[a])&&(r[a]=n[a],i[a]=e[a]);Object.keys(r).length>0&&t.apply({type:"set_selection",properties:r,newProperties:i})}},B3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe.withoutNormalizing(e,()=>{var{hanging:i=!1,voids:a=!1,mode:s="lowest",batchDirty:o=!0}=r,{at:l,match:c,select:f}=r;if(vt.isNode(n)&&(n=[n]),n.length!==0){var[h]=n;if(l||(l=NL(e),f!==!1&&(f=!0)),f==null&&(f=!1),nt.isRange(l))if(i||(l=fe.unhangRange(e,l,{voids:a})),nt.isCollapsed(l))l=l.anchor;else{var[,m]=nt.edges(l),p=fe.pointRef(e,m);ot.delete(e,{at:l}),l=p.unref()}if(pr.isPoint(l)){c==null&&(fn.isText(h)?c=B=>fn.isText(B):e.isInline(h)?c=B=>fn.isText(B)||fe.isInline(e,B):c=B=>mn.isElement(B)&&fe.isBlock(e,B));var[v]=fe.nodes(e,{at:l.path,match:c,mode:s,voids:a});if(v){var[,y]=v,x=fe.pathRef(e,y),S=fe.isEnd(e,l,y);ot.splitNodes(e,{at:l,match:c,mode:s,voids:a});var _=x.unref();l=S?Oe.next(_):_}else return}var N=Oe.parent(l),k=l[l.length-1];if(!(!a&&fe.void(e,{at:N}))){if(o){var P=[],O=Oe.levels(N);EVe(e,()=>{var B=function(){var V=N.concat(k);k++;var I={type:"insert_node",path:V,node:W};e.apply(I),l=Oe.next(l),P.push(I),fn.isText?O.push(...Array.from(vt.nodes(W),H=>{var[,q]=H;return V.concat(q)})):O.push(V)};for(var W of n)B()},()=>{rse(e,O,B=>{var W=B;for(var Y of P)if(Oe.operationCanTransformPath(Y)&&(W=Oe.transform(W,Y),!W))return null;return W})})}else for(var A of n){var T=N.concat(k);k++,e.apply({type:"insert_node",path:T,node:A}),l=Oe.next(l)}if(l=Oe.previous(l),f){var L=fe.end(e,l);L&&ot.select(e,L)}}}})},U3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:i="lowest",voids:a=!1}=n,{match:s}=n;if(s==null&&(s=Oe.isPath(r)?lx(e,r):k=>mn.isElement(k)&&fe.isBlock(e,k)),!!r){var o=fe.nodes(e,{at:r,match:s,mode:i,voids:a}),l=Array.from(o,k=>{var[,P]=k;return fe.pathRef(e,P)});for(var c of l){var f=c.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var h=fe.node(e,Oe.parent(f)),[m,p]=h,v=f[f.length-1],{length:y}=m.children;if(y===1){var x=Oe.next(p);ot.moveNodes(e,{at:f,to:x,voids:a}),ot.removeNodes(e,{at:p,voids:a})}else if(v===0)ot.moveNodes(e,{at:f,to:p,voids:a});else if(v===y-1){var S=Oe.next(p);ot.moveNodes(e,{at:f,to:S,voids:a})}else{var _=Oe.next(f),N=Oe.next(p);ot.splitNodes(e,{at:_,voids:a}),ot.moveNodes(e,{at:f,to:N,voids:a})}}}})},W3e=["text"],z3e=["children"],ise=(t,e)=>{if(mn.isElement(e)){var n=e;return fe.isVoid(t,e)?!0:n.children.length===1?ise(t,n.children[0]):!1}else return!fe.isEditor(e)},H3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe.withoutNormalizing(e,()=>{var{match:r,at:i=e.selection}=n,{hanging:a=!1,voids:s=!1,mode:o="lowest"}=n;if(i){if(r==null)if(Oe.isPath(i)){var[l]=fe.parent(e,i);r=B=>l.children.includes(B)}else r=B=>mn.isElement(B)&&fe.isBlock(e,B);if(!a&&nt.isRange(i)&&(i=fe.unhangRange(e,i,{voids:s})),nt.isRange(i))if(nt.isCollapsed(i))i=i.anchor;else{var[,c]=nt.edges(i),f=fe.pointRef(e,c);ot.delete(e,{at:i}),i=f.unref(),n.at==null&&ot.select(e,i)}var[h]=fe.nodes(e,{at:i,match:r,voids:s,mode:o}),m=fe.previous(e,{at:i,match:r,voids:s,mode:o});if(!(!h||!m)){var[p,v]=h,[y,x]=m;if(!(v.length===0||x.length===0)){var S=Oe.next(x),_=Oe.common(v,x),N=Oe.isSibling(v,x),k=Array.from(fe.levels(e,{at:v}),B=>{var[W]=B;return W}).slice(_.length).slice(0,-1),P=fe.above(e,{at:v,mode:"highest",match:B=>k.includes(B)&&ise(e,B)}),O=P&&fe.pathRef(e,P[1]),A,T;if(fn.isText(p)&&fn.isText(y)){var L=Cm(p,W3e);T=y.text.length,A=L}else if(mn.isElement(p)&&mn.isElement(y)){var L=Cm(p,z3e);T=y.children.length,A=L}else throw new Error("Cannot merge the node at path [".concat(v,"] with the previous sibling because it is not the same kind: ").concat(fs.stringify(p)," ").concat(fs.stringify(y)));N||ot.moveNodes(e,{at:v,to:S,voids:s}),O&&ot.removeNodes(e,{at:O.current,voids:s}),fe.shouldMergeNodesRemovePrevNode(e,m,h)?ot.removeNodes(e,{at:x,voids:s}):e.apply({type:"merge_node",path:S,position:T,properties:A}),O&&O.unref()}}}})},G3e=(t,e)=>{fe.withoutNormalizing(t,()=>{var{to:n,at:r=t.selection,mode:i="lowest",voids:a=!1}=e,{match:s}=e;if(r){s==null&&(s=Oe.isPath(r)?lx(t,r):p=>mn.isElement(p)&&fe.isBlock(t,p));var o=fe.pathRef(t,n),l=fe.nodes(t,{at:r,match:s,mode:i,voids:a}),c=Array.from(l,p=>{var[,v]=p;return fe.pathRef(t,v)});for(var f of c){var h=f.unref(),m=o.current;h.length!==0&&t.apply({type:"move_node",path:h,newPath:m}),o.current&&Oe.isSibling(m,h)&&Oe.isAfter(m,h)&&(o.current=Oe.next(o.current))}o.unref()}})},K3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:i=!1,mode:a="lowest"}=n,{at:s=e.selection,match:o}=n;if(s){o==null&&(o=Oe.isPath(s)?lx(e,s):p=>mn.isElement(p)&&fe.isBlock(e,p)),!r&&nt.isRange(s)&&(s=fe.unhangRange(e,s,{voids:i}));var l=fe.nodes(e,{at:s,match:o,mode:a,voids:i}),c=Array.from(l,p=>{var[,v]=p;return fe.pathRef(e,v)});for(var f of c){var h=f.unref();if(h){var[m]=fe.node(e,h);e.apply({type:"remove_node",path:h,node:m})}}}})},Y3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe.withoutNormalizing(e,()=>{var{match:i,at:a=e.selection,compare:s,merge:o}=r,{hanging:l=!1,mode:c="lowest",split:f=!1,voids:h=!1}=r;if(a){if(i==null&&(i=Oe.isPath(a)?lx(e,a):T=>mn.isElement(T)&&fe.isBlock(e,T)),!l&&nt.isRange(a)&&(a=fe.unhangRange(e,a,{voids:h})),f&&nt.isRange(a)){if(nt.isCollapsed(a)&&fe.leaf(e,a.anchor)[0].text.length>0)return;var m=fe.rangeRef(e,a,{affinity:"inward"}),[p,v]=nt.edges(a),y=c==="lowest"?"lowest":"highest",x=fe.isEnd(e,v,v.path);ot.splitNodes(e,{at:v,match:i,mode:y,voids:h,always:!x});var S=fe.isStart(e,p,p.path);ot.splitNodes(e,{at:p,match:i,mode:y,voids:h,always:!S}),a=m.unref(),r.at==null&&ot.select(e,a)}s||(s=(T,L)=>T!==L);for(var[_,N]of fe.nodes(e,{at:a,match:i,mode:c,voids:h})){var k={},P={};if(N.length!==0){var O=!1;for(var A in n)A==="children"||A==="text"||s(n[A],_[A])&&(O=!0,_.hasOwnProperty(A)&&(k[A]=_[A]),o?n[A]!=null&&(P[A]=o(_[A],n[A])):n[A]!=null&&(P[A]=n[A]));O&&e.apply({type:"set_node",path:N,properties:k,newProperties:P})}}}})},J3e=(t,e)=>{if(nt.isCollapsed(e))return e.anchor;var[,n]=nt.edges(e),r=fe.pointRef(t,n);return ot.delete(t,{at:e}),r.unref()},q3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe.withoutNormalizing(e,()=>{var{mode:r="lowest",voids:i=!1}=n,{match:a,at:s=e.selection,height:o=0,always:l=!1}=n;if(a==null&&(a=Z=>mn.isElement(Z)&&fe.isBlock(e,Z)),nt.isRange(s)&&(s=J3e(e,s)),Oe.isPath(s)){var c=s,f=fe.point(e,c),[h]=fe.parent(e,c);a=Z=>Z===h,o=f.path.length-c.length+1,s=f,l=!0}if(s){var m=fe.pointRef(e,s,{affinity:"backward"}),p;try{var[v]=fe.nodes(e,{at:s,match:a,mode:r,voids:i});if(!v)return;var y=fe.void(e,{at:s,mode:"highest"}),x=0;if(!i&&y){var[S,_]=y;if(mn.isElement(S)&&e.isInline(S)){var N=fe.after(e,_);if(!N){var k={text:""},P=Oe.next(_);ot.insertNodes(e,k,{at:P,voids:i}),N=fe.point(e,P)}s=N,l=!0}var O=s.path.length-_.length;o=O+1,l=!0}p=fe.pointRef(e,s);var A=s.path.length-o,[,T]=v,L=s.path.slice(0,A),B=o===0?s.offset:s.path[A]+x;for(var[W,Y]of fe.levels(e,{at:L,reverse:!0,voids:i})){var V=!1;if(Y.length<T.length||Y.length===0||!i&&mn.isElement(W)&&fe.isVoid(e,W))break;var I=m.current,H=fe.isEnd(e,I,Y);if(l||!m||!fe.isEdge(e,I,Y)){V=!0;var q=vt.extractProps(W);e.apply({type:"split_node",path:Y,position:B,properties:q})}B=Y[Y.length-1]+(V||H?1:0)}if(n.at==null){var F=p.current||fe.end(e,[]);ot.select(e,F)}}finally{var J;m.unref(),(J=p)===null||J===void 0||J.unref()}}})},X3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var i={};for(var a of n)i[a]=null;ot.setNodes(e,i,r)},Z3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe.withoutNormalizing(e,()=>{var{mode:r="lowest",split:i=!1,voids:a=!1}=n,{at:s=e.selection,match:o}=n;if(s){o==null&&(o=Oe.isPath(s)?lx(e,s):p=>mn.isElement(p)&&fe.isBlock(e,p)),Oe.isPath(s)&&(s=fe.range(e,s));var l=nt.isRange(s)?fe.rangeRef(e,s):null,c=fe.nodes(e,{at:s,match:o,mode:r,voids:a}),f=Array.from(c,p=>{var[,v]=p;return fe.pathRef(e,v)}).reverse(),h=function(){var v=m.unref(),[y]=fe.node(e,v),x=fe.range(e,v);i&&l&&(x=nt.intersection(l.current,x)),ot.liftNodes(e,{at:x,match:S=>mn.isAncestor(y)&&y.children.includes(S),voids:a})};for(var m of f)h();l&&l.unref()}})};function KG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KG(Object(n),!0).forEach(function(r){zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Q3e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe.withoutNormalizing(e,()=>{var{mode:i="lowest",split:a=!1,voids:s=!1}=r,{match:o,at:l=e.selection}=r;if(l){if(o==null&&(Oe.isPath(l)?o=lx(e,l):e.isInline(n)?o=x=>mn.isElement(x)&&fe.isInline(e,x)||fn.isText(x):o=x=>mn.isElement(x)&&fe.isBlock(e,x)),a&&nt.isRange(l)){var[c,f]=nt.edges(l),h=fe.rangeRef(e,l,{affinity:"inward"});ot.splitNodes(e,{at:f,match:o,voids:s}),ot.splitNodes(e,{at:c,match:o,voids:s}),l=h.unref(),r.at==null&&ot.select(e,l)}var m=Array.from(fe.nodes(e,{at:l,match:e.isInline(n)?x=>mn.isElement(x)&&fe.isBlock(e,x):x=>fe.isEditor(x),mode:"lowest",voids:s})),p=function(){var S=nt.isRange(l)?nt.intersection(l,fe.range(e,y)):l;if(!S)return 0;var _=Array.from(fe.nodes(e,{at:S,match:o,mode:i,voids:s}));if(_.length>0){var[N]=_,k=_[_.length-1],[,P]=N,[,O]=k;if(P.length===0&&O.length===0)return 0;var A=Oe.equals(P,O)?Oe.parent(P):Oe.common(P,O),T=fe.range(e,P,O),L=fe.node(e,A),[B]=L,W=A.length+1,Y=Oe.next(O.slice(0,W)),V=YG(YG({},n),{},{children:[]});ot.insertNodes(e,V,{at:Y,voids:s}),ot.moveNodes(e,{at:T,match:I=>mn.isAncestor(B)&&B.children.includes(I),to:Y.concat(0),voids:s})}},v;for(var[,y]of m)v=p()}})},sR=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return NVe(t,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return PVe(t,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return OVe(t,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return jVe(t,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return IVe(t,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return CVe(t,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return GVe(t,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return YVe(t,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return j3e(t,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return KVe(t,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qVe(t,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return TVe(t,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return C3e(t,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _Ve(t,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return DVe(t,...r)},above:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return kVe(t,...r)},after:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return AVe(t,...r)},before:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return RVe(t,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return I3e(t,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return O3e(t,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return M3e(t,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return MVe(t,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return VVe(t,...r)},end:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $Ve(t,...r)},first:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return LVe(t,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return FVe(t,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return l3e(t,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return UVe(t,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return WVe(t,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return zVe(t,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return HVe(t,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return B3e(t,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return XVe(t,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ZVe(t,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return QVe(t,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e3e(t,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t3e(t,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return n3e(t,...r)},last:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r3e(t,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return i3e(t,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a3e(t,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return U3e(t,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return H3e(t,...r)},move:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return V3e(t,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return G3e(t,...r)},next:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return u3e(t,...r)},node:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return c3e(t,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return d3e(t,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return f3e(t,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return h3e(t,...r)},path:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return g3e(t,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return m3e(t,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p3e(t,...r)},point:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return b3e(t,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return v3e(t,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return y3e(t,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return w3e(t,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return x3e(t,...r)},range:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return N3e(t,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return S3e(t,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return E3e(t,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return K3e(t,...r)},select:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $3e(t,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Y3e(t,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return T3e(t,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return L3e(t,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return F3e(t,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return q3e(t,...r)},start:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return D3e(t,...r)},string:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return k3e(t,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return P3e(t,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return X3e(t,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Z3e(t,...r)},void:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return BVe(t,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return A3e(t,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Q3e(t,...r)},shouldMergeNodesRemovePrevNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return R3e(t,...r)}};return t},e4e={isHistory(t){return Fs(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||sg.isOperationList(t.redos[0].operations))&&(t.undos.length===0||sg.isOperationList(t.undos[0].operations))}},mM=new WeakMap,_S=new WeakMap,yy={isHistoryEditor(t){return e4e.isHistory(t.history)&&fe.isEditor(t)},isMerging(t){return _S.get(t)},isSaving(t){return mM.get(t)},redo(t){t.redo()},undo(t){t.undo()},withMerging(t,e){var n=yy.isMerging(t);_S.set(t,!0),e(),_S.set(t,n)},withoutMerging(t,e){var n=yy.isMerging(t);_S.set(t,!1),e(),_S.set(t,n)},withoutSaving(t,e){var n=yy.isSaving(t);mM.set(t,!1),e(),mM.set(t,n)}},t4e=t=>{var e=t,{apply:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:r}=e,{redos:i}=r;if(i.length>0){var a=i[i.length-1];a.selectionBefore&&ot.setSelection(e,a.selectionBefore),yy.withoutSaving(e,()=>{fe.withoutNormalizing(e,()=>{for(var s of a.operations)e.apply(s)})}),r.redos.pop(),e.writeHistory("undos",a)}},e.undo=()=>{var{history:r}=e,{undos:i}=r;if(i.length>0){var a=i[i.length-1];yy.withoutSaving(e,()=>{fe.withoutNormalizing(e,()=>{var s=a.operations.map(sg.inverse).reverse();for(var o of s)e.apply(o);a.selectionBefore&&ot.setSelection(e,a.selectionBefore)})}),e.writeHistory("redos",a),r.undos.pop()}},e.apply=r=>{var{operations:i,history:a}=e,{undos:s}=a,o=s[s.length-1],l=o&&o.operations[o.operations.length-1],c=yy.isSaving(e),f=yy.isMerging(e);if(c==null&&(c=r4e(r)),c){if(f==null&&(o==null?f=!1:i.length!==0?f=!0:f=n4e(r,l)),o&&f)o.operations.push(r);else{var h={operations:[r],selectionBefore:e.selection};e.writeHistory("undos",h)}for(;s.length>100;)s.shift();a.redos=[]}n(r)},e.writeHistory=(r,i)=>{e.history[r].push(i)},e},n4e=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&Oe.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&Oe.equals(t.path,e.path)),r4e=(t,e)=>t.type!=="set_selection",i4e=o4e,ase="---",sse="A-Za-z--------",a4e=new RegExp("^[^"+sse+"]*["+ase+"]"),s4e=new RegExp("^[^"+ase+"]*["+sse+"]");function o4e(t){return t=String(t||""),a4e.test(t)?"rtl":s4e.test(t)?"ltr":"neutral"}const ose=gc(i4e);function l4e(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var TL=l4e,u4e=typeof $f=="object"&&$f&&$f.Object===Object&&$f,c4e=u4e,d4e=c4e,f4e=typeof self=="object"&&self&&self.Object===Object&&self,h4e=d4e||f4e||Function("return this")(),lse=h4e,m4e=lse,p4e=function(){return m4e.Date.now()},g4e=p4e,v4e=/\s/;function y4e(t){for(var e=t.length;e--&&v4e.test(t.charAt(e)););return e}var b4e=y4e,w4e=b4e,x4e=/^\s+/;function S4e(t){return t&&t.slice(0,w4e(t)+1).replace(x4e,"")}var E4e=S4e,N4e=lse,_4e=N4e.Symbol,use=_4e,JG=use,cse=Object.prototype,C4e=cse.hasOwnProperty,T4e=cse.toString,CS=JG?JG.toStringTag:void 0;function D4e(t){var e=C4e.call(t,CS),n=t[CS];try{t[CS]=void 0;var r=!0}catch{}var i=T4e.call(t);return r&&(e?t[CS]=n:delete t[CS]),i}var k4e=D4e,P4e=Object.prototype,A4e=P4e.toString;function R4e(t){return A4e.call(t)}var O4e=R4e,qG=use,j4e=k4e,I4e=O4e,M4e="[object Null]",V4e="[object Undefined]",XG=qG?qG.toStringTag:void 0;function $4e(t){return t==null?t===void 0?V4e:M4e:XG&&XG in Object(t)?j4e(t):I4e(t)}var L4e=$4e;function F4e(t){return t!=null&&typeof t=="object"}var B4e=F4e,U4e=L4e,W4e=B4e,z4e="[object Symbol]";function H4e(t){return typeof t=="symbol"||W4e(t)&&U4e(t)==z4e}var G4e=H4e,K4e=E4e,ZG=TL,Y4e=G4e,QG=NaN,J4e=/^[-+]0x[0-9a-f]+$/i,q4e=/^0b[01]+$/i,X4e=/^0o[0-7]+$/i,Z4e=parseInt;function Q4e(t){if(typeof t=="number")return t;if(Y4e(t))return QG;if(ZG(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ZG(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=K4e(t);var n=q4e.test(t);return n||X4e.test(t)?Z4e(t.slice(2),n?2:8):J4e.test(t)?QG:+t}var e5e=Q4e,t5e=TL,pM=g4e,eK=e5e,n5e="Expected a function",r5e=Math.max,i5e=Math.min;function a5e(t,e,n){var r,i,a,s,o,l,c=0,f=!1,h=!1,m=!0;if(typeof t!="function")throw new TypeError(n5e);e=eK(e)||0,t5e(n)&&(f=!!n.leading,h="maxWait"in n,a=h?r5e(eK(n.maxWait)||0,e):a,m="trailing"in n?!!n.trailing:m);function p(O){var A=r,T=i;return r=i=void 0,c=O,s=t.apply(T,A),s}function v(O){return c=O,o=setTimeout(S,e),f?p(O):s}function y(O){var A=O-l,T=O-c,L=e-A;return h?i5e(L,a-T):L}function x(O){var A=O-l,T=O-c;return l===void 0||A>=e||A<0||h&&T>=a}function S(){var O=pM();if(x(O))return _(O);o=setTimeout(S,y(O))}function _(O){return o=void 0,m&&r?p(O):(r=i=void 0,s)}function N(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function k(){return o===void 0?s:_(pM())}function P(){var O=pM(),A=x(O);if(r=arguments,i=this,l=O,A){if(o===void 0)return v(l);if(h)return clearTimeout(o),o=setTimeout(S,e),p(l)}return o===void 0&&(o=setTimeout(S,e)),s}return P.cancel=N,P.flush=k,P}var dse=a5e;const s5e=gc(dse);var o5e=dse,l5e=TL,u5e="Expected a function";function c5e(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(u5e);return l5e(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),o5e(t,e,{leading:r,maxWait:e,trailing:i})}var d5e=c5e;const f5e=gc(d5e),h5e=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function m5e(t,e){if(!t.isConnected||!(i=>{let a=i;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(t))return;const n=(i=>{const a=window.getComputedStyle(i);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(e))return e.behavior(uP(t,e));const r=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:i,top:a,left:s}of uP(t,h5e(e))){const o=a-n.top+n.bottom,l=s-n.left+n.right;i.scroll({top:o,left:l,behavior:r})}}var Cy=[],p5e=function(){return Cy.some(function(t){return t.activeTargets.length>0})},g5e=function(){return Cy.some(function(t){return t.skippedTargets.length>0})},tK="ResizeObserver loop completed with undelivered notifications.",v5e=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:tK}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=tK),window.dispatchEvent(t)},oN;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(oN||(oN={}));var Ty=function(t){return Object.freeze(t)},y5e=function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Ty(this)}return t}(),fse=function(){function t(e,n,r,i){return this.x=e,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ty(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,i=e.top,a=e.right,s=e.bottom,o=e.left,l=e.width,c=e.height;return{x:n,y:r,top:i,right:a,bottom:s,left:o,width:l,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),DL=function(t){return t instanceof SVGElement&&"getBBox"in t},hse=function(t){if(DL(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,a=i.offsetWidth,s=i.offsetHeight;return!(a||s||t.getClientRects().length)},nK=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},b5e=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},_E=typeof window<"u"?window:{},FT=new WeakMap,rK=/auto|scroll/,w5e=/^tb|vertical/,x5e=/msie|trident/i.test(_E.navigator&&_E.navigator.userAgent),Sf=function(t){return parseFloat(t||"0")},bw=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new y5e((n?e:t)||0,(n?t:e)||0)},iK=Ty({devicePixelContentBoxSize:bw(),borderBoxSize:bw(),contentBoxSize:bw(),contentRect:new fse(0,0,0,0)}),mse=function(t,e){if(e===void 0&&(e=!1),FT.has(t)&&!e)return FT.get(t);if(hse(t))return FT.set(t,iK),iK;var n=getComputedStyle(t),r=DL(t)&&t.ownerSVGElement&&t.getBBox(),i=!x5e&&n.boxSizing==="border-box",a=w5e.test(n.writingMode||""),s=!r&&rK.test(n.overflowY||""),o=!r&&rK.test(n.overflowX||""),l=r?0:Sf(n.paddingTop),c=r?0:Sf(n.paddingRight),f=r?0:Sf(n.paddingBottom),h=r?0:Sf(n.paddingLeft),m=r?0:Sf(n.borderTopWidth),p=r?0:Sf(n.borderRightWidth),v=r?0:Sf(n.borderBottomWidth),y=r?0:Sf(n.borderLeftWidth),x=h+c,S=l+f,_=y+p,N=m+v,k=o?t.offsetHeight-N-t.clientHeight:0,P=s?t.offsetWidth-_-t.clientWidth:0,O=i?x+_:0,A=i?S+N:0,T=r?r.width:Sf(n.width)-O-P,L=r?r.height:Sf(n.height)-A-k,B=T+x+P+_,W=L+S+k+N,Y=Ty({devicePixelContentBoxSize:bw(Math.round(T*devicePixelRatio),Math.round(L*devicePixelRatio),a),borderBoxSize:bw(B,W,a),contentBoxSize:bw(T,L,a),contentRect:new fse(h,l,T,L)});return FT.set(t,Y),Y},pse=function(t,e,n){var r=mse(t,n),i=r.borderBoxSize,a=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case oN.DEVICE_PIXEL_CONTENT_BOX:return s;case oN.BORDER_BOX:return i;default:return a}},S5e=function(){function t(e){var n=mse(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Ty([n.borderBoxSize]),this.contentBoxSize=Ty([n.contentBoxSize]),this.devicePixelContentBoxSize=Ty([n.devicePixelContentBoxSize])}return t}(),gse=function(t){if(hse(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},E5e=function(){var t=1/0,e=[];Cy.forEach(function(s){if(s.activeTargets.length!==0){var o=[];s.activeTargets.forEach(function(c){var f=new S5e(c.target),h=gse(c.target);o.push(f),c.lastReportedSize=pse(c.target,c.observedBox),h<t&&(t=h)}),e.push(function(){s.callback.call(s.observer,o,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var i=r[n];i()}return t},aK=function(t){Cy.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(gse(i.target)>t?n.activeTargets.push(i):n.skippedTargets.push(i))})})},N5e=function(){var t=0;for(aK(t);p5e();)t=E5e(),aK(t);return g5e()&&v5e(),t>0},gM,vse=[],_5e=function(){return vse.splice(0).forEach(function(t){return t()})},C5e=function(t){if(!gM){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return _5e()}).observe(n,r),gM=function(){n.textContent="".concat(e?e--:e++)}}vse.push(t),gM()},T5e=function(t){C5e(function(){requestAnimationFrame(t)})},pk=0,D5e=function(){return!!pk},k5e=250,P5e={attributes:!0,characterData:!0,childList:!0,subtree:!0},sK=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],oK=function(t){return t===void 0&&(t=0),Date.now()+t},vM=!1,A5e=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=k5e),!vM){vM=!0;var r=oK(e);T5e(function(){var i=!1;try{i=N5e()}finally{if(vM=!1,e=r-oK(),!D5e())return;i?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,P5e)};document.body?n():_E.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),sK.forEach(function(n){return _E.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),sK.forEach(function(n){return _E.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t}(),n4=new A5e,lK=function(t){!pk&&t>0&&n4.start(),pk+=t,!pk&&n4.stop()},R5e=function(t){return!DL(t)&&!b5e(t)&&getComputedStyle(t).display==="inline"},O5e=function(){function t(e,n){this.target=e,this.observedBox=n||oN.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=pse(this.target,this.observedBox,!0);return R5e(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),j5e=function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t}(),BT=new WeakMap,uK=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},UT=function(){function t(){}return t.connect=function(e,n){var r=new j5e(e,n);BT.set(e,r)},t.observe=function(e,n,r){var i=BT.get(e),a=i.observationTargets.length===0;uK(i.observationTargets,n)<0&&(a&&Cy.push(i),i.observationTargets.push(new O5e(n,r&&r.box)),lK(1),n4.schedule())},t.unobserve=function(e,n){var r=BT.get(e),i=uK(r.observationTargets,n),a=r.observationTargets.length===1;i>=0&&(a&&Cy.splice(Cy.indexOf(r),1),r.observationTargets.splice(i,1),lK(-1))},t.disconnect=function(e){var n=this,r=BT.get(e);r.observationTargets.slice().forEach(function(i){return n.unobserve(e,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t}(),I5e=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");UT.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!nK(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");UT.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!nK(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");UT.unobserve(this,e)},t.prototype.disconnect=function(){UT.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});var M5e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),yM={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},yse={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:M5e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},kL={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var WT=1;WT<20;WT++)kL["f"+WT]=111+WT;function oR(t,e,n){e&&!("byKey"in e)&&(n=e,e=null),Array.isArray(t)||(t=[t]);var r=t.map(function(s){return bse(s,e)}),i=function(o){return r.some(function(l){return wse(l,o)})},a=n==null?i:i(n);return a}function V5e(t,e){return oR(t,e)}function $5e(t,e){return oR(t,{byKey:!0},e)}function bse(t,e){var n=e&&e.byKey,r={};t=t.replace("++","+add");var i=t.split("+"),a=i.length;for(var s in yM)r[yM[s]]=!1;var o=!0,l=!1,c=void 0;try{for(var f=i[Symbol.iterator](),h;!(o=(h=f.next()).done);o=!0){var m=h.value,p=m.endsWith("?")&&m.length>1;p&&(m=m.slice(0,-1));var v=PL(m),y=yM[v];if(m.length>1&&!y&&!yse[m]&&!kL[v])throw new TypeError('Unknown modifier: "'+m+'"');(a===1||!y)&&(n?r.key=v:r.which=xse(m)),y&&(r[y]=p?null:!0)}}catch(x){l=!0,c=x}finally{try{!o&&f.return&&f.return()}finally{if(l)throw c}}return r}function wse(t,e){for(var n in t){var r=t[n],i=void 0;if(r!=null&&(n==="key"&&e.key!=null?i=e.key.toLowerCase():n==="which"?i=r===91&&e.which===93?91:e.which:i=e[n],!(i==null&&r===!1)&&i!==r))return!1}return!0}function xse(t){t=PL(t);var e=kL[t]||t.toUpperCase().charCodeAt(0);return e}function PL(t){return t=t.toLowerCase(),t=yse[t]||t,t}Rm.default=oR;var bM=Rm.isHotkey=oR;Rm.isCodeHotkey=V5e;Rm.isKeyHotkey=$5e;Rm.parseHotkey=bse;Rm.compareHotkey=wse;Rm.toKeyCode=xse;Rm.toKeyName=PL;function L5e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jw(t,e){if(t==null)return{};var n=L5e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lN(t){"@babel/helpers - typeof";return lN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lN(t)}function F5e(t,e){if(lN(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lN(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B5e(t){var e=F5e(t,"string");return lN(e)==="symbol"?e:String(e)}function uc(t,e,n){return e=B5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var AL=R.createContext(null),Bg=()=>{var t=R.useContext(AL);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},wM,xM,Sse=parseInt(it.version.split(".")[0],10),Ese=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,cK=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Lo=typeof navigator<"u"&&/Android/.test(navigator.userAgent),ow=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ty=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),U5e=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Nse=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),W5e=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),z5e=Lo&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),H5e=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),G5e=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),K5e=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),gk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dK=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((wM=navigator.userAgent.match(/Version\/(\d+)/))!==null&&wM!==void 0&&wM[1]?parseInt((xM=navigator.userAgent.match(/Version\/(\d+)/))===null||xM===void 0?void 0:xM[1],10)<17:!1),$p=(!W5e||!z5e)&&!U5e&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",RL=new WeakMap,OL=new WeakMap,_se=new WeakMap,vk=new WeakMap,r4=new WeakMap,uN=new WeakMap,Dy=new WeakMap,_P=new WeakMap,lR=new WeakMap,i4=new WeakMap,og=new WeakMap,by=new WeakMap,CE=new WeakMap,a4=new WeakMap,jL=new WeakMap,gd=new WeakMap,cm=new WeakMap,bl=new WeakMap,Xp=new WeakMap,Zp=new WeakMap,Cse=new WeakMap,Iw=Symbol("placeholder"),Tse=Symbol("mark-placeholder"),Y5e=globalThis.Text,IL=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,J5e=t=>Tg(t)&&t.nodeType===8,sc=t=>Tg(t)&&t.nodeType===1,Tg=t=>{var e=IL(t);return!!e&&t instanceof e.Node},s4=t=>{var e=t&&t.anchorNode&&IL(t.anchorNode);return!!e&&t instanceof e.Selection},Dse=t=>Tg(t)&&t.nodeType===3,q5e=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,X5e=t=>{var[e,n]=t;if(sc(e)&&e.childNodes.length){var r=n===e.childNodes.length,i=r?n-1:n;for([e,i]=kse(e,i,r?"backward":"forward"),r=i<n;sc(e)&&e.childNodes.length;){var a=r?e.childNodes.length-1:0;e=Q5e(e,a,r?"backward":"forward")}n=r&&e.textContent!=null?e.textContent.length:0}return[e,n]},Z5e=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},kse=(t,e,n)=>{for(var{childNodes:r}=t,i=r[e],a=e,s=!1,o=!1;(J5e(i)||sc(i)&&i.childNodes.length===0||sc(i)&&i.getAttribute("contenteditable")==="false")&&!(s&&o);){if(a>=r.length){s=!0,a=e-1,n="backward";continue}if(a<0){o=!0,a=e+1,n="forward";continue}i=r[a],e=a,a+=n==="forward"?1:-1}return[i,e]},Q5e=(t,e,n)=>{var[r]=kse(t,e,n);return r},Pse=t=>{var e="";if(Dse(t)&&t.nodeValue)return t.nodeValue;if(sc(t)){for(var n of Array.from(t.childNodes))e+=Pse(n);var r=getComputedStyle(t).getPropertyValue("display");(r==="block"||r==="list"||t.tagName==="BR")&&(e+=`
`)}return e},e$e=/data-slate-fragment="(.+?)"/m,t$e=t=>{var e=t.getData("text/html"),[,n]=e.match(e$e)||[];return n},ML=(t,e,n)=>{var{target:r}=e;if(sc(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:i}=rt.getWindow(t);if(i.contains(r))return rt.hasDOMNode(t,r,{editable:!0});var a=n.find(s=>{var{addedNodes:o,removedNodes:l}=s;for(var c of o)if(c===r||c.contains(r))return!0;for(var f of l)if(f===r||f.contains(r))return!0});return!a||a===e?!1:ML(t,a,n)},n$e=()=>{for(var t=document.activeElement;(e=t)!==null&&e!==void 0&&e.shadowRoot&&(n=t.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var e,n,r;t=(r=t)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return t},r$e=0;class i$e{constructor(){uc(this,"id",void 0),this.id="".concat(r$e++)}}var rt={androidPendingDiffs:t=>bl.get(t),androidScheduleFlush:t=>{var e;(e=jL.get(t))===null||e===void 0||e()},blur:t=>{var e=rt.toDOMNode(t,t),n=rt.findDocumentOrShadowRoot(t);og.set(t,!1),n.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,n=rt.findDocumentOrShadowRoot(t),r=n.getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),e&&ot.deselect(t)},findDocumentOrShadowRoot:t=>{var e=rt.toDOMNode(t,t),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:n,clientY:r,target:i}=e;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=rt.toSlateNode(t,e.target),s=rt.findPath(t,a);if(mn.isElement(a)&&fe.isVoid(t,a)){var o=i.getBoundingClientRect(),l=t.isInline(a)?n-o.left<o.left+o.width-n:r-o.top<o.top+o.height-r,c=fe.point(t,s,{edge:l?"start":"end"}),f=l?fe.before(t,c):fe.after(t,c);if(f){var h=fe.range(t,f);return h}}var m,{document:p}=rt.getWindow(t);if(p.caretRangeFromPoint)m=p.caretRangeFromPoint(n,r);else{var v=p.caretPositionFromPoint(n,r);v&&(m=p.createRange(),m.setStart(v.offsetNode,v.offset),m.setEnd(v.offsetNode,v.offset))}if(!m)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var y=rt.toSlateRange(t,m,{exactMatch:!1,suppressThrow:!1});return y},findKey:(t,e)=>{var n=_P.get(e);return n||(n=new i$e,_P.set(e,n)),n},findPath:(t,e)=>{for(var n=[],r=e;;){var i=OL.get(r);if(i==null){if(fe.isEditor(r))return n;break}var a=RL.get(r);if(a==null)break;n.unshift(a),r=i}throw new Error("Unable to find the path for Slate node: ".concat(fs.stringify(e)))},focus:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!og.get(e)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{rt.focus(e,{retries:n.retries-1})},10);return}var r=rt.toDOMNode(e,e),i=rt.findDocumentOrShadowRoot(e);if(i.activeElement!==r){if(e.selection&&i instanceof Document){var a=i.getSelection(),s=rt.toDOMRange(e,e.selection);a==null||a.removeAllRanges(),a==null||a.addRange(s)}e.selection||(ot.select(e,fe.start(e,[])),e.onChange()),og.set(e,!0),r.focus({preventScroll:!0})}}},getWindow:t=>{var e=_se.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=r,a=rt.toDOMNode(e,e),s;try{s=sc(n)?n:n.parentElement}catch(o){if(o instanceof Error&&!o.message.includes('Permission denied to access property "nodeType"'))throw o}return s?s.closest("[data-slate-editor]")===a&&(!i||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===a||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>Tg(e)&&rt.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:n,focus:r}=e;return fe.hasPath(t,n.path)&&fe.hasPath(t,r.path)},hasSelectableTarget:(t,e)=>rt.hasEditableTarget(t,e)||rt.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>Tg(e)&&rt.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!by.get(t),isFocused:t=>!!og.get(t),isReadOnly:t=>!!i4.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(i4.get(t))return!1;var n=rt.hasTarget(t,e)&&rt.toSlateNode(t,e);return mn.isElement(n)&&fe.isVoid(t,n)},setFragmentData:(t,e,n)=>t.setFragmentData(e,n),toDOMNode:(t,e)=>{var n=lR.get(t),r=fe.isEditor(e)?vk.get(t):n==null?void 0:n.get(rt.findKey(t,e));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(fs.stringify(e)));return r},toDOMPoint:(t,e)=>{var[n]=fe.node(t,e.path),r=rt.toDOMNode(t,n),i;fe.void(t,{at:e})&&(e={path:e.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",s=Array.from(r.querySelectorAll(a)),o=0,l=0;l<s.length;l++){var c=s[l],f=c.childNodes[0];if(!(f==null||f.textContent==null)){var{length:h}=f.textContent,m=c.getAttribute("data-slate-length"),p=m==null?h:parseInt(m,10),v=o+p,y=s[l+1];if(e.offset===v&&y!==null&&y!==void 0&&y.hasAttribute("data-slate-mark-placeholder")){var x,S=y.childNodes[0];i=[S instanceof Y5e?S:y,(x=y.textContent)!==null&&x!==void 0&&x.startsWith("\uFEFF")?1:0];break}if(e.offset<=v){var _=Math.min(h,Math.max(0,e.offset-o));i=[f,_];break}o=v}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(fs.stringify(e)));return i},toDOMRange:(t,e)=>{var{anchor:n,focus:r}=e,i=nt.isBackward(e),a=rt.toDOMPoint(t,n),s=nt.isCollapsed(e)?a:rt.toDOMPoint(t,r),o=rt.getWindow(t),l=o.document.createRange(),[c,f]=i?s:a,[h,m]=i?a:s,p=sc(c)?c:c.parentElement,v=!!p.getAttribute("data-slate-zero-width"),y=sc(h)?h:h.parentElement,x=!!y.getAttribute("data-slate-zero-width");return l.setStart(c,v?1:f),l.setEnd(h,x?1:m),l},toSlateNode:(t,e)=>{var n=sc(e)?e:e.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?uN.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(t,e,n)=>{var{exactMatch:r,suppressThrow:i}=n,[a,s]=r?e:X5e(e),o=a.parentNode,l=null,c=0;if(o){var f,h,m=rt.toDOMNode(t,t),p=o.closest('[data-slate-void="true"]'),v=p&&m.contains(p)?p:null,y=o.closest("[data-slate-leaf]"),x=null;if(y){if(l=y.closest('[data-slate-node="text"]'),l){var S=rt.getWindow(t),_=S.document.createRange();_.setStart(l,0),_.setEnd(a,s);var N=_.cloneContents(),k=[...Array.prototype.slice.call(N.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(N.querySelectorAll("[contenteditable=false]"))];k.forEach(I=>{if(Lo&&!r&&I.hasAttribute("data-slate-zero-width")&&I.textContent.length>0&&I.textContext!=="\uFEFF"){I.textContent.startsWith("\uFEFF")&&(I.textContent=I.textContent.slice(1));return}I.parentNode.removeChild(I)}),c=N.textContent.length,x=l}}else if(v){for(var P=v.querySelectorAll("[data-slate-leaf]"),O=0;O<P.length;O++){var A=P[O];if(rt.hasDOMNode(t,A)){y=A;break}}y?(l=y.closest('[data-slate-node="text"]'),x=y,c=x.textContent.length,x.querySelectorAll("[data-slate-zero-width]").forEach(I=>{c-=I.textContent.length})):c=1}x&&c===x.textContent.length&&Lo&&x.getAttribute("data-slate-zero-width")==="z"&&(f=x.textContent)!==null&&f!==void 0&&f.startsWith("\uFEFF")&&(o.hasAttribute("data-slate-zero-width")||ow&&(h=x.textContent)!==null&&h!==void 0&&h.endsWith(`

`))&&c--}if(Lo&&!l&&!r){var T=o.hasAttribute("data-slate-node")?o:o.closest("[data-slate-node]");if(T&&rt.hasDOMNode(t,T,{editable:!0})){var L=rt.toSlateNode(t,T),{path:B,offset:W}=fe.start(t,rt.findPath(t,L));return T.querySelector("[data-slate-leaf]")||(W=s),{path:B,offset:W}}}if(!l){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var Y=rt.toSlateNode(t,l),V=rt.findPath(t,Y);return{path:V,offset:c}},toSlateRange:(t,e,n)=>{var r,{exactMatch:i,suppressThrow:a}=n,s=s4(e)?e.anchorNode:e.startContainer,o,l,c,f,h;if(s)if(s4(e)){if(ow&&e.rangeCount>1){c=e.focusNode;var m=e.getRangeAt(0),p=e.getRangeAt(e.rangeCount-1);if(c instanceof HTMLTableRowElement&&m.startContainer instanceof HTMLTableRowElement&&p.startContainer instanceof HTMLTableRowElement){let A=function(T){return T.childElementCount>0?A(T.children[0]):T};var O=A,v=m.startContainer,y=p.startContainer,x=A(v.children[m.startOffset]),S=A(y.children[p.startOffset]);f=0,S.childNodes.length>0?o=S.childNodes[0]:o=S,x.childNodes.length>0?c=x.childNodes[0]:c=x,S instanceof HTMLElement?l=S.innerHTML.length:l=0}else m.startContainer===c?(o=p.endContainer,l=p.endOffset,f=m.startOffset):(o=m.startContainer,l=m.endOffset,f=p.startOffset)}else o=e.anchorNode,l=e.anchorOffset,c=e.focusNode,f=e.focusOffset;Nse&&Z5e(o)||ow?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed}else o=e.startContainer,l=e.startOffset,c=e.endContainer,f=e.endOffset,h=e.collapsed;if(o==null||c==null||l==null||f==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if(ow&&(r=c.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&f===c.textContent.length&&f--,"getAttribute"in c&&c.getAttribute("contenteditable")==="false"&&c.getAttribute("data-slate-void")!=="true"){var _;c=o,f=((_=o.textContent)===null||_===void 0?void 0:_.length)||0}var N=rt.toSlatePoint(t,[o,l],{exactMatch:i,suppressThrow:a});if(!N)return null;var k=h?N:rt.toSlatePoint(t,[c,f],{exactMatch:i,suppressThrow:a});if(!k)return null;var P={anchor:N,focus:k};return nt.isExpanded(P)&&nt.isForward(P)&&sc(c)&&fe.void(t,{at:P.focus,mode:"highest"})&&(P=fe.unhangRange(t,P,{voids:!0})),P}};function a$e(t,e){var{path:n,diff:r}=e;if(!fe.hasPath(t,n))return!1;var i=vt.get(t,n);if(!fn.isText(i))return!1;if(r.start!==i.text.length||r.text.length===0)return i.text.slice(r.start,r.start+r.text.length)===r.text;var a=Oe.next(n);if(!fe.hasPath(t,a))return!1;var s=vt.get(t,a);return fn.isText(s)&&s.text.startsWith(r.text)}function Ase(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((i,a)=>i.slice(0,a.start)+a.text+i.slice(a.end),t)}function s$e(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return n}function o$e(t,e,n){for(var r=Math.min(t.length,e.length,n),i=0;i<r;i++)if(t.charAt(t.length-i-1)!==e.charAt(e.length-i-1))return i;return r}function Rse(t,e){var{start:n,end:r,text:i}=e,a=t.slice(n,r),s=s$e(a,i),o=Math.min(a.length-s,i.length-s),l=o$e(a,i,o),c={start:n+s,end:r-l,text:i.slice(s,i.length-l)};return c.start===c.end&&c.text.length===0?null:c}function l$e(t,e,n){var r=Math.min(e.start,n.start),i=Math.max(0,Math.min(e.start+e.text.length,n.end)-n.start),a=Ase(t,e,n),s=Math.max(n.start+n.text.length,e.start+e.text.length+(e.start+e.text.length>n.start?n.text.length:0)-i),o=a.slice(r,s),l=Math.max(e.end,n.end-e.text.length+(e.end-e.start));return Rse(t,{start:r,end:l,text:o})}function u$e(t){var{path:e,diff:n}=t;return{anchor:{path:e,offset:n.start},focus:{path:e,offset:n.end}}}function o4(t,e){var{path:n,offset:r}=e;if(!fe.hasPath(t,n))return null;var i=vt.get(t,n);if(!fn.isText(i))return null;var a=fe.above(t,{match:o=>mn.isElement(o)&&fe.isBlock(t,o),at:n});if(!a)return null;for(;r>i.text.length;){var s=fe.next(t,{at:n,match:fn.isText});if(!s||!Oe.isDescendant(s[1],a[1]))return null;r-=i.text.length,i=s[0],n=s[1]}return{path:n,offset:r}}function fK(t,e){var n=o4(t,e.anchor);if(!n)return null;if(nt.isCollapsed(e))return{anchor:n,focus:n};var r=o4(t,e.focus);return r?{anchor:n,focus:r}:null}function l4(t,e,n){var r=bl.get(t),i=r==null?void 0:r.find(f=>{var{path:h}=f;return Oe.equals(h,e.path)});if(!i||e.offset<=i.diff.start)return pr.transform(e,n,{affinity:"backward"});var{diff:a}=i;if(e.offset<=a.start+a.text.length){var s={path:e.path,offset:a.start},o=pr.transform(s,n,{affinity:"backward"});return o?{path:o.path,offset:o.offset+e.offset-a.start}:null}var l={path:e.path,offset:e.offset-a.text.length+a.end-a.start},c=pr.transform(l,n,{affinity:"backward"});return c?n.type==="split_node"&&Oe.equals(n.path,e.path)&&l.offset<n.position&&a.start<n.position?c:{path:c.path,offset:c.offset+a.text.length-a.end+a.start}:null}function hK(t,e,n){var r=l4(t,e.anchor,n);if(!r)return null;if(nt.isCollapsed(e))return{anchor:r,focus:r};var i=l4(t,e.focus,n);return i?{anchor:r,focus:i}:null}function c$e(t,e){var{path:n,diff:r,id:i}=t;switch(e.type){case"insert_text":return!Oe.equals(e.path,n)||e.offset>=r.end?t:e.offset<=r.start?{diff:{start:e.text.length+r.start,end:e.text.length+r.end,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end+e.text.length,text:r.text},id:i,path:n};case"remove_text":return!Oe.equals(e.path,n)||e.offset>=r.end?t:e.offset+e.text.length<=r.start?{diff:{start:r.start-e.text.length,end:r.end-e.text.length,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end-e.text.length,text:r.text},id:i,path:n};case"split_node":return!Oe.equals(e.path,n)||e.position>=r.end?{diff:r,id:i,path:Oe.transform(n,e,{affinity:"backward"})}:e.position>r.start?{diff:{start:r.start,end:Math.min(e.position,r.end),text:r.text},id:i,path:n}:{diff:{start:r.start-e.position,end:r.end-e.position,text:r.text},id:i,path:Oe.transform(n,e,{affinity:"forward"})};case"merge_node":return Oe.equals(e.path,n)?{diff:{start:r.start+e.position,end:r.end+e.position,text:r.text},id:i,path:Oe.transform(n,e)}:{diff:r,id:i,path:Oe.transform(n,e)}}var a=Oe.transform(n,e);return a?{diff:r,path:a,id:i}:null}function mK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mK(Object(n),!0).forEach(function(r){uc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var d$e=25,f$e=200,h$e=function(){},m$e=t=>(t==null?void 0:t.constructor.name)==="DataTransfer";function p$e(t){var{editor:e,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=t,i=!1,a=null,s=null,o=null,l=0,c=!1,f=()=>{var Y=Zp.get(e);if(Zp.delete(e),Y){var{selection:V}=e,I=fK(e,Y);I&&(!V||!nt.equals(I,V))&&ot.select(e,I)}},h=()=>{var Y=Xp.get(e);if(Xp.delete(e),!!Y){if(Y.at){var V=pr.isPoint(Y.at)?o4(e,Y.at):fK(e,Y.at);if(!V)return;var I=fe.range(e,V);(!e.selection||!nt.equals(e.selection,I))&&ot.select(e,V)}Y.run()}},m=()=>{if(s&&(clearTimeout(s),s=null),o&&(clearTimeout(o),o=null),!k()&&!N()){f();return}i||(i=!0,setTimeout(()=>i=!1)),N()&&(i="action");var Y=e.selection&&fe.rangeRef(e,e.selection,{affinity:"forward"});cm.set(e,e.marks),h$e("flush",Xp.get(e),bl.get(e));for(var V=k(),I;I=(H=bl.get(e))===null||H===void 0?void 0:H[0];){var H,q,F=gd.get(e);F!==void 0&&(gd.delete(e),e.marks=F),F&&c===!1&&(c=null);var J=u$e(I);(!e.selection||!nt.equals(e.selection,J))&&ot.select(e,J),I.diff.text?fe.insertText(e,I.diff.text):fe.deleteFragment(e),bl.set(e,(q=bl.get(e))===null||q===void 0?void 0:q.filter(oe=>{var{id:ae}=oe;return ae!==I.id})),a$e(e,I)||(V=!1,Xp.delete(e),cm.delete(e),i="action",Zp.delete(e),n.cancel(),r.cancel(),Y==null||Y.unref())}var Z=Y==null?void 0:Y.unref();if(Z&&!Zp.get(e)&&(!e.selection||!nt.equals(Z,e.selection))&&ot.select(e,Z),N()){h();return}V&&n(),n.flush(),r.flush(),f();var G=cm.get(e);cm.delete(e),G!==void 0&&(e.marks=G,e.onChange())},p=Y=>{a&&clearTimeout(a),a=setTimeout(()=>{by.set(e,!1),m()},d$e)},v=Y=>{by.set(e,!0),a&&(clearTimeout(a),a=null)},y=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,I=r4.get(e);if(I){if(k()||V){I.style.display="none";return}I.style.removeProperty("display")}},x=(Y,V)=>{var I,H=(I=bl.get(e))!==null&&I!==void 0?I:[];bl.set(e,H);var q=vt.leaf(e,Y),F=H.findIndex(G=>Oe.equals(G.path,Y));if(F<0){var J=Rse(q.text,V);J&&H.push({path:Y,diff:V,id:l++}),y();return}var Z=l$e(q.text,H[F].diff,V);if(!Z){H.splice(F,1),y();return}H[F]=zT(zT({},H[F]),{},{diff:Z})},S=function(V){var{at:I}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,Zp.delete(e),n.cancel(),r.cancel(),N()&&m(),Xp.set(e,{at:I,run:V}),o=setTimeout(m)},_=Y=>{var V;s&&(clearTimeout(s),s=null);var{inputType:I}=Y,H=null,q=Y.dataTransfer||Y.data||void 0;c!==!1&&I!=="insertText"&&I!=="insertCompositionText"&&(c=!1);var[F]=Y.getTargetRanges();F&&(H=rt.toSlateRange(e,F,{exactMatch:!1,suppressThrow:!0}));var J=rt.getWindow(e),Z=J.getSelection();if(!H&&Z&&(F=Z,H=rt.toSlateRange(e,Z,{exactMatch:!1,suppressThrow:!0})),H=(V=H)!==null&&V!==void 0?V:e.selection,!!H){var G=!0;if(I.startsWith("delete")){if(nt.isExpanded(H)){var[oe,ae]=nt.edges(H),te=vt.leaf(e,oe.path);if(te.text.length===oe.offset&&ae.offset===0){var re=fe.next(e,{at:oe.path,match:fn.isText});re&&Oe.equals(re[1],ae.path)&&(H={anchor:ae,focus:ae})}}var X=I.endsWith("Backward")?"backward":"forward",[ce,he]=nt.edges(H),[ve,Ne]=fe.leaf(e,ce.path),ke={text:"",start:ce.offset,end:he.offset},Te=bl.get(e),ye=Te==null?void 0:Te.find(tt=>Oe.equals(tt.path,Ne)),Ie=ye?[ye.diff,ke]:[ke],Re=Ase(ve.text,...Ie);if(Re.length===0&&(G=!1),nt.isExpanded(H)){if(G&&Oe.equals(H.anchor.path,H.focus.path)){var Ee={path:H.anchor.path,offset:ce.offset},$e=fe.range(e,Ee,Ee);return A($e),x(H.anchor.path,{text:"",end:he.offset,start:ce.offset})}return S(()=>fe.deleteFragment(e,{direction:X}),{at:H})}}switch(I){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return S(()=>fe.deleteFragment(e),{at:H});case"deleteContent":case"deleteContentForward":{var{anchor:He}=H;if(G&&nt.isCollapsed(H)){var gt=vt.leaf(e,He.path);if(He.offset<gt.text.length)return x(He.path,{text:"",start:He.offset,end:He.offset+1})}return S(()=>fe.deleteForward(e),{at:H})}case"deleteContentBackward":{var Ye,{anchor:yt}=H,_t=s4(F)?F.isCollapsed:!!((Ye=F)!==null&&Ye!==void 0&&Ye.collapsed);return G&&_t&&nt.isCollapsed(H)&&yt.offset>0?x(yt.path,{text:"",start:yt.offset-1,end:yt.offset}):S(()=>fe.deleteBackward(e),{at:H})}case"deleteEntireSoftLine":return S(()=>{fe.deleteBackward(e,{unit:"line"}),fe.deleteForward(e,{unit:"line"})},{at:H});case"deleteHardLineBackward":return S(()=>fe.deleteBackward(e,{unit:"block"}),{at:H});case"deleteSoftLineBackward":return S(()=>fe.deleteBackward(e,{unit:"line"}),{at:H});case"deleteHardLineForward":return S(()=>fe.deleteForward(e,{unit:"block"}),{at:H});case"deleteSoftLineForward":return S(()=>fe.deleteForward(e,{unit:"line"}),{at:H});case"deleteWordBackward":return S(()=>fe.deleteBackward(e,{unit:"word"}),{at:H});case"deleteWordForward":return S(()=>fe.deleteForward(e,{unit:"word"}),{at:H});case"insertLineBreak":return S(()=>fe.insertSoftBreak(e),{at:H});case"insertParagraph":return S(()=>fe.insertBreak(e),{at:H});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(m$e(q))return S(()=>rt.insertData(e,q),{at:H});var St=q??"";if(gd.get(e)&&(St=St.replace("\uFEFF","")),I==="insertText"&&/.*\n.*\n$/.test(St)&&(St=St.slice(0,-1)),St.includes(`
`))return S(()=>{var tt=St.split(`
`);tt.forEach((Ot,qe)=>{Ot&&fe.insertText(e,Ot),qe!==tt.length-1&&fe.insertSoftBreak(e)})},{at:H});if(Oe.equals(H.anchor.path,H.focus.path)){var[Bt,Nt]=nt.edges(H),Dt={start:Bt.offset,end:Nt.offset,text:St};if(St&&c&&I==="insertCompositionText"){var Ae=c.start+c.text.search(/\S|$/),je=Dt.start+Dt.text.search(/\S|$/);je===Ae+1&&Dt.end===c.start+c.text.length?(Dt.start-=1,c=null,B()):c=!1}else I==="insertText"?c===null?c=Dt:c&&nt.isCollapsed(H)&&c.end+c.text.length===Bt.offset?c=zT(zT({},c),{},{text:c.text+St}):c=!1:c=!1;if(G){x(Bt.path,Dt);return}}return S(()=>fe.insertText(e,St),{at:H})}}}},N=()=>!!Xp.get(e),k=()=>{var Y;return!!((Y=bl.get(e))!==null&&Y!==void 0&&Y.length)},P=()=>N()||k(),O=()=>i,A=Y=>{Zp.set(e,Y),s&&(clearTimeout(s),s=null);var{selection:V}=e;if(Y){var I=!V||!Oe.equals(V.anchor.path,Y.anchor.path),H=!V||!Oe.equals(V.anchor.path.slice(0,-1),Y.anchor.path.slice(0,-1));(I&&c||H)&&(c=!1),(I||k())&&(s=setTimeout(m,f$e))}},T=()=>{(N()||!k())&&m()},L=Y=>{k()||(y(!0),setTimeout(y))},B=()=>{N()||(o=setTimeout(m))},W=Y=>{if(!(k()||N())&&Y.some(I=>ML(e,I,Y))){var V;(V=Cse.get(e))===null||V===void 0||V()}};return{flush:m,scheduleFlush:B,hasPendingDiffs:k,hasPendingAction:N,hasPendingChanges:P,isFlushing:O,handleUserSelect:A,handleCompositionEnd:p,handleCompositionStart:v,handleDOMBeforeInput:_,handleKeyDown:L,handleDomMutations:W,handleInput:T}}function g$e(){var t=R.useRef(!1);return R.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var cN=gk?R.useLayoutEffect:R.useEffect;function v$e(t,e,n){var[r]=R.useState(()=>new MutationObserver(e));cN(()=>{r.takeRecords()}),R.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(t.current,n),()=>r.disconnect()},[r,t,n])}var y$e=["node"];function pK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b$e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pK(Object(n),!0).forEach(function(r){uc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var w$e={subtree:!0,childList:!0,characterData:!0},x$e=Lo?t=>{var{node:e}=t,n=jw(t,y$e);if(!Lo)return null;var r=Bg(),i=g$e(),[a]=R.useState(()=>p$e(b$e({editor:r},n)));return v$e(e,a.handleDomMutations,w$e),jL.set(r,a.scheduleFlush),i&&a.flush(),a}:()=>null,S$e=["anchor","focus"],E$e=["anchor","focus"],N$e=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(n=>e.hasOwnProperty(n)&&t[n]===e[n]),Ose=(t,e)=>{var n=jw(t,S$e),r=jw(e,E$e);return t[Iw]===e[Iw]&&N$e(n,r)},_$e=(t,e)=>{if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(!nt.equals(r,i)||!Ose(r,i))return!1}return!0},C$e=(t,e)=>{if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.anchor.offset!==i.anchor.offset||r.focus.offset!==i.focus.offset||!Ose(r,i))return!1}return!0};function gK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T$e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gK(Object(n),!0).forEach(function(r){uc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var D$e=t=>{var{isLast:e,leaf:n,parent:r,text:i}=t,a=Bg(),s=rt.findPath(a,i),o=Oe.parent(s),l=!!n[Tse];return a.isVoid(r)?it.createElement(SM,{length:vt.string(r).length}):n.text===""&&r.children[r.children.length-1]===i&&!a.isInline(r)&&fe.string(a,o)===""?it.createElement(SM,{isLineBreak:!0,isMarkPlaceholder:l}):n.text===""?it.createElement(SM,{isMarkPlaceholder:l}):e&&n.text.slice(-1)===`
`?it.createElement(vK,{isTrailing:!0,text:n.text}):it.createElement(vK,{text:n.text})},vK=t=>{var{text:e,isTrailing:n=!1}=t,r=R.useRef(null),i=()=>"".concat(e??"").concat(n?`
`:""),[a]=R.useState(i);return cN(()=>{var s=i();r.current&&r.current.textContent!==s&&(r.current.textContent=s)}),it.createElement(k$e,{ref:r},a)},k$e=R.memo(R.forwardRef((t,e)=>it.createElement("span",{"data-slate-string":!0,ref:e},t.children))),SM=t=>{var{length:e=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=t,i={"data-slate-zero-width":n?"n":"z","data-slate-length":e};return r&&(i["data-slate-mark-placeholder"]=!0),it.createElement("span",T$e({},i),!(Lo||Ese)||!n?"\uFEFF":null,n?it.createElement("br",null):null)};function yK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jse(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yK(Object(n),!0).forEach(function(r){uc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var P$e=Lo?300:0;function A$e(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function bK(t){t.current&&(clearTimeout(t.current),t.current=null)}var R$e=t=>{var{leaf:e,isLast:n,text:r,parent:i,renderPlaceholder:a,renderLeaf:s=_=>it.createElement(j$e,jse({},_))}=t,o=Bg(),l=R.useRef(null),c=R.useRef(null),[f,h]=R.useState(!1),m=R.useRef(null),p=R.useCallback(_=>{if(A$e(l,_==null),_==null){var N;r4.delete(o),(N=e.onPlaceholderResize)===null||N===void 0||N.call(e,null)}else{if(r4.set(o,_),!l.current){var k=window.ResizeObserver||I5e;l.current=new k(()=>{var P;(P=e.onPlaceholderResize)===null||P===void 0||P.call(e,_)})}l.current.observe(_),c.current=_}},[c,e,o]),v=it.createElement(D$e,{isLast:n,leaf:e,parent:i,text:r}),y=!!e[Iw];if(R.useEffect(()=>(y?m.current||(m.current=setTimeout(()=>{h(!0),m.current=null},P$e)):(bK(m),h(!1)),()=>bK(m)),[y,h]),y&&f){var x={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:ty?"inherit":void 0},contentEditable:!1,ref:p}};v=it.createElement(it.Fragment,null,a(x),v)}var S={"data-slate-leaf":!0};return s({attributes:S,children:v,leaf:e,text:r})},O$e=it.memo(R$e,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&fn.equals(e.leaf,t.leaf)&&e.leaf[Iw]===t.leaf[Iw]),j$e=t=>{var{attributes:e,children:n}=t;return it.createElement("span",jse({},e),n)},I$e=t=>{for(var{decorations:e,isLast:n,parent:r,renderPlaceholder:i,renderLeaf:a,text:s}=t,o=Bg(),l=R.useRef(null),c=fn.decorations(s,e),f=rt.findKey(o,s),h=[],m=0;m<c.length;m++){var p=c[m];h.push(it.createElement(O$e,{isLast:n&&m===c.length-1,key:"".concat(f.id,"-").concat(m),renderPlaceholder:i,leaf:p,text:s,parent:r,renderLeaf:a}))}var v=R.useCallback(y=>{var x=lR.get(o);y?(x==null||x.set(f,y),Dy.set(s,y),uN.set(y,s)):(x==null||x.delete(f),Dy.delete(s),l.current&&uN.delete(l.current)),l.current=y},[l,o,f,s]);return it.createElement("span",{"data-slate-node":"text",ref:v},h)},Ise=it.memo(I$e,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&C$e(e.decorations,t.decorations));function wK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wK(Object(n),!0).forEach(function(r){uc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var M$e=t=>{var{decorations:e,element:n,renderElement:r=_=>it.createElement($$e,u4({},_)),renderPlaceholder:i,renderLeaf:a,selection:s}=t,o=Bg(),l=B$e(),c=o.isInline(n),f=rt.findKey(o,n),h=R.useCallback(_=>{var N=lR.get(o);_?(N==null||N.set(f,_),Dy.set(n,_),uN.set(_,n)):(N==null||N.delete(f),Dy.delete(n))},[o,f,n]),m=Vse({decorations:e,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:a,selection:s}),p={"data-slate-node":"element",ref:h};if(c&&(p["data-slate-inline"]=!0),!c&&fe.hasInlines(o,n)){var v=vt.string(n),y=ose(v);y==="rtl"&&(p.dir=y)}if(fe.isVoid(o,n)){p["data-slate-void"]=!0,!l&&c&&(p.contentEditable=!1);var x=c?"span":"div",[[S]]=vt.texts(n);m=it.createElement(x,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},it.createElement(Ise,{renderPlaceholder:i,decorations:[],isLast:!1,parent:n,text:S})),RL.set(S,0),OL.set(S,n)}return r({attributes:p,children:m,element:n})},V$e=it.memo(M$e,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&_$e(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&nt.equals(t.selection,e.selection))),$$e=t=>{var{attributes:e,children:n,element:r}=t,i=Bg(),a=i.isInline(r)?"span":"div";return it.createElement(a,u4(u4({},e),{},{style:{position:"relative"}}),n)},Mse=R.createContext(()=>[]),L$e=()=>R.useContext(Mse),F$e=R.createContext(!1),Vse=t=>{for(var{decorations:e,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:a,selection:s}=t,o=L$e(),l=Bg(),c=rt.findPath(l,n),f=[],h=mn.isElement(n)&&!l.isInline(n)&&fe.hasInlines(l,n),m=0;m<n.children.length;m++){var p=c.concat(m),v=n.children[m],y=rt.findKey(l,v),x=fe.range(l,p),S=s&&nt.intersection(x,s),_=o([v,p]);for(var N of e){var k=nt.intersection(N,x);k&&_.push(k)}mn.isElement(v)?f.push(it.createElement(F$e.Provider,{key:"provider-".concat(y.id),value:!!S},it.createElement(V$e,{decorations:_,element:v,key:y.id,renderElement:r,renderPlaceholder:i,renderLeaf:a,selection:S}))):f.push(it.createElement(Ise,{decorations:_,key:y.id,isLast:h&&m===n.children.length-1,parent:n,renderPlaceholder:i,renderLeaf:a,text:v})),RL.set(v,m),OL.set(v,n)}return f},$se=R.createContext(!1),B$e=()=>R.useContext($se),Lse=R.createContext(null),U$e=()=>{var t=R.useContext(Lse);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function W$e(){var t=Bg(),e=R.useRef(!1),n=R.useRef(0),r=R.useCallback(()=>{if(!e.current){e.current=!0;var i=rt.getWindow(t);i.cancelAnimationFrame(n.current),n.current=i.requestAnimationFrame(()=>{e.current=!1})}},[t]);return R.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:e,onUserInput:r}}var z$e=3,H$e={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},G$e={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},K$e={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Fi=t=>{var e=H$e[t],n=G$e[t],r=K$e[t],i=e&&bM(e),a=n&&bM(n),s=r&&bM(r);return o=>!!(i&&i(o)||cK&&a&&a(o)||!cK&&s&&s(o))},Ji={isBold:Fi("bold"),isCompose:Fi("compose"),isMoveBackward:Fi("moveBackward"),isMoveForward:Fi("moveForward"),isDeleteBackward:Fi("deleteBackward"),isDeleteForward:Fi("deleteForward"),isDeleteLineBackward:Fi("deleteLineBackward"),isDeleteLineForward:Fi("deleteLineForward"),isDeleteWordBackward:Fi("deleteWordBackward"),isDeleteWordForward:Fi("deleteWordForward"),isExtendBackward:Fi("extendBackward"),isExtendForward:Fi("extendForward"),isExtendLineBackward:Fi("extendLineBackward"),isExtendLineForward:Fi("extendLineForward"),isItalic:Fi("italic"),isMoveLineBackward:Fi("moveLineBackward"),isMoveLineForward:Fi("moveLineForward"),isMoveWordBackward:Fi("moveWordBackward"),isMoveWordForward:Fi("moveWordForward"),isRedo:Fi("redo"),isSoftBreak:Fi("insertSoftBreak"),isSplitBlock:Fi("splitBlock"),isTransposeCharacter:Fi("transposeCharacter"),isUndo:Fi("undo")},Y$e=(t,e)=>{var n=[],r=()=>{n=[]},i=s=>{if(e.current){var o=s.filter(l=>ML(t,l,s));n.push(...o)}};function a(){n.length>0&&(n.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(o=>{s.target.insertBefore(o,s.nextSibling)}),s.addedNodes.forEach(o=>{s.target.removeChild(o)}))}),r())}return{registerMutations:i,restoreDOM:a,clear:r}},J$e={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Fse extends R.Component{constructor(){super(...arguments),uc(this,"context",null),uc(this,"manager",null),uc(this,"mutationObserver",null)}observe(){var e,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(n.current,J$e)}componentDidMount(){var{receivedUserInput:e}=this.props,n=this.context;this.manager=Y$e(n,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,n,r,i=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(i!=null&&i.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(i)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}uc(Fse,"contextType",AL);var q$e=Lo?Fse:t=>{var{children:e}=t;return it.createElement(it.Fragment,null,e)},X$e=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Z$e=["text"];function xK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Df(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xK(Object(n),!0).forEach(function(r){uc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Q$e=t=>it.createElement(it.Fragment,null,Vse(t)),VL=t=>{var e=R.useCallback(X=>it.createElement(eLe,Df({},X)),[]),{autoFocus:n,decorate:r=tLe,onDOMBeforeInput:i,placeholder:a,readOnly:s=!1,renderElement:o,renderLeaf:l,renderPlaceholder:c=e,scrollSelectionIntoView:f=nLe,style:h={},as:m="div",disableDefaultStyles:p=!1}=t,v=jw(t,X$e),y=U$e(),[x,S]=R.useState(!1),_=R.useRef(null),N=R.useRef([]),[k,P]=R.useState(),O=R.useRef(!1),{onUserInput:A,receivedUserInput:T}=W$e(),[,L]=R.useReducer(X=>X+1,0);Cse.set(y,L),i4.set(y,s);var B=R.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);R.useEffect(()=>{_.current&&n&&_.current.focus()},[n]);var W=R.useRef(),Y=R.useMemo(()=>f5e(()=>{var X=rt.toDOMNode(y,y),ce=X.getRootNode();if(dK&&!O.current&&ty&&ce instanceof ShadowRoot){O.current=!0;var he=n$e();he?document.execCommand("indent"):ot.deselect(y),O.current=!1;return}var ve=W.current;if((Lo||!rt.isComposing(y))&&(!B.isUpdatingSelection||ve!=null&&ve.isFlushing())&&!B.isDraggingInternally){var Ne=rt.findDocumentOrShadowRoot(y),{activeElement:ke}=Ne,Te=rt.toDOMNode(y,y),ye=Ne.getSelection();if(ke===Te?(B.latestElement=ke,og.set(y,!0)):og.delete(y),!ye)return ot.deselect(y);var{anchorNode:Ie,focusNode:Re}=ye,Ee=rt.hasEditableTarget(y,Ie)||rt.isTargetInsideNonReadonlyVoid(y,Ie),$e=rt.hasEditableTarget(y,Re)||rt.isTargetInsideNonReadonlyVoid(y,Re);if(Ee&&$e){var He=rt.toSlateRange(y,ye,{exactMatch:!1,suppressThrow:!0});He&&(!rt.isComposing(y)&&!(ve!=null&&ve.hasPendingChanges())&&!(ve!=null&&ve.isFlushing())?ot.select(y,He):ve==null||ve.handleUserSelect(He))}s&&(!Ee||!$e)&&ot.deselect(y)}},100),[y,s,B]),V=R.useMemo(()=>s5e(Y,0),[Y]);W.current=x$e({node:_,onDOMSelectionChange:Y,scheduleOnDOMSelectionChange:V}),cN(()=>{var X,ce,he;_.current&&(he=IL(_.current))?(_se.set(y,he),vk.set(y,_.current),Dy.set(y,_.current),uN.set(_.current,y)):Dy.delete(y);var{selection:ve}=y,Ne=rt.findDocumentOrShadowRoot(y),ke=Ne.getSelection();if(!(!ke||!rt.isFocused(y)||(X=W.current)!==null&&X!==void 0&&X.hasPendingAction())){var Te=Ee=>{var $e=ke.type!=="None";if(!(!ve&&!$e)){var He=ke.focusNode,gt;if(ow&&ke.rangeCount>1){var Ye=ke.getRangeAt(0),yt=ke.getRangeAt(ke.rangeCount-1);Ye.startContainer===He?gt=yt.endContainer:gt=Ye.startContainer}else gt=ke.anchorNode;var _t=vk.get(y),St=!1;if(_t.contains(gt)&&_t.contains(He)&&(St=!0),$e&&St&&ve&&!Ee){var Bt=rt.toSlateRange(y,ke,{exactMatch:!0,suppressThrow:!0});if(Bt&&nt.equals(Bt,ve)){var Nt;if(!B.hasMarkPlaceholder||(Nt=gt)!==null&&Nt!==void 0&&(Nt=Nt.parentElement)!==null&&Nt!==void 0&&Nt.hasAttribute("data-slate-mark-placeholder"))return}}if(ve&&!rt.hasRange(y,ve)){y.selection=rt.toSlateRange(y,ke,{exactMatch:!1,suppressThrow:!0});return}B.isUpdatingSelection=!0;var Dt=ve&&rt.toDOMRange(y,ve);return Dt?(rt.isComposing(y)&&!Lo?ke.collapseToEnd():nt.isBackward(ve)?ke.setBaseAndExtent(Dt.endContainer,Dt.endOffset,Dt.startContainer,Dt.startOffset):ke.setBaseAndExtent(Dt.startContainer,Dt.startOffset,Dt.endContainer,Dt.endOffset),f(y,Dt)):ke.removeAllRanges(),Dt}};ke.rangeCount<=1&&Te();var ye=((ce=W.current)===null||ce===void 0?void 0:ce.isFlushing())==="action";if(!Lo||!ye){setTimeout(()=>{B.isUpdatingSelection=!1});return}var Ie=null,Re=requestAnimationFrame(()=>{if(ye){var Ee=$e=>{try{var He=rt.toDOMNode(y,y);He.focus(),Te($e)}catch{}};Ee(),Ie=setTimeout(()=>{Ee(!0),B.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Re),Ie&&clearTimeout(Ie)}}});var I=R.useCallback(X=>{var ce=rt.toDOMNode(y,y),he=ce.getRootNode();if(dK&&O!==null&&O!==void 0&&O.current&&ty&&he instanceof ShadowRoot){var ve=X.getTargetRanges(),Ne=ve[0],ke=new window.Range;ke.setStart(Ne.startContainer,Ne.startOffset),ke.setEnd(Ne.endContainer,Ne.endOffset);var Te=rt.toSlateRange(y,ke,{exactMatch:!1,suppressThrow:!1});ot.select(y,Te),X.preventDefault(),X.stopImmediatePropagation();return}if(A(),!s&&rt.hasEditableTarget(y,X.target)&&!rLe(X,i)){var ye;if(W.current)return W.current.handleDOMBeforeInput(X);V.flush(),Y.flush();var{selection:Ie}=y,{inputType:Re}=X,Ee=X.dataTransfer||X.data||void 0,$e=Re==="insertCompositionText"||Re==="deleteCompositionText";if($e&&rt.isComposing(y))return;var He=!1;if(Re==="insertText"&&Ie&&nt.isCollapsed(Ie)&&X.data&&X.data.length===1&&/[a-z ]/i.test(X.data)&&Ie.anchor.offset!==0){var gt,Ye;He=!0,y.marks&&(He=!1);var{anchor:yt}=Ie,[_t,St]=rt.toDOMPoint(y,yt),Bt=(gt=_t.parentElement)===null||gt===void 0?void 0:gt.closest("a"),Nt=rt.getWindow(y);if(He&&Bt&&rt.hasDOMNode(y,Bt)){var Dt,Ae=Nt==null?void 0:Nt.document.createTreeWalker(Bt,NodeFilter.SHOW_TEXT).lastChild();Ae===_t&&((Dt=Ae.textContent)===null||Dt===void 0?void 0:Dt.length)===St&&(He=!1)}if(He&&_t.parentElement&&(Nt==null||(Ye=Nt.getComputedStyle(_t.parentElement))===null||Ye===void 0?void 0:Ye.whiteSpace)==="pre"){var je=fe.above(y,{at:yt.path,match:an=>mn.isElement(an)&&fe.isBlock(y,an)});je&&vt.string(je[0]).includes("	")&&(He=!1)}}if(!Re.startsWith("delete")||Re.startsWith("deleteBy")){var[tt]=X.getTargetRanges();if(tt){var Ot=rt.toSlateRange(y,tt,{exactMatch:!1,suppressThrow:!1});if(!Ie||!nt.equals(Ie,Ot)){He=!1;var qe=!$e&&y.selection&&fe.rangeRef(y,y.selection);ot.select(y,Ot),qe&&CE.set(y,qe)}}}if($e)return;if(He||X.preventDefault(),Ie&&nt.isExpanded(Ie)&&Re.startsWith("delete")){var ft=Re.endsWith("Backward")?"backward":"forward";fe.deleteFragment(y,{direction:ft});return}switch(Re){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{fe.deleteFragment(y);break}case"deleteContent":case"deleteContentForward":{fe.deleteForward(y);break}case"deleteContentBackward":{fe.deleteBackward(y);break}case"deleteEntireSoftLine":{fe.deleteBackward(y,{unit:"line"}),fe.deleteForward(y,{unit:"line"});break}case"deleteHardLineBackward":{fe.deleteBackward(y,{unit:"block"});break}case"deleteSoftLineBackward":{fe.deleteBackward(y,{unit:"line"});break}case"deleteHardLineForward":{fe.deleteForward(y,{unit:"block"});break}case"deleteSoftLineForward":{fe.deleteForward(y,{unit:"line"});break}case"deleteWordBackward":{fe.deleteBackward(y,{unit:"word"});break}case"deleteWordForward":{fe.deleteForward(y,{unit:"word"});break}case"insertLineBreak":fe.insertSoftBreak(y);break;case"insertParagraph":{fe.insertBreak(y);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{Re==="insertFromComposition"&&rt.isComposing(y)&&(S(!1),by.set(y,!1)),(Ee==null?void 0:Ee.constructor.name)==="DataTransfer"?rt.insertData(y,Ee):typeof Ee=="string"&&(He?N.current.push(()=>fe.insertText(y,Ee)):fe.insertText(y,Ee));break}}var Wt=(ye=CE.get(y))===null||ye===void 0?void 0:ye.unref();CE.delete(y),Wt&&(!y.selection||!nt.equals(y.selection,Wt))&&ot.select(y,Wt)}},[y,Y,A,i,s,V]),H=R.useCallback(X=>{X==null?(Y.cancel(),V.cancel(),vk.delete(y),Dy.delete(y),_.current&&$p&&_.current.removeEventListener("beforeinput",I)):$p&&X.addEventListener("beforeinput",I),_.current=X},[Y,V,y,I]);cN(()=>{var X=rt.getWindow(y);return X.document.addEventListener("selectionchange",V),()=>{X.document.removeEventListener("selectionchange",V)}},[V]);var q=r([y,[]]),F=a&&y.children.length===1&&Array.from(vt.texts(y)).length===1&&vt.string(y)===""&&!x,J=R.useCallback(X=>{if(X&&F){var ce;P((ce=X.getBoundingClientRect())===null||ce===void 0?void 0:ce.height)}else P(void 0)},[F]);if(F){var Z=fe.start(y,[]);q.push({[Iw]:!0,placeholder:a,onPlaceholderResize:J,anchor:Z,focus:Z})}var{marks:G}=y;if(B.hasMarkPlaceholder=!1,y.selection&&nt.isCollapsed(y.selection)&&G){var{anchor:oe}=y.selection,ae=vt.leaf(y,oe.path),te=jw(ae,Z$e);if(!fn.equals(ae,G,{loose:!0})){B.hasMarkPlaceholder=!0;var re=Object.fromEntries(Object.keys(te).map(X=>[X,null]));q.push(Df(Df(Df({[Tse]:!0},re),G),{},{anchor:oe,focus:oe}))}}return R.useEffect(()=>{setTimeout(()=>{var{selection:X}=y;if(X){var{anchor:ce}=X,he=vt.leaf(y,ce.path);if(G&&!fn.equals(he,G,{loose:!0})){gd.set(y,G);return}}gd.delete(y)})}),it.createElement($se.Provider,{value:s},it.createElement(Mse.Provider,{value:r},it.createElement(q$e,{node:_,receivedUserInput:T},it.createElement(m,Df(Df({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},v),{},{spellCheck:$p||!gk?v.spellCheck:!1,autoCorrect:$p||!gk?v.autoCorrect:"false",autoCapitalize:$p||!gk?v.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:H,style:Df(Df({},p?{}:Df({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},k?{minHeight:k}:{})),h),onBeforeInput:R.useCallback(X=>{if(!$p&&!s&&!Ro(X,v.onBeforeInput)&&rt.hasSelectableTarget(y,X.target)&&(X.preventDefault(),!rt.isComposing(y))){var ce=X.data;fe.insertText(y,ce)}},[v.onBeforeInput,y,s]),onInput:R.useCallback(X=>{if(!Ro(X,v.onInput)){if(W.current){W.current.handleInput();return}for(var ce of N.current)ce();N.current=[]}},[v.onInput]),onBlur:R.useCallback(X=>{if(!(s||B.isUpdatingSelection||!rt.hasSelectableTarget(y,X.target)||Ro(X,v.onBlur))){var ce=rt.findDocumentOrShadowRoot(y);if(B.latestElement!==ce.activeElement){var{relatedTarget:he}=X,ve=rt.toDOMNode(y,y);if(he!==ve&&!(sc(he)&&he.hasAttribute("data-slate-spacer"))){if(he!=null&&Tg(he)&&rt.hasDOMNode(y,he)){var Ne=rt.toSlateNode(y,he);if(mn.isElement(Ne)&&!y.isVoid(Ne))return}if(ty){var ke=ce.getSelection();ke==null||ke.removeAllRanges()}og.delete(y)}}}},[s,B.isUpdatingSelection,B.latestElement,y,v.onBlur]),onClick:R.useCallback(X=>{if(rt.hasTarget(y,X.target)&&!Ro(X,v.onClick)&&Tg(X.target)){var ce=rt.toSlateNode(y,X.target),he=rt.findPath(y,ce);if(!fe.hasPath(y,he)||vt.get(y,he)!==ce)return;if(X.detail===z$e&&he.length>=1){var ve=he;if(!(mn.isElement(ce)&&fe.isBlock(y,ce))){var Ne,ke=fe.above(y,{match:He=>mn.isElement(He)&&fe.isBlock(y,He),at:he});ve=(Ne=ke==null?void 0:ke[1])!==null&&Ne!==void 0?Ne:he.slice(0,1)}var Te=fe.range(y,ve);ot.select(y,Te);return}if(s)return;var ye=fe.start(y,he),Ie=fe.end(y,he),Re=fe.void(y,{at:ye}),Ee=fe.void(y,{at:Ie});if(Re&&Ee&&Oe.equals(Re[1],Ee[1])){var $e=fe.range(y,ye);ot.select(y,$e)}}},[y,v.onClick,s]),onCompositionEnd:R.useCallback(X=>{if(rt.hasSelectableTarget(y,X.target)){var ce;if(rt.isComposing(y)&&Promise.resolve().then(()=>{S(!1),by.set(y,!1)}),(ce=W.current)===null||ce===void 0||ce.handleCompositionEnd(X),Ro(X,v.onCompositionEnd)||Lo)return;if(!ty&&!H5e&&!Ese&&!K5e&&!G5e&&X.data){var he=gd.get(y);gd.delete(y),he!==void 0&&(cm.set(y,y.marks),y.marks=he),fe.insertText(y,X.data);var ve=cm.get(y);cm.delete(y),ve!==void 0&&(y.marks=ve)}}},[v.onCompositionEnd,y]),onCompositionUpdate:R.useCallback(X=>{rt.hasSelectableTarget(y,X.target)&&!Ro(X,v.onCompositionUpdate)&&(rt.isComposing(y)||(S(!0),by.set(y,!0)))},[v.onCompositionUpdate,y]),onCompositionStart:R.useCallback(X=>{if(rt.hasSelectableTarget(y,X.target)){var ce;if((ce=W.current)===null||ce===void 0||ce.handleCompositionStart(X),Ro(X,v.onCompositionStart)||Lo)return;S(!0);var{selection:he}=y;if(he&&nt.isExpanded(he)){fe.deleteFragment(y);return}}},[v.onCompositionStart,y]),onCopy:R.useCallback(X=>{rt.hasSelectableTarget(y,X.target)&&!Ro(X,v.onCopy)&&!SK(X)&&(X.preventDefault(),rt.setFragmentData(y,X.clipboardData,"copy"))},[v.onCopy,y]),onCut:R.useCallback(X=>{if(!s&&rt.hasSelectableTarget(y,X.target)&&!Ro(X,v.onCut)&&!SK(X)){X.preventDefault(),rt.setFragmentData(y,X.clipboardData,"cut");var{selection:ce}=y;if(ce)if(nt.isExpanded(ce))fe.deleteFragment(y);else{var he=vt.parent(y,ce.anchor.path);fe.isVoid(y,he)&&ot.delete(y)}}},[s,y,v.onCut]),onDragOver:R.useCallback(X=>{if(rt.hasTarget(y,X.target)&&!Ro(X,v.onDragOver)){var ce=rt.toSlateNode(y,X.target);mn.isElement(ce)&&fe.isVoid(y,ce)&&X.preventDefault()}},[v.onDragOver,y]),onDragStart:R.useCallback(X=>{if(!s&&rt.hasTarget(y,X.target)&&!Ro(X,v.onDragStart)){var ce=rt.toSlateNode(y,X.target),he=rt.findPath(y,ce),ve=mn.isElement(ce)&&fe.isVoid(y,ce)||fe.void(y,{at:he,voids:!0});if(ve){var Ne=fe.range(y,he);ot.select(y,Ne)}B.isDraggingInternally=!0,rt.setFragmentData(y,X.dataTransfer,"drag")}},[s,y,v.onDragStart,B]),onDrop:R.useCallback(X=>{if(!s&&rt.hasTarget(y,X.target)&&!Ro(X,v.onDrop)){X.preventDefault();var ce=y.selection,he=rt.findEventRange(y,X),ve=X.dataTransfer;ot.select(y,he),B.isDraggingInternally&&ce&&!nt.equals(ce,he)&&!fe.void(y,{at:he,voids:!0})&&ot.delete(y,{at:ce}),rt.insertData(y,ve),rt.isFocused(y)||rt.focus(y)}B.isDraggingInternally=!1},[s,y,v.onDrop,B]),onDragEnd:R.useCallback(X=>{!s&&B.isDraggingInternally&&v.onDragEnd&&rt.hasTarget(y,X.target)&&v.onDragEnd(X),B.isDraggingInternally=!1},[s,B,v,y]),onFocus:R.useCallback(X=>{if(!s&&!B.isUpdatingSelection&&rt.hasEditableTarget(y,X.target)&&!Ro(X,v.onFocus)){var ce=rt.toDOMNode(y,y),he=rt.findDocumentOrShadowRoot(y);if(B.latestElement=he.activeElement,ow&&X.target!==ce){ce.focus();return}og.set(y,!0)}},[s,B,y,v.onFocus]),onKeyDown:R.useCallback(X=>{if(!s&&rt.hasEditableTarget(y,X.target)){var ce;(ce=W.current)===null||ce===void 0||ce.handleKeyDown(X);var{nativeEvent:he}=X;if(rt.isComposing(y)&&he.isComposing===!1&&(by.set(y,!1),S(!1)),Ro(X,v.onKeyDown)||rt.isComposing(y))return;var{selection:ve}=y,Ne=y.children[ve!==null?ve.focus.path[0]:0],ke=ose(vt.string(Ne))==="rtl";if(Ji.isRedo(he)){X.preventDefault();var Te=y;typeof Te.redo=="function"&&Te.redo();return}if(Ji.isUndo(he)){X.preventDefault();var ye=y;typeof ye.undo=="function"&&ye.undo();return}if(Ji.isMoveLineBackward(he)){X.preventDefault(),ot.move(y,{unit:"line",reverse:!0});return}if(Ji.isMoveLineForward(he)){X.preventDefault(),ot.move(y,{unit:"line"});return}if(Ji.isExtendLineBackward(he)){X.preventDefault(),ot.move(y,{unit:"line",edge:"focus",reverse:!0});return}if(Ji.isExtendLineForward(he)){X.preventDefault(),ot.move(y,{unit:"line",edge:"focus"});return}if(Ji.isMoveBackward(he)){X.preventDefault(),ve&&nt.isCollapsed(ve)?ot.move(y,{reverse:!ke}):ot.collapse(y,{edge:ke?"end":"start"});return}if(Ji.isMoveForward(he)){X.preventDefault(),ve&&nt.isCollapsed(ve)?ot.move(y,{reverse:ke}):ot.collapse(y,{edge:ke?"start":"end"});return}if(Ji.isMoveWordBackward(he)){X.preventDefault(),ve&&nt.isExpanded(ve)&&ot.collapse(y,{edge:"focus"}),ot.move(y,{unit:"word",reverse:!ke});return}if(Ji.isMoveWordForward(he)){X.preventDefault(),ve&&nt.isExpanded(ve)&&ot.collapse(y,{edge:"focus"}),ot.move(y,{unit:"word",reverse:ke});return}if($p){if((Nse||ty)&&ve&&(Ji.isDeleteBackward(he)||Ji.isDeleteForward(he))&&nt.isCollapsed(ve)){var Ie=vt.parent(y,ve.anchor.path);if(mn.isElement(Ie)&&fe.isVoid(y,Ie)&&(fe.isInline(y,Ie)||fe.isBlock(y,Ie))){X.preventDefault(),fe.deleteBackward(y,{unit:"block"});return}}}else{if(Ji.isBold(he)||Ji.isItalic(he)||Ji.isTransposeCharacter(he)){X.preventDefault();return}if(Ji.isSoftBreak(he)){X.preventDefault(),fe.insertSoftBreak(y);return}if(Ji.isSplitBlock(he)){X.preventDefault(),fe.insertBreak(y);return}if(Ji.isDeleteBackward(he)){X.preventDefault(),ve&&nt.isExpanded(ve)?fe.deleteFragment(y,{direction:"backward"}):fe.deleteBackward(y);return}if(Ji.isDeleteForward(he)){X.preventDefault(),ve&&nt.isExpanded(ve)?fe.deleteFragment(y,{direction:"forward"}):fe.deleteForward(y);return}if(Ji.isDeleteLineBackward(he)){X.preventDefault(),ve&&nt.isExpanded(ve)?fe.deleteFragment(y,{direction:"backward"}):fe.deleteBackward(y,{unit:"line"});return}if(Ji.isDeleteLineForward(he)){X.preventDefault(),ve&&nt.isExpanded(ve)?fe.deleteFragment(y,{direction:"forward"}):fe.deleteForward(y,{unit:"line"});return}if(Ji.isDeleteWordBackward(he)){X.preventDefault(),ve&&nt.isExpanded(ve)?fe.deleteFragment(y,{direction:"backward"}):fe.deleteBackward(y,{unit:"word"});return}if(Ji.isDeleteWordForward(he)){X.preventDefault(),ve&&nt.isExpanded(ve)?fe.deleteFragment(y,{direction:"forward"}):fe.deleteForward(y,{unit:"word"});return}}}},[s,y,v.onKeyDown]),onPaste:R.useCallback(X=>{!s&&rt.hasEditableTarget(y,X.target)&&!Ro(X,v.onPaste)&&(!$p||q5e(X.nativeEvent)||ty)&&(X.preventDefault(),rt.insertData(y,X.clipboardData))},[s,y,v.onPaste])}),it.createElement(Q$e,{decorations:q,node:y,renderElement:o,renderPlaceholder:c,renderLeaf:l,selection:y.selection})))))},eLe=t=>{var{attributes:e,children:n}=t;return it.createElement("span",Df({},e),n,Lo&&it.createElement("br",null))},tLe=()=>[],nLe=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&nt.isCollapsed(t.selection))){var n=e.startContainer.parentElement;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),m5e(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},Ro=(t,e)=>{if(!e)return!1;var n=e(t);return n??(t.isDefaultPrevented()||t.isPropagationStopped())},SK=t=>Tg(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),rLe=(t,e)=>{if(!e)return!1;var n=e(t);return n??t.defaultPrevented},iLe=R.createContext(!1),aLe=R.createContext({});function sLe(t){var e=R.useRef([]).current,n=R.useRef({editor:t}).current,r=R.useCallback(a=>{n.editor=a,e.forEach(s=>s(a))},[e,n]),i=R.useMemo(()=>({getSlate:()=>n.editor,addEventListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1)})}),[e,n]);return{selectorContext:i,onChange:r}}var oLe=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],$L=t=>{var{editor:e,children:n,onChange:r,onSelectionChange:i,onValueChange:a,initialValue:s}=t,o=jw(t,oLe),[l,c]=it.useState(()=>{if(!vt.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(fs.stringify(s)));if(!fe.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(fs.stringify(e)));return e.children=s,Object.assign(e,o),{v:0,editor:e}}),{selectorContext:f,onChange:h}=sLe(e),m=R.useCallback(y=>{var x;switch(r&&r(e.children),y==null||(x=y.operation)===null||x===void 0?void 0:x.type){case"set_selection":i==null||i(e.selection);break;default:a==null||a(e.children)}c(S=>({v:S.v+1,editor:e})),h(e)},[e,h,r,i,a]);R.useEffect(()=>(a4.set(e,m),()=>{a4.set(e,()=>{})}),[e,m]);var[p,v]=R.useState(rt.isFocused(e));return R.useEffect(()=>{v(rt.isFocused(e))},[e]),cN(()=>{var y=()=>v(rt.isFocused(e));return Sse>=17?(document.addEventListener("focusin",y),document.addEventListener("focusout",y),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",y)}):(document.addEventListener("focus",y,!0),document.addEventListener("blur",y,!0),()=>{document.removeEventListener("focus",y,!0),document.removeEventListener("blur",y,!0)})},[]),it.createElement(aLe.Provider,{value:f},it.createElement(Lse.Provider,{value:l},it.createElement(AL.Provider,{value:l.editor},it.createElement(iLe.Provider,{value:p},n))))},EK=(t,e)=>{var n=(e.top+e.bottom)/2;return t.top<=n&&t.bottom>=n},NK=(t,e,n)=>{var r=rt.toDOMRange(t,e).getBoundingClientRect(),i=rt.toDOMRange(t,n).getBoundingClientRect();return EK(r,i)&&EK(i,r)},lLe=(t,e)=>{var n=fe.range(t,nt.end(e)),r=Array.from(fe.positions(t,{at:e})),i=0,a=r.length,s=Math.floor(a/2);if(NK(t,fe.range(t,r[i]),n))return fe.range(t,r[i],n);if(r.length<2)return fe.range(t,r[r.length-1],n);for(;s!==r.length&&s!==i;)NK(t,fe.range(t,r[s]),n)?a=s:i=s,s=Math.floor((i+a)/2);return fe.range(t,r[a],n)};function _K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_K(Object(n),!0).forEach(function(r){uc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_K(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var LL=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=e,{apply:i,onChange:a,deleteBackward:s,addMark:o,removeMark:l}=r;return lR.set(r,new WeakMap),r.addMark=(c,f)=>{var h,m;(h=jL.get(r))===null||h===void 0||h(),!gd.get(r)&&(m=bl.get(r))!==null&&m!==void 0&&m.length&&gd.set(r,null),cm.delete(r),o(c,f)},r.removeMark=c=>{var f;!gd.get(r)&&(f=bl.get(r))!==null&&f!==void 0&&f.length&&gd.set(r,null),cm.delete(r),l(c)},r.deleteBackward=c=>{if(c!=="line")return s(c);if(r.selection&&nt.isCollapsed(r.selection)){var f=fe.above(r,{match:v=>mn.isElement(v)&&fe.isBlock(r,v),at:r.selection});if(f){var[,h]=f,m=fe.range(r,h,r.selection.anchor),p=lLe(r,m);nt.isCollapsed(p)||ot.delete(r,{at:p})}}},r.apply=c=>{var f=[],h=[],m=bl.get(r);if(m!=null&&m.length){var p=m.map(I=>c$e(I,c)).filter(Boolean);bl.set(r,p)}var v=Zp.get(r);v&&Zp.set(r,hK(r,v,c));var y=Xp.get(r);if(y!=null&&y.at){var x=pr.isPoint(y==null?void 0:y.at)?l4(r,y.at,c):hK(r,y.at,c);Xp.set(r,x?CK(CK({},y),{},{at:x}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{f.push(...v0(r,c.path));break}case"set_selection":{var S;(S=CE.get(r))===null||S===void 0||S.unref(),CE.delete(r);break}case"insert_node":case"remove_node":{f.push(...v0(r,Oe.parent(c.path)));break}case"merge_node":{var _=Oe.previous(c.path);f.push(...v0(r,_));break}case"move_node":{var N=Oe.common(Oe.parent(c.path),Oe.parent(c.newPath));f.push(...v0(r,N));var k;Oe.isBefore(c.path,c.newPath)?(f.push(...v0(r,Oe.parent(c.path))),k=c.newPath):(f.push(...v0(r,Oe.parent(c.newPath))),k=c.path);var P=vt.get(e,Oe.parent(k)),O=rt.findKey(r,P),A=fe.pathRef(r,Oe.parent(k));h.push([A,O]);break}}i(c);for(var[T,L]of f){var[B]=fe.node(r,T);_P.set(B,L)}for(var[W,Y]of h)if(W.current){var[V]=fe.node(r,W.current);_P.set(V,Y)}},r.setFragmentData=c=>{var{selection:f}=r;if(f){var[h,m]=nt.edges(f),p=fe.void(r,{at:h.path}),v=fe.void(r,{at:m.path});if(!(nt.isCollapsed(f)&&!p)){var y=rt.toDOMRange(r,f),x=y.cloneContents(),S=x.childNodes[0];if(x.childNodes.forEach(B=>{B.textContent&&B.textContent.trim()!==""&&(S=B)}),v){var[_]=v,N=y.cloneRange(),k=rt.toDOMNode(r,_);N.setEndAfter(k),x=N.cloneContents()}if(p&&(S=x.querySelector("[data-slate-spacer]")),Array.from(x.querySelectorAll("[data-slate-zero-width]")).forEach(B=>{var W=B.getAttribute("data-slate-zero-width")==="n";B.textContent=W?`
`:""}),Dse(S)){var P=S.ownerDocument.createElement("span");P.style.whiteSpace="pre",P.appendChild(S),x.appendChild(P),S=P}var O=r.getFragment(),A=JSON.stringify(O),T=window.btoa(encodeURIComponent(A));S.setAttribute("data-slate-fragment",T),c.setData("application/".concat(n),T);var L=x.ownerDocument.createElement("div");return L.appendChild(x),L.setAttribute("hidden","true"),x.ownerDocument.body.appendChild(L),c.setData("text/html",L.innerHTML),c.setData("text/plain",Pse(L)),x.ownerDocument.body.removeChild(L),c}}},r.insertData=c=>{r.insertFragmentData(c)||r.insertTextData(c)},r.insertFragmentData=c=>{var f=c.getData("application/".concat(n))||t$e(c);if(f){var h=decodeURIComponent(window.atob(f)),m=JSON.parse(h);return r.insertFragment(m),!0}return!1},r.insertTextData=c=>{var f=c.getData("text/plain");if(f){var h=f.split(/\r\n|\r|\n/),m=!1;for(var p of h)m&&ot.splitNodes(r,{always:!0}),r.insertText(p),m=!0;return!0}return!1},r.onChange=c=>{var f=Sse<18?_A.unstable_batchedUpdates:h=>h();f(()=>{var h=a4.get(r);h&&h(c),a(c)})},r},v0=(t,e)=>{var n=[];for(var[r,i]of fe.levels(t,{at:e})){var a=rt.findKey(t,r);n.push([i,a])}return n};function Om(){}Om.prototype={diff:function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={}),this.options=i;var s=this;function o(k){return a?(setTimeout(function(){a(void 0,k)},0),!0):k}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,c=e.length,f=1,h=l+c;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));var m=(r=i.timeout)!==null&&r!==void 0?r:1/0,p=Date.now()+m,v=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(v[0],n,e,0);if(v[0].oldPos+1>=c&&y+1>=l)return o([{value:this.join(n),count:n.length}]);var x=-1/0,S=1/0;function _(){for(var k=Math.max(x,-f);k<=Math.min(S,f);k+=2){var P=void 0,O=v[k-1],A=v[k+1];O&&(v[k-1]=void 0);var T=!1;if(A){var L=A.oldPos-k;T=A&&0<=L&&L<l}var B=O&&O.oldPos+1<c;if(!T&&!B){v[k]=void 0;continue}if(!B||T&&O.oldPos+1<A.oldPos?P=s.addToPath(A,!0,void 0,0):P=s.addToPath(O,void 0,!0,1),y=s.extractCommon(P,n,e,k),P.oldPos+1>=c&&y+1>=l)return o(uLe(s,P.lastComponent,n,e,s.useLongestToken));v[k]=P,P.oldPos+1>=c&&(S=Math.min(S,k-1)),y+1>=l&&(x=Math.max(x,k+1))}f++}if(a)(function k(){setTimeout(function(){if(f>h||Date.now()>p)return a();_()||k()},0)})();else for(;f<=h&&Date.now()<=p;){var N=_();if(N)return N}},addToPath:function(e,n,r,i){var a=e.lastComponent;return a&&a.added===n&&a.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:n,removed:r,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:a}}},extractCommon:function(e,n,r,i){for(var a=n.length,s=r.length,o=e.oldPos,l=o-i,c=0;l+1<a&&o+1<s&&this.equals(n[l+1],r[o+1]);)l++,o++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=o,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function uLe(t,e,n,r,i){for(var a=[],s;e;)a.push(e),s=e.previousComponent,delete e.previousComponent,e=s;a.reverse();for(var o=0,l=a.length,c=0,f=0;o<l;o++){var h=a[o];if(h.removed){if(h.value=t.join(r.slice(f,f+h.count)),f+=h.count,o&&a[o-1].added){var p=a[o-1];a[o-1]=a[o],a[o]=p}}else{if(!h.added&&i){var m=n.slice(c,c+h.count);m=m.map(function(y,x){var S=r[f+x];return S.length>y.length?S:y}),h.value=t.join(m)}else h.value=t.join(n.slice(c,c+h.count));c+=h.count,h.added||(f+=h.count)}}var v=a[l-1];return l>1&&typeof v.value=="string"&&(v.added||v.removed)&&t.equals("",v.value)&&(a[l-2].value+=v.value,a.pop()),a}var cLe=new Om;function EM(t,e,n){return cLe.diff(t,e,n)}function dLe(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var TK=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,DK=/\S/,uR=new Om;uR.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!DK.test(t)&&!DK.test(e)};uR.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&TK.test(e[n])&&TK.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function fLe(t,e,n){return n=dLe(n,{ignoreWhitespace:!0}),uR.diff(t,e,n)}function Bse(t,e,n){return uR.diff(t,e,n)}var Use=new Om;Use.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};var hLe=new Om;hLe.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var mLe=new Om;mLe.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function yk(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yk=function(e){return typeof e}:yk=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yk(t)}var pLe=Object.prototype.toString,dN=new Om;dN.useLongestToken=!0;dN.tokenize=Use.tokenize;dN.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(a,s){return typeof s>"u"?n:s}:r;return typeof t=="string"?t:JSON.stringify(c4(t,null,null,i),i,"  ")};dN.equals=function(t,e){return Om.prototype.equals.call(dN,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function c4(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(pLe.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=c4(t[a],e,n,r,i);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),yk(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var o=[],l;for(l in t)t.hasOwnProperty(l)&&o.push(l);for(o.sort(),a=0;a<o.length;a+=1)l=o[a],s[l]=c4(t[l],e,n,r,l);e.pop(),n.pop()}else s=t;return s}var d4=new Om;d4.tokenize=function(t){return t.slice()};d4.join=d4.removeEmpty=function(t){return t};const f4="RFC3986",h4={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},gLe="RFC1738",vLe=Array.isArray,Ef=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),NM=1024,yLe=(t,e,n,r,i)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let s="";for(let o=0;o<a.length;o+=NM){const l=a.length>=NM?a.slice(o,o+NM):a,c=[];for(let f=0;f<l.length;++f){let h=l.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===gLe&&(h===40||h===41)){c[c.length]=l.charAt(f);continue}if(h<128){c[c.length]=Ef[h];continue}if(h<2048){c[c.length]=Ef[192|h>>6]+Ef[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=Ef[224|h>>12]+Ef[128|h>>6&63]+Ef[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|l.charCodeAt(f)&1023),c[c.length]=Ef[240|h>>18]+Ef[128|h>>12&63]+Ef[128|h>>6&63]+Ef[128|h&63]}s+=c.join("")}return s};function bLe(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function kK(t,e){if(vLe(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const wLe=Object.prototype.hasOwnProperty,Wse={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Rf=Array.isArray,xLe=Array.prototype.push,zse=function(t,e){xLe.apply(t,Rf(e)?e:[e])},SLe=Date.prototype.toISOString,Ka={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:yLe,encodeValuesOnly:!1,format:f4,formatter:h4[f4],indices:!1,serializeDate(t){return SLe.call(t)},skipNulls:!1,strictNullHandling:!1};function ELe(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const _M={};function Hse(t,e,n,r,i,a,s,o,l,c,f,h,m,p,v,y,x,S){let _=t,N=S,k=0,P=!1;for(;(N=N.get(_M))!==void 0&&!P;){const B=N.get(t);if(k+=1,typeof B<"u"){if(B===k)throw new RangeError("Cyclic object value");P=!0}typeof N.get(_M)>"u"&&(k=0)}if(typeof c=="function"?_=c(e,_):_ instanceof Date?_=m==null?void 0:m(_):n==="comma"&&Rf(_)&&(_=kK(_,function(B){return B instanceof Date?m==null?void 0:m(B):B})),_===null){if(a)return l&&!y?l(e,Ka.encoder,x,"key",p):e;_=""}if(ELe(_)||bLe(_)){if(l){const B=y?e:l(e,Ka.encoder,x,"key",p);return[(v==null?void 0:v(B))+"="+(v==null?void 0:v(l(_,Ka.encoder,x,"value",p)))]}return[(v==null?void 0:v(e))+"="+(v==null?void 0:v(String(_)))]}const O=[];if(typeof _>"u")return O;let A;if(n==="comma"&&Rf(_))y&&l&&(_=kK(_,l)),A=[{value:_.length>0?_.join(",")||null:void 0}];else if(Rf(c))A=c;else{const B=Object.keys(_);A=f?B.sort(f):B}const T=o?String(e).replace(/\./g,"%2E"):String(e),L=r&&Rf(_)&&_.length===1?T+"[]":T;if(i&&Rf(_)&&_.length===0)return L+"[]";for(let B=0;B<A.length;++B){const W=A[B],Y=typeof W=="object"&&typeof W.value<"u"?W.value:_[W];if(s&&Y===null)continue;const V=h&&o?W.replace(/\./g,"%2E"):W,I=Rf(_)?typeof n=="function"?n(L,V):L:L+(h?"."+V:"["+V+"]");S.set(t,k);const H=new WeakMap;H.set(_M,S),zse(O,Hse(Y,I,n,r,i,a,s,o,n==="comma"&&y&&Rf(_)?null:l,c,f,h,m,p,v,y,x,H))}return O}function NLe(t=Ka){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ka.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=f4;if(typeof t.format<"u"){if(!wLe.call(h4,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=h4[n];let i=Ka.filter;(typeof t.filter=="function"||Rf(t.filter))&&(i=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in Wse?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Ka.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ka.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ka.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ka.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ka.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ka.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ka.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ka.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ka.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ka.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ka.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ka.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ka.strictNullHandling}}function _Le(t,e={}){let n=t;const r=NLe(e);let i,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Rf(r.filter)&&(a=r.filter,i=a);const s=[];if(typeof n!="object"||n===null)return"";const o=Wse[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const c=new WeakMap;for(let m=0;m<i.length;++m){const p=i[m];r.skipNulls&&n[p]===null||zse(s,Hse(n[p],p,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const f=s.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),f.length>0?h+f:""}const U0="4.104.0";let PK=!1,TE,Gse,Kse,m4,Yse,Jse,qse,Xse,Zse;function CLe(t,e={auto:!1}){if(PK)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(TE)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${TE}'\``);PK=e.auto,TE=t.kind,Gse=t.fetch,Kse=t.FormData,m4=t.File,Yse=t.ReadableStream,Jse=t.getMultipartRequestOptions,qse=t.getDefaultAgent,Xse=t.fileFromPath,Zse=t.isFsReadStream}class TLe{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function DLe({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,a;try{n=fetch,r=Request,i=Response,a=Headers}catch(s){throw new Error(`this environment is missing the following Web Fetch API type: ${s.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(s,o)=>({...o,body:new TLe(s)}),getDefaultAgent:s=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:s=>!1}}const Qse=()=>{TE||CLe(DLe(),{auto:!0})};Qse();class Yn extends Error{}let kl=class p4 extends Yn{constructor(e,n,r,i){super(`${p4.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=n;const a=n;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new cR({message:r,cause:v4(n)});const a=n==null?void 0:n.error;return e===400?new eoe(e,a,r,i):e===401?new toe(e,a,r,i):e===403?new noe(e,a,r,i):e===404?new roe(e,a,r,i):e===409?new ioe(e,a,r,i):e===422?new aoe(e,a,r,i):e===429?new soe(e,a,r,i):e>=500?new ooe(e,a,r,i):new p4(e,a,r,i)}},hu=class extends kl{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},cR=class extends kl{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},dR=class extends cR{constructor({message:e}={}){super({message:e??"Request timed out."})}},eoe=class extends kl{},toe=class extends kl{},noe=class extends kl{},roe=class extends kl{},ioe=class extends kl{},aoe=class extends kl{},soe=class extends kl{},ooe=class extends kl{};class loe extends Yn{constructor(){super("Could not parse response content as the length limit was reached")}}class uoe extends Yn{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var HT=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Kv=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ru;let fR=class{constructor(){ru.set(this,void 0),this.buffer=new Uint8Array,HT(this,ru,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let a;for(;(a=kLe(this.buffer,Kv(this,ru,"f")))!=null;){if(a.carriage&&Kv(this,ru,"f")==null){HT(this,ru,a.index,"f");continue}if(Kv(this,ru,"f")!=null&&(a.index!==Kv(this,ru,"f")+1||a.carriage)){i.push(this.decodeText(this.buffer.slice(0,Kv(this,ru,"f")-1))),this.buffer=this.buffer.slice(Kv(this,ru,"f")),HT(this,ru,null,"f");continue}const s=Kv(this,ru,"f")!==null?a.preceding-1:a.preceding,o=this.decodeText(this.buffer.slice(0,s));i.push(o),this.buffer=this.buffer.slice(a.index),HT(this,ru,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Yn(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Yn(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Yn("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}};ru=new WeakMap;fR.NEWLINE_CHARS=new Set([`
`,"\r"]);fR.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kLe(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function PLe(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function coe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}let fN=class eE{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const s of ALe(e,n))if(!a){if(s.data.startsWith("[DONE]")){a=!0;continue}if(s.event===null||s.event.startsWith("response.")||s.event.startsWith("transcript.")){let o;try{o=JSON.parse(s.data)}catch(l){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),l}if(o&&o.error)throw new kl(void 0,o.error,void 0,boe(e.headers));yield o}else{let o;try{o=JSON.parse(s.data)}catch(l){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),l}if(s.event=="error")throw new kl(void 0,o.error,o.message,void 0);yield{event:s.event,data:o}}}a=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{a||n.abort()}}return new eE(i,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const s=new fR,o=coe(e);for await(const l of o)for(const c of s.decode(l))yield c;for(const l of s.flush())yield l}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const o of i())s||o&&(yield JSON.parse(o));s=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{s||n.abort()}}return new eE(a,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const s=r.next();e.push(s),n.push(s)}return a.shift()}});return[new eE(()=>i(e),this.controller),new eE(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new Yse({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:s}=await n.next();if(s)return i.close();const o=r.encode(JSON.stringify(a)+`
`);i.enqueue(o)}catch(a){i.error(a)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}};async function*ALe(t,e){if(!t.body)throw e.abort(),new Yn("Attempted to iterate over a response with no body");const n=new OLe,r=new fR,i=coe(t.body);for await(const a of RLe(i))for(const s of r.decode(a)){const o=n.decode(s);o&&(yield o)}for(const a of r.flush()){const s=n.decode(a);s&&(yield s)}}async function*RLe(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let a;for(;(a=PLe(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}let OLe=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=jLe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function jLe(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const doe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",foe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&hR(t),hR=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",ILe=t=>foe(t)||doe(t)||Zse(t);async function hoe(t,e,n){var i;if(t=await t,foe(t))return t;if(doe(t)){const a=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=hR(a)?[await a.arrayBuffer()]:[a];return new m4(s,e,n)}const r=await MLe(t);if(e||(e=$Le(t)??"unknown_file"),!(n!=null&&n.type)){const a=(i=r[0])==null?void 0:i.type;typeof a=="string"&&(n={...n,type:a})}return new m4(r,e,n)}async function MLe(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(hR(t))e.push(await t.arrayBuffer());else if(LLe(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${VLe(t)}`);return e}function VLe(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function $Le(t){var e;return CM(t.name)||CM(t.filename)||((e=CM(t.path))==null?void 0:e.split(/[\\/]/).pop())}const CM=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},LLe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",AK=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Hy=async t=>{const e=await FLe(t.body);return Jse(e,t)},FLe=async t=>{const e=new Kse;return await Promise.all(Object.entries(t||{}).map(([n,r])=>g4(e,n,r))),e},g4=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(ILe(n)){const r=await hoe(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>g4(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>g4(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var ww={},BLe=function(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},ULe=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},GT;Qse();async function moe(t){var s;const{response:e}=t;if(t.options.stream)return mg("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):fN.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(s=n==null?void 0:n.split(";")[0])==null?void 0:s.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const o=await e.json();return mg("response",e.status,e.url,e.headers,o),poe(o,e)}const a=await e.text();return mg("response",e.status,e.url,e.headers,a),a}function poe(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}let goe=class voe extends Promise{constructor(e,n=moe){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new voe(this.responsePromise,async n=>poe(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};class WLe{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:a}){this.baseURL=e,this.maxRetries=TM("maxRetries",n),this.timeout=TM("timeout",r),this.httpAgent=i,this.fetch=a??Gse}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...YLe(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${ZLe()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const a=i&&hR(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:n,...i,body:a}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var y;const r={...e},{method:i,path:a,query:s,headers:o={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:AK(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,c=this.calculateContentLength(l),f=this.buildURL(a,s);"timeout"in r&&TM("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??qse(f),m=r.timeout+1e3;typeof((y=h==null?void 0:h.options)==null?void 0:y.timeout)=="number"&&m>(h.options.timeout??0)&&(h.options.timeout=m),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const p=this.buildHeaders({options:r,headers:o,contentLength:c,retryCount:n});return{req:{method:i,...l&&{body:l},headers:p,...h&&{agent:h},signal:r.signal??null},url:f,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const a={};r&&(a["content-length"]=r);const s=this.defaultHeaders(e);return IK(a,s),IK(a,n),AK(e.body)&&TE!=="node"&&delete a["content-type"],YT(s,"x-stainless-retry-count")===void 0&&YT(n,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(i)),YT(s,"x-stainless-timeout")===void 0&&YT(n,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,n),a}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return kl.generate(e,n,r,i)}request(e,n=null){return new goe(this.makeRequest(e,n))}async makeRequest(e,n){var h,m;const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:a,url:s,timeout:o}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(a,{url:s,options:r}),mg("request",s,r,a.headers),(h=r.signal)!=null&&h.aborted)throw new hu;const l=new AbortController,c=await this.fetchWithTimeout(s,a,o,l).catch(v4);if(c instanceof Error){if((m=r.signal)!=null&&m.aborted)throw new hu;if(n)return this.retryRequest(r,n);throw c.name==="AbortError"?new dR:new cR({cause:c})}const f=boe(c.headers);if(!c.ok){if(n&&this.shouldRetry(c)){const _=`retrying, ${n} attempts remaining`;return mg(`response (error; ${_})`,c.status,s,f),this.retryRequest(r,n,f)}const p=await c.text().catch(_=>v4(_).message),v=JLe(p),y=v?void 0:p;throw mg(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,c.status,s,f,y),this.makeStatusError(c.status,v,y,f)}return{response:c,options:r,controller:l}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new zLe(this,r,e)}buildURL(e,n){const r=XLe(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return woe(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Yn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:a,...s}=n||{};a&&a.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),r),l={signal:i.signal,...s};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(o)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const a=r==null?void 0:r["retry-after-ms"];if(a){const o=parseFloat(a);Number.isNaN(o)||(i=o)}const s=r==null?void 0:r["retry-after"];if(s&&!i){const o=parseFloat(s);Number.isNaN(o)?i=Date.parse(s)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){const o=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,o)}return await t_(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,s=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return s*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${U0}`}}let yoe=class{constructor(e,n,r,i){GT.set(this,void 0),BLe(this,GT,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Yn("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,a]of r)e.url.searchParams.set(i,a);n.query=void 0,n.path=e.url.toString()}return await ULe(this,GT,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(GT=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}},zLe=class extends goe{constructor(e,n,r){super(n,async i=>new r(e,i.response,await moe(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}};const boe=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),HLe={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Qi=t=>typeof t=="object"&&t!==null&&!woe(t)&&Object.keys(t).every(e=>xoe(HLe,e)),GLe=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U0,"X-Stainless-OS":OK(Deno.build.os),"X-Stainless-Arch":RK(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U0,"X-Stainless-OS":OK(process.platform),"X-Stainless-Arch":RK(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=KLe();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function KLe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${a}.${s}`}}}return null}const RK=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",OK=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let jK;const YLe=()=>jK??(jK=GLe()),JLe=t=>{try{return JSON.parse(t)}catch{return}},qLe=/^[a-z][a-z0-9+.-]*:/i,XLe=t=>qLe.test(t),t_=t=>new Promise(e=>setTimeout(e,t)),TM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Yn(`${t} must be an integer`);if(e<0)throw new Yn(`${t} must be a positive integer`);return e},v4=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},KT=t=>{var e,n,r,i;if(typeof process<"u")return((e=ww==null?void 0:ww[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};function woe(t){if(!t)return!0;for(const e in t)return!1;return!0}function xoe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function IK(t,e){for(const n in e){if(!xoe(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}const MK=new Set(["authorization","api-key"]);function mg(t,...e){if(typeof process<"u"&&(ww==null?void 0:ww.DEBUG)==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const a={...r,headers:{...r.headers}};for(const s in r.headers)MK.has(s.toLowerCase())&&(a.headers[s]="REDACTED");return a}let i=null;for(const a in r)MK.has(a.toLowerCase())&&(i??(i={...r}),i[a]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const ZLe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),QLe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",eFe=t=>typeof(t==null?void 0:t.get)=="function",YT=(t,e)=>{var r;const n=e.toLowerCase();if(eFe(t)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,s,o)=>s+o.toUpperCase());for(const a of[e,n,e.toUpperCase(),i]){const s=t.get(a);if(s)return s}}for(const[i,a]of Object.entries(t))if(i.toLowerCase()===n)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},tFe=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function DM(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}let mR=class extends yoe{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}};class Za extends yoe{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}let qn=class{constructor(e){this._client=e}},Soe=class extends qn{list(e,n={},r){return Qi(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,nFe,{query:n,...r})}},pR=class extends qn{constructor(){super(...arguments),this.messages=new Soe(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return Qi(e)?this.list({},e):this._client.getAPIList("/chat/completions",gR,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class gR extends Za{}class nFe extends Za{}pR.ChatCompletionsPage=gR;pR.Messages=Soe;let vR=class extends qn{constructor(){super(...arguments),this.completions=new pR(this._client)}};vR.Completions=pR;vR.ChatCompletionsPage=gR;class Eoe extends qn{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Noe extends qn{create(e,n){return this._client.post("/audio/transcriptions",Hy({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class _oe extends qn{create(e,n){return this._client.post("/audio/translations",Hy({body:e,...n,__metadata:{model:e.model}}))}}class n_ extends qn{constructor(){super(...arguments),this.transcriptions=new Noe(this._client),this.translations=new _oe(this._client),this.speech=new Eoe(this._client)}}n_.Transcriptions=Noe;n_.Translations=_oe;n_.Speech=Eoe;let FL=class extends qn{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return Qi(e)?this.list({},e):this._client.getAPIList("/batches",BL,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}};class BL extends Za{}FL.BatchesPage=BL;var cd=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},qi=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},y4,bk,wk,tE,nE,xk,rE,im,iE,CP,TP,W0,Coe;class UL{constructor(){y4.add(this),this.controller=new AbortController,bk.set(this,void 0),wk.set(this,()=>{}),tE.set(this,()=>{}),nE.set(this,void 0),xk.set(this,()=>{}),rE.set(this,()=>{}),im.set(this,{}),iE.set(this,!1),CP.set(this,!1),TP.set(this,!1),W0.set(this,!1),cd(this,bk,new Promise((e,n)=>{cd(this,wk,e,"f"),cd(this,tE,n,"f")}),"f"),cd(this,nE,new Promise((e,n)=>{cd(this,xk,e,"f"),cd(this,rE,n,"f")}),"f"),qi(this,bk,"f").catch(()=>{}),qi(this,nE,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},qi(this,y4,"m",Coe).bind(this))},0)}_connected(){this.ended||(qi(this,wk,"f").call(this),this._emit("connect"))}get ended(){return qi(this,iE,"f")}get errored(){return qi(this,CP,"f")}get aborted(){return qi(this,TP,"f")}abort(){this.controller.abort()}on(e,n){return(qi(this,im,"f")[e]||(qi(this,im,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=qi(this,im,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(qi(this,im,"f")[e]||(qi(this,im,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{cd(this,W0,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){cd(this,W0,!0,"f"),await qi(this,nE,"f")}_emit(e,...n){if(qi(this,iE,"f"))return;e==="end"&&(cd(this,iE,!0,"f"),qi(this,xk,"f").call(this));const r=qi(this,im,"f")[e];if(r&&(qi(this,im,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!qi(this,W0,"f")&&!(r!=null&&r.length)&&Promise.reject(i),qi(this,tE,"f").call(this,i),qi(this,rE,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!qi(this,W0,"f")&&!(r!=null&&r.length)&&Promise.reject(i),qi(this,tE,"f").call(this,i),qi(this,rE,"f").call(this,i),this._emit("end")}}_emitFinal(){}}bk=new WeakMap,wk=new WeakMap,tE=new WeakMap,nE=new WeakMap,xk=new WeakMap,rE=new WeakMap,im=new WeakMap,iE=new WeakMap,CP=new WeakMap,TP=new WeakMap,W0=new WeakMap,y4=new WeakSet,Coe=function(e){if(cd(this,CP,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new hu),e instanceof hu)return cd(this,TP,!0,"f"),this._emit("abort",e);if(e instanceof Yn)return this._emit("error",e);if(e instanceof Error){const n=new Yn(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Yn(String(e)))};var On=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Zl=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Ls,b4,Of,Sk,dd,wy,lw,cy,DP,ou,Ek,Nk,DE,aE,sE,VK,$K,LK,FK,BK,UK,WK;class vd extends UL{constructor(){super(...arguments),Ls.add(this),b4.set(this,[]),Of.set(this,{}),Sk.set(this,{}),dd.set(this,void 0),wy.set(this,void 0),lw.set(this,void 0),cy.set(this,void 0),DP.set(this,void 0),ou.set(this,void 0),Ek.set(this,void 0),Nk.set(this,void 0),DE.set(this,void 0)}[(b4=new WeakMap,Of=new WeakMap,Sk=new WeakMap,dd=new WeakMap,wy=new WeakMap,lw=new WeakMap,cy=new WeakMap,DP=new WeakMap,ou=new WeakMap,Ek=new WeakMap,Nk=new WeakMap,DE=new WeakMap,Ls=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new vd;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=fN.fromReadableStream(e,this.controller);for await(const s of i)On(this,Ls,"m",aE).call(this,s);if((a=i.controller.signal)!=null&&a.aborted)throw new hu;return this._addRun(On(this,Ls,"m",sE).call(this))}toReadableStream(){return new fN(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i,a){const s=new vd;return s._run(()=>s._runToolAssistantStream(e,n,r,i,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i,a){var c;const s=a==null?void 0:a.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...i,stream:!0},l=await e.submitToolOutputs(n,r,o,{...a,signal:this.controller.signal});this._connected();for await(const f of l)On(this,Ls,"m",aE).call(this,f);if((c=l.controller.signal)!=null&&c.aborted)throw new hu;return this._addRun(On(this,Ls,"m",sE).call(this))}static createThreadAssistantStream(e,n,r){const i=new vd;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const a=new vd;return a._run(()=>a._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return On(this,Ek,"f")}currentRun(){return On(this,Nk,"f")}currentMessageSnapshot(){return On(this,dd,"f")}currentRunStepSnapshot(){return On(this,DE,"f")}async finalRunSteps(){return await this.done(),Object.values(On(this,Of,"f"))}async finalMessages(){return await this.done(),Object.values(On(this,Sk,"f"))}async finalRun(){if(await this.done(),!On(this,wy,"f"))throw Error("Final run was not received.");return On(this,wy,"f")}async _createThreadAssistantStream(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},s=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const l of s)On(this,Ls,"m",aE).call(this,l);if((o=s.controller.signal)!=null&&o.aborted)throw new hu;return this._addRun(On(this,Ls,"m",sE).call(this))}async _createAssistantStream(e,n,r,i){var l;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},o=await e.create(n,s,{...i,signal:this.controller.signal});this._connected();for await(const c of o)On(this,Ls,"m",aE).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new hu;return this._addRun(On(this,Ls,"m",sE).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let a=e[r];if(a==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof a=="string"&&typeof i=="string")a+=i;else if(typeof a=="number"&&typeof i=="number")a+=i;else if(DM(a)&&DM(i))a=this.accumulateDelta(a,i);else if(Array.isArray(a)&&Array.isArray(i)){if(a.every(s=>typeof s=="string"||typeof s=="number")){a.push(...i);continue}for(const s of i){if(!DM(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);const o=s.index;if(o==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=a[o];l==null?a.push(s):a[o]=this.accumulateDelta(l,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i,a){return await this._createToolAssistantStream(r,e,n,i,a)}}aE=function(e){if(!this.ended)switch(Zl(this,Ek,e,"f"),On(this,Ls,"m",LK).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":On(this,Ls,"m",WK).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":On(this,Ls,"m",$K).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":On(this,Ls,"m",VK).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},sE=function(){if(this.ended)throw new Yn("stream has ended, this shouldn't happen");if(!On(this,wy,"f"))throw Error("Final run has not been received");return On(this,wy,"f")},VK=function(e){const[n,r]=On(this,Ls,"m",BK).call(this,e,On(this,dd,"f"));Zl(this,dd,n,"f"),On(this,Sk,"f")[n.id]=n;for(const i of r){const a=n.content[i.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let a=i.text,s=n.content[i.index];if(s&&s.type=="text")this._emit("textDelta",a,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=On(this,lw,"f")){if(On(this,cy,"f"))switch(On(this,cy,"f").type){case"text":this._emit("textDone",On(this,cy,"f").text,On(this,dd,"f"));break;case"image_file":this._emit("imageFileDone",On(this,cy,"f").image_file,On(this,dd,"f"));break}Zl(this,lw,i.index,"f")}Zl(this,cy,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(On(this,lw,"f")!==void 0){const i=e.data.content[On(this,lw,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,On(this,dd,"f"));break;case"text":this._emit("textDone",i.text,On(this,dd,"f"));break}}On(this,dd,"f")&&this._emit("messageDone",e.data),Zl(this,dd,void 0,"f")}},$K=function(e){const n=On(this,Ls,"m",FK).call(this,e);switch(Zl(this,DE,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==On(this,DP,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(On(this,ou,"f")&&this._emit("toolCallDone",On(this,ou,"f")),Zl(this,DP,a.index,"f"),Zl(this,ou,n.step_details.tool_calls[a.index],"f"),On(this,ou,"f")&&this._emit("toolCallCreated",On(this,ou,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Zl(this,DE,void 0,"f"),e.data.step_details.type=="tool_calls"&&On(this,ou,"f")&&(this._emit("toolCallDone",On(this,ou,"f")),Zl(this,ou,void 0,"f")),this._emit("runStepDone",e.data,n);break}},LK=function(e){On(this,b4,"f").push(e),this._emit("event",e)},FK=function(e){switch(e.event){case"thread.run.step.created":return On(this,Of,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=On(this,Of,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=vd.accumulateDelta(n,r.delta);On(this,Of,"f")[e.data.id]=i}return On(this,Of,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":On(this,Of,"f")[e.data.id]=e.data;break}if(On(this,Of,"f")[e.data.id])return On(this,Of,"f")[e.data.id];throw new Error("No snapshot available")},BK=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const a of i.delta.content)if(a.index in n.content){let s=n.content[a.index];n.content[a.index]=On(this,Ls,"m",UK).call(this,a,s)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},UK=function(e,n){return vd.accumulateDelta(n,e)},WK=function(e){switch(Zl(this,Nk,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Zl(this,wy,e.data,"f"),On(this,ou,"f")&&(this._emit("toolCallDone",On(this,ou,"f")),Zl(this,ou,void 0,"f"));break}};class WL extends qn{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Qi(e)?this.list({},e):this._client.getAPIList("/assistants",zL,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class zL extends Za{}WL.AssistantsPage=zL;function zK(t){return typeof t.parse=="function"}const xw=t=>(t==null?void 0:t.role)==="assistant",Toe=t=>(t==null?void 0:t.role)==="function",Doe=t=>(t==null?void 0:t.role)==="tool";function rFe(t,e){const n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),n}function HL(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function iFe(t,{parser:e,callback:n}){const r={...t};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:n,enumerable:!1}}),r}function r_(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function aFe(t,e){return!e||!koe(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:GL(t,e)}function GL(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new loe;if(r.finish_reason==="content_filter")throw new uoe;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(a=>oFe(e,a)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?sFe(e,r.message.content):null}}});return{...t,choices:n}}function sFe(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function oFe(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:r_(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function lFe(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return r_(n)||(n==null?void 0:n.function.strict)||!1}function koe(t){var e;return HL(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>r_(n)||n.type==="function"&&n.function.strict===!0))??!1}function uFe(t){for(const e of t??[]){if(e.type!=="function")throw new Yn(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Yn(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var pl=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},to,w4,kP,x4,S4,E4,Poe,N4;const HK=10;class Aoe extends UL{constructor(){super(...arguments),to.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(Toe(e)||Doe(e))&&e.content)this._emit("functionCallResult",e.content);else if(xw(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(xw(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Yn("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),pl(this,to,"m",w4).call(this)}async finalMessage(){return await this.done(),pl(this,to,"m",kP).call(this)}async finalFunctionCall(){return await this.done(),pl(this,to,"m",x4).call(this)}async finalFunctionCallResult(){return await this.done(),pl(this,to,"m",S4).call(this)}async totalUsage(){return await this.done(),pl(this,to,"m",E4).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=pl(this,to,"m",kP).call(this);n&&this._emit("finalMessage",n);const r=pl(this,to,"m",w4).call(this);r&&this._emit("finalContent",r);const i=pl(this,to,"m",x4).call(this);i&&this._emit("finalFunctionCall",i);const a=pl(this,to,"m",S4).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",pl(this,to,"m",E4).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),pl(this,to,"m",Poe).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(GL(a,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var m;const i="function",{function_call:a="auto",stream:s,...o}=n,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:c=HK}=r||{},f={};for(const p of n.functions)f[p.name||p.function.name]=p;const h=n.functions.map(p=>({name:p.name||p.function.name,parameters:p.parameters,description:p.description}));for(const p of n.messages)this._addMessage(p,!1);for(let p=0;p<c;++p){const y=(m=(await this._createChatCompletion(e,{...o,function_call:a,functions:h,messages:[...this.messages]},r)).choices[0])==null?void 0:m.message;if(!y)throw new Yn("missing message in ChatCompletion response");if(!y.function_call)return;const{name:x,arguments:S}=y.function_call,_=f[x];if(_){if(l&&l!==x){const O=`Invalid function_call: ${JSON.stringify(x)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:x,content:O});continue}}else{const O=`Invalid function_call: ${JSON.stringify(x)}. Available options are: ${h.map(A=>JSON.stringify(A.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:x,content:O});continue}let N;try{N=zK(_)?await _.parse(S):S}catch(O){this._addMessage({role:i,name:x,content:O instanceof Error?O.message:String(O)});continue}const k=await _.function(N,this),P=pl(this,to,"m",N4).call(this,k);if(this._addMessage({role:i,name:x,content:P}),l)return}}async _runTools(e,n,r){var p,v,y;const i="tool",{tool_choice:a="auto",stream:s,...o}=n,l=typeof a!="string"&&((p=a==null?void 0:a.function)==null?void 0:p.name),{maxChatCompletions:c=HK}=r||{},f=n.tools.map(x=>{if(r_(x)){if(!x.$callback)throw new Yn("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:x.$callback,name:x.function.name,description:x.function.description||"",parameters:x.function.parameters,parse:x.$parseRaw,strict:!0}}}return x}),h={};for(const x of f)x.type==="function"&&(h[x.function.name||x.function.function.name]=x.function);const m="tools"in n?f.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description,strict:x.function.strict}}:x):void 0;for(const x of n.messages)this._addMessage(x,!1);for(let x=0;x<c;++x){const _=(v=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:m,messages:[...this.messages]},r)).choices[0])==null?void 0:v.message;if(!_)throw new Yn("missing message in ChatCompletion response");if(!((y=_.tool_calls)!=null&&y.length))return;for(const N of _.tool_calls){if(N.type!=="function")continue;const k=N.id,{name:P,arguments:O}=N.function,A=h[P];if(A){if(l&&l!==P){const W=`Invalid tool_call: ${JSON.stringify(P)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:k,content:W});continue}}else{const W=`Invalid tool_call: ${JSON.stringify(P)}. Available options are: ${Object.keys(h).map(Y=>JSON.stringify(Y)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:k,content:W});continue}let T;try{T=zK(A)?await A.parse(O):O}catch(W){const Y=W instanceof Error?W.message:String(W);this._addMessage({role:i,tool_call_id:k,content:Y});continue}const L=await A.function(T,this),B=pl(this,to,"m",N4).call(this,L);if(this._addMessage({role:i,tool_call_id:k,content:B}),l)return}}}}to=new WeakSet,w4=function(){return pl(this,to,"m",kP).call(this).content??null},kP=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(xw(n)){const{function_call:r,...i}=n,a={...i,content:n.content??null,refusal:n.refusal??null};return r&&(a.function_call=r),a}}throw new Yn("stream ended without producing a ChatCompletionMessage with role=assistant")},x4=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(xw(i)&&(i!=null&&i.function_call))return i.function_call;if(xw(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.at(-1))==null?void 0:n.function}},S4=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Toe(n)&&n.content!=null||Doe(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(a=>a.type==="function"&&a.id===n.tool_call_id))}))return n.content}},E4=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Poe=function(e){if(e.n!=null&&e.n>1)throw new Yn("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},N4=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class hN extends Aoe{static runFunctions(e,n,r){const i=new hN,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,a)),i}static runTools(e,n,r){const i=new hN,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,a)),i}_addMessage(e,n=!0){super._addMessage(e,n),xw(e)&&e.content&&this._emit("content",e.content)}}const Roe=1,Ooe=2,joe=4,Ioe=8,Moe=16,Voe=32,$oe=64,Loe=128,Foe=256,Boe=Loe|Foe,Uoe=Moe|Voe|Boe|$oe,Woe=Roe|Ooe|Uoe,zoe=joe|Ioe,cFe=Woe|zoe,ds={STR:Roe,NUM:Ooe,ARR:joe,OBJ:Ioe,NULL:Moe,BOOL:Voe,NAN:$oe,INFINITY:Loe,MINUS_INFINITY:Foe,INF:Boe,SPECIAL:Uoe,ATOM:Woe,COLLECTION:zoe,ALL:cFe};class dFe extends Error{}class fFe extends Error{}function hFe(t,e=ds.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return mFe(t.trim(),e)}const mFe=(t,e)=>{const n=t.length;let r=0;const i=m=>{throw new dFe(`${m} at position ${r}`)},a=m=>{throw new fFe(`${m} at position ${r}`)},s=()=>(h(),r>=n&&i("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?c():t.substring(r,r+4)==="null"||ds.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||ds.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||ds.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||ds.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||ds.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||ds.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),o=()=>{const m=r;let p=!1;for(r++;r<n&&(t[r]!=='"'||p&&t[r-1]==="\\");)p=t[r]==="\\"?!p:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(p)))}catch(v){a(String(v))}else if(ds.STR&e)try{return JSON.parse(t.substring(m,r-Number(p))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,h();const m={};try{for(;t[r]!=="}";){if(h(),r>=n&&ds.OBJ&e)return m;const p=o();h(),r++;try{const v=s();Object.defineProperty(m,p,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(ds.OBJ&e)return m;throw v}h(),t[r]===","&&r++}}catch{if(ds.OBJ&e)return m;i("Expected '}' at end of object")}return r++,m},c=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(s()),h(),t[r]===","&&r++}catch{if(ds.ARR&e)return m;i("Expected ']' at end of array")}return r++,m},f=()=>{if(r===0){t==="-"&&ds.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(ds.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(p))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(ds.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&ds.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(v){a(String(v))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return s()},GK=t=>hFe(t,ds.ALL^ds.NUM);var y0=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},gi=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ha,Qh,b0,Lp,kM,JT,PM,AM,RM,qT,OM,KK;class mN extends Aoe{constructor(e){super(),Ha.add(this),Qh.set(this,void 0),b0.set(this,void 0),Lp.set(this,void 0),y0(this,Qh,e,"f"),y0(this,b0,[],"f")}get currentChatCompletionSnapshot(){return gi(this,Lp,"f")}static fromReadableStream(e){const n=new mN(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new mN(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var s;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),gi(this,Ha,"m",kM).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of a)gi(this,Ha,"m",PM).call(this,o);if((s=a.controller.signal)!=null&&s.aborted)throw new hu;return this._addChatCompletion(gi(this,Ha,"m",qT).call(this))}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),gi(this,Ha,"m",kM).call(this),this._connected();const i=fN.fromReadableStream(e,this.controller);let a;for await(const o of i)a&&a!==o.id&&this._addChatCompletion(gi(this,Ha,"m",qT).call(this)),gi(this,Ha,"m",PM).call(this,o),a=o.id;if((s=i.controller.signal)!=null&&s.aborted)throw new hu;return this._addChatCompletion(gi(this,Ha,"m",qT).call(this))}[(Qh=new WeakMap,b0=new WeakMap,Lp=new WeakMap,Ha=new WeakSet,kM=function(){this.ended||y0(this,Lp,void 0,"f")},JT=function(n){let r=gi(this,b0,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},gi(this,b0,"f")[n.index]=r,r)},PM=function(n){var i,a,s,o,l,c,f,h,m,p,v,y,x,S,_;if(this.ended)return;const r=gi(this,Ha,"m",KK).call(this,n);this._emit("chunk",n,r);for(const N of n.choices){const k=r.choices[N.index];N.delta.content!=null&&((i=k.message)==null?void 0:i.role)==="assistant"&&((a=k.message)!=null&&a.content)&&(this._emit("content",N.delta.content,k.message.content),this._emit("content.delta",{delta:N.delta.content,snapshot:k.message.content,parsed:k.message.parsed})),N.delta.refusal!=null&&((s=k.message)==null?void 0:s.role)==="assistant"&&((o=k.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:N.delta.refusal,snapshot:k.message.refusal}),((l=N.logprobs)==null?void 0:l.content)!=null&&((c=k.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=N.logprobs)==null?void 0:f.content,snapshot:((h=k.logprobs)==null?void 0:h.content)??[]}),((m=N.logprobs)==null?void 0:m.refusal)!=null&&((p=k.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(v=N.logprobs)==null?void 0:v.refusal,snapshot:((y=k.logprobs)==null?void 0:y.refusal)??[]});const P=gi(this,Ha,"m",JT).call(this,k);k.finish_reason&&(gi(this,Ha,"m",RM).call(this,k),P.current_tool_call_index!=null&&gi(this,Ha,"m",AM).call(this,k,P.current_tool_call_index));for(const O of N.delta.tool_calls??[])P.current_tool_call_index!==O.index&&(gi(this,Ha,"m",RM).call(this,k),P.current_tool_call_index!=null&&gi(this,Ha,"m",AM).call(this,k,P.current_tool_call_index)),P.current_tool_call_index=O.index;for(const O of N.delta.tool_calls??[]){const A=(x=k.message.tool_calls)==null?void 0:x[O.index];A!=null&&A.type&&((A==null?void 0:A.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(S=A.function)==null?void 0:S.name,index:O.index,arguments:A.function.arguments,parsed_arguments:A.function.parsed_arguments,arguments_delta:((_=O.function)==null?void 0:_.arguments)??""}):(A==null||A.type,void 0))}}},AM=function(n,r){var s,o,l;if(gi(this,Ha,"m",JT).call(this,n).done_tool_calls.has(r))return;const a=(s=n.message.tool_calls)==null?void 0:s[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(o=gi(this,Qh,"f"))==null?void 0:o.tools)==null?void 0:l.find(f=>f.type==="function"&&f.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:r_(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},RM=function(n){var i,a;const r=gi(this,Ha,"m",JT).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=gi(this,Ha,"m",OM).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(a=n.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},qT=function(){if(this.ended)throw new Yn("stream has ended, this shouldn't happen");const n=gi(this,Lp,"f");if(!n)throw new Yn("request ended without sending any chunks");return y0(this,Lp,void 0,"f"),y0(this,b0,[],"f"),pFe(n,gi(this,Qh,"f"))},OM=function(){var r;const n=(r=gi(this,Qh,"f"))==null?void 0:r.response_format;return HL(n)?n:null},KK=function(n){var r,i,a,s;let o=gi(this,Lp,"f");const{choices:l,...c}=n;o?Object.assign(o,c):o=y0(this,Lp,{...c,choices:[]},"f");for(const{delta:f,finish_reason:h,index:m,logprobs:p=null,...v}of n.choices){let y=o.choices[m];if(y||(y=o.choices[m]={finish_reason:h,index:m,message:{},logprobs:p,...v}),p)if(!y.logprobs)y.logprobs=Object.assign({},p);else{const{content:O,refusal:A,...T}=p;Object.assign(y.logprobs,T),O&&((r=y.logprobs).content??(r.content=[]),y.logprobs.content.push(...O)),A&&((i=y.logprobs).refusal??(i.refusal=[]),y.logprobs.refusal.push(...A))}if(h&&(y.finish_reason=h,gi(this,Qh,"f")&&koe(gi(this,Qh,"f")))){if(h==="length")throw new loe;if(h==="content_filter")throw new uoe}if(Object.assign(y,v),!f)continue;const{content:x,refusal:S,function_call:_,role:N,tool_calls:k,...P}=f;if(Object.assign(y.message,P),S&&(y.message.refusal=(y.message.refusal||"")+S),N&&(y.message.role=N),_&&(y.message.function_call?(_.name&&(y.message.function_call.name=_.name),_.arguments&&((a=y.message.function_call).arguments??(a.arguments=""),y.message.function_call.arguments+=_.arguments)):y.message.function_call=_),x&&(y.message.content=(y.message.content||"")+x,!y.message.refusal&&gi(this,Ha,"m",OM).call(this)&&(y.message.parsed=GK(y.message.content))),k){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:O,id:A,type:T,function:L,...B}of k){const W=(s=y.message.tool_calls)[O]??(s[O]={});Object.assign(W,B),A&&(W.id=A),T&&(W.type=T),L&&(W.function??(W.function={name:L.name??"",arguments:""})),L!=null&&L.name&&(W.function.name=L.name),L!=null&&L.arguments&&(W.function.arguments+=L.arguments,lFe(gi(this,Qh,"f"),W)&&(W.function.parsed_arguments=GK(W.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new fN(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function pFe(t,e){const{id:n,choices:r,created:i,model:a,system_fingerprint:s,...o}=t,l={...o,id:n,choices:r.map(({message:c,finish_reason:f,index:h,logprobs:m,...p})=>{if(!f)throw new Yn(`missing finish_reason for choice ${h}`);const{content:v=null,function_call:y,tool_calls:x,...S}=c,_=c.role;if(!_)throw new Yn(`missing role for choice ${h}`);if(y){const{arguments:N,name:k}=y;if(N==null)throw new Yn(`missing function_call.arguments for choice ${h}`);if(!k)throw new Yn(`missing function_call.name for choice ${h}`);return{...p,message:{content:v,function_call:{arguments:N,name:k},role:_,refusal:c.refusal??null},finish_reason:f,index:h,logprobs:m}}return x?{...p,index:h,finish_reason:f,logprobs:m,message:{...S,role:_,content:v,refusal:c.refusal??null,tool_calls:x.map((N,k)=>{const{function:P,type:O,id:A,...T}=N,{arguments:L,name:B,...W}=P||{};if(A==null)throw new Yn(`missing choices[${h}].tool_calls[${k}].id
${XT(t)}`);if(O==null)throw new Yn(`missing choices[${h}].tool_calls[${k}].type
${XT(t)}`);if(B==null)throw new Yn(`missing choices[${h}].tool_calls[${k}].function.name
${XT(t)}`);if(L==null)throw new Yn(`missing choices[${h}].tool_calls[${k}].function.arguments
${XT(t)}`);return{...T,id:A,type:O,function:{...W,name:B,arguments:L}}})}}:{...p,message:{...S,content:v,role:_,refusal:c.refusal??null},finish_reason:f,index:h,logprobs:m}}),created:i,model:a,object:"chat.completion",...s?{system_fingerprint:s}:{}};return aFe(l,e)}function XT(t){return JSON.stringify(t)}class Sw extends mN{static fromReadableStream(e){const n=new Sw(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new Sw(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,a)),i}static runTools(e,n,r){const i=new Sw(n),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,a)),i}}let Hoe=class extends qn{parse(e,n){return uFe(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>GL(r,e))}runFunctions(e,n){return e.stream?Sw.runFunctions(this._client,e,n):hN.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Sw.runTools(this._client,e,n):hN.runTools(this._client,e,n)}stream(e,n){return mN.createChatCompletion(this._client,e,n)}};class _4 extends qn{constructor(){super(...arguments),this.completions=new Hoe(this._client)}}(function(t){t.Completions=Hoe})(_4||(_4={}));class Goe extends qn{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Koe extends qn{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class yR extends qn{constructor(){super(...arguments),this.sessions=new Goe(this._client),this.transcriptionSessions=new Koe(this._client)}}yR.Sessions=Goe;yR.TranscriptionSessions=Koe;let KL=class extends qn{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Qi(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,YL,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}};class YL extends Za{}KL.MessagesPage=YL;class JL extends qn{retrieve(e,n,r,i={},a){return Qi(i)?this.retrieve(e,n,r,{},i):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,n,r={},i){return Qi(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,qL,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class qL extends Za{}JL.RunStepsPage=qL;let i_=class extends qn{constructor(){super(...arguments),this.steps=new JL(this._client)}create(e,n,r){const{include:i,...a}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Qi(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,XL,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}createAndStream(e,n,r){return vd.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:s}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=s.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await t_(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return vd.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,i){const a=await this.submitToolOutputs(e,n,r,i);return await this.poll(e,a.id,i)}submitToolOutputsStream(e,n,r,i){return vd.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,i)}};class XL extends Za{}i_.RunsPage=XL;i_.Steps=JL;i_.RunStepsPage=qL;class ux extends qn{constructor(){super(...arguments),this.runs=new i_(this._client),this.messages=new KL(this._client)}create(e={},n){return Qi(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return vd.createThreadAssistantStream(e,this._client.beta.threads,n)}}ux.Runs=i_;ux.RunsPage=XL;ux.Messages=KL;ux.MessagesPage=YL;let cx=class extends qn{constructor(){super(...arguments),this.realtime=new yR(this._client),this.chat=new _4(this._client),this.assistants=new WL(this._client),this.threads=new ux(this._client)}};cx.Realtime=yR;cx.Assistants=WL;cx.AssistantsPage=zL;cx.Threads=ux;let Yoe=class extends qn{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}};class Joe extends qn{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let bR=class extends qn{constructor(){super(...arguments),this.content=new Joe(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,Hy({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return Qi(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,ZL,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class ZL extends Za{}bR.FileListResponsesPage=ZL;bR.Content=Joe;class a_ extends qn{constructor(){super(...arguments),this.files=new bR(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return Qi(e)?this.list({},e):this._client.getAPIList("/containers",QL,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class QL extends Za{}a_.ContainerListResponsesPage=QL;a_.Files=bR;a_.FileListResponsesPage=ZL;class qoe extends qn{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&mg("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?a:(mg("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(s=>(s&&s.data&&s.data.forEach(o=>{const l=o.embedding;o.embedding=tFe(l)}),s)))}}class eF extends qn{retrieve(e,n,r,i){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,i)}list(e,n,r={},i){return Qi(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,tF,{query:r,...i})}}class tF extends Za{}eF.OutputItemListResponsesPage=tF;class s_ extends qn{constructor(){super(...arguments),this.outputItems=new eF(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return Qi(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,nF,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class nF extends Za{}s_.RunListResponsesPage=nF;s_.OutputItems=eF;s_.OutputItemListResponsesPage=tF;class o_ extends qn{constructor(){super(...arguments),this.runs=new s_(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return Qi(e)?this.list({},e):this._client.getAPIList("/evals",rF,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class rF extends Za{}o_.EvalListResponsesPage=rF;o_.Runs=s_;o_.RunListResponsesPage=nF;let iF=class extends qn{create(e,n){return this._client.post("/files",Hy({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return Qi(e)?this.list({},e):this._client.getAPIList("/files",aF,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let s=await this.retrieve(e);for(;!s.status||!i.has(s.status);)if(await t_(n),s=await this.retrieve(e),Date.now()-a>r)throw new dR({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};class aF extends Za{}iF.FileObjectsPage=aF;class Xoe extends qn{}let Zoe=class extends qn{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class sF extends qn{constructor(){super(...arguments),this.graders=new Zoe(this._client)}}sF.Graders=Zoe;class oF extends qn{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,lF,{body:n,method:"post",...r})}retrieve(e,n={},r){return Qi(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class lF extends mR{}oF.PermissionCreateResponsesPage=lF;let wR=class extends qn{constructor(){super(...arguments),this.permissions=new oF(this._client)}};wR.Permissions=oF;wR.PermissionCreateResponsesPage=lF;class uF extends qn{list(e,n={},r){return Qi(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,cF,{query:n,...r})}}class cF extends Za{}uF.FineTuningJobCheckpointsPage=cF;class dx extends qn{constructor(){super(...arguments),this.checkpoints=new uF(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return Qi(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",dF,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return Qi(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,fF,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class dF extends Za{}class fF extends Za{}dx.FineTuningJobsPage=dF;dx.FineTuningJobEventsPage=fF;dx.Checkpoints=uF;dx.FineTuningJobCheckpointsPage=cF;class Ug extends qn{constructor(){super(...arguments),this.methods=new Xoe(this._client),this.jobs=new dx(this._client),this.checkpoints=new wR(this._client),this.alpha=new sF(this._client)}}Ug.Methods=Xoe;Ug.Jobs=dx;Ug.FineTuningJobsPage=dF;Ug.FineTuningJobEventsPage=fF;Ug.Checkpoints=wR;Ug.Alpha=sF;class Qoe extends qn{}class hF extends qn{constructor(){super(...arguments),this.graderModels=new Qoe(this._client)}}hF.GraderModels=Qoe;class ele extends qn{createVariation(e,n){return this._client.post("/images/variations",Hy({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",Hy({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}let mF=class extends qn{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",pF,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}};class pF extends mR{}mF.ModelsPage=pF;class tle extends qn{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function gFe(t,e){return!e||!yFe(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:nle(t,e)}function nle(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:xFe(e,i)};if(i.type==="message"){const a=i.content.map(s=>s.type==="output_text"?{...s,parsed:vFe(e,s.text)}:s);return{...i,content:a}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||rle(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const a of i.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function vFe(t,e){var n,r,i,a;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((a=t.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function yFe(t){var e;return!!HL((e=t.text)==null?void 0:e.format)}function bFe(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function wFe(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function xFe(t,e){const n=wFe(t.tools??[],e.name);return{...e,...e,parsed_arguments:bFe(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function rle(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class ile extends qn{list(e,n={},r){return Qi(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,EFe,{query:n,...r})}}var w0=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Fp=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},x0,ZT,Bp,QT,YK,JK,qK,XK;class gF extends UL{constructor(e){super(),x0.add(this),ZT.set(this,void 0),Bp.set(this,void 0),QT.set(this,void 0),w0(this,ZT,e,"f")}static createResponse(e,n,r){const i=new gF(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Fp(this,x0,"m",YK).call(this);let a,s=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of a)Fp(this,x0,"m",JK).call(this,l,s);if((o=a.controller.signal)!=null&&o.aborted)throw new hu;return Fp(this,x0,"m",qK).call(this)}[(ZT=new WeakMap,Bp=new WeakMap,QT=new WeakMap,x0=new WeakSet,YK=function(){this.ended||w0(this,Bp,void 0,"f")},JK=function(n,r){if(this.ended)return;const i=(s,o)=>{(r==null||o.sequence_number>r)&&this._emit(s,o)},a=Fp(this,x0,"m",XK).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const s=a.output[n.output_index];if(!s)throw new Yn(`missing output at index ${n.output_index}`);if(s.type==="message"){const o=s.content[n.content_index];if(!o)throw new Yn(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new Yn(`expected content to be 'output_text', got ${o.type}`);i("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const s=a.output[n.output_index];if(!s)throw new Yn(`missing output at index ${n.output_index}`);s.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:i(n.type,n);break}},qK=function(){if(this.ended)throw new Yn("stream has ended, this shouldn't happen");const n=Fp(this,Bp,"f");if(!n)throw new Yn("request ended without sending any events");w0(this,Bp,void 0,"f");const r=SFe(n,Fp(this,ZT,"f"));return w0(this,QT,r,"f"),r},XK=function(n){let r=Fp(this,Bp,"f");if(!r){if(n.type!=="response.created")throw new Yn(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=w0(this,Bp,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new Yn(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new Yn(`missing output at index ${n.output_index}`);if(i.type==="message"){const a=i.content[n.content_index];if(!a)throw new Yn(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Yn(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new Yn(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{w0(this,Bp,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Fp(this,QT,"f");if(!e)throw new Yn("stream ended without producing a ChatCompletion");return e}}function SFe(t,e){return gFe(t,e)}class vF extends qn{constructor(){super(...arguments),this.inputItems=new ile(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&rle(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>nle(r,e))}stream(e,n){return gF.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class EFe extends Za{}vF.InputItems=ile;class ale extends qn{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,Hy({body:n,...r}))}}class yF extends qn{constructor(){super(...arguments),this.parts=new ale(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}yF.Parts=ale;const NFe=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};let xR=class extends qn{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Qi(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,SR,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(e,n,{...r,headers:i}).withResponse(),s=a.data;switch(s.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await t_(o);break;case"failed":case"completed":return s}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,bF,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}};class SR extends Za{}class bF extends mR{}xR.VectorStoreFilesPage=SR;xR.FileContentResponsesPage=bF;class sle extends qn{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r={},i){return Qi(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,SR,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:s}=await this.retrieve(e,n,{...r,headers:i}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=s.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await t_(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(i==null?void 0:i.maxConcurrency)??5,s=Math.min(a,n.length),o=this._client,l=n.values(),c=[...r];async function f(m){for(let p of m){const v=await o.files.create({file:p,purpose:"assistants"},i);c.push(v.id)}}const h=Array(s).fill(l).map(f);return await NFe(h),await this.createAndPoll(e,{file_ids:c})}}class Wg extends qn{constructor(){super(...arguments),this.files=new xR(this._client),this.fileBatches=new sle(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Qi(e)?this.list({},e):this._client.getAPIList("/vector_stores",wF,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,xF,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class wF extends Za{}class xF extends mR{}Wg.VectorStoresPage=wF;Wg.VectorStoreSearchResponsesPage=xF;Wg.Files=xR;Wg.VectorStoreFilesPage=SR;Wg.FileContentResponsesPage=bF;Wg.FileBatches=sle;var ole;let Qn=class extends WLe{constructor({baseURL:e=KT("OPENAI_BASE_URL"),apiKey:n=KT("OPENAI_API_KEY"),organization:r=KT("OPENAI_ORG_ID")??null,project:i=KT("OPENAI_PROJECT_ID")??null,...a}={}){if(n===void 0)throw new Yn("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:n,organization:r,project:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&QLe())throw new Yn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new Yoe(this),this.chat=new vR(this),this.embeddings=new qoe(this),this.files=new iF(this),this.images=new ele(this),this.audio=new n_(this),this.moderations=new tle(this),this.models=new mF(this),this.fineTuning=new Ug(this),this.graders=new hF(this),this.vectorStores=new Wg(this),this.beta=new cx(this),this.batches=new FL(this),this.uploads=new yF(this),this.responses=new vF(this),this.evals=new o_(this),this.containers=new a_(this),this._options=s,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return _Le(e,{arrayFormat:"brackets"})}};ole=Qn;Qn.OpenAI=ole;Qn.DEFAULT_TIMEOUT=6e5;Qn.OpenAIError=Yn;Qn.APIError=kl;Qn.APIConnectionError=cR;Qn.APIConnectionTimeoutError=dR;Qn.APIUserAbortError=hu;Qn.NotFoundError=roe;Qn.ConflictError=ioe;Qn.RateLimitError=soe;Qn.BadRequestError=eoe;Qn.AuthenticationError=toe;Qn.InternalServerError=ooe;Qn.PermissionDeniedError=noe;Qn.UnprocessableEntityError=aoe;Qn.toFile=hoe;Qn.fileFromPath=Xse;Qn.Completions=Yoe;Qn.Chat=vR;Qn.ChatCompletionsPage=gR;Qn.Embeddings=qoe;Qn.Files=iF;Qn.FileObjectsPage=aF;Qn.Images=ele;Qn.Audio=n_;Qn.Moderations=tle;Qn.Models=mF;Qn.ModelsPage=pF;Qn.FineTuning=Ug;Qn.Graders=hF;Qn.VectorStores=Wg;Qn.VectorStoresPage=wF;Qn.VectorStoreSearchResponsesPage=xF;Qn.Beta=cx;Qn.Batches=FL;Qn.BatchesPage=BL;Qn.Uploads=yF;Qn.Responses=vF;Qn.Evals=o_;Qn.EvalListResponsesPage=rF;Qn.Containers=a_;Qn.ContainerListResponsesPage=QL;const _Fe={},ZK=t=>{let e;const n=new Set,r=(f,h)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const p=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(v=>v(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(_Fe?"development":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},lle=t=>t?ZK(t):ZK;var ule={exports:{}},cle={},dle={exports:{}},fle={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=R,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function n(N){{for(var k=arguments.length,P=new Array(k>1?k-1:0),O=1;O<k;O++)P[O-1]=arguments[O];r("error",N,P)}}function r(N,k,P){{var O=e.ReactDebugCurrentFrame,A=O.getStackAddendum();A!==""&&(k+="%s",P=P.concat([A]));var T=P.map(function(L){return String(L)});T.unshift("Warning: "+k),Function.prototype.apply.call(console[N],console,T)}}function i(N,k){return N===k&&(N!==0||1/N===1/k)||N!==N&&k!==k}var a=typeof Object.is=="function"?Object.is:i,s=t.useState,o=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue,f=!1,h=!1;function m(N,k,P){f||t.startTransition!==void 0&&(f=!0,n("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var O=k();if(!h){var A=k();a(O,A)||(n("The result of getSnapshot should be cached to avoid an infinite loop"),h=!0)}var T=s({inst:{value:O,getSnapshot:k}}),L=T[0].inst,B=T[1];return l(function(){L.value=O,L.getSnapshot=k,p(L)&&B({inst:L})},[N,O,k]),o(function(){p(L)&&B({inst:L});var W=function(){p(L)&&B({inst:L})};return N(W)},[N]),c(O),O}function p(N){var k=N.getSnapshot,P=N.value;try{var O=k();return!a(P,O)}catch{return!0}}function v(N,k,P){return k()}var y=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x=!y,S=x?v:m,_=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:S;fle.useSyncExternalStore=_,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();dle.exports=fle;var CFe=dle.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=R,e=CFe;function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,l=t.useDebugValue;function c(f,h,m,p,v){var y=a(null),x;y.current===null?(x={hasValue:!1,value:null},y.current=x):x=y.current;var S=o(function(){var P=!1,O,A,T=function(Y){if(!P){P=!0,O=Y;var V=p(Y);if(v!==void 0&&x.hasValue){var I=x.value;if(v(I,V))return A=I,I}return A=V,V}var H=O,q=A;if(r(H,Y))return q;var F=p(Y);return v!==void 0&&v(q,F)?q:(O=Y,A=F,F)},L=m===void 0?null:m,B=function(){return T(h())},W=L===null?void 0:function(){return T(L())};return[B,W]},[h,m,p,v]),_=S[0],N=S[1],k=i(f,_,N);return s(function(){x.hasValue=!0,x.value=k},[k]),l(k),k}cle.useSyncExternalStoreWithSelector=c,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();ule.exports=cle;var TFe=ule.exports;const hle=gc(TFe),mle={},{useDebugValue:DFe}=it,{useSyncExternalStoreWithSelector:kFe}=hle;let QK=!1;const PFe=t=>t;function AFe(t,e=PFe,n){(mle?"development":void 0)!=="production"&&n&&!QK&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),QK=!0);const r=kFe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return DFe(r),r}const eY=t=>{(mle?"development":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?lle(t):t,n=(r,i)=>AFe(e,r,i);return Object.assign(n,e),n},Xf=t=>t?eY(t):eY;function Oi(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}function RFe(t){return nn({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.854 12.854c-0-0-0-0-0-0l-4.854-4.854 4.854-4.854c0-0 0-0 0-0 0.052-0.052 0.090-0.113 0.114-0.178 0.066-0.178 0.028-0.386-0.114-0.529l-2.293-2.293c-0.143-0.143-0.351-0.181-0.529-0.114-0.065 0.024-0.126 0.062-0.178 0.114 0 0-0 0-0 0l-4.854 4.854-4.854-4.854c-0-0-0-0-0-0-0.052-0.052-0.113-0.090-0.178-0.114-0.178-0.066-0.386-0.029-0.529 0.114l-2.293 2.293c-0.143 0.143-0.181 0.351-0.114 0.529 0.024 0.065 0.062 0.126 0.114 0.178 0 0 0 0 0 0l4.854 4.854-4.854 4.854c-0 0-0 0-0 0-0.052 0.052-0.090 0.113-0.114 0.178-0.066 0.178-0.029 0.386 0.114 0.529l2.293 2.293c0.143 0.143 0.351 0.181 0.529 0.114 0.065-0.024 0.126-0.062 0.178-0.114 0-0 0-0 0-0l4.854-4.854 4.854 4.854c0 0 0 0 0 0 0.052 0.052 0.113 0.090 0.178 0.114 0.178 0.066 0.386 0.029 0.529-0.114l2.293-2.293c0.143-0.143 0.181-0.351 0.114-0.529-0.024-0.065-0.062-0.126-0.114-0.178z"},child:[]}]})(t)}let ig=class oE{static toSlatePoint(e,n,r=0,i=!1){if(e.text!==void 0)return!e.removed&&(i&&r+e.text.length>=n||r+e.text.length>n)?{path:[],offset:n-r}:null;if(e.children!==void 0)for(let a=0;a<e.children.length;a++){const s=e.children[a],o=oE.toSlatePoint(s,n,r,a===e.children.length-1);if(o)return{path:[a,...o.path],offset:o.offset};s.removed===void 0&&(r+=vt.string(s).length)}else if(Array.isArray(e))return oE.toSlatePoint({children:e},n,r);return null}static toStrIndex(e,n){const r=vt.texts({children:e},{from:[0,0],to:n.path});let i=0;for(const[a,s]of r)if(!a.removed){if(s+""==n.path+"")return i+n.offset;i+=vt.string(a).length}return i}static isPointValidForState(e,n){let r={children:n};for(const i of e.path){if(i>=r.children.length)return!1;r=r.children[i]}return e.offset<=vt.string(r).length}static isSelectionValidForState(e,n){return oE.isPointValidForState(e.anchor,n)&&oE.isPointValidForState(e.focus,n)}static stateToText(e){return e.map(n=>vt.string({children:n.children.filter(r=>r.removed===void 0)})).join(`
`)}};window.SlateUtils=ig;const eD=[".",",",";",":","!","?","(",")","[","]","{","}","<",">",'"',"'"];let ky=class C4{static findAllMatches(e,n){const r=[];let i=0,a;for(;(a=e.indexOf(n,i))>-1;)r.push(a),i=a+n.length;return r}static prepareStringForMatching(e,n=" "){return e.replace(/[^a-zA-Z0-9]/g,n).toLocaleLowerCase()}static matchActionsToText(e,n){n=C4.prepareStringForMatching(n);let r=[];for(const a of e){let s=C4.prepareStringForMatching(a.passage);const o=n.indexOf(s);o!==-1?r.push({start:o,end:o+s.length,action:a,isExact:!0}):r.push({start:-1,end:-1,action:a,isExact:!1})}let i=0;return r=r.map((a,s)=>{if(a.end===-1){a.start=i,a.end=n.length;const o=r.slice(s+1).find(m=>m.start!==null);o&&(a.end=o.start);const l=n.slice(a.start,a.end);let c=0,f=-1,h=-1;fLe(e[s].passage,l,{ignoreWhitespace:!0}).forEach(m=>{if(!m.added&&!m.removed){const p=m.value.split(" "),v=m.value.replace(/\s/g,"");p.length>2&&v.length>5&&(f===-1&&(f=c),h=c+m.value.length)}m.removed||(c+=m.value.length)}),f!==-1&&h!==-1&&(a.end=a.start+h,a.start+=f,a.isExact=!0)}else i=a.end;return a}),r}static getActionsAtPosition(e,n,r,i=!1){const a=[];let s=[];for(let o=0;o<e.length;o++){const l=e[o];s.length>0&&s[0].endPos===l.end&&s.push({action:l.action,index:o,endPos:l.end}),l.end<n&&(s.length===0||s[0].endPos<l.end)&&(s=[{action:l.action,index:o,endPos:l.end}]),l.start<=r&&l.end>=n&&a.push({action:l.action,index:o})}return a.length===0&&i&&s.length>0?s:a}static caretPositionFromPoint(e,n){if(document.caretPositionFromPoint)return document.caretPositionFromPoint(e,n);if(document.caretRangeFromPoint){const r=document.caretRangeFromPoint(e,n);if(r)return{offsetNode:r.startContainer,offset:r.startOffset}}return null}static getFittingString(e,n){let r=e;if(r.length<=1)return r;const i=n.match(/^\s*/),a=i?i[0]:"",s=n.match(/\s*$/),o=s?s[0]:"";n=n.trim(),r=r.trim();const l=n[0],c=n[n.length-1],f=r[0],h=r[r.length-1];return l===l.toUpperCase()?r=r[0].toUpperCase()+r.substring(1):r=r[0].toLowerCase()+r.substring(1),c!==h&&(eD.includes(h)&&(r=r.substring(0,r.length-1)),eD.includes(c)&&(r=r+c)),l!==f&&(eD.includes(f)&&(r=r.substring(1)),eD.includes(l)&&(r=l+r)),a+r+o}};const tY={hoveredLocation:null,textIsBeingEdited:!1},dm=Xf()((t,e)=>({...tY,reset:()=>t(n=>({...tY})),setHoveredLocation:n=>t(r=>({hoveredLocation:n})),setTextIsBeingEdited:n=>t(r=>({textIsBeingEdited:n}))})),OFe=t=>{const e=[];return t.leaf.added?e.push("suggest-addition"):t.leaf.removed&&e.push("suggest-deletion"),t.leaf.highlight&&e.push("highlight"),b.jsxDEV("span",{className:e.join(" "),...t.attributes,children:t.children},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:24,columnNumber:10},void 0)},Aa=LL(sR());window.globalEditor=Aa;const{normalizeNode:jFe}=Aa;Aa.normalizeNode=t=>{const[e,n]=t;n.length===0&&e.children.length>1&&(ot.insertText(Aa,`
`,{at:{path:[1,0],offset:0}}),ot.mergeNodes(Aa,{at:[1]})),jFe(t)};function ple({overlayOnHover:t=!0}){const e=Ce(y=>y.setTextState),n=dm(y=>y.textIsBeingEdited),r=it.createRef(),i=Ce(y=>y.isTextSuggested)(),a=Ce(y=>y.isReadOnly),s=Ce(y=>y.textActionMatches),o=Ce(y=>y.filteredActionsSegment),l=Ce(y=>y.highlightedActionsSegment),c=Ce(y=>y.selectedEdges),f=Ce(y=>y.actionEdges),h=Ce(y=>y.selectedNodes),m=Ce(y=>y.highlightedEntities),p=R.useCallback(y=>b.jsxDEV(OFe,{...y,editor:Aa},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:69,columnNumber:12},this),[]),v=R.useCallback(([y,x])=>{const S=[];let _=[];if(c.length>0)for(const k of c){const P=f.findIndex(O=>O.id===k);P>=0&&_.push(P)}const N=l||o;if(N)for(let k=N.start;k<=N.end;k++)_.indexOf(k)===-1&&_.push(k);if(h.length>0||m.length>0){const k=m.concat(h),O=Ce.getState().getFilteredActionEdges(N).filter(A=>k.includes(A.source)||k.includes(A.target));_=[];for(const A of O){const T=f.findIndex(L=>L.id===A.id);T>=0&&_.push(T)}}if(_.length>0)for(const k of _){const P=s[k].start,O=s[k].end,A=ig.toSlatePoint(Ce.getState().textState,P),T=ig.toSlatePoint(Ce.getState().textState,O);if(A&&T){const L={anchor:A,focus:T},B=nt.intersection(L,fe.range(Aa,x));B&&S.push({anchor:B.anchor,focus:B.focus,highlight:!0})}}return S},[s,o,l,c,h,m]);return b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{ref:r,onClick:y=>{y.target===r.current&&(Ce.getState().setFilteredActionsSegment(null,null),Ce.getState().setHighlightedActionsSegment(null,null))},className:n?"loading":"",style:{position:"relative",background:"white",height:"100%",width:"50%",paddingTop:60,paddingLeft:50,paddingRight:50,borderRadius:"2px",boxShadow:"0 0 10px rgba(0,0,0,0.1)",overflow:"scroll"},children:[b.jsxDEV($L,{onSelectionChange:y=>{if(!a&&y){const x=y==null?void 0:y.anchor,S=y==null?void 0:y.focus,_=ig.toStrIndex(Aa.children,x),N=ig.toStrIndex(Aa.children,S),k=ky.getActionsAtPosition(Ce.getState().textActionMatches,Math.min(_,N),Math.max(_,N),!0);k.length>0?Ce.getState().setFilteredActionsSegment(k[0].index,k[k.length-1].index):Ce.getState().setFilteredActionsSegment(null,null)}},editor:Aa,initialValue:Ce.getState().textState,onChange:y=>{e(y,!1)},children:b.jsxDEV(VL,{readOnly:a,decorate:v,onMouseLeave:()=>{Ce.getState().setHighlightedActionsSegment(null,null)},onMouseMove:y=>{if(!t)return;const x=ky.caretPositionFromPoint(y.clientX,y.clientY);if(x){const S=rt.toSlatePoint(Aa,[x.offsetNode,x.offset],{exactMatch:!0,suppressThrow:!0});if(S){const _=ig.toStrIndex(Aa.children,S),N=ky.getActionsAtPosition(Ce.getState().textActionMatches,_,_,!0);N.length>0?Ce.getState().setHighlightedActionsSegment(N[0].index,N[N.length-1].index):Ce.getState().setHighlightedActionsSegment(null,null)}}},renderLeaf:p},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:170,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:149,columnNumber:9},this),i&&b.jsxDEV("div",{style:{position:"absolute",top:10,transform:"translate(-50%, 0)",left:"50%"},children:[b.jsxDEV(et,{size:"sm",variant:"faded",style:{marginRight:5},onClick:()=>Ce.getState().acceptSuggestions(),children:[b.jsxDEV(ORe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:198,columnNumber:131},this)," Accept changes"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:198,columnNumber:11},this),b.jsxDEV(et,{size:"sm",variant:"faded",onClick:()=>Ce.getState().rejectSuggestions(),children:[b.jsxDEV(RFe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:199,columnNumber:107},this)," Reject changes"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:199,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:197,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:143,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/TextEditor.tsx",lineNumber:142,columnNumber:5},this)}function IFe(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return gle(this.cover(e,n),e,n,t)}function gle(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,s={data:r},o=t._x0,l=t._y0,c=t._x1,f=t._y1,h,m,p,v,y,x,S,_;if(!a)return t._root=s,t;for(;a.length;)if((y=e>=(h=(o+c)/2))?o=h:c=h,(x=n>=(m=(l+f)/2))?l=m:f=m,i=a,!(a=a[S=x<<1|y]))return i[S]=s,t;if(p=+t._x.call(null,a.data),v=+t._y.call(null,a.data),e===p&&n===v)return s.next=a,i?i[S]=s:t._root=s,t;do i=i?i[S]=new Array(4):t._root=new Array(4),(y=e>=(h=(o+c)/2))?o=h:c=h,(x=n>=(m=(l+f)/2))?l=m:f=m;while((S=x<<1|y)===(_=(v>=m)<<1|p>=h));return i[_]=a,i[S]=s,t}function MFe(t){var e,n,r=t.length,i,a,s=new Array(r),o=new Array(r),l=1/0,c=1/0,f=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(s[n]=i,o[n]=a,i<l&&(l=i),i>f&&(f=i),a<c&&(c=a),a>h&&(h=a));if(l>f||c>h)return this;for(this.cover(l,c).cover(f,h),n=0;n<r;++n)gle(this,s[n],o[n],t[n]);return this}function VFe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var s=i-n||1,o=this._root,l,c;n>t||t>=i||r>e||e>=a;)switch(c=(e<r)<<1|t<n,l=new Array(4),l[c]=o,o=l,s*=2,c){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function $Fe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function LFe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Fo(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function FFe(t,e,n){var r,i=this._x0,a=this._y0,s,o,l,c,f=this._x1,h=this._y1,m=[],p=this._root,v,y;for(p&&m.push(new Fo(p,i,a,f,h)),n==null?n=1/0:(i=t-n,a=e-n,f=t+n,h=e+n,n*=n);v=m.pop();)if(!(!(p=v.node)||(s=v.x0)>f||(o=v.y0)>h||(l=v.x1)<i||(c=v.y1)<a))if(p.length){var x=(s+l)/2,S=(o+c)/2;m.push(new Fo(p[3],x,S,l,c),new Fo(p[2],s,S,x,c),new Fo(p[1],x,o,l,S),new Fo(p[0],s,o,x,S)),(y=(e>=S)<<1|t>=x)&&(v=m[m.length-1],m[m.length-1]=m[m.length-1-y],m[m.length-1-y]=v)}else{var _=t-+this._x.call(null,p.data),N=e-+this._y.call(null,p.data),k=_*_+N*N;if(k<n){var P=Math.sqrt(n=k);i=t-P,a=e-P,f=t+P,h=e+P,r=p.data}}return r}function BFe(t){if(isNaN(f=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,s=this._x0,o=this._y0,l=this._x1,c=this._y1,f,h,m,p,v,y,x,S;if(!n)return this;if(n.length)for(;;){if((v=f>=(m=(s+l)/2))?s=m:l=m,(y=h>=(p=(o+c)/2))?o=p:c=p,e=n,!(n=n[x=y<<1|v]))return this;if(!n.length)break;(e[x+1&3]||e[x+2&3]||e[x+3&3])&&(r=e,S=x)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[x]=a:delete e[x],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[S]=n:this._root=n),this):(this._root=a,this)}function UFe(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function WFe(){return this._root}function zFe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function HFe(t){var e=[],n,r=this._root,i,a,s,o,l;for(r&&e.push(new Fo(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,s=n.y0,o=n.x1,l=n.y1)&&r.length){var c=(a+o)/2,f=(s+l)/2;(i=r[3])&&e.push(new Fo(i,c,f,o,l)),(i=r[2])&&e.push(new Fo(i,a,f,c,l)),(i=r[1])&&e.push(new Fo(i,c,s,o,f)),(i=r[0])&&e.push(new Fo(i,a,s,c,f))}return this}function GFe(t){var e=[],n=[],r;for(this._root&&e.push(new Fo(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,l=r.x1,c=r.y1,f=(s+l)/2,h=(o+c)/2;(a=i[0])&&e.push(new Fo(a,s,o,f,h)),(a=i[1])&&e.push(new Fo(a,f,o,l,h)),(a=i[2])&&e.push(new Fo(a,s,h,f,c)),(a=i[3])&&e.push(new Fo(a,f,h,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function KFe(t){return t[0]}function YFe(t){return arguments.length?(this._x=t,this):this._x}function JFe(t){return t[1]}function qFe(t){return arguments.length?(this._y=t,this):this._y}function SF(t,e,n){var r=new EF(e??KFe,n??JFe,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function EF(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function nY(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ho=SF.prototype=EF.prototype;Ho.copy=function(){var t=new EF(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=nY(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=nY(r));return t};Ho.add=IFe;Ho.addAll=MFe;Ho.cover=VFe;Ho.data=$Fe;Ho.extent=LFe;Ho.find=FFe;Ho.remove=BFe;Ho.removeAll=UFe;Ho.root=WFe;Ho.size=zFe;Ho.visit=HFe;Ho.visitAfter=GFe;Ho.x=YFe;Ho.y=qFe;function lc(t){return function(){return t}}function uw(t){return(t()-.5)*1e-6}function XFe(t){return t.x+t.vx}function ZFe(t){return t.y+t.vy}function vle(t){var e,n,r,i=1,a=1;typeof t!="function"&&(t=lc(t==null?1:+t));function s(){for(var c,f=e.length,h,m,p,v,y,x,S=0;S<a;++S)for(h=SF(e,XFe,ZFe).visitAfter(o),c=0;c<f;++c)m=e[c],y=n[m.index],x=y*y,p=m.x+m.vx,v=m.y+m.vy,h.visit(_);function _(N,k,P,O,A){var T=N.data,L=N.r,B=y+L;if(T){if(T.index>m.index){var W=p-T.x-T.vx,Y=v-T.y-T.vy,V=W*W+Y*Y;V<B*B&&(W===0&&(W=uw(r),V+=W*W),Y===0&&(Y=uw(r),V+=Y*Y),V=(B-(V=Math.sqrt(V)))/V*i,m.vx+=(W*=V)*(B=(L*=L)/(x+L)),m.vy+=(Y*=V)*B,T.vx-=W*(B=1-B),T.vy-=Y*B)}return}return k>p+B||O<p-B||P>v+B||A<v-B}}function o(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function l(){if(e){var c,f=e.length,h;for(n=new Array(f),c=0;c<f;++c)h=e[c],n[h.index]=+t(h,c,e)}}return s.initialize=function(c,f){e=c,r=f,l()},s.iterations=function(c){return arguments.length?(a=+c,s):a},s.strength=function(c){return arguments.length?(i=+c,s):i},s.radius=function(c){return arguments.length?(t=typeof c=="function"?c:lc(+c),l(),s):t},s}var QFe={value:()=>{}};function l_(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new _k(n)}function _k(t){this._=t}function eBe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}_k.prototype=l_.prototype={constructor:_k,on:function(t,e){var n=this._,r=eBe(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=tBe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=rY(n[i],t.name,e);else if(e==null)for(i in n)n[i]=rY(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _k(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function tBe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function rY(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=QFe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Mw=0,lE=0,TS=0,yle=1e3,PP,uE,AP=0,Gy=0,ER=0,pN=typeof performance=="object"&&performance.now?performance:Date,ble=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function NF(){return Gy||(ble(nBe),Gy=pN.now()+ER)}function nBe(){Gy=0}function RP(){this._call=this._time=this._next=null}RP.prototype=_F.prototype={constructor:RP,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?NF():+n)+(e==null?0:+e),!this._next&&uE!==this&&(uE?uE._next=this:PP=this,uE=this),this._call=t,this._time=n,T4()},stop:function(){this._call&&(this._call=null,this._time=1/0,T4())}};function _F(t,e,n){var r=new RP;return r.restart(t,e,n),r}function rBe(){NF(),++Mw;for(var t=PP,e;t;)(e=Gy-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Mw}function iY(){Gy=(AP=pN.now())+ER,Mw=lE=0;try{rBe()}finally{Mw=0,aBe(),Gy=0}}function iBe(){var t=pN.now(),e=t-AP;e>yle&&(ER-=e,AP=t)}function aBe(){for(var t,e=PP,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:PP=n);uE=t,T4(r)}function T4(t){if(!Mw){lE&&(lE=clearTimeout(lE));var e=t-Gy;e>24?(t<1/0&&(lE=setTimeout(iY,t-pN.now()-ER)),TS&&(TS=clearInterval(TS))):(TS||(AP=pN.now(),TS=setInterval(iBe,yle)),Mw=1,ble(iY))}}function aY(t,e,n){var r=new RP;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}const sBe=1664525,oBe=1013904223,sY=4294967296;function lBe(){let t=1;return()=>(t=(sBe*t+oBe)%sY)/sY}function uBe(t){return t.x}function cBe(t){return t.y}var dBe=10,fBe=Math.PI*(3-Math.sqrt(5));function wle(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,o=new Map,l=_F(h),c=l_("tick","end"),f=lBe();t==null&&(t=[]);function h(){m(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function m(y){var x,S=t.length,_;y===void 0&&(y=1);for(var N=0;N<y;++N)for(n+=(a-n)*i,o.forEach(function(k){k(n)}),x=0;x<S;++x)_=t[x],_.fx==null?_.x+=_.vx*=s:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=s:(_.y=_.fy,_.vy=0);return e}function p(){for(var y=0,x=t.length,S;y<x;++y){if(S=t[y],S.index=y,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var _=dBe*Math.sqrt(.5+y),N=y*fBe;S.x=_*Math.cos(N),S.y=_*Math.sin(N)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function v(y){return y.initialize&&y.initialize(t,f),y}return p(),e={tick:m,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(y){return arguments.length?(t=y,p(),o.forEach(v),e):t},alpha:function(y){return arguments.length?(n=+y,e):n},alphaMin:function(y){return arguments.length?(r=+y,e):r},alphaDecay:function(y){return arguments.length?(i=+y,e):+i},alphaTarget:function(y){return arguments.length?(a=+y,e):a},velocityDecay:function(y){return arguments.length?(s=1-y,e):1-s},randomSource:function(y){return arguments.length?(f=y,o.forEach(v),e):f},force:function(y,x){return arguments.length>1?(x==null?o.delete(y):o.set(y,v(x)),e):o.get(y)},find:function(y,x,S){var _=0,N=t.length,k,P,O,A,T;for(S==null?S=1/0:S*=S,_=0;_<N;++_)A=t[_],k=y-A.x,P=x-A.y,O=k*k+P*P,O<S&&(T=A,S=O);return T},on:function(y,x){return arguments.length>1?(c.on(y,x),e):c.on(y)}}}function hBe(){var t,e,n,r,i=lc(-30),a,s=1,o=1/0,l=.81;function c(p){var v,y=t.length,x=SF(t,uBe,cBe).visitAfter(h);for(r=p,v=0;v<y;++v)e=t[v],x.visit(m)}function f(){if(t){var p,v=t.length,y;for(a=new Array(v),p=0;p<v;++p)y=t[p],a[y.index]=+i(y,p,t)}}function h(p){var v=0,y,x,S=0,_,N,k;if(p.length){for(_=N=k=0;k<4;++k)(y=p[k])&&(x=Math.abs(y.value))&&(v+=y.value,S+=x,_+=x*y.x,N+=x*y.y);p.x=_/S,p.y=N/S}else{y=p,y.x=y.data.x,y.y=y.data.y;do v+=a[y.data.index];while(y=y.next)}p.value=v}function m(p,v,y,x){if(!p.value)return!0;var S=p.x-e.x,_=p.y-e.y,N=x-v,k=S*S+_*_;if(N*N/l<k)return k<o&&(S===0&&(S=uw(n),k+=S*S),_===0&&(_=uw(n),k+=_*_),k<s&&(k=Math.sqrt(s*k)),e.vx+=S*p.value*r/k,e.vy+=_*p.value*r/k),!0;if(p.length||k>=o)return;(p.data!==e||p.next)&&(S===0&&(S=uw(n),k+=S*S),_===0&&(_=uw(n),k+=_*_),k<s&&(k=Math.sqrt(s*k)));do p.data!==e&&(N=a[p.data.index]*r/k,e.vx+=S*N,e.vy+=_*N);while(p=p.next)}return c.initialize=function(p,v){t=p,n=v,f()},c.strength=function(p){return arguments.length?(i=typeof p=="function"?p:lc(+p),f(),c):i},c.distanceMin=function(p){return arguments.length?(s=p*p,c):Math.sqrt(s)},c.distanceMax=function(p){return arguments.length?(o=p*p,c):Math.sqrt(o)},c.theta=function(p){return arguments.length?(l=p*p,c):Math.sqrt(l)},c}function xle(t){var e=lc(.1),n,r,i;typeof t!="function"&&(t=lc(t==null?0:+t));function a(o){for(var l=0,c=n.length,f;l<c;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*o}function s(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:lc(+o),s(),a):e},a.x=function(o){return arguments.length?(t=typeof o=="function"?o:lc(+o),s(),a):t},a}function Sle(t){var e=lc(.1),n,r,i;typeof t!="function"&&(t=lc(t==null?0:+t));function a(o){for(var l=0,c=n.length,f;l<c;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*o}function s(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:lc(+o),s(),a):e},a.y=function(o){return arguments.length?(t=typeof o=="function"?o:lc(+o),s(),a):t},a}const S0={},OP={};function mBe(){Object.keys(OP).forEach(t=>{OP[t]()})}class Pi{static startSimulation(e,n,r,i=50){let a=0;return Pi.stopSimulation(e),S0[e]=n,OP[e]=()=>{a>i&&Pi.stopSimulation(e),a++,r()},n.on("tick",mBe),n}static stopSimulation(e){S0[e]&&(S0[e].stop(),delete S0[e],delete OP[e])}static stopAllSimulations(){Object.keys(S0).forEach(e=>{Pi.stopSimulation(e)})}static startNodeSimulation(e,n,r,i,a=50){const s=r(n),o=()=>{i(n)};Pi.startSimulation(e,s,o,a)}static getSimulation(e){return S0[e]||null}static optimizeNodeLayout(e,n,r,i,a,s=50){let o=Pi.getSimulation(e),l=null;return l=n.map(c=>({id:c.id,x:c.position.x,y:c.position.y,data:c})),o=wle(l).force("repel",hBe().strength(-1e3)).force("x",xle(c=>{var f,h;return i.x-(((h=(f=c==null?void 0:c.data)==null?void 0:f.measured)==null?void 0:h.width)||0)/2}).strength(.05)).force("y",Sle(c=>{var f,h;return i.y-(((h=(f=c==null?void 0:c.data)==null?void 0:f.measured)==null?void 0:h.height)||0)/2}).strength(.05)).force("collide",vle(a)),Pi.startSimulation(e,o,()=>{r([...n.map(c=>{const f=l.find(h=>h.id===c.id);if(f){const h=f.x,m=f.y;c.position={x:h,y:m}}return{...c}})])},s),o}}let CF=class{execute(){return new Promise((e,n)=>{e(null)})}};class pBe extends CF{constructor(n){super();Mt(this,"prompts");this.prompts=n}async runSequentiallyWithDelay(){const n=[];for(const r of this.prompts){const i=await r.execute();n.push(i)}return n}execute(){return this.runSequentiallyWithDelay()}}function Ra(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Ra(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var D4="http://www.w3.org/1999/xhtml";const oY={svg:"http://www.w3.org/2000/svg",xhtml:D4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function NR(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),oY.hasOwnProperty(e)?{space:oY[e],local:t}:t}function gBe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===D4&&e.documentElement.namespaceURI===D4?e.createElement(t):e.createElementNS(n,t)}}function vBe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ele(t){var e=NR(t);return(e.local?vBe:gBe)(e)}function yBe(){}function TF(t){return t==null?yBe:function(){return this.querySelector(t)}}function bBe(t){typeof t!="function"&&(t=TF(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),l,c,f=0;f<s;++f)(l=a[f])&&(c=t.call(l,l.__data__,f,a))&&("__data__"in l&&(c.__data__=l.__data__),o[f]=c);return new yu(r,this._parents)}function wBe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function xBe(){return[]}function Nle(t){return t==null?xBe:function(){return this.querySelectorAll(t)}}function SBe(t){return function(){return wBe(t.apply(this,arguments))}}function EBe(t){typeof t=="function"?t=SBe(t):t=Nle(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,l,c=0;c<o;++c)(l=s[c])&&(r.push(t.call(l,l.__data__,c,s)),i.push(l));return new yu(r,i)}function _le(t){return function(){return this.matches(t)}}function Cle(t){return function(e){return e.matches(t)}}var NBe=Array.prototype.find;function _Be(t){return function(){return NBe.call(this.children,t)}}function CBe(){return this.firstElementChild}function TBe(t){return this.select(t==null?CBe:_Be(typeof t=="function"?t:Cle(t)))}var DBe=Array.prototype.filter;function kBe(){return Array.from(this.children)}function PBe(t){return function(){return DBe.call(this.children,t)}}function ABe(t){return this.selectAll(t==null?kBe:PBe(typeof t=="function"?t:Cle(t)))}function RBe(t){typeof t!="function"&&(t=_le(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,c=0;c<s;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new yu(r,this._parents)}function Tle(t){return new Array(t.length)}function OBe(){return new yu(this._enter||this._groups.map(Tle),this._parents)}function jP(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}jP.prototype={constructor:jP,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function jBe(t){return function(){return t}}function IBe(t,e,n,r,i,a){for(var s=0,o,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new jP(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function MBe(t,e,n,r,i,a,s){var o,l,c=new Map,f=e.length,h=a.length,m=new Array(f),p;for(o=0;o<f;++o)(l=e[o])&&(m[o]=p=s.call(l,l.__data__,o,e)+"",c.has(p)?i[o]=l:c.set(p,l));for(o=0;o<h;++o)p=s.call(t,a[o],o,a)+"",(l=c.get(p))?(r[o]=l,l.__data__=a[o],c.delete(p)):n[o]=new jP(t,a[o]);for(o=0;o<f;++o)(l=e[o])&&c.get(m[o])===l&&(i[o]=l)}function VBe(t){return t.__data__}function $Be(t,e){if(!arguments.length)return Array.from(this,VBe);var n=e?MBe:IBe,r=this._parents,i=this._groups;typeof t!="function"&&(t=jBe(t));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var f=r[c],h=i[c],m=h.length,p=LBe(t.call(f,f&&f.__data__,c,r)),v=p.length,y=o[c]=new Array(v),x=s[c]=new Array(v),S=l[c]=new Array(m);n(f,h,y,x,S,p,e);for(var _=0,N=0,k,P;_<v;++_)if(k=y[_]){for(_>=N&&(N=_+1);!(P=x[N])&&++N<v;);k._next=P||null}}return s=new yu(s,r),s._enter=o,s._exit=l,s}function LBe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function FBe(){return new yu(this._exit||this._groups.map(Tle),this._parents)}function BBe(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function UBe(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var c=n[l],f=r[l],h=c.length,m=o[l]=new Array(h),p,v=0;v<h;++v)(p=c[v]||f[v])&&(m[v]=p);for(;l<i;++l)o[l]=n[l];return new yu(o,this._parents)}function WBe(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function zBe(t){t||(t=HBe);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,l=i[a]=new Array(o),c,f=0;f<o;++f)(c=s[f])&&(l[f]=c);l.sort(e)}return new yu(i,this._parents).order()}function HBe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function GBe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function KBe(){return Array.from(this)}function YBe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function JBe(){let t=0;for(const e of this)++t;return t}function qBe(){return!this.node()}function XBe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function ZBe(t){return function(){this.removeAttribute(t)}}function QBe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eUe(t,e){return function(){this.setAttribute(t,e)}}function tUe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function nUe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function rUe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function iUe(t,e){var n=NR(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?QBe:ZBe:typeof e=="function"?n.local?rUe:nUe:n.local?tUe:eUe)(n,e))}function Dle(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function aUe(t){return function(){this.style.removeProperty(t)}}function sUe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function oUe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function lUe(t,e,n){return arguments.length>1?this.each((e==null?aUe:typeof e=="function"?oUe:sUe)(t,e,n??"")):Vw(this.node(),t)}function Vw(t,e){return t.style.getPropertyValue(e)||Dle(t).getComputedStyle(t,null).getPropertyValue(e)}function uUe(t){return function(){delete this[t]}}function cUe(t,e){return function(){this[t]=e}}function dUe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function fUe(t,e){return arguments.length>1?this.each((e==null?uUe:typeof e=="function"?dUe:cUe)(t,e)):this.node()[t]}function kle(t){return t.trim().split(/^|\s+/)}function DF(t){return t.classList||new Ple(t)}function Ple(t){this._node=t,this._names=kle(t.getAttribute("class")||"")}Ple.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ale(t,e){for(var n=DF(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Rle(t,e){for(var n=DF(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function hUe(t){return function(){Ale(this,t)}}function mUe(t){return function(){Rle(this,t)}}function pUe(t,e){return function(){(e.apply(this,arguments)?Ale:Rle)(this,t)}}function gUe(t,e){var n=kle(t+"");if(arguments.length<2){for(var r=DF(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?pUe:e?hUe:mUe)(n,e))}function vUe(){this.textContent=""}function yUe(t){return function(){this.textContent=t}}function bUe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function wUe(t){return arguments.length?this.each(t==null?vUe:(typeof t=="function"?bUe:yUe)(t)):this.node().textContent}function xUe(){this.innerHTML=""}function SUe(t){return function(){this.innerHTML=t}}function EUe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function NUe(t){return arguments.length?this.each(t==null?xUe:(typeof t=="function"?EUe:SUe)(t)):this.node().innerHTML}function _Ue(){this.nextSibling&&this.parentNode.appendChild(this)}function CUe(){return this.each(_Ue)}function TUe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function DUe(){return this.each(TUe)}function kUe(t){var e=typeof t=="function"?t:Ele(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function PUe(){return null}function AUe(t,e){var n=typeof t=="function"?t:Ele(t),r=e==null?PUe:typeof e=="function"?e:TF(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function RUe(){var t=this.parentNode;t&&t.removeChild(this)}function OUe(){return this.each(RUe)}function jUe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function IUe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function MUe(t){return this.select(t?IUe:jUe)}function VUe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function $Ue(t){return function(e){t.call(this,e,this.__data__)}}function LUe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function FUe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function BUe(t,e,n){return function(){var r=this.__on,i,a=$Ue(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function UUe(t,e,n){var r=LUe(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,f;l<c;++l)for(i=0,f=o[l];i<a;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(o=e?BUe:FUe,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function Ole(t,e,n){var r=Dle(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function WUe(t,e){return function(){return Ole(this,t,e)}}function zUe(t,e){return function(){return Ole(this,t,e.apply(this,arguments))}}function HUe(t,e){return this.each((typeof e=="function"?zUe:WUe)(t,e))}function*GUe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var jle=[null];function yu(t,e){this._groups=t,this._parents=e}function u_(){return new yu([[document.documentElement]],jle)}function KUe(){return this}yu.prototype=u_.prototype={constructor:yu,select:bBe,selectAll:EBe,selectChild:TBe,selectChildren:ABe,filter:RBe,data:$Be,enter:OBe,exit:FBe,join:BBe,merge:UBe,selection:KUe,order:WBe,sort:zBe,call:GBe,nodes:KBe,node:YBe,size:JBe,empty:qBe,each:XBe,attr:iUe,style:lUe,property:fUe,classed:gUe,text:wUe,html:NUe,raise:CUe,lower:DUe,append:kUe,insert:AUe,remove:OUe,clone:MUe,datum:VUe,on:UUe,dispatch:HUe,[Symbol.iterator]:GUe};function ba(t){return typeof t=="string"?new yu([[document.querySelector(t)]],[document.documentElement]):new yu([[t]],jle)}function YUe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function md(t,e){if(t=YUe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const JUe={passive:!1},gN={capture:!0,passive:!1};function jM(t){t.stopImmediatePropagation()}function Ew(t){t.preventDefault(),t.stopImmediatePropagation()}function Ile(t){var e=t.document.documentElement,n=ba(t).on("dragstart.drag",Ew,gN);"onselectstart"in e?n.on("selectstart.drag",Ew,gN):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Mle(t,e){var n=t.document.documentElement,r=ba(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ew,gN),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const tD=t=>()=>t;function k4(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:s,y:o,dx:l,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}k4.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function qUe(t){return!t.ctrlKey&&!t.button}function XUe(){return this.parentNode}function ZUe(t,e){return e??{x:t.x,y:t.y}}function QUe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vle(){var t=qUe,e=XUe,n=ZUe,r=QUe,i={},a=l_("start","drag","end"),s=0,o,l,c,f,h=0;function m(k){k.on("mousedown.drag",p).filter(r).on("touchstart.drag",x).on("touchmove.drag",S,JUe).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(k,P){if(!(f||!t.call(this,k,P))){var O=N(this,e.call(this,k,P),k,P,"mouse");O&&(ba(k.view).on("mousemove.drag",v,gN).on("mouseup.drag",y,gN),Ile(k.view),jM(k),c=!1,o=k.clientX,l=k.clientY,O("start",k))}}function v(k){if(Ew(k),!c){var P=k.clientX-o,O=k.clientY-l;c=P*P+O*O>h}i.mouse("drag",k)}function y(k){ba(k.view).on("mousemove.drag mouseup.drag",null),Mle(k.view,c),Ew(k),i.mouse("end",k)}function x(k,P){if(t.call(this,k,P)){var O=k.changedTouches,A=e.call(this,k,P),T=O.length,L,B;for(L=0;L<T;++L)(B=N(this,A,k,P,O[L].identifier,O[L]))&&(jM(k),B("start",k,O[L]))}}function S(k){var P=k.changedTouches,O=P.length,A,T;for(A=0;A<O;++A)(T=i[P[A].identifier])&&(Ew(k),T("drag",k,P[A]))}function _(k){var P=k.changedTouches,O=P.length,A,T;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),A=0;A<O;++A)(T=i[P[A].identifier])&&(jM(k),T("end",k,P[A]))}function N(k,P,O,A,T,L){var B=a.copy(),W=md(L||O,P),Y,V,I;if((I=n.call(k,new k4("beforestart",{sourceEvent:O,target:m,identifier:T,active:s,x:W[0],y:W[1],dx:0,dy:0,dispatch:B}),A))!=null)return Y=I.x-W[0]||0,V=I.y-W[1]||0,function H(q,F,J){var Z=W,G;switch(q){case"start":i[T]=H,G=s++;break;case"end":delete i[T],--s;case"drag":W=md(J||F,P),G=s;break}B.call(q,k,new k4(q,{sourceEvent:F,subject:I,target:m,identifier:T,active:G,x:W[0]+Y,y:W[1]+V,dx:W[0]-Z[0],dy:W[1]-Z[1],dispatch:B}),A)}}return m.filter=function(k){return arguments.length?(t=typeof k=="function"?k:tD(!!k),m):t},m.container=function(k){return arguments.length?(e=typeof k=="function"?k:tD(k),m):e},m.subject=function(k){return arguments.length?(n=typeof k=="function"?k:tD(k),m):n},m.touchable=function(k){return arguments.length?(r=typeof k=="function"?k:tD(!!k),m):r},m.on=function(){var k=a.on.apply(a,arguments);return k===a?m:k},m.clickDistance=function(k){return arguments.length?(h=(k=+k)*k,m):Math.sqrt(h)},m}function kF(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $le(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function c_(){}var vN=.7,IP=1/vN,Nw="\\s*([+-]?\\d+)\\s*",yN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e6e=/^#([0-9a-f]{3,8})$/,t6e=new RegExp(`^rgb\\(${Nw},${Nw},${Nw}\\)$`),n6e=new RegExp(`^rgb\\(${Gf},${Gf},${Gf}\\)$`),r6e=new RegExp(`^rgba\\(${Nw},${Nw},${Nw},${yN}\\)$`),i6e=new RegExp(`^rgba\\(${Gf},${Gf},${Gf},${yN}\\)$`),a6e=new RegExp(`^hsl\\(${yN},${Gf},${Gf}\\)$`),s6e=new RegExp(`^hsla\\(${yN},${Gf},${Gf},${yN}\\)$`),lY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kF(c_,bN,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:uY,formatHex:uY,formatHex8:o6e,formatHsl:l6e,formatRgb:cY,toString:cY});function uY(){return this.rgb().formatHex()}function o6e(){return this.rgb().formatHex8()}function l6e(){return Lle(this).formatHsl()}function cY(){return this.rgb().formatRgb()}function bN(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=e6e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dY(e):n===3?new _l(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?nD(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?nD(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=t6e.exec(t))?new _l(e[1],e[2],e[3],1):(e=n6e.exec(t))?new _l(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=r6e.exec(t))?nD(e[1],e[2],e[3],e[4]):(e=i6e.exec(t))?nD(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=a6e.exec(t))?mY(e[1],e[2]/100,e[3]/100,1):(e=s6e.exec(t))?mY(e[1],e[2]/100,e[3]/100,e[4]):lY.hasOwnProperty(t)?dY(lY[t]):t==="transparent"?new _l(NaN,NaN,NaN,0):null}function dY(t){return new _l(t>>16&255,t>>8&255,t&255,1)}function nD(t,e,n,r){return r<=0&&(t=e=n=NaN),new _l(t,e,n,r)}function u6e(t){return t instanceof c_||(t=bN(t)),t?(t=t.rgb(),new _l(t.r,t.g,t.b,t.opacity)):new _l}function P4(t,e,n,r){return arguments.length===1?u6e(t):new _l(t,e,n,r??1)}function _l(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}kF(_l,P4,$le(c_,{brighter(t){return t=t==null?IP:Math.pow(IP,t),new _l(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vN:Math.pow(vN,t),new _l(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _l(Py(this.r),Py(this.g),Py(this.b),MP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fY,formatHex:fY,formatHex8:c6e,formatRgb:hY,toString:hY}));function fY(){return`#${xy(this.r)}${xy(this.g)}${xy(this.b)}`}function c6e(){return`#${xy(this.r)}${xy(this.g)}${xy(this.b)}${xy((isNaN(this.opacity)?1:this.opacity)*255)}`}function hY(){const t=MP(this.opacity);return`${t===1?"rgb(":"rgba("}${Py(this.r)}, ${Py(this.g)}, ${Py(this.b)}${t===1?")":`, ${t})`}`}function MP(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Py(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xy(t){return t=Py(t),(t<16?"0":"")+t.toString(16)}function mY(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new pd(t,e,n,r)}function Lle(t){if(t instanceof pd)return new pd(t.h,t.s,t.l,t.opacity);if(t instanceof c_||(t=bN(t)),!t)return new pd;if(t instanceof pd)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new pd(s,o,l,t.opacity)}function d6e(t,e,n,r){return arguments.length===1?Lle(t):new pd(t,e,n,r??1)}function pd(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}kF(pd,d6e,$le(c_,{brighter(t){return t=t==null?IP:Math.pow(IP,t),new pd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vN:Math.pow(vN,t),new pd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _l(IM(t>=240?t-240:t+120,i,r),IM(t,i,r),IM(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new pd(pY(this.h),rD(this.s),rD(this.l),MP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=MP(this.opacity);return`${t===1?"hsl(":"hsla("}${pY(this.h)}, ${rD(this.s)*100}%, ${rD(this.l)*100}%${t===1?")":`, ${t})`}`}}));function pY(t){return t=(t||0)%360,t<0?t+360:t}function rD(t){return Math.max(0,Math.min(1,t||0))}function IM(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Fle=t=>()=>t;function f6e(t,e){return function(n){return t+n*e}}function h6e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function m6e(t){return(t=+t)==1?Ble:function(e,n){return n-e?h6e(e,n,t):Fle(isNaN(e)?n:e)}}function Ble(t,e){var n=e-t;return n?f6e(t,n):Fle(isNaN(t)?e:t)}const gY=function t(e){var n=m6e(e);function r(i,a){var s=n((i=P4(i)).r,(a=P4(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),c=Ble(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=t,r}(1);function Qp(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var A4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,MM=new RegExp(A4.source,"g");function p6e(t){return function(){return t}}function g6e(t){return function(e){return t(e)+""}}function v6e(t,e){var n=A4.lastIndex=MM.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=A4.exec(t))&&(i=MM.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Qp(r,i)})),n=MM.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?g6e(l[0].x):p6e(e):(e=l.length,function(c){for(var f=0,h;f<e;++f)o[(h=l[f]).i]=h.x(c);return o.join("")})}var vY=180/Math.PI,R4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ule(t,e,n,r,i,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*vY,skewX:Math.atan(l)*vY,scaleX:s,scaleY:o}}var iD;function y6e(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?R4:Ule(e.a,e.b,e.c,e.d,e.e,e.f)}function b6e(t){return t==null||(iD||(iD=document.createElementNS("http://www.w3.org/2000/svg","g")),iD.setAttribute("transform",t),!(t=iD.transform.baseVal.consolidate()))?R4:(t=t.matrix,Ule(t.a,t.b,t.c,t.d,t.e,t.f))}function Wle(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,f,h,m,p,v){if(c!==h||f!==m){var y=p.push("translate(",null,e,null,n);v.push({i:y-4,x:Qp(c,h)},{i:y-2,x:Qp(f,m)})}else(h||m)&&p.push("translate("+h+e+m+n)}function s(c,f,h,m){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),m.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Qp(c,f)})):f&&h.push(i(h)+"rotate("+f+r)}function o(c,f,h,m){c!==f?m.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Qp(c,f)}):f&&h.push(i(h)+"skewX("+f+r)}function l(c,f,h,m,p,v){if(c!==h||f!==m){var y=p.push(i(p)+"scale(",null,",",null,")");v.push({i:y-4,x:Qp(c,h)},{i:y-2,x:Qp(f,m)})}else(h!==1||m!==1)&&p.push(i(p)+"scale("+h+","+m+")")}return function(c,f){var h=[],m=[];return c=t(c),f=t(f),a(c.translateX,c.translateY,f.translateX,f.translateY,h,m),s(c.rotate,f.rotate,h,m),o(c.skewX,f.skewX,h,m),l(c.scaleX,c.scaleY,f.scaleX,f.scaleY,h,m),c=f=null,function(p){for(var v=-1,y=m.length,x;++v<y;)h[(x=m[v]).i]=x.x(p);return h.join("")}}}var w6e=Wle(y6e,"px, ","px)","deg)"),x6e=Wle(b6e,", ",")",")"),S6e=1e-12;function yY(t){return((t=Math.exp(t))+1/t)/2}function E6e(t){return((t=Math.exp(t))-1/t)/2}function N6e(t){return((t=Math.exp(2*t))-1)/(t+1)}const _6e=function t(e,n,r){function i(a,s){var o=a[0],l=a[1],c=a[2],f=s[0],h=s[1],m=s[2],p=f-o,v=h-l,y=p*p+v*v,x,S;if(y<S6e)S=Math.log(m/c)/e,x=function(A){return[o+A*p,l+A*v,c*Math.exp(e*A*S)]};else{var _=Math.sqrt(y),N=(m*m-c*c+r*y)/(2*c*n*_),k=(m*m-c*c-r*y)/(2*m*n*_),P=Math.log(Math.sqrt(N*N+1)-N),O=Math.log(Math.sqrt(k*k+1)-k);S=(O-P)/e,x=function(A){var T=A*S,L=yY(P),B=c/(n*_)*(L*N6e(e*T+P)-E6e(P));return[o+B*p,l+B*v,c*L/yY(e*T+P)]}}return x.duration=S*1e3*e/Math.SQRT2,x}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return t(s,o,l)},i}(Math.SQRT2,2,4);var C6e=l_("start","end","cancel","interrupt"),T6e=[],zle=0,bY=1,O4=2,Ck=3,wY=4,j4=5,Tk=6;function _R(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;D6e(t,n,{name:e,index:r,group:i,on:C6e,tween:T6e,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:zle})}function PF(t,e){var n=Id(t,e);if(n.state>zle)throw new Error("too late; already scheduled");return n}function Zf(t,e){var n=Id(t,e);if(n.state>Ck)throw new Error("too late; already running");return n}function Id(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function D6e(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=_F(a,0,n.time);function a(c){n.state=bY,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,h,m,p;if(n.state!==bY)return l();for(f in r)if(p=r[f],p.name===n.name){if(p.state===Ck)return aY(s);p.state===wY?(p.state=Tk,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[f]):+f<e&&(p.state=Tk,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[f])}if(aY(function(){n.state===Ck&&(n.state=wY,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=O4,n.on.call("start",t,t.__data__,n.index,n.group),n.state===O4){for(n.state=Ck,i=new Array(m=n.tween.length),f=0,h=-1;f<m;++f)(p=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=p);i.length=h+1}}function o(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=j4,1),h=-1,m=i.length;++h<m;)i[h].call(t,f);n.state===j4&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Tk,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Dk(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>O4&&r.state<j4,r.state=Tk,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function k6e(t){return this.each(function(){Dk(this,t)})}function P6e(t,e){var n,r;return function(){var i=Zf(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function A6e(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Zf(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}a.tween=i}}function R6e(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Id(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?P6e:A6e)(n,t,e))}function AF(t,e,n){var r=t._id;return t.each(function(){var i=Zf(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Id(i,r).value[e]}}function Hle(t,e){var n;return(typeof e=="number"?Qp:e instanceof bN?gY:(n=bN(e))?(e=n,gY):v6e)(t,e)}function O6e(t){return function(){this.removeAttribute(t)}}function j6e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function I6e(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function M6e(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function V6e(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function $6e(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function L6e(t,e){var n=NR(t),r=n==="transform"?x6e:Hle;return this.attrTween(t,typeof e=="function"?(n.local?$6e:V6e)(n,r,AF(this,"attr."+t,e)):e==null?(n.local?j6e:O6e)(n):(n.local?M6e:I6e)(n,r,e))}function F6e(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function B6e(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function U6e(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&B6e(t,a)),n}return i._value=e,i}function W6e(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&F6e(t,a)),n}return i._value=e,i}function z6e(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=NR(t);return this.tween(n,(r.local?U6e:W6e)(r,e))}function H6e(t,e){return function(){PF(this,t).delay=+e.apply(this,arguments)}}function G6e(t,e){return e=+e,function(){PF(this,t).delay=e}}function K6e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?H6e:G6e)(e,t)):Id(this.node(),e).delay}function Y6e(t,e){return function(){Zf(this,t).duration=+e.apply(this,arguments)}}function J6e(t,e){return e=+e,function(){Zf(this,t).duration=e}}function q6e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Y6e:J6e)(e,t)):Id(this.node(),e).duration}function X6e(t,e){if(typeof e!="function")throw new Error;return function(){Zf(this,t).ease=e}}function Z6e(t){var e=this._id;return arguments.length?this.each(X6e(e,t)):Id(this.node(),e).ease}function Q6e(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Zf(this,t).ease=n}}function e8e(t){if(typeof t!="function")throw new Error;return this.each(Q6e(this._id,t))}function t8e(t){typeof t!="function"&&(t=_le(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,c=0;c<s;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new Tm(r,this._parents,this._name,this._id)}function n8e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=e[o],c=n[o],f=l.length,h=s[o]=new Array(f),m,p=0;p<f;++p)(m=l[p]||c[p])&&(h[p]=m);for(;o<r;++o)s[o]=e[o];return new Tm(s,this._parents,this._name,this._id)}function r8e(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function i8e(t,e,n){var r,i,a=r8e(e)?PF:Zf;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function a8e(t,e){var n=this._id;return arguments.length<2?Id(this.node(),n).on.on(t):this.each(i8e(n,t,e))}function s8e(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function o8e(){return this.on("end.remove",s8e(this._id))}function l8e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=TF(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],l=o.length,c=a[s]=new Array(l),f,h,m=0;m<l;++m)(f=o[m])&&(h=t.call(f,f.__data__,m,o))&&("__data__"in f&&(h.__data__=f.__data__),c[m]=h,_R(c[m],e,n,m,c,Id(f,n)));return new Tm(a,this._parents,e,n)}function u8e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Nle(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l=r[o],c=l.length,f,h=0;h<c;++h)if(f=l[h]){for(var m=t.call(f,f.__data__,h,l),p,v=Id(f,n),y=0,x=m.length;y<x;++y)(p=m[y])&&_R(p,e,n,y,m,v);a.push(m),s.push(f)}return new Tm(a,s,e,n)}var c8e=u_.prototype.constructor;function d8e(){return new c8e(this._groups,this._parents)}function f8e(t,e){var n,r,i;return function(){var a=Vw(this,t),s=(this.style.removeProperty(t),Vw(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Gle(t){return function(){this.style.removeProperty(t)}}function h8e(t,e,n){var r,i=n+"",a;return function(){var s=Vw(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function m8e(t,e,n){var r,i,a;return function(){var s=Vw(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Vw(this,t))),s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o))}}function p8e(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var l=Zf(this,t),c=l.on,f=l.value[a]==null?o||(o=Gle(e)):void 0;(c!==n||i!==f)&&(r=(n=c).copy()).on(s,i=f),l.on=r}}function g8e(t,e,n){var r=(t+="")=="transform"?w6e:Hle;return e==null?this.styleTween(t,f8e(t,r)).on("end.style."+t,Gle(t)):typeof e=="function"?this.styleTween(t,m8e(t,r,AF(this,"style."+t,e))).each(p8e(this._id,t)):this.styleTween(t,h8e(t,r,e),n).on("end.style."+t,null)}function v8e(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function y8e(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&v8e(t,s,n)),r}return a._value=e,a}function b8e(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,y8e(t,e,n??""))}function w8e(t){return function(){this.textContent=t}}function x8e(t){return function(){var e=t(this);this.textContent=e??""}}function S8e(t){return this.tween("text",typeof t=="function"?x8e(AF(this,"text",t)):w8e(t==null?"":t+""))}function E8e(t){return function(e){this.textContent=t.call(this,e)}}function N8e(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&E8e(i)),e}return r._value=t,r}function _8e(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,N8e(t))}function C8e(){for(var t=this._name,e=this._id,n=Kle(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,c=0;c<o;++c)if(l=s[c]){var f=Id(l,e);_R(l,t,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Tm(r,this._parents,t,n)}function T8e(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var c=Zf(this,r),f=c.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),i===0&&a()})}var D8e=0;function Tm(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Kle(){return++D8e}var em=u_.prototype;Tm.prototype={constructor:Tm,select:l8e,selectAll:u8e,selectChild:em.selectChild,selectChildren:em.selectChildren,filter:t8e,merge:n8e,selection:d8e,transition:C8e,call:em.call,nodes:em.nodes,node:em.node,size:em.size,empty:em.empty,each:em.each,on:a8e,attr:L6e,attrTween:z6e,style:g8e,styleTween:b8e,text:S8e,textTween:_8e,remove:o8e,tween:R6e,delay:K6e,duration:q6e,ease:Z6e,easeVarying:e8e,end:T8e,[Symbol.iterator]:em[Symbol.iterator]};function k8e(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var P8e={time:null,delay:0,duration:250,ease:k8e};function A8e(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function R8e(t){var e,n;t instanceof Tm?(e=t._id,t=t._name):(e=Kle(),(n=P8e).time=NF(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,c=0;c<o;++c)(l=s[c])&&_R(l,t,e,c,s,n||A8e(l,e));return new Tm(r,this._parents,t,e)}u_.prototype.interrupt=k6e;u_.prototype.transition=R8e;const aD=t=>()=>t;function O8e(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function fm(t,e,n){this.k=t,this.x=e,this.y=n}fm.prototype={constructor:fm,scale:function(t){return t===1?this:new fm(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new fm(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $w=new fm(1,0,0);Yle.prototype=fm.prototype;function Yle(t){for(;!t.__zoom;)if(!(t=t.parentNode))return $w;return t.__zoom}function VM(t){t.stopImmediatePropagation()}function DS(t){t.preventDefault(),t.stopImmediatePropagation()}function j8e(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function I8e(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function xY(){return this.__zoom||$w}function M8e(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function V8e(){return navigator.maxTouchPoints||"ontouchstart"in this}function $8e(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function kE(){var t=j8e,e=I8e,n=$8e,r=M8e,i=V8e,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,l=_6e,c=l_("start","zoom","end"),f,h,m,p=500,v=150,y=0,x=10;function S(I){I.property("__zoom",xY).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",B).filter(i).on("touchstart.zoom",W).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(I,H,q,F){var J=I.selection?I.selection():I;J.property("__zoom",xY),I!==J?P(I,H,q,F):J.interrupt().each(function(){O(this,arguments).event(F).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},S.scaleBy=function(I,H,q,F){S.scaleTo(I,function(){var J=this.__zoom.k,Z=typeof H=="function"?H.apply(this,arguments):H;return J*Z},q,F)},S.scaleTo=function(I,H,q,F){S.transform(I,function(){var J=e.apply(this,arguments),Z=this.__zoom,G=q==null?k(J):typeof q=="function"?q.apply(this,arguments):q,oe=Z.invert(G),ae=typeof H=="function"?H.apply(this,arguments):H;return n(N(_(Z,ae),G,oe),J,s)},q,F)},S.translateBy=function(I,H,q,F){S.transform(I,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof q=="function"?q.apply(this,arguments):q),e.apply(this,arguments),s)},null,F)},S.translateTo=function(I,H,q,F,J){S.transform(I,function(){var Z=e.apply(this,arguments),G=this.__zoom,oe=F==null?k(Z):typeof F=="function"?F.apply(this,arguments):F;return n($w.translate(oe[0],oe[1]).scale(G.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof q=="function"?-q.apply(this,arguments):-q),Z,s)},F,J)};function _(I,H){return H=Math.max(a[0],Math.min(a[1],H)),H===I.k?I:new fm(H,I.x,I.y)}function N(I,H,q){var F=H[0]-q[0]*I.k,J=H[1]-q[1]*I.k;return F===I.x&&J===I.y?I:new fm(I.k,F,J)}function k(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function P(I,H,q,F){I.on("start.zoom",function(){O(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(F).end()}).tween("zoom",function(){var J=this,Z=arguments,G=O(J,Z).event(F),oe=e.apply(J,Z),ae=q==null?k(oe):typeof q=="function"?q.apply(J,Z):q,te=Math.max(oe[1][0]-oe[0][0],oe[1][1]-oe[0][1]),re=J.__zoom,X=typeof H=="function"?H.apply(J,Z):H,ce=l(re.invert(ae).concat(te/re.k),X.invert(ae).concat(te/X.k));return function(he){if(he===1)he=X;else{var ve=ce(he),Ne=te/ve[2];he=new fm(Ne,ae[0]-ve[0]*Ne,ae[1]-ve[1]*Ne)}G.zoom(null,he)}})}function O(I,H,q){return!q&&I.__zooming||new A(I,H)}function A(I,H){this.that=I,this.args=H,this.active=0,this.sourceEvent=null,this.extent=e.apply(I,H),this.taps=0}A.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,H){return this.mouse&&I!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var H=ba(this.that).datum();c.call(I,this.that,new O8e(I,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:c}),H)}};function T(I,...H){if(!t.apply(this,arguments))return;var q=O(this,H).event(I),F=this.__zoom,J=Math.max(a[0],Math.min(a[1],F.k*Math.pow(2,r.apply(this,arguments)))),Z=md(I);if(q.wheel)(q.mouse[0][0]!==Z[0]||q.mouse[0][1]!==Z[1])&&(q.mouse[1]=F.invert(q.mouse[0]=Z)),clearTimeout(q.wheel);else{if(F.k===J)return;q.mouse=[Z,F.invert(Z)],Dk(this),q.start()}DS(I),q.wheel=setTimeout(G,v),q.zoom("mouse",n(N(_(F,J),q.mouse[0],q.mouse[1]),q.extent,s));function G(){q.wheel=null,q.end()}}function L(I,...H){if(m||!t.apply(this,arguments))return;var q=I.currentTarget,F=O(this,H,!0).event(I),J=ba(I.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",te,!0),Z=md(I,q),G=I.clientX,oe=I.clientY;Ile(I.view),VM(I),F.mouse=[Z,this.__zoom.invert(Z)],Dk(this),F.start();function ae(re){if(DS(re),!F.moved){var X=re.clientX-G,ce=re.clientY-oe;F.moved=X*X+ce*ce>y}F.event(re).zoom("mouse",n(N(F.that.__zoom,F.mouse[0]=md(re,q),F.mouse[1]),F.extent,s))}function te(re){J.on("mousemove.zoom mouseup.zoom",null),Mle(re.view,F.moved),DS(re),F.event(re).end()}}function B(I,...H){if(t.apply(this,arguments)){var q=this.__zoom,F=md(I.changedTouches?I.changedTouches[0]:I,this),J=q.invert(F),Z=q.k*(I.shiftKey?.5:2),G=n(N(_(q,Z),F,J),e.apply(this,H),s);DS(I),o>0?ba(this).transition().duration(o).call(P,G,F,I):ba(this).call(S.transform,G,F,I)}}function W(I,...H){if(t.apply(this,arguments)){var q=I.touches,F=q.length,J=O(this,H,I.changedTouches.length===F).event(I),Z,G,oe,ae;for(VM(I),G=0;G<F;++G)oe=q[G],ae=md(oe,this),ae=[ae,this.__zoom.invert(ae),oe.identifier],J.touch0?!J.touch1&&J.touch0[2]!==ae[2]&&(J.touch1=ae,J.taps=0):(J.touch0=ae,Z=!0,J.taps=1+!!f);f&&(f=clearTimeout(f)),Z&&(J.taps<2&&(h=ae[0],f=setTimeout(function(){f=null},p)),Dk(this),J.start())}}function Y(I,...H){if(this.__zooming){var q=O(this,H).event(I),F=I.changedTouches,J=F.length,Z,G,oe,ae;for(DS(I),Z=0;Z<J;++Z)G=F[Z],oe=md(G,this),q.touch0&&q.touch0[2]===G.identifier?q.touch0[0]=oe:q.touch1&&q.touch1[2]===G.identifier&&(q.touch1[0]=oe);if(G=q.that.__zoom,q.touch1){var te=q.touch0[0],re=q.touch0[1],X=q.touch1[0],ce=q.touch1[1],he=(he=X[0]-te[0])*he+(he=X[1]-te[1])*he,ve=(ve=ce[0]-re[0])*ve+(ve=ce[1]-re[1])*ve;G=_(G,Math.sqrt(he/ve)),oe=[(te[0]+X[0])/2,(te[1]+X[1])/2],ae=[(re[0]+ce[0])/2,(re[1]+ce[1])/2]}else if(q.touch0)oe=q.touch0[0],ae=q.touch0[1];else return;q.zoom("touch",n(N(G,oe,ae),q.extent,s))}}function V(I,...H){if(this.__zooming){var q=O(this,H).event(I),F=I.changedTouches,J=F.length,Z,G;for(VM(I),m&&clearTimeout(m),m=setTimeout(function(){m=null},p),Z=0;Z<J;++Z)G=F[Z],q.touch0&&q.touch0[2]===G.identifier?delete q.touch0:q.touch1&&q.touch1[2]===G.identifier&&delete q.touch1;if(q.touch1&&!q.touch0&&(q.touch0=q.touch1,delete q.touch1),q.touch0)q.touch0[1]=this.__zoom.invert(q.touch0[0]);else if(q.end(),q.taps===2&&(G=md(G,this),Math.hypot(h[0]-G[0],h[1]-G[1])<x)){var oe=ba(this).on("dblclick.zoom");oe&&oe.apply(this,arguments)}}}return S.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:aD(+I),S):r},S.filter=function(I){return arguments.length?(t=typeof I=="function"?I:aD(!!I),S):t},S.touchable=function(I){return arguments.length?(i=typeof I=="function"?I:aD(!!I),S):i},S.extent=function(I){return arguments.length?(e=typeof I=="function"?I:aD([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),S):e},S.scaleExtent=function(I){return arguments.length?(a[0]=+I[0],a[1]=+I[1],S):[a[0],a[1]]},S.translateExtent=function(I){return arguments.length?(s[0][0]=+I[0][0],s[1][0]=+I[1][0],s[0][1]=+I[0][1],s[1][1]=+I[1][1],S):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},S.constrain=function(I){return arguments.length?(n=I,S):n},S.duration=function(I){return arguments.length?(o=+I,S):o},S.interpolate=function(I){return arguments.length?(l=I,S):l},S.on=function(){var I=c.on.apply(c,arguments);return I===c?S:I},S.clickDistance=function(I){return arguments.length?(y=(I=+I)*I,S):Math.sqrt(y)},S.tapDistance=function(I){return arguments.length?(x=+I,S):x},S}const bc={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${n&&r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},VP=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Jle=["Enter"," ","Escape"];var Dg;(function(t){t.Strict="strict",t.Loose="loose"})(Dg||(Dg={}));var Ay;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ay||(Ay={}));var wN;(function(t){t.Partial="partial",t.Full="full"})(wN||(wN={}));const qle={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ag;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ag||(ag={}));var Ky;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ky||(Ky={}));var yn;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(yn||(yn={}));const SY={[yn.Left]:yn.Right,[yn.Right]:yn.Left,[yn.Top]:yn.Bottom,[yn.Bottom]:yn.Top};function Xle(t){return t===null?null:t?"valid":"invalid"}const Zle=t=>"id"in t&&"source"in t&&"target"in t,L8e=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Qle=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),d_=(t,e=[0,0])=>{const{width:n,height:r}=m_(t),i=t.origin??e,a=n*i[0],s=r*i[1];return{x:t.position.x-a,y:t.position.y-s}},f_=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=$4(r);n=OF(n,i)}}),jF(n)},eue=(t,e,[n,r,i]=[0,0,1],a=!1,s=!1)=>{const o={...h_(e,[n,r,i]),width:e.width/i,height:e.height/i},l=[];for(const[,c]of t){const{measured:f,selectable:h=!0,hidden:m=!1}=c,p=f.width??c.width??c.initialWidth??null,v=f.height??c.height??c.initialHeight??null;if(s&&!h||m)continue;const y=$P(o,xN(c)),x=p===null||v===null,S=a&&y>0,_=(p??0)*(v??0);(x||S||y>=_||c.dragging)&&l.push(c)}return l},F8e=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function I4(t,e){const n=new Map,r=e!=null&&e.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function M4({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:a},s){if(t.size===0)return Promise.resolve(!1);const o=f_(t),l=IF(o,e,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??a,(s==null?void 0:s.padding)??.1);return await r.setViewport(l,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function B8e(t,e){var n,r;return!e||e==="parent"?e:[e[0],[e[1][0]-(((n=t.measured)==null?void 0:n.width)??0),e[1][1]-(((r=t.measured)==null?void 0:r.height)??0)]]}function tue({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:a}){const s=n.get(t),o=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=o?o.internals.positionAbsolute:{x:0,y:0},f=s.origin??r;let h=B8e(s,s.extent||i);if(s.extent==="parent"&&!s.expandParent)if(!o)a==null||a("005",bc.error005());else{const p=s.measured.width,v=s.measured.height,y=o.measured.width,x=o.measured.height;p&&v&&y&&x&&(h=[[l,c],[l+y-p,c+x-v]])}else o&&_Y(s.extent)&&(h=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const m=_Y(h)?RF(e,h):e;return{position:{x:m.x-l+s.measured.width*f[0],y:m.y-c+s.measured.height*f[1]},positionAbsolute:m}}async function U8e({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const a=new Set(t.map(m=>m.id)),s=[];for(const m of n){if(m.deletable===!1)continue;const p=a.has(m.id),v=!p&&m.parentId&&s.find(y=>y.id===m.parentId);(p||v)&&s.push(m)}const o=new Set(e.map(m=>m.id)),l=r.filter(m=>m.deletable!==!1),f=F8e(s,l);for(const m of l)o.has(m.id)&&!f.find(v=>v.id===m.id)&&f.push(m);if(!i)return{edges:f,nodes:s};const h=await i({nodes:s,edges:f});return typeof h=="boolean"?h?{edges:f,nodes:s}:{edges:[],nodes:[]}:h}const Lw=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),RF=(t={x:0,y:0},e)=>({x:Lw(t.x,e[0][0],e[1][0]),y:Lw(t.y,e[0][1],e[1][1])}),EY=(t,e,n)=>t<e?Lw(Math.abs(t-e),1,e)/e:t>n?-Lw(Math.abs(t-n),1,e)/e:0,nue=(t,e,n=15,r=40)=>{const i=EY(t.x,r,e.width-r)*n,a=EY(t.y,r,e.height-r)*n;return[i,a]},OF=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),V4=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),jF=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),xN=(t,e=[0,0])=>{var i,a;const{x:n,y:r}=Qle(t)?t.internals.positionAbsolute:d_(t,e);return{x:n,y:r,width:((i=t.measured)==null?void 0:i.width)??t.width??t.initialWidth??0,height:((a=t.measured)==null?void 0:a.height)??t.height??t.initialHeight??0}},$4=(t,e=[0,0])=>{var i,a;const{x:n,y:r}=Qle(t)?t.internals.positionAbsolute:d_(t,e);return{x:n,y:r,x2:n+(((i=t.measured)==null?void 0:i.width)??t.width??t.initialWidth??0),y2:r+(((a=t.measured)==null?void 0:a.height)??t.height??t.initialHeight??0)}},rue=(t,e)=>jF(OF(V4(t),V4(e))),$P=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},NY=t=>yd(t.width)&&yd(t.height)&&yd(t.x)&&yd(t.y),yd=t=>!isNaN(t)&&isFinite(t),iue=(t,e)=>{console.warn(`[React Flow]: ${e} Help: https://reactflow.dev/error#${t}`)},CR=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),h_=({x:t,y:e},[n,r,i],a=!1,s=[1,1])=>{const o={x:(t-n)/i,y:(e-r)/i};return a?CR(o,s):o},aue=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),IF=(t,e,n,r,i,a)=>{const s=e/(t.width*(1+a)),o=n/(t.height*(1+a)),l=Math.min(s,o),c=Lw(l,r,i),f=t.x+t.width/2,h=t.y+t.height/2,m=e/2-f*c,p=n/2-h*c;return{x:m,y:p,zoom:c}},LP=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function _Y(t){return t!==void 0&&t!=="parent"}function m_(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function sue(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function oue(t,e={width:0,height:0},n,r,i){let a=n;const s={...t};for(;a;){const o=r.get(a);if(a=o==null?void 0:o.parentId,o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}}return s}function PE(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r}){const{x:i,y:a}=ym(t),s=h_({x:i,y:a},r),{x:o,y:l}=n?CR(s,e):s;return{xSnapped:o,ySnapped:l,...s}}const MF=t=>({width:t.offsetWidth,height:t.offsetHeight}),lue=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},W8e=["INPUT","SELECT","TEXTAREA"];function L4(t){var r,i;const e=((i=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:i[0])||t.target;return W8e.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const uue=t=>"clientX"in t,ym=(t,e)=>{var a,s;const n=uue(t),r=n?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,i=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},CY=(t,e,n,r,i)=>{const a=e.querySelectorAll(`.${t}`);return!a||!a.length?null:Array.from(a).map(s=>{const o=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:t,nodeId:i,position:s.getAttribute("data-handlepos"),x:(o.left-n.left)/r,y:(o.top-n.top)/r,...MF(s)}})};function cue({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:o}){const l=t*.125+i*.375+s*.375+n*.125,c=e*.125+a*.375+o*.375+r*.125,f=Math.abs(l-t),h=Math.abs(c-e);return[l,c,f,h]}function sD(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function TY({pos:t,x1:e,y1:n,x2:r,y2:i,c:a}){switch(t){case yn.Left:return[e-sD(e-r,a),n];case yn.Right:return[e+sD(r-e,a),n];case yn.Top:return[e,n-sD(n-i,a)];case yn.Bottom:return[e,n+sD(i-n,a)]}}function TR({sourceX:t,sourceY:e,sourcePosition:n=yn.Bottom,targetX:r,targetY:i,targetPosition:a=yn.Top,curvature:s=.25}){const[o,l]=TY({pos:n,x1:t,y1:e,x2:r,y2:i,c:s}),[c,f]=TY({pos:a,x1:r,y1:i,x2:t,y2:e,c:s}),[h,m,p,v]=cue({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:f});return[`M${t},${e} C${o},${l} ${c},${f} ${r},${i}`,h,m,p,v]}function due({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,a=n<t?n+i:n-i,s=Math.abs(r-e)/2,o=r<e?r+s:r-s;return[a,o,i,s]}function z8e({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const a=n||e.selected||t.selected,s=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(a?s:0)}function H8e({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const a=OF($4(t),$4(e));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return $P(s,jF(a))>0}const G8e=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,K8e=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),fue=(t,e)=>{if(!t.source||!t.target)return iue("006",bc.error006()),e;let n;return Zle(t)?n={...t}:n={...t,id:G8e(t)},K8e(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function hue({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,a,s,o]=due({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,a,s,o]}const DY={[yn.Left]:{x:-1,y:0},[yn.Right]:{x:1,y:0},[yn.Top]:{x:0,y:-1},[yn.Bottom]:{x:0,y:1}},Y8e=({source:t,sourcePosition:e=yn.Bottom,target:n})=>e===yn.Left||e===yn.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},kY=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function J8e({source:t,sourcePosition:e=yn.Bottom,target:n,targetPosition:r=yn.Top,center:i,offset:a}){const s=DY[e],o=DY[r],l={x:t.x+s.x*a,y:t.y+s.y*a},c={x:n.x+o.x*a,y:n.y+o.y*a},f=Y8e({source:l,sourcePosition:e,target:c}),h=f.x!==0?"x":"y",m=f[h];let p=[],v,y;const x={x:0,y:0},S={x:0,y:0},[_,N,k,P]=due({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[h]*o[h]===-1){v=i.x??_,y=i.y??N;const A=[{x:v,y:l.y},{x:v,y:c.y}],T=[{x:l.x,y},{x:c.x,y}];s[h]===m?p=h==="x"?A:T:p=h==="x"?T:A}else{const A=[{x:l.x,y:c.y}],T=[{x:c.x,y:l.y}];if(h==="x"?p=s.x===m?T:A:p=s.y===m?A:T,e===r){const V=Math.abs(t[h]-n[h]);if(V<=a){const I=Math.min(a-1,a-V);s[h]===m?x[h]=(l[h]>t[h]?-1:1)*I:S[h]=(c[h]>n[h]?-1:1)*I}}if(e!==r){const V=h==="x"?"y":"x",I=s[h]===o[V],H=l[V]>c[V],q=l[V]<c[V];(s[h]===1&&(!I&&H||I&&q)||s[h]!==1&&(!I&&q||I&&H))&&(p=h==="x"?A:T)}const L={x:l.x+x.x,y:l.y+x.y},B={x:c.x+S.x,y:c.y+S.y},W=Math.max(Math.abs(L.x-p[0].x),Math.abs(B.x-p[0].x)),Y=Math.max(Math.abs(L.y-p[0].y),Math.abs(B.y-p[0].y));W>=Y?(v=(L.x+B.x)/2,y=p[0].y):(v=p[0].x,y=(L.y+B.y)/2)}return[[t,{x:l.x+x.x,y:l.y+x.y},...p,{x:c.x+S.x,y:c.y+S.y},n],v,y,k,P]}function q8e(t,e,n,r){const i=Math.min(kY(t,e)/2,kY(e,n)/2,r),{x:a,y:s}=e;if(t.x===a&&a===n.x||t.y===s&&s===n.y)return`L${a} ${s}`;if(t.y===s){const c=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${a+i*c},${s}Q ${a},${s} ${a},${s+i*f}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${a},${s+i*l}Q ${a},${s} ${a+i*o},${s}`}function F4({sourceX:t,sourceY:e,sourcePosition:n=yn.Bottom,targetX:r,targetY:i,targetPosition:a=yn.Top,borderRadius:s=5,centerX:o,centerY:l,offset:c=20}){const[f,h,m,p,v]=J8e({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:o,y:l},offset:c});return[f.reduce((x,S,_)=>{let N="";return _>0&&_<f.length-1?N=q8e(f[_-1],S,f[_+1],s):N=`${_===0?"M":"L"}${S.x} ${S.y}`,x+=N,x},""),h,m,p,v]}function PY(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function X8e(t){var h;const{sourceNode:e,targetNode:n}=t;if(!PY(e)||!PY(n))return null;const r=e.internals.handleBounds||AY(e.handles),i=n.internals.handleBounds||AY(n.handles),a=RY((r==null?void 0:r.source)??[],t.sourceHandle),s=RY(t.connectionMode===Dg.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),t.targetHandle);if(!a||!s)return(h=t.onError)==null||h.call(t,"008",bc.error008(a?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const o=(a==null?void 0:a.position)||yn.Bottom,l=(s==null?void 0:s.position)||yn.Top,c=FP(e,a,o),f=FP(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:f.x,targetY:f.y,sourcePosition:o,targetPosition:l}}function AY(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function FP(t,e,n=yn.Left,r=!1){const i=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,a=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:s,height:o}=e??m_(t);if(r)return{x:i+s/2,y:a+o/2};switch((e==null?void 0:e.position)??n){case yn.Top:return{x:i+s/2,y:a};case yn.Right:return{x:i+s,y:a+o/2};case yn.Bottom:return{x:i+s/2,y:a+o};case yn.Left:return{x:i,y:a+o/2}}}function RY(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function B4(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function Z8e(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const a=new Set;return t.reduce((s,o)=>([o.markerStart||r,o.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const c=B4(l,e);a.has(c)||(s.push({id:c,color:l.color||n,...l}),a.add(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))}const VF={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}},Q8e={...VF,checkEquality:!0};function e9e(t,e,n){const r={...VF,...n};for(const i of t.values())i.parentId&&$F(i,t,e,r)}function mue(t,e,n,r){var o,l;const i={...Q8e,...r},a=new Map(e);e.clear(),n.clear();const s=r!=null&&r.elevateNodesOnSelect?1e3:0;for(const c of t){let f=a.get(c.id);i.checkEquality&&c===(f==null?void 0:f.internals.userNode)||(f={...i.defaults,...c,measured:{width:(o=c.measured)==null?void 0:o.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:d_(c,i.nodeOrigin),handleBounds:c.measured?f==null?void 0:f.internals.handleBounds:void 0,z:pue(c,s),userNode:c}}),e.set(c.id,f),c.parentId&&$F(f,e,n,r)}}function $F(t,e,n,r){const i={...VF,...r},a=t.parentId,s=e.get(a);if(!s){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}const o=n.get(a);o?o.set(t.id,t):n.set(a,new Map([[t.id,t]]));const l=r!=null&&r.elevateNodesOnSelect?1e3:0,{x:c,y:f,z:h}=t9e(t,s,i.nodeOrigin,l),m=t.internals.positionAbsolute,p=c!==m.x||f!==m.y;(p||h!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:p?{x:c,y:f}:m,z:h})}function pue(t,e){return(yd(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function t9e(t,e,n,r){const i=d_(t,n),a=pue(t,r),s=e.internals.z??0;return{x:e.internals.positionAbsolute.x+i.x,y:e.internals.positionAbsolute.y+i.y,z:s>a?s:a}}function LF(t,e,n,r=[0,0]){var s;const i=[],a=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const c=((s=a.get(o.parentId))==null?void 0:s.expandedRect)??xN(l),f=rue(c,o.rect);a.set(o.parentId,{expandedRect:f,parent:l})}return a.size>0&&a.forEach(({expandedRect:o,parent:l},c)=>{var N;const f=l.internals.positionAbsolute,h=m_(l),m=l.origin??r,p=o.x<f.x?Math.round(Math.abs(f.x-o.x)):0,v=o.y<f.y?Math.round(Math.abs(f.y-o.y)):0,y=Math.max(h.width,Math.round(o.width)),x=Math.max(h.height,Math.round(o.height)),S=(y-h.width)*m[0],_=(x-h.height)*m[1];(p>0||v>0||S||_)&&(i.push({id:c,type:"position",position:{x:l.position.x-p+S,y:l.position.y-v+_}}),(N=n.get(c))==null||N.forEach(k=>{t.some(P=>P.id===k.id)||i.push({id:k.id,type:"position",position:{x:k.position.x+p,y:k.position.y+v}})})),(h.width<o.width||h.height<o.height||p||v)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:y+(p?m[0]*p-S:0),height:x+(v?m[1]*v-_:0)}})}),i}function n9e(t,e,n,r,i){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const o=[],l=window.getComputedStyle(a),{m22:c}=new window.DOMMatrixReadOnly(l.transform),f=[];for(const h of t.values()){const m=e.get(h.id);if(m)if(m.hidden)m.internals={...m.internals,handleBounds:void 0},s=!0;else{const p=MF(h.nodeElement),v=m.measured.width!==p.width||m.measured.height!==p.height;if(!!(p.width&&p.height&&(v||!m.internals.handleBounds||h.force))){const x=h.nodeElement.getBoundingClientRect();m.measured=p,m.internals={...m.internals,positionAbsolute:d_(m,i),handleBounds:{source:CY("source",h.nodeElement,x,c,m.id),target:CY("target",h.nodeElement,x,c,m.id)}},m.parentId&&$F(m,e,n,{nodeOrigin:i}),s=!0,v&&(o.push({id:m.id,type:"dimensions",dimensions:p}),m.expandParent&&m.parentId&&f.push({id:m.id,parentId:m.parentId,rect:xN(m,i)}))}}}if(f.length>0){const h=LF(f,e,n,i);o.push(...h)}return{changes:o,updatedInternals:s}}async function r9e({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:a}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,a]],r),o=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(o)}function gue(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:a,sourceHandle:s=null,targetHandle:o=null}=r,l=`${i}-source-${s}`,c=`${a}-target-${o}`,f=t.get(l)||new Map,h=t.get(c)||new Map,m={edgeId:r.id,source:i,target:a,sourceHandle:s,targetHandle:o};e.set(r.id,r),t.set(l,f.set(`${a}-${o}`,m)),t.set(c,h.set(`${i}-${s}`,m))}}function vue(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:vue(n,e):!1}function OY(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function i9e(t,e,n,r){const i=new Map;for(const[a,s]of t)if((s.selected||s.id===r)&&(!s.parentId||!vue(s,t))&&(s.draggable||e&&typeof s.draggable>"u")){const o=t.get(a);o&&i.set(a,{id:a,position:o.position||{x:0,y:0},distance:{x:n.x-o.internals.positionAbsolute.x,y:n.y-o.internals.positionAbsolute.y},extent:o.extent,parentId:o.parentId,origin:o.origin,expandParent:o.expandParent,internals:{positionAbsolute:o.internals.positionAbsolute||{x:0,y:0}},measured:{width:o.measured.width??0,height:o.measured.height??0}})}return i}function $M({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){var s,o;const i=[];for(const[l,c]of e){const f=(s=n.get(l))==null?void 0:s.internals.userNode;f&&i.push({...f,position:c.position,dragging:r})}if(!t)return[i[0],i];const a=n.get(t).internals.userNode;return[{...a,position:((o=e.get(t))==null?void 0:o.position)||a.position,dragging:r},i]}function a9e({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let a={x:null,y:null},s=0,o=new Map,l=!1,c={x:0,y:0},f=null,h=!1,m=null,p=!1;function v({noDragClassName:x,handleSelector:S,domNode:_,isSelectable:N,nodeId:k,nodeClickDistance:P=0}){m=ba(_);function O({x:B,y:W},Y){const{nodeLookup:V,nodeExtent:I,snapGrid:H,snapToGrid:q,nodeOrigin:F,onNodeDrag:J,onSelectionDrag:Z,onError:G,updateNodePositions:oe}=e();a={x:B,y:W};let ae=!1,te={x:0,y:0,x2:0,y2:0};if(o.size>1&&I){const re=f_(o);te=V4(re)}for(const[re,X]of o){let ce={x:B-X.distance.x,y:W-X.distance.y};q&&(ce=CR(ce,H));let he=[[I[0][0],I[0][1]],[I[1][0],I[1][1]]];if(o.size>1&&I&&!X.extent){const{positionAbsolute:ke}=X.internals,Te=ke.x-te.x+I[0][0],ye=ke.x+X.measured.width-te.x2+I[1][0],Ie=ke.y-te.y+I[0][1],Re=ke.y+X.measured.height-te.y2+I[1][1];he=[[Te,Ie],[ye,Re]]}const{position:ve,positionAbsolute:Ne}=tue({nodeId:re,nextPosition:ce,nodeLookup:V,nodeExtent:he,nodeOrigin:F,onError:G});ae=ae||X.position.x!==ve.x||X.position.y!==ve.y,X.position=ve,X.internals.positionAbsolute=Ne}if(ae&&(oe(o,!0),Y&&(r||J||!k&&Z))){const[re,X]=$M({nodeId:k,dragItems:o,nodeLookup:V});r==null||r(Y,o,re,X),J==null||J(Y,re,X),k||Z==null||Z(Y,X)}}async function A(){if(!f)return;const{transform:B,panBy:W,autoPanSpeed:Y}=e(),[V,I]=nue(c,f,Y);(V!==0||I!==0)&&(a.x=(a.x??0)-V/B[2],a.y=(a.y??0)-I/B[2],await W({x:V,y:I})&&O(a,null)),s=requestAnimationFrame(A)}function T(B){var ae;const{nodeLookup:W,multiSelectionActive:Y,nodesDraggable:V,transform:I,snapGrid:H,snapToGrid:q,selectNodesOnDrag:F,onNodeDragStart:J,onSelectionDragStart:Z,unselectNodesAndEdges:G}=e();h=!0,(!F||!N)&&!Y&&k&&((ae=W.get(k))!=null&&ae.selected||G()),N&&F&&k&&(t==null||t(k));const oe=PE(B.sourceEvent,{transform:I,snapGrid:H,snapToGrid:q});if(a=oe,o=i9e(W,V,oe,k),o.size>0&&(n||J||!k&&Z)){const[te,re]=$M({nodeId:k,dragItems:o,nodeLookup:W});n==null||n(B.sourceEvent,o,te,re),J==null||J(B.sourceEvent,te,re),k||Z==null||Z(B.sourceEvent,re)}}const L=Vle().clickDistance(P).on("start",B=>{const{domNode:W,nodeDragThreshold:Y,transform:V,snapGrid:I,snapToGrid:H}=e();p=!1,Y===0&&T(B),a=PE(B.sourceEvent,{transform:V,snapGrid:I,snapToGrid:H}),f=(W==null?void 0:W.getBoundingClientRect())||null,c=ym(B.sourceEvent,f)}).on("drag",B=>{const{autoPanOnNodeDrag:W,transform:Y,snapGrid:V,snapToGrid:I,nodeDragThreshold:H}=e(),q=PE(B.sourceEvent,{transform:Y,snapGrid:V,snapToGrid:I});if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(p=!0),!p){if(!l&&W&&h&&(l=!0,A()),!h){const F=q.xSnapped-(a.x??0),J=q.ySnapped-(a.y??0);Math.sqrt(F*F+J*J)>H&&T(B)}(a.x!==q.xSnapped||a.y!==q.ySnapped)&&o&&h&&(c=ym(B.sourceEvent,f),O(q,B.sourceEvent))}}).on("end",B=>{if(!(!h||p)&&(l=!1,h=!1,cancelAnimationFrame(s),o.size>0)){const{nodeLookup:W,updateNodePositions:Y,onNodeDragStop:V,onSelectionDragStop:I}=e();if(Y(o,!1),i||V||!k&&I){const[H,q]=$M({nodeId:k,dragItems:o,nodeLookup:W,dragging:!1});i==null||i(B.sourceEvent,o,H,q),V==null||V(B.sourceEvent,H,q),k||I==null||I(B.sourceEvent,q)}}}).filter(B=>{const W=B.target;return!B.button&&(!x||!OY(W,`.${x}`,_))&&(!S||OY(W,S,_))});m.call(L)}function y(){m==null||m.on(".drag",null)}return{update:v,destroy:y}}function LM(t,e,n,r){let i=null;return[(e[n]||[]).reduce((s,o)=>{if(t.id===r.nodeId&&n===r.handleType&&o.id===r.handleId)i=o;else{const l=FP(t,o,o.position,!0);s.push({...o,...l})}return s},[]),i]}function s9e(t,e,n){let r=[],i=1/0;for(const a of n.values()){const s=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));s<=e&&(s<i?r=[a]:s===i&&r.push(a),i=s)}return r.length?r.length===1?r[0]:r.find(a=>a.type==="target")||r[0]:null}function o9e({nodeLookup:t,nodeId:e,handleId:n,handleType:r}){const i=new Map,a={nodeId:e,handleId:n,handleType:r};let s=null;for(const o of t.values())if(o.internals.handleBounds){const[l,c]=LM(o,o.internals.handleBounds,"source",a),[f,h]=LM(o,o.internals.handleBounds,"target",a);s=s||(c??h),[...l,...f].forEach(m=>i.set(`${m.nodeId}-${m.type}-${m.id}`,m))}if(!s){const o=t.get(e);if(o!=null&&o.internals.handleBounds){a.handleType=r==="source"?"target":"source";const[,l]=LM(o,o.internals.handleBounds,a.handleType,a);s=l}}return[i,s]}function yue(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function l9e(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const bue=()=>!0;function u9e(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:a,isTarget:s,domNode:o,nodeLookup:l,lib:c,autoPanOnConnect:f,flowId:h,panBy:m,cancelConnection:p,onConnectStart:v,onConnect:y,onConnectEnd:x,isValidConnection:S=bue,onReconnectEnd:_,updateConnection:N,getTransform:k,getFromHandle:P,autoPanSpeed:O}){const A=lue(t.target);let T=0,L;const{x:B,y:W}=ym(t),Y=A==null?void 0:A.elementFromPoint(B,W),V=yue(a,Y),I=o==null?void 0:o.getBoundingClientRect();if(!I||!V)return;let H=ym(t,I),q=!1,F=null,J=!1,Z=null;const[G,oe]=o9e({nodeLookup:l,nodeId:i,handleId:r,handleType:V});function ae(){if(!f||!I)return;const[ke,Te]=nue(H,I,O);m({x:ke,y:Te}),T=requestAnimationFrame(ae)}const te={...oe,nodeId:i,type:V,position:oe.position},re=l.get(i),ce={inProgress:!0,isValid:null,from:FP(re,te,yn.Left,!0),fromHandle:te,fromPosition:te.position,fromNode:re,to:H,toHandle:null,toPosition:SY[te.position],toNode:null};N(ce);let he=ce;v==null||v(t,{nodeId:i,handleId:r,handleType:V});function ve(ke){if(!P()||!te){Ne(ke);return}const Te=k();H=ym(ke,I),L=s9e(h_(H,Te,!1,[1,1]),n,G),q||(ae(),q=!0);const ye=wue(ke,{handle:L,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:S,doc:A,lib:c,flowId:h,handleLookup:G});Z=ye.handleDomNode,F=ye.connection,J=l9e(!!L,ye.isValid);const Ie={...he,isValid:J,to:L&&J?aue({x:L.x,y:L.y},Te):H,toHandle:ye.toHandle,toPosition:J&&ye.toHandle?ye.toHandle.position:SY[te.position],toNode:ye.toHandle?l.get(ye.toHandle.nodeId):null};J&&L&&he.toHandle&&Ie.toHandle&&he.toHandle.type===Ie.toHandle.type&&he.toHandle.nodeId===Ie.toHandle.nodeId&&he.toHandle.id===Ie.toHandle.id||(N(Ie),he=Ie)}function Ne(ke){(L||Z)&&F&&J&&(y==null||y(F)),x==null||x(ke),a&&(_==null||_(ke)),p(),cancelAnimationFrame(T),q=!1,J=!1,F=null,Z=null,A.removeEventListener("mousemove",ve),A.removeEventListener("mouseup",Ne),A.removeEventListener("touchmove",ve),A.removeEventListener("touchend",Ne)}A.addEventListener("mousemove",ve),A.addEventListener("mouseup",Ne),A.addEventListener("touchmove",ve),A.addEventListener("touchend",Ne)}function wue(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:a,doc:s,lib:o,flowId:l,isValidConnection:c=bue,handleLookup:f}){const h=a==="target",m=e?s.querySelector(`.${o}-flow__handle[data-id="${l}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:p,y:v}=ym(t),y=s.elementFromPoint(p,v),x=y!=null&&y.classList.contains(`${o}-flow__handle`)?y:m,S={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){const _=yue(void 0,x),N=x.getAttribute("data-nodeid"),k=x.getAttribute("data-handleid"),P=x.classList.contains("connectable"),O=x.classList.contains("connectableend");if(!N)return S;const A={source:h?N:r,sourceHandle:h?k:i,target:h?r:N,targetHandle:h?i:k};S.connection=A;const L=P&&O&&(n===Dg.Strict?h&&_==="source"||!h&&_==="target":N!==r||k!==i);S.isValid=L&&c(A);const B=f==null?void 0:f.get(`${N}-${_}-${k}`);B&&(S.toHandle={...B})}return S}const U4={onPointerDown:u9e,isValid:wue};function c9e({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=ba(t);function a({translateExtent:o,width:l,height:c,zoomStep:f=10,pannable:h=!0,zoomable:m=!0,inversePan:p=!1}){const v=N=>{const k=n();if(N.sourceEvent.type!=="wheel"||!e)return;const P=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*f,O=k[2]*Math.pow(2,P);e.scaleTo(O)};let y=[0,0];const x=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(y=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},S=N=>{const k=n();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!e)return;const P=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],O=[P[0]-y[0],P[1]-y[1]];y=P;const A=r()*Math.max(k[2],Math.log(k[2]))*(p?-1:1),T={x:k[0]-O[0]*A,y:k[1]-O[1]*A},L=[[0,0],[l,c]];e.setViewportConstrained({x:T.x,y:T.y,zoom:k[2]},L,o)},_=kE().on("start",x).on("zoom",h?S:null).on("zoom.wheel",m?v:null);i.call(_,{})}function s(){i.on("zoom",null)}return{update:a,destroy:s,pointer:md}}const d9e=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,DR=t=>({x:t.x,y:t.y,zoom:t.k}),FM=({x:t,y:e,zoom:n})=>$w.translate(t,e).scale(n),cw=(t,e)=>t.target.closest(`.${e}`),xue=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),BM=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},Sue=t=>{const e=t.ctrlKey&&LP()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function f9e({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:o,onPanZoom:l,onPanZoomEnd:c}){return f=>{if(cw(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(f.ctrlKey&&s){const x=md(f),S=Sue(f),_=h*Math.pow(2,S);r.scaleTo(n,_,x,f);return}const m=f.deltaMode===1?20:1;let p=i===Ay.Vertical?0:f.deltaX*m,v=i===Ay.Horizontal?0:f.deltaY*m;!LP()&&f.shiftKey&&i!==Ay.Vertical&&(p=f.deltaY*m,v=0),r.translateBy(n,-(p/h)*a,-(v/h)*a,{internal:!0});const y=DR(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,o==null||o(f,y)),t.isPanScrolling&&(l==null||l(f,y),t.panScrollTimeout=setTimeout(()=>{c==null||c(f,y),t.isPanScrolling=!1},150))}}function h9e({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||cw(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function m9e({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{var a,s,o;if((a=r.sourceEvent)!=null&&a.internal)return;const i=DR(r.transform);t.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=i,((o=r.sourceEvent)==null?void 0:o.type)==="mousedown"&&e(!0),n&&(n==null||n(r.sourceEvent,i))}}function p9e({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return a=>{var s,o;t.usedRightMouseButton=!!(n&&xue(e,t.mouseButton??0)),(s=a.sourceEvent)!=null&&s.sync||r([a.transform.x,a.transform.y,a.transform.k]),i&&!((o=a.sourceEvent)!=null&&o.internal)&&(i==null||i(a.sourceEvent,DR(a.transform)))}}function g9e({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:a}){return s=>{var o;if(!((o=s.sourceEvent)!=null&&o.internal)&&(t.isZoomingOrPanning=!1,a&&xue(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&d9e(t.prevViewport,s.transform))){const l=DR(s.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function v9e({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:o,noPanClassName:l,lib:c}){return f=>{var v;const h=t||e,m=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(cw(f,`${c}-flow__node`)||cw(f,`${c}-flow__edge`)))return!0;if(!r&&!h&&!i&&!a&&!n||s||cw(f,o)&&f.type==="wheel"||cw(f,l)&&(f.type!=="wheel"||i&&f.type==="wheel"&&!t)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((v=f.touches)==null?void 0:v.length)>1)return f.preventDefault(),!1;if(!h&&!i&&!m&&f.type==="wheel"||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&p}}function y9e({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:l,onTransformChange:c,onDraggingChange:f}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=t.getBoundingClientRect(),p=kE().clickDistance(!yd(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),v=ba(t).call(p);k({x:a.x,y:a.y,zoom:Lw(a.zoom,e,n)},[[0,0],[m.width,m.height]],i);const y=v.on("wheel.zoom"),x=v.on("dblclick.zoom");p.wheelDelta(Sue);function S(V,I){return v?new Promise(H=>{p==null||p.transform(BM(v,I==null?void 0:I.duration,()=>H(!0)),V)}):Promise.resolve(!1)}function _({noWheelClassName:V,noPanClassName:I,onPaneContextMenu:H,userSelectionActive:q,panOnScroll:F,panOnDrag:J,panOnScrollMode:Z,panOnScrollSpeed:G,preventScrolling:oe,zoomOnPinch:ae,zoomOnScroll:te,zoomOnDoubleClick:re,zoomActivationKeyPressed:X,lib:ce}){q&&!h.isZoomingOrPanning&&N();const ve=F&&!X&&!q?f9e({zoomPanValues:h,noWheelClassName:V,d3Selection:v,d3Zoom:p,panOnScrollMode:Z,panOnScrollSpeed:G,zoomOnPinch:ae,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:l}):h9e({noWheelClassName:V,preventScrolling:oe,d3ZoomHandler:y});if(v.on("wheel.zoom",ve,{passive:!1}),!q){const ke=m9e({zoomPanValues:h,onDraggingChange:f,onPanZoomStart:o});p.on("start",ke);const Te=p9e({zoomPanValues:h,panOnDrag:J,onPaneContextMenu:!!H,onPanZoom:s,onTransformChange:c});p.on("zoom",Te);const ye=g9e({zoomPanValues:h,panOnDrag:J,panOnScroll:F,onPaneContextMenu:H,onPanZoomEnd:l,onDraggingChange:f});p.on("end",ye)}const Ne=v9e({zoomActivationKeyPressed:X,panOnDrag:J,zoomOnScroll:te,panOnScroll:F,zoomOnDoubleClick:re,zoomOnPinch:ae,userSelectionActive:q,noPanClassName:I,noWheelClassName:V,lib:ce});p.filter(Ne),re?v.on("dblclick.zoom",x):v.on("dblclick.zoom",null)}function N(){p.on("zoom",null)}async function k(V,I,H){const q=FM(V),F=p==null?void 0:p.constrain()(q,I,H);return F&&await S(F),new Promise(J=>J(F))}async function P(V,I){const H=FM(V);return await S(H,I),new Promise(q=>q(H))}function O(V){if(v){const I=FM(V),H=v.property("__zoom");(H.k!==V.zoom||H.x!==V.x||H.y!==V.y)&&(p==null||p.transform(v,I,null,{sync:!0}))}}function A(){const V=v?Yle(v.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function T(V,I){return v?new Promise(H=>{p==null||p.scaleTo(BM(v,I==null?void 0:I.duration,()=>H(!0)),V)}):Promise.resolve(!1)}function L(V,I){return v?new Promise(H=>{p==null||p.scaleBy(BM(v,I==null?void 0:I.duration,()=>H(!0)),V)}):Promise.resolve(!1)}function B(V){p==null||p.scaleExtent(V)}function W(V){p==null||p.translateExtent(V)}function Y(V){const I=!yd(V)||V<0?0:V;p==null||p.clickDistance(I)}return{update:_,destroy:N,setViewport:P,setViewportConstrained:k,getViewport:A,scaleTo:T,scaleBy:L,setScaleExtent:B,setTranslateExtent:W,syncViewport:O,setClickDistance:Y}}var AE;(function(t){t.Line="line",t.Handle="handle"})(AE||(AE={}));function b9e({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:a}){const s=t-e,o=n-r,l=[s>0?1:s<0?-1:0,o>0?1:o<0?-1:0];return s&&i&&(l[0]=l[0]*-1),o&&a&&(l[1]=l[1]*-1),l}function w9e(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function Up(t,e){return Math.max(0,e-t)}function Wp(t,e){return Math.max(0,t-e)}function oD(t,e,n){return Math.max(0,e-t,t-n)}function jY(t,e){return t?!e:e}function x9e(t,e,n,r,i,a,s,o){let{affectsX:l,affectsY:c}=e;const{isHorizontal:f,isVertical:h}=e,m=f&&h,{xSnapped:p,ySnapped:v}=n,{minWidth:y,maxWidth:x,minHeight:S,maxHeight:_}=r,{x:N,y:k,width:P,height:O,aspectRatio:A}=t;let T=Math.floor(f?p-t.pointerX:0),L=Math.floor(h?v-t.pointerY:0);const B=P+(l?-T:T),W=O+(c?-L:L),Y=-a[0]*P,V=-a[1]*O;let I=oD(B,y,x),H=oD(W,S,_);if(s){let J=0,Z=0;l&&T<0?J=Up(N+T+Y,s[0][0]):!l&&T>0&&(J=Wp(N+B+Y,s[1][0])),c&&L<0?Z=Up(k+L+V,s[0][1]):!c&&L>0&&(Z=Wp(k+W+V,s[1][1])),I=Math.max(I,J),H=Math.max(H,Z)}if(o){let J=0,Z=0;l&&T>0?J=Wp(N+T,o[0][0]):!l&&T<0&&(J=Up(N+B,o[1][0])),c&&L>0?Z=Wp(k+L,o[0][1]):!c&&L<0&&(Z=Up(k+W,o[1][1])),I=Math.max(I,J),H=Math.max(H,Z)}if(i){if(f){const J=oD(B/A,S,_)*A;if(I=Math.max(I,J),s){let Z=0;!l&&!c||l&&!c&&m?Z=Wp(k+V+B/A,s[1][1])*A:Z=Up(k+V+(l?T:-T)/A,s[0][1])*A,I=Math.max(I,Z)}if(o){let Z=0;!l&&!c||l&&!c&&m?Z=Up(k+B/A,o[1][1])*A:Z=Wp(k+(l?T:-T)/A,o[0][1])*A,I=Math.max(I,Z)}}if(h){const J=oD(W*A,y,x)/A;if(H=Math.max(H,J),s){let Z=0;!l&&!c||c&&!l&&m?Z=Wp(N+W*A+Y,s[1][0])/A:Z=Up(N+(c?L:-L)*A+Y,s[0][0])/A,H=Math.max(H,Z)}if(o){let Z=0;!l&&!c||c&&!l&&m?Z=Up(N+W*A,o[1][0])/A:Z=Wp(N+(c?L:-L)*A,o[0][0])/A,H=Math.max(H,Z)}}}L=L+(L<0?H:-H),T=T+(T<0?I:-I),i&&(m?B>W*A?L=(jY(l,c)?-T:T)/A:T=(jY(l,c)?-L:L)*A:f?(L=T/A,c=l):(T=L*A,l=c));const q=l?N+T:N,F=c?k+L:k;return{width:P+(l?-T:T),height:O+(c?-L:L),x:a[0]*T*(l?-1:1)+q,y:a[1]*L*(c?-1:1)+F}}const Eue={width:0,height:0,x:0,y:0},S9e={...Eue,pointerX:0,pointerY:0,aspectRatio:1};function E9e(t){return[[0,0],[t.measured.width,t.measured.height]]}function N9e(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,a=t.measured.width??0,s=t.measured.height??0,o=n[0]*a,l=n[1]*s;return[[r-o,i-l],[r+a-o,i+s-l]]}function _9e({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const a=ba(t);function s({controlPosition:l,boundaries:c,keepAspectRatio:f,onResizeStart:h,onResize:m,onResizeEnd:p,shouldResize:v}){let y={...Eue},x={...S9e};const S=w9e(l);let _,N=[],k,P,O;const A=Vle().on("start",T=>{const{nodeLookup:L,transform:B,snapGrid:W,snapToGrid:Y,nodeOrigin:V}=n();if(_=L.get(e),!_)return;const{xSnapped:I,ySnapped:H}=PE(T.sourceEvent,{transform:B,snapGrid:W,snapToGrid:Y});y={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},x={...y,pointerX:I,pointerY:H,aspectRatio:y.width/y.height},k=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(k=L.get(_.parentId),P=k&&_.extent==="parent"?E9e(k):void 0),N=[],O=void 0;for(const[q,F]of L)if(F.parentId===e&&(N.push({id:q,position:{...F.position},extent:F.extent}),F.extent==="parent"||F.expandParent)){const J=N9e(F,_,F.origin??V);O?O=[[Math.min(J[0][0],O[0][0]),Math.min(J[0][1],O[0][1])],[Math.max(J[1][0],O[1][0]),Math.max(J[1][1],O[1][1])]]:O=J}h==null||h(T,{...y})}).on("drag",T=>{const{transform:L,snapGrid:B,snapToGrid:W,nodeOrigin:Y}=n(),V=PE(T.sourceEvent,{transform:L,snapGrid:B,snapToGrid:W}),I=[];if(!_)return;const{x:H,y:q,width:F,height:J}=y,Z={},G=_.origin??Y,{width:oe,height:ae,x:te,y:re}=x9e(x,S,V,c,f,G,P,O),X=oe!==F,ce=ae!==J,he=te!==H&&X,ve=re!==q&&ce;if(!he&&!ve&&!X&&!ce)return;if((he||ve||G[0]===1||G[1]===1)&&(Z.x=he?te:y.x,Z.y=ve?re:y.y,y.x=Z.x,y.y=Z.y,N.length>0)){const ye=te-H,Ie=re-q;for(const Re of N)Re.position={x:Re.position.x-ye+G[0]*(oe-F),y:Re.position.y-Ie+G[1]*(ae-J)},I.push(Re)}if((X||ce)&&(Z.width=X?oe:y.width,Z.height=ce?ae:y.height,y.width=Z.width,y.height=Z.height),k&&_.expandParent){const ye=G[0]*(Z.width??0);Z.x&&Z.x<ye&&(y.x=ye,x.x=x.x-(Z.x-ye));const Ie=G[1]*(Z.height??0);Z.y&&Z.y<Ie&&(y.y=Ie,x.y=x.y-(Z.y-Ie))}const Ne=b9e({width:y.width,prevWidth:F,height:y.height,prevHeight:J,affectsX:S.affectsX,affectsY:S.affectsY}),ke={...y,direction:Ne};(v==null?void 0:v(T,ke))!==!1&&(m==null||m(T,ke),r(Z,I))}).on("end",T=>{p==null||p(T,{...y}),i==null||i()});a.call(A)}function o(){a.on(".drag",null)}return{update:s,destroy:o}}const{useDebugValue:C9e}=it,{useSyncExternalStoreWithSelector:T9e}=hle,D9e=t=>t;function Nue(t,e=D9e,n){const r=T9e(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return C9e(r),r}const IY=(t,e)=>{const n=lle(t),r=(i,a=e)=>Nue(n,i,a);return Object.assign(r,n),r},k9e=(t,e)=>t?IY(t,e):IY,kR=R.createContext(null),P9e=kR.Provider,_ue=bc.error001();function Ir(t,e){const n=R.useContext(kR);if(n===null)throw new Error(_ue);return Nue(n,t,e)}function Ui(){const t=R.useContext(kR);if(t===null)throw new Error(_ue);return R.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const MY={display:"none"},A9e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Cue="react-flow__node-desc",Tue="react-flow__edge-desc",R9e="react-flow__aria-live",O9e=t=>t.ariaLiveMessage;function j9e({rfId:t}){const e=Ir(O9e);return de.jsx("div",{id:`${R9e}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:A9e,children:e})}function I9e({rfId:t,disableKeyboardA11y:e}){return de.jsxs(de.Fragment,{children:[de.jsxs("div",{id:`${Cue}-${t}`,style:MY,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),de.jsx("div",{id:`${Tue}-${t}`,style:MY,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&de.jsx(j9e,{rfId:t})]})}const M9e=t=>t.userSelectionActive?"none":"all";function FF({position:t="top-left",children:e,className:n,style:r,...i}){const a=Ir(M9e),s=`${t}`.split("-");return de.jsx("div",{className:Ra(["react-flow__panel",n,...s]),style:{...r,pointerEvents:a},...i,children:e})}function V9e({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:de.jsx(FF,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:de.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const $9e=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},lD=t=>t.id;function L9e(t,e){return Oi(t.selectedNodes.map(lD),e.selectedNodes.map(lD))&&Oi(t.selectedEdges.map(lD),e.selectedEdges.map(lD))}function F9e({onSelectionChange:t}){const e=Ui(),{selectedNodes:n,selectedEdges:r}=Ir($9e,L9e);return R.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChangeHandlers.forEach(a=>a(i))},[n,r,t]),null}const B9e=t=>!!t.onSelectionChangeHandlers;function U9e({onSelectionChange:t}){const e=Ir(B9e);return t||e?de.jsx(F9e,{onSelectionChange:t}):null}const Due=[0,0],W9e={x:0,y:0,zoom:1},z9e=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],VY=[...z9e,"rfId"],H9e=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),$Y={translateExtent:VP,nodeOrigin:Due,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function G9e(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:o,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=Ir(H9e,Oi),f=Ui();R.useEffect(()=>(l(t.defaultNodes,t.defaultEdges),()=>{h.current=$Y,o()}),[]);const h=R.useRef($Y);return R.useEffect(()=>{for(const m of VY){const p=t[m],v=h.current[m];p!==v&&(typeof t[m]>"u"||(m==="nodes"?e(p):m==="edges"?n(p):m==="minZoom"?r(p):m==="maxZoom"?i(p):m==="translateExtent"?a(p):m==="nodeExtent"?s(p):m==="paneClickDistance"?c(p):m==="fitView"?f.setState({fitViewOnInit:p}):m==="fitViewOptions"?f.setState({fitViewOnInitOptions:p}):f.setState({[m]:p})))}h.current=t},VY.map(m=>t[m])),null}function LY(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function K9e(t){var r;const[e,n]=R.useState(t==="system"?null:t);return R.useEffect(()=>{if(t!=="system"){n(t);return}const i=LY(),a=()=>n(i!=null&&i.matches?"dark":"light");return a(),i==null||i.addEventListener("change",a),()=>{i==null||i.removeEventListener("change",a)}},[t]),e!==null?e:(r=LY())!=null&&r.matches?"dark":"light"}const FY=typeof document<"u"?document:null;function Jf(t=null,e={target:FY,actInsideInputWithModifier:!0}){const[n,r]=R.useState(!1),i=R.useRef(!1),a=R.useRef(new Set([])),[s,o]=R.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),f=c.reduce((h,m)=>h.concat(...m),[]);return[c,f]}return[[],[]]},[t]);return R.useEffect(()=>{const l=(e==null?void 0:e.target)||FY;if(t!==null){const c=m=>{if(i.current=m.ctrlKey||m.metaKey||m.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&L4(m))return!1;const v=UY(m.code,o);a.current.add(m[v]),BY(s,a.current,!1)&&(m.preventDefault(),r(!0))},f=m=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&L4(m))return!1;const v=UY(m.code,o);BY(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(m[v]),m.key==="Meta"&&a.current.clear(),i.current=!1},h=()=>{a.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",f),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",f),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function BY(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function UY(t,e){return e.includes(t)?"code":"key"}const Y9e=()=>{const t=Ui();return R.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,a],panZoom:s}=t.getState();return s?(await s.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,width:r,height:i,minZoom:a,maxZoom:s,panZoom:o}=t.getState(),l=I4(n,e);return o?M4({nodes:l,width:r,height:i,minZoom:a,maxZoom:s,panZoom:o},e):Promise.resolve(!1)},setCenter:async(e,n,r)=>{const{width:i,height:a,maxZoom:s,panZoom:o}=t.getState(),l=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,c=i/2-e*l,f=a/2-n*l;return o?(await o.setViewport({x:c,y:f,zoom:l},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:a,maxZoom:s,panZoom:o}=t.getState(),l=IF(e,r,i,a,s,(n==null?void 0:n.padding)??.1);return o?(await o.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:a}=t.getState();if(!a)return e;const{x:s,y:o}=a.getBoundingClientRect(),l={x:e.x-s,y:e.y-o};return h_(l,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:a}=r.getBoundingClientRect(),s=aue(e,n);return{x:s.x+i,y:s.y+a}}}),[])};function kue(t,e){const n=[],r=new Map;for(const i of t)if(i.type==="add"){n.push(i.item);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const a=r.get(i.id);a?a.push(i):r.set(i.id,[i])}for(const i of e){const a=r.get(i.id);if(!a){n.push(i);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const s={...i};for(const o of a)J9e(o,s);n.push(s)}return n}function J9e(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??(e.measured={}),e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function Fw(t,e){return kue(t,e)}function Pue(t,e){return kue(t,e)}function ny(t,e){return{id:t,type:"select",selected:e}}function dw(t,e=new Set,n=!1){const r=[];for(const[i,a]of t){const s=e.has(i);!(a.selected===void 0&&!s)&&a.selected!==s&&(n&&(a.selected=s),r.push(ny(a.id,s)))}return r}function WY({items:t=[],lookup:e}){var i;const n=[],r=new Map(t.map(a=>[a.id,a]));for(const a of t){const s=e.get(a.id),o=((i=s==null?void 0:s.internals)==null?void 0:i.userNode)??s;o!==void 0&&o!==a&&n.push({id:a.id,item:a,type:"replace"}),o===void 0&&n.push({item:a,type:"add"})}for(const[a]of e)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function zY(t){return{id:t.id,type:"remove"}}const HY=t=>L8e(t),q9e=t=>Zle(t);function Aue(t){return R.forwardRef(t)}const X9e=typeof window<"u"?R.useLayoutEffect:R.useEffect;function GY(t){const[e,n]=R.useState(!1),[r]=R.useState(()=>Z9e(()=>n(!0)));return X9e(()=>{if(!e){r.reset();return}const i=r.get();i.length&&(t(i),r.reset()),n(!1)},[e]),r}function Z9e(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const Rue=R.createContext(null);function Q9e({children:t}){const e=Ui(),n=R.useCallback(o=>{const{nodes:l=[],setNodes:c,hasDefaultNodes:f,onNodesChange:h,nodeLookup:m}=e.getState();let p=l;for(const v of o)p=typeof v=="function"?v(p):v;f?c(p):h&&h(WY({items:p,lookup:m}))},[]),r=GY(n),i=R.useCallback(o=>{const{edges:l=[],setEdges:c,hasDefaultEdges:f,onEdgesChange:h,edgeLookup:m}=e.getState();let p=l;for(const v of o)p=typeof v=="function"?v(p):v;f?c(p):h&&h(WY({items:p,lookup:m}))},[]),a=GY(i),s=R.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return de.jsx(Rue.Provider,{value:s,children:t})}function e7e(){const t=R.useContext(Rue);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const t7e=t=>!!t.panZoom;function jm(){const t=Y9e(),e=Ui(),n=e7e(),r=Ir(t7e),i=R.useMemo(()=>{const a=h=>e.getState().nodeLookup.get(h),s=h=>{n.nodeQueue.push(h)},o=h=>{n.edgeQueue.push(h)},l=h=>{var S,_;const{nodeLookup:m,nodeOrigin:p}=e.getState(),v=HY(h)?h:m.get(h.id),y=v.parentId?oue(v.position,v.measured,v.parentId,m,p):v.position,x={id:v.id,position:y,width:((S=v.measured)==null?void 0:S.width)??v.width,height:((_=v.measured)==null?void 0:_.height)??v.height,data:v.data};return xN(x)},c=(h,m,p={replace:!1})=>{s(v=>v.map(y=>{if(y.id===h){const x=typeof m=="function"?m(y):m;return p.replace&&HY(x)?x:{...y,...x}}return y}))},f=(h,m,p={replace:!1})=>{o(v=>v.map(y=>{if(y.id===h){const x=typeof m=="function"?m(y):m;return p.replace&&q9e(x)?x:{...y,...x}}return y}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>{var m;return(m=a(h))==null?void 0:m.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(m=>({...m}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:s,setEdges:o,addNodes:h=>{const m=Array.isArray(h)?h:[h];n.nodeQueue.push(p=>[...p,...m])},addEdges:h=>{const m=Array.isArray(h)?h:[h];n.edgeQueue.push(p=>[...p,...m])},toObject:()=>{const{nodes:h=[],edges:m=[],transform:p}=e.getState(),[v,y,x]=p;return{nodes:h.map(S=>({...S})),edges:m.map(S=>({...S})),viewport:{x:v,y,zoom:x}}},deleteElements:async({nodes:h=[],edges:m=[]})=>{const{nodes:p,edges:v,onNodesDelete:y,onEdgesDelete:x,triggerNodeChanges:S,triggerEdgeChanges:_,onDelete:N,onBeforeDelete:k}=e.getState(),{nodes:P,edges:O}=await U8e({nodesToRemove:h,edgesToRemove:m,nodes:p,edges:v,onBeforeDelete:k}),A=O.length>0,T=P.length>0;if(A){const L=O.map(zY);x==null||x(O),_(L)}if(T){const L=P.map(zY);y==null||y(P),S(L)}return(T||A)&&(N==null||N({nodes:P,edges:O})),{deletedNodes:P,deletedEdges:O}},getIntersectingNodes:(h,m=!0,p)=>{const v=NY(h),y=v?h:l(h),x=p!==void 0;return y?(p||e.getState().nodes).filter(S=>{const _=e.getState().nodeLookup.get(S.id);if(_&&!v&&(S.id===h.id||!_.internals.positionAbsolute))return!1;const N=xN(x?S:_),k=$P(N,y);return m&&k>0||k>=y.width*y.height}):[]},isNodeIntersecting:(h,m,p=!0)=>{const y=NY(h)?h:l(h);if(!y)return!1;const x=$P(y,m);return p&&x>0||x>=y.width*y.height},updateNode:c,updateNodeData:(h,m,p={replace:!1})=>{c(h,v=>{const y=typeof m=="function"?m(v):m;return p.replace?{...v,data:y}:{...v,data:{...v.data,...y}}},p)},updateEdge:f,updateEdgeData:(h,m,p={replace:!1})=>{f(h,v=>{const y=typeof m=="function"?m(v):m;return p.replace?{...v,data:y}:{...v,data:{...v.data,...y}}},p)}}},[]);return R.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const KY=t=>t.selected,n7e={actInsideInputWithModifier:!1},r7e=typeof window<"u"?window:void 0;function i7e({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Ui(),{deleteElements:r}=jm(),i=Jf(t,n7e),a=Jf(e,{target:r7e});R.useEffect(()=>{if(i){const{edges:s,nodes:o}=n.getState();r({nodes:o.filter(KY),edges:s.filter(KY)}),n.setState({nodesSelectionActive:!1})}},[i]),R.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function a7e(t){const e=Ui();R.useEffect(()=>{const n=()=>{var i,a;if(!t.current)return!1;const r=MF(t.current);(r.height===0||r.width===0)&&((a=(i=e.getState()).onError)==null||a.call(i,"004",bc.error004())),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const PR={position:"absolute",width:"100%",height:"100%",top:0,left:0},s7e=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function o7e({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:a=Ay.Free,zoomOnDoubleClick:s=!0,panOnDrag:o=!0,defaultViewport:l,translateExtent:c,minZoom:f,maxZoom:h,zoomActivationKeyCode:m,preventScrolling:p=!0,children:v,noWheelClassName:y,noPanClassName:x,onViewportChange:S,isControlledViewport:_,paneClickDistance:N}){const k=Ui(),P=R.useRef(null),{userSelectionActive:O,lib:A}=Ir(s7e,Oi),T=Jf(m),L=R.useRef();return a7e(P),R.useEffect(()=>{if(P.current){L.current=y9e({domNode:P.current,minZoom:f,maxZoom:h,translateExtent:c,viewport:l,paneClickDistance:N,onTransformChange:V=>{S==null||S({x:V[0],y:V[1],zoom:V[2]}),_||k.setState({transform:V})},onDraggingChange:V=>k.setState({paneDragging:V}),onPanZoomStart:(V,I)=>{const{onViewportChangeStart:H,onMoveStart:q}=k.getState();q==null||q(V,I),H==null||H(I)},onPanZoom:(V,I)=>{const{onViewportChange:H,onMove:q}=k.getState();q==null||q(V,I),H==null||H(I)},onPanZoomEnd:(V,I)=>{const{onViewportChangeEnd:H,onMoveEnd:q}=k.getState();q==null||q(V,I),H==null||H(I)}});const{x:B,y:W,zoom:Y}=L.current.getViewport();return k.setState({panZoom:L.current,transform:[B,W,Y],domNode:P.current.closest(".react-flow")}),()=>{var V;(V=L.current)==null||V.destroy()}}},[]),R.useEffect(()=>{var B;(B=L.current)==null||B.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:o,zoomActivationKeyPressed:T,preventScrolling:p,noPanClassName:x,userSelectionActive:O,noWheelClassName:y,lib:A})},[t,e,n,r,i,a,s,o,T,p,x,O,y,A]),de.jsx("div",{className:"react-flow__renderer",ref:P,style:PR,children:v})}const l7e=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function u7e(){const{userSelectionActive:t,userSelectionRect:e}=Ir(l7e,Oi);return t&&e?de.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const UM=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},c7e=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function d7e({isSelecting:t,selectionKeyPressed:e,selectionMode:n=wN.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:a,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:m,children:p}){const v=R.useRef(null),y=Ui(),x=R.useRef(0),S=R.useRef(0),_=R.useRef(),N=R.useRef(new Map),{userSelectionActive:k,elementsSelectable:P,dragging:O}=Ir(c7e,Oi),A=P&&(t||k),T=R.useRef(!1),L=R.useRef(!1),B=()=>{y.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,S.current=0},W=F=>{if(T.current){T.current=!1;return}o==null||o(F),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},Y=F=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){F.preventDefault();return}l==null||l(F)},V=c?F=>c(F):void 0,I=F=>{var te,re,X,ce;const{resetSelectedElements:J,domNode:Z,edgeLookup:G}=y.getState();if(_.current=Z==null?void 0:Z.getBoundingClientRect(),!P||!t||F.button!==0||F.target!==v.current||!_.current)return;(re=(te=F.target)==null?void 0:te.setPointerCapture)==null||re.call(te,F.pointerId),L.current=!0,T.current=!1,N.current=new Map;for(const[he,ve]of G)N.current.set(ve.source,((X=N.current.get(ve.source))==null?void 0:X.add(he))||new Set([he])),N.current.set(ve.target,((ce=N.current.get(ve.target))==null?void 0:ce.add(he))||new Set([he]));const{x:oe,y:ae}=ym(F.nativeEvent,_.current);J(),y.setState({userSelectionRect:{width:0,height:0,startX:oe,startY:ae,x:oe,y:ae}}),a==null||a(F)},H=F=>{const{userSelectionRect:J,edgeLookup:Z,transform:G,nodeLookup:oe,triggerNodeChanges:ae,triggerEdgeChanges:te}=y.getState();if(!_.current||!J)return;T.current=!0;const{x:re,y:X}=ym(F.nativeEvent,_.current),{startX:ce,startY:he}=J,ve={startX:ce,startY:he,x:re<ce?re:ce,y:X<he?X:he,width:Math.abs(re-ce),height:Math.abs(X-he)},Ne=eue(oe,ve,G,n===wN.Partial,!0),ke=new Set,Te=new Set;for(const ye of Ne){Te.add(ye.id);const Ie=N.current.get(ye.id);if(Ie)for(const Re of Ie)ke.add(Re)}if(x.current!==Te.size){x.current=Te.size;const ye=dw(oe,Te,!0);ae(ye)}if(S.current!==ke.size){S.current=ke.size;const ye=dw(Z,ke);te(ye)}y.setState({userSelectionRect:ve,userSelectionActive:!0,nodesSelectionActive:!1})},q=F=>{var Z,G;if(F.button!==0||!L.current)return;(G=(Z=F.target)==null?void 0:Z.releasePointerCapture)==null||G.call(Z,F.pointerId);const{userSelectionRect:J}=y.getState();!k&&J&&F.target===v.current&&(W==null||W(F)),x.current>0&&y.setState({nodesSelectionActive:!0}),B(),s==null||s(F),(e||i)&&(T.current=!1),L.current=!1};return de.jsxs("div",{className:Ra(["react-flow__pane",{draggable:r,dragging:O,selection:t}]),onClick:A?void 0:UM(W,v),onContextMenu:UM(Y,v),onWheel:UM(V,v),onPointerEnter:A?void 0:f,onPointerDown:A?I:h,onPointerMove:A?H:h,onPointerUp:A?q:void 0,onPointerLeave:m,ref:v,style:PR,children:[p,de.jsx(u7e,{})]})}function W4({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:o,onError:l}=e.getState(),c=o.get(t);if(!c){l==null||l("012",bc.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):i([t])}function Oue({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,nodeClickDistance:s}){const o=Ui(),[l,c]=R.useState(!1),f=R.useRef();return R.useEffect(()=>{f.current=a9e({getStoreItems:()=>o.getState(),onNodeMouseDown:h=>{W4({id:h,store:o,nodeRef:t})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),R.useEffect(()=>{var h,m;if(e)(h=f.current)==null||h.destroy();else if(t.current)return(m=f.current)==null||m.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:a,nodeId:i,nodeClickDistance:s}),()=>{var p;(p=f.current)==null||p.destroy()}},[n,r,e,a,t,i]),l}const f7e=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function jue(){const t=Ui();return R.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:a,nodesDraggable:s,onError:o,updateNodePositions:l,nodeLookup:c,nodeOrigin:f}=t.getState(),h=new Map,m=f7e(s),p=i?a[0]:5,v=i?a[1]:5,y=n.direction.x*p*n.factor,x=n.direction.y*v*n.factor;for(const[,S]of c){if(!m(S))continue;let _={x:S.internals.positionAbsolute.x+y,y:S.internals.positionAbsolute.y+x};i&&(_=CR(_,a));const{position:N,positionAbsolute:k}=tue({nodeId:S.id,nextPosition:_,nodeLookup:c,nodeExtent:r,nodeOrigin:f,onError:o});S.position=N,S.internals.positionAbsolute=k,h.set(S.id,S)}l(h)},[])}const BF=R.createContext(null),h7e=BF.Provider;BF.Consumer;const Iue=()=>R.useContext(BF),m7e=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),p7e=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:a,connection:s}=r,{fromHandle:o,toHandle:l,isValid:c}=s,f=(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===e&&(l==null?void 0:l.type)===n;return{connectingFrom:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.id)===e&&(o==null?void 0:o.type)===n,connectingTo:f,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.id)===e&&(i==null?void 0:i.type)===n,isPossibleEndHandle:a===Dg.Strict?(o==null?void 0:o.type)!==n:t!==(o==null?void 0:o.nodeId)||e!==(o==null?void 0:o.id),connectionInProcess:!!o,valid:f&&c}};function g7e({type:t="source",position:e=yn.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:o,children:l,className:c,onMouseDown:f,onTouchStart:h,...m},p){var I,H;const v=s||null,y=t==="target",x=Ui(),S=Iue(),{connectOnClick:_,noPanClassName:N,rfId:k}=Ir(m7e,Oi),{connectingFrom:P,connectingTo:O,clickConnecting:A,isPossibleEndHandle:T,connectionInProcess:L,valid:B}=Ir(p7e(S,v,t),Oi);S||(H=(I=x.getState()).onError)==null||H.call(I,"010",bc.error010());const W=q=>{const{defaultEdgeOptions:F,onConnect:J,hasDefaultEdges:Z}=x.getState(),G={...F,...q};if(Z){const{edges:oe,setEdges:ae}=x.getState();ae(fue(G,oe))}J==null||J(G),o==null||o(G)},Y=q=>{if(!S)return;const F=uue(q.nativeEvent);if(i&&(F&&q.button===0||!F)){const J=x.getState();U4.onPointerDown(q.nativeEvent,{autoPanOnConnect:J.autoPanOnConnect,connectionMode:J.connectionMode,connectionRadius:J.connectionRadius,domNode:J.domNode,nodeLookup:J.nodeLookup,lib:J.lib,isTarget:y,handleId:v,nodeId:S,flowId:J.rfId,panBy:J.panBy,cancelConnection:J.cancelConnection,onConnectStart:J.onConnectStart,onConnectEnd:J.onConnectEnd,updateConnection:J.updateConnection,onConnect:W,isValidConnection:n||J.isValidConnection,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,autoPanSpeed:J.autoPanSpeed})}F?f==null||f(q):h==null||h(q)},V=q=>{const{onClickConnectStart:F,onClickConnectEnd:J,connectionClickStartHandle:Z,connectionMode:G,isValidConnection:oe,lib:ae,rfId:te}=x.getState();if(!S||!Z&&!i)return;if(!Z){F==null||F(q.nativeEvent,{nodeId:S,handleId:v,handleType:t}),x.setState({connectionClickStartHandle:{nodeId:S,type:t,id:v}});return}const re=lue(q.target),X=n||oe,{connection:ce,isValid:he}=U4.isValid(q.nativeEvent,{handle:{nodeId:S,id:v,type:t},connectionMode:G,fromNodeId:Z.nodeId,fromHandleId:Z.id||null,fromType:Z.type,isValidConnection:X,flowId:te,doc:re,lib:ae});he&&ce&&W(ce),J==null||J(q),x.setState({connectionClickStartHandle:null})};return de.jsx("div",{"data-handleid":v,"data-nodeid":S,"data-handlepos":e,"data-id":`${k}-${S}-${v}-${t}`,className:Ra(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",N,c,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:a,clickconnecting:A,connectingfrom:P,connectingto:O,valid:B,connectionindicator:r&&(!L||T)&&(L?a:i)}]),onMouseDown:Y,onTouchStart:Y,onClick:_?V:void 0,ref:p,...m,children:l})}const lg=R.memo(Aue(g7e));function v7e({data:t,isConnectable:e,sourcePosition:n=yn.Bottom}){return de.jsxs(de.Fragment,{children:[t==null?void 0:t.label,de.jsx(lg,{type:"source",position:n,isConnectable:e})]})}function y7e({data:t,isConnectable:e,targetPosition:n=yn.Top,sourcePosition:r=yn.Bottom}){return de.jsxs(de.Fragment,{children:[de.jsx(lg,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,de.jsx(lg,{type:"source",position:r,isConnectable:e})]})}function b7e(){return null}function w7e({data:t,isConnectable:e,targetPosition:n=yn.Top}){return de.jsxs(de.Fragment,{children:[de.jsx(lg,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label]})}const BP={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},YY={input:v7e,default:y7e,output:w7e,group:b7e};function x7e(t){var e,n,r,i;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((e=t.style)==null?void 0:e.width),height:t.height??t.initialHeight??((n=t.style)==null?void 0:n.height)}:{width:t.width??((r=t.style)==null?void 0:r.width),height:t.height??((i=t.style)==null?void 0:i.height)}}const S7e=t=>{const{width:e,height:n,x:r,y:i}=f_(t.nodeLookup,{filter:a=>!!a.selected});return{width:yd(e)?e:null,height:yd(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function E7e({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Ui(),{width:i,height:a,transformString:s,userSelectionActive:o}=Ir(S7e,Oi),l=jue(),c=R.useRef(null);if(R.useEffect(()=>{var m;n||(m=c.current)==null||m.focus({preventScroll:!0})},[n]),Oue({nodeRef:c}),o||!i||!a)return null;const f=t?m=>{const p=r.getState().nodes.filter(v=>v.selected);t(m,p)}:void 0,h=m=>{Object.prototype.hasOwnProperty.call(BP,m.key)&&l({direction:BP[m.key],factor:m.shiftKey?4:1})};return de.jsx("div",{className:Ra(["react-flow__nodesselection","react-flow__container",e]),style:{transform:s},children:de.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:a}})})}const JY=typeof window<"u"?window:void 0,N7e=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Mue({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:o,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:f,selectionMode:h,onSelectionStart:m,onSelectionEnd:p,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:x,elementsSelectable:S,zoomOnScroll:_,zoomOnPinch:N,panOnScroll:k,panOnScrollSpeed:P,panOnScrollMode:O,zoomOnDoubleClick:A,panOnDrag:T,defaultViewport:L,translateExtent:B,minZoom:W,maxZoom:Y,preventScrolling:V,onSelectionContextMenu:I,noWheelClassName:H,noPanClassName:q,disableKeyboardA11y:F,onViewportChange:J,isControlledViewport:Z}){const{nodesSelectionActive:G,userSelectionActive:oe}=Ir(N7e),ae=Jf(c,{target:JY}),te=Jf(y,{target:JY}),re=te||T,X=te||k,ce=f&&re!==!0,he=ae||oe||ce;return i7e({deleteKeyCode:l,multiSelectionKeyCode:v}),de.jsx(o7e,{onPaneContextMenu:a,elementsSelectable:S,zoomOnScroll:_,zoomOnPinch:N,panOnScroll:X,panOnScrollSpeed:P,panOnScrollMode:O,zoomOnDoubleClick:A,panOnDrag:!ae&&re,defaultViewport:L,translateExtent:B,minZoom:W,maxZoom:Y,zoomActivationKeyCode:x,preventScrolling:V,noWheelClassName:H,noPanClassName:q,onViewportChange:J,isControlledViewport:Z,paneClickDistance:o,children:de.jsxs(d7e,{onSelectionStart:m,onSelectionEnd:p,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:re,isSelecting:!!he,selectionMode:h,selectionKeyPressed:ae,selectionOnDrag:ce,children:[t,G&&de.jsx(E7e,{onSelectionContextMenu:I,noPanClassName:q,disableKeyboardA11y:F})]})})}Mue.displayName="FlowRenderer";const _7e=R.memo(Mue),C7e=t=>e=>t?eue(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function T7e(t){return Ir(R.useCallback(C7e(t),[t]),Oi)}const D7e=t=>t.updateNodeInternals;function k7e(){const t=Ir(D7e),[e]=R.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const a=i.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:i.target,force:!0})}),t(r)}));return R.useEffect(()=>()=>{e==null||e.disconnect()},[e]),e}function P7e({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Ui(),a=R.useRef(null),s=R.useRef(null),o=R.useRef(t.sourcePosition),l=R.useRef(t.targetPosition),c=R.useRef(e),f=n&&!!t.internals.handleBounds;return R.useEffect(()=>{a.current&&!t.hidden&&(!f||s.current!==a.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(a.current),s.current=a.current)},[f,t.hidden]),R.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),R.useEffect(()=>{if(a.current){const h=c.current!==e,m=o.current!==t.sourcePosition,p=l.current!==t.targetPosition;(h||m||p)&&(c.current=e,o.current=t.sourcePosition,l.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:a.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),a}function A7e({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:a,onDoubleClick:s,nodesDraggable:o,elementsSelectable:l,nodesConnectable:c,nodesFocusable:f,resizeObserver:h,noDragClassName:m,noPanClassName:p,disableKeyboardA11y:v,rfId:y,nodeTypes:x,nodeExtent:S,nodeClickDistance:_,onError:N}){const{node:k,internals:P,isParent:O}=Ir(Ne=>{const ke=Ne.nodeLookup.get(t),Te=Ne.parentLookup.has(t);return{node:ke,internals:ke.internals,isParent:Te}},Oi);let A=k.type||"default",T=(x==null?void 0:x[A])||YY[A];T===void 0&&(N==null||N("003",bc.error003(A)),A="default",T=YY.default);const L=!!(k.draggable||o&&typeof k.draggable>"u"),B=!!(k.selectable||l&&typeof k.selectable>"u"),W=!!(k.connectable||c&&typeof k.connectable>"u"),Y=!!(k.focusable||f&&typeof k.focusable>"u"),V=Ui(),I=sue(k),H=P7e({node:k,nodeType:A,hasDimensions:I,resizeObserver:h}),q=Oue({nodeRef:H,disabled:k.hidden||!L,noDragClassName:m,handleSelector:k.dragHandle,nodeId:t,isSelectable:B,nodeClickDistance:_}),F=jue();if(k.hidden)return null;const J=m_(k),Z=x7e(k),G=S?RF(P.positionAbsolute,S):P.positionAbsolute,oe=B||L||e||n||r||i,ae=n?Ne=>n(Ne,{...P.userNode}):void 0,te=r?Ne=>r(Ne,{...P.userNode}):void 0,re=i?Ne=>i(Ne,{...P.userNode}):void 0,X=a?Ne=>a(Ne,{...P.userNode}):void 0,ce=s?Ne=>s(Ne,{...P.userNode}):void 0,he=Ne=>{const{selectNodesOnDrag:ke,nodeDragThreshold:Te}=V.getState();B&&(!ke||!L||Te>0)&&W4({id:t,store:V,nodeRef:H}),e&&e(Ne,{...P.userNode})},ve=Ne=>{if(!(L4(Ne.nativeEvent)||v))if(Jle.includes(Ne.key)&&B){const ke=Ne.key==="Escape";W4({id:t,store:V,unselect:ke,nodeRef:H})}else L&&k.selected&&Object.prototype.hasOwnProperty.call(BP,Ne.key)&&(V.setState({ariaLiveMessage:`Moved selected node ${Ne.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~G.x}, y: ${~~G.y}`}),F({direction:BP[Ne.key],factor:Ne.shiftKey?4:1}))};return de.jsx("div",{className:Ra(["react-flow__node",`react-flow__node-${A}`,{[p]:L},k.className,{selected:k.selected,selectable:B,parent:O,draggable:L,dragging:q}]),ref:H,style:{zIndex:P.z,transform:`translate(${G.x}px,${G.y}px)`,pointerEvents:oe?"all":"none",visibility:I?"visible":"hidden",...k.style,...Z},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:ae,onMouseMove:te,onMouseLeave:re,onContextMenu:X,onClick:he,onDoubleClick:ce,onKeyDown:Y?ve:void 0,tabIndex:Y?0:void 0,role:Y?"button":void 0,"aria-describedby":v?void 0:`${Cue}-${y}`,"aria-label":k.ariaLabel,children:de.jsx(h7e,{value:t,children:de.jsx(T,{id:t,data:k.data,type:A,positionAbsoluteX:G.x,positionAbsoluteY:G.y,selected:k.selected,selectable:B,draggable:L,deletable:k.deletable??!0,isConnectable:W,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:q,dragHandle:k.dragHandle,zIndex:P.z,parentId:k.parentId,...J})})})}const R7e=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Vue(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:a}=Ir(R7e,Oi),s=T7e(t.onlyRenderVisibleElements),o=k7e();return de.jsx("div",{className:"react-flow__nodes",style:PR,children:s.map(l=>de.jsx(A7e,{id:l,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:o,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:a},l))})}Vue.displayName="NodeRenderer";const O7e=R.memo(Vue);function j7e(t){return Ir(R.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const a=n.nodeLookup.get(i.source),s=n.nodeLookup.get(i.target);a&&s&&H8e({sourceNode:a,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),Oi)}const I7e=({color:t="none",strokeWidth:e=1})=>de.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),M7e=({color:t="none",strokeWidth:e=1})=>de.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),qY={[Ky.Arrow]:I7e,[Ky.ArrowClosed]:M7e};function V7e(t){const e=Ui();return R.useMemo(()=>{var i,a;return Object.prototype.hasOwnProperty.call(qY,t)?qY[t]:((a=(i=e.getState()).onError)==null||a.call(i,"009",bc.error009(t)),null)},[t])}const $7e=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:o="auto-start-reverse"})=>{const l=V7e(e);return l?de.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0",children:de.jsx(l,{color:n,strokeWidth:s})}):null},$ue=({defaultColor:t,rfId:e})=>{const n=Ir(a=>a.edges),r=Ir(a=>a.defaultEdgeOptions),i=R.useMemo(()=>Z8e(n,{id:e,defaultColor:t,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,e,t]);return i.length?de.jsx("svg",{className:"react-flow__marker",children:de.jsx("defs",{children:i.map(a=>de.jsx($7e,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};$ue.displayName="MarkerDefinitions";var L7e=R.memo($ue);function Lue({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:s=[2,4],labelBgBorderRadius:o=2,children:l,className:c,...f}){const[h,m]=R.useState({x:1,y:0,width:0,height:0}),p=Ra(["react-flow__edge-textwrapper",c]),v=R.useRef(null);return R.useEffect(()=>{if(v.current){const y=v.current.getBBox();m({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:de.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:p,visibility:h.width?"visible":"hidden",...f,children:[i&&de.jsx("rect",{width:h.width+2*s[0],x:-s[0],y:-s[1],height:h.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),de.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:v,style:r,children:n}),l]})}Lue.displayName="EdgeText";const F7e=R.memo(Lue);function fx({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:f,markerEnd:h,markerStart:m,className:p,interactionWidth:v=20}){return de.jsxs(de.Fragment,{children:[de.jsx("path",{id:t,style:f,d:e,fill:"none",className:Ra(["react-flow__edge-path",p]),markerEnd:h,markerStart:m}),v&&de.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:v,className:"react-flow__edge-interaction"}),i&&yd(n)&&yd(r)?de.jsx(F7e,{x:n,y:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function XY({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===yn.Left||t===yn.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function Fue({sourceX:t,sourceY:e,sourcePosition:n=yn.Bottom,targetX:r,targetY:i,targetPosition:a=yn.Top}){const[s,o]=XY({pos:n,x1:t,y1:e,x2:r,y2:i}),[l,c]=XY({pos:a,x1:r,y1:i,x2:t,y2:e}),[f,h,m,p]=cue({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:c});return[`M${t},${e} C${s},${o} ${l},${c} ${r},${i}`,f,h,m,p]}function Bue(t){return R.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s=yn.Bottom,targetPosition:o=yn.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:x,interactionWidth:S})=>{const[_,N,k]=Fue({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:o}),P=t.isInternal?void 0:e;return de.jsx(fx,{id:P,path:_,labelX:N,labelY:k,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:x,interactionWidth:S})})}const B7e=Bue({isInternal:!1}),Uue=Bue({isInternal:!0});B7e.displayName="SimpleBezierEdge";Uue.displayName="SimpleBezierEdgeInternal";function Wue(t){return R.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,sourcePosition:p=yn.Bottom,targetPosition:v=yn.Top,markerEnd:y,markerStart:x,pathOptions:S,interactionWidth:_})=>{const[N,k,P]=F4({sourceX:n,sourceY:r,sourcePosition:p,targetX:i,targetY:a,targetPosition:v,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset}),O=t.isInternal?void 0:e;return de.jsx(fx,{id:O,path:N,labelX:k,labelY:P,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:y,markerStart:x,interactionWidth:_})})}const zue=Wue({isInternal:!1}),Hue=Wue({isInternal:!0});zue.displayName="SmoothStepEdge";Hue.displayName="SmoothStepEdgeInternal";function Gue(t){return R.memo(({id:e,...n})=>{var i;const r=t.isInternal?void 0:e;return de.jsx(zue,{...n,id:r,pathOptions:R.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const U7e=Gue({isInternal:!1}),Kue=Gue({isInternal:!0});U7e.displayName="StepEdge";Kue.displayName="StepEdgeInternal";function Yue(t){return R.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:v,interactionWidth:y})=>{const[x,S,_]=hue({sourceX:n,sourceY:r,targetX:i,targetY:a}),N=t.isInternal?void 0:e;return de.jsx(fx,{id:N,path:x,labelX:S,labelY:_,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:v,interactionWidth:y})})}const W7e=Yue({isInternal:!1}),Jue=Yue({isInternal:!0});W7e.displayName="StraightEdge";Jue.displayName="StraightEdgeInternal";function que(t){return R.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s=yn.Bottom,targetPosition:o=yn.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:x,pathOptions:S,interactionWidth:_})=>{const[N,k,P]=TR({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:o,curvature:S==null?void 0:S.curvature}),O=t.isInternal?void 0:e;return de.jsx(fx,{id:O,path:N,labelX:k,labelY:P,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:x,interactionWidth:_})})}const z7e=que({isInternal:!1}),Xue=que({isInternal:!0});z7e.displayName="BezierEdge";Xue.displayName="BezierEdgeInternal";const ZY={default:Xue,straight:Jue,step:Kue,smoothstep:Hue,simplebezier:Uue},QY={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},H7e=(t,e,n)=>n===yn.Left?t-e:n===yn.Right?t+e:t,G7e=(t,e,n)=>n===yn.Top?t-e:n===yn.Bottom?t+e:t,eJ="react-flow__edgeupdater";function tJ({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:o}){return de.jsx("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:Ra([eJ,`${eJ}-${o}`]),cx:H7e(e,r,t),cy:G7e(n,r,t),r,stroke:"transparent",fill:"transparent"})}function K7e({isReconnectable:t,reconnectRadius:e,edge:n,targetHandleId:r,sourceHandleId:i,sourceX:a,sourceY:s,targetX:o,targetY:l,sourcePosition:c,targetPosition:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:p,setReconnecting:v,setUpdateHover:y}){const x=Ui(),S=(O,A)=>{if(O.button!==0)return;const{autoPanOnConnect:T,domNode:L,isValidConnection:B,connectionMode:W,connectionRadius:Y,lib:V,onConnectStart:I,onConnectEnd:H,cancelConnection:q,nodeLookup:F,rfId:J,panBy:Z,updateConnection:G}=x.getState(),oe=A?n.target:n.source,ae=(A?r:i)||null,te=A?"target":"source",re=A;v(!0),m==null||m(O,n,te);const X=he=>{v(!1),p==null||p(he,n,te)},ce=he=>h==null?void 0:h(n,he);U4.onPointerDown(O.nativeEvent,{autoPanOnConnect:T,connectionMode:W,connectionRadius:Y,domNode:L,handleId:ae,nodeId:oe,nodeLookup:F,isTarget:re,edgeUpdaterType:te,lib:V,flowId:J,cancelConnection:q,panBy:Z,isValidConnection:B,onConnect:ce,onConnectStart:I,onConnectEnd:H,onReconnectEnd:X,updateConnection:G,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle})},_=O=>S(O,!0),N=O=>S(O,!1),k=()=>y(!0),P=()=>y(!1);return de.jsxs(de.Fragment,{children:[(t==="source"||t===!0)&&de.jsx(tJ,{position:c,centerX:a,centerY:s,radius:e,onMouseDown:_,onMouseEnter:k,onMouseOut:P,type:"source"}),(t==="target"||t===!0)&&de.jsx(tJ,{position:f,centerX:o,centerY:l,radius:e,onMouseDown:N,onMouseEnter:k,onMouseOut:P,type:"target"})]})}function Y7e({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:a,onContextMenu:s,onMouseEnter:o,onMouseMove:l,onMouseLeave:c,reconnectRadius:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:p,rfId:v,edgeTypes:y,noPanClassName:x,onError:S,disableKeyboardA11y:_}){let N=Ir(ye=>ye.edgeLookup.get(t));const k=Ir(ye=>ye.defaultEdgeOptions);N=k?{...k,...N}:N;let P=N.type||"default",O=(y==null?void 0:y[P])||ZY[P];O===void 0&&(S==null||S("011",bc.error011(P)),P="default",O=ZY.default);const A=!!(N.focusable||e&&typeof N.focusable>"u"),T=typeof h<"u"&&(N.reconnectable||n&&typeof N.reconnectable>"u"),L=!!(N.selectable||r&&typeof N.selectable>"u"),B=R.useRef(null),[W,Y]=R.useState(!1),[V,I]=R.useState(!1),H=Ui(),{zIndex:q,sourceX:F,sourceY:J,targetX:Z,targetY:G,sourcePosition:oe,targetPosition:ae}=Ir(R.useCallback(ye=>{const Ie=ye.nodeLookup.get(N.source),Re=ye.nodeLookup.get(N.target);if(!Ie||!Re)return{zIndex:N.zIndex,...QY};const Ee=X8e({id:t,sourceNode:Ie,targetNode:Re,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:ye.connectionMode,onError:S});return{zIndex:z8e({selected:N.selected,zIndex:N.zIndex,sourceNode:Ie,targetNode:Re,elevateOnSelect:ye.elevateEdgesOnSelect}),...Ee||QY}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),Oi),te=R.useMemo(()=>N.markerStart?`url('#${B4(N.markerStart,v)}')`:void 0,[N.markerStart,v]),re=R.useMemo(()=>N.markerEnd?`url('#${B4(N.markerEnd,v)}')`:void 0,[N.markerEnd,v]);if(N.hidden||F===null||J===null||Z===null||G===null)return null;const X=ye=>{var $e;const{addSelectedEdges:Ie,unselectNodesAndEdges:Re,multiSelectionActive:Ee}=H.getState();L&&(H.setState({nodesSelectionActive:!1}),N.selected&&Ee?(Re({nodes:[],edges:[N]}),($e=B.current)==null||$e.blur()):Ie([t])),i&&i(ye,N)},ce=a?ye=>{a(ye,{...N})}:void 0,he=s?ye=>{s(ye,{...N})}:void 0,ve=o?ye=>{o(ye,{...N})}:void 0,Ne=l?ye=>{l(ye,{...N})}:void 0,ke=c?ye=>{c(ye,{...N})}:void 0,Te=ye=>{var Ie;if(!_&&Jle.includes(ye.key)&&L){const{unselectNodesAndEdges:Re,addSelectedEdges:Ee}=H.getState();ye.key==="Escape"?((Ie=B.current)==null||Ie.blur(),Re({edges:[N]})):Ee([t])}};return de.jsx("svg",{style:{zIndex:q},children:de.jsxs("g",{className:Ra(["react-flow__edge",`react-flow__edge-${P}`,N.className,x,{selected:N.selected,animated:N.animated,inactive:!L&&!i,updating:W,selectable:L}]),onClick:X,onDoubleClick:ce,onContextMenu:he,onMouseEnter:ve,onMouseMove:Ne,onMouseLeave:ke,onKeyDown:A?Te:void 0,tabIndex:A?0:void 0,role:A?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":A?`${Tue}-${v}`:void 0,ref:B,children:[!V&&de.jsx(O,{id:t,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:L,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:F,sourceY:J,targetX:Z,targetY:G,sourcePosition:oe,targetPosition:ae,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:te,markerEnd:re,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),T&&de.jsx(K7e,{edge:N,isReconnectable:T,reconnectRadius:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:p,sourceX:F,sourceY:J,targetX:Z,targetY:G,sourcePosition:oe,targetPosition:ae,setUpdateHover:Y,setReconnecting:I,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle})]})})}const J7e=t=>({width:t.width,height:t.height,edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function Zue({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:f,reconnectRadius:h,onEdgeDoubleClick:m,onReconnectStart:p,onReconnectEnd:v,disableKeyboardA11y:y}){const{edgesFocusable:x,edgesReconnectable:S,elementsSelectable:_,onError:N}=Ir(J7e,Oi),k=j7e(e);return de.jsxs("div",{className:"react-flow__edges",children:[de.jsx(L7e,{defaultColor:t,rfId:n}),k.map(P=>de.jsx(Y7e,{id:P,edgesFocusable:x,edgesReconnectable:S,elementsSelectable:_,noPanClassName:i,onReconnect:a,onContextMenu:s,onMouseEnter:o,onMouseMove:l,onMouseLeave:c,onClick:f,reconnectRadius:h,onDoubleClick:m,onReconnectStart:p,onReconnectEnd:v,rfId:n,onError:N,edgeTypes:r,disableKeyboardA11y:y},P))]})}Zue.displayName="EdgeRenderer";const q7e=R.memo(Zue),X7e=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Z7e({children:t}){const e=Ir(X7e);return de.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function Q7e(t){const e=jm(),n=R.useRef(!1);R.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const eWe=t=>{var e;return(e=t.panZoom)==null?void 0:e.syncViewport};function tWe(t){const e=Ir(eWe),n=Ui();return R.useEffect(()=>{t&&(e==null||e(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}const nWe=t=>t.connection.inProgress?{...t.connection,to:h_(t.connection.to,t.transform)}:{...t.connection};function rWe(){return Ir(nWe,Oi)}const iWe=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function aWe({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:a,height:s,isValid:o,inProgress:l}=Ir(iWe,Oi);return!(a&&i&&l)?null:de.jsx("svg",{style:t,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:de.jsx("g",{className:Ra(["react-flow__connection",Xle(o)]),children:de.jsx(Que,{style:e,type:n,CustomComponent:r,isValid:o})})})}const Que=({style:t,type:e=ag.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:a,fromNode:s,fromHandle:o,fromPosition:l,to:c,toNode:f,toHandle:h,toPosition:m}=rWe();if(!i)return;if(n)return de.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:s,fromHandle:o,fromX:a.x,fromY:a.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:m,connectionStatus:Xle(r),toNode:f,toHandle:h});let p="";const v={sourceX:a.x,sourceY:a.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:m};switch(e){case ag.Bezier:[p]=TR(v);break;case ag.SimpleBezier:[p]=Fue(v);break;case ag.Step:[p]=F4({...v,borderRadius:0});break;case ag.SmoothStep:[p]=F4(v);break;default:[p]=hue(v)}return de.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:t})};Que.displayName="ConnectionLine";const sWe={};function nJ(t=sWe){const e=R.useRef(t),n=Ui();R.useEffect(()=>{var r,i;{const a=new Set([...Object.keys(e.current),...Object.keys(t)]);for(const s of a)if(e.current[s]!==t[s]){(i=(r=n.getState()).onError)==null||i.call(r,"002",bc.error002());break}e.current=t}},[t])}function oWe(){const t=Ui(),e=R.useRef(!1);R.useEffect(()=>{var n,r;if(!e.current){const i=document.querySelector(".react-flow__pane");i&&window.getComputedStyle(i).zIndex!=="1"&&((r=(n=t.getState()).onError)==null||r.call(n,"013",bc.error013("react"))),e.current=!0}},[])}function ece({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:o,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:f,onSelectionContextMenu:h,onSelectionStart:m,onSelectionEnd:p,connectionLineType:v,connectionLineStyle:y,connectionLineComponent:x,connectionLineContainerStyle:S,selectionKeyCode:_,selectionOnDrag:N,selectionMode:k,multiSelectionKeyCode:P,panActivationKeyCode:O,zoomActivationKeyCode:A,deleteKeyCode:T,onlyRenderVisibleElements:L,elementsSelectable:B,defaultViewport:W,translateExtent:Y,minZoom:V,maxZoom:I,preventScrolling:H,defaultMarkerColor:q,zoomOnScroll:F,zoomOnPinch:J,panOnScroll:Z,panOnScrollSpeed:G,panOnScrollMode:oe,zoomOnDoubleClick:ae,panOnDrag:te,onPaneClick:re,onPaneMouseEnter:X,onPaneMouseMove:ce,onPaneMouseLeave:he,onPaneScroll:ve,onPaneContextMenu:Ne,paneClickDistance:ke,nodeClickDistance:Te,onEdgeContextMenu:ye,onEdgeMouseEnter:Ie,onEdgeMouseMove:Re,onEdgeMouseLeave:Ee,reconnectRadius:$e,onReconnect:He,onReconnectStart:gt,onReconnectEnd:Ye,noDragClassName:yt,noWheelClassName:_t,noPanClassName:St,disableKeyboardA11y:Bt,nodeExtent:Nt,rfId:Dt,viewport:Ae,onViewportChange:je}){return nJ(t),nJ(e),oWe(),Q7e(n),tWe(Ae),de.jsx(_7e,{onPaneClick:re,onPaneMouseEnter:X,onPaneMouseMove:ce,onPaneMouseLeave:he,onPaneContextMenu:Ne,onPaneScroll:ve,paneClickDistance:ke,deleteKeyCode:T,selectionKeyCode:_,selectionOnDrag:N,selectionMode:k,onSelectionStart:m,onSelectionEnd:p,multiSelectionKeyCode:P,panActivationKeyCode:O,zoomActivationKeyCode:A,elementsSelectable:B,zoomOnScroll:F,zoomOnPinch:J,zoomOnDoubleClick:ae,panOnScroll:Z,panOnScrollSpeed:G,panOnScrollMode:oe,panOnDrag:te,defaultViewport:W,translateExtent:Y,minZoom:V,maxZoom:I,onSelectionContextMenu:h,preventScrolling:H,noDragClassName:yt,noWheelClassName:_t,noPanClassName:St,disableKeyboardA11y:Bt,onViewportChange:je,isControlledViewport:!!Ae,children:de.jsxs(Z7e,{children:[de.jsx(q7e,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:He,onReconnectStart:gt,onReconnectEnd:Ye,onlyRenderVisibleElements:L,onEdgeContextMenu:ye,onEdgeMouseEnter:Ie,onEdgeMouseMove:Re,onEdgeMouseLeave:Ee,reconnectRadius:$e,defaultMarkerColor:q,noPanClassName:St,disableKeyboardA11y:Bt,rfId:Dt}),de.jsx(aWe,{style:y,type:v,component:x,containerStyle:S}),de.jsx("div",{className:"react-flow__edgelabel-renderer"}),de.jsx(O7e,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:o,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:f,nodeClickDistance:Te,onlyRenderVisibleElements:L,noPanClassName:St,noDragClassName:yt,disableKeyboardA11y:Bt,nodeExtent:Nt,rfId:Dt}),de.jsx("div",{className:"react-flow__viewport-portal"})]})})}ece.displayName="GraphView";const lWe=R.memo(ece),rJ=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:s,nodeOrigin:o}={})=>{const l=new Map,c=new Map,f=new Map,h=new Map,m=r??e??[],p=n??t??[],v=o??[0,0];gue(f,h,m),mue(p,l,c,{nodeOrigin:v,elevateNodesOnSelect:!1});let y=[0,0,1];if(s&&i&&a){const x=f_(l,{filter:k=>!!((k.width||k.initialWidth)&&(k.height||k.initialHeight))}),{x:S,y:_,zoom:N}=IF(x,i,a,.5,2,.1);y=[S,_,N]}return{rfId:"1",width:0,height:0,transform:y,nodes:p,nodeLookup:l,parentLookup:c,edges:m,edgeLookup:h,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:VP,nodeExtent:VP,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Dg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...qle},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:iue,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},uWe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:s,nodeOrigin:o})=>k9e((l,c)=>({...rJ({nodes:t,edges:e,width:i,height:a,fitView:s,nodeOrigin:o,defaultNodes:n,defaultEdges:r}),setNodes:f=>{const{nodeLookup:h,parentLookup:m,nodeOrigin:p,elevateNodesOnSelect:v}=c();mue(f,h,m,{nodeOrigin:p,elevateNodesOnSelect:v,checkEquality:!0}),l({nodes:f})},setEdges:f=>{const{connectionLookup:h,edgeLookup:m}=c();gue(h,m,f),l({edges:f})},setDefaultNodesAndEdges:(f,h)=>{if(f){const{setNodes:m}=c();m(f),l({hasDefaultNodes:!0})}if(h){const{setEdges:m}=c();m(h),l({hasDefaultEdges:!0})}},updateNodeInternals:f=>{const{triggerNodeChanges:h,nodeLookup:m,parentLookup:p,fitViewOnInit:v,fitViewDone:y,fitViewOnInitOptions:x,domNode:S,nodeOrigin:_,debug:N,fitViewSync:k}=c(),{changes:P,updatedInternals:O}=n9e(f,m,p,S,_);if(!O)return;e9e(m,p,{nodeOrigin:_});let A=y;!y&&v&&(A=k({...x,nodes:x==null?void 0:x.nodes})),l({fitViewDone:A}),(P==null?void 0:P.length)>0&&(N&&console.log("React Flow: trigger node changes",P),h==null||h(P))},updateNodePositions:(f,h=!1)=>{const m=[],p=[];for(const[v,y]of f){const x={id:v,type:"position",position:y.position,dragging:h};y!=null&&y.expandParent&&(y!=null&&y.parentId)&&x.position&&(m.push({id:v,parentId:y.parentId,rect:{...y.internals.positionAbsolute,width:y.measured.width,height:y.measured.height}}),x.position.x=Math.max(0,x.position.x),x.position.y=Math.max(0,x.position.y)),p.push(x)}if(m.length>0){const{nodeLookup:v,parentLookup:y,nodeOrigin:x}=c(),S=LF(m,v,y,x);p.push(...S)}c().triggerNodeChanges(p)},triggerNodeChanges:f=>{const{onNodesChange:h,setNodes:m,nodes:p,hasDefaultNodes:v,debug:y}=c();if(f!=null&&f.length){if(v){const x=Fw(f,p);m(x)}y&&console.log("React Flow: trigger node changes",f),h==null||h(f)}},triggerEdgeChanges:f=>{const{onEdgesChange:h,setEdges:m,edges:p,hasDefaultEdges:v,debug:y}=c();if(f!=null&&f.length){if(v){const x=Pue(f,p);m(x)}y&&console.log("React Flow: trigger edge changes",f),h==null||h(f)}},addSelectedNodes:f=>{const{multiSelectionActive:h,edgeLookup:m,nodeLookup:p,triggerNodeChanges:v,triggerEdgeChanges:y}=c();if(h){const x=f.map(S=>ny(S,!0));v(x);return}v(dw(p,new Set([...f]),!0)),y(dw(m))},addSelectedEdges:f=>{const{multiSelectionActive:h,edgeLookup:m,nodeLookup:p,triggerNodeChanges:v,triggerEdgeChanges:y}=c();if(h){const x=f.map(S=>ny(S,!0));y(x);return}y(dw(m,new Set([...f]))),v(dw(p,new Set,!0))},unselectNodesAndEdges:({nodes:f,edges:h}={})=>{const{edges:m,nodes:p,triggerNodeChanges:v,triggerEdgeChanges:y}=c(),x=f||p,S=h||m,_=x.map(k=>(k.selected=!1,ny(k.id,!1))),N=S.map(k=>ny(k.id,!1));v(_),y(N)},setMinZoom:f=>{const{panZoom:h,maxZoom:m}=c();h==null||h.setScaleExtent([f,m]),l({minZoom:f})},setMaxZoom:f=>{const{panZoom:h,minZoom:m}=c();h==null||h.setScaleExtent([m,f]),l({maxZoom:f})},setTranslateExtent:f=>{var h;(h=c().panZoom)==null||h.setTranslateExtent(f),l({translateExtent:f})},setPaneClickDistance:f=>{var h;(h=c().panZoom)==null||h.setClickDistance(f)},resetSelectedElements:()=>{const{edges:f,nodes:h,triggerNodeChanges:m,triggerEdgeChanges:p}=c(),v=h.reduce((x,S)=>S.selected?[...x,ny(S.id,!1)]:x,[]),y=f.reduce((x,S)=>S.selected?[...x,ny(S.id,!1)]:x,[]);m(v),p(y)},setNodeExtent:f=>{const{nodeLookup:h}=c();for(const[,m]of h){const p=RF(m.internals.positionAbsolute,f);h.set(m.id,{...m,internals:{...m.internals,positionAbsolute:p}})}l({nodeExtent:f})},panBy:f=>{const{transform:h,width:m,height:p,panZoom:v,translateExtent:y}=c();return r9e({delta:f,panZoom:v,transform:h,translateExtent:y,width:m,height:p})},fitView:f=>{const{panZoom:h,width:m,height:p,minZoom:v,maxZoom:y,nodeLookup:x}=c();if(!h)return Promise.resolve(!1);const S=I4(x,f);return M4({nodes:S,width:m,height:p,panZoom:h,minZoom:v,maxZoom:y},f)},fitViewSync:f=>{const{panZoom:h,width:m,height:p,minZoom:v,maxZoom:y,nodeLookup:x}=c();if(!h)return!1;const S=I4(x,f);return M4({nodes:S,width:m,height:p,panZoom:h,minZoom:v,maxZoom:y},f),S.size>0},cancelConnection:()=>{l({connection:{...qle}})},updateConnection:f=>{l({connection:f})},reset:()=>l({...rJ()})}),Object.is);function Ry({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:a,fitView:s,nodeOrigin:o,children:l}){const[c]=R.useState(()=>uWe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:s,nodeOrigin:o}));return de.jsx(P9e,{value:c,children:de.jsx(Q9e,{children:l})})}function cWe({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:a,height:s,fitView:o,nodeOrigin:l}){return R.useContext(kR)?de.jsx(de.Fragment,{children:t}):de.jsx(Ry,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:a,initialHeight:s,fitView:o,nodeOrigin:l,children:t})}const dWe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function fWe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a,edgeTypes:s,onNodeClick:o,onEdgeClick:l,onInit:c,onMove:f,onMoveStart:h,onMoveEnd:m,onConnect:p,onConnectStart:v,onConnectEnd:y,onClickConnectStart:x,onClickConnectEnd:S,onNodeMouseEnter:_,onNodeMouseMove:N,onNodeMouseLeave:k,onNodeContextMenu:P,onNodeDoubleClick:O,onNodeDragStart:A,onNodeDrag:T,onNodeDragStop:L,onNodesDelete:B,onEdgesDelete:W,onDelete:Y,onSelectionChange:V,onSelectionDragStart:I,onSelectionDrag:H,onSelectionDragStop:q,onSelectionContextMenu:F,onSelectionStart:J,onSelectionEnd:Z,onBeforeDelete:G,connectionMode:oe,connectionLineType:ae=ag.Bezier,connectionLineStyle:te,connectionLineComponent:re,connectionLineContainerStyle:X,deleteKeyCode:ce="Backspace",selectionKeyCode:he="Shift",selectionOnDrag:ve=!1,selectionMode:Ne=wN.Full,panActivationKeyCode:ke="Space",multiSelectionKeyCode:Te=LP()?"Meta":"Control",zoomActivationKeyCode:ye=LP()?"Meta":"Control",snapToGrid:Ie,snapGrid:Re,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:$e,nodesDraggable:He,nodesConnectable:gt,nodesFocusable:Ye,nodeOrigin:yt=Due,edgesFocusable:_t,edgesReconnectable:St,elementsSelectable:Bt=!0,defaultViewport:Nt=W9e,minZoom:Dt=.5,maxZoom:Ae=2,translateExtent:je=VP,preventScrolling:tt=!0,nodeExtent:Ot,defaultMarkerColor:qe="#b1b1b7",zoomOnScroll:ft=!0,zoomOnPinch:Wt=!0,panOnScroll:an=!1,panOnScrollSpeed:Un=.5,panOnScrollMode:pn=Ay.Free,zoomOnDoubleClick:ln=!0,panOnDrag:Gt=!0,onPaneClick:Kt,onPaneMouseEnter:Lt,onPaneMouseMove:In,onPaneMouseLeave:Tn,onPaneScroll:Wr,onPaneContextMenu:Mr,paneClickDistance:Hr=0,nodeClickDistance:Ii=0,children:Wi,onReconnect:Mi,onReconnectStart:zi,onReconnectEnd:xr,onEdgeContextMenu:Vr,onEdgeDoubleClick:$r,onEdgeMouseEnter:qt,onEdgeMouseMove:Zn,onEdgeMouseLeave:ea,reconnectRadius:ue=10,onNodesChange:xe,onEdgesChange:ne,noDragClassName:_e="nodrag",noWheelClassName:Be="nowheel",noPanClassName:Le="nopan",fitView:Ze,fitViewOptions:We,connectOnClick:wt,attributionPosition:ht,proOptions:Pt,defaultEdgeOptions:Ut,elevateNodesOnSelect:Zt,elevateEdgesOnSelect:sn,disableKeyboardA11y:cn=!1,autoPanOnConnect:hr,autoPanOnNodeDrag:Dn,autoPanSpeed:gn,connectionRadius:Gr,isValidConnection:xi,onError:ta,style:si,id:oi,nodeDragThreshold:la,viewport:li,onViewportChange:xa,width:Mn,height:Cr,colorMode:Lr="light",debug:er,...ei},Hi){const Fr=oi||"1",Si=K9e(Lr);return de.jsx("div",{...ei,style:{...si,...dWe},ref:Hi,className:Ra(["react-flow",i,Si]),"data-testid":"rf__wrapper",id:oi,children:de.jsxs(cWe,{nodes:t,edges:e,width:Mn,height:Cr,fitView:Ze,nodeOrigin:yt,children:[de.jsx(lWe,{onInit:c,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:_,onNodeMouseMove:N,onNodeMouseLeave:k,onNodeContextMenu:P,onNodeDoubleClick:O,nodeTypes:a,edgeTypes:s,connectionLineType:ae,connectionLineStyle:te,connectionLineComponent:re,connectionLineContainerStyle:X,selectionKeyCode:he,selectionOnDrag:ve,selectionMode:Ne,deleteKeyCode:ce,multiSelectionKeyCode:Te,panActivationKeyCode:ke,zoomActivationKeyCode:ye,onlyRenderVisibleElements:Ee,defaultViewport:Nt,translateExtent:je,minZoom:Dt,maxZoom:Ae,preventScrolling:tt,zoomOnScroll:ft,zoomOnPinch:Wt,zoomOnDoubleClick:ln,panOnScroll:an,panOnScrollSpeed:Un,panOnScrollMode:pn,panOnDrag:Gt,onPaneClick:Kt,onPaneMouseEnter:Lt,onPaneMouseMove:In,onPaneMouseLeave:Tn,onPaneScroll:Wr,onPaneContextMenu:Mr,paneClickDistance:Hr,nodeClickDistance:Ii,onSelectionContextMenu:F,onSelectionStart:J,onSelectionEnd:Z,onReconnect:Mi,onReconnectStart:zi,onReconnectEnd:xr,onEdgeContextMenu:Vr,onEdgeDoubleClick:$r,onEdgeMouseEnter:qt,onEdgeMouseMove:Zn,onEdgeMouseLeave:ea,reconnectRadius:ue,defaultMarkerColor:qe,noDragClassName:_e,noWheelClassName:Be,noPanClassName:Le,rfId:Fr,disableKeyboardA11y:cn,nodeExtent:Ot,viewport:li,onViewportChange:xa}),de.jsx(G9e,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:v,onConnectEnd:y,onClickConnectStart:x,onClickConnectEnd:S,nodesDraggable:He,nodesConnectable:gt,nodesFocusable:Ye,edgesFocusable:_t,edgesReconnectable:St,elementsSelectable:Bt,elevateNodesOnSelect:Zt,elevateEdgesOnSelect:sn,minZoom:Dt,maxZoom:Ae,nodeExtent:Ot,onNodesChange:xe,onEdgesChange:ne,snapToGrid:Ie,snapGrid:Re,connectionMode:oe,translateExtent:je,connectOnClick:wt,defaultEdgeOptions:Ut,fitView:Ze,fitViewOptions:We,onNodesDelete:B,onEdgesDelete:W,onDelete:Y,onNodeDragStart:A,onNodeDrag:T,onNodeDragStop:L,onSelectionDrag:H,onSelectionDragStart:I,onSelectionDragStop:q,onMove:f,onMoveStart:h,onMoveEnd:m,noPanClassName:Le,nodeOrigin:yt,rfId:Fr,autoPanOnConnect:hr,autoPanOnNodeDrag:Dn,autoPanSpeed:gn,onError:ta,connectionRadius:Gr,isValidConnection:xi,selectNodesOnDrag:$e,nodeDragThreshold:la,onBeforeDelete:G,paneClickDistance:Hr,debug:er}),de.jsx(U9e,{onSelectionChange:V}),Wi,de.jsx(V9e,{proOptions:Pt,position:ht}),de.jsx(I9e,{rfId:Fr,disableKeyboardA11y:cn})]})})}var AR=Aue(fWe);const hWe=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function tce({children:t}){const e=Ir(hWe);return e?eb.createPortal(t,e):null}const mWe=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__viewport-portal")};function pWe({children:t}){const e=Ir(mWe);return e?eb.createPortal(t,e):null}function UP(t){return Ir(R.useCallback(n=>n.nodeLookup.get(t),[t]),Oi)}function gWe({dimensions:t,lineWidth:e,variant:n,className:r}){return de.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Ra(["react-flow__background-pattern",n,r])})}function vWe({radius:t,className:e}){return de.jsx("circle",{cx:t,cy:t,r:t,className:Ra(["react-flow__background-pattern","dots",e])})}var xd;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(xd||(xd={}));const yWe={[xd.Dots]:1,[xd.Lines]:1,[xd.Cross]:6},bWe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function nce({id:t,variant:e=xd.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=2,color:s,bgColor:o,style:l,className:c,patternClassName:f}){const h=R.useRef(null),{transform:m,patternId:p}=Ir(bWe,Oi),v=r||yWe[e],y=e===xd.Dots,x=e===xd.Cross,S=Array.isArray(n)?n:[n,n],_=[S[0]*m[2]||1,S[1]*m[2]||1],N=v*m[2],k=x?[N,N]:_,P=y?[N/a,N/a]:[k[0]/a,k[1]/a],O=`${p}${t||""}`;return de.jsxs("svg",{className:Ra(["react-flow__background",c]),style:{...l,...PR,"--xy-background-color-props":o,"--xy-background-pattern-color-props":s},ref:h,"data-testid":"rf__background",children:[de.jsx("pattern",{id:O,x:m[0]%_[0],y:m[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${P[0]},-${P[1]})`,children:y?de.jsx(vWe,{radius:N/a,className:f}):de.jsx(gWe,{dimensions:k,lineWidth:i,variant:e,className:f})}),de.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${O})`})]})}nce.displayName="Background";const UF=R.memo(nce);function wWe(){return de.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:de.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function xWe(){return de.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:de.jsx("path",{d:"M0 0h32v4.2H0z"})})}function SWe(){return de.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:de.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function EWe(){return de.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:de.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function NWe(){return de.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:de.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function uD({children:t,className:e,...n}){return de.jsx("button",{type:"button",className:Ra(["react-flow__controls-button",e]),...n,children:t})}const _We=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function rce({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:o,onInteractiveChange:l,className:c,children:f,position:h="bottom-left",orientation:m="vertical","aria-label":p="React Flow controls"}){const v=Ui(),{isInteractive:y,minZoomReached:x,maxZoomReached:S}=Ir(_We,Oi),{zoomIn:_,zoomOut:N,fitView:k}=jm(),P=()=>{_(),a==null||a()},O=()=>{N(),s==null||s()},A=()=>{k(i),o==null||o()},T=()=>{v.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)},L=m==="horizontal"?"horizontal":"vertical";return de.jsxs(FF,{className:Ra(["react-flow__controls",L,c]),position:h,style:t,"data-testid":"rf__controls","aria-label":p,children:[e&&de.jsxs(de.Fragment,{children:[de.jsx(uD,{onClick:P,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:S,children:de.jsx(wWe,{})}),de.jsx(uD,{onClick:O,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x,children:de.jsx(xWe,{})})]}),n&&de.jsx(uD,{className:"react-flow__controls-fitview",onClick:A,title:"fit view","aria-label":"fit view",children:de.jsx(SWe,{})}),r&&de.jsx(uD,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?de.jsx(NWe,{}):de.jsx(EWe,{})}),f]})}rce.displayName="Controls";const WF=R.memo(rce);function CWe({id:t,x:e,y:n,width:r,height:i,style:a,color:s,strokeColor:o,strokeWidth:l,className:c,borderRadius:f,shapeRendering:h,selected:m,onClick:p}){const{background:v,backgroundColor:y}=a||{},x=s||v||y;return de.jsx("rect",{className:Ra(["react-flow__minimap-node",{selected:m},c]),x:e,y:n,rx:f,ry:f,width:r,height:i,style:{fill:x,stroke:o,strokeWidth:l},shapeRendering:h,onClick:p?S=>p(S,t):void 0})}const TWe=R.memo(CWe),DWe=t=>t.nodes.map(e=>e.id),WM=t=>t instanceof Function?t:()=>t;function kWe({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=TWe,onClick:s}){const o=Ir(DWe,Oi),l=WM(e),c=WM(t),f=WM(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return de.jsx(de.Fragment,{children:o.map(m=>de.jsx(AWe,{id:m,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:h},m))})}function PWe({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:o,onClick:l}){const{node:c,x:f,y:h}=Ir(v=>{const y=v.nodeLookup.get(t),{x,y:S}=y.internals.positionAbsolute;return{node:y,x,y:S}},Oi);if(!c||c.hidden||!sue(c))return null;const{width:m,height:p}=m_(c);return de.jsx(o,{x:f,y:h,width:m,height:p,style:c.style,selected:!!c.selected,className:r(c),color:e(c),borderRadius:i,strokeColor:n(c),strokeWidth:a,shapeRendering:s,onClick:l,id:c.id})}const AWe=R.memo(PWe);var RWe=R.memo(kWe);const OWe=200,jWe=150,IWe=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?rue(f_(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},MWe="react-flow__minimap-desc";function ice({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:o,bgColor:l,maskColor:c,maskStrokeColor:f,maskStrokeWidth:h,position:m="bottom-right",onClick:p,onNodeClick:v,pannable:y=!1,zoomable:x=!1,ariaLabel:S="React Flow mini map",inversePan:_,zoomStep:N=10,offsetScale:k=5}){const P=Ui(),O=R.useRef(null),{boundingRect:A,viewBB:T,rfId:L,panZoom:B,translateExtent:W,flowWidth:Y,flowHeight:V}=Ir(IWe,Oi),I=(t==null?void 0:t.width)??OWe,H=(t==null?void 0:t.height)??jWe,q=A.width/I,F=A.height/H,J=Math.max(q,F),Z=J*I,G=J*H,oe=k*J,ae=A.x-(Z-A.width)/2-oe,te=A.y-(G-A.height)/2-oe,re=Z+oe*2,X=G+oe*2,ce=`${MWe}-${L}`,he=R.useRef(0),ve=R.useRef();he.current=J,R.useEffect(()=>{if(O.current&&B)return ve.current=c9e({domNode:O.current,panZoom:B,getTransform:()=>P.getState().transform,getViewScale:()=>he.current}),()=>{var Te;(Te=ve.current)==null||Te.destroy()}},[B]),R.useEffect(()=>{var Te;(Te=ve.current)==null||Te.update({translateExtent:W,width:Y,height:V,inversePan:_,pannable:y,zoomStep:N,zoomable:x})},[y,x,_,N,W,Y,V]);const Ne=p?Te=>{var Re;const[ye,Ie]=((Re=ve.current)==null?void 0:Re.pointer(Te))||[0,0];p(Te,{x:ye,y:Ie})}:void 0,ke=v?R.useCallback((Te,ye)=>{const Ie=P.getState().nodeLookup.get(ye);v(Te,Ie)},[]):void 0;return de.jsx(FF,{position:m,style:{...t,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*J:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:Ra(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:de.jsxs("svg",{width:I,height:H,viewBox:`${ae} ${te} ${re} ${X}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:O,onClick:Ne,children:[S&&de.jsx("title",{id:ce,children:S}),de.jsx(RWe,{onClick:ke,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:o}),de.jsx("path",{className:"react-flow__minimap-mask",d:`M${ae-oe},${te-oe}h${re+oe*2}v${X+oe*2}h${-re-oe*2}z
        M${T.x},${T.y}h${T.width}v${T.height}h${-T.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ice.displayName="MiniMap";R.memo(ice);function VWe({nodeId:t,position:e,variant:n=AE.Handle,className:r,style:i={},children:a,color:s,minWidth:o=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:m,onResizeStart:p,onResize:v,onResizeEnd:y}){const x=Iue(),S=typeof t=="string"?t:x,_=Ui(),N=R.useRef(null),k=n===AE.Line?"right":"bottom-right",P=e??k,O=R.useRef(null);R.useEffect(()=>{if(!(!N.current||!S))return O.current||(O.current=_9e({domNode:N.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:B,transform:W,snapGrid:Y,snapToGrid:V,nodeOrigin:I}=_.getState();return{nodeLookup:B,transform:W,snapGrid:Y,snapToGrid:V,nodeOrigin:I}},onChange:(B,W)=>{const{triggerNodeChanges:Y,nodeLookup:V,parentLookup:I,nodeOrigin:H}=_.getState(),q=[],F={x:B.x,y:B.y},J=V.get(S);if(J&&J.expandParent&&J.parentId){const Z=J.origin??H,G=B.width??J.measured.width,oe=B.height??J.measured.height,ae={id:J.id,parentId:J.parentId,rect:{width:G,height:oe,...oue({x:B.x??J.position.x,y:B.y??J.position.y},{width:G,height:oe},J.parentId,V,Z)}},te=LF([ae],V,I,H);q.push(...te),F.x=B.x?Math.max(Z[0]*G,B.x):void 0,F.y=B.y?Math.max(Z[1]*oe,B.y):void 0}if(F.x!==void 0&&F.y!==void 0){const Z={id:S,type:"position",position:{...F}};q.push(Z)}if(B.width!==void 0&&B.height!==void 0){const Z={id:S,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:B.width,height:B.height}};q.push(Z)}for(const Z of W){const G={...Z,type:"position"};q.push(G)}Y(q)},onEnd:()=>{const B={id:S,type:"dimensions",resizing:!1};_.getState().triggerNodeChanges([B])}})),O.current.update({controlPosition:P,boundaries:{minWidth:o,minHeight:l,maxWidth:c,maxHeight:f},keepAspectRatio:h,onResizeStart:p,onResize:v,onResizeEnd:y,shouldResize:m}),()=>{var B;(B=O.current)==null||B.destroy()}},[P,o,l,c,f,h,p,v,y,m]);const A=P.split("-"),T=n===AE.Line?"borderColor":"backgroundColor",L=s?{...i,[T]:s}:i;return de.jsx("div",{className:Ra(["react-flow__resize-control","nodrag",...A,n,r]),ref:N,style:L,children:a})}R.memo(VWe);var Zr;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const s of i)a[s]=s;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),s={};for(const o of a)s[o]=i[o];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},t.find=(i,a)=>{for(const s of i)if(a(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Zr||(Zr={}));var iJ;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(iJ||(iJ={}));const xn=Zr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),eg=t=>{switch(typeof t){case"undefined":return xn.undefined;case"string":return xn.string;case"number":return Number.isNaN(t)?xn.nan:xn.number;case"boolean":return xn.boolean;case"function":return xn.function;case"bigint":return xn.bigint;case"symbol":return xn.symbol;case"object":return Array.isArray(t)?xn.array:t===null?xn.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?xn.promise:typeof Map<"u"&&t instanceof Map?xn.map:typeof Set<"u"&&t instanceof Set?xn.set:typeof Date<"u"&&t instanceof Date?xn.date:xn.object;default:return xn.unknown}},It=Zr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Dm extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(s))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof Dm))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Zr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Dm.create=t=>new Dm(t);const z4=(t,e)=>{let n;switch(t.code){case It.invalid_type:t.received===xn.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case It.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Zr.jsonStringifyReplacer)}`;break;case It.unrecognized_keys:n=`Unrecognized key(s) in object: ${Zr.joinValues(t.keys,", ")}`;break;case It.invalid_union:n="Invalid input";break;case It.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Zr.joinValues(t.options)}`;break;case It.invalid_enum_value:n=`Invalid enum value. Expected ${Zr.joinValues(t.options)}, received '${t.received}'`;break;case It.invalid_arguments:n="Invalid function arguments";break;case It.invalid_return_type:n="Invalid function return type";break;case It.invalid_date:n="Invalid date";break;case It.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Zr.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case It.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case It.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case It.custom:n="Invalid input";break;case It.invalid_intersection_types:n="Intersection results could not be merged";break;case It.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case It.not_finite:n="Number must be finite";break;default:n=e.defaultError,Zr.assertNever(t)}return{message:n}};let $We=z4;function LWe(){return $We}const FWe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],s={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(s,{data:e,defaultError:o}).message;return{...i,path:a,message:o}};function rn(t,e){const n=LWe(),r=FWe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===z4?void 0:z4].filter(i=>!!i)});t.common.issues.push(r)}class bu{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ir;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,s=await i.value;r.push({key:a,value:s})}return bu.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return ir;a.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[a.value]=s.value)}return{status:e.value,value:r}}}const ir=Object.freeze({status:"aborted"}),cE=t=>({status:"dirty",value:t}),wc=t=>({status:"valid",value:t}),aJ=t=>t.status==="aborted",sJ=t=>t.status==="dirty",Bw=t=>t.status==="valid",WP=t=>typeof Promise<"u"&&t instanceof Promise;var Cn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Cn||(Cn={}));class kg{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const oJ=(t,e)=>{if(Bw(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Dm(t.common.issues);return this._error=n,this._error}}};function _r(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,o)=>{const{message:l}=t;return s.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:i}}class zr{get description(){return this._def.description}_getType(e){return eg(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:eg(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new bu,ctx:{common:e.parent.common,data:e.data,parsedType:eg(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(WP(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eg(e)},i=this._parseSync({data:e,path:r.path,parent:r});return oJ(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eg(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Bw(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Bw(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eg(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(WP(i)?i:Promise.resolve(i));return oJ(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const s=e(i),o=()=>a.addIssue({code:It.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ww({schema:this,typeName:ct.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return pg.create(this,this._def)}nullable(){return zw.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Sd.create(this)}promise(){return KP.create(this,this._def)}or(e){return HP.create([this,e],this._def)}and(e){return GP.create(this,e,this._def)}transform(e){return new Ww({..._r(this._def),schema:this,typeName:ct.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Y4({..._r(this._def),innerType:this,defaultValue:n,typeName:ct.ZodDefault})}brand(){return new uze({typeName:ct.ZodBranded,type:this,..._r(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new J4({..._r(this._def),innerType:this,catchValue:n,typeName:ct.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return zF.create(this,e)}readonly(){return q4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const BWe=/^c[^\s-]{8,}$/i,UWe=/^[0-9a-z]+$/,WWe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,zWe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,HWe=/^[a-z0-9_-]{21}$/i,GWe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,KWe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,YWe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,JWe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zM;const qWe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XWe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ZWe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,QWe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eze=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tze=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ace="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nze=new RegExp(`^${ace}$`);function sce(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function rze(t){return new RegExp(`^${sce(t)}$`)}function ize(t){let e=`${ace}T${sce(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function aze(t,e){return!!((e==="v4"||!e)&&qWe.test(t)||(e==="v6"||!e)&&ZWe.test(t))}function sze(t,e){if(!GWe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function oze(t,e){return!!((e==="v4"||!e)&&XWe.test(t)||(e==="v6"||!e)&&QWe.test(t))}class hm extends zr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xn.string){const a=this._getOrReturnCtx(e);return rn(a,{code:It.invalid_type,expected:xn.string,received:a.parsedType}),ir}const r=new bu;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),rn(i,{code:It.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),rn(i,{code:It.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const s=e.data.length>a.value,o=e.data.length<a.value;(s||o)&&(i=this._getOrReturnCtx(e,i),s?rn(i,{code:It.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&rn(i,{code:It.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")YWe.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"email",code:It.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")zM||(zM=new RegExp(JWe,"u")),zM.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"emoji",code:It.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")zWe.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"uuid",code:It.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")HWe.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"nanoid",code:It.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")BWe.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"cuid",code:It.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")UWe.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"cuid2",code:It.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")WWe.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"ulid",code:It.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),rn(i,{validation:"url",code:It.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"regex",code:It.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),rn(i,{code:It.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),rn(i,{code:It.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),rn(i,{code:It.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?ize(a).test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{code:It.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?nze.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{code:It.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?rze(a).test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{code:It.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?KWe.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"duration",code:It.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?aze(e.data,a.version)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"ip",code:It.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?sze(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"jwt",code:It.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?oze(e.data,a.version)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"cidr",code:It.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?eze.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"base64",code:It.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?tze.test(e.data)||(i=this._getOrReturnCtx(e,i),rn(i,{validation:"base64url",code:It.invalid_string,message:a.message}),r.dirty()):Zr.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:It.invalid_string,...Cn.errToObj(r)})}_addCheck(e){return new hm({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Cn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Cn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Cn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Cn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Cn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Cn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Cn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Cn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Cn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Cn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Cn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Cn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Cn.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Cn.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Cn.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Cn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Cn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Cn.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Cn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Cn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Cn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Cn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Cn.errToObj(n)})}nonempty(e){return this.min(1,Cn.errToObj(e))}trim(){return new hm({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new hm({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new hm({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hm.create=t=>new hm({checks:[],typeName:ct.ZodString,coerce:(t==null?void 0:t.coerce)??!1,..._r(t)});function lze(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return a%s/10**i}class Yy extends zr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xn.number){const a=this._getOrReturnCtx(e);return rn(a,{code:It.invalid_type,expected:xn.number,received:a.parsedType}),ir}let r;const i=new bu;for(const a of this._def.checks)a.kind==="int"?Zr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),rn(r,{code:It.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),rn(r,{code:It.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),rn(r,{code:It.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?lze(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),rn(r,{code:It.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),rn(r,{code:It.not_finite,message:a.message}),i.dirty()):Zr.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Cn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Cn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Cn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Cn.toString(n))}setLimit(e,n,r,i){return new Yy({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Cn.toString(i)}]})}_addCheck(e){return new Yy({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Cn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Cn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Cn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Cn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Cn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Cn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Cn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Cn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Cn.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Zr.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Yy.create=t=>new Yy({checks:[],typeName:ct.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,..._r(t)});class SN extends zr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==xn.bigint)return this._getInvalidInput(e);let r;const i=new bu;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),rn(r,{code:It.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),rn(r,{code:It.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),rn(r,{code:It.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Zr.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return rn(n,{code:It.invalid_type,expected:xn.bigint,received:n.parsedType}),ir}gte(e,n){return this.setLimit("min",e,!0,Cn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Cn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Cn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Cn.toString(n))}setLimit(e,n,r,i){return new SN({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Cn.toString(i)}]})}_addCheck(e){return new SN({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Cn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Cn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Cn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Cn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Cn.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}SN.create=t=>new SN({checks:[],typeName:ct.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,..._r(t)});class H4 extends zr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xn.boolean){const r=this._getOrReturnCtx(e);return rn(r,{code:It.invalid_type,expected:xn.boolean,received:r.parsedType}),ir}return wc(e.data)}}H4.create=t=>new H4({typeName:ct.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,..._r(t)});class zP extends zr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xn.date){const a=this._getOrReturnCtx(e);return rn(a,{code:It.invalid_type,expected:xn.date,received:a.parsedType}),ir}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return rn(a,{code:It.invalid_date}),ir}const r=new bu;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),rn(i,{code:It.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),rn(i,{code:It.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Zr.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zP({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Cn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Cn.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}zP.create=t=>new zP({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ct.ZodDate,..._r(t)});class lJ extends zr{_parse(e){if(this._getType(e)!==xn.symbol){const r=this._getOrReturnCtx(e);return rn(r,{code:It.invalid_type,expected:xn.symbol,received:r.parsedType}),ir}return wc(e.data)}}lJ.create=t=>new lJ({typeName:ct.ZodSymbol,..._r(t)});class uJ extends zr{_parse(e){if(this._getType(e)!==xn.undefined){const r=this._getOrReturnCtx(e);return rn(r,{code:It.invalid_type,expected:xn.undefined,received:r.parsedType}),ir}return wc(e.data)}}uJ.create=t=>new uJ({typeName:ct.ZodUndefined,..._r(t)});class cJ extends zr{_parse(e){if(this._getType(e)!==xn.null){const r=this._getOrReturnCtx(e);return rn(r,{code:It.invalid_type,expected:xn.null,received:r.parsedType}),ir}return wc(e.data)}}cJ.create=t=>new cJ({typeName:ct.ZodNull,..._r(t)});class G4 extends zr{constructor(){super(...arguments),this._any=!0}_parse(e){return wc(e.data)}}G4.create=t=>new G4({typeName:ct.ZodAny,..._r(t)});class dJ extends zr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return wc(e.data)}}dJ.create=t=>new dJ({typeName:ct.ZodUnknown,..._r(t)});class Pg extends zr{_parse(e){const n=this._getOrReturnCtx(e);return rn(n,{code:It.invalid_type,expected:xn.never,received:n.parsedType}),ir}}Pg.create=t=>new Pg({typeName:ct.ZodNever,..._r(t)});class fJ extends zr{_parse(e){if(this._getType(e)!==xn.undefined){const r=this._getOrReturnCtx(e);return rn(r,{code:It.invalid_type,expected:xn.void,received:r.parsedType}),ir}return wc(e.data)}}fJ.create=t=>new fJ({typeName:ct.ZodVoid,..._r(t)});class Sd extends zr{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==xn.array)return rn(n,{code:It.invalid_type,expected:xn.array,received:n.parsedType}),ir;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(s||o)&&(rn(n,{code:s?It.too_big:It.too_small,minimum:o?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(rn(n,{code:It.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(rn(n,{code:It.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>i.type._parseAsync(new kg(n,s,n.path,o)))).then(s=>bu.mergeArray(r,s));const a=[...n.data].map((s,o)=>i.type._parseSync(new kg(n,s,n.path,o)));return bu.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Sd({...this._def,minLength:{value:e,message:Cn.toString(n)}})}max(e,n){return new Sd({...this._def,maxLength:{value:e,message:Cn.toString(n)}})}length(e,n){return new Sd({...this._def,exactLength:{value:e,message:Cn.toString(n)}})}nonempty(e){return this.min(1,e)}}Sd.create=(t,e)=>new Sd({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ct.ZodArray,..._r(e)});function z0(t){if(t instanceof ga){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=pg.create(z0(r))}return new ga({...t._def,shape:()=>e})}else return t instanceof Sd?new Sd({...t._def,type:z0(t.element)}):t instanceof pg?pg.create(z0(t.unwrap())):t instanceof zw?zw.create(z0(t.unwrap())):t instanceof Jy?Jy.create(t.items.map(e=>z0(e))):t}class ga extends zr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Zr.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==xn.object){const c=this._getOrReturnCtx(e);return rn(c,{code:It.invalid_type,expected:xn.object,received:c.parsedType}),ir}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Pg&&this._def.unknownKeys==="strip"))for(const c in i.data)s.includes(c)||o.push(c);const l=[];for(const c of s){const f=a[c],h=i.data[c];l.push({key:{status:"valid",value:c},value:f._parse(new kg(i,h,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Pg){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of o)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(c==="strict")o.length>0&&(rn(i,{code:It.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of o){const h=i.data[f];l.push({key:{status:"valid",value:f},value:c._parse(new kg(i,h,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of l){const h=await f.key,m=await f.value;c.push({key:h,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>bu.mergeObjectSync(r,c)):bu.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Cn.errToObj,new ga({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,s;const i=((s=(a=this._def).errorMap)==null?void 0:s.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Cn.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new ga({...this._def,unknownKeys:"strip"})}passthrough(){return new ga({...this._def,unknownKeys:"passthrough"})}extend(e){return new ga({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ga({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ct.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ga({...this._def,catchall:e})}pick(e){const n={};for(const r of Zr.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ga({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Zr.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new ga({...this._def,shape:()=>n})}deepPartial(){return z0(this)}partial(e){const n={};for(const r of Zr.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new ga({...this._def,shape:()=>n})}required(e){const n={};for(const r of Zr.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof pg;)a=a._def.innerType;n[r]=a}return new ga({...this._def,shape:()=>n})}keyof(){return oce(Zr.objectKeys(this.shape))}}ga.create=(t,e)=>new ga({shape:()=>t,unknownKeys:"strip",catchall:Pg.create(),typeName:ct.ZodObject,..._r(e)});ga.strictCreate=(t,e)=>new ga({shape:()=>t,unknownKeys:"strict",catchall:Pg.create(),typeName:ct.ZodObject,..._r(e)});ga.lazycreate=(t,e)=>new ga({shape:t,unknownKeys:"strip",catchall:Pg.create(),typeName:ct.ZodObject,..._r(e)});class HP extends zr{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=a.map(o=>new Dm(o.ctx.common.issues));return rn(n,{code:It.invalid_union,unionErrors:s}),ir}if(n.common.async)return Promise.all(r.map(async a=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let a;const s=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=l._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(l=>new Dm(l));return rn(n,{code:It.invalid_union,unionErrors:o}),ir}}get options(){return this._def.options}}HP.create=(t,e)=>new HP({options:t,typeName:ct.ZodUnion,..._r(e)});function K4(t,e){const n=eg(t),r=eg(e);if(t===e)return{valid:!0,data:t};if(n===xn.object&&r===xn.object){const i=Zr.objectKeys(e),a=Zr.objectKeys(t).filter(o=>i.indexOf(o)!==-1),s={...t,...e};for(const o of a){const l=K4(t[o],e[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===xn.array&&r===xn.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const s=t[a],o=e[a],l=K4(s,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===xn.date&&r===xn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class GP extends zr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,s)=>{if(aJ(a)||aJ(s))return ir;const o=K4(a.value,s.value);return o.valid?((sJ(a)||sJ(s))&&n.dirty(),{status:n.value,value:o.data}):(rn(r,{code:It.invalid_intersection_types}),ir)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}GP.create=(t,e,n)=>new GP({left:t,right:e,typeName:ct.ZodIntersection,..._r(n)});class Jy extends zr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xn.array)return rn(r,{code:It.invalid_type,expected:xn.array,received:r.parsedType}),ir;if(r.data.length<this._def.items.length)return rn(r,{code:It.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ir;!this._def.rest&&r.data.length>this._def.items.length&&(rn(r,{code:It.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new kg(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(a).then(s=>bu.mergeArray(n,s)):bu.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Jy({...this._def,rest:e})}}Jy.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jy({items:t,typeName:ct.ZodTuple,rest:null,..._r(e)})};class hJ extends zr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xn.map)return rn(r,{code:It.invalid_type,expected:xn.map,received:r.parsedType}),ir;const i=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([o,l],c)=>({key:i._parse(new kg(r,o,r.path,[c,"key"])),value:a._parse(new kg(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,f=await l.value;if(c.status==="aborted"||f.status==="aborted")return ir;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),o.set(c.value,f.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const c=l.key,f=l.value;if(c.status==="aborted"||f.status==="aborted")return ir;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),o.set(c.value,f.value)}return{status:n.value,value:o}}}}hJ.create=(t,e,n)=>new hJ({valueType:e,keyType:t,typeName:ct.ZodMap,..._r(n)});class EN extends zr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xn.set)return rn(r,{code:It.invalid_type,expected:xn.set,received:r.parsedType}),ir;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(rn(r,{code:It.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(rn(r,{code:It.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function s(l){const c=new Set;for(const f of l){if(f.status==="aborted")return ir;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>a._parse(new kg(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(e,n){return new EN({...this._def,minSize:{value:e,message:Cn.toString(n)}})}max(e,n){return new EN({...this._def,maxSize:{value:e,message:Cn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}EN.create=(t,e)=>new EN({valueType:t,minSize:null,maxSize:null,typeName:ct.ZodSet,..._r(e)});class mJ extends zr{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}mJ.create=(t,e)=>new mJ({getter:t,typeName:ct.ZodLazy,..._r(e)});class pJ extends zr{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return rn(n,{received:n.data,code:It.invalid_literal,expected:this._def.value}),ir}return{status:"valid",value:e.data}}get value(){return this._def.value}}pJ.create=(t,e)=>new pJ({value:t,typeName:ct.ZodLiteral,..._r(e)});function oce(t,e){return new Uw({values:t,typeName:ct.ZodEnum,..._r(e)})}class Uw extends zr{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return rn(n,{expected:Zr.joinValues(r),received:n.parsedType,code:It.invalid_type}),ir}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return rn(n,{received:n.data,code:It.invalid_enum_value,options:r}),ir}return wc(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Uw.create(e,{...this._def,...n})}exclude(e,n=this._def){return Uw.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Uw.create=oce;class gJ extends zr{_parse(e){const n=Zr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==xn.string&&r.parsedType!==xn.number){const i=Zr.objectValues(n);return rn(r,{expected:Zr.joinValues(i),received:r.parsedType,code:It.invalid_type}),ir}if(this._cache||(this._cache=new Set(Zr.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Zr.objectValues(n);return rn(r,{received:r.data,code:It.invalid_enum_value,options:i}),ir}return wc(e.data)}get enum(){return this._def.values}}gJ.create=(t,e)=>new gJ({values:t,typeName:ct.ZodNativeEnum,..._r(e)});class KP extends zr{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xn.promise&&n.common.async===!1)return rn(n,{code:It.invalid_type,expected:xn.promise,received:n.parsedType}),ir;const r=n.parsedType===xn.promise?n.data:Promise.resolve(n.data);return wc(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}KP.create=(t,e)=>new KP({type:t,typeName:ct.ZodPromise,..._r(e)});class Ww extends zr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:s=>{rn(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const s=i.transform(r.data,a);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return ir;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?ir:l.status==="dirty"||n.value==="dirty"?cE(l.value):l});{if(n.value==="aborted")return ir;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?ir:o.status==="dirty"||n.value==="dirty"?cE(o.value):o}}if(i.type==="refinement"){const s=o=>{const l=i.refinement(o,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ir:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?ir:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Bw(s))return ir;const o=i.transform(s.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Bw(s)?Promise.resolve(i.transform(s.value,a)).then(o=>({status:n.value,value:o})):ir);Zr.assertNever(i)}}Ww.create=(t,e,n)=>new Ww({schema:t,typeName:ct.ZodEffects,effect:e,..._r(n)});Ww.createWithPreprocess=(t,e,n)=>new Ww({schema:e,effect:{type:"preprocess",transform:t},typeName:ct.ZodEffects,..._r(n)});class pg extends zr{_parse(e){return this._getType(e)===xn.undefined?wc(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pg.create=(t,e)=>new pg({innerType:t,typeName:ct.ZodOptional,..._r(e)});class zw extends zr{_parse(e){return this._getType(e)===xn.null?wc(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zw.create=(t,e)=>new zw({innerType:t,typeName:ct.ZodNullable,..._r(e)});class Y4 extends zr{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===xn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Y4.create=(t,e)=>new Y4({innerType:t,typeName:ct.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._r(e)});class J4 extends zr{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return WP(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Dm(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dm(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}J4.create=(t,e)=>new J4({innerType:t,typeName:ct.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._r(e)});class vJ extends zr{_parse(e){if(this._getType(e)!==xn.nan){const r=this._getOrReturnCtx(e);return rn(r,{code:It.invalid_type,expected:xn.nan,received:r.parsedType}),ir}return{status:"valid",value:e.data}}}vJ.create=t=>new vJ({typeName:ct.ZodNaN,..._r(t)});class uze extends zr{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class zF extends zr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ir:a.status==="dirty"?(n.dirty(),cE(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ir:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new zF({in:e,out:n,typeName:ct.ZodPipeline})}}class q4 extends zr{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Bw(i)&&(i.value=Object.freeze(i.value)),i);return WP(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}q4.create=(t,e)=>new q4({innerType:t,typeName:ct.ZodReadonly,..._r(e)});var ct;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ct||(ct={}));const oo=hm.create,cze=Yy.create,yJ=G4.create;Pg.create;const NN=Sd.create,Ed=ga.create;HP.create;GP.create;Jy.create;const dze=Uw.create;KP.create;pg.create;zw.create;class fze extends CF{constructor(n){super();Mt(this,"prompt");Mt(this,"onPartialResponse");this.prompt=n,this.onPartialResponse=null}execute(){return new Promise((n,r)=>{(async()=>{var s,o;const i=await OR.chat.completions.create({model:this.prompt.model||"gpt-4o-2024-08-06",messages:[{role:"user",content:this.prompt.prompt}],temperature:0,stream:!0});let a="";for await(const l of i)a+=((o=(s=l.choices[0])==null?void 0:s.delta)==null?void 0:o.content)||"",this.onPartialResponse&&this.onPartialResponse({result:a});n({result:a})})()})}}class RR{constructor(){Mt(this,"temporaryResult","")}onResult(e){this.temporaryResult=this.reconstructResult(e)}execute(){if(this.canBeExecuted()){const e=new fze({prompt:this.getPrompt()});e.onPartialResponse=n=>this.onPartialResult(n.result),e.execute().then(n=>{n&&this.isResultValid(n.result)&&this.onResult(n.result),this.finalize()}),dm.getState().setTextIsBeingEdited(!0)}}finalize(){mu.getInstance().refreshFromText(this.temporaryResult,void 0,()=>{Ce.getState().suggestNextTextChanges(),Ce.getState().setTextState([{children:[{text:this.temporaryResult}]}],!0,!1),Ce.getState().setIsStale(!1),wl.getState().addHistoryNode(Ce.getState()),dm.getState().setTextIsBeingEdited(!1)})}reconstructResult(e){return e}isResultValid(e){return!0}canBeExecuted(){return Ce.getState().text.length>0}onPartialResult(e){}}class hze extends RR{constructor(n,r,i,a){super();Mt(this,"entity");Mt(this,"propertyName");Mt(this,"previousValue");Mt(this,"newValue");this.entity=n,this.propertyName=r,this.previousValue=i,this.newValue=a,br.getState().logEvent("CHANGE_PROPERTY_PROMPT",{entity:n.name,propertyName:r,previousValue:i,newValue:a})}getPrompt(){const n=this.propertyName.toLowerCase();return`${Ce.getState().text}

On a scale from 1 being low ${n} and 10 being high ${n}, ${this.entity.name}'s ${n} is currently a ${this.previousValue}. Slightly rewrite the story so that the ${n} of ${this.entity.name} becomes a ${this.newValue}`}}class p_ extends RR{constructor(){super();Mt(this,"splittedText");this.splittedText=null}isTargetted(){return Ce.getState().filteredActionsSegment!==null}splitTextBasedOnSelection(){const n=Ce.getState().filteredActionsSegment;if(n){const r=Ce.getState().textActionMatches[n.start],i=Ce.getState().textActionMatches[n.end],a=Ce.getState().text.slice(0,r.start),s=Ce.getState().text.slice(r.start,i.end),o=Ce.getState().text.slice(i.end);return{precedingText:a,textToModify:s,followingText:o}}return null}getPrompt(){return this.splittedText=this.splitTextBasedOnSelection(),this.splittedText?this.getTargettedPrompt(this.splittedText.precedingText,this.splittedText.textToModify,this.splittedText.followingText):this.getGlobalPrompt(Ce.getState().text)}reconstructResult(n){return this.splittedText?this.splittedText.precedingText+ky.getFittingString(n,this.splittedText.textToModify)+this.splittedText.followingText:n}}class mze extends p_{constructor(n){super();Mt(this,"entity");this.entity=n,br.getState().logEvent("REMOVE_ENTITY_PROMPT",{entity:n.name})}getGlobalPrompt(n){return`${n}

Rewrite the story so that there is no "${this.entity.name}"`}getTargettedPrompt(n,r,i){return`${n} TEXT_TO_REWRITE ${i}

TEXT_TO_REWRITE: ${r}

Rewrite TEXT_TO_REWRITE so that there is no "${this.entity.name}"`}}function HF(t,e){const n=e%2,r=Math.floor(e/2);return{id:"entity-"+t.name,type:"entityNode",dragHandle:".custom-drag-handle",measured:{width:160,height:160},position:{x:20+n*350,y:20+r*200},data:{...t}}}function pze(t){const e={background:"white",border:"1px solid #c8c8c8",width:7,height:7},n=Ce(x=>x.selectedNodes.includes(t.id)),{setNodes:r,setEdges:i}=jm(),a=Jf(["Delete","Backspace"]),s=Ce(x=>x.entityNodes),o=Ce(x=>x.setEntityNodes),l=Ce(x=>x.getFilteredEntityNodes),c=Ce(x=>x.highlightedEntities),f=Ce(x=>x.isReadOnly),h=Ce(x=>x.highlightedActionsSegment),m=Ce(x=>x.filteredActionsSegment);let p=!1;h&&(p=!l(h).map(S=>S.id).includes(t.id)),!p&&m&&(p=!l(m).map(S=>S.id).includes(t.id)),!p&&c.length>0&&c.indexOf(t.id)===-1&&(p=Ce.getState().actionEdges.filter(x=>c.includes(x.source)&&x.target===t.id||c.includes(x.target)&&x.source===t.id).length===0),f||R.useEffect(()=>{a&&Ce.getState().selectedNodes.includes(t.id)&&(i(x=>x.filter(S=>S.source!==t.id&&S.target!==t.id)),r(x=>x.filter(S=>S.id!==t.id)),new mze(t.data).execute())},[a]);const v=R.useCallback((x,S,_=!1)=>{const N=s.find(k=>k.id===t.id);if(N){let k=0;N.data.properties=N.data.properties.map(P=>(P.name===x&&(k=P.value,P.value=S),P)),o([...s]),_&&new hze(N.data,x,k,S).execute()}},[s,o]),y=t.data.properties.map(x=>b.jsxDEV("div",{className:"nodrag nopan",style:{display:"flex",flexDirection:"column"},children:b.jsxDEV(YA,{size:"sm",label:x.name,className:"max-w-md",step:1,color:"primary",minValue:1,maxValue:10,defaultValue:x.value,onChangeEnd:S=>v(x.name,S,!0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:96,columnNumber:7},this)},`property-${t.data.name}-${x.name}`,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:95,columnNumber:12},this));return b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{className:"custom-drag-handle node-entity",style:{position:"relative",border:`1px solid ${n?"#4180d9":"white"}`,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",padding:10,background:"white",borderRadius:5,opacity:p?"0.4":1},onMouseEnter:x=>{Ce.getState().setHighlightedEntities([t.id])},onMouseLeave:x=>{Ce.getState().setHighlightedEntities([])},children:[b.jsxDEV(lg,{style:e,type:"source",id:"t",position:yn.Top},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:113,columnNumber:7},this),b.jsxDEV(lg,{style:e,type:"source",id:"b",position:yn.Bottom},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:114,columnNumber:7},this),b.jsxDEV(lg,{style:e,type:"source",id:"l",position:yn.Left},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:115,columnNumber:7},this),b.jsxDEV(lg,{style:e,type:"source",id:"r",position:yn.Right},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:116,columnNumber:7},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",minWidth:130,minHeight:50},children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:10,background:"rgb(243 244 246)",width:40,height:40,borderRadius:99999},children:t.data.emoji},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:118,columnNumber:9},this),b.jsxDEV("span",{style:{fontWeight:800},children:[t.data.name," "]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:121,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:117,columnNumber:7},this),!f&&n&&b.jsxDEV("div",{style:{position:"absolute",zIndex:99999,border:"1px solid #e5e7eb",width:"100%",top:"100%",left:0,background:"white",padding:10,borderRadius:5,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},children:y},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:124,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:104,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntityNodeComponent.tsx",lineNumber:103,columnNumber:10},this)}function GF(t,e){const n=e%2,r=Math.floor(e/2);return{id:`location-${e}`,dragHandle:".custom-drag-handle",type:"locationNode",measured:{width:160,height:160},position:{x:20+n*350,y:20+r*200},data:t}}function gze(t){const e=Jf(["Delete","Backspace"]),n=Ce(o=>o.getFilteredLocationNodes);let i=dm(o=>o.hoveredLocation)===t.data.name;const a=Ce(o=>o.highlightedActionsSegment);let s=!1;return a&&(s=!n(a).map(l=>l.id).includes(t.id)),R.useEffect(()=>{e&&Ce.getState().selectedNodes.includes(t.id)},[e]),b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{className:"custom-drag-handle",style:{border:`1px solid ${i?"blue":"white"}`,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",width:160,height:160,padding:10,background:"white",borderRadius:9999,opacity:s?"0.3":1},children:b.jsxDEV("div",{style:{display:"flex",height:"100%",flexDirection:"row",alignItems:"end",justifyContent:"center"},children:b.jsxDEV("span",{style:{fontWeight:800,transform:"translate(0%, 38px)",whiteSpace:"nowrap"},children:[t.data.emoji," ",t.data.name]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationNodeComponent.tsx",lineNumber:51,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationNodeComponent.tsx",lineNumber:50,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationNodeComponent.tsx",lineNumber:49,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationNodeComponent.tsx",lineNumber:48,columnNumber:10},this)}const vze=Symbol("Let zodToJsonSchema decide on which parser to use"),bJ={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},yze=t=>typeof t=="string"?{...bJ,basePath:["#"],definitions:{},name:t}:{...bJ,basePath:["#"],definitions:{},...t},X4=t=>"_def"in t?t._def:t;function bze(t){if(!t)return!0;for(const e in t)return!1;return!0}const wze=t=>{const e=yze(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[X4(i),{def:X4(i),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function lce(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function ci(t,e,n,r,i){t[e]=n,lce(t,e,r,i)}function xze(){return{}}function Sze(t,e){var r,i;const n={type:"array"};return((i=(r=t.type)==null?void 0:r._def)==null?void 0:i.typeName)!==ct.ZodAny&&(n.items=Qr(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&ci(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&ci(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(ci(n,"minItems",t.exactLength.value,t.exactLength.message,e),ci(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function Eze(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?ci(n,"minimum",r.value,r.message,e):ci(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),ci(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ci(n,"maximum",r.value,r.message,e):ci(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),ci(n,"maximum",r.value,r.message,e));break;case"multipleOf":ci(n,"multipleOf",r.value,r.message,e);break}return n}function Nze(){return{type:"boolean"}}function _ze(t,e){return Qr(t.type._def,e)}const Cze=(t,e)=>Qr(t.innerType._def,e);function uce(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,a)=>uce(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Tze(t,e)}}const Tze=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":ci(n,"minimum",r.value,r.message,e);break;case"max":ci(n,"maximum",r.value,r.message,e);break}return n};function Dze(t,e){return{...Qr(t.innerType._def,e),default:t.defaultValue()}}function kze(t,e,n){return e.effectStrategy==="input"?Qr(t.schema._def,e,n):{}}function Pze(t){return{type:"string",enum:[...t.values]}}const Aze=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Rze(t,e){const n=[Qr(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Qr(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(a=>{if(Aze(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;s=l}else r=void 0;i.push(s)}}),i.length?{allOf:i,...r}:void 0}function Oze(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let HM;const Yv={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(HM===void 0&&(HM=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),HM),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function cce(t,e){const n={type:"string"};function r(i){return e.patternStrategy==="escape"?jze(i):i}if(t.checks)for(const i of t.checks)switch(i.kind){case"min":ci(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e);break;case"max":ci(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":id(n,"email",i.message,e);break;case"format:idn-email":id(n,"idn-email",i.message,e);break;case"pattern:zod":ad(n,Yv.email,i.message,e);break}break;case"url":id(n,"uri",i.message,e);break;case"uuid":id(n,"uuid",i.message,e);break;case"regex":ad(n,i.regex,i.message,e);break;case"cuid":ad(n,Yv.cuid,i.message,e);break;case"cuid2":ad(n,Yv.cuid2,i.message,e);break;case"startsWith":ad(n,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":ad(n,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":id(n,"date-time",i.message,e);break;case"date":id(n,"date",i.message,e);break;case"time":id(n,"time",i.message,e);break;case"duration":id(n,"duration",i.message,e);break;case"length":ci(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e),ci(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"includes":{ad(n,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&id(n,"ipv4",i.message,e),i.version!=="v4"&&id(n,"ipv6",i.message,e);break}case"emoji":ad(n,Yv.emoji,i.message,e);break;case"ulid":{ad(n,Yv.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{id(n,"binary",i.message,e);break}case"contentEncoding:base64":{ci(n,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{ad(n,Yv.base64,i.message,e);break}}break}case"nanoid":ad(n,Yv.nanoid,i.message,e)}return n}const jze=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),id=(t,e,n,r)=>{var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):ci(t,"format",e,n,r)},ad=(t,e,n,r)=>{var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:wJ(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):ci(t,"pattern",wJ(e,r),n,r)},wJ=(t,e)=>{var c;const n=typeof t=="function"?t():t;if(!e.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},i=r.i?n.source.toLowerCase():n.source;let a="",s=!1,o=!1,l=!1;for(let f=0;f<i.length;f++){if(s){a+=i[f],s=!1;continue}if(r.i){if(o){if(i[f].match(/[a-z]/)){l?(a+=i[f],a+=`${i[f-2]}-${i[f]}`.toUpperCase(),l=!1):i[f+1]==="-"&&((c=i[f+2])!=null&&c.match(/[a-z]/))?(a+=i[f],l=!0):a+=`${i[f]}${i[f].toUpperCase()}`;continue}}else if(i[f].match(/[a-z]/)){a+=`[${i[f]}${i[f].toUpperCase()}]`;continue}}if(r.m){if(i[f]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(i[f]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&i[f]==="."){a+=o?`${i[f]}\r
`:`[${i[f]}\r
]`;continue}a+=i[f],i[f]==="\\"?s=!0:o&&i[f]==="]"?o=!1:!o&&i[f]==="["&&(o=!0)}try{const f=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return a};function dce(t,e){var r,i,a,s;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===ct.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((o,l)=>({...o,[l]:Qr(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",l]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:Qr(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===ct.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const o=Object.entries(cce(t.keyType._def,e)).reduce((l,[c,f])=>c==="type"?l:{...l,[c]:f},{});return{...n,propertyNames:o}}else if(((s=t.keyType)==null?void 0:s._def.typeName)===ct.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};return n}function Ize(t,e){if(e.mapStrategy==="record")return dce(t,e);const n=Qr(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Qr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Mze(t){const e=t.values,r=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(r.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function Vze(){return{not:{}}}function $ze(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const YP={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Lze(t,e){if(e.target==="openApi3")return xJ(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in YP&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,a)=>{const s=YP[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,a)=>{const s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:n.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(a=>!r.includes(a))],[])};return xJ(t,e)}const xJ=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>Qr(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Fze(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:YP[t.innerType._def.typeName],nullable:!0}:{type:[YP[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Qr(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Qr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Bze(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",lce(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?ci(n,"minimum",r.value,r.message,e):ci(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),ci(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ci(n,"maximum",r.value,r.message,e):ci(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),ci(n,"maximum",r.value,r.message,e));break;case"multipleOf":ci(n,"multipleOf",r.value,r.message,e);break}return n}function Uze(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":Qr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":Qr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Wze(t,e){const n={type:"object",...Object.entries(t.shape()).reduce((r,[i,a])=>{if(a===void 0||a._def===void 0)return r;const s=[...e.currentPath,"properties",i],o=Qr(a._def,{...e,currentPath:s,propertyPath:s});return o===void 0?r:(e.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&console.warn(`Zod field at \`${s.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required
This will become an error in a future version of the SDK.`),{properties:{...r.properties,[i]:o},required:a.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,i]})},{properties:{},required:[]}),additionalProperties:Uze(t,e)};return n.required.length||delete n.required,n}const zze=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Qr(t.innerType._def,e);const n=Qr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Hze=(t,e)=>{if(e.pipeStrategy==="input")return Qr(t.in._def,e);if(e.pipeStrategy==="output")return Qr(t.out._def,e);const n=Qr(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Qr(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function Gze(t,e){return Qr(t.type._def,e)}function Kze(t,e){const r={type:"array",uniqueItems:!0,items:Qr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&ci(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&ci(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function Yze(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>Qr(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Qr(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>Qr(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Jze(){return{not:{}}}function qze(){return{}}const Xze=(t,e)=>Qr(t.innerType._def,e);function Qr(t,e,n=!1){var s;const r=e.seen.get(t);if(e.override){const o=(s=e.override)==null?void 0:s.call(e,t,e,r,n);if(o!==vze)return o}if(r&&!n){const o=Zze(r,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const a=eHe(t,t.typeName,e,n);return a&&tHe(t,e,a),i.jsonSchema=a,a}const Zze=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":const n=t.path.slice(e.basePath.length+1).join("_");return n!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[n]=t.def),{$ref:[...e.basePath,e.definitionPath,n].join("/")};case"relative":return{$ref:Qze(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,i)=>e.currentPath[i]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},Qze=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},eHe=(t,e,n,r)=>{switch(e){case ct.ZodString:return cce(t,n);case ct.ZodNumber:return Bze(t,n);case ct.ZodObject:return Wze(t,n);case ct.ZodBigInt:return Eze(t,n);case ct.ZodBoolean:return Nze();case ct.ZodDate:return uce(t,n);case ct.ZodUndefined:return Jze();case ct.ZodNull:return $ze(n);case ct.ZodArray:return Sze(t,n);case ct.ZodUnion:case ct.ZodDiscriminatedUnion:return Lze(t,n);case ct.ZodIntersection:return Rze(t,n);case ct.ZodTuple:return Yze(t,n);case ct.ZodRecord:return dce(t,n);case ct.ZodLiteral:return Oze(t,n);case ct.ZodEnum:return Pze(t);case ct.ZodNativeEnum:return Mze(t);case ct.ZodNullable:return Fze(t,n);case ct.ZodOptional:return zze(t,n);case ct.ZodMap:return Ize(t,n);case ct.ZodSet:return Kze(t,n);case ct.ZodLazy:return Qr(t.getter()._def,n);case ct.ZodPromise:return Gze(t,n);case ct.ZodNaN:case ct.ZodNever:return Vze();case ct.ZodEffects:return kze(t,n,r);case ct.ZodAny:return xze();case ct.ZodUnknown:return qze();case ct.ZodDefault:return Dze(t,n);case ct.ZodBranded:return _ze(t,n);case ct.ZodReadonly:return Xze(t,n);case ct.ZodCatch:return Cze(t,n);case ct.ZodPipeline:return Hze(t,n);case ct.ZodFunction:case ct.ZodVoid:case ct.ZodSymbol:return;default:return(i=>{})()}},tHe=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),nHe=(t,e)=>{const n=wze(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=Qr(t._def,r===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,r]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a);const s=(()=>{if(bze(n.definitions))return;const l={},c=new Set;for(let f=0;f<500;f++){const h=Object.entries(n.definitions).filter(([m])=>!c.has(m));if(h.length===0)break;for(const[m,p]of h)l[m]=Qr(X4(p),{...n,currentPath:[...n.basePath,n.definitionPath,m]},!0)??{},c.add(m)}return l})(),o=r===void 0?s?{...i,[n.definitionPath]:s}:i:n.nameStrategy==="duplicate-ref"?{...i,...s||n.seenRefs.size?{[n.definitionPath]:{...s,...n.seenRefs.size?{[r]:i}:void 0}}:void 0}:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:{...s,[r]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function fce(t,e){return nHe(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function KF(t,e,n){return rFe({type:"json_schema",json_schema:{...n,name:e,strict:!0,schema:fce(t,{name:e})}},r=>t.parse(JSON.parse(r)))}function rHe(t){return iFe({type:"function",function:{name:t.name,parameters:fce(t.parameters,{name:t.name}),strict:!0,...t.description?{description:t.description}:void 0}},{callback:t.function,parser:e=>t.parameters.parse(JSON.parse(e))})}var Z4={},Q4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(Q4);(function(t){var e=$f&&$f.__createBinding||(Object.create?function(c,f,h,m){m===void 0&&(m=h);var p=Object.getOwnPropertyDescriptor(f,h);(!p||("get"in p?!f.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,m,p)}:function(c,f,h,m){m===void 0&&(m=h),c[m]=f[h]}),n=$f&&$f.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&e(f,c,h)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=Q4;Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(Q4,t);class i extends Error{}t.PartialJSON=i;class a extends Error{}t.MalformedJSON=a;function s(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return o(c.trim(),f)}t.parseJSON=s;const o=(c,f)=>{const h=c.length;let m=0;const p=P=>{throw new i(`${P} at position ${m}`)},v=P=>{throw new a(`${P} at position ${m}`)},y=()=>(k(),m>=h&&p("Unexpected end of input"),c[m]==='"'?x():c[m]==="{"?S():c[m]==="["?_():c.substring(m,m+4)==="null"||r.Allow.NULL&f&&h-m<4&&"null".startsWith(c.substring(m))?(m+=4,null):c.substring(m,m+4)==="true"||r.Allow.BOOL&f&&h-m<4&&"true".startsWith(c.substring(m))?(m+=4,!0):c.substring(m,m+5)==="false"||r.Allow.BOOL&f&&h-m<5&&"false".startsWith(c.substring(m))?(m+=5,!1):c.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&f&&h-m<8&&"Infinity".startsWith(c.substring(m))?(m+=8,1/0):c.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-m&&h-m<9&&"-Infinity".startsWith(c.substring(m))?(m+=9,-1/0):c.substring(m,m+3)==="NaN"||r.Allow.NAN&f&&h-m<3&&"NaN".startsWith(c.substring(m))?(m+=3,NaN):N()),x=()=>{const P=m;let O=!1;for(m++;m<h&&(c[m]!=='"'||O&&c[m-1]==="\\");)O=c[m]==="\\"?!O:!1,m++;if(c.charAt(m)=='"')try{return JSON.parse(c.substring(P,++m-Number(O)))}catch(A){v(String(A))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(P,m-Number(O))+'"')}catch{return JSON.parse(c.substring(P,c.lastIndexOf("\\"))+'"')}p("Unterminated string literal")},S=()=>{m++,k();const P={};try{for(;c[m]!=="}";){if(k(),m>=h&&r.Allow.OBJ&f)return P;const O=x();k(),m++;try{const A=y();P[O]=A}catch(A){if(r.Allow.OBJ&f)return P;throw A}k(),c[m]===","&&m++}}catch{if(r.Allow.OBJ&f)return P;p("Expected '}' at end of object")}return m++,P},_=()=>{m++;const P=[];try{for(;c[m]!=="]";)P.push(y()),k(),c[m]===","&&m++}catch{if(r.Allow.ARR&f)return P;p("Expected ']' at end of array")}return m++,P},N=()=>{if(m===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(O){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(O))}}const P=m;for(c[m]==="-"&&m++;c[m]&&",]}".indexOf(c[m])===-1;)m++;m==h&&!(r.Allow.NUM&f)&&p("Unterminated number literal");try{return JSON.parse(c.substring(P,m))}catch{c.substring(P,m)==="-"&&p("Not sure what '-' is");try{return JSON.parse(c.substring(P,c.lastIndexOf("e")))}catch(A){v(String(A))}}},k=()=>{for(;m<h&&` 
\r	`.includes(c[m]);)m++};return y()},l=s;t.parse=l})(Z4);class YF extends CF{constructor(n,r){super();Mt(this,"prompt");Mt(this,"schema");Mt(this,"optionalSchema");Mt(this,"onPartialResponse");this.prompt=n,this.schema=r,this.optionalSchema=null,this.onPartialResponse=null}getDefaultValue(n){return n instanceof hm?"":n instanceof Yy?0:n instanceof H4?!1:null}addMissingFields(n,r){const i=r.shape;return Object.keys(i).reduce((s,o)=>(i[o]instanceof ga?s[o]=this.addMissingFields(n[o]||{},i[o]):i[o]instanceof Sd?s[o]=(n[o]||[]).map(l=>this.addMissingFields(l,i[o].element)):s[o]=n.hasOwnProperty(o)?n[o]:this.getDefaultValue(i[o]),s),{})}partialParse(n){try{let r=Z4.parse(n,~Z4.Allow.STR);return this.schema.parse(this.addMissingFields(r,this.schema))}catch{}return null}execute(){return new Promise((n,r)=>{(async()=>{var s,o;br.getState().logEvent("PROMPT_TO_EXECUTE",{prompt:this.prompt.prompt});const i=await OR.chat.completions.create({model:this.prompt.model||"gpt-4o-2024-08-06",messages:[{role:"user",content:this.prompt.prompt}],stream:!0,temperature:0,response_format:KF(this.schema,"response")});let a="";for await(const l of i)if(a+=((o=(s=l.choices[0])==null?void 0:s.delta)==null?void 0:o.content)||"",this.onPartialResponse){const c=this.partialParse(a);c&&this.onPartialResponse({result:c})}br.getState().logEvent("PROMPT_EXECUTED",{prompt:this.prompt.prompt,response:a}),this.onPartialResponse=null,n({result:JSON.parse(a)})})()})}}class iHe extends YF{constructor(){super({prompt:""},null);Mt(this,"afterPartialResult",null);Mt(this,"afterFinalResult",null)}execute(){return Ce.getState().text.length>0?(this.prompt={prompt:this.getPrompt()},this.schema=this.getJSONSchema(),this.onPartialResponse=n=>{this.onPartialResult(n),this.afterPartialResult&&this.afterPartialResult(n)},super.execute().then(n=>(this.afterFinalResult&&this.afterFinalResult(n),this.finalize(),n))):new Promise((n,r)=>{n({result:[]})})}finalize(){}}const aHe=Ed({actions:NN(Ed({name:oo(),source:oo(),target:oo(),location:oo()}))});function sHe(t,e,n,r){return{id:"action-"+n.id+"-"+t.name+"-"+r.id,type:"actionEdge",label:t.name,sourceHandle:t.source===t.target?"l":"b",targetHandle:t.source===t.target?"r":"t",animated:!0,markerEnd:{type:Ky.ArrowClosed,width:25,height:25},source:n.id,target:r.id,data:{name:t.name,passage:e,sourceLocation:t.location,targetLocation:t.location}}}function JF(t,e,n){const r=[],i={};return n.forEach(a=>{i[a.data.name.toLowerCase()]=a}),t.actions.forEach((a,s)=>{if(a.source.toLowerCase()in i&&a.target.toLowerCase()in i){const o=i[a.source.toLowerCase()],l=i[a.target.toLowerCase()];o.position.y<l.position.y,o.position.y<l.position.y,Math.abs(o.position.y-l.position.y)<20&&(o.position.x<l.position.x,o.position.x<l.position.x),r.push(sHe(a,e,o,l))}}),r}class oHe extends iHe{constructor(n,r,i,a){super();Mt(this,"textBefore");Mt(this,"textToExtract");Mt(this,"textAfter");Mt(this,"entities");Mt(this,"onUpdate",null);this.entities=n,this.textBefore=r,this.textToExtract=i,this.textAfter=a}getPrompt(){const n=this.entities.map(i=>i.data.name).join(", "),r=Ce.getState().locationNodes.map(i=>i.data.name).join(", ");return(this.textBefore.length===0?"":`BEFORE: ${this.textBefore}

`)+`TEXT: ${this.textToExtract}

Extract the actions done by the characters in TEXT and only the actions in TEXT. Do not extract the actions from BEFORE. Only consider actions that are happening exactly at the moment of TEXT, ignore memories etc. If there are no actions fulfilling these criterias in TEXT, then return an empty array. Source and target should be characters from this list: ${n}. Here are some possible locations but there might be others: ${r}. If an action is done by a character to itself, then the source and target character should be the same. For each action, extract the 'name' of the action (no more than 2 words), the source character (the character doing the action) and the target character (the character targetted by the action), and the location of the action (you can use 'unknown' if the location cannot be inferred from the text).`}getJSONSchema(){return aHe}onPartialResult(n){const r=Ce.getState().actionEdges,i=Ce.getState().entityNodes,a=Ce.getState().locationNodes;n.result.actions=n.result.actions.filter(o=>{if(o.source==="unknown")return!1;const l=o.name.toLowerCase().split(" "),c=l.some(h=>this.textBefore.toLowerCase().includes(h));return!l.some(h=>this.textToExtract.toLowerCase().includes(h))&&c?(console.log("Ignoring action because it does not seem to be from the passage: ",{action:o,passage:this.textToExtract}),!1):!0}),n.result.actions=n.result.actions.map(o=>({name:o.name.trim(),source:o.source.trim(),target:["unknown","itself","himself","herself","themselves","it","he","she","they",o.location.toLowerCase()].includes(o.target.toLowerCase())?o.source.trim():o.target.trim(),location:o.location.trim()}));const s=n.result.actions.filter(o=>{if(o.name===""||o.source===""||o.target===""||o.location==="")return!1;for(const l of r)if(l.data.name===o.name){const c=i.find(h=>h.id===l.source),f=i.find(h=>h.id===l.target);if(c&&c.data.name.toLowerCase()===o.source.toLowerCase()&&f&&f.data.name.toLowerCase()===o.target.toLowerCase())return!1}return!0});if(s.length>0){const o=s.map(p=>p.source).concat(s.map(p=>p.target)).filter(p=>!i.find(v=>v.data.name.toLowerCase()===p.toLowerCase()));o.forEach(p=>{const v=HF({name:p,emoji:"",properties:[]},i.length);i.push(v),console.log("New entity: ",p,"because of actions: ",s)}),o.length>0&&Ce.getState().setEntityNodes(i);const c=s.map(p=>p.location).filter(p=>!a.find(v=>v.data.name.toLowerCase()===p.toLowerCase()));c.forEach(p=>{const v=GF({name:p,emoji:""},a.length);a.push(v)}),c.length>0&&Ce.getState().setLocationNodes(a);const f=JF({actions:s},this.textToExtract,Ce.getState().entityNodes),h=[...r,...f],m=this.textBefore+this.textToExtract+this.textAfter;h.sort((p,v)=>m.indexOf(p.data.passage)-m.indexOf(v.data.passage)),Ce.getState().setActionEdges(h),this.onUpdate&&this.onUpdate()}}}let GM=null;class mu{constructor(){Mt(this,"previousText");Mt(this,"onUpdate");Mt(this,"onRefreshDone");this.previousText="",this.onUpdate=()=>{},this.onRefreshDone=()=>{}}static getInstance(){return GM||(GM=new mu),GM}reset(){this.previousText=""}clearInvalidActions(e){const r=Ce.getState().actionEdges.filter(i=>e.includes(i.data.passage));Ce.getState().setActionEdges(r)}clearInvalidEntities(e){const r=Ce.getState().entityNodes.filter(i=>e.toLowerCase().includes(i.data.name.toLowerCase()));Ce.getState().setEntityNodes(r)}clearInvalidLocations(){const e=Ce.getState().locationNodes,n=Ce.getState().actionEdges,r=[...new Set(n.map(a=>a.data.sourceLocation).concat(n.map(a=>a.data.targetLocation)))],i=e.filter(a=>r.includes(a.data.name));Ce.getState().setLocationNodes(i)}refreshFromText(e,n,r){if(this.previousText===e)return;Pi.stopAllSimulations(),Ce.getState().setSelectedNodes([]),Ce.getState().setSelectedEdges([]),Ce.getState().setFilteredActionsSegment(null,null),Ce.getState().setHighlightedActionsSegment(null,null),this.clearInvalidActions(e);const i=/[^.!?]+[.!?]+/g;let a,s=[];for(;a=i.exec(e);){const l=a.index,c=a.index+a[0].length,f=a[0].replace(/^\s+|\s+$/g,"");f.length<20&&s.length>0?(s[s.length-1].end=c,s[s.length-1].text=e.substring(s[s.length-1].start,c).replace(/^\s+|\s+$/g,"")):s.push({start:l,end:c,text:f})}s=s.filter(l=>!this.previousText.includes(l.text));const o=s.map(l=>{const c=Ce.getState().entityNodes,f=new oHe(c,e.substring(0,l.start),l.text,e.substring(l.end,e.length));return f.onUpdate=()=>{n&&n(),this.onUpdate()},f});new pBe(o).execute().then(l=>{const c=Ce.getState().actionEdges.map(f=>{var p,v,y;const h=Ce.getState().entityNodes.find(x=>x.id===f.source),m=Ce.getState().entityNodes.find(x=>x.id===f.target);return{name:(p=f.data)==null?void 0:p.name,source:h==null?void 0:h.data.name,target:m==null?void 0:m.data.name,location:(v=f.data)==null?void 0:v.sourceLocation,passage:(y=f.data)==null?void 0:y.passage}});console.log("Extracted actions:",c),r&&r(),this.onRefreshDone()}),this.previousText=e}}function SJ(){return{historyTree:null,positionInTree:[],redoPositionStack:[],timestampLastAddedNode:0}}const wl=Xf()((t,e)=>({...SJ(),reset:()=>t(n=>({...SJ()})),setPositionInTree:n=>{const r=e().getNodeAtPosition(n);r&&(Ce.setState(r.node.state),Aa.children=r.node.state.textState,Aa.onChange(),mu.getInstance().onUpdate&&mu.getInstance().onUpdate(),br.getState().logEvent("SET_POSITION_IN_HISTORY_TREE",{position:n}),t(i=>({positionInTree:n,redoPositionStack:[]})))},getNodeAtPosition:n=>{if(e().historyTree===null)return null;let r=null,i=e().historyTree;for(let a of n)if(i!=null&&i.children&&i.children[a])r=i,i=i.children[a];else return null;return{node:i,parent:r}},findNodePosition:n=>{function r(i,a){if(i===n)return a;if(i.children)for(let s=0;s<i.children.length;s++){const o=r(i.children[s],[...a,s]);if(o)return o}return null}return r(e().historyTree||{children:[]},[])},addHistoryNode:n=>{var l;const r={state:n,name:"",attributes:{},children:[]},i=e().positionInTree;let a=[],s=e().historyTree;const o=e().timestampLastAddedNode;if(Date.now()-o<700){const c=e().getNodeAtPosition(i);a=e().positionInTree,c&&(c.node.state=Ce.getState())}else if(s===null)s=r,a=[];else{const c=e().getNodeAtPosition(i);if(c){const f=c.node;f&&f.children&&((l=f.children)==null||l.push(r),a=[...i,f.children.length-1])}}t(c=>({historyTree:JSON.parse(JSON.stringify(s)),positionInTree:a,redoPositionStack:[],timestampLastAddedNode:Date.now()}))},undo:()=>{const n=e().positionInTree;if(n.length>0){const r=n.slice(0,n.length-1),i=[...e().redoPositionStack,n];e().setPositionInTree(r),t(a=>({redoPositionStack:i}))}},redo:()=>{const n=e().redoPositionStack;if(n.length>0){const r=n[n.length-1],i=[...n.slice(0,n.length-1)];e().setPositionInTree(r),t(a=>({redoPositionStack:i}))}}})),lHe=Ed({entities:NN(Ed({name:oo(),emoji:oo(),properties:NN(Ed({name:oo(),value:cze()}))}))});function qF(t){return t.entities.map((e,n)=>HF(e,n))}function uHe(t,e){const n=t+`

Extract all the entities in this story.For each entity, extract its 'name', an emoji best visually describing the entity (e.g., use the emoji of a person if it is a person but avoid reusing the same emojis),and properties about the entity, if any (no more than 3). Properties have to be adjectives describing the entity and their value should represent the intensity of the property (on a scale from 1 to 10).`,r=new YF({prompt:n},lHe);return Ce.getState().setEntityNodes([]),r.onPartialResponse=i=>{const a=qF(i.result),s=Ce.getState().entityNodes,o=a.map(l=>{const c=s.find(f=>f.data.name===l.data.name);return c&&c.position&&(l.position=c.position),c&&c.measured&&(l.measured=c.measured),l});Ce.getState().setEntityNodes(o),Pi.optimizeNodeLayout("entity",o,Ce.getState().setEntityNodes,{x:e.x,y:e.y},120)},new Promise((i,a)=>{r.execute().then(s=>{console.log("Extracted entities:",s.result.entities),i(Ce.getState().entityNodes)})})}const cHe=Ed({locations:NN(Ed({name:oo(),emoji:oo()}))});function JP(t){return t.locations.map((e,n)=>GF(e,n))}function dHe(t,e){const n=t+`

Extract all the main locations visited by the characters in this story.For each location, extract its 'name' and an emoji best visually representing the location`,r=new YF({prompt:n},cHe);return Ce.getState().setLocationNodes([]),r.onPartialResponse=i=>{const a=JP(i.result),s=Ce.getState().locationNodes,o=a.map(l=>{const c=s.find(f=>f.data.name===l.data.name);return c&&c.position&&(l.position=c.position),c&&c.measured&&(l.measured=c.measured),l});Ce.getState().setLocationNodes(o),Pi.optimizeNodeLayout("location",o,Ce.getState().setLocationNodes,{x:e.x,y:e.y},120)},new Promise((i,a)=>{r.execute().then(s=>{console.log("Extracted locations:",s.result),i(Ce.getState().locationNodes)})})}const fHe=4*60*1e3;let cD=null;const hHe="Timestamp,ParticipantId,StepId,StepType,Task,Condition,Event,Parameters",EJ={participantId:-1,stepId:-1,studyType:"READING",isDataSaved:!0,csvData:hHe,steps:[],isOutOfTime:!1},br=Xf()((t,e)=>({...EJ,reset:()=>t(n=>({...EJ})),setParticipantId:n=>t(r=>({participantId:n})),resetStep:()=>{Ce.getState().reset(),dm.getState().reset(),wl.getState().reset(),Ce.getState().setIsReadOnly(e().studyType==="READING");const n=JSON.parse(JSON.stringify(e().steps[e().stepId]));if(n.startingState&&(Ce.getState().setTextState(n.startingState.textState,!0,!1),Ce.getState().setIsStale(!1),mu.getInstance().previousText=Ce.getState().text,mu.getInstance().onUpdate()),n.hardcodedData){const r=qF(n.hardcodedData),i=JP(n.hardcodedData),a=n.hardcodedData.actions.map(s=>JF({actions:[s]},s.passage,r)).flat();Ce.getState().setEntityNodes(r),Ce.getState().setLocationNodes(i),Ce.getState().setActionEdges(a)}},setStepId:n=>{if(t(s=>({stepId:n})),e().stepId<e().steps.length){const s=e().stepId,o=e().steps[s];e().resetStep(),e().isDataSaved&&o.saveData&&e().csvData.length>0&&e().saveData(),cD!==null&&(clearTimeout(cD),cD=null),t(l=>({isOutOfTime:!1})),o.type==="TASK"&&(cD=setTimeout(()=>{br.setState(l=>({isOutOfTime:!0})),br.getState().logEvent("TIMEOUT_REACHED")},fHe)),wl.getState().reset()}const r=window.location.hash.split("?"),i=r[r.length-1],a=new URLSearchParams(i);a.get("stepId")!==e().stepId.toString()&&(a.set("stepId",n.toString()),window.location.hash=r.slice(0,r.length-1).join("?")+"?"+a.toString())},setSteps:n=>t(r=>({steps:n})),nextStep:()=>{e().stepId+1<e().steps.length&&e().setStepId(e().stepId+1)},setStudyType:n=>t(r=>({studyType:n})),logEvent(n,r){},saveData(n=!0,r=!1){},setIsDataSaved:n=>t(r=>({isDataSaved:n}))})),mHe={BASE_URL:"/VisualStoryWriting",DEV:!0,MODE:"development",PROD:!1,SSR:!1,VITE_GEMINI_API_KEY:"AIzaSyBntgDi_Ae0BRg2emcR93FHqVzkdiHwP8g",VITE_OPENAI_API_KEY:"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"},NJ=window.location.hash.split("?"),pHe=NJ[NJ.length-1],gHe=new URLSearchParams(pHe),_J=gHe.get("k");let e5="";_J?e5=atob(_J):"VITE_OPENAI_API_KEY"in mHe&&(e5="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");const OR=new Qn({apiKey:e5,dangerouslyAllowBrowser:!0}),vHe="";function CJ(){const t=[{children:[{text:vHe}]}],e=ig.stateToText(t),n=[],r=[],i=[];return{entityNodes:n,actionEdges:i,locationNodes:r,suggestModeUntilTimestamp:0,selectedNodes:[],selectedEdges:[],isStale:!1,highlightedActionsSegment:null,filteredActionsSegment:null,highlightedEntities:[],textActionMatches:ky.matchActionsToText(i.map(s=>s.data),e),textState:t,text:e,isReadOnly:!1}}const Ce=Xf()((t,e)=>({...CJ(),reset:()=>t(n=>({...CJ()})),getFilteredEntityNodes:n=>{if(n===null||n.start===0&&n.end===e().actionEdges.length-1)return e().entityNodes;const r=e().getFilteredActionEdges(n).map(i=>[i.source,i.target]).flat();return e().entityNodes.filter(i=>r.includes(i.id))},getFilteredActionEdges:n=>{const r=n!==null?Math.min(e().actionEdges.length,n.start):0,i=n!==null?Math.min(e().actionEdges.length,n.end+1):e().actionEdges.length;return e().actionEdges.slice(r,i)},getFilteredLocationNodes:n=>{const r=e().getFilteredActionEdges(n).map(i=>[i.data.sourceLocation,i.data.targetLocation]).flat();return e().locationNodes.filter(i=>r.includes(i.data.name))},setEntityNodes:n=>{t(r=>({entityNodes:n}))},setLocationNodes:n=>{t(r=>({locationNodes:n}))},setActionEdges:n=>{const r=ky.matchActionsToText(n.map(i=>i.data),e().text);t(i=>({actionEdges:n,textActionMatches:r}))},setTextState:(n,r=!0,i=!0)=>{const a=ig.stateToText(n),s=e().text!==a;if(s&&e().suggestModeUntilTimestamp>Date.now()){const o=Bse(e().text,a),l=[];for(const c of o)c.removed?l.push({text:c.value,removed:!0}):c.added?l.push({text:c.value,added:!0}):l.push({text:c.value});n=[{children:l,type:"paragraph"}]}if(s){const o=ky.matchActionsToText(e().actionEdges.map(l=>l.data),a);t(l=>({textState:n,text:a,textActionMatches:o,isStale:!0})),i&&wl.getState().addHistoryNode(e())}else t(o=>({textState:n}));r&&(Aa.children=n,Aa.onChange())},suggestNextTextChanges:()=>{t(n=>({suggestModeUntilTimestamp:Date.now()+200}))},acceptSuggestions:()=>{let n=JSON.parse(JSON.stringify(e().textState))[0];n.children=n.children.filter(r=>r.removed===void 0),n.children=n.children.map(r=>({text:r.text})),t(r=>({textState:[n]})),Aa.children=[n],Aa.onChange()},rejectSuggestions:()=>{let n=JSON.parse(JSON.stringify(e().textState))[0];n.children=n.children.filter(r=>r.added===void 0),n.children=n.children.map(r=>({text:r.text})),t(r=>({textState:[n]})),Aa.children=[n],Aa.onChange()},isTextSuggested:()=>e().textState[0].children.some(n=>n.removed!==void 0||n.added!==void 0),getText:()=>e().textState.map(n=>vt.string({children:n.children.filter(r=>r.removed===void 0)})).join(`
`),setSelectedNodes:n=>{Oi(e().selectedNodes,n)||t(r=>({selectedNodes:n}))},setSelectedEdges:n=>{if(!Oi(e().selectedEdges,n)){const r=e().actionEdges;let i=!1;for(const a of r)a.selected=!1,n.includes(a.id)&&!a.selected&&(i=!0,a.selected=!0);i&&t(a=>({actionEdges:r})),br.getState().logEvent("EDGES_SELECTED",{edges:n}),t(a=>({selectedEdges:n}))}},setHighlightedActionsSegment:(n,r)=>{var i,a;(((i=e().highlightedActionsSegment)==null?void 0:i.start)!==n||((a=e().highlightedActionsSegment)==null?void 0:a.end)!==r)&&t(s=>({highlightedActionsSegment:n!==null&&r!==null?{start:n,end:r}:null}))},setFilteredActionsSegment:(n,r)=>{var i,a;(((i=e().filteredActionsSegment)==null?void 0:i.start)!==n||((a=e().filteredActionsSegment)==null?void 0:a.end)!==r)&&t(s=>({filteredActionsSegment:n!==null&&r!==null?{start:n,end:r}:null}))},setHighlightedEntities:n=>{t(r=>({highlightedEntities:n}))},setIsStale:n=>{t(r=>({isStale:n}))},setOpenAIKey:n=>{OR.apiKey=n},setIsReadOnly:n=>{t(r=>({isReadOnly:n}))}}));function yHe(t){const[e,n]=R.useState(""),[r,i]=R.useState([]),a=it.createRef(),s=R.useMemo(()=>{const l=LL(t4e(sR())),{normalizeNode:c}=l;return l.normalizeNode=f=>{const[h,m]=f;m.length===0&&h.children.length>1&&(ot.insertText(l,`
`,{at:{path:[1,0],offset:0}}),ot.mergeNodes(l,{at:[1]})),c(f)},l},[]),o=()=>{const l=[...r,{content:e,role:"user"}];i(l),n(""),br.getState().logEvent("CHATGPT_PROMPTED",{prompt:e}),(async()=>{var h,m;const c=await OR.chat.completions.create({model:"gpt-4o",messages:l,stream:!0}),f={content:"",role:"assistant"};i([...l,f]);for await(const p of c)f.content+=((m=(h=p.choices[0])==null?void 0:h.delta)==null?void 0:m.content)||"",i([...l,f]);br.getState().logEvent("CHATGPT_RESPONDED",{response:f.content,fullHistory:r})})()};return R.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)}),R.useEffect(()=>{s.children=Ce.getState().textState,s.onChange()},[Ce.getState().textState]),b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",height:"100vh",width:"100%",background:"#F2EEF0"},children:[b.jsxDEV("div",{style:{minWidth:720,height:"100%",width:"70%",display:"flex",flexDirection:"row",justifyContent:"center"},children:b.jsxDEV("div",{id:"mainTextField",className:"textEditor",style:{position:"relative",background:"white",width:700,paddingTop:60,marginTop:20,paddingLeft:50,paddingRight:50,borderRadius:"2px",boxShadow:"0 0 10px rgba(0,0,0,0.1)",overflow:"scroll"},children:b.jsxDEV($L,{editor:s,initialValue:[],children:b.jsxDEV(VL,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:98,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:97,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:96,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:95,columnNumber:9},this),b.jsxDEV("div",{style:{position:"relative",width:"30%",background:"white",display:"flex",flexDirection:"column",alignItems:"center"},children:[b.jsxDEV(et,{variant:"light",isIconOnly:!0,disabled:r.length===0,style:{top:5,right:5,fontSize:16,position:"absolute"},size:"sm",onClick:()=>i([]),children:b.jsxDEV(IRe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:106,columnNumber:12},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:104,columnNumber:11},this),b.jsxDEV("div",{ref:a,style:{maxWidth:960,minWidth:400,flexGrow:1,display:"flex",fontSize:18,flexDirection:"column",alignItems:"center",justifyContent:"start",width:"100%",overflow:"scroll",marginTop:20,paddingLeft:20,paddingRight:20},children:r.map((l,c)=>b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",gap:10,alignItems:"start",marginBottom:10,justifyContent:l.role==="user"?"end":"start",width:"100%"},children:[l.role==="assistant"&&b.jsxDEV("div",{style:{borderRadius:"50%",border:"1px solid #dddddd",padding:5,marginTop:10,fontSize:25},children:b.jsxDEV(WRe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:112,columnNumber:159},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:112,columnNumber:52},this),b.jsxDEV("div",{style:{background:l.role==="user"?"#f4f4f4":void 0,color:"black",padding:10,borderRadius:5,whiteSpace:"pre-wrap"},children:[l.role==="assistant"&&b.jsxDEV(xMe,{children:l.content},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:115,columnNumber:54},this),l.role==="user"&&l.content]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:114,columnNumber:19},this)]},c,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:111,columnNumber:17},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:108,columnNumber:11},this),b.jsxDEV("div",{style:{flexGrow:0,position:"relative",width:"80%",maxWidth:960,marginBottom:20},children:[b.jsxDEV(nr,{value:e,onChange:l=>n(l.target.value),style:{fontSize:20,paddingRight:40,paddingTop:8,paddingBottom:8},onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(o(),l.preventDefault())},minRows:1,placeholder:"Message ChatGPT"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:127,columnNumber:13},this),b.jsxDEV(et,{isDisabled:e.length===0,isIconOnly:!0,color:"primary",style:{position:"absolute",right:5,bottom:5},size:"md",onClick:o,children:b.jsxDEV(lae,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:144,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:141,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:126,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:103,columnNumber:9},this),t.children]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:93,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/BaselineInterface.tsx",lineNumber:92,columnNumber:5},this)}function bHe(t){return nn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M333.49 238a122 122 0 0 0 27-65.21C367.87 96.49 308 32 233.42 32H34a16 16 0 0 0-16 16v48a16 16 0 0 0 16 16h31.87v288H34a16 16 0 0 0-16 16v48a16 16 0 0 0 16 16h209.32c70.8 0 134.14-51.75 141-122.4 4.74-48.45-16.39-92.06-50.83-119.6zM145.66 112h87.76a48 48 0 0 1 0 96h-87.76zm87.76 288h-87.76V288h87.76a56 56 0 0 1 0 112z"},child:[]}]})(t)}function wHe(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function xHe(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"},child:[]}]})(t)}function SHe(t){return nn({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M320 48v32a16 16 0 0 1-16 16h-62.76l-80 320H208a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h62.76l80-320H112a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16z"},child:[]}]})(t)}function EHe(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M167.02 309.34c-40.12 2.58-76.53 17.86-97.19 72.3-2.35 6.21-8 9.98-14.59 9.98-11.11 0-45.46-27.67-55.25-34.35C0 439.62 37.93 512 128 512c75.86 0 128-43.77 128-120.19 0-3.11-.65-6.08-.97-9.13l-88.01-73.34zM457.89 0c-15.16 0-29.37 6.71-40.21 16.45C213.27 199.05 192 203.34 192 257.09c0 13.7 3.25 26.76 8.73 38.7l63.82 53.18c7.21 1.8 14.64 3.03 22.39 3.03 62.11 0 98.11-45.47 211.16-256.46 7.38-14.35 13.9-29.85 13.9-45.99C512 20.64 486 0 457.89 0z"},child:[]}]})(t)}function ug(t){return nn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function NHe(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function hce(t){return nn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function KM(t){return nn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function _He(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function CHe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.586 4l-6.586 6.586a2 2 0 0 0 0 2.828l6.586 6.586a2 2 0 0 0 2.18 .434l.145 -.068a2 2 0 0 0 1.089 -1.78v-2.586h2a1 1 0 0 0 1 -1v-6l-.007 -.117a1 1 0 0 0 -.993 -.883l-2 -.001v-2.585a2 2 0 0 0 -3.414 -1.414z"},child:[]},{tag:"path",attr:{d:"M21 8a1 1 0 0 1 .993 .883l.007 .117v6a1 1 0 0 1 -1.993 .117l-.007 -.117v-6a1 1 0 0 1 1 -1z"},child:[]},{tag:"path",attr:{d:"M18 8a1 1 0 0 1 .993 .883l.007 .117v6a1 1 0 0 1 -1.993 .117l-.007 -.117v-6a1 1 0 0 1 1 -1z"},child:[]}]})(t)}function THe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12.089 3.634a2 2 0 0 0 -1.089 1.78l-.001 2.585l-1.999 .001a1 1 0 0 0 -1 1v6l.007 .117a1 1 0 0 0 .993 .883l1.999 -.001l.001 2.587a2 2 0 0 0 3.414 1.414l6.586 -6.586a2 2 0 0 0 0 -2.828l-6.586 -6.586a2 2 0 0 0 -2.18 -.434l-.145 .068z"},child:[]},{tag:"path",attr:{d:"M3 8a1 1 0 0 1 .993 .883l.007 .117v6a1 1 0 0 1 -1.993 .117l-.007 -.117v-6a1 1 0 0 1 1 -1z"},child:[]},{tag:"path",attr:{d:"M6 8a1 1 0 0 1 .993 .883l.007 .117v6a1 1 0 0 1 -1.993 .117l-.007 -.117v-6a1 1 0 0 1 1 -1z"},child:[]}]})(t)}class DHe extends RR{constructor(){super(),br.getState().logEvent("REWRITE_FROM_VISUAL_PROMPT",{})}getPrompt(){const e=Ce.getState().entityNodes.map(a=>a.data.name).join(", "),n=a=>{var l,c;const s=Ce.getState().entityNodes.find(f=>f.id===a.source),o=Ce.getState().entityNodes.find(f=>f.id===a.target);return`${s==null?void 0:s.data.name} ${(l=a.data)==null?void 0:l.name} ${o==null?void 0:o.data.name} [${(c=a.data)==null?void 0:c.sourceLocation}]`},i=Ce.getState().actionEdges.map((a,s)=>`${s+1}) `+n(a)).join(`
`);return`Write a simple and short story involving these characters: ${e}. The story should follow this sequence of events [location of the scene indicated in brackets]: ${i}`}onPartialResult(e){Ce.getState().setTextState([{children:[{text:e}]}],!0,!1)}canBeExecuted(){return Ce.getState().entityNodes.length>0}}function kHe(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function PHe(){return this.eachAfter(kHe)}function AHe(t){var e=this,n,r=[e],i,a,s;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(a=0,s=i.length;a<s;++a)r.push(i[a]);while(r.length);return this}function RHe(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function OHe(t){for(var e=this,n=[e],r=[],i,a,s;e=n.pop();)if(r.push(e),i=e.children,i)for(a=0,s=i.length;a<s;++a)n.push(i[a]);for(;e=r.pop();)t(e);return this}function jHe(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function IHe(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function MHe(t){for(var e=this,n=VHe(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function VHe(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function $He(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function LHe(){var t=[];return this.each(function(e){t.push(e)}),t}function FHe(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function BHe(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function XF(t,e){var n=new _N(t),r=+t.value&&(n.value=t.value),i,a=[n],s,o,l,c;for(e==null&&(e=WHe);i=a.pop();)if(r&&(i.value=+i.data.value),(o=e(i.data))&&(c=o.length))for(i.children=new Array(c),l=c-1;l>=0;--l)a.push(s=i.children[l]=new _N(o[l])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(HHe)}function UHe(){return XF(this).eachBefore(zHe)}function WHe(t){return t.children}function zHe(t){t.data=t.data.data}function HHe(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function _N(t){this.data=t,this.depth=this.height=0,this.parent=null}_N.prototype=XF.prototype={constructor:_N,count:PHe,each:AHe,eachAfter:OHe,eachBefore:RHe,sum:jHe,sort:IHe,path:MHe,ancestors:$He,descendants:LHe,leaves:FHe,links:BHe,copy:UHe};function GHe(t,e){return t.parent===e.parent?1:2}function YM(t){var e=t.children;return e?e[0]:t.t}function JM(t){var e=t.children;return e?e[e.length-1]:t.t}function KHe(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function YHe(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function JHe(t,e,n){return t.a.parent===e.parent?t.a:n}function kk(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}kk.prototype=Object.create(_N.prototype);function qHe(t){for(var e=new kk(t,0),n,r=[e],i,a,s,o;n=r.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)r.push(i=n.children[s]=new kk(a[s],s)),i.parent=n;return(e.parent=new kk(null,0)).children=[e],e}function XHe(){var t=GHe,e=1,n=1,r=null;function i(c){var f=qHe(c);if(f.eachAfter(a),f.parent.m=-f.z,f.eachBefore(s),r)c.eachBefore(l);else{var h=c,m=c,p=c;c.eachBefore(function(_){_.x<h.x&&(h=_),_.x>m.x&&(m=_),_.depth>p.depth&&(p=_)});var v=h===m?1:t(h,m)/2,y=v-h.x,x=e/(m.x+v+y),S=n/(p.depth||1);c.eachBefore(function(_){_.x=(_.x+y)*x,_.y=_.depth*S})}return c}function a(c){var f=c.children,h=c.parent.children,m=c.i?h[c.i-1]:null;if(f){YHe(c);var p=(f[0].z+f[f.length-1].z)/2;m?(c.z=m.z+t(c._,m._),c.m=c.z-p):c.z=p}else m&&(c.z=m.z+t(c._,m._));c.parent.A=o(c,m,c.parent.A||h[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,f,h){if(f){for(var m=c,p=c,v=f,y=m.parent.children[0],x=m.m,S=p.m,_=v.m,N=y.m,k;v=JM(v),m=YM(m),v&&m;)y=YM(y),p=JM(p),p.a=c,k=v.z+_-m.z-x+t(v._,m._),k>0&&(KHe(JHe(v,c,h),c,k),x+=k,S+=k),_+=v.m,x+=m.m,N+=y.m,S+=p.m;v&&!JM(p)&&(p.t=v,p.m+=_-S),m&&!YM(y)&&(y.t=m,y.m+=x-N,h=c)}return h}function l(c){c.x*=e,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(r=!1,e=+c[0],n=+c[1],i):r?null:[e,n]},i.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],n=+c[1],i):r?[e,n]:null},i}var TJ=Object.prototype.hasOwnProperty;function RE(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&RE(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(TJ.call(t,n)&&++r&&!TJ.call(e,n)||!(n in e)||!RE(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}var mce={exports:{}};(function(t){var e=function(){function n(m,p){return p!=null&&m instanceof p}var r;try{r=Map}catch{r=function(){}}var i;try{i=Set}catch{i=function(){}}var a;try{a=Promise}catch{a=function(){}}function s(m,p,v,y,x){typeof p=="object"&&(v=p.depth,y=p.prototype,x=p.includeNonEnumerable,p=p.circular);var S=[],_=[],N=typeof Buffer<"u";typeof p>"u"&&(p=!0),typeof v>"u"&&(v=1/0);function k(P,O){if(P===null)return null;if(O===0)return P;var A,T;if(typeof P!="object")return P;if(n(P,r))A=new r;else if(n(P,i))A=new i;else if(n(P,a))A=new a(function(F,J){P.then(function(Z){F(k(Z,O-1))},function(Z){J(k(Z,O-1))})});else if(s.__isArray(P))A=[];else if(s.__isRegExp(P))A=new RegExp(P.source,h(P)),P.lastIndex&&(A.lastIndex=P.lastIndex);else if(s.__isDate(P))A=new Date(P.getTime());else{if(N&&Buffer.isBuffer(P))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(P.length):A=new Buffer(P.length),P.copy(A),A;n(P,Error)?A=Object.create(P):typeof y>"u"?(T=Object.getPrototypeOf(P),A=Object.create(T)):(A=Object.create(y),T=y)}if(p){var L=S.indexOf(P);if(L!=-1)return _[L];S.push(P),_.push(A)}n(P,r)&&P.forEach(function(F,J){var Z=k(J,O-1),G=k(F,O-1);A.set(Z,G)}),n(P,i)&&P.forEach(function(F){var J=k(F,O-1);A.add(J)});for(var B in P){var W;T&&(W=Object.getOwnPropertyDescriptor(T,B)),!(W&&W.set==null)&&(A[B]=k(P[B],O-1))}if(Object.getOwnPropertySymbols)for(var Y=Object.getOwnPropertySymbols(P),B=0;B<Y.length;B++){var V=Y[B],I=Object.getOwnPropertyDescriptor(P,V);I&&!I.enumerable&&!x||(A[V]=k(P[V],O-1),I.enumerable||Object.defineProperty(A,V,{enumerable:!1}))}if(x)for(var H=Object.getOwnPropertyNames(P),B=0;B<H.length;B++){var q=H[B],I=Object.getOwnPropertyDescriptor(P,q);I&&I.enumerable||(A[q]=k(P[q],O-1),Object.defineProperty(A,q,{enumerable:!1}))}return A}return k(m,v)}s.clonePrototype=function(p){if(p===null)return null;var v=function(){};return v.prototype=p,new v};function o(m){return Object.prototype.toString.call(m)}s.__objToStr=o;function l(m){return typeof m=="object"&&o(m)==="[object Date]"}s.__isDate=l;function c(m){return typeof m=="object"&&o(m)==="[object Array]"}s.__isArray=c;function f(m){return typeof m=="object"&&o(m)==="[object RegExp]"}s.__isRegExp=f;function h(m){var p="";return m.global&&(p+="g"),m.ignoreCase&&(p+="i"),m.multiline&&(p+="m"),p}return s.__getRegExpFlags=h,s}();t.exports&&(t.exports=e)})(mce);var ZHe=mce.exports;const Oo=gc(ZHe);var dD,QHe=new Uint8Array(16);function eGe(){if(!dD&&(dD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!dD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dD(QHe)}const tGe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function nGe(t){return typeof t=="string"&&tGe.test(t)}var js=[];for(var qM=0;qM<256;++qM)js.push((qM+256).toString(16).substr(1));function rGe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(js[t[e+0]]+js[t[e+1]]+js[t[e+2]]+js[t[e+3]]+"-"+js[t[e+4]]+js[t[e+5]]+"-"+js[t[e+6]]+js[t[e+7]]+"-"+js[t[e+8]]+js[t[e+9]]+"-"+js[t[e+10]]+js[t[e+11]]+js[t[e+12]]+js[t[e+13]]+js[t[e+14]]+js[t[e+15]]).toLowerCase();if(!nGe(n))throw TypeError("Stringified UUID is invalid");return n}function XM(t,e,n){t=t||{};var r=t.random||(t.rng||eGe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,rGe(r)}var t5={exports:{}},pce={exports:{}},gce={exports:{}},ui={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,m=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,x=t?Symbol.for("react.fundamental"):60117,S=t?Symbol.for("react.responder"):60118,_=t?Symbol.for("react.scope"):60119;function N(ye){return typeof ye=="string"||typeof ye=="function"||ye===r||ye===c||ye===a||ye===i||ye===h||ye===m||typeof ye=="object"&&ye!==null&&(ye.$$typeof===v||ye.$$typeof===p||ye.$$typeof===s||ye.$$typeof===o||ye.$$typeof===f||ye.$$typeof===x||ye.$$typeof===S||ye.$$typeof===_||ye.$$typeof===y)}function k(ye){if(typeof ye=="object"&&ye!==null){var Ie=ye.$$typeof;switch(Ie){case e:var Re=ye.type;switch(Re){case l:case c:case r:case a:case i:case h:return Re;default:var Ee=Re&&Re.$$typeof;switch(Ee){case o:case f:case v:case p:case s:return Ee;default:return Ie}}case n:return Ie}}}var P=l,O=c,A=o,T=s,L=e,B=f,W=r,Y=v,V=p,I=n,H=a,q=i,F=h,J=!1;function Z(ye){return J||(J=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),G(ye)||k(ye)===l}function G(ye){return k(ye)===c}function oe(ye){return k(ye)===o}function ae(ye){return k(ye)===s}function te(ye){return typeof ye=="object"&&ye!==null&&ye.$$typeof===e}function re(ye){return k(ye)===f}function X(ye){return k(ye)===r}function ce(ye){return k(ye)===v}function he(ye){return k(ye)===p}function ve(ye){return k(ye)===n}function Ne(ye){return k(ye)===a}function ke(ye){return k(ye)===i}function Te(ye){return k(ye)===h}ui.AsyncMode=P,ui.ConcurrentMode=O,ui.ContextConsumer=A,ui.ContextProvider=T,ui.Element=L,ui.ForwardRef=B,ui.Fragment=W,ui.Lazy=Y,ui.Memo=V,ui.Portal=I,ui.Profiler=H,ui.StrictMode=q,ui.Suspense=F,ui.isAsyncMode=Z,ui.isConcurrentMode=G,ui.isContextConsumer=oe,ui.isContextProvider=ae,ui.isElement=te,ui.isForwardRef=re,ui.isFragment=X,ui.isLazy=ce,ui.isMemo=he,ui.isPortal=ve,ui.isProfiler=Ne,ui.isStrictMode=ke,ui.isSuspense=Te,ui.isValidElementType=N,ui.typeOf=k})();gce.exports=ui;var vce=gce.exports;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var DJ=Object.getOwnPropertySymbols,iGe=Object.prototype.hasOwnProperty,aGe=Object.prototype.propertyIsEnumerable;function sGe(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function oGe(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var lGe=oGe()?Object.assign:function(t,e){for(var n,r=sGe(t),i,a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var s in n)iGe.call(n,s)&&(r[s]=n[s]);if(DJ){i=DJ(n);for(var o=0;o<i.length;o++)aGe.call(n,i[o])&&(r[i[o]]=n[i[o]])}}return r},uGe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yce=uGe,bce=Function.call.bind(Object.prototype.hasOwnProperty),n5=function(){};{var cGe=yce,r5={},dGe=bce;n5=function(t){var e="Warning: "+t;typeof console<"u"&&console.error(e);try{throw new Error(e)}catch{}}}function wce(t,e,n,r,i){for(var a in t)if(dGe(t,a)){var s;try{if(typeof t[a]!="function"){var o=Error((r||"React class")+": "+n+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw o.name="Invariant Violation",o}s=t[a](e,a,r,n,null,cGe)}catch(c){s=c}if(s&&!(s instanceof Error)&&n5((r||"React class")+": type specification of "+n+" `"+a+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof s+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),s instanceof Error&&!(s.message in r5)){r5[s.message]=!0;var l=i?i():"";n5("Failed "+n+" type: "+s.message+(l??""))}}}wce.resetWarningCache=function(){r5={}};var fGe=wce,hGe=vce,mGe=lGe,E0=yce,ZM=bce,kJ=fGe,H0=function(){};H0=function(t){var e="Warning: "+t;typeof console<"u"&&console.error(e);try{throw new Error(e)}catch{}};function fD(){return null}var pGe=function(t,e){var n=typeof Symbol=="function"&&Symbol.iterator,r="@@iterator";function i(V){var I=V&&(n&&V[n]||V[r]);if(typeof I=="function")return I}var a="<<anonymous>>",s={array:f("array"),bigint:f("bigint"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:h(),arrayOf:m,element:p(),elementType:v(),instanceOf:y,node:N(),objectOf:S,oneOf:x,oneOfType:_,shape:P,exact:O};function o(V,I){return V===I?V!==0||1/V===1/I:V!==V&&I!==I}function l(V,I){this.message=V,this.data=I&&typeof I=="object"?I:{},this.stack=""}l.prototype=Error.prototype;function c(V){var I={},H=0;function q(J,Z,G,oe,ae,te,re){if(oe=oe||a,te=te||G,re!==E0){if(e){var X=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw X.name="Invariant Violation",X}else if(typeof console<"u"){var ce=oe+":"+G;!I[ce]&&H<3&&(H0("You are manually calling a React.PropTypes validation function for the `"+te+"` prop on `"+oe+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),I[ce]=!0,H++)}}return Z[G]==null?J?Z[G]===null?new l("The "+ae+" `"+te+"` is marked as required "+("in `"+oe+"`, but its value is `null`.")):new l("The "+ae+" `"+te+"` is marked as required in "+("`"+oe+"`, but its value is `undefined`.")):null:V(Z,G,oe,ae,te)}var F=q.bind(null,!1);return F.isRequired=q.bind(null,!0),F}function f(V){function I(H,q,F,J,Z,G){var oe=H[q],ae=L(oe);if(ae!==V){var te=B(oe);return new l("Invalid "+J+" `"+Z+"` of type "+("`"+te+"` supplied to `"+F+"`, expected ")+("`"+V+"`."),{expectedType:V})}return null}return c(I)}function h(){return c(fD)}function m(V){function I(H,q,F,J,Z){if(typeof V!="function")return new l("Property `"+Z+"` of component `"+F+"` has invalid PropType notation inside arrayOf.");var G=H[q];if(!Array.isArray(G)){var oe=L(G);return new l("Invalid "+J+" `"+Z+"` of type "+("`"+oe+"` supplied to `"+F+"`, expected an array."))}for(var ae=0;ae<G.length;ae++){var te=V(G,ae,F,J,Z+"["+ae+"]",E0);if(te instanceof Error)return te}return null}return c(I)}function p(){function V(I,H,q,F,J){var Z=I[H];if(!t(Z)){var G=L(Z);return new l("Invalid "+F+" `"+J+"` of type "+("`"+G+"` supplied to `"+q+"`, expected a single ReactElement."))}return null}return c(V)}function v(){function V(I,H,q,F,J){var Z=I[H];if(!hGe.isValidElementType(Z)){var G=L(Z);return new l("Invalid "+F+" `"+J+"` of type "+("`"+G+"` supplied to `"+q+"`, expected a single ReactElement type."))}return null}return c(V)}function y(V){function I(H,q,F,J,Z){if(!(H[q]instanceof V)){var G=V.name||a,oe=Y(H[q]);return new l("Invalid "+J+" `"+Z+"` of type "+("`"+oe+"` supplied to `"+F+"`, expected ")+("instance of `"+G+"`."))}return null}return c(I)}function x(V){if(!Array.isArray(V))return arguments.length>1?H0("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):H0("Invalid argument supplied to oneOf, expected an array."),fD;function I(H,q,F,J,Z){for(var G=H[q],oe=0;oe<V.length;oe++)if(o(G,V[oe]))return null;var ae=JSON.stringify(V,function(re,X){var ce=B(X);return ce==="symbol"?String(X):X});return new l("Invalid "+J+" `"+Z+"` of value `"+String(G)+"` "+("supplied to `"+F+"`, expected one of "+ae+"."))}return c(I)}function S(V){function I(H,q,F,J,Z){if(typeof V!="function")return new l("Property `"+Z+"` of component `"+F+"` has invalid PropType notation inside objectOf.");var G=H[q],oe=L(G);if(oe!=="object")return new l("Invalid "+J+" `"+Z+"` of type "+("`"+oe+"` supplied to `"+F+"`, expected an object."));for(var ae in G)if(ZM(G,ae)){var te=V(G,ae,F,J,Z+"."+ae,E0);if(te instanceof Error)return te}return null}return c(I)}function _(V){if(!Array.isArray(V))return H0("Invalid argument supplied to oneOfType, expected an instance of array."),fD;for(var I=0;I<V.length;I++){var H=V[I];if(typeof H!="function")return H0("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+W(H)+" at index "+I+"."),fD}function q(F,J,Z,G,oe){for(var ae=[],te=0;te<V.length;te++){var re=V[te],X=re(F,J,Z,G,oe,E0);if(X==null)return null;X.data&&ZM(X.data,"expectedType")&&ae.push(X.data.expectedType)}var ce=ae.length>0?", expected one of type ["+ae.join(", ")+"]":"";return new l("Invalid "+G+" `"+oe+"` supplied to "+("`"+Z+"`"+ce+"."))}return c(q)}function N(){function V(I,H,q,F,J){return A(I[H])?null:new l("Invalid "+F+" `"+J+"` supplied to "+("`"+q+"`, expected a ReactNode."))}return c(V)}function k(V,I,H,q,F){return new l((V||"React class")+": "+I+" type `"+H+"."+q+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+F+"`.")}function P(V){function I(H,q,F,J,Z){var G=H[q],oe=L(G);if(oe!=="object")return new l("Invalid "+J+" `"+Z+"` of type `"+oe+"` "+("supplied to `"+F+"`, expected `object`."));for(var ae in V){var te=V[ae];if(typeof te!="function")return k(F,J,Z,ae,B(te));var re=te(G,ae,F,J,Z+"."+ae,E0);if(re)return re}return null}return c(I)}function O(V){function I(H,q,F,J,Z){var G=H[q],oe=L(G);if(oe!=="object")return new l("Invalid "+J+" `"+Z+"` of type `"+oe+"` "+("supplied to `"+F+"`, expected `object`."));var ae=mGe({},H[q],V);for(var te in ae){var re=V[te];if(ZM(V,te)&&typeof re!="function")return k(F,J,Z,te,B(re));if(!re)return new l("Invalid "+J+" `"+Z+"` key `"+te+"` supplied to `"+F+"`.\nBad object: "+JSON.stringify(H[q],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(V),null,"  "));var X=re(G,te,F,J,Z+"."+te,E0);if(X)return X}return null}return c(I)}function A(V){switch(typeof V){case"number":case"string":case"undefined":return!0;case"boolean":return!V;case"object":if(Array.isArray(V))return V.every(A);if(V===null||t(V))return!0;var I=i(V);if(I){var H=I.call(V),q;if(I!==V.entries){for(;!(q=H.next()).done;)if(!A(q.value))return!1}else for(;!(q=H.next()).done;){var F=q.value;if(F&&!A(F[1]))return!1}}else return!1;return!0;default:return!1}}function T(V,I){return V==="symbol"?!0:I?I["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&I instanceof Symbol:!1}function L(V){var I=typeof V;return Array.isArray(V)?"array":V instanceof RegExp?"object":T(I,V)?"symbol":I}function B(V){if(typeof V>"u"||V===null)return""+V;var I=L(V);if(I==="object"){if(V instanceof Date)return"date";if(V instanceof RegExp)return"regexp"}return I}function W(V){var I=B(V);switch(I){case"array":case"object":return"an "+I;case"boolean":case"date":case"regexp":return"a "+I;default:return I}}function Y(V){return!V.constructor||!V.constructor.name?a:V.constructor.name}return s.checkPropTypes=kJ,s.resetWarningCache=kJ.resetWarningCache,s.PropTypes=s,s};{var gGe=vce,vGe=!0;pce.exports=pGe(gGe.isElement,vGe)}var jR=pce.exports,i5={exports:{}},yGe=function(){for(var e=arguments.length,n=[],r=0;r<e;r++)n[r]=arguments[r];if(n=n.filter(function(i){return i!=null}),n.length!==0)return n.length===1?n[0]:n.reduce(function(i,a){return function(){i.apply(this,arguments),a.apply(this,arguments)}})},xce=function(){};xce=function(t,e,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var i=2;i<r;i++)n[i-2]=arguments[i];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(!t){var a=0,s="Warning: "+e.replace(/%s/g,function(){return n[a++]});typeof console<"u"&&console.error(s);try{throw new Error(s)}catch{}}};var bGe=xce;function Sce(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function Ece(t){function e(n){var r=this.constructor.getDerivedStateFromProps(t,n);return r??null}this.setState(e.bind(this))}function Nce(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Sce.__suppressDeprecationWarning=!0;Ece.__suppressDeprecationWarning=!0;Nce.__suppressDeprecationWarning=!0;function wGe(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,r=null,i=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var a=t.displayName||t.name,s=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+s+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=Sce,e.componentWillReceiveProps=Ece),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=Nce;var o=e.componentDidUpdate;e.componentDidUpdate=function(c,f,h){var m=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;o.call(this,c,f,m)}}return t}const xGe=Object.freeze(Object.defineProperty({__proto__:null,polyfill:wGe},Symbol.toStringTag,{value:"Module"})),SGe=X0e(xGe);var IR={};IR.__esModule=!0;IR.getChildMapping=NGe;IR.mergeChildMappings=_Ge;var EGe=R;function NGe(t){if(!t)return t;var e={};return EGe.Children.map(t,function(n){return n}).forEach(function(n){e[n.key]=n}),e}function _Ge(t,e){t=t||{},e=e||{};function n(f){return e.hasOwnProperty(f)?e[f]:t[f]}var r={},i=[];for(var a in t)e.hasOwnProperty(a)?i.length&&(r[a]=i,i=[]):i.push(a);var s=void 0,o={};for(var l in e){if(r.hasOwnProperty(l))for(s=0;s<r[l].length;s++){var c=r[l][s];o[r[l][s]]=n(c)}o[l]=n(l)}for(s=0;s<i.length;s++)o[i[s]]=n(i[s]);return o}(function(t,e){e.__esModule=!0;var n=Object.assign||function(k){for(var P=1;P<arguments.length;P++){var O=arguments[P];for(var A in O)Object.prototype.hasOwnProperty.call(O,A)&&(k[A]=O[A])}return k},r=yGe,i=p(r),a=R,s=p(a),o=jR,l=p(o),c=bGe,f=p(c),h=SGe,m=IR;function p(k){return k&&k.__esModule?k:{default:k}}function v(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function y(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function x(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var S={component:l.default.any,childFactory:l.default.func,children:l.default.node},_={component:"span",childFactory:function(P){return P}},N=function(k){x(P,k);function P(O,A){v(this,P);var T=y(this,k.call(this,O,A));return T.performAppear=function(L,B){T.currentlyTransitioningKeys[L]=!0,B.componentWillAppear?B.componentWillAppear(T._handleDoneAppearing.bind(T,L,B)):T._handleDoneAppearing(L,B)},T._handleDoneAppearing=function(L,B){B&&B.componentDidAppear&&B.componentDidAppear(),delete T.currentlyTransitioningKeys[L];var W=(0,m.getChildMapping)(T.props.children);(!W||!W.hasOwnProperty(L))&&T.performLeave(L,B)},T.performEnter=function(L,B){T.currentlyTransitioningKeys[L]=!0,B.componentWillEnter?B.componentWillEnter(T._handleDoneEntering.bind(T,L,B)):T._handleDoneEntering(L,B)},T._handleDoneEntering=function(L,B){B&&B.componentDidEnter&&B.componentDidEnter(),delete T.currentlyTransitioningKeys[L];var W=(0,m.getChildMapping)(T.props.children);(!W||!W.hasOwnProperty(L))&&T.performLeave(L,B)},T.performLeave=function(L,B){T.currentlyTransitioningKeys[L]=!0,B&&B.componentWillLeave?B.componentWillLeave(T._handleDoneLeaving.bind(T,L,B)):T._handleDoneLeaving(L,B)},T._handleDoneLeaving=function(L,B){B&&B.componentDidLeave&&B.componentDidLeave(),delete T.currentlyTransitioningKeys[L];var W=(0,m.getChildMapping)(T.props.children);W&&W.hasOwnProperty(L)?T.keysToEnter.push(L):T.setState(function(Y){var V=n({},Y.children);return delete V[L],{children:V}})},T.childRefs=Object.create(null),T.currentlyTransitioningKeys={},T.keysToEnter=[],T.keysToLeave=[],T.state={children:(0,m.getChildMapping)(O.children)},T}return P.prototype.componentDidMount=function(){var A=this.state.children;for(var T in A)A[T]&&this.performAppear(T,this.childRefs[T])},P.getDerivedStateFromProps=function(A,T){var L=(0,m.getChildMapping)(A.children),B=T.children;return{children:(0,m.mergeChildMappings)(B,L)}},P.prototype.componentDidUpdate=function(A,T){var L=this,B=(0,m.getChildMapping)(this.props.children),W=T.children;for(var Y in B){var V=W&&W.hasOwnProperty(Y);B[Y]&&!V&&!this.currentlyTransitioningKeys[Y]&&this.keysToEnter.push(Y)}for(var I in W){var H=B&&B.hasOwnProperty(I);W[I]&&!H&&!this.currentlyTransitioningKeys[I]&&this.keysToLeave.push(I)}var q=this.keysToEnter;this.keysToEnter=[],q.forEach(function(J){return L.performEnter(J,L.childRefs[J])});var F=this.keysToLeave;this.keysToLeave=[],F.forEach(function(J){return L.performLeave(J,L.childRefs[J])})},P.prototype.render=function(){var A=this,T=[],L=function(V){var I=A.state.children[V];if(I){var H=typeof I.ref!="string",q=A.props.childFactory(I),F=function(Z){A.childRefs[V]=Z};(0,f.default)(H,"string refs are not supported on children of TransitionGroup and will be ignored. Please use a callback ref instead: https://facebook.github.io/react/docs/refs-and-the-dom.html#the-ref-callback-attribute"),q===I&&H&&(F=(0,i.default)(I.ref,F)),T.push(s.default.cloneElement(q,{key:V,ref:F}))}};for(var B in this.state.children)L(B);var W=n({},this.props);return delete W.transitionLeave,delete W.transitionName,delete W.transitionAppear,delete W.transitionEnter,delete W.childFactory,delete W.transitionLeaveTimeout,delete W.transitionEnterTimeout,delete W.transitionAppearTimeout,delete W.component,s.default.createElement(this.props.component,W,T)},P}(s.default.Component);N.displayName="TransitionGroup",N.propTypes=S,N.defaultProps=_,e.default=(0,h.polyfill)(N),t.exports=e.default})(i5,i5.exports);var _ce=i5.exports,a5={exports:{}},s5={exports:{}},Cce={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Cce);var ZF=Cce.exports,hD={exports:{}},PJ;function CGe(){return PJ||(PJ=1,function(t,e){e.__esModule=!0,e.default=n;function n(r,i){return r.classList?!!i&&r.classList.contains(i):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+i+" ")!==-1}t.exports=e.default}(hD,hD.exports)),hD.exports}(function(t,e){var n=ZF;e.__esModule=!0,e.default=i;var r=n(CGe());function i(a,s){a.classList?a.classList.add(s):(0,r.default)(a,s)||(typeof a.className=="string"?a.className=a.className+" "+s:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+s))}t.exports=e.default})(s5,s5.exports);var TGe=s5.exports;function AJ(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var DGe=function(e,n){e.classList?e.classList.remove(n):typeof e.className=="string"?e.className=AJ(e.className,n):e.setAttribute("class",AJ(e.className&&e.className.baseVal||"",n))},o5={exports:{}},mD={exports:{}},RJ;function Tce(){return RJ||(RJ=1,function(t,e){e.__esModule=!0,e.default=void 0;var n=!!(typeof window<"u"&&window.document&&window.document.createElement);e.default=n,t.exports=e.default}(mD,mD.exports)),mD.exports}(function(t,e){var n=ZF;e.__esModule=!0,e.default=void 0;var r=n(Tce()),i=["","webkit","moz","o","ms"],a="clearTimeout",s=f,o,l=function(p,v){return p+(p?v[0].toUpperCase()+v.substr(1):v)+"AnimationFrame"};r.default&&i.some(function(m){var p=l(m,"request");if(p in window)return a=l(m,"cancel"),s=function(y){return window[p](y)}});var c=new Date().getTime();function f(m){var p=new Date().getTime(),v=Math.max(0,16-(p-c)),y=setTimeout(m,v);return c=p,y}o=function(p){return s(p)},o.cancel=function(m){window[a]&&typeof window[a]=="function"&&window[a](m)};var h=o;e.default=h,t.exports=e.default})(o5,o5.exports);var kGe=o5.exports,Pr={},PGe=ZF;Pr.__esModule=!0;Pr.default=Pr.animationEnd=Pr.animationDelay=Pr.animationTiming=Pr.animationDuration=Pr.animationName=Pr.transitionEnd=Pr.transitionDuration=Pr.transitionDelay=Pr.transitionTiming=Pr.transitionProperty=Pr.transform=void 0;var AGe=PGe(Tce()),qP="transform";Pr.transform=qP;var Nf,QF,Dce;Pr.animationEnd=Dce;Pr.transitionEnd=QF;var eB,tB,nB,rB;Pr.transitionDelay=rB;Pr.transitionTiming=nB;Pr.transitionDuration=tB;Pr.transitionProperty=eB;var kce,Pce,Ace,Rce;Pr.animationDelay=Rce;Pr.animationTiming=Ace;Pr.animationDuration=Pce;Pr.animationName=kce;if(AGe.default){var QM=OGe();Nf=QM.prefix,Pr.transitionEnd=QF=QM.transitionEnd,Pr.animationEnd=Dce=QM.animationEnd,Pr.transform=qP=Nf+"-"+qP,Pr.transitionProperty=eB=Nf+"-transition-property",Pr.transitionDuration=tB=Nf+"-transition-duration",Pr.transitionDelay=rB=Nf+"-transition-delay",Pr.transitionTiming=nB=Nf+"-transition-timing-function",Pr.animationName=kce=Nf+"-animation-name",Pr.animationDuration=Pce=Nf+"-animation-duration",Pr.animationTiming=Ace=Nf+"-animation-delay",Pr.animationDelay=Rce=Nf+"-animation-timing-function"}var RGe={transform:qP,end:QF,property:eB,timing:nB,delay:rB,duration:tB};Pr.default=RGe;function OGe(){for(var t=document.createElement("div").style,e={O:function(c){return"o"+c.toLowerCase()},Moz:function(c){return c.toLowerCase()},Webkit:function(c){return"webkit"+c},ms:function(c){return"MS"+c}},n=Object.keys(e),r,i,a="",s=0;s<n.length;s++){var o=n[s];if(o+"TransitionProperty"in t){a="-"+o.toLowerCase(),r=e[o]("TransitionEnd"),i=e[o]("AnimationEnd");break}}return!r&&"transitionProperty"in t&&(r="transitionend"),!i&&"animationName"in t&&(i="animationend"),t=null,{animationEnd:i,transitionEnd:r,prefix:a}}var hx={};hx.__esModule=!0;hx.nameShape=void 0;hx.transitionTimeout=MGe;var jGe=R;Oce(jGe);var IGe=jR,Ql=Oce(IGe);function Oce(t){return t&&t.__esModule?t:{default:t}}function MGe(t){var e="transition"+t+"Timeout",n="transition"+t;return function(r){if(r[n]){if(r[e]==null)return new Error(e+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if(typeof r[e]!="number")return new Error(e+" must be a number (in milliseconds)")}return null}}hx.nameShape=Ql.default.oneOfType([Ql.default.string,Ql.default.shape({enter:Ql.default.string,leave:Ql.default.string,active:Ql.default.string}),Ql.default.shape({enter:Ql.default.string,enterActive:Ql.default.string,leave:Ql.default.string,leaveActive:Ql.default.string,appear:Ql.default.string,appearActive:Ql.default.string})]);(function(t,e){e.__esModule=!0;var n=Object.assign||function(T){for(var L=1;L<arguments.length;L++){var B=arguments[L];for(var W in B)Object.prototype.hasOwnProperty.call(B,W)&&(T[W]=B[W])}return T},r=TGe,i=x(r),a=DGe,s=x(a),o=kGe,l=x(o),c=Pr,f=R,h=x(f),m=jR,p=x(m),v=eb,y=hx;function x(T){return T&&T.__esModule?T:{default:T}}function S(T,L){if(!(T instanceof L))throw new TypeError("Cannot call a class as a function")}function _(T,L){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:T}function N(T,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);T.prototype=Object.create(L&&L.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(T,L):T.__proto__=L)}var k=[];c.transitionEnd&&k.push(c.transitionEnd),c.animationEnd&&k.push(c.animationEnd);function P(T,L){return k.length?k.forEach(function(B){return T.addEventListener(B,L,!1)}):setTimeout(L,0),function(){k.length&&k.forEach(function(B){return T.removeEventListener(B,L,!1)})}}var O={children:p.default.node,name:y.nameShape.isRequired,appear:p.default.bool,enter:p.default.bool,leave:p.default.bool,appearTimeout:p.default.number,enterTimeout:p.default.number,leaveTimeout:p.default.number},A=function(T){N(L,T);function L(B,W){S(this,L);var Y=_(this,T.call(this,B,W));return Y.componentWillAppear=function(V){Y.props.appear?Y.transition("appear",V,Y.props.appearTimeout):V()},Y.componentWillEnter=function(V){Y.props.enter?Y.transition("enter",V,Y.props.enterTimeout):V()},Y.componentWillLeave=function(V){Y.props.leave?Y.transition("leave",V,Y.props.leaveTimeout):V()},Y.classNameAndNodeQueue=[],Y.transitionTimeouts=[],Y}return L.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(W){clearTimeout(W)}),this.classNameAndNodeQueue.length=0},L.prototype.transition=function(W,Y,V){var I=(0,v.findDOMNode)(this);if(!I){Y&&Y();return}var H=this.props.name[W]||this.props.name+"-"+W,q=this.props.name[W+"Active"]||H+"-active",F=null,J=void 0;(0,i.default)(I,H),this.queueClassAndNode(q,I);var Z=function(oe){oe&&oe.target!==I||(clearTimeout(F),J&&J(),(0,s.default)(I,H),(0,s.default)(I,q),J&&J(),Y&&Y())};V?(F=setTimeout(Z,V),this.transitionTimeouts.push(F)):c.transitionEnd&&(J=P(I,Z))},L.prototype.queueClassAndNode=function(W,Y){var V=this;this.classNameAndNodeQueue.push({className:W,node:Y}),this.rafHandle||(this.rafHandle=(0,l.default)(function(){return V.flushClassNameAndNodeQueue()}))},L.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(W){W.node.scrollTop,(0,i.default)(W.node,W.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},L.prototype.render=function(){var W=n({},this.props);return delete W.name,delete W.appear,delete W.enter,delete W.leave,delete W.appearTimeout,delete W.enterTimeout,delete W.leaveTimeout,delete W.children,h.default.cloneElement(h.default.Children.only(this.props.children),W)},L}(h.default.Component);A.displayName="CSSTransitionGroupChild",A.propTypes=O,e.default=A,t.exports=e.default})(a5,a5.exports);var VGe=a5.exports;(function(t,e){e.__esModule=!0;var n=Object.assign||function(N){for(var k=1;k<arguments.length;k++){var P=arguments[k];for(var O in P)Object.prototype.hasOwnProperty.call(P,O)&&(N[O]=P[O])}return N},r=R,i=m(r),a=jR,s=m(a),o=_ce,l=m(o),c=VGe,f=m(c),h=hx;function m(N){return N&&N.__esModule?N:{default:N}}function p(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function v(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function y(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var x={transitionName:h.nameShape.isRequired,transitionAppear:s.default.bool,transitionEnter:s.default.bool,transitionLeave:s.default.bool,transitionAppearTimeout:(0,h.transitionTimeout)("Appear"),transitionEnterTimeout:(0,h.transitionTimeout)("Enter"),transitionLeaveTimeout:(0,h.transitionTimeout)("Leave")},S={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},_=function(N){y(k,N);function k(){var P,O,A;p(this,k);for(var T=arguments.length,L=Array(T),B=0;B<T;B++)L[B]=arguments[B];return A=(P=(O=v(this,N.call.apply(N,[this].concat(L))),O),O._wrapChild=function(W){return i.default.createElement(f.default,{name:O.props.transitionName,appear:O.props.transitionAppear,enter:O.props.transitionEnter,leave:O.props.transitionLeave,appearTimeout:O.props.transitionAppearTimeout,enterTimeout:O.props.transitionEnterTimeout,leaveTimeout:O.props.transitionLeaveTimeout},W)},P),v(O,A)}return k.prototype.render=function(){return i.default.createElement(l.default,n({},this.props,{childFactory:this._wrapChild}))},k}(i.default.Component);_.displayName="CSSTransitionGroup",_.propTypes=x,_.defaultProps=S,e.default=_,t.exports=e.default})(t5,t5.exports);var $Ge=t5.exports,LGe=$Ge,FGe=jce(LGe),BGe=_ce,UGe=jce(BGe);function jce(t){return t&&t.__esModule?t:{default:t}}var WGe={TransitionGroup:UGe.default,CSSTransitionGroup:FGe.default};const zGe=t=>t.enableLegacyTransitions?it.createElement(WGe.TransitionGroup,{component:t.component,className:t.className,transform:t.transform},t.children):it.createElement("g",{className:t.className,transform:t.transform},t.children),HGe=15,OJ={title:{textAnchor:"start",x:40},attribute:{x:40,dy:"1.2em"}},GGe=({nodeDatum:t,toggleNode:e,onNodeClick:n,onNodeMouseOver:r,onNodeMouseOut:i})=>it.createElement(it.Fragment,null,it.createElement("circle",{r:HGe,onClick:a=>{e(),n(a)},onMouseOver:r,onMouseOut:i}),it.createElement("g",{className:"rd3t-label"},it.createElement("text",Object.assign({className:"rd3t-label__title"},OJ.title),t.name),it.createElement("text",{className:"rd3t-label__attributes"},t.attributes&&Object.entries(t.attributes).map(([a,s],o)=>it.createElement("tspan",Object.assign({key:`${a}-${o}`},OJ.attribute),a,": ",typeof s=="boolean"?s.toString():s)))));let KGe=class extends it.Component{constructor(){super(...arguments),this.nodeRef=null,this.state={transform:this.setTransform(this.props.position,this.props.parent,this.props.orientation,!0),initialStyle:{opacity:0},wasClicked:!1},this.shouldNodeTransform=(e,n,r,i)=>n.subscriptions!==e.subscriptions||n.position.x!==e.position.x||n.position.y!==e.position.y||n.orientation!==e.orientation||i.wasClicked!==r.wasClicked,this.renderNodeElement=()=>{const{data:e,hierarchyPointNode:n,renderCustomNodeElement:r}=this.props,i=typeof r=="function"?r:GGe,a={hierarchyPointNode:n,nodeDatum:e,toggleNode:this.handleNodeToggle,onNodeClick:this.handleOnClick,onNodeMouseOver:this.handleOnMouseOver,onNodeMouseOut:this.handleOnMouseOut,addChildren:this.handleAddChildren};return i(a)},this.handleNodeToggle=()=>{this.setState({wasClicked:!0}),this.props.onNodeToggle(this.props.data.__rd3t.id)},this.handleOnClick=e=>{this.setState({wasClicked:!0}),this.props.onNodeClick(this.props.hierarchyPointNode,e)},this.handleOnMouseOver=e=>{this.props.onNodeMouseOver(this.props.hierarchyPointNode,e)},this.handleOnMouseOut=e=>{this.props.onNodeMouseOut(this.props.hierarchyPointNode,e)},this.handleAddChildren=e=>{this.props.handleAddChildrenToNode(this.props.data.__rd3t.id,e)}}componentDidMount(){this.commitTransform()}componentDidUpdate(){this.state.wasClicked&&(this.props.centerNode(this.props.hierarchyPointNode),this.setState({wasClicked:!1})),this.commitTransform()}shouldComponentUpdate(e,n){return this.shouldNodeTransform(this.props,e,this.state,n)}setTransform(e,n,r,i=!1){if(i){const a=n!=null,s=a?n.x:0,o=a?n.y:0;return r==="horizontal"?`translate(${o},${s})`:`translate(${s},${o})`}return r==="horizontal"?`translate(${e.y},${e.x})`:`translate(${e.x},${e.y})`}applyTransform(e,n,r=1,i=()=>{}){this.props.enableLegacyTransitions?ba(this.nodeRef).transition().duration(n).attr("transform",e).style("opacity",r).on("end",i):(ba(this.nodeRef).attr("transform",e).style("opacity",r),i())}commitTransform(){const{orientation:e,transitionDuration:n,position:r,parent:i}=this.props,a=this.setTransform(r,i,e);this.applyTransform(a,n)}componentWillLeave(e){const{orientation:n,transitionDuration:r,position:i,parent:a}=this.props,s=this.setTransform(i,a,n,!0);this.applyTransform(s,r,0,e)}render(){const{data:e,nodeClassName:n}=this.props;return it.createElement("g",{id:e.__rd3t.id,ref:r=>{this.nodeRef=r},style:this.state.initialStyle,className:[e.children&&e.children.length>0?"rd3t-node":"rd3t-leaf-node",n].join(" ").trim(),transform:this.state.transform},this.renderNodeElement())}};var l5=Math.PI,u5=2*l5,ry=1e-6,YGe=u5-ry;function c5(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ice(){return new c5}c5.prototype=Ice.prototype={constructor:c5,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,s=this._y1,o=n-t,l=r-e,c=a-t,f=s-e,h=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>ry)if(!(Math.abs(f*o-l*c)>ry)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var m=n-a,p=r-s,v=o*o+l*l,y=m*m+p*p,x=Math.sqrt(v),S=Math.sqrt(h),_=i*Math.tan((l5-Math.acos((v+h-y)/(2*x*S)))/2),N=_/S,k=_/x;Math.abs(N-1)>ry&&(this._+="L"+(t+N*c)+","+(e+N*f)),this._+="A"+i+","+i+",0,0,"+ +(f*m>c*p)+","+(this._x1=t+k*o)+","+(this._y1=e+k*l)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var s=n*Math.cos(r),o=n*Math.sin(r),l=t+s,c=e+o,f=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>ry||Math.abs(this._y1-c)>ry)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%u5+u5),h>YGe?this._+="A"+n+","+n+",0,1,"+f+","+(t-s)+","+(e-o)+"A"+n+","+n+",0,1,"+f+","+(this._x1=l)+","+(this._y1=c):h>ry&&(this._+="A"+n+","+n+",0,"+ +(h>=l5)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function jJ(t){return function(){return t}}function JGe(t){return t[0]}function qGe(t){return t[1]}var XGe=Array.prototype.slice;function ZGe(t){return t.source}function QGe(t){return t.target}function Mce(t){var e=ZGe,n=QGe,r=JGe,i=qGe,a=null;function s(){var o,l=XGe.call(arguments),c=e.apply(this,l),f=n.apply(this,l);if(a||(a=o=Ice()),t(a,+r.apply(this,(l[0]=c,l)),+i.apply(this,l),+r.apply(this,(l[0]=f,l)),+i.apply(this,l)),o)return a=null,o+""||null}return s.source=function(o){return arguments.length?(e=o,s):e},s.target=function(o){return arguments.length?(n=o,s):n},s.x=function(o){return arguments.length?(r=typeof o=="function"?o:jJ(+o),s):r},s.y=function(o){return arguments.length?(i=typeof o=="function"?o:jJ(+o),s):i},s.context=function(o){return arguments.length?(a=o??null,s):a},s}function eKe(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function tKe(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function nKe(){return Mce(eKe)}function rKe(){return Mce(tKe)}class iKe extends it.PureComponent{constructor(){super(...arguments),this.linkRef=null,this.state={initialStyle:{opacity:0}},this.handleOnClick=e=>{this.props.onClick(this.props.linkData.source,this.props.linkData.target,e)},this.handleOnMouseOver=e=>{this.props.onMouseOver(this.props.linkData.source,this.props.linkData.target,e)},this.handleOnMouseOut=e=>{this.props.onMouseOut(this.props.linkData.source,this.props.linkData.target,e)}}componentDidMount(){this.applyOpacity(1,this.props.transitionDuration)}componentWillLeave(e){this.applyOpacity(0,this.props.transitionDuration,e)}applyOpacity(e,n,r=()=>{}){this.props.enableLegacyTransitions?ba(this.linkRef).transition().duration(n).style("opacity",e).on("end",r):(ba(this.linkRef).style("opacity",e),r())}drawStepPath(e,n){const{source:r,target:i}=e,a=i.y-r.y;return n==="horizontal"?`M${r.y},${r.x} H${r.y+a/2} V${i.x} H${i.y}`:`M${r.x},${r.y} V${r.y+a/2} H${i.x} V${i.y}`}drawDiagonalPath(e,n){const{source:r,target:i}=e;return n==="horizontal"?nKe()({source:[r.y,r.x],target:[i.y,i.x]}):rKe()({source:[r.x,r.y],target:[i.x,i.y]})}drawStraightPath(e,n){const{source:r,target:i}=e;return n==="horizontal"?`M${r.y},${r.x}L${i.y},${i.x}`:`M${r.x},${r.y}L${i.x},${i.y}`}drawElbowPath(e,n){return n==="horizontal"?`M${e.source.y},${e.source.x}V${e.target.x}H${e.target.y}`:`M${e.source.x},${e.source.y}V${e.target.y}H${e.target.x}`}drawPath(){const{linkData:e,orientation:n,pathFunc:r}=this.props;return typeof r=="function"?r(e,n):r==="elbow"?this.drawElbowPath(e,n):r==="straight"?this.drawStraightPath(e,n):r==="step"?this.drawStepPath(e,n):this.drawDiagonalPath(e,n)}getClassNames(){const{linkData:e,orientation:n,pathClassFunc:r}=this.props,i=["rd3t-link"];return typeof r=="function"&&i.push(r(e,n)),i.join(" ").trim()}render(){const{linkData:e}=this.props;return it.createElement("path",{ref:n=>{this.linkRef=n},style:Object.assign({},this.state.initialStyle),className:this.getClassNames(),d:this.drawPath(),onClick:this.handleOnClick,onMouseOver:this.handleOnMouseOver,onMouseOut:this.handleOnMouseOut,"data-source-id":e.source.id,"data-target-id":e.target.id})}}const aKe=`
/* Tree */
.rd3t-tree-container {
  width: 100%;
  height: 100%;
}

.rd3t-grabbable {
  cursor: move; /* fallback if grab cursor is unsupported */
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.rd3t-grabbable:active {
    cursor: grabbing;
    cursor: -moz-grabbing;
    cursor: -webkit-grabbing;
}

/* Node */
.rd3t-node {
  cursor: pointer;
  fill: #777;
  stroke: #000;
  stroke-width: 2;
}

.rd3t-leaf-node {
  cursor: pointer;
  fill: transparent;
  stroke: #000;
  stroke-width: 1;
}

.rd3t-label__title {
  fill: #000;
  stroke: none;
  font-weight: bolder;
}

.rd3t-label__attributes {
  fill: #777;
  stroke: none;
  font-weight: bolder;
  font-size: smaller;
}

/* Link */
.rd3t-link {
  fill: none;
  stroke: #000;
}
`;class lu extends it.Component{constructor(){super(...arguments),this.state={dataRef:this.props.data,data:lu.assignInternalProperties(Oo(this.props.data)),d3:lu.calculateD3Geometry(this.props),isTransitioning:!1,isInitialRenderForDataset:!0,dataKey:this.props.dataKey},this.internalState={targetNode:null,isTransitioning:!1},this.svgInstanceRef=`rd3t-svg-${XM()}`,this.gInstanceRef=`rd3t-g-${XM()}`,this.handleNodeToggle=e=>{const n=Oo(this.state.data),i=this.findNodesById(e,n,[])[0];this.props.collapsible&&!this.state.isTransitioning&&(i.__rd3t.collapsed?(lu.expandNode(i),this.props.shouldCollapseNeighborNodes&&this.collapseNeighborNodes(i,n)):lu.collapseNode(i),this.props.enableLegacyTransitions?(this.setState({data:n,isTransitioning:!0}),setTimeout(()=>this.setState({isTransitioning:!1}),this.props.transitionDuration+10)):this.setState({data:n}),this.internalState.targetNode=i)},this.handleAddChildrenToNode=(e,n)=>{const r=Oo(this.state.data),i=this.findNodesById(e,r,[]);if(i.length>0){const a=i[0],s=a.__rd3t.depth,o=Oo(n).map(l=>lu.assignInternalProperties([l],s+1));a.children.push(...o.flat()),this.setState({data:r})}},this.handleOnNodeClickCb=(e,n)=>{const{onNodeClick:r}=this.props;r&&typeof r=="function"&&(n.persist(),r(Oo(e),n))},this.handleOnLinkClickCb=(e,n,r)=>{const{onLinkClick:i}=this.props;i&&typeof i=="function"&&(r.persist(),i(Oo(e),Oo(n),r))},this.handleOnNodeMouseOverCb=(e,n)=>{const{onNodeMouseOver:r}=this.props;r&&typeof r=="function"&&(n.persist(),r(Oo(e),n))},this.handleOnLinkMouseOverCb=(e,n,r)=>{const{onLinkMouseOver:i}=this.props;i&&typeof i=="function"&&(r.persist(),i(Oo(e),Oo(n),r))},this.handleOnNodeMouseOutCb=(e,n)=>{const{onNodeMouseOut:r}=this.props;r&&typeof r=="function"&&(n.persist(),r(Oo(e),n))},this.handleOnLinkMouseOutCb=(e,n,r)=>{const{onLinkMouseOut:i}=this.props;i&&typeof i=="function"&&(r.persist(),i(Oo(e),Oo(n),r))},this.centerNode=e=>{const{dimensions:n,orientation:r,zoom:i,centeringTransitionDuration:a}=this.props;if(n){const s=ba(`.${this.gInstanceRef}`),o=ba(`.${this.svgInstanceRef}`),l=this.state.d3.scale;let c,f;r==="horizontal"?(f=-e.x*l+n.height/2,c=-e.y*l+n.width/2):(c=-e.x*l+n.width/2,f=-e.y*l+n.height/2),s.transition().duration(a).attr("transform","translate("+c+","+f+")scale("+l+")"),o.call(kE().transform,$w.translate(c,f).scale(i))}},this.getNodeClassName=(e,n)=>{const{rootNodeClassName:r,branchNodeClassName:i,leafNodeClassName:a}=this.props;return e!=null?n.children?i:a:r}}static getDerivedStateFromProps(e,n){let r=null;const i=!e.dataKey||n.dataKey!==e.dataKey;e.data!==n.dataRef&&i&&(r={dataRef:e.data,data:lu.assignInternalProperties(Oo(e.data)),isInitialRenderForDataset:!0,dataKey:e.dataKey});const a=lu.calculateD3Geometry(e);return RE(a,n.d3)||(r=r||{},r.d3=a),r}componentDidMount(){this.bindZoomListener(this.props),this.setState({isInitialRenderForDataset:!1})}componentDidUpdate(e){this.props.data!==e.data&&this.setState({isInitialRenderForDataset:!1}),(!RE(this.props.translate,e.translate)||!RE(this.props.scaleExtent,e.scaleExtent)||this.props.zoomable!==e.zoomable||this.props.draggable!==e.draggable||this.props.zoom!==e.zoom||this.props.enableLegacyTransitions!==e.enableLegacyTransitions)&&this.bindZoomListener(this.props),typeof this.props.onUpdate=="function"&&this.props.onUpdate({node:this.internalState.targetNode?Oo(this.internalState.targetNode):null,zoom:this.state.d3.scale,translate:this.state.d3.translate}),this.internalState.targetNode=null}setInitialTreeDepth(e,n){e.forEach(r=>{r.data.__rd3t.collapsed=r.depth>=n})}bindZoomListener(e){const{zoomable:n,scaleExtent:r,translate:i,zoom:a,onUpdate:s,hasInteractiveNodes:o}=e,l=ba(`.${this.svgInstanceRef}`),c=ba(`.${this.gInstanceRef}`);l.call(kE().transform,$w.translate(i.x,i.y).scale(a)),l.call(kE().scaleExtent(n?[r.min,r.max]:[a,a]).filter(f=>o?f.target.classList.contains(this.svgInstanceRef)||f.target.classList.contains(this.gInstanceRef)||f.shiftKey:!0).on("zoom",f=>{!this.props.draggable&&["mousemove","touchmove","dblclick"].includes(f.sourceEvent.type)||(c.attr("transform",f.transform),typeof s=="function"&&(s({node:null,zoom:f.transform.k,translate:{x:f.transform.x,y:f.transform.y}}),this.state.d3.scale=f.transform.k,this.state.d3.translate={x:f.transform.x,y:f.transform.y}))}))}static assignInternalProperties(e,n=0){return(Array.isArray(e)?e:[e]).map(i=>{const a=i;return a.__rd3t={id:null,depth:null,collapsed:!1},a.__rd3t.id=XM(),a.__rd3t.depth=n,a.children&&a.children.length>0&&(a.children=lu.assignInternalProperties(a.children,n+1)),a})}findNodesById(e,n,r){return r.length>0||(r=r.concat(n.filter(i=>i.__rd3t.id===e)),n.forEach(i=>{i.children&&i.children.length>0&&(r=this.findNodesById(e,i.children,r))})),r}findNodesAtDepth(e,n,r){return r=r.concat(n.filter(i=>i.__rd3t.depth===e)),n.forEach(i=>{i.children&&i.children.length>0&&(r=this.findNodesAtDepth(e,i.children,r))}),r}static collapseNode(e){e.__rd3t.collapsed=!0,e.children&&e.children.length>0&&e.children.forEach(n=>{lu.collapseNode(n)})}static expandNode(e){e.__rd3t.collapsed=!1}collapseNeighborNodes(e,n){this.findNodesAtDepth(e.__rd3t.depth,n,[]).filter(i=>i.__rd3t.id!==e.__rd3t.id).forEach(i=>lu.collapseNode(i))}generateTree(){const{initialDepth:e,depthFactor:n,separation:r,nodeSize:i,orientation:a}=this.props,{isInitialRenderForDataset:s}=this.state,l=XHe().nodeSize(a==="horizontal"?[i.y,i.x]:[i.x,i.y]).separation((h,m)=>h.parent.data.__rd3t.id===m.parent.data.__rd3t.id?r.siblings:r.nonSiblings)(XF(this.state.data[0],h=>h.__rd3t.collapsed?null:h.children));let c=l.descendants();const f=l.links();return e!==void 0&&s&&this.setInitialTreeDepth(c,e),n&&c.forEach(h=>{h.y=h.depth*n}),{nodes:c,links:f}}static calculateD3Geometry(e){let n;return e.zoom>e.scaleExtent.max?n=e.scaleExtent.max:e.zoom<e.scaleExtent.min?n=e.scaleExtent.min:n=e.zoom,{translate:e.translate,scale:n}}render(){const{nodes:e,links:n}=this.generateTree(),{renderCustomNodeElement:r,orientation:i,pathFunc:a,transitionDuration:s,nodeSize:o,depthFactor:l,initialDepth:c,separation:f,enableLegacyTransitions:h,svgClassName:m,pathClassFunc:p}=this.props,{translate:v,scale:y}=this.state.d3,x=Object.assign(Object.assign(Object.assign({},o),f),{depthFactor:l,initialDepth:c});return it.createElement("div",{className:"rd3t-tree-container rd3t-grabbable"},it.createElement("style",null,aKe),it.createElement("svg",{className:`rd3t-svg ${this.svgInstanceRef} ${m}`,width:"100%",height:"100%"},it.createElement(zGe,{enableLegacyTransitions:h,component:"g",className:`rd3t-g ${this.gInstanceRef}`,transform:`translate(${v.x},${v.y}) scale(${y})`},n.map((S,_)=>it.createElement(iKe,{key:"link-"+_,orientation:i,pathFunc:a,pathClassFunc:p,linkData:S,onClick:this.handleOnLinkClickCb,onMouseOver:this.handleOnLinkMouseOverCb,onMouseOut:this.handleOnLinkMouseOutCb,enableLegacyTransitions:h,transitionDuration:s})),e.map((S,_)=>{const{data:N,x:k,y:P,parent:O}=S;return it.createElement(KGe,{key:"node-"+_,data:N,position:{x:k,y:P},hierarchyPointNode:S,parent:O,nodeClassName:this.getNodeClassName(O,N),renderCustomNodeElement:r,nodeSize:o,orientation:i,enableLegacyTransitions:h,transitionDuration:s,onNodeToggle:this.handleNodeToggle,onNodeClick:this.handleOnNodeClickCb,onNodeMouseOver:this.handleOnNodeMouseOverCb,onNodeMouseOut:this.handleOnNodeMouseOutCb,handleAddChildrenToNode:this.handleAddChildrenToNode,subscriptions:x,centerNode:this.centerNode})}))))}}lu.defaultProps={onNodeClick:void 0,onNodeMouseOver:void 0,onNodeMouseOut:void 0,onLinkClick:void 0,onLinkMouseOver:void 0,onLinkMouseOut:void 0,onUpdate:void 0,orientation:"horizontal",translate:{x:0,y:0},pathFunc:"diagonal",pathClassFunc:void 0,transitionDuration:500,depthFactor:void 0,collapsible:!0,initialDepth:void 0,zoomable:!0,draggable:!0,zoom:1,scaleExtent:{min:.1,max:1},nodeSize:{x:140,y:140},separation:{siblings:1,nonSiblings:2},shouldCollapseNeighborNodes:!1,svgClassName:"",rootNodeClassName:"",branchNodeClassName:"",leafNodeClassName:"",renderCustomNodeElement:void 0,enableLegacyTransitions:!1,hasInteractiveNodes:!1,dimensions:void 0,centeringTransitionDuration:800,dataKey:void 0};function sKe(){let t=wl(a=>a.historyTree);const e=wl(a=>a.positionInTree),n=wl(a=>a.redoPositionStack);R.useEffect(()=>{wl.getState().historyTree===null&&wl.getState().addHistoryNode(Ce.getState())},[]),t===null&&(t={name:"",children:[],state:Ce.getState()});const r=R.useCallback(a=>{let s=[],o=a.parent,l=a;for(;o!==null&&o.children;){const c=o.children.findIndex(f=>f===l);s.splice(0,0,c),l=o,o=o.parent}return s},[]),i=(a,s)=>{wl.getState().setPositionInTree(a)};return b.jsxDEV("div",{id:"treeWrapper",style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%",flexGrow:0,maxHeight:50,background:"#F3F4F6",borderTop:"1px solid #DDDDDF"},children:[b.jsxDEV(so,{content:"Undo",closeDelay:0,placement:"right",children:b.jsxDEV(et,{isDisabled:e.length===0,isIconOnly:!0,size:"sm",style:{fontSize:18,marginLeft:5},onClick:()=>wl.getState().undo(),children:b.jsxDEV(VRe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:53,columnNumber:174},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:53,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:52,columnNumber:9},this),b.jsxDEV(so,{content:"Redo",closeDelay:0,placement:"right",children:b.jsxDEV(et,{isDisabled:n.length===0,isIconOnly:!0,size:"sm",style:{fontSize:18,marginLeft:5},onClick:()=>wl.getState().redo(),children:b.jsxDEV(MRe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:56,columnNumber:169},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:56,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:55,columnNumber:9},this),b.jsxDEV(lu,{data:t,collapsible:!1,draggable:!1,zoomable:!1,translate:{x:25,y:25},transitionDuration:500,nodeSize:{x:20,y:15},orientation:"horizontal",renderCustomNodeElement:a=>{const s=r(a.hierarchyPointNode),o=s.join(",")===e.join(",");return b.jsxDEV("circle",{className:"history-node",r:6,fill:o?"#326FEE":"#6D6E6E",strokeWidth:0,onClick:()=>i(s,a.hierarchyPointNode)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:73,columnNumber:20},this)}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:58,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/HistoryTree.tsx",lineNumber:51,columnNumber:7},this)}function oKe(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",strokeWidth:"2",points:"9 6 15 12 9 18"},child:[]}]})(t)}function lKe(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",strokeWidth:"2",points:"9 6 15 12 9 18",transform:"matrix(-1 0 0 1 24 0)"},child:[]}]})(t)}function uKe(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",strokeWidth:"2",points:"7 2 17 12 7 22"},child:[]}]})(t)}function cKe(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",strokeWidth:"2",points:"7 2 17 12 7 22",transform:"matrix(-1 0 0 1 24 0)"},child:[]}]})(t)}class dKe extends RR{constructor(n,r,i){super();Mt(this,"action");Mt(this,"previousPosition");Mt(this,"newPosition");this.action=n,this.previousPosition=r,this.newPosition=i,br.getState().logEvent("REORDER_ACTION_PROMPT",{action:n.name,previousPosition:r,newPosition:i})}getActionDescription(n){var a;const r=Ce.getState().entityNodes.find(s=>s.id===n.source),i=Ce.getState().entityNodes.find(s=>s.id===n.target);return`${r==null?void 0:r.data.name} ${(a=n.data)==null?void 0:a.name} ${i==null?void 0:i.data.name}`}getPrompt(){return this.getPromptV4()}getPromptV0(){const n=Ce.getState().textActionMatches[this.previousPosition],r=Ce.getState().textActionMatches[this.newPosition],i=Ce.getState().text,a=i.slice(n.start,n.end);let s="";return this.newPosition<this.previousPosition?(s+=i.slice(0,r.start)+` ${a} `+i.slice(r.start,n.start),s+=i.slice(n.end,i.length)):(s+=i.slice(0,n.start)+i.slice(n.end,r.start),s+=` ${a} `+i.slice(r.start,i.length)),`${s}

Rewrite the story so that it makes sense. Keep the same order of events.`}getPromptV4(){const n=Ce.getState().actionEdges,r=n.map((s,o)=>`${o+1}) `+this.getActionDescription(s)).join(`
`);if(this.newPosition<this.previousPosition){const s=n.splice(this.previousPosition,1)[0];n.splice(this.newPosition,0,s)}else{const s=n[this.previousPosition];n.splice(this.newPosition,0,s),n.splice(this.previousPosition,1)[0]}const i=n.map((s,o)=>`${o+1}) `+this.getActionDescription(s)).join(`
`),a=Ce.getState().text;return Ce.getState().setActionEdges([...n]),`${a}

In this story, the current order of actions is:
${r}

Rewrite the story to EXACTLY follow this new order:
${i}`}getPromptV3(){var h,m,p;const n=Ce.getState().actionEdges[this.previousPosition],r=Ce.getState().entityNodes.find(v=>v.id===n.source),i=Ce.getState().entityNodes.find(v=>v.id===n.target),a=Ce.getState().actionEdges[this.newPosition],s=Ce.getState().entityNodes.find(v=>v.id===a.source),o=Ce.getState().entityNodes.find(v=>v.id===a.target);let l=`before "${s==null?void 0:s.data.name}" ${(h=a.data)==null?void 0:h.name} "${o==null?void 0:o.data.name}"`;if(this.newPosition>0){const v=Ce.getState().actionEdges[this.newPosition-1],y=Ce.getState().entityNodes.find(S=>S.id===v.source),x=Ce.getState().entityNodes.find(S=>S.id===v.target);l+=` and after "${y==null?void 0:y.data.name}" ${(m=v.data)==null?void 0:m.name} "${x==null?void 0:x.data.name}"`}const c=`"${r==null?void 0:r.data.name}" ${(p=n.data)==null?void 0:p.name} "${i==null?void 0:i.data.name}"`;return`${Ce.getState().text}

Rewrite the story to move the action ${c} so that it happens ${l}.`}getPromptV2(){var c,f;const n=Ce.getState().actionEdges[this.previousPosition],r=Ce.getState().entityNodes.find(h=>h.id===n.source),i=Ce.getState().entityNodes.find(h=>h.id===n.target),a=Ce.getState().actionEdges[this.newPosition],s=Ce.getState().entityNodes.find(h=>h.id===a.source),o=Ce.getState().entityNodes.find(h=>h.id===a.target);return`${Ce.getState().text}

Rewrite the story so that "${r==null?void 0:r.data.name}" ${(c=n.data)==null?void 0:c.name} "${i==null?void 0:i.data.name}" happens right BEFORE "${s==null?void 0:s.data.name}" ${(f=a.data)==null?void 0:f.name} "${o==null?void 0:o.data.name}"`}getPromptV1(){const n=Ce.getState().textActionMatches[this.previousPosition],r=Ce.getState().textActionMatches[this.newPosition],i=Ce.getState().text;let a="";return this.newPosition<this.previousPosition?(a+=i.slice(0,r.start)+" LOCATION "+i.slice(r.start,n.start),a+=" ACTION "+i.slice(n.end,i.length)):(a+=i.slice(0,n.start)+" ACTION "+i.slice(n.end,r.start),a+=" LOCATION "+i.slice(r.start,i.length)),`${a}

TEXT_TO_MOVE: ${i.slice(n.start,n.end)}

Rewrite the story so that ACTION is moved to LOCATION `}execute(){super.execute()}}const _f=150,IJ=15,N0=1,kS=30,gl=30,fKe=5,_0=gl/2;function hKe(t){return b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{style:{width:t.data.width,height:t.data.height,background:"#dddddd",borderRadius:3,transform:"translate(0%, -50%)"},children:b.jsxDEV("span",{style:{transform:"translate(-100%, -50%)",position:"absolute",left:-10},children:[t.data.entity.data.emoji," ",t.data.entity.data.name]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:40,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:39,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:38,columnNumber:10},this)}function mKe(t){const n=Ce.getState().entityNodes,r=n.findIndex(h=>h.id===t.data.action.source),i=n.findIndex(h=>h.id===t.data.action.target),a=Math.min(r,i),s=Math.max(r,i);if(a===-1||s===-1||r>=n.length||i>=n.length)return b.jsxDEV(b.Fragment,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:56,columnNumber:12},this);const o=n[a],l=n[s],c=i===a,f=(h,m)=>b.jsxDEV("div",{style:{width:m,height:m,background:"rgba(255, 255, 255, 0)",borderRadius:9999,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:h},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:65,columnNumber:12},this);return a===s?b.jsxDEV("div",{style:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",width:25,height:25,transform:"translate(-100%, -50%)",top:0,left:"50%",background:"#BEBEDE",border:"1px solid rgb(73, 75, 168)",borderRadius:999},children:f(o.data.emoji,25)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:72,columnNumber:12},this):b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{style:{position:"relative",width:t.data.width,height:t.data.height,background:"rgb(73, 75, 168)",transform:"translate(-50%, 0%)",opacity:t.dragging?.5:1},children:[b.jsxDEV("div",{style:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:c?"right":"left",width:25,height:25,transform:"translate(-50%, -50%)",top:0,left:"50%",background:"#BEBEDE",border:"1px solid rgb(73, 75, 168)",borderRadius:999},children:f(o.data.emoji,25)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:81,columnNumber:7},this),b.jsxDEV("div",{style:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:c?"left":"right",width:25,height:25,transform:"translate(-50%, 50%)",bottom:0,left:"50%",background:"#BEBEDE",border:"1px solid rgb(73, 75, 168)",borderRadius:999},children:f(l.data.emoji,25)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:85,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:78,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:77,columnNumber:10},this)}function Vce(){const t=Ce(T=>T.entityNodes),e=Ce(T=>T.actionEdges),n=Ce(T=>T.highlightedActionsSegment),r=Ce(T=>T.setHighlightedActionsSegment),i=Ce(T=>T.filteredActionsSegment),a=Ce(T=>T.setFilteredActionsSegment),[s,o]=R.useState(!1),[l,c]=R.useState(!1),f=Ce(T=>T.isReadOnly),[h,m]=R.useState([]),[p,v]=R.useState([]),y=R.useMemo(()=>({timelineNode:hKe,actionLinkNode:mKe}),[]),x=Math.max(gl,e.length*gl),S=t.length*(N0+kS),_=[[0,0],[x+_f+10,t.length*(N0+kS)+10]];R.useEffect(()=>{const T=t.map((B,W)=>({id:B.id,type:"timelineNode",draggable:!1,selectable:!1,position:{x:_f,y:W*(N0+kS)+IJ},data:{width:x,height:N0,entity:B}})),L=e.map((B,W)=>{const Y=t.findIndex(I=>I.id===B.source),V=t.findIndex(I=>I.id===B.target);return{id:"action"+B.id,type:"actionLinkNode",draggable:!f,selectable:!f,position:{x:W*gl+_f+_0,y:Math.min(Y,V)*(N0+kS)+IJ},data:{width:fKe,height:Math.abs(Y-V)*(N0+kS),action:B}}});m(T),v(L)},[t,e]);const N=jm(),[k,P]=R.useState(N.getZoom());R.useEffect(()=>{const T=L=>{l&&L.key==="ArrowLeft"?(N.setViewport({...N.getViewport(),x:N.getViewport().x+100},{duration:100}),L.preventDefault()):l&&L.key==="ArrowRight"&&(N.setViewport({...N.getViewport(),x:N.getViewport().x-100},{duration:100}),L.preventDefault())};return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[N,l]);let O=n?n.end-n.start+1:i?i.end-i.start+1:e.length;const A=Ce(T=>T.highlightedEntities);return A.length>0&&(O=e.filter(T=>A.includes(T.source)||A.includes(T.target)).length),b.jsxDEV(b.Fragment,{children:[b.jsxDEV("div",{style:{width:"100%",height:40,background:"rgb(247 246 249)",border:"solid 1px rgb(242 242 244)",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[b.jsxDEV(YA,{size:"sm",value:k,style:{width:100,marginLeft:10},"aria-label":"Zoom slider",showSteps:!0,minValue:.5,maxValue:1.5,step:.1,onChange:T=>{N.zoomTo(T,{duration:50}),P(N.getZoom())}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:192,columnNumber:7},this),b.jsxDEV("span",{style:{fontSize:12,color:"rgba(0,0,0,0.5)",marginRight:10},children:O<e.length?`Viewing ${O} / ${e.length} Events`:`Viewing all ${e.length} Events`},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:202,columnNumber:7},this),b.jsxDEV("div",{children:[b.jsxDEV(et,{variant:"light",size:"sm",isIconOnly:!0,onClick:()=>{N.setViewport({...N.getViewport(),x:N.getViewport().x+100},{duration:100})},children:b.jsxDEV(cKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:211,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:207,columnNumber:7},this),b.jsxDEV(et,{variant:"light",size:"sm",isIconOnly:!0,onClick:()=>{N.setViewport({...N.getViewport(),x:N.getViewport().x-100},{duration:100})},children:b.jsxDEV(uKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:217,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:213,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:206,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:190,columnNumber:5},this),b.jsxDEV("div",{style:{width:"100%",height:"100%"},children:b.jsxDEV(AR,{onMouseMove:T=>{const L=N.screenToFlowPosition({x:T.clientX,y:T.clientY},{snapToGrid:!1}),B=Math.round((L.x-_f-_0)/gl),W=B>=0&&B<e.length;if(s){const Y=Math.min(i.start,i.end,B),V=Math.max(i.start,i.end,B);a(Y,V)}else W?r(B,B):r(null,null)},onMouseLeave:T=>{r(null,null),c(!1)},onMouseEnter:T=>{c(!0)},onMouseDown:T=>{if(T.button===0){const L=N.screenToFlowPosition({x:T.clientX,y:T.clientY},{snapToGrid:!1}),B=Math.round((L.x-_f-_0)/gl);B>=0&&B<e.length?(a(B,B),r(null,null),o(!0)):(a(null,null),r(null,null),o(!1))}T.preventDefault(),T.stopPropagation()},onMouseUp:T=>{T.button===0&&(o(!1),br.getState().logEvent("TIMELINE_SELECTED",{start:i==null?void 0:i.start,end:i==null?void 0:i.end}))},panOnDrag:!1,translateExtent:_,zoomOnDoubleClick:!1,defaultViewport:{x:0,y:_[0][1],zoom:1},nodes:[...h,...p],connectionMode:Dg.Loose,nodeTypes:y,deleteKeyCode:[],fitView:!1,panOnScroll:!0,onNodesChange:T=>{T.map(L=>{if(L.type==="position"&&L.position){const B=p.find(W=>W.id===L.id);B&&(L.position.y=B.position.y,L.position.x=Math.max(_f,Math.min(_f+x,L.position.x)))}}),v(Fw(T,p))},onNodeDragStart:(T,L)=>{r(null,null),a(null,null)},onNodeDragStop:(T,L)=>{var Y,V;const B=Math.round((L.position.x-_f-_0+gl/2)/gl),W=p.findIndex(I=>I.id===L.id);if(L.type==="actionLinkNode"&&B>=0&&B<e.length+1&&B!==W){const I=L;new dKe((V=(Y=I.data)==null?void 0:Y.action)==null?void 0:V.data,W,B).execute()}},children:b.jsxDEV(pWe,{children:[n&&b.jsxDEV("div",{style:{pointerEvents:"none",position:"absolute",left:-gl/2,height:S,width:gl,background:"rgba(0,0,0,0.2)",transform:`translate(${n.start*gl+_f+_0}px, 0px)`}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:323,columnNumber:15},this),i&&b.jsxDEV("div",{style:{borderLeft:"2px solid rgba(100,100,100,0.5)",borderRight:"2px solid rgba(100,100,100,0.5)",pointerEvents:"none",position:"absolute",left:-gl/2,height:S,width:gl*(i.end-i.start+1),background:"rgba(0,0,0,0.2)",transform:`translate(${i.start*gl+_f+_0}px, 0px)`}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:330,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:321,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:222,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:221,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/actionTimeline/ActionTimeline.tsx",lineNumber:189,columnNumber:5},this)}class pKe extends p_{constructor(n,r,i){super();Mt(this,"source");Mt(this,"target");Mt(this,"newAction");this.source=n,this.target=r,this.newAction=i,br.getState().logEvent("ADD_ACTION_PROMPT",{source:n.name,target:r.name,newAction:i})}getGlobalPrompt(n){return`${n}

SOURCE: ${this.source.name}
TARGET: ${this.target.name}

Rewrite the story so that SOURCE also ${this.newAction} TARGET`}getTargettedPrompt(n,r,i){return`${n} <blank> ${i}

        <blank>: ${r}
SOURCE: ${this.source.name}
TARGET: ${this.target.name}

Rewrite <blank> to add that SOURCE also ${this.newAction} TARGET.

<blank>: `}}class gKe extends p_{constructor(n,r,i,a){super();Mt(this,"source");Mt(this,"target");Mt(this,"previousAction");Mt(this,"newAction");this.source=n,this.target=r,this.previousAction=i,this.newAction=a,br.getState().logEvent("CHANGE_ACTION_PROMPT",{source:n.name,target:r.name,previousAction:i.name,newAction:a.name})}isTargetted(){return!0}splitTextBasedOnSelection(){const n=Ce.getState().textActionMatches.filter(r=>r.action.passage===this.previousAction.passage)[0];if(n){const r=Ce.getState().text.slice(0,n.start),i=Ce.getState().text.slice(n.start,n.end),a=Ce.getState().text.slice(n.end);return{precedingText:r,textToModify:i,followingText:a}}return null}getGlobalPrompt(n){return`${n}

SOURCE: ${this.source.name}
TARGET: ${this.target.name}
PREVIOUS: ${this.previousAction.name}
NEW: ${this.newAction.name}

Rewrite the story so that SOURCE does NEW instead of PREVIOUS`}getTargettedPrompt(n,r,i){return`${n} TEXT_TO_REWRITE ${i}

TEXT_TO_REWRITE: ${r}
SOURCE: ${this.source.name}
TARGET: ${this.target.name}
PREVIOUS: ${this.previousAction.name}
NEW: ${this.newAction.name}

Rewrite TEXT_TO_REWRITE so that SOURCE does NEW instead of PREVIOUS`}}class vKe extends p_{constructor(n,r,i){super();Mt(this,"source");Mt(this,"target");Mt(this,"action");this.source=n,this.target=r,this.action=i,br.getState().logEvent("REMOVE_ACTION_PROMPT",{source:n.name,target:r.name,action:i.name})}getGlobalPrompt(n){return`${n}

SOURCE: ${this.source.name}
TARGET: ${this.target.name}
ACTION: ${this.action.name}

Rewrite the story so that SOURCE does not do ACTION to TARGET`}getTargettedPrompt(n,r,i){return`${n} TEXT_TO_REWRITE ${i}

SOURCE: ${this.source.name}
TARGET: ${this.target.name}
ACTION: ${this.action.name}
TEXT_TO_REWRITE: ${r}

Rewrite TEXT_TO_REWRITE so that SOURCE does not do ACTION to TARGET`}}function MJ(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,a=e.internals.positionAbsolute,s=n/2,o=r/2,l=i.x+s,c=i.y+o,f=a.x+e.measured.width/2,h=a.y+e.measured.height/2,m=(f-l)/(2*s)-(h-c)/(2*o),p=(f-l)/(2*s)+(h-c)/(2*o),v=1/(Math.abs(m)+Math.abs(p)),y=v*m,x=v*p,S=s*(y+x)+l,_=o*(-y+x)+c;return{x:S,y:_}}function VJ(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),a=Math.round(e.x),s=Math.round(e.y);return a<=r+1?yn.Left:a>=r+n.measured.width-1?yn.Right:s<=i+1?yn.Top:s>=n.y+n.measured.height-1?yn.Bottom:yn.Top}function $ce(t,e){const n=MJ(t,e),r=MJ(e,t),i=VJ(t,n),a=VJ(e,r);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:i,targetPos:a}}function yKe(t){const e=UP(t.source),n=UP(t.target),{sx:r,sy:i,tx:a,ty:s,sourcePos:o,targetPos:l}=$ce(e,n);let[c,f,h]=TR({sourceX:r,sourceY:i,sourcePosition:o,targetPosition:l,targetX:a,targetY:s});const[m,p]=R.useState(!1),[v,y]=R.useState(t.data.name),[x,S]=R.useState(!1),_=it.createRef(),{setEdges:N}=jm(),k=Jf(["Delete","Backspace"]),P=Ce(ce=>ce.selectedEdges),O=P.includes(t.id),A=Ce(ce=>ce.getFilteredActionEdges),T=Ce(ce=>ce.filteredActionsSegment),L=Ce(ce=>ce.highlightedActionsSegment),B=A(L||T),W=B.filter(ce=>ce.source===t.source&&ce.target===t.target),Y=B.filter(ce=>ce.source===t.target&&ce.target===t.source),V=t.sourceX>t.targetX,I=W.findIndex(ce=>ce.id===t.id),H=I===W.length-1,q=W.findIndex(ce=>P.includes(ce.id)),[F,J]=R.useState(q!=-1?q:I),Z=Ce(ce=>ce.highlightedEntities),G=Ce(ce=>ce.selectedNodes),oe=Z.length>0&&(Z.includes(t.source)||Z.includes(t.target)),ae=Z.length>0&&!oe||G.length>0&&!G.includes(t.source)&&!G.includes(t.target),te=Ce(ce=>ce.isReadOnly);if(R.useEffect(()=>{if(k&&Ce.getState().selectedEdges.includes(t.id)){N(ve=>ve.filter(Ne=>Ne.id!==t.id));const ce=Ce.getState().entityNodes.find(ve=>ve.id===t.source),he=Ce.getState().entityNodes.find(ve=>ve.id===t.target);ce&&he&&new vKe(ce.data,he.data,t.data).execute()}},[k]),t.source===t.target){const ce=(t.sourceX-t.targetX)*.6,he=50;c=`M ${t.sourceX-5} ${t.sourceY} A ${ce} ${he} 0 1 0 ${t.targetX+2} ${t.targetY}`,f=(t.sourceX+t.targetX)/2,h=t.sourceY+(t.sourceY>t.targetY?-he*1.5:he*1.5)}const re=()=>{p(!1),v!==W[F].data.name&&N(ce=>{const he=ce.find(ve=>ve.id===W[F].id);if(he){const ve={...he.data};he.data.name=v;const Ne=Ce.getState().entityNodes.find(Te=>Te.id===he.source),ke=Ce.getState().entityNodes.find(Te=>Te.id===he.target);Ne&&ke&&new gKe(Ne.data,ke.data,ve,he.data).execute()}return[...ce]})};R.useEffect(()=>{var ce;x&&((ce=_.current)==null||ce.select(),S(!1))},[x]);let X=`translate(-50%, -50%) translate(${f}px,${h}px)`;return Y.length>0&&(V?X=`translate(-50%, -105%) translate(${f}px,${h}px)`:X=`translate(-50%, 5%) translate(${f}px,${h}px)`),b.jsxDEV(b.Fragment,{children:[b.jsxDEV(fx,{path:c,markerEnd:t.markerEnd,style:{...t.style,stroke:O?"#326FEE":"#888",strokeWidth:O?2:1,cursor:"pointer"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:136,columnNumber:7},this),oe&&H&&W.map((ce,he)=>{const ve=he/Math.min(W.length,15)+.5,Ne=Z.includes(ce.source),ke=Z.includes(ce.target);let Te=Ne?"#326FEE":ke?"#EEB132":"#888";return Te=Ne&&ke?"url(#grad1)":Te,b.jsxDEV("g",{children:[b.jsxDEV("defs",{children:[b.jsxDEV("filter",{x:"0",y:"0",width:"1",height:"1",id:"solid",children:[b.jsxDEV("feFlood",{floodColor:"white",result:"bg"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:147,columnNumber:15},this),b.jsxDEV("feMerge",{children:[b.jsxDEV("feMergeNode",{in:"bg"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:149,columnNumber:17},this),b.jsxDEV("feMergeNode",{in:"SourceGraphic"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:150,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:148,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:146,columnNumber:13},this),b.jsxDEV("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[b.jsxDEV("stop",{offset:"0%",style:{stopColor:"#326FEE",stopOpacity:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:155,columnNumber:15},this),b.jsxDEV("stop",{offset:"49%",style:{stopColor:"#326FEE",stopOpacity:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:156,columnNumber:15},this),b.jsxDEV("stop",{offset:"50%",style:{stopColor:"#EEB132",stopOpacity:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:157,columnNumber:15},this),b.jsxDEV("stop",{offset:"100%",style:{stopColor:"#EEB132",stopOpacity:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:158,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:154,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:145,columnNumber:11},this),b.jsxDEV("circle",{cx:0,cy:0,r:4,fill:Te},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:161,columnNumber:9},this),b.jsxDEV("text",{filter:"url(#solid)",textAnchor:V?"end":"start",dominantBaseline:V?"auto":"hanging",style:{fontSize:10,fill:"#000",transform:V?"translate(-5px,-5px)":"translate(5px,5px)"},children:ce.data.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:162,columnNumber:9},this),b.jsxDEV("animateMotion",{begin:ve*-10,dur:"10s",repeatCount:"indefinite",path:c},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:165,columnNumber:9},this)]},ce.data.name,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:144,columnNumber:17},this)}),!oe&&b.jsxDEV(tce,{children:b.jsxDEV("div",{style:{position:"absolute",display:H||O?"flex":"none",flexDirection:"row",alignItems:"center",transform:X,fontSize:12,pointerEvents:"all",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",zIndex:O?9999:0,background:O?"rgb(73 129 244)":"#eee",color:O?"white":"black",opacity:ae?.3:1},className:"nodrag nopan",children:[W.length>1&&b.jsxDEV("button",{onClick:ce=>{ce.stopPropagation();const he=(F-1+W.length)%W.length;J(he),O&&Ce.getState().setSelectedEdges([W[he].id])},children:b.jsxDEV(lKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:194,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:188,columnNumber:43},this),!m&&b.jsxDEV("button",{style:{width:100,overflow:"clip",color:O?"white":"black",borderRadius:4,cursor:te?"pointer":"text",background:O?"#326FEE":"white",borderLeft:"1px solid #c8c8c8",borderRight:"1px solid #c8c8c8",paddingLeft:4,paddingRight:4,whiteSpace:"nowrap"},onClick:ce=>{Ce.getState().isReadOnly||(ce.stopPropagation(),y(W[F].data.name),p(!0),S(!0))},children:W.length<=F?t.data.name:W[F].data.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:197,columnNumber:30},this),m&&b.jsxDEV("input",{ref:_,autoFocus:!0,style:{background:"#white",borderRadius:4},value:v,onChange:ce=>{y(ce.target.value)},onBlur:()=>{re()},onKeyDown:ce=>{ce.key==="Enter"&&re()}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:208,columnNumber:29},this),W.length>1&&b.jsxDEV("div",{style:{marginLeft:5},children:["(",F+1,"/",W.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:216,columnNumber:13},this),W.length>1&&b.jsxDEV("button",{onClick:ce=>{ce.stopPropagation();const he=(F+1)%W.length;J(he),O&&Ce.getState().setSelectedEdges([W[he].id])},children:b.jsxDEV(oKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:225,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:219,columnNumber:43},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:169,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:168,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/ActionEdgeComponent.tsx",lineNumber:135,columnNumber:5},this)}function Lce(){const t=Ce(A=>A.entityNodes),e=Ce(A=>A.actionEdges),n=Ce(A=>A.getFilteredActionEdges),r=Ce(A=>A.setEntityNodes),i=Ce(A=>A.setActionEdges),a=Ce(A=>A.setSelectedNodes),s=Ce(A=>A.setSelectedEdges),o=Ce(A=>A.filteredActionsSegment),l=Ce(A=>A.highlightedActionsSegment),[c,f]=R.useState(null),[h,m]=R.useState({x:0,y:0}),p=R.useRef(null),v=R.useRef(null),y=Ce(A=>A.highlightedEntities),x=Ce(A=>A.selectedNodes),S=Ce(A=>A.isReadOnly),{screenToFlowPosition:_}=jm(),N=R.useMemo(()=>({entityNode:pze}),[]),k=R.useMemo(()=>({actionEdge:yKe}),[]);let O=n(l||o);if(y.length>0||x.length>0){const A=y.concat(x);O=O.filter(T=>A.includes(T.source)||A.includes(T.target))}return R.useEffect(()=>{c&&p.current&&(p.current.focus(),p.current.value="")},[c]),b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{ref:v,style:{position:"relative",width:"100%",height:"100%"},children:[b.jsxDEV(AR,{nodes:t,edges:O,connectionMode:Dg.Loose,nodeTypes:N,edgeTypes:k,deleteKeyCode:[],zoomOnDoubleClick:!1,onSelectionChange:A=>{Ce.getState().isReadOnly||a(A.nodes.map(T=>T.id)),s(A.edges.map(T=>T.id))},onNodesChange:A=>{r(Fw(A,t))},onEdgesChange:A=>{i(Pue(A,e))},onMouseMove:A=>{m({x:A.clientX,y:A.clientY})},onConnect:A=>{if(S)return;const T=t.find(B=>B.id===A.source),L=t.find(B=>B.id===A.target);f({placeholder:"Enter the action name",x:h.x-v.current.getBoundingClientRect().left,y:h.y-v.current.getBoundingClientRect().top,onValidate:B=>{new pKe(T.data,L.data,B).execute();const W={type:"actionEdge",label:B,sourceHandle:A.sourceHandle,targetHandle:A.targetHandle,animated:!0,markerEnd:{type:"arrowclosed",width:25,height:25},source:A.source,target:A.target,data:{name:B,passage:"",sourceLocation:"unknown",targetLocation:"unknown"},id:"action-"+B};i(fue(W,e))}})},onDoubleClick:A=>{!Ce.getState().isReadOnly&&A.target.classList.contains("react-flow__pane")&&v.current&&f({placeholder:"Enter the entity name",x:A.clientX-v.current.getBoundingClientRect().left,y:A.clientY-v.current.getBoundingClientRect().top,onValidate:T=>{const B=HF({name:T,emoji:"",properties:[]},0);B.position=_({x:A.clientX,y:A.clientY},{snapToGrid:!1});const W=[...t,B];r(W),Pi.optimizeNodeLayout("entity",W,r,{x:v.current.clientWidth/2,y:v.current.clientHeight/2},120,100)}})},children:[b.jsxDEV(WF,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntitiesEditor.tsx",lineNumber:141,columnNumber:11},this),b.jsxDEV(UF,{variant:xd.Dots,gap:12,size:1},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntitiesEditor.tsx",lineNumber:142,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntitiesEditor.tsx",lineNumber:65,columnNumber:9},this),c&&b.jsxDEV("div",{style:{position:"absolute",top:c.y,left:c.x,zIndex:999,transform:"translate(-50%, -50%)",background:"white",padding:10,borderRadius:5,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},children:b.jsxDEV("input",{ref:p,type:"text",placeholder:c.placeholder,onBlur:()=>{f(null)},onKeyDown:A=>{A.key==="Enter"?(c.onValidate(p.current.value),f(null)):A.key==="Escape"&&f(null)}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntitiesEditor.tsx",lineNumber:145,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntitiesEditor.tsx",lineNumber:144,columnNumber:24},this),!S&&b.jsxDEV("span",{style:{position:"absolute",bottom:5,left:"50%",transform:"translate(-50%, 0%)",pointerEvents:"none",color:"#888"},children:"Double click to create a new entity"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntitiesEditor.tsx",lineNumber:159,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntitiesEditor.tsx",lineNumber:64,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/entityActionView/EntitiesEditor.tsx",lineNumber:63,columnNumber:5},this)}class bKe extends p_{constructor(n,r){super();Mt(this,"entity");Mt(this,"location");this.entity=n,this.location=r,br.getState().logEvent("MOVE_ENTITY_PROMPT",{entity:n.name,location:r.name})}isUnkwownLocation(){return this.location.name==="unknown"}getGlobalPrompt(n){return`${n}

Rewrite the story so that "${this.entity.name}" ${this.isUnkwownLocation()?"":'never goes to the "'+this.entity.location+'" but instead'} goes to the "${this.location.name}"`}getTargettedPrompt(n,r,i){return`${n} TEXT_TO_REWRITE ${i}

TEXT_TO_REWRITE: ${r}

"`+(this.isUnkwownLocation()?"":`${this.entity.name}" is currently located in the "${this.location.name}". `)+`Rewrite TEXT_TO_REWRITE so that it is clear that "${this.entity.name}" is located in the location "${this.location.name}"`}execute(){var s,o,l,c;super.execute();const n=Ce.getState().filteredActionsSegment,r=Ce.getState().actionEdges,i=n?n.start:0,a=n?n.end:r.length;for(let f=i;f<r.length;f++){const h=r[f],m=Ce.getState().entityNodes.find(v=>v.id===h.source),p=Ce.getState().entityNodes.find(v=>v.id===h.target);if(f>=a&&(m&&m.data.name===this.entity.name&&((s=h.data)==null?void 0:s.sourceLocation)!==this.entity.location||p&&p.data.name===this.entity.name&&((o=h.data)==null?void 0:o.targetLocation)!==this.entity.location))break;((l=h.data)==null?void 0:l.sourceLocation)===this.entity.location&&m&&m.data.name===this.entity.name&&(h.data.sourceLocation=this.location.name),((c=h.data)==null?void 0:c.targetLocation)===this.entity.location&&p&&p.data.name===this.entity.name&&(h.data.targetLocation=this.location.name)}Ce.getState().setActionEdges(r)}}function wKe(t){const e=Ce(o=>o.selectedNodes.includes(t.id)),n=Ce(o=>o.filteredActionsSegment),r=Ce(o=>o.highlightedActionsSegment);let i=n||r,s=!Ce.getState().getFilteredEntityNodes(i).map(o=>o.data.name).includes(t.data.name);return b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{className:"custom-drag-handle",style:{position:"relative",zIndex:999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:`1px solid ${e?"blue":"white"}`,width:50,height:50,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",padding:10,background:"white",borderRadius:999,opacity:s?"0.3":1},children:[b.jsxDEV("span",{style:{fontSize:24},children:t.data.emoji},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:33,columnNumber:11},this),b.jsxDEV("div",{style:{position:"relative"},children:b.jsxDEV("span",{style:{whiteSpace:"nowrap",fontWeight:400,padding:1,position:"absolute",borderRadius:3,background:"white",transform:"translate(-50%, 0%)",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",top:-4,left:0,fontSize:10},children:[t.data.name," "]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:35,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:34,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:32,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:31,columnNumber:10},this)}function Fce(){const t=Ce(_=>_.entityNodes),e=Ce(_=>_.locationNodes),n=Ce(_=>_.getFilteredActionEdges),r=Ce(_=>_.setLocationNodes),[i,a]=R.useState([]),s=Ce(_=>_.filteredActionsSegment),o=Ce(_=>_.highlightedActionsSegment),[l,c]=R.useState(!0),[f,h]=R.useState(null),m=R.useRef(null),p=R.useRef(null),{getIntersectingNodes:v,screenToFlowPosition:y}=jm(),x=Ce(_=>_.isReadOnly);if(t.length>0&&e.length===0){const _=GF({name:"unknown",emoji:""},0);r([_])}R.useMemo(()=>{var L,B;if(!l){Pi.stopSimulation("spatial-nodes");return}let _=!1,N=s;s&&(_=!0,N={start:0,end:s.end}),o&&(_=!0,N={start:0,end:o.end});const k=n(N),P={};for(const W of k)[{location:e.find(V=>{var I;return V.data.name===((I=W.data)==null?void 0:I.sourceLocation)}),entityAtLocation:W.source},{location:e.find(V=>{var I;return V.data.name===((I=W.data)==null?void 0:I.targetLocation)}),entityAtLocation:W.target}].forEach(({location:V,entityAtLocation:I})=>{if(V){const H=t.find(q=>q.id===I);if(H){const q=H.data.name;P[q]||(P[q]=[]),P[q].push(V.data.name),V.data.name}}});const O=[];for(const[W,Y]of Object.entries(P)){const V=_?[Y[Y.length-1]]:new Set(Y);for(const I of V){const H=e.find(Z=>Z.data.name===I),q=t.find(Z=>Z.data.name===W),F=`spatial-entity-${W}-${_?"":I}`,J=i.find(Z=>Z.id===F);if(H&&q){const Z=((L=H==null?void 0:H.measured)==null?void 0:L.width)||0,G=((B=H==null?void 0:H.measured)==null?void 0:B.height)||0;O.push({...J||{},id:F,draggable:!x,selectable:!x,type:"spatialEntityNode",dragHandle:".custom-drag-handle",measured:{width:50,height:50},position:{x:(J==null?void 0:J.position.x)||H.position.x+Z/2-25,y:(J==null?void 0:J.position.y)||H.position.y+G/2-25},data:{...q.data,location:I}})}}}const A=O.map(W=>{var H,q;const Y=Ce.getState().locationNodes.find(F=>F.data.name===W.data.location),V=((Y==null?void 0:Y.position.x)||0)+(((H=Y==null?void 0:Y.measured)==null?void 0:H.width)||0)/2,I=((Y==null?void 0:Y.position.y)||0)+(((q=Y==null?void 0:Y.measured)==null?void 0:q.height)||0)/2;return{id:W.id,x:W.position.x,y:W.position.y,data:W,cx:V,cy:I}}),T=wle(A).force("x",xle(W=>{var Y,V;return W.cx-(((V=(Y=W.data)==null?void 0:Y.measured)==null?void 0:V.width)||0)/2})).force("y",Sle(W=>{var Y,V;return W.cy-(((V=(Y=W.data)==null?void 0:Y.measured)==null?void 0:V.height)||0)/2})).force("collide",vle(30)).tick(1);Pi.startSimulation("spatial-nodes",T,()=>{let W=!1;i.length===A.length&&(W=!0,A.forEach((Y,V)=>{let I=Y.x-i[V].position.x,H=Y.y-i[V].position.y,q=Math.sqrt(I*I+H*H);Math.abs(q)>.08&&(W=!1)})),W?Pi.stopSimulation("spatial-nodes"):a(A.map(Y=>Y.data.dragging?Y.data:{...Y.data,position:{x:Y.x,y:Y.y}}))},100)},[s,o,i,e,l]),R.useEffect(()=>{m.current&&f&&(m.current.value="",m.current.focus())},[f]);const S=R.useMemo(()=>({spatialEntityNode:wKe,locationNode:gze}),[]);return b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{ref:p,style:{position:"relative",width:"100%",height:"100%"},children:[b.jsxDEV(AR,{nodes:[...e,...i],nodeTypes:S,deleteKeyCode:[],zoomOnDoubleClick:!1,onNodesChange:_=>{_.some(k=>k.type==="position")&&(a(Fw(_,i)),r(Fw(_,e)))},onDoubleClick:_=>{var N,k;if(!Ce.getState().isReadOnly&&_.target.classList.contains("react-flow__pane")&&p.current){const P=_.clientX-((N=p.current)==null?void 0:N.getBoundingClientRect().left),O=_.clientY-((k=p.current)==null?void 0:k.getBoundingClientRect().top);h({x:P,y:O})}},onNodeDragStart:()=>{c(!1)},onNodeDrag:(_,N)=>{var O;const k=v(N);let P=!0;if(N.type==="spatialEntityNode"){for(const A of k)A.type==="locationNode"&&(dm.getState().setHoveredLocation((O=A.data)==null?void 0:O.name),P=!1);P&&dm.getState().setHoveredLocation(null)}},onNodeDragStop:(_,N)=>{const k=dm.getState().hoveredLocation;if(N.type==="spatialEntityNode"&&k){const P=N,O=e.find(A=>A.data.name===k);if(O&&k!==P.data.location){const A=P.id;P.id=`spatial-entity-${P.data.name}-${k}`;const T=i.map(L=>L.id===A?P:L);a([...T]),new bKe(P.data,O.data).execute()}}c(!0),dm.getState().setHoveredLocation(null)},children:[b.jsxDEV(WF,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:275,columnNumber:11},this),b.jsxDEV(UF,{variant:xd.Dots,gap:12,size:1},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:276,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:203,columnNumber:9},this),f&&b.jsxDEV("div",{style:{position:"absolute",top:f.y,left:f.x,zIndex:999,transform:"translate(-50%, -50%)",background:"white",padding:10,borderRadius:5,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},children:b.jsxDEV("input",{ref:m,autoFocus:!0,type:"text",placeholder:"Enter the location name",onBlur:()=>{h(null)},onKeyDown:_=>{if(_.key==="Enter"){const N=_.currentTarget.value,k=y({x:f.x+p.current.getBoundingClientRect().left,y:f.y+p.current.getBoundingClientRect().top},{snapToGrid:!1}),P=[...e,{id:`location-${N}`,type:"locationNode",measured:{width:160,height:160},position:{x:k.x,y:k.y},data:{name:N,emoji:""}}];r(P),h(null),Pi.optimizeNodeLayout("location",P,r,{x:p.current.clientWidth/2,y:p.current.clientHeight/2},120)}else _.key==="Escape"&&h(null)}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:279,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:278,columnNumber:38},this),!x&&b.jsxDEV("span",{style:{position:"absolute",bottom:5,left:"50%",transform:"translate(-50%, 0%)",pointerEvents:"none",color:"#888"},children:"Double click to create a new location"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:297,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:202,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/locationView/LocationsEditor.tsx",lineNumber:201,columnNumber:5},this)}function Bce(t){const[e,n]=R.useState(!1),[r,i]=R.useState("entities"),a=Ce(f=>f.isStale),s=Ce(f=>f.isReadOnly),o=Jf(["Escape"]),l=it.createRef();R.useEffect(()=>{const f=h=>{(h.metaKey||h.ctrlKey)&&h.key==="z"&&(h.preventDefault(),h.shiftKey?wl.getState().redo():wl.getState().undo())};return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[]),R.useEffect(()=>{o&&(Ce.getState().setSelectedNodes([]),Ce.getState().setSelectedEdges([]),Ce.getState().setFilteredActionsSegment(null,null))},[o]),R.useEffect(()=>{const f={x:l.current.clientWidth/2,y:l.current.clientHeight/2};Pi.optimizeNodeLayout("entity",Ce.getState().entityNodes,Ce.getState().setEntityNodes,f,120,100),Pi.optimizeNodeLayout("location",Ce.getState().locationNodes,Ce.getState().setLocationNodes,f,120)},[r]),R.useEffect(()=>{const f={x:l.current.clientWidth/2,y:l.current.clientHeight/2};mu.getInstance().onUpdate=()=>{Pi.optimizeNodeLayout("locations",Ce.getState().locationNodes,Ce.getState().setLocationNodes,{x:f.x,y:f.y},120),Pi.optimizeNodeLayout("entity",Ce.getState().entityNodes,Ce.getState().setEntityNodes,{x:f.x,y:f.y},120,100)},mu.getInstance().onRefreshDone=()=>{Ce.getState().isStale&&Ce.getState().setIsStale(!1)}});const c=f=>{br.getState().logEvent("TAB_CHANGE",{tab:f}),i(f)};return b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",flexGrow:1,height:"80%"},children:[t.children,b.jsxDEV(ple,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:95,columnNumber:9},this),b.jsxDEV("div",{className:"flex flex-col",style:{position:"relative"},children:[b.jsxDEV("div",{style:{width:"50vw",height:"100%",background:"#F3F4F6",borderLeft:"1px solid #DDDDDF",borderBottom:"1px solid #DDDDDF"},ref:l,children:[r==="entities"&&b.jsxDEV(Ry,{children:b.jsxDEV(Lce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:98,columnNumber:63},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:98,columnNumber:44},this),r==="locations"&&b.jsxDEV(Ry,{children:b.jsxDEV(Fce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:99,columnNumber:64},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:99,columnNumber:45},this),b.jsxDEV(qN,{keyboardActivation:"manual",onSelectionChange:c,selectedKey:r,color:"primary",variant:"bordered",style:{position:"absolute",left:"50%",top:10,transform:"translate(-50%, 0)"},classNames:{tabList:"bg-white"},children:[b.jsxDEV(du,{title:b.jsxDEV("span",{style:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:15},children:[b.jsxDEV(oae,{style:{marginRight:3,fontSize:22}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:101,columnNumber:136},this)," Entities & Actions"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:101,columnNumber:44},this)},"entities",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:101,columnNumber:15},this),b.jsxDEV(du,{title:b.jsxDEV("span",{style:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:15},children:[b.jsxDEV(sae,{style:{marginRight:3,fontSize:18}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:102,columnNumber:137},this)," Locations"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:102,columnNumber:45},this)},"locations",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:102,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:100,columnNumber:13},this),!s&&b.jsxDEV(et,{style:{position:"absolute",right:10,top:10,fontSize:18},isIconOnly:!0,onClick:f=>{console.log(Ce.getState().entityNodes),Pi.stopAllSimulations(),Ce.getState().setActionEdges([]),Ce.getState().setLocationNodes([]),Ce.getState().setEntityNodes([]),Ce.getState().setFilteredActionsSegment(null,null),Ce.getState().setHighlightedActionsSegment(null,null),mu.getInstance().reset()},children:b.jsxDEV(hce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:115,columnNumber:16},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:105,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:97,columnNumber:11},this),b.jsxDEV(Ry,{children:b.jsxDEV(Vce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:117,columnNumber:30},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:117,columnNumber:11},this),!s&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:5,position:"absolute",left:0,top:"50%",transform:"translate(-50%, -50%)",fontSize:22},children:[b.jsxDEV(so,{content:"Refresh from text",closeDelay:0,children:b.jsxDEV(et,{style:{fontSize:22},color:a?"primary":"default",isLoading:e,isIconOnly:!0,radius:"full",onClick:()=>{const f={x:l.current.clientWidth/2,y:l.current.clientHeight/2},h=()=>{mu.getInstance().refreshFromText(Ce.getState().text,()=>{},()=>{n(!1)})};n(!0);const m=uHe(Ce.getState().text,f),p=dHe(Ce.getState().text,f);let v=new Promise((y,x)=>{y()});Ce.getState().locationNodes.length===0&&Ce.getState().entityNodes.length===0&&(v=Promise.all([m,p])),Ce.getState().locationNodes.length===0&&(v=p),Ce.getState().entityNodes.length===0&&(v=m),v.then(y=>{h()})},children:b.jsxDEV(THe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:150,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:120,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:119,columnNumber:13},this),b.jsxDEV(so,{placement:"bottom",content:"Write from visual",closeDelay:0,children:b.jsxDEV(et,{style:{fontSize:22},isLoading:e,isIconOnly:!0,radius:"full",onClick:()=>{new DHe().execute()},children:b.jsxDEV(CHe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:160,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:155,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:154,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:118,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:96,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:93,columnNumber:7},this),!s&&b.jsxDEV(sKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:167,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/VisualWritingInterface.tsx",lineNumber:92,columnNumber:5},this)}function xKe(t){return b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"rgb(242, 238, 240)"},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",flexGrow:1,height:"80%",alignItems:"center",justifyContent:"center"},children:[t.children,b.jsxDEV(ple,{overlayOnHover:!1},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/ReadingInterface.tsx",lineNumber:12,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/ReadingInterface.tsx",lineNumber:10,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/ReadingInterface.tsx",lineNumber:9,columnNumber:5},this)}const SKe="/VisualStoryWriting/videos/Reading.mp4",EKe=`Julia sat at a small table outside the caf stirring her coffee absentmindedly. The young waitress clumsily cleared the table next to her, making her remember when she was the young ambitious waitress who just moved to the big city. She wondered where this young waitress came from and what the gossip amongst the staff of this caf was.
Sams alarm blared at full volume through her phone speakers. As she reached her arm out to press snooze for the third time, she suddenly remembered. The pounding of her heart grew louder and louder as she peeked at her phone  10:05.
Oh no, she muttered as she scrambled out of bed. She had set 5 alarms and yet, she was still in bed.
"omw!" She texted Julia, feeling a pang of guilt.
 
CLANG
The waiter apologized as she bumped into Julia.
Um, is there anything I can get for you?
Its ok. Im good, thanks, Julia said before giving a polite smile. Her phone buzzed with a message from Sam which read exactly what she expected.
 
Sam ran to the bathroom, cursing herself for never being able to wake up to her alarms. Her hair was a mess but there was no time to do anything about it. She grabbed her bag from her room then sprinted through the streets. Guilt gnawing at her conscience, she hoped she wouldnt be too too late.
 
Would you like another cup of coffee? The waiter asked, pointing to the cup. The table next to Julia had cleared once again.
Julia thought for a second before nodding. Sure.
She pulled out her phone, looking at Sams text from 30 minutes ago.
 
At 10:55, Julia sighed and took a sip of her second cup of lukewarm coffee. She could picture Sam running out her door, hair all over, panicking while checking the time. Julia tried not to be annoyed but this was not the first time. Or the second. She leaned back in her chair, debating whether to order breakfast alone or wait a little longer. Across the street, Sam sees Julia sitting at the front of the caf.`,NKe={locations:[{name:"Caf",emoji:""},{name:"Sam's Bedroom",emoji:""},{name:"Sam's Bathroom",emoji:""},{name:"Street",emoji:""}],entities:[{name:"Julia",emoji:"",properties:[{name:"patient",value:7},{name:"nostalgic",value:6},{name:"polite",value:8}]},{name:"Sam",emoji:"",properties:[{name:"forgetful",value:8},{name:"rushed",value:9},{name:"guilty",value:7}]},{name:"Waitress",emoji:"",properties:[{name:"clumsy",value:6},{name:"young",value:5}]},{name:"Bag",emoji:"",properties:[{name:"heavy",value:5},{name:"forgotten",value:6}]},{name:"Alarm",emoji:"",properties:[{name:"loud",value:9},{name:"ignored",value:8}]}],actions:[{name:"sat",source:"Julia",target:"Julia",location:"Caf",passage:"Julia sat at a small table outside the caf stirring her coffee absentmindedly."},{name:"stirring coffee",source:"Julia",target:"Julia",location:"Caf",passage:"Julia sat at a small table outside the caf stirring her coffee absentmindedly."},{name:"cleared table",source:"Waitress",target:"Waitress",location:"Caf",passage:"The young waitress clumsily cleared the table next to her, making her remember when she was the young ambitious waitress who just moved to the big city."},{name:"blared",source:"Alarm",target:"Sam",location:"unknown",passage:"Sams alarm blared at full volume through her phone speakers."},{name:"reached out",source:"Sam",target:"Alarm",location:"unknown",passage:"As she reached her arm out to press snooze for the third time, she suddenly remembered."},{name:"press snooze",source:"Sam",target:"Alarm",location:"unknown",passage:"As she reached her arm out to press snooze for the third time, she suddenly remembered."},{name:"peeked at phone",source:"Sam",target:"Phone",location:"unknown",passage:"The pounding of her heart grew louder and louder as she peeked at her phone  10:05."},{name:"muttered",source:"Sam",target:"Sam",location:"unknown",passage:"Oh no, she muttered as she scrambled out of bed."},{name:"scrambled out",source:"Sam",target:"Sam",location:"unknown",passage:"Oh no, she muttered as she scrambled out of bed."},{name:"set alarms",source:"Sam",target:"Alarm",location:"unknown",passage:`She had set 5 alarms and yet, she was still in bed.
omw!`},{name:"be in bed",source:"Sam",target:"Sam",location:"unknown",passage:`She had set 5 alarms and yet, she was still in bed.
omw!`},{name:"texted",source:"Sam",target:"Julia",location:"unknown",passage:"She texted Julia, feeling a pang of guilt."},{name:"bumped into",source:"Waitress",target:"Julia",location:"Caf",passage:`CLANG
The waiter apologized as she bumped into Julia.`},{name:"apologized",source:"Waitress",target:"Julia",location:"Caf",passage:`CLANG
The waiter apologized as she bumped into Julia.`},{name:"said",source:"Julia",target:"Waitress",location:"Caf",passage:"Im good, thanks, Julia said before giving a polite smile."},{name:"smile",source:"Julia",target:"Waitress",location:"Caf",passage:"Im good, thanks, Julia said before giving a polite smile."},{name:"buzzed",source:"Phone",target:"Sam",location:"unknown",passage:"Her phone buzzed with a message from Sam which read exactly what she expected."},{name:"ran",source:"Sam",target:"Sam",location:"Sam's Bathroom",passage:"Sam ran to the bathroom, cursing herself for never being able to wake up to her alarms."},{name:"cursing",source:"Sam",target:"Sam",location:"Sam's Bathroom",passage:"Sam ran to the bathroom, cursing herself for never being able to wake up to her alarms."},{name:"grabbed",source:"Sam",target:"Bag",location:"Sam's Bedroom",passage:"She grabbed her bag from her room then sprinted through the streets."},{name:"sprinted through streets",source:"Sam",target:"Sam",location:"Street",passage:"She grabbed her bag from her room then sprinted through the streets."},{name:"ask for coffee",source:"Waitress",target:"Julia",location:"Caf",passage:" The waiter asked, pointing to the cup."},{name:"point to cup",source:"Waitress",target:"Julia",location:"Caf",passage:" The waiter asked, pointing to the cup."},{name:"clear table",source:"Waitress",target:"Waitress",location:"Caf",passage:"The table next to Julia had cleared once again."},{name:"think",source:"Julia",target:"Julia",location:"Caf",passage:"Julia thought for a second before nodding. Sure."},{name:"nod",source:"Julia",target:"Waitress",location:"Caf",passage:"Julia thought for a second before nodding. Sure."},{name:"pulled out",source:"Julia",target:"Phone",location:"Caf",passage:`
She pulled out her phone, looking at Sams text from 30 minutes ago.`},{name:"looking at",source:"Julia",target:"Text",location:"Caf",passage:`
She pulled out her phone, looking at Sams text from 30 minutes ago.`},{name:"sighed",source:"Julia",target:"Julia",location:"Caf",passage:"At 10:55, Julia sighed and took a sip of her second cup of lukewarm coffee."},{name:"took a sip",source:"Julia",target:"Julia",location:"Caf",passage:"At 10:55, Julia sighed and took a sip of her second cup of lukewarm coffee."},{name:"picture running",source:"Julia",target:"Sam",location:"Caf",passage:"She could picture Sam running out her door, hair all over, panicking while checking the time."},{name:"picture panicking",source:"Julia",target:"Sam",location:"Caf",passage:"She could picture Sam running out her door, hair all over, panicking while checking the time."},{name:"picture checking",source:"Julia",target:"Sam",location:"Caf",passage:"She could picture Sam running out her door, hair all over, panicking while checking the time."},{name:"tried not to be annoyed",source:"Julia",target:"Julia",location:"Caf",passage:"Julia tried not to be annoyed but this was not the first time. Or the second."},{name:"leaned back",source:"Julia",target:"Julia",location:"Caf",passage:"She leaned back in her chair, debating whether to order breakfast alone or wait a little longer."},{name:"debating",source:"Julia",target:"Julia",location:"Caf",passage:"She leaned back in her chair, debating whether to order breakfast alone or wait a little longer."},{name:"sees Julia",source:"Sam",target:"Julia",location:"Caf",passage:"Across the street, Sam sees Julia sitting at the front of the caf."}]},_Ke=`The reflection of the half moon danced on the rough waters of the Gulf of Mexico. Waves crashed against the rocky shore of Laguna Madre causing an ominous tower of white foam to rain down in a striking demonstration of the battle between sea and space. High tides had already swallowed the entirety of South Padre Island as a result of the exceptional gravitational pull of the black hole. Most had fled further inland in the forlorn hope of surviving the certain end of the world. But Mona and her father, Joseph, opted to surrender to the inevitable, and if time was kind, catch one final sunrise. 
        Mona developed her love of the sea from her dad, who was an oceanographer. They had spent many days exploring the coast and the Gulf of Mexico. She loved to discover starfish in tide pools and chase crabs in the sand. She loved the shapes kelp makes on the sand as they are washed up by the waves. Most of all, she loved to sit in the shallow waters of the ocean with Joseph. It always brought her great comfort to feel the warmth of the sun on her tanned shoulders and the sea spray lightly beat her feet and legs. Sadly, Parkinsons disease had robbed Joseph of his mobility and much of his voice. Mona, who cared for her father, wheeled him out each morning and evening to watch the sun rise and set over their beloved sea. 
        Their final sunset together had been tragic, yet awe-inspiring. The black hole did not swallow the sun in one gulp. Rather, the pull of the monster sucked in the matter of the star slowly. In the late afternoon, the outer edge of the sun bulged and looked like it might burst. By the time the sun set beneath the horizon, the matter sucked into the black hole formed a glowing, swirled tail glittering with stardust. A barrage of solar radiation destroyed the power grid. Twilight turned to a surreally dark night. With only the dimming light of the moon, Mona and Joseph were captivated by the millions of stars that shimmered in the most extraordinary night sky. The majestic spiral of the Milky Way shone brighter than they could have ever imagined. 
        The brilliance of the stars increased and the luster of the moon decreased as the intensity of the waves swelled. In an instant, the remaining moonlight was snuffed like a candle.
        Mona squeezed her fathers hand. She gulped back tears. "I guess well miss the sunrise." Joseph nodded solemnly. 
        They sat quietly for some time. Mona focused on being present and tried to preserve every sensation she could: the roar of the waves, the coolness of the breeze on her face, the pungent smell of seaweed, the roughness of her fathers hand. 
        "Lets go," Joseph struggled to say. His hand trembled as he pointed to the water.
        "You wanna move closer?"
        He nodded. "Sit in the ocean."
        Mona smiled. "Of course." 
        Mona wheeled Joseph over the bumpy terrain to the shore. She helped lower him to the ground and removed his shoes and socks. He closed his eyes and wiggled his toes in the wet sand as the choppy waters enveloped his legs. Mona sat down next to him and rested her head on his shoulder. She could feel his tremor as he put his arm around her. The briny water burned her eyes, and she savored the taste of salt on her lips.
        The sun should have been rising. Instead, a bright disc of fire and cosmic particles peeked over the horizon in an eerie glow. Mona squinted at the shocking brightness. Joseph scooted into the water, turned around, and reached out his hands to Mona. She grabbed her dads hand and met his eyes. In his eye she could see the silhouette against the blazing remnants of the sun circling the black hole. As she lowered them both into the water, she recalled by the memory of his smiling face from the thousands of times they had swum in those very waters together.
        "MONA? It's time to go back, you guys are going to catch a cold if you stay out there," her mother yelled from the car. 
        Mona looked to Joseph who was still entranced by the ocean and sunset.
       "Just a few more moments..."
















`,CKe={entities:[{name:"Moon",emoji:"",properties:[{name:"reflective",value:8},{name:"waning",value:7},{name:"serene",value:6}]},{name:"Black Hole",emoji:"",properties:[{name:"powerful",value:10},{name:"ominous",value:9},{name:"mysterious",value:10}]},{name:"Waves",emoji:"",properties:[{name:"crashing",value:9},{name:"relentless",value:8},{name:"rhythmic",value:7}]},{name:"Mona's Mother",emoji:"",properties:[{name:"concerned",value:8},{name:"protective",value:9},{name:"practical",value:7}]},{name:"Sun",emoji:"",properties:[{name:"brilliant",value:10},{name:"vital",value:9},{name:"diminishing",value:7}]},{name:"Mona",emoji:"",properties:[{name:"caring",value:9},{name:"adventurous",value:8},{name:"sentimental",value:7}]},{name:"Joseph",emoji:"",properties:[{name:"knowledgeable",value:9},{name:"affectionate",value:8},{name:"frail",value:6}]}],locations:[{name:"Gulf of Mexico",emoji:""},{name:"Laguna Madre",emoji:""},{name:"The Shore",emoji:""},{name:"The Ocean",emoji:""},{name:"The Car",emoji:""}],actions:[{name:"dance",source:"Moon",target:"Waves",location:"Gulf of Mexico",passage:"The reflection of the half moon danced on the rough waters of the Gulf of Mexico."},{name:"crashed against",source:"Waves",target:"Laguna Madre",location:"The Shore",passage:"Waves crashed against the rocky shore of Laguna Madre causing an ominous tower of white foam to rain down in a striking demonstration of the battle between sea and space."},{name:"swallowed",source:"High tides",target:"High tides",location:"South Padre Island",passage:"High tides had already swallowed the entirety of South Padre Island as a result of the exceptional gravitational pull of the black hole."},{name:"opted to surrender",source:"Mona",target:"Mona",location:"unknown",passage:"But Mona and her father, Joseph, opted to surrender to the inevitable, and if time was kind, catch one final sunrise."},{name:"opted to surrender",source:"Joseph",target:"Joseph",location:"unknown",passage:"But Mona and her father, Joseph, opted to surrender to the inevitable, and if time was kind, catch one final sunrise."},{name:"catch sunrise",source:"Mona",target:"Sun",location:"unknown",passage:"But Mona and her father, Joseph, opted to surrender to the inevitable, and if time was kind, catch one final sunrise."},{name:"catch sunrise",source:"Joseph",target:"Sun",location:"unknown",passage:"But Mona and her father, Joseph, opted to surrender to the inevitable, and if time was kind, catch one final sunrise."},{name:"developed love",source:"Mona",target:"Mona",location:"unknown",passage:"Mona developed her love of the sea from her dad, who was an oceanographer."},{name:"explore coast",source:"Mona",target:"Mona",location:"Gulf of Mexico",passage:"They had spent many days exploring the coast and the Gulf of Mexico."},{name:"explore coast",source:"Joseph",target:"Joseph",location:"Gulf of Mexico",passage:"They had spent many days exploring the coast and the Gulf of Mexico."},{name:"discover starfish",source:"Mona",target:"Mona",location:"Gulf of Mexico",passage:"She loved to discover starfish in tide pools and chase crabs in the sand."},{name:"chase crabs",source:"Mona",target:"Mona",location:"Gulf of Mexico",passage:"She loved to discover starfish in tide pools and chase crabs in the sand."},{name:"sit",source:"Mona",target:"Mona",location:"The Ocean",passage:"Most of all, she loved to sit in the shallow waters of the ocean with Joseph."},{name:"sit",source:"Joseph",target:"Joseph",location:"The Ocean",passage:"Most of all, she loved to sit in the shallow waters of the ocean with Joseph."},{name:"feel warmth",source:"Mona",target:"Sun",location:"The Ocean",passage:"It always brought her great comfort to feel the warmth of the sun on her tanned shoulders and the sea spray lightly beat her feet and legs."},{name:"wheel out",source:"Mona",target:"Joseph",location:"unknown",passage:"Mona, who cared for her father, wheeled him out each morning and evening to watch the sun rise and set over their beloved sea."},{name:"watch",source:"Mona",target:"Sun",location:"unknown",passage:"Mona, who cared for her father, wheeled him out each morning and evening to watch the sun rise and set over their beloved sea."},{name:"watch",source:"Joseph",target:"Sun",location:"unknown",passage:"Mona, who cared for her father, wheeled him out each morning and evening to watch the sun rise and set over their beloved sea."},{name:"sucked in",source:"Black Hole",target:"Sun",location:"unknown",passage:"Rather, the pull of the monster sucked in the matter of the star slowly."},{name:"set beneath",source:"Sun",target:"Sun",location:"unknown",passage:"By the time the sun set beneath the horizon, the matter sucked into the black hole formed a glowing, swirled tail glittering with stardust."},{name:"sucked in",source:"Black Hole",target:"Black Hole",location:"unknown",passage:"By the time the sun set beneath the horizon, the matter sucked into the black hole formed a glowing, swirled tail glittering with stardust."},{name:"captivated",source:"Mona",target:"Mona",location:"unknown",passage:"With only the dimming light of the moon, Mona and Joseph were captivated by the millions of stars that shimmered in the most extraordinary night sky."},{name:"captivated",source:"Joseph",target:"Joseph",location:"unknown",passage:"With only the dimming light of the moon, Mona and Joseph were captivated by the millions of stars that shimmered in the most extraordinary night sky."},{name:"squeezed hand",source:"Mona",target:"Joseph",location:"unknown",passage:"Mona squeezed her fathers hand."},{name:"gulped back",source:"Mona",target:"Mona",location:"unknown",passage:"She gulped back tears."},{name:"nodded solemnly",source:"Joseph",target:"Joseph",location:"unknown",passage:"Joseph nodded solemnly."},{name:"sat quietly",passage:"They sat quietly for some time.",location:"unknown",source:"Mona",target:"Mona"},{name:"sat quietly",passage:"They sat quietly for some time.",location:"unknown",source:"Joseph",target:"Joseph"},{name:"focused on",source:"Mona",target:"Mona",location:"unknown",passage:"Mona focused on being present and tried to preserve every sensation she could: the roar of the waves, the coolness of the breeze on her face, the pungent smell of seaweed, the roughness of her fathers hand."},{name:"tried to preserve",source:"Mona",target:"Mona",location:"unknown",passage:"Mona focused on being present and tried to preserve every sensation she could: the roar of the waves, the coolness of the breeze on her face, the pungent smell of seaweed, the roughness of her fathers hand."},{name:"struggled to say",source:"Joseph",target:"Mona",location:"unknown",passage:'"Lets go," Joseph struggled to say.'},{name:"hand trembled",source:"Joseph",target:"Joseph",location:"unknown",passage:"His hand trembled as he pointed to the water."},{name:"pointed",source:"Joseph",target:"Joseph",location:"unknown",passage:"His hand trembled as he pointed to the water."},{name:"nodded",source:"Joseph",target:"Joseph",location:"unknown",passage:"He nodded."},{name:"smile",source:"Mona",target:"Mona",location:"unknown",passage:"Mona smiled."},{name:"wheel over",source:"Mona",target:"Joseph",location:"The Shore",passage:"Mona wheeled Joseph over the bumpy terrain to the shore."},{name:"helped lower",source:"Mona",target:"Joseph",location:"The Shore",passage:"She helped lower him to the ground and removed his shoes and socks."},{name:"removed shoes",source:"Mona",target:"Joseph",location:"The Shore",passage:"She helped lower him to the ground and removed his shoes and socks."},{name:"removed socks",source:"Mona",target:"Joseph",location:"The Shore",passage:"She helped lower him to the ground and removed his shoes and socks."},{name:"closed eyes",source:"Joseph",target:"Joseph",location:"The Shore",passage:"He closed his eyes and wiggled his toes in the wet sand as the choppy waters enveloped his legs."},{name:"wiggled toes",source:"Joseph",target:"Joseph",location:"The Shore",passage:"He closed his eyes and wiggled his toes in the wet sand as the choppy waters enveloped his legs."},{name:"enveloped legs",source:"Waves",target:"Joseph",location:"The Shore",passage:"He closed his eyes and wiggled his toes in the wet sand as the choppy waters enveloped his legs."},{name:"sat down",source:"Mona",target:"Mona",location:"The Shore",passage:"Mona sat down next to him and rested her head on his shoulder."},{name:"rested head",source:"Mona",target:"Joseph",location:"The Shore",passage:"Mona sat down next to him and rested her head on his shoulder."},{name:"feel tremor",source:"Mona",target:"Joseph",location:"The Shore",passage:"She could feel his tremor as he put his arm around her."},{name:"put arm",source:"Joseph",target:"Mona",location:"The Shore",passage:"She could feel his tremor as he put his arm around her."},{name:"burned",source:"briny water",target:"Mona",location:"unknown",passage:"The briny water burned her eyes, and she savored the taste of salt on her lips."},{name:"savored",source:"Mona",target:"Mona",location:"unknown",passage:"The briny water burned her eyes, and she savored the taste of salt on her lips."},{name:"squinted",source:"Mona",target:"Mona",location:"unknown",passage:"Mona squinted at the shocking brightness."},{name:"scooted into",source:"Joseph",target:"Joseph",location:"The Ocean",passage:"Joseph scooted into the water, turned around, and reached out his hands to Mona."},{name:"turned around",source:"Joseph",target:"Joseph",location:"The Ocean",passage:"Joseph scooted into the water, turned around, and reached out his hands to Mona."},{name:"reached out",source:"Joseph",target:"Mona",location:"The Ocean",passage:"Joseph scooted into the water, turned around, and reached out his hands to Mona."},{name:"grabbed hand",source:"Mona",target:"Joseph",location:"The Ocean",passage:"She grabbed her dads hand and met his eyes."},{name:"met eyes",source:"Mona",target:"Joseph",location:"The Ocean",passage:"She grabbed her dads hand and met his eyes."},{name:"see silhouette",source:"Mona",target:"Sun",location:"unknown",passage:"In his eye she could see the silhouette against the blazing remnants of the sun circling the black hole."},{name:"lower into water",source:"Mona",target:"Mona",location:"The Ocean",passage:"As she lowered them both into the water, she recalled by the memory of his smiling face from the thousands of times they had swum in those very waters together."},{name:"yelled from",source:"Mona's Mother",target:"Mona",location:"The Car",passage:`It's time to go back, you guys are going to catch a cold if you stay out there," her mother yelled from the car.`},{name:"looked",source:"Mona",target:"Joseph",location:"The Shore",passage:"Mona looked to Joseph who was still entranced by the ocean and sunset."}]},TKe=`        Little Angie never slept at night. Her parents worried. "Insomnia," the doctors said. "Is she anxious?" they asked.
        Anxious?  Can anyone imagine anyone less anxious than Angie? She was all giggles and sunburns. Her days were full of coloring books and earthworms. Shed hum songs to her cat or curl up on her moms lap and read fairy stories for hours.
        Shed yawn at the breakfast table, and her snoozy eyes would droop while she lay in the field looking at clouds in the late afternoon sun, but she would never sleep. 
        "It is just a phase," said the doctors. "Shell outgrow it."
        "But she wakes up with leaves in her hair," her mother said with a furrowed brow.
        "And mud in her sheets," her father bemoaned. 
        "Angie, you must not wander at night," both parents would demand.
        They locked her door and worried.
        Angie loved her parents and wanted to be a good girl. But Angie could not sleep because she had a beautiful secret.
        After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep." Shed smile at them cheerfully and say, "Goodnight!" Then, as soon as her mom closed her bedroom door with a click, shed spring to her window and wait for Midnight Lightning to appear.
        Midnight Lightning came every night. Angie would gleefully watch him approach from her bedroom window. First, hed appear as a brilliant, speeding blur on the distant horizon where the forest met the low field. Then, shed hear the thundering gallops of his hoofs hitting the ground with vibrant force. Shed see the moonlight reflecting an iridescent shimmer on his shining black coat.
        Every night, he would come to Angies window, gently whinnying, calling her to join him on their magical, secret, nightly adventures. Shed open her window. Barefoot in her nightgown, shed climb down the trellis to where he waited, swishing his long, jet-black tail. Hed joyfully huff when she joined him, then lower his head and gently rub his velvet-soft muzzle on Angies cheek. Shed take in a deep breath of his good, pure horsey scent and kiss his nose. Then, shed climb up on the haystack (which she kept under her window for this exact purpose) and throw a leg over Midnight Lightnings tall back. Shed link her fingers through his strong, silky mane. Angie and the magical horse would become one. 
        Hed take off with a wild gallop, and shed fluidly follow his every movement. Soon, theyd be racing through the fields, watching as fireflies sprung up all around them, dancing alongside them in the moonlight. Theyd stride through starlit forests, listening to the cicadas and crickets sing and would join in their song. Theyd splash through clear streams, relishing the bright, cool of the mountain-fed waters.
        Sometimes theyd visit the wise old owls of the woods. "Too-who?" the owls would ask, turning their large eyes to gaze at the pair. Midnight Lightning neighed a response that only he and the other enchanted animals could understand. 
        Sometimes, theyd dash to the summits of distant mountains, looking down on the moonlit vista of the villages beneath them. Angie would point to her own little home below.
        Sometimes, theyd explore hidden caves, luminous with glowworms. Theyd trot through the dark caverns and admire the crystals that shone brilliantly in the bioluminescent light.
        Midnight Lightning always had precious secret places to share with Angie. Every night was new. She was never sure where Midnight Lightning might lead her, but she always knew she was safe and loved.
        When the first hint of dawn began to break in the east, Midnight Lightning would return Angie to her bedroom window. Shed unlace her fingers from his mane and slide off his strong back. Shed kiss his downy nose. With windblown hair and muddy toes, shed climb back into her bedroom. Smiling, shed slip under her covers and close her eyes as she listened to Midnight Lightning galloping away while the first gleams of morning light shone through her window.

















`,DKe={entities:[{name:"Angie's Door",emoji:"",properties:[{name:"locked",value:8},{name:"secure",value:9},{name:"protective",value:8}]},{name:"Angie's Dad",emoji:"",properties:[{name:"concerned",value:8},{name:"loving",value:9},{name:"protective",value:8}]},{name:"Angie's Mom",emoji:"",properties:[{name:"concerned",value:8},{name:"loving",value:9},{name:"protective",value:8}]},{name:"Doctors",emoji:"",properties:[{name:"concerned",value:8},{name:"professional",value:9},{name:"knowledgeable",value:8}]},{name:"Midnight Lightning",emoji:"",properties:[{name:"magical",value:10},{name:"swift",value:10},{name:"loyal",value:9}]},{name:"Angie",emoji:"",properties:[{name:"cheerful",value:9},{name:"adventurous",value:10},{name:"imaginative",value:10}]},{name:"the Wise Old Owls",emoji:"",properties:[{name:"wise",value:9},{name:"curious",value:7},{name:"mysterious",value:8}]}],locations:[{name:"Fields",emoji:""},{name:"Starlit Forests",emoji:""},{name:"Clear Streams",emoji:""},{name:"Wise Old Owls' Woods",emoji:""},{name:"Distant Mountain Summits",emoji:""},{name:"Hidden Caves",emoji:""},{name:"Breakfast Table",emoji:""},{name:"Angie's Bedroom",emoji:""}],actions:[{name:"never slept",source:"Angie",target:"Angie",location:"unknown",passage:"Little Angie never slept at night."},{name:"worried",source:"Angie's Mom",target:"Angie's Mom",location:"unknown",passage:"Her parents worried."},{name:"worried",source:"Angie's Dad",target:"Angie's Dad",location:"unknown",passage:"Her parents worried."},{name:"said",source:"Doctors",target:"Angie's Mom",location:"unknown",passage:'"Insomnia," the doctors said.'},{name:"said",source:"Doctors",target:"Angie's Dad",location:"unknown",passage:'"Insomnia," the doctors said.'},{name:"coloring",source:"Angie",target:"Angie",location:"unknown",passage:"Her days were full of coloring books and earthworms."},{name:"hum songs",source:"Angie",target:"Angie",location:"unknown",passage:"Shed hum songs to her cat or curl up on her moms lap and read fairy stories for hours."},{name:"curl up",source:"Angie",target:"Angie's Mom",location:"unknown",passage:"Shed hum songs to her cat or curl up on her moms lap and read fairy stories for hours."},{name:"read stories",source:"Angie",target:"Angie",location:"unknown",passage:"Shed hum songs to her cat or curl up on her moms lap and read fairy stories for hours."},{name:"yawn",source:"Angie",target:"Angie",location:"Breakfast Table",passage:"Shed yawn at the breakfast table, and her snoozy eyes would droop while she lay in the field looking at clouds in the late afternoon sun, but she would never sleep."},{name:"droop",source:"Angie",target:"Angie",location:"Fields",passage:"Shed yawn at the breakfast table, and her snoozy eyes would droop while she lay in the field looking at clouds in the late afternoon sun, but she would never sleep."},{name:"lay",source:"Angie",target:"Angie",location:"Fields",passage:"Shed yawn at the breakfast table, and her snoozy eyes would droop while she lay in the field looking at clouds in the late afternoon sun, but she would never sleep."},{name:"said ",source:"Doctors",target:"Angie's Dad",location:"unknown",passage:'"It is just a phase," said the doctors.'},{name:"said ",source:"Doctors",target:"Angie's Mom",location:"unknown",passage:'"It is just a phase," said the doctors.'},{name:"said",source:"Angie's Mom",target:"Doctors",location:"unknown",passage:'"But she wakes up with leaves in her hair," her mother said with a furrowed brow.'},{name:"bemoaned",source:"Angie's Dad",target:"Doctors",location:"unknown",passage:'"And mud in her sheets," her father bemoaned.'},{name:"demand",source:"Angie's Mom",target:"Angie",location:"Angie's Bedroom",passage:'"Angie, you must not wander at night," both parents would demand.'},{name:"demand",source:"Angie's Dad",target:"Angie",location:"Angie's Bedroom",passage:'"Angie, you must not wander at night," both parents would demand.'},{name:"lock door",source:"Angie's Mom",target:"Angie's Door",location:"Angie's Bedroom",passage:"They locked her door and worried."},{name:"lock door",source:"Angie's Dad",target:"Angie's Door",location:"Angie's Bedroom",passage:"They locked her door and worried."},{name:"worried ",source:"Angie's Dad",target:"Angie's Dad",location:"Angie's Bedroom",passage:"They locked her door and worried."},{name:"worried ",source:"Angie's Mom",target:"Angie's Mom",location:"Angie's Bedroom",passage:"They locked her door and worried."},{name:"loved",source:"Angie",target:"Angie's Mom",location:"unknown",passage:"Angie loved her parents and wanted to be a good girl."},{name:"take bath",source:"Angie",target:"Angie",location:"unknown",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"wash knees",source:"Angie",target:"Angie",location:"unknown",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"untangle hair",source:"Angie",target:"Angie",location:"unknown",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"tuck in",source:"Angie's Mom",target:"Angie",location:"Angie's Bedroom",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"tuck in",source:"Angie's Dad",target:"Angie",location:"Angie's Bedroom",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"kiss good night",source:"Angie's Mom",target:"Angie",location:"Angie's Bedroom",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"kiss good night",source:"Angie's Dad",target:"Angie",location:"Angie's Bedroom",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"remind to stay",source:"Angie's Mom",target:"Angie",location:"Angie's Bedroom",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"remind to stay",source:"Angie's Dad",target:"Angie",location:"Angie's Bedroom",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"remind to sleep",source:"Angie's Mom",target:"Angie",location:"Angie's Bedroom",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"remind to sleep",source:"Angie's Dad",target:"Angie",location:"Angie's Bedroom",passage:'After Angie took her bath, washed all the dirt off of her scabby knees, and untangled all the straw and twigs from her curly hair, her mom and dad would come into her room, tuck her in, kiss her good night, and remind her to "stay in bed" and "try to sleep.'},{name:"close door",source:"Angie's Mom",target:"Angie's Door",location:"Angie's Bedroom",passage:'" Then, as soon as her mom closed her bedroom door with a click, shed spring to her window and wait for Midnight Lightning to appear.'},{name:"spring to window",source:"Angie",target:"Angie",location:"Angie's Bedroom",passage:'" Then, as soon as her mom closed her bedroom door with a click, shed spring to her window and wait for Midnight Lightning to appear.'},{name:"wait for",source:"Angie",target:"Midnight Lightning",location:"Angie's Bedroom",passage:'" Then, as soon as her mom closed her bedroom door with a click, shed spring to her window and wait for Midnight Lightning to appear.'},{name:"watch approach",source:"Angie",target:"Midnight Lightning",location:"Angie's Bedroom",passage:"Angie would gleefully watch him approach from her bedroom window."},{name:"appear",source:"Midnight Lightning",target:"Angie",location:"unknown",passage:"First, hed appear as a brilliant, speeding blur on the distant horizon where the forest met the low field."},{name:"hear gallops",source:"Angie",target:"Midnight Lightning",location:"Angie's Bedroom",passage:"Then, shed hear the thundering gallops of his hoofs hitting the ground with vibrant force."},{name:"reflecting",source:"The Moonlight",target:"Midnight Lightning",location:"unknown",passage:"Shed see the moonlight reflecting an iridescent shimmer on his shining black coat."},{name:"come to window",source:"Midnight Lightning",target:"Angie",location:"Angie's Bedroom",passage:"Every night, he would come to Angies window, gently whinnying, calling her to join him on their magical, secret, nightly adventures."},{name:"whinnying",source:"Midnight Lightning",target:"Angie",location:"Angie's Bedroom",passage:"Every night, he would come to Angies window, gently whinnying, calling her to join him on their magical, secret, nightly adventures."},{name:"calling her",source:"Midnight Lightning",target:"Angie",location:"Angie's Bedroom",passage:"Every night, he would come to Angies window, gently whinnying, calling her to join him on their magical, secret, nightly adventures."},{name:"open window",source:"Angie",target:"Angie",location:"Angie's Bedroom",passage:"Shed open her window."},{name:"climb down",source:"Angie",target:"Angie",location:"unknown",passage:"Barefoot in her nightgown, shed climb down the trellis to where he waited, swishing his long, jet-black tail."},{name:"waited",source:"Midnight Lightning",target:"Midnight Lightning",location:"unknown",passage:"Barefoot in her nightgown, shed climb down the trellis to where he waited, swishing his long, jet-black tail."},{name:"swishing tail",source:"Midnight Lightning",target:"Midnight Lightning",location:"unknown",passage:"Barefoot in her nightgown, shed climb down the trellis to where he waited, swishing his long, jet-black tail."},{name:"huff joyfully",source:"Midnight Lightning",target:"Midnight Lightning",location:"unknown",passage:"Hed joyfully huff when she joined him, then lower his head and gently rub his velvet-soft muzzle on Angies cheek."},{name:"lower head",source:"Midnight Lightning",target:"Midnight Lightning",location:"unknown",passage:"Hed joyfully huff when she joined him, then lower his head and gently rub his velvet-soft muzzle on Angies cheek."},{name:"rub muzzle",source:"Midnight Lightning",target:"Angie",location:"unknown",passage:"Hed joyfully huff when she joined him, then lower his head and gently rub his velvet-soft muzzle on Angies cheek."},{name:"take breath",source:"Angie",target:"Angie",location:"unknown",passage:"Shed take in a deep breath of his good, pure horsey scent and kiss his nose."},{name:"kiss nose",source:"Angie",target:"Midnight Lightning",location:"unknown",passage:"Shed take in a deep breath of his good, pure horsey scent and kiss his nose."},{name:"climb up",source:"Angie",target:"Angie",location:"unknown",passage:"Then, shed climb up on the haystack (which she kept under her window for this exact purpose) and throw a leg over Midnight Lightnings tall back."},{name:"throw leg",source:"Angie",target:"Midnight Lightning",location:"unknown",passage:"Then, shed climb up on the haystack (which she kept under her window for this exact purpose) and throw a leg over Midnight Lightnings tall back."},{name:"link fingers",source:"Angie",target:"Midnight Lightning",location:"unknown",passage:"Shed link her fingers through his strong, silky mane."},{name:"take off",source:"Midnight Lightning",target:"Midnight Lightning",location:"unknown",passage:"Hed take off with a wild gallop, and shed fluidly follow his every movement."},{name:"follow movement",source:"Angie",target:"Midnight Lightning",location:"unknown",passage:"Hed take off with a wild gallop, and shed fluidly follow his every movement."},{name:"racing",source:"Angie",target:"Midnight Lightning",location:"Fields",passage:"Soon, theyd be racing through the fields, watching as fireflies sprung up all around them, dancing alongside them in the moonlight."},{name:"watching",source:"Angie",target:"Angie",location:"Fields",passage:"Soon, theyd be racing through the fields, watching as fireflies sprung up all around them, dancing alongside them in the moonlight."},{name:"springing up",source:"The Fields",target:"The Fields",location:"Fields",passage:"Soon, theyd be racing through the fields, watching as fireflies sprung up all around them, dancing alongside them in the moonlight."},{name:"dancing",source:"The Fields",target:"The Fields",location:"Fields",passage:"Soon, theyd be racing through the fields, watching as fireflies sprung up all around them, dancing alongside them in the moonlight."},{name:"stride through",source:"Angie",target:"Angie",location:"Starlit Forests",passage:"Theyd stride through starlit forests, listening to the cicadas and crickets sing and would join in their song."},{name:"stride through",source:"Midnight Lightning",target:"Midgnight Lightning",location:"Starlit Forests",passage:"Theyd stride through starlit forests, listening to the cicadas and crickets sing and would join in their song."},{name:"listening",source:"Angie",target:"Angie",location:"Starlit Forests",passage:"Theyd stride through starlit forests, listening to the cicadas and crickets sing and would join in their song."},{name:"listening",source:"Midnight Lightning",target:"Midnight Lightning",location:"Starlit Forests",passage:"Theyd stride through starlit forests, listening to the cicadas and crickets sing and would join in their song."},{name:"splash through",source:"Angie",target:"Angie",location:"Clear Streams",passage:"Theyd splash through clear streams, relishing the bright, cool of the mountain-fed waters."},{name:"splash through",source:"Midnight Lightning",target:"Midnight Lightning",location:"Clear Streams",passage:"Theyd splash through clear streams, relishing the bright, cool of the mountain-fed waters."},{name:"relish",source:"Angie",target:"Angie",location:"Clear Streams",passage:"Theyd splash through clear streams, relishing the bright, cool of the mountain-fed waters."},{name:"relish",source:"Midnight Lightning",target:"Midnight Lightning",location:"Clear Streams",passage:"Theyd splash through clear streams, relishing the bright, cool of the mountain-fed waters."},{name:"visit",source:"Angie",target:"the Wise Old Owls",location:"Wise Old Owls' Woods",passage:"Sometimes theyd visit the wise old owls of the woods."},{name:"visit",source:"Midnight Lightning",target:"the Wise Old Owls",location:"Wise Old Owls' Woods",passage:"Sometimes theyd visit the wise old owls of the woods."},{name:"ask",source:"the Wise Old Owls",target:"Angie",location:"Wise Old Owls' Woods",passage:'"Too-who?" the owls would ask, turning their large eyes to gaze at the pair.'},{name:"ask",source:"the Wise Old Owls",target:"Midnight Lightning",location:"Wise Old Owls' Woods",passage:'"Too-who?" the owls would ask, turning their large eyes to gaze at the pair.'},{name:"gaze",source:"the Wise Old Owls",target:"Angie",location:"Wise Old Owls' Woods",passage:'"Too-who?" the owls would ask, turning their large eyes to gaze at the pair.'},{name:"gaze",source:"the Wise Old Owls",target:"Midnight Lightning",location:"Wise Old Owls' Woods",passage:'"Too-who?" the owls would ask, turning their large eyes to gaze at the pair.'},{name:"neighed response",source:"Midnight Lightning",target:"The Wise Old Owls",location:"Wise Old Owls' Woods",passage:"Midnight Lightning neighed a response that only he and the other enchanted animals could understand."},{name:"dash",source:"Angie",target:"Angie",location:"Distant Mountain Summits",passage:"Sometimes, theyd dash to the summits of distant mountains, looking down on the moonlit vista of the villages beneath them."},{name:"dash",source:"Midnight Lightning",target:"Midnight Lightning",location:"Distant Mountain Summits",passage:"Sometimes, theyd dash to the summits of distant mountains, looking down on the moonlit vista of the villages beneath them."},{name:"point",source:"Angie",target:"Angie",location:"Distant Mountain Summits",passage:"Sometimes, theyd dash to the summits of distant mountains, looking down on the moonlit vista of the villages beneath them."},{name:"explore caves",source:"Angie",target:"Angie",location:"Hidden Caves",passage:"Sometimes, theyd explore hidden caves, luminous with glowworms."},{name:"explore caves",source:"Midnight Lightning",target:"Midnight Lightning",location:"Hidden Caves",passage:"Sometimes, theyd explore hidden caves, luminous with glowworms."},{name:"trot",source:"Midnight Lightning",target:"Midnight Lightning",location:"Hidden Caves",passage:"Theyd trot through the dark caverns and admire the crystals that shone brilliantly in the bioluminescent light."},{name:"admire",source:"Angie",target:"Angie",location:"Hidden Caves",passage:"Theyd trot through the dark caverns and admire the crystals that shone brilliantly in the bioluminescent light."},{name:"admire",source:"Midnight Lightning",target:"Midnight Lightning",location:"Hidden Caves",passage:"Theyd trot through the dark caverns and admire the crystals that shone brilliantly in the bioluminescent light."},{name:"return Angie",source:"Midnight Lightning",target:"Angie",location:"Angie's Bedroom",passage:"When the first hint of dawn began to break in the east, Midnight Lightning would return Angie to her bedroom window."},{name:"unlace fingers",source:"Angie",target:"Midnight Lightning",location:"Angie's Bedroom",passage:"Shed unlace her fingers from his mane and slide off his strong back."},{name:"slide off",source:"Angie",target:"Midnight Lightning",location:"Angie's Bedroom",passage:"Shed unlace her fingers from his mane and slide off his strong back."},{name:"kiss",source:"Angie",target:"Midnight Lightning",location:"Angie's Bedroom",passage:"Shed kiss his downy nose."},{name:"climb back",source:"Angie",target:"Angie",location:"Angie's Bedroom",passage:"With windblown hair and muddy toes, shed climb back into her bedroom."},{name:"slip under",source:"Angie",target:"Angie",location:"Angie's Bedroom",passage:"Smiling, shed slip under her covers and close her eyes as she listened to Midnight Lightning galloping away while the first gleams of morning light shone through her window."},{name:"close eyes",source:"Angie",target:"Angie",location:"Angie's Bedroom",passage:"Smiling, shed slip under her covers and close her eyes as she listened to Midnight Lightning galloping away while the first gleams of morning light shone through her window."},{name:"listen to",source:"Angie",target:"Midnight Lightning",location:"Angie's Bedroom",passage:"Smiling, shed slip under her covers and close her eyes as she listened to Midnight Lightning galloping away while the first gleams of morning light shone through her window."}]};class kKe{static generateSteps(e){let n=[];n.push({condition:"NOT_A_CONDITION",task:"NOT_A_TASK",type:"MESSAGE",message:`Thank you for participating in this study. Please, first complete this survey questionnaire: <a target="_blank" href=''>Demographic survey</a>. After completing the survey, return to this page to continue the study.`});const i=[[["C1","S2","T2","F2"],["S1","F1","C2","T1"]],[["S2","F2","C2","T2"],["F1","T1","S1","C1"]],[["F2","T2","S2","C1"],["T1","C2","F1","S1"]],[["T2","C2","F2","S2"],["C1","S1","T1","F1"]],[["C2","S2","T2","F2"],["F1","T1","S1","C1"]],[["S2","F2","C2","T2"],["T1","C1","F1","S1"]],[["F2","T2","S2","C2"],["C1","S1","T1","F1"]],[["T2","C2","F2","S2"],["S1","F1","C1","T1"]],[["C2","S1","T1","F1"],["T2","C1","F2","S2"]],[["S1","F1","C1","T1"],["C2","S2","T2","F2"]],[["F1","T1","S1","C2"],["S2","F2","C1","T2"]],[["T1","C1","F1","S1"],["F2","T2","S2","C2"]],[["C1","S1","T1","F1"],["C2","S2","T2","F2"]],[["S1","F1","C1","T1"],["S2","F2","C2","T2"]],[["F1","T1","S1","C1"],["F2","T2","S2","C2"]],[["T1","C1","F1","S1"],["T2","C2","F2","S2"]]],a=i[(e-1)%i.length];for(let s=0;s<a.length;++s){const o=e%2!==s?"VISUALWRITING":"BASELINE",l=s===0?{startingState:{textState:[{children:[{text:TKe}]}]},hardcodedData:JSON.parse(JSON.stringify(DKe))}:{startingState:{textState:[{children:[{text:_Ke}]}]},hardcodedData:JSON.parse(JSON.stringify(CKe))},c=a[s];o==="VISUALWRITING"&&(n.push({type:"VIDEO",task:"NOT_A_TASK",condition:"VISUALWRITING",saveData:!1,message:SKe}),n.push({type:"TEST_TOOL",task:"NOT_A_TASK",condition:"VISUALWRITING",saveData:!1,instructions:[`Explore the tool. Make sure to test:
- Hovering over some entities to see who they interact with
- Hovering over the timeline to see the actions in chronological order
- Displaying the locations and hovering over the timeline to see the movements`],startingState:{textState:[{children:[{text:EKe}]}]},hardcodedData:JSON.parse(JSON.stringify(NKe))}),n.push({type:"MESSAGE",task:"NOT_A_TASK",condition:"NOT_A_CONDITION",saveData:!1,message:"Feel free to take a break."})),n.push({type:"TASK",task:"READING_BEFORE_PLANNING",condition:"BASELINE",saveData:!1,instructions:["Please read the text in its entirety before clicking next"],...l}),c.forEach((h,m)=>{const p=PKe[h];n.push({...p,type:"TASK",condition:o,saveData:!1,...l}),n.push({type:"MESSAGE",task:"NOT_A_TASK",condition:"NOT_A_CONDITION",saveData:!0,message:"Feel free to take a break."})}),n.push({type:"MESSAGE",task:"NOT_A_TASK",condition:"NOT_A_CONDITION",saveData:!1,message:`Please answer this questionnaire: <a href='' target="_blank">Questionnaire</a>.`})}return n.push({type:"MESSAGE",task:"NOT_A_TASK",condition:"VISUALWRITING",saveData:!0,message:"Thank you for participating in this study!"}),n}}const PKe={C1:{task:"PLANNING_CHARACTERS",instructions:["Could characters be combined without changing the outcome of the story?","How did you accomplish this task?"]},C2:{task:"PLANNING_CHARACTERS",instructions:["Is any character too passive?","How did you accomplish this task?"]},S1:{task:"PLANNING_SPACE",instructions:["Are there any locations which could be removed?","How did you accomplish this task?"]},S2:{task:"PLANNING_SPACE",instructions:["Are there moments where the spatial logic is broken or unclear?","How did you accomplish this task?"]},T1:{task:"PLANNING_TEMPORALITY",instructions:["Is there a large gap between two actions that make the story progress (lull moment)?","How did you accomplish this task?"]},T2:{task:"PLANNING_TEMPORALITY",instructions:["Is there a scene you think could take place later/earlier in the story?","How did you accomplish this task?"]},F1:{task:"PLANNING_FOCALIZATION",instructions:["If told from another character's perspective, how would the story change?","How did you accomplish this task?"]},F2:{task:"PLANNING_FOCALIZATION",instructions:["What does the main character mention that no other character would?","How did you accomplish this task?"]}};function $J(t){const e=br(n=>n.nextStep);return b.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"rgb(242, 238, 240)"},children:b.jsxDEV(wn,{style:{width:500,padding:10},children:b.jsxDEV(vn,{children:[b.jsxDEV("div",{dangerouslySetInnerHTML:{__html:t.content}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyMessage.tsx",lineNumber:10,columnNumber:7},this),t.showNextButton&&b.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"right"},children:b.jsxDEV(et,{style:{marginTop:20,width:100},onClick:n=>{br.getState().logEvent("NEXT_PRESSED"),e()},children:"Next"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyMessage.tsx",lineNumber:12,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyMessage.tsx",lineNumber:11,columnNumber:32},this),!t.showNextButton&&b.jsxDEV(et,{style:{marginTop:20},onClick:n=>{br.getState().saveData(!1,!0)},children:"Download data"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyMessage.tsx",lineNumber:19,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyMessage.tsx",lineNumber:9,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyMessage.tsx",lineNumber:8,columnNumber:3},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyMessage.tsx",lineNumber:7,columnNumber:10},this)}function AKe(t){const e=br(n=>n.nextStep);return b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100vh",alignItems:"center",justifyContent:"center"},children:[b.jsxDEV("video",{width:"80%",height:"80%",controls:!0,children:[b.jsxDEV("source",{src:t.video,type:"video/mp4"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyVideo.tsx",lineNumber:9,columnNumber:5},this),"Your browser does not support the video tag."]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyVideo.tsx",lineNumber:8,columnNumber:3},this),b.jsxDEV("div",{style:{width:"80%",display:"flex",justifyContent:"right"},children:b.jsxDEV(et,{style:{marginTop:15,marginBottom:40,padding:20},onClick:n=>{br.getState().logEvent("NEXT_PRESSED"),e()},children:"Next"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyVideo.tsx",lineNumber:13,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyVideo.tsx",lineNumber:12,columnNumber:3},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyVideo.tsx",lineNumber:7,columnNumber:10},this)}const RKe="/VisualStoryWriting/videos/Basics.mp4",OKe="/VisualStoryWriting/videos/Entities.mp4",jKe="/VisualStoryWriting/videos/Locations.mp4",IKe="/VisualStoryWriting/videos/Reorder.mp4",Pk=`One snowy winter morning, Jack jumped up and looked out his window to see the world covered in thick sparkling snow. Perfect sledding snow!

He threw on his snow pants and jacket, then dashed outside before his mom could even finish saying, "dont forget your hat!"

But Jack was already at the hill. He took a deep breath in and began his climb, dragging his sled behind him. He climbed higher and higher until he finally reached the top. As he looked down, the hill felt so large to the 8-year-old Jack that it seemed like a mountain.

Without waiting another second, he positioned his sled strategically and loaded himself on. WOOSH!

He zoomed down the hill so fast that his hat flew right off his head.
He zoomed past all the children climbing the hill.
He zoomed past the parents waiting at the bottom of the hill. But he didn't slow down.
He zoomed faster and faster, and crashed into the hay bales.
He flew off his sled and into the air. He soared through the sky, flying past a flock of noisy geese.`,Ak={locations:[{name:"Jack's House",emoji:""},{name:"The Hill",emoji:""},{name:"The Bottom of the Hill",emoji:""},{name:"The Hay Bales",emoji:""},{name:"The Sky",emoji:""}],entities:[{name:"Jack",emoji:"",properties:[{name:"excited",value:9},{name:"adventurous",value:8},{name:"energetic",value:10}]},{name:"snow",emoji:"",properties:[{name:"sparkling",value:8},{name:"thick",value:7},{name:"cold",value:9}]},{name:"sled",emoji:"",properties:[{name:"fast",value:9},{name:"smooth",value:8},{name:"lightweight",value:7}]},{name:"hill",emoji:"",properties:[{name:"steep",value:8},{name:"large",value:7},{name:"snowy",value:9}]},{name:"hat",emoji:"",properties:[{name:"warm",value:7},{name:"colorful",value:6},{name:"light",value:5}]},{name:"hay bales",emoji:"",properties:[{name:"soft",value:6},{name:"protective",value:8},{name:"stacked",value:7}]},{name:"geese",emoji:"",properties:[{name:"noisy",value:8},{name:"flying",value:9},{name:"flock",value:7}]},{name:"parents",emoji:"",properties:[{name:"waiting",value:7},{name:"watching",value:8},{name:"smiling",value:9}]},{name:"children",emoji:"",properties:[{name:"climbing",value:8}]}],actions:[{name:"jumped up",source:"Jack",target:"Jack",location:"Jack's House",passage:"One snowy winter morning, Jack jumped up and looked out his window to see the world covered in thick sparkling snow."},{name:"looked out",source:"Jack",target:"Jack",location:"Jack's House",passage:"One snowy winter morning, Jack jumped up and looked out his window to see the world covered in thick sparkling snow."},{name:"threw on",source:"Jack",target:"Jack",location:"Jack's House",passage:'He threw on his snow pants and jacket, then dashed outside before his mom could even finish saying, "dont forget your hat!'},{name:"dashed outside",source:"Jack",target:"Jack",location:"Jack's House",passage:'He threw on his snow pants and jacket, then dashed outside before his mom could even finish saying, "dont forget your hat!'},{name:"breathe in",source:"Jack",target:"Jack",location:"The Hill",passage:"He took a deep breath in and began his climb, dragging his sled behind him."},{name:"climb",source:"Jack",target:"hill",location:"The Hill",passage:"He took a deep breath in and began his climb, dragging his sled behind him."},{name:"drag",source:"Jack",target:"sled",location:"The Hill",passage:"He took a deep breath in and began his climb, dragging his sled behind him."},{name:"climbed higher",source:"Jack",target:"hill",location:"The Hill",passage:"He climbed higher and higher until he finally reached the top."},{name:"reached top",source:"Jack",target:"hill",location:"The Hill",passage:"He climbed higher and higher until he finally reached the top."},{name:"looked down",source:"Jack",target:"hill",location:"The Hill",passage:"As he looked down, the hill felt so large to the 8-year-old Jack that it seemed like a mountain."},{name:"positioned sled",source:"Jack",target:"sled",location:"The Hill",passage:"Without waiting another second, he positioned his sled strategically and loaded himself on. WOOSH!"},{name:"loaded himself",source:"Jack",target:"Jack",location:"The Hill",passage:"Without waiting another second, he positioned his sled strategically and loaded himself on. WOOSH!"},{name:"zoomed down",source:"Jack",target:"hill",location:"The Hill",passage:"He zoomed down the hill so fast that his hat flew right off his head."},{name:"flew off",source:"hat",target:"hat",location:"The Hill",passage:"He zoomed down the hill so fast that his hat flew right off his head."},{name:"zoomed past",source:"Jack",target:"children",location:"The Hill",passage:"He zoomed past all the children climbing the hill."},{name:"zoomed past",source:"Jack",target:"parents",location:"The Bottom of the Hill",passage:"He zoomed past the parents waiting at the bottom of the hill."},{name:"zoomed",source:"Jack",target:"hill",location:"The Hill",passage:"He zoomed faster and faster, and crashed into the hay bales."},{name:"crashed",source:"Jack",target:"hay bales",location:"The Hay Bales",passage:"He zoomed faster and faster, and crashed into the hay bales."},{name:"flew off",source:"Jack",target:"Jack",location:"The Hay Bales",passage:"He flew off his sled and into the air."},{name:"into the air",source:"Jack",target:"Jack",location:"The Sky",passage:"He flew off his sled and into the air."},{name:"soared",source:"Jack",target:"Jack",location:"The Sky",passage:"He soared through the sky, flying past a flock of noisy geese."},{name:"flying past",source:"Jack",target:"geese",location:"The Sky",passage:"He soared through the sky, flying past a flock of noisy geese."}]},MKe="Every winter, geese fly long distances and trade the freezing temperatures of the north for the warmth of the south. Robert was one of such geese and, as a goose, Robert doesn't ask many questions... But what is a human doing flying in the sky beside him?",VKe={locations:[{name:"Open Skies",emoji:""}],entities:[{name:"Robert",emoji:"",properties:[{name:"curious",value:7},{name:"adventurous",value:6},{name:"determined",value:8}]},{name:"human",emoji:"",properties:[{name:"mysterious",value:9},{name:"unexpected",value:8},{name:"intriguing",value:7}]},{name:"geese",emoji:"",properties:[]}],actions:[{name:"fly long distances",source:"geese",target:"geese",location:"unknown",passage:"Every winter, geese fly long distances and trade the freezing temperatures of the north for the warmth of the south."},{name:"trade freezing temperatures",source:"geese",target:"geese",location:"unknown",passage:"Every winter, geese fly long distances and trade the freezing temperatures of the north for the warmth of the south."},{name:"flying",source:"human",target:"Robert",location:"Open Skies",passage:"But what is a human doing flying in the sky beside him?"}]};class $Ke{static generateSteps(e){let n=[];n.push({condition:"NOT_A_CONDITION",task:"NOT_A_TASK",type:"MESSAGE",message:"Thank you for participating in this study. Please, first complete this survey questionnaire: <a>Demographic survey</a>. After completing the survey, return to this page to continue the study."}),n.push({type:"VIDEO",task:"NOT_A_TASK",condition:"VISUALWRITING",saveData:!1,message:RKe}),n.push({condition:"NOT_A_CONDITION",task:"NOT_A_TASK",type:"MESSAGE",message:"Now you will watch a second video that will introduce how to edit the story."});const r=[[["E1","M1","R1"]],[["E1","R1","M1"]],[["R1","E1","M1"]],[["R1","M1","E1"]],[["M1","R1","E1"]],[["M1","E1","R1"]]],i=r[(e-1)%r.length];for(let s=0;s<i.length;++s){const o="VISUALWRITING";i[s].forEach((c,f)=>{const h=LKe[c],m={E:OKe,M:jKe,R:IKe};n.push({type:"VIDEO",task:"NOT_A_TASK",condition:o,saveData:f!==0,message:m[c[0]]}),n.push({...h,type:"TASK",condition:o}),n.push({type:"MESSAGE",task:"NOT_A_TASK",condition:o,saveData:!0,message:`Feel free to take a break. Please answer this questionnaire: <a href='' target="_blank">Questionnaire</a>.`})})}return n.push({type:"TASK",task:"FREE_FORM",condition:"VISUALWRITING",instructions:["Using the beginning of the story, explore what could happen next..."],startingState:{textState:[{children:[{text:MKe}]}]},hardcodedData:VKe}),n.push({type:"MESSAGE",task:"NOT_A_TASK",condition:"VISUALWRITING",saveData:!0,message:`Please answer this questionnaire: <a href='' target="_blank">Questionnaire</a>.`}),n}}const LKe={E1:{task:"EDIT_ENTITIES",instructions:["What if the hay bales were not there?","What if Jack went sledding with a friend?"],startingState:{textState:[{children:[{text:Pk}]}]},hardcodedData:Ak},M1:{task:"MOVE_ENTITIES",instructions:["What if Jack had forgotten his hat at home?","What if Jack flies into a place he's never been to before?"],startingState:{textState:[{children:[{text:Pk}]}]},hardcodedData:Ak},R1:{task:"REORDER_EVENTS",instructions:["What if we move the last scene to the start of the story?","What if Jack loses his hat when he flies into the sky?"],startingState:{textState:[{children:[{text:Pk}]}]},hardcodedData:Ak}};function FKe(){const t=br(V=>V.nextStep),[e,n]=R.useState(!1);let r=br(V=>V.participantId),i=br(V=>V.steps),a=br(V=>V.stepId);const s=br(V=>V.setSteps),o=br(V=>V.setParticipantId),l=br(V=>V.setStepId),c=br(V=>V.setStudyType),f=Ce(V=>V.setIsReadOnly),h=Ce(V=>V.isReadOnly),[m,p]=R.useState(0),v=br(V=>V.isOutOfTime),[y,x]=R.useState(-1),[S,_]=R.useState(0),[N,k]=R.useState(!1),P=window.location.hash.split("?"),O=P[P.length-1],A=new URLSearchParams(O),T=A.get("pid"),L=A.get("stepId"),B=A.get("studyType");r===-1&&T&&(window.model=Ce,o(r=parseInt(T)),c(B==="READING"?"READING":"WRITING"),console.log("Study type: ",B),B==="WRITING"?(s($Ke.generateSteps(r)),f(!1)):(s(kKe.generateSteps(r)),f(!0)),l(L?a=parseInt(L):a=0));const W=i[a];if(r<0||!W)return b.jsxDEV($J,{content:"Error: Make sure the URL is correct."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:68,columnNumber:12},this);if(W.type==="MESSAGE")return b.jsxDEV($J,{content:W.message,showNextButton:a+1<i.length},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:73,columnNumber:7},this);if(W.type==="VIDEO")return b.jsxDEV(AKe,{video:W.message},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:76,columnNumber:12},this);const Y=b.jsxDEV("div",{style:{position:"absolute",left:10,bottom:h?10:60,userSelect:"none",zIndex:99999},children:b.jsxDEV(wn,{style:{width:350},children:b.jsxDEV(vn,{children:[b.jsxDEV(Cne,{isCompact:!0,defaultExpandedKeys:["1"],children:b.jsxDEV(Dne,{"aria-label":"Accordion 1",title:"Instructions",style:{whiteSpace:"pre-wrap"},children:!e&&W.instructions[m]},"1",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:83,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:82,columnNumber:9},this),e&&b.jsxDEV("span",{style:{width:"100%",marginTop:20,marginBottom:10,textAlign:"center"},children:"How succesful were you in accomplish these tasks"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:87,columnNumber:24},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",gap:10,alignItems:"center"},children:[e&&b.jsxDEV(YA,{value:y,onChange:V=>x(V),showSteps:!0,minValue:1,maxValue:5,step:1,label:"Unsucessful",getValue:()=>"Successful",classNames:{thumb:y<0?"hidden":"",track:y<0?"border-s-transparent":"",filler:y<0?"hidden":""}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:89,columnNumber:26},this),!e&&b.jsxDEV(Y$,{isOpen:N,onClose:()=>k(!1),children:[b.jsxDEV(K$,{children:b.jsxDEV(et,{variant:"light",onPressStart:V=>{_(new Date().getTime())},onPressEnd:V=>{new Date().getTime()-S>1e3?(br.getState().logEvent("RESET_PRESSED"),br.getState().resetStep()):k(!0)},children:"Reset"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:98,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:97,columnNumber:13},this),b.jsxDEV(G$,{children:b.jsxDEV("p",{children:"Press for at least 1 second"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:114,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:113,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:96,columnNumber:28},this),b.jsxDEV(et,{isDisabled:e&&y<0,color:v?"danger":void 0,style:{flexGrow:5},onClick:V=>{br.getState().logEvent("NEXT_PRESSED"),m+1<W.instructions.length?(br.getState().logEvent("SUBTASK_COMPLETED"),p(m+1)):W.type==="TASK"&&!e&&W.task!=="FREE_FORM"&&W.task!=="READING_BEFORE_PLANNING"&&B==="WRITING"?(br.getState().logEvent("TASK_COMPLETED"),n(!0)):(br.getState().logEvent("NEXT_PRESSED_WITH_RATING",{rating:y}),n(!1),p(0),x(-1),t())},children:"Next"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:117,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:88,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:81,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:80,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:79,columnNumber:28},this);return W.condition==="BASELINE"?b.jsxDEV(b.Fragment,{children:b.jsxDEV(xKe,{children:Y},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:144,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:143,columnNumber:7},this):b.jsxDEV(b.Fragment,{children:b.jsxDEV(Bce,{children:Y},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:153,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/study/StudyInterface.tsx",lineNumber:152,columnNumber:5},this)}function BKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function UKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(t)}function d5(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function WKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function zKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function HKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function Uce(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"},child:[]},{tag:"line",attr:{x1:"16",y1:"8",x2:"2",y2:"22"},child:[]},{tag:"line",attr:{x1:"17.5",y1:"15",x2:"9",y2:"15"},child:[]}]})(t)}function GKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"6",r:"3"},child:[]},{tag:"path",attr:{d:"M6 21V9a9 9 0 0 0 9 9"},child:[]}]})(t)}function KKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"18"},child:[]},{tag:"line",attr:{x1:"16",y1:"6",x2:"16",y2:"22"},child:[]}]})(t)}function YKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"},child:[]},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"},child:[]}]})(t)}function pD(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(t)}function LJ(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function JKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function qKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function Sy(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(t)}function OE(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function XKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function ZKe(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}var FJ;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(FJ||(FJ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BJ;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(BJ||(BJ={}));var UJ;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(UJ||(UJ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WJ=["user","model","function","system"];var zJ;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(zJ||(zJ={}));var HJ;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(HJ||(HJ={}));var GJ;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(GJ||(GJ={}));var KJ;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(KJ||(KJ={}));var jE;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER"})(jE||(jE={}));var YJ;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(YJ||(YJ={}));var JJ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(JJ||(JJ={}));var qJ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qJ||(qJ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},C0=class extends Nl{constructor(e,n){super(e),this.response=n}},Wce=class extends Nl{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}},gg=class extends Nl{};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QKe="https://generativelanguage.googleapis.com",eYe="v1beta",tYe="0.21.0",nYe="genai-js";var qy;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(qy||(qy={}));let rYe=class{constructor(e,n,r,i,a){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=a}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||eYe;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||QKe}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}};function iYe(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${nYe}/${tYe}`),e.join(" ")}async function aYe(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",iYe(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new gg(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,a]of r.entries()){if(i==="x-goog-api-key")throw new gg(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new gg(`Header name ${i} can only be set using the apiClient field`);n.append(i,a)}}return n}async function sYe(t,e,n,r,i,a){const s=new rYe(t,e,n,r,a);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},cYe(a)),{method:"POST",headers:await aYe(s),body:i})}}async function g_(t,e,n,r,i,a={},s=fetch){const{url:o,fetchOptions:l}=await sYe(t,e,n,r,i,a);return oYe(o,l,s)}async function oYe(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){lYe(i,t)}return r.ok||await uYe(r,t),r}function lYe(t,e){let n=t;throw t instanceof Wce||t instanceof gg||(n=new Nl(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function uYe(t,e){let n="",r;try{const i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new Wce(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function cYe(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Rk(t.candidates[0]))throw new C0(`${tg(t)}`,t);return dYe(t)}else if(t.promptFeedback)throw new C0(`Text not available. ${tg(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Rk(t.candidates[0]))throw new C0(`${tg(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),XJ(t)[0]}else if(t.promptFeedback)throw new C0(`Function call not available. ${tg(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Rk(t.candidates[0]))throw new C0(`${tg(t)}`,t);return XJ(t)}else if(t.promptFeedback)throw new C0(`Function call not available. ${tg(t)}`,t)},t}function dYe(t){var e,n,r,i;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)s.text&&a.push(s.text),s.executableCode&&a.push("\n```"+s.executableCode.language+`
`+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&a.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function XJ(t){var e,n,r,i;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)s.functionCall&&a.push(s.functionCall);if(a.length>0)return a}const fYe=[jE.RECITATION,jE.SAFETY,jE.LANGUAGE];function Rk(t){return!!t.finishReason&&fYe.includes(t.finishReason)}function tg(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const a=t.candidates[0];Rk(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function CN(t){return this instanceof CN?(this.v=t,this):new CN(t)}function hYe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){r[m]&&(i[m]=function(p){return new Promise(function(v,y){a.push([m,p,v,y])>1||o(m,p)})})}function o(m,p){try{l(r[m](p))}catch(v){h(a[0][3],v)}}function l(m){m.value instanceof CN?Promise.resolve(m.value.v).then(c,f):h(a[0][2],m)}function c(m){o("next",m)}function f(m){o("throw",m)}function h(m,p){m(p),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZJ=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function mYe(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=vYe(e),[r,i]=n.tee();return{stream:gYe(r),response:pYe(i)}}async function pYe(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return iB(yYe(e));e.push(i)}}function gYe(t){return hYe(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield CN(n.read());if(i)break;yield yield CN(iB(r))}})}function vYe(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return a();function a(){return e.read().then(({value:s,done:o})=>{if(o){if(i.trim()){r.error(new Nl("Failed to parse stream"));return}r.close();return}i+=s;let l=i.match(ZJ),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new Nl(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),i=i.substring(l[0].length),l=i.match(ZJ)}return a()})}}})}function yYe(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates)for(const i of r.candidates){const a=i.index;if(n.candidates||(n.candidates=[]),n.candidates[a]||(n.candidates[a]={index:i.index}),n.candidates[a].citationMetadata=i.citationMetadata,n.candidates[a].groundingMetadata=i.groundingMetadata,n.candidates[a].finishReason=i.finishReason,n.candidates[a].finishMessage=i.finishMessage,n.candidates[a].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[a].content||(n.candidates[a].content={role:i.content.role||"user",parts:[]});const s={};for(const o of i.content.parts)o.text&&(s.text=o.text),o.functionCall&&(s.functionCall=o.functionCall),o.executableCode&&(s.executableCode=o.executableCode),o.codeExecutionResult&&(s.codeExecutionResult=o.codeExecutionResult),Object.keys(s).length===0&&(s.text=""),n.candidates[a].content.parts.push(s)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zce(t,e,n,r){const i=await g_(e,qy.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return mYe(i)}async function Hce(t,e,n,r){const a=await(await g_(e,qy.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:iB(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gce(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function TN(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return bYe(e)}function bYe(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const a of t)"functionResponse"in a?(n.parts.push(a),i=!0):(e.parts.push(a),r=!0);if(r&&i)throw new Nl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new Nl("No content is provided for sending chat message.");return r?e:n}function wYe(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=t.generateContentRequest!=null;if(t.contents){if(i)throw new gg("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const a=TN(t);r.contents=[a]}return{generateContentRequest:r}}function QJ(t){let e;return t.contents?e=t:e={contents:[TN(t)]},t.systemInstruction&&(e.systemInstruction=Gce(t.systemInstruction)),e}function xYe(t){return typeof t=="string"||Array.isArray(t)?{content:TN(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],SYe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function EYe(t){let e=!1;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new Nl(`First content should be with role 'user', got ${r}`);if(!WJ.includes(r))throw new Nl(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(WJ)}`);if(!Array.isArray(i))throw new Nl("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Nl("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of i)for(const l of eq)l in o&&(a[l]+=1);const s=SYe[r];for(const o of eq)if(!s.includes(o)&&a[o]>0)throw new Nl(`Content with role '${r}' can't contain '${o}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq="SILENT_ERROR";let NYe=class{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(EYe(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,a,s,o,l;await this._sendPromise;const c=TN(e),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),n);let m;return this._sendPromise=this._sendPromise.then(()=>Hce(this._apiKey,this.model,f,h)).then(p=>{var v;if(p.response.candidates&&p.response.candidates.length>0){this._history.push(c);const y=Object.assign({parts:[],role:"model"},(v=p.response.candidates)===null||v===void 0?void 0:v[0].content);this._history.push(y)}else{const y=tg(p.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}m=p}),await this._sendPromise,m}async sendMessageStream(e,n={}){var r,i,a,s,o,l;await this._sendPromise;const c=TN(e),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),n),m=zce(this._apiKey,this.model,f,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(p=>{throw new Error(tq)}).then(p=>p.response).then(p=>{if(p.candidates&&p.candidates.length>0){this._history.push(c);const v=Object.assign({},p.candidates[0].content);v.role||(v.role="model"),this._history.push(v)}else{const v=tg(p);v&&console.warn(`sendMessageStream() was unsuccessful. ${v}. Inspect response object for details.`)}}).catch(p=>{p.message!==tq&&console.error(p)}),m}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Ye(t,e,n,r){return(await g_(e,qy.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CYe(t,e,n,r){return(await g_(e,qy.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function TYe(t,e,n,r){const i=n.requests.map(s=>Object.assign(Object.assign({},s),{model:e}));return(await g_(e,qy.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nq=class{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Gce(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const i=QJ(e),a=Object.assign(Object.assign({},this._requestOptions),n);return Hce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),a)}async generateContentStream(e,n={}){var r;const i=QJ(e),a=Object.assign(Object.assign({},this._requestOptions),n);return zce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),a)}startChat(e){var n;return new NYe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=wYe(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return _Ye(this.apiKey,this.model,r,i)}async embedContent(e,n={}){const r=xYe(e),i=Object.assign(Object.assign({},this._requestOptions),n);return CYe(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return TYe(this.apiKey,this.model,e,r)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DYe=class{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Nl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new nq(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new gg("Cached content must contain a `name` field.");if(!e.model)throw new gg("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const s of i)if(n!=null&&n[s]&&e[s]&&(n==null?void 0:n[s])!==e[s]){if(s==="model"){const o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new gg(`Different value for "${s}" specified in modelParams (${n[s]}) and cachedContent (${e[s]})`)}const a=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new nq(this.apiKey,a,r)}},Uo=null;const kYe=t=>{Uo=new DYe(t)},eV={characters:[],events:[],locations:[],terms:[],arcs:[],story_summary:{logline:"",blurb:""},key_events_and_arcs:[],honorifics:{},recurring_phrases:{},world_building_notes:[],style_guide:{name_format:"english_given_name english_surname",tone:"Standard",formality_level:"medium",themes:[],genre:"Web Novel",sub_genres:[],content_rating:"Teen",honorific_usage:"Keep Korean honorifics with explanation on first use",formal_speech_level:"Match English formality to Korean speech level",dialogue_style:"natural",narrative_style:{point_of_view:"third-person",tense:"past",voice:"neutral",common_expressions:[],atmosphere_descriptors:[]}},target_language:"en",fullText:"",processedChunks:0,totalChunks:0,isLoading:!1};function rb(t){return t==="ja"?`

** TARGET LANGUAGE: Japanese ()**

****

**:**
1. ** ():**
   - Characters: 'name', 'surname', 'given_name', 'english_name', 'description', 'physical_appearance', 'personality', 'occupation', 'speech_style', 'first_appearance'  
   - Events: 'name', 'description', 'source_location', 'target_location'  
   - Locations: 'name', 'description', 'atmosphere', 'significance'  
   - Terms: 'translation', 'context', 'notes'  
   - 'key_events_in_chunk':   
   - 'world_building_notes':   
   - 'style_guide':   
   - Honorifics: ()  
   - Recurring phrases: ()  

2. ** ():**
   - 'korean_name', 'korean_surname', 'korean_given_name'
   - Terms 'original'
   - Honorifics  ()
   - Recurring phrases  ()

3. **JSON:** JSON

**:**
- Character "name": "", "description": ""
- Event "name": ""
- "key_events_in_chunk": [""]
`:`

** TARGET LANGUAGE: English**

You are reading a Korean novel and creating a **translation glossary for English speakers**.

**Critical Language Rules:**
1. **Translation Fields (Write in ENGLISH):**
   - Characters: 'name', 'surname', 'given_name', 'english_name', 'description', 'physical_appearance', 'personality', 'occupation', 'speech_style', 'first_appearance'  English
   - Events: 'name', 'description', 'source_location', 'target_location'  English
   - Locations: 'name', 'description', 'atmosphere', 'significance'  English
   - Terms: 'translation', 'context', 'notes'  English
   - 'key_events_in_chunk': All array items  English
   - 'world_building_notes': All array items  English
   - 'style_guide': All fields  English
   - Honorifics: Values (explanations)  English
   - Recurring phrases: Values (translations)  English

2. **Keep Korean Fields (Original text):**
   - 'korean_name', 'korean_surname', 'korean_given_name'
   - Terms 'original'
   - Honorifics keys (Korean)
   - Recurring phrases keys (Korean)

3. **JSON Structure:** Keep JSON key names in English

**Examples:**
- Character "name": "Kim Bu-ja", "description": "A skilled gamer"
- Event "name": "The protagonist meets their rival for the first time"
- "key_events_in_chunk": ["The protagonist awakens a new power"]
`}async function PYe(t,e){const n=$t.getState().target_language,i=`       .    chunk  **  (glossary) **. , , , ,     **  ** .
${rb(n)}

** :** 
 glossary    . :
-    ** ** 
-  ()   
-      
-       

**  ( ):**

1. **  (Story Arc) -  !**:
   - ** arc **:  chunk   arc  
   - **arc  **:  arc    
   - **arc  **:  arc     
   - ** **:  arc  
   - : "School Life Arc", "Tournament Arc", "Relationship Development Arc" 

2. **  (Character Evidence)**:
   - ** & **:    (: "       ")
   - ** &  **:   ,      
   - ** **:     
   - ** &  **: , , ,     
   - **  (arc_id !)**:   .    arc id  arc    
   - ** (speech_style)**: // /  
   - **  (first_appearance)**:      

3. ** &  **:
   - ** **:    
   - ** **:  , ,   
   - **  /**:        

4. **  **:
   - ****: , ,   
   - ** & **:  ,  ,    
   - ** (honorifics)**:  (,  )   
   - ** **:    
   - ** **:  , ,  ,    

**  JSON .     JSON .**

JSON :
{
  "arcs": [
    {
      "name": "Arc name in TARGET LANGUAGE (e.g., 'School Life Arc', 'Tournament Arc', 'Relationship Development Arc')",
      "description": "Detailed description of this arc in TARGET LANGUAGE",
      "characters": ["Character1 name", "Character2 name"],
      "start_chunk": ${e},
      "key_events": ["Key event 1 in TARGET LANGUAGE", "Key event 2 in TARGET LANGUAGE"]
    }
  ],
  "characters": [
    {
      "name": " ",
      "korean_name": " ",
      "korean_surname": "",
      "korean_given_name": "",
      "english_name": "English Name ()",
      "surname": "Family Name",
      "given_name": "Given Name",
      "description": "     ",
      "physical_appearance": " ",
      "personality": " ",
      "traits": ["1", "2", "3"],
      "emoji": "",
      "age": "",
      "gender": "male/female/other",
      "role": "protagonist/antagonist/major/supporting/minor",
      "age_group": "child/teen/young_adult/adult/elderly",
      "occupation": " (: Executive Director of K Group, A-rank Esper, Secretary)",
      "abilities": ["1", "2"],
      "speech_style": "// / / ",
      "name_variants": {"nickname": "", "title": ""},
      "honorifics_used": {"char_2": "-", "char_3": "-"},
      "first_appearance": "Chapter 1, during school entrance",
      "relationships": [
        {
          "character_name": "   ",
          "relationship_type": "////// /  ",
          "description": "  ()",
          "sentiment": "positive/negative/neutral",
          "arc_id": "arc_name (   arc name)"
        }
      ]
    }
  ],
  "events": [
    {
      "name": "Event name in TARGET LANGUAGE (action-oriented, e.g., 'Protagonist meets rival for the first time')",
      "description": "Detailed description in TARGET LANGUAGE of what happened",
      "characters_involved": ["Character1 name", "Character2 name"],
      "source_location": "Starting location in TARGET LANGUAGE",
      "target_location": "Ending location in TARGET LANGUAGE (if movement occurs)",
      "importance": "major or minor"
    }
  ],
  "locations": [
    {
      "name": " ",
      "korean_name": " ",
      "type": "city/building/room/natural",
      "description": " ",
      "atmosphere": " (:   )",
      "significance": " (:    )",
      "emoji": ""
    }
  ],
  "terms": [
    {
      "original": " ",
      "translation": "English Translation",
      "context": "",
      "category": "name/place/item/concept/martial_arts/cultural/technical/other",
      "first_appearance": "Chapter 1 during school entrance",
      "notes": "  "
    }
  ],
  "honorifics": {
    "": "formal honorific suffix for names and titles (Keep the original Korean nuance)",
    "": "polite address for equals (Don't use romanized -ssi)"
  },
  "recurring_phrases": {
    "  ": "at that very moment",
    "  ": "there was no choice"
  },
  "key_events_in_chunk": [
    "Write in TARGET LANGUAGE: Brief description of major plot event 1 that occurred in this chunk",
    "Write in TARGET LANGUAGE: Brief description of major plot event 2 that occurred in this chunk"
  ],
  "world_building_notes": [
    "   , 'K'  ",
    "       "
  ],
  "style_guide": {
    "tone": "   ",
    "formality_level": "medium",
    "narrative_vocabulary": " ,  ",
    "themes": ["", "", ""],
    "genre": "School Life",
    "sub_genres": ["slice of life", "drama"],
    "narrative_style": {
      "point_of_view": "3",
      "tense": "",
      "voice": "/",
      "common_expressions": ["", " "],
      "atmosphere_descriptors": [" ", "", ""]
    }
  }
}

 :
${t}`;try{if(!Uo)throw new Error("Gemini API not initialized");const c=(await(await Uo.getGenerativeModel({model:"gemini-2.5-pro"}).generateContent(i)).response).text().match(/\{[\s\S]*\}/),f=c?c[0]:"{}",h=JSON.parse(f),m=(h.characters||[]).map((O,A)=>({id:`char-${e}-${A}`,name:O.name||"Unknown",korean_name:O.korean_name||"",korean_surname:O.korean_surname||"",korean_given_name:O.korean_given_name||"",english_name:O.english_name||"",surname:O.surname||"",given_name:O.given_name||"",description:O.description||"",physical_appearance:O.physical_appearance||"",personality:O.personality||"",traits:O.traits||[],emoji:O.emoji||"",age:O.age||"",gender:O.gender||"",role:O.role||"minor",age_group:O.age_group||"adult",occupation:O.occupation||"",abilities:O.abilities||[],speech_style:O.speech_style||"standard",name_variants:O.name_variants||{},honorifics_used:O.honorifics_used||{},first_appearance:O.first_appearance||"",relationships:(O.relationships||[]).map(T=>({character_name:T.character_name||"",relationship_type:T.relationship_type||"unknown",description:T.description||"",sentiment:T.sentiment||"neutral"}))})),p=(h.events||[]).map((O,A)=>({id:`event-${e}-${A}`,name:O.name||"Unknown Event",description:O.description||"",characters_involved:O.characters_involved||[],source_location:O.source_location||"unknown",target_location:O.target_location||"unknown",chunk_index:e,importance:O.importance||"minor"})),v=(h.locations||[]).map((O,A)=>({id:`location-${e}-${A}`,name:O.name||"Unknown",korean_name:O.korean_name||"",description:O.description||"",emoji:O.emoji||"",type:O.type||"",atmosphere:O.atmosphere||"",significance:O.significance||""})),y=(h.terms||[]).map((O,A)=>({id:`term-${e}-${A}`,original:O.original||"",translation:O.translation||"",context:O.context||"",category:O.category||"other",first_appearance:O.first_appearance||"",notes:O.notes||""})),x=(h.arcs||[]).map((O,A)=>({id:O.name||`arc-${e}-${A}`,name:O.name||"Unknown Arc",description:O.description||"",characters:O.characters||[],start_chunk:O.start_chunk!==void 0?O.start_chunk:e,end_chunk:O.end_chunk,key_events:O.key_events||[]})),S=h.honorifics||{},_=h.recurring_phrases||{},N=h.world_building_notes||[],k=h.key_events_in_chunk||[],P=h.style_guide||{};return{characters:m,events:p,locations:v,terms:y,arcs:x,honorifics:S,recurring_phrases:_,world_building_notes:N,key_events_in_chunk:k,style_guide:P}}catch(a){return console.error("Error extracting from chunk:",a),{characters:[],events:[],locations:[],terms:[]}}}async function AYe(t){if(t.length===0)return[];const e=$t.getState().target_language,n=rb(e),r=t.map(a=>a.name).join(", "),i=`    .  chunk    ** **      .
${n} 

** :**
 ** **:     (  )
 ** **:     
 ****:       
 ****:    

 : ${r}

   (${t.length} ):
${JSON.stringify(t.map(a=>({id:a.id,name:a.name,korean_name:a.korean_name,korean_surname:a.korean_surname,korean_given_name:a.korean_given_name,english_name:a.english_name,surname:a.surname,given_name:a.given_name,description:a.description,physical_appearance:a.physical_appearance,personality:a.personality,traits:a.traits,emoji:a.emoji,age:a.age,gender:a.gender,role:a.role,age_group:a.age_group,occupation:a.occupation,abilities:a.abilities,speech_style:a.speech_style,name_variants:a.name_variants,honorifics_used:a.honorifics_used,first_appearance:a.first_appearance,relationships:a.relationships})),null,2)}

**  ():**

**1:   &  **
-      
-  (//)     

**2:   **
- ** **:     (korean_name, english_name, surname, given_name )
- ** ** (description, physical_appearance, personality): 
  *    
  *     
  *    
- ** ** (traits, abilities):
  *      
  * 3-7    
  *    (: "" < " ")
- ** ** (name_variants, honorifics_used):
  *  -  
  *      
- **  ** (age, gender, occupation, speech_style, first_appearance):
  *     
  *    

**3:   ( !)**
-    **  **
-       :
  *   relationship_type 
  * description   
  * sentiment     
- AB  BA   
-    relationships  

**4:  **
-     
-     (: child  occupation CEO)
-    1  trait  

**  JSON .     JSON .**

JSON  (  ):
{
  "characters": [
    {
      "id": " ID    ",
      "name": "  ( )",
      "korean_name": " ",
      "korean_surname": "",
      "korean_given_name": "",
      "english_name": "English Name ()",
      "surname": "Family Name",
      "given_name": "Given Name",
      "description": "   (   )",
      "physical_appearance": "  ",
      "personality": "  ",
      "traits": ["1", "2", "...3-7"],
      "emoji": "",
      "age": "",
      "gender": "male/female/other",
      "role": "protagonist/antagonist/major/supporting/minor",
      "age_group": "child/teen/young_adult/adult/elderly",
      "occupation": "",
      "abilities": ["1", "2", "..."],
      "speech_style": "//  ",
      "name_variants": {"nickname": "", "title": ""},
      "honorifics_used": {"": "-"},
      "first_appearance": "  ",
      "relationships": [
        {
          "character_name": "   ",
          "relationship_type": "////// /  ",
          "description": "  ",
          "sentiment": "positive/negative/neutral"
        }
      ]
    }
  ]
}`;try{if(!Uo)throw new Error("Gemini API not initialized");const c=(await(await Uo.getGenerativeModel({model:"gemini-2.5-pro"}).generateContent(i)).response).text().match(/\{[\s\S]*\}/),f=c?c[0]:"{}",m=(JSON.parse(f).characters||[]).map(p=>({id:p.id||p.name,name:p.name||"Unknown",korean_name:p.korean_name||"",korean_surname:p.korean_surname||"",korean_given_name:p.korean_given_name||"",english_name:p.english_name||"",surname:p.surname||"",given_name:p.given_name||"",description:p.description||"",physical_appearance:p.physical_appearance||"",personality:p.personality||"",traits:p.traits||[],emoji:p.emoji||"",age:p.age||"",gender:p.gender||"",role:p.role||"minor",age_group:p.age_group||"adult",occupation:p.occupation||"",abilities:p.abilities||[],speech_style:p.speech_style||"standard",name_variants:p.name_variants||{},honorifics_used:p.honorifics_used||{},first_appearance:p.first_appearance||"",relationships:(p.relationships||[]).map(v=>({character_name:v.character_name||"",relationship_type:v.relationship_type||"unknown",description:v.description||"",sentiment:v.sentiment||"neutral"}))}));return m.length>0?m:t}catch(a){return console.error("Error consolidating characters:",a),t}}async function RYe(t,e){if(t.length===0)return[];const n=$t.getState().target_language,i=`    .  chunk   ** **        .
${rb(n)}

** :**
 ** **:      
 ** **:      
 ** **: chunk_index   
 ** **:    

 :
${e.map(a=>a.name).join(", ")}

   (${t.length}):
${JSON.stringify(t.map(a=>({id:a.id,name:a.name,description:a.description,characters_involved:a.characters_involved,source_location:a.source_location,target_location:a.target_location,importance:a.importance,chunk_index:a.chunk_index})),null,2)}

** &   ():**

**1:    & **
-       :
  *  ,  ,   =  
  * "A B " vs "A B  " = 
  * " " vs " " vs " " =  (//)
-  :
  *    description 
  *   chunk_index 
  * characters_involved  

**2:   & **
  15-25   :

 ** **:
1.  **  **:     
2.  **  /**:        
3.  **  /**:     
4.  ** /**:      
5.  **  **:      
6.  ** /**:      

 ****:
-   ( )
-     
-    
-   
- "minor" importance    
-       

**3:  **
-    :
  *   (: "", "", "", "")
  *    (: ""   "A B    " )
- description   :
  *  , ,   
  *   
- importance "major" 
- chunk_index   

**4:  **
- 15-25    
-       
-    
-    

**  JSON .     JSON .**

JSON :
{
  "events": [
    {
      "name": "    (:      )",
      "description": "   (, , ,   )",
      "characters_involved": [" 1", " 2"],
      "source_location": " ",
      "target_location": "  (  )",
      "importance": "major",
      "chunk_index": 0
    }
  ]
}`;try{if(!Uo)throw new Error("Gemini API not initialized");const c=(await(await Uo.getGenerativeModel({model:"gemini-2.5-pro"}).generateContent(i)).response).text().match(/\{[\s\S]*\}/),f=c?c[0]:"{}";return(JSON.parse(f).events||[]).map((m,p)=>({id:`consolidated-event-${p}`,name:m.name||"Unknown Event",description:m.description||"",characters_involved:m.characters_involved||[],source_location:m.source_location||"unknown",target_location:m.target_location||"unknown",chunk_index:m.chunk_index||0,importance:m.importance||"major"}))}catch(a){return console.error("Error consolidating events:",a),t.filter(s=>s.importance==="major").slice(0,20)}}async function OYe(t){if(t.length===0)return[];const e=$t.getState().target_language,r=` chunk    ** **.
${rb(e)}

   (${t.length}):
${JSON.stringify(t,null,2)}

** :**
1. ** **:  ( )  
2. ** **:    
3. ****:    

  JSON :
{
  "locations": [
    {
      "id": " ID ",
      "name": "",
      "korean_name": " ",
      "type": "city/building/room/natural",
      "description": " ",
      "atmosphere": "",
      "significance": "",
      "emoji": ""
    }
  ]
}`;try{if(!Uo)throw new Error("Gemini API not initialized");const o=(await(await Uo.getGenerativeModel({model:"gemini-2.5-pro"}).generateContent(r)).response).text().match(/\{[\s\S]*\}/);return(JSON.parse(o?o[0]:"{}").locations||[]).map(c=>({id:c.id||`loc-${c.name}`,name:c.name||"Unknown",korean_name:c.korean_name||"",description:c.description||"",emoji:c.emoji||"",type:c.type||"",atmosphere:c.atmosphere||"",significance:c.significance||""}))}catch(i){return console.error("Error consolidating locations:",i),t}}async function jYe(t){if(t.length===0)return[];const e=$t.getState().target_language,r=` chunk   ** **.
${rb(e)}

  (${t.length}):
${JSON.stringify(t,null,2)}

** :**
1. ** **:  (Korean)  
2. ** **:    
3. ** **:     

  JSON :
{
  "terms": [
    {
      "id": " ID ",
      "original": " ",
      "translation": "English Translation",
      "context": " ",
      "category": "name/place/item/concept/martial_arts/cultural/technical/other",
      "first_appearance": " ",
      "notes": " "
    }
  ]
}`;try{if(!Uo)throw new Error("Gemini API not initialized");const o=(await(await Uo.getGenerativeModel({model:"gemini-2.5-pro"}).generateContent(r)).response).text().match(/\{[\s\S]*\}/);return(JSON.parse(o?o[0]:"{}").terms||[]).map(c=>({id:c.id||`term-${c.original}`,original:c.original||"",translation:c.translation||"",context:c.context||"",category:c.category||"other",first_appearance:c.first_appearance||"",notes:c.notes||""}))}catch(i){return console.error("Error consolidating terms:",i),t}}async function IYe(t){if(t.length===0)return[];if(t.length<=5)return t;const e=$t.getState().target_language,r=` chunk    ** **.
${rb(e)}

   (${t.length}):
${JSON.stringify(t,null,2)}

** :**
1. ** **:      
2. ** **:    
3. ****:        
4. ****: 10-20   

**:   TARGET LANGUAGE .**

  JSON :
{
  "world_building_notes": [
    "Consolidated world building note 1 in TARGET LANGUAGE",
    "Consolidated world building note 2 in TARGET LANGUAGE"
  ]
}`;try{if(!Uo)throw new Error("Gemini API not initialized");const o=(await(await Uo.getGenerativeModel({model:"gemini-2.5-pro"}).generateContent(r)).response).text().match(/\{[\s\S]*\}/);return JSON.parse(o?o[0]:"{}").world_building_notes||t}catch(i){return console.error("Error consolidating world building notes:",i),t}}async function MYe(t){if(t.length===0)return[];if(t.length<=10)return t;const e=$t.getState().target_language,r=` chunk    ** **.
${rb(e)}

   (${t.length}):
${JSON.stringify(t,null,2)}

** :**
1. ** **:      
2. ** **:   15-25  
3. ** **:    
4. ** **:   

**:   TARGET LANGUAGE .**

  JSON :
{
  "key_events_and_arcs": [
    "Consolidated and refined key event 1 in TARGET LANGUAGE",
    "Consolidated and refined key event 2 in TARGET LANGUAGE"
  ]
}`;try{if(!Uo)throw new Error("Gemini API not initialized");const o=(await(await Uo.getGenerativeModel({model:"gemini-2.5-pro"}).generateContent(r)).response).text().match(/\{[\s\S]*\}/);return JSON.parse(o?o[0]:"{}").key_events_and_arcs||t}catch(i){return console.error("Error consolidating key events:",i),t}}const $t=Xf()((t,e)=>({...eV,reset:()=>t({...eV}),setFullText:n=>t({fullText:n}),setTotalChunks:n=>t({totalChunks:n}),setTargetLanguage:n=>t({target_language:n}),processChunk:async(n,r)=>{t({isLoading:!0});const{characters:i,events:a,locations:s,terms:o,arcs:l,honorifics:c,recurring_phrases:f,world_building_notes:h,key_events_in_chunk:m,style_guide:p}=await PYe(n,r),v=e().characters;i.forEach(S=>{const _=v.find(N=>{var B,W,Y,V;const k=N.name.toLowerCase().trim(),P=S.name.toLowerCase().trim(),O=(B=N.korean_name)==null?void 0:B.toLowerCase().trim(),A=(W=S.korean_name)==null?void 0:W.toLowerCase().trim(),T=(Y=N.english_name)==null?void 0:Y.toLowerCase().trim(),L=(V=S.english_name)==null?void 0:V.toLowerCase().trim();return k===P||O&&A&&O===A||T&&L&&T===L||O&&O===P||A&&k===A||T&&T===P||L&&k===L});_?e().mergeCharacters(_.id,S):e().addCharacter(S)}),a.forEach(S=>{e().addEvent(S)});const y=e().locations;s.forEach(S=>{y.find(N=>N.name.toLowerCase()===S.name.toLowerCase())||e().addLocation(S)});const x=e().terms;if(o.forEach(S=>{x.find(N=>N.original.toLowerCase()===S.original.toLowerCase())||e().addTerm(S)}),l&&l.length>0){const S=e().arcs;l.forEach(_=>{const N=S.find(k=>k.name.toLowerCase()===_.name.toLowerCase());N?e().updateArc(N.id,{description:_.description||N.description,characters:[...new Set([...N.characters,..._.characters])],end_chunk:r,key_events:[...new Set([...N.key_events||[],..._.key_events||[]])]}):e().addArc(_)})}c&&t(S=>({honorifics:{...S.honorifics,...c}})),f&&t(S=>({recurring_phrases:{...S.recurring_phrases,...f}})),h&&h.length>0&&t(S=>({world_building_notes:[...S.world_building_notes,...h]})),m&&m.length>0&&t(S=>({key_events_and_arcs:[...S.key_events_and_arcs,...m]})),p&&Object.keys(p).length>0&&t(S=>{var _,N,k,P;return{style_guide:{...S.style_guide,...p,themes:[...new Set([...S.style_guide.themes||[],...p.themes||[]])],sub_genres:[...new Set([...S.style_guide.sub_genres||[],...p.sub_genres||[]])],narrative_style:{...S.style_guide.narrative_style,...p.narrative_style||{},common_expressions:[...new Set([...((_=S.style_guide.narrative_style)==null?void 0:_.common_expressions)||[],...((N=p.narrative_style)==null?void 0:N.common_expressions)||[]])],atmosphere_descriptors:[...new Set([...((k=S.style_guide.narrative_style)==null?void 0:k.atmosphere_descriptors)||[],...((P=p.narrative_style)==null?void 0:P.atmosphere_descriptors)||[]])]}}}}),t({processedChunks:r+1,isLoading:!1})},consolidateResults:async()=>{t({isLoading:!0});const n=e();if(n.totalChunks<=2){t({isLoading:!1});return}try{console.log(" Starting comprehensive consolidation..."),console.log(" Consolidating characters...");const i=await AYe(n.characters);console.log(" Consolidating events...");const a=await RYe(n.events,i);console.log(" Consolidating locations...");const s=await OYe(n.locations);console.log(" Consolidating terms...");const o=await jYe(n.terms);console.log(" Consolidating world building notes...");const l=await IYe(n.world_building_notes);console.log(" Consolidating key events and arcs...");const c=await MYe(n.key_events_and_arcs);console.log(" Consolidation complete!"),t({characters:i,events:a,locations:s,terms:o,world_building_notes:l,key_events_and_arcs:c,isLoading:!1})}catch(i){console.error(" Error consolidating results:",i),t({isLoading:!1})}},addCharacter:n=>{t(r=>({characters:[...r.characters,n]}))},addEvent:n=>{t(r=>({events:[...r.events,n]}))},addLocation:n=>{t(r=>({locations:[...r.locations,n]}))},addTerm:n=>{t(r=>({terms:[...r.terms,n]}))},addArc:n=>{t(r=>({arcs:[...r.arcs,n]}))},updateCharacter:(n,r)=>{t(i=>{const a=i.characters.map(s=>s.id===n?{...s,...r,id:s.id}:s);return console.log("Updated character:",n,r),{characters:a}})},updateEvent:(n,r)=>{t(i=>{const a=i.events.map(s=>s.id===n?{...s,...r,id:s.id}:s);return console.log("Updated event:",n,r),{events:a}})},updateLocation:(n,r)=>{t(i=>{const a=i.locations.map(s=>s.id===n?{...s,...r,id:s.id}:s);return console.log("Updated location:",n,r),{locations:a}})},updateTerm:(n,r)=>{t(i=>{const a=i.terms.map(s=>s.id===n?{...s,...r,id:s.id}:s);return console.log("Updated term:",n,r),{terms:a}})},updateArc:(n,r)=>{t(i=>{const a=i.arcs.map(s=>s.id===n?{...s,...r,id:s.id}:s);return console.log("Updated arc:",n,r),{arcs:a}})},deleteCharacter:n=>{t(r=>{const i=r.characters.filter(a=>a.id!==n);return console.log("Deleted character:",n),{characters:i}})},deleteEvent:n=>{t(r=>{const i=r.events.filter(a=>a.id!==n);return console.log("Deleted event:",n),{events:i}})},deleteLocation:n=>{t(r=>{const i=r.locations.filter(a=>a.id!==n);return console.log("Deleted location:",n),{locations:i}})},deleteTerm:n=>{t(r=>{const i=r.terms.filter(a=>a.id!==n);return console.log("Deleted term:",n),{terms:i}})},deleteArc:n=>{t(r=>{const i=r.arcs.filter(a=>a.id!==n);return console.log("Deleted arc:",n),{arcs:i}})},updateStorySummary:n=>{t(r=>({story_summary:{...r.story_summary,...n}}))},updateStyleGuide:n=>{t(r=>({style_guide:{...r.style_guide,...n}}))},addKeyEvent:n=>{t(r=>({key_events_and_arcs:[...r.key_events_and_arcs,n]}))},updateKeyEvent:(n,r)=>{t(i=>({key_events_and_arcs:i.key_events_and_arcs.map((a,s)=>s===n?r:a)}))},deleteKeyEvent:n=>{t(r=>({key_events_and_arcs:r.key_events_and_arcs.filter((i,a)=>a!==n)}))},addWorldBuildingNote:n=>{t(r=>({world_building_notes:[...r.world_building_notes,n]}))},updateWorldBuildingNote:(n,r)=>{t(i=>({world_building_notes:i.world_building_notes.map((a,s)=>s===n?r:a)}))},deleteWorldBuildingNote:n=>{t(r=>({world_building_notes:r.world_building_notes.filter((i,a)=>a!==n)}))},addHonorific:(n,r)=>{t(i=>({honorifics:{...i.honorifics,[n]:r}}))},updateHonorific:(n,r,i)=>{t(a=>{const s={...a.honorifics};return n!==r&&delete s[n],s[r]=i,{honorifics:s}})},deleteHonorific:n=>{t(r=>{const i={...r.honorifics};return delete i[n],{honorifics:i}})},addRecurringPhrase:(n,r)=>{t(i=>({recurring_phrases:{...i.recurring_phrases,[n]:r}}))},updateRecurringPhrase:(n,r,i)=>{t(a=>{const s={...a.recurring_phrases};return n!==r&&delete s[n],s[r]=i,{recurring_phrases:s}})},deleteRecurringPhrase:n=>{t(r=>{const i={...r.recurring_phrases};return delete i[n],{recurring_phrases:i}})},mergeCharacters:(n,r)=>{t(i=>({characters:i.characters.map(a=>{if(a.id===n){const s=new Set(a.relationships.map(l=>l.character_name.toLowerCase())),o=(r.relationships||[]).filter(l=>!s.has(l.character_name.toLowerCase()));return{...a,description:r.description||a.description,physical_appearance:r.physical_appearance||a.physical_appearance,personality:r.personality||a.personality,traits:[...new Set([...a.traits,...r.traits||[]])],age:r.age||a.age,gender:r.gender||a.gender,role:r.role||a.role,age_group:r.age_group||a.age_group,occupation:r.occupation||a.occupation,abilities:[...new Set([...a.abilities||[],...r.abilities||[]])],speech_style:r.speech_style||a.speech_style,name_variants:{...a.name_variants||{},...r.name_variants||{}},honorifics_used:{...a.honorifics_used||{},...r.honorifics_used||{}},first_appearance:r.first_appearance||a.first_appearance,emoji:r.emoji||a.emoji,korean_name:r.korean_name||a.korean_name,korean_surname:r.korean_surname||a.korean_surname,korean_given_name:r.korean_given_name||a.korean_given_name,english_name:r.english_name||a.english_name,surname:r.surname||a.surname,given_name:r.given_name||a.given_name,relationships:[...a.relationships,...o]}}return a})}))},convertToModelFormat:()=>{const n=e(),r=n.characters.map((s,o)=>({id:`entity-${s.name}`,type:"entityNode",dragHandle:".custom-drag-handle",measured:{width:160,height:160},position:{x:100+o%3*250,y:100+Math.floor(o/3)*200},data:{name:s.name,emoji:s.emoji,properties:s.traits.slice(0,3).map(l=>({name:l,value:5}))}})),i=n.locations.map((s,o)=>({id:`location-${o}`,type:"locationNode",dragHandle:".custom-drag-handle",measured:{width:160,height:160},position:{x:100+o%3*250,y:100+Math.floor(o/3)*200},data:{name:s.name,emoji:s.emoji}})),a=n.events.map((s,o)=>{const l=s.characters_involved[0],c=s.characters_involved[1]||s.characters_involved[0];return{id:`action-${o}`,type:"actionEdge",source:`entity-${l}`,target:`entity-${c}`,animated:!0,markerEnd:{type:Ky.ArrowClosed},data:{name:s.name,passage:s.description,sourceLocation:s.source_location,targetLocation:s.target_location}}}).filter(s=>{const o=r.find(c=>c.id===s.source),l=r.find(c=>c.id===s.target);return o&&l});return{entityNodes:r,actionEdges:a,locationNodes:i}},importFromJSON:n=>{try{const r=JSON.parse(n);t({characters:r.characters||[],events:r.events||[],locations:r.locations||[],terms:r.terms||[],arcs:r.arcs||[],story_summary:r.story_summary||{logline:"",blurb:""},key_events_and_arcs:r.key_events_and_arcs||[],honorifics:r.honorifics||{},recurring_phrases:r.recurring_phrases||{},world_building_notes:r.world_building_notes||[],style_guide:r.style_guide||eV.style_guide,target_language:r.target_language||"en"})}catch(r){console.error("Error importing JSON:",r),alert("Invalid JSON format")}},exportToJSON:()=>{const n=e(),r={target_language:n.target_language,characters:n.characters,events:n.events,locations:n.locations,terms:n.terms,arcs:n.arcs,story_summary:n.story_summary,key_events_and_arcs:n.key_events_and_arcs,honorifics:n.honorifics,recurring_phrases:n.recurring_phrases,world_building_notes:n.world_building_notes,style_guide:n.style_guide};return JSON.stringify(r,null,2)}})),VYe=Object.freeze(Object.defineProperty({__proto__:null,initGemini:kYe,useGlossaryStore:$t},Symbol.toStringTag,{value:"Module"}));function $Ye({type:t,item:e,onClose:n}){var P,O;const r=$t(A=>A.updateCharacter),i=$t(A=>A.updateEvent),a=$t(A=>A.updateLocation),s=$t(A=>A.updateTerm),o=$t(A=>A.deleteCharacter),l=$t(A=>A.deleteEvent),c=$t(A=>A.deleteLocation),f=$t(A=>A.deleteTerm),[h,m]=R.useState(e||{});if(R.useEffect(()=>{e&&m({...e})},[e]),!e)return null;const p=()=>{const A={...h,id:e.id};t==="character"?r(e.id,A):t==="event"?i(e.id,A):t==="location"?a(e.id,A):t==="term"&&s(e.id,A),n()},v=()=>{confirm("Are you sure you want to delete this item?")&&(t==="character"?o(e.id):t==="event"?l(e.id):t==="location"?c(e.id):t==="term"&&f(e.id),n())},y=()=>{const A=[...h.traits||[],"New Trait"];m({...h,traits:A})},x=A=>{const T=h.traits.filter((L,B)=>B!==A);m({...h,traits:T})},S=(A,T)=>{const L=[...h.traits];L[A]=T,m({...h,traits:L})},_=()=>{const A=[...h.relationships||[],{character_name:"",relationship_type:"",description:"",sentiment:"neutral"}];m({...h,relationships:A})},N=A=>{const T=h.relationships.filter((L,B)=>B!==A);m({...h,relationships:T})},k=(A,T,L)=>{const B=[...h.relationships];B[A]={...B[A],[T]:L},m({...h,relationships:B})};return b.jsxDEV("div",{style:{position:"fixed",right:0,top:0,height:"100vh",width:"400px",background:"white",boxShadow:"-2px 0 10px rgba(0,0,0,0.1)",zIndex:1e3,overflowY:"auto",padding:"20px"},children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[b.jsxDEV("h2",{style:{fontSize:"20px",fontWeight:"bold",margin:0},children:["Edit ",t.charAt(0).toUpperCase()+t.slice(1)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:115,columnNumber:9},this),b.jsxDEV(et,{size:"sm",variant:"flat",onPress:n,children:"Close"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:118,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:114,columnNumber:7},this),b.jsxDEV(wn,{children:b.jsxDEV(vn,{style:{gap:"15px"},children:[b.jsxDEV(on,{label:"Name",value:h.name||"",onChange:A=>m({...h,name:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:125,columnNumber:11},this),t==="character"&&b.jsxDEV(b.Fragment,{children:[b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[b.jsxDEV(on,{label:"Korean Name ( )",value:h.korean_name||"",onChange:A=>m({...h,korean_name:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:134,columnNumber:17},this),b.jsxDEV(on,{label:"English Name",value:h.english_name||"",onChange:A=>m({...h,english_name:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:139,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:133,columnNumber:15},this),b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[b.jsxDEV(on,{label:"Korean Surname ()",value:h.korean_surname||"",onChange:A=>m({...h,korean_surname:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:147,columnNumber:17},this),b.jsxDEV(on,{label:"Korean Given Name ()",value:h.korean_given_name||"",onChange:A=>m({...h,korean_given_name:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:152,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:146,columnNumber:15},this),b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[b.jsxDEV(on,{label:"Surname (Family Name)",value:h.surname||"",onChange:A=>m({...h,surname:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:160,columnNumber:17},this),b.jsxDEV(on,{label:"Given Name",value:h.given_name||"",onChange:A=>m({...h,given_name:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:165,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:159,columnNumber:15},this),b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:[b.jsxDEV(on,{label:"Emoji",value:h.emoji||"",onChange:A=>m({...h,emoji:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:173,columnNumber:17},this),b.jsxDEV(on,{label:"Age",value:h.age||"",onChange:A=>m({...h,age:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:178,columnNumber:17},this),b.jsxDEV(io,{label:"Gender",selectedKeys:h.gender?[h.gender]:[],onChange:A=>m({...h,gender:A.target.value}),children:[b.jsxDEV(jn,{value:"male",children:"Male"},"male",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:188,columnNumber:19},this),b.jsxDEV(jn,{value:"female",children:"Female"},"female",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:189,columnNumber:19},this),b.jsxDEV(jn,{value:"other",children:"Other"},"other",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:190,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:183,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:172,columnNumber:15},this),b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[b.jsxDEV(io,{label:"Role",selectedKeys:h.role?[h.role]:["minor"],onChange:A=>m({...h,role:A.target.value}),children:[b.jsxDEV(jn,{value:"protagonist",children:"Protagonist"},"protagonist",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:200,columnNumber:19},this),b.jsxDEV(jn,{value:"antagonist",children:"Antagonist"},"antagonist",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:201,columnNumber:19},this),b.jsxDEV(jn,{value:"major",children:"Major"},"major",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:202,columnNumber:19},this),b.jsxDEV(jn,{value:"supporting",children:"Supporting"},"supporting",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:203,columnNumber:19},this),b.jsxDEV(jn,{value:"minor",children:"Minor"},"minor",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:204,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:195,columnNumber:17},this),b.jsxDEV(io,{label:"Age Group",selectedKeys:h.age_group?[h.age_group]:["adult"],onChange:A=>m({...h,age_group:A.target.value}),children:[b.jsxDEV(jn,{value:"child",children:"Child"},"child",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:211,columnNumber:19},this),b.jsxDEV(jn,{value:"teen",children:"Teen"},"teen",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:212,columnNumber:19},this),b.jsxDEV(jn,{value:"young_adult",children:"Young Adult"},"young_adult",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:213,columnNumber:19},this),b.jsxDEV(jn,{value:"adult",children:"Adult"},"adult",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:214,columnNumber:19},this),b.jsxDEV(jn,{value:"elderly",children:"Elderly"},"elderly",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:215,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:206,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:194,columnNumber:15},this),b.jsxDEV(on,{label:"Occupation",value:h.occupation||"",onChange:A=>m({...h,occupation:A.target.value}),placeholder:"e.g., Executive Director, Secretary, A-rank Esper"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:219,columnNumber:15},this),b.jsxDEV(on,{label:"Speech Style ()",value:h.speech_style||"",onChange:A=>m({...h,speech_style:A.target.value}),placeholder:"e.g., formal (), casual (), rough, archaic"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:226,columnNumber:15},this),b.jsxDEV(on,{label:"First Appearance",value:h.first_appearance||"",onChange:A=>m({...h,first_appearance:A.target.value}),placeholder:"e.g., Chapter 1, during school entrance"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:233,columnNumber:15},this),b.jsxDEV(nr,{label:"Physical Appearance",value:h.physical_appearance||"",onChange:A=>m({...h,physical_appearance:A.target.value}),minRows:3,placeholder:"Detailed physical description"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:240,columnNumber:15},this),b.jsxDEV(nr,{label:"Personality",value:h.personality||"",onChange:A=>m({...h,personality:A.target.value}),minRows:3,placeholder:"Personality description"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:247,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:132,columnNumber:13},this),t==="location"&&b.jsxDEV(b.Fragment,{children:[b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[b.jsxDEV(on,{label:"Korean Name ( )",value:h.korean_name||"",onChange:A=>m({...h,korean_name:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:260,columnNumber:17},this),b.jsxDEV(on,{label:"Emoji",value:h.emoji||"",onChange:A=>m({...h,emoji:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:265,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:259,columnNumber:15},this),b.jsxDEV(io,{label:"Type",selectedKeys:h.type?[h.type]:[],onChange:A=>m({...h,type:A.target.value}),children:[b.jsxDEV(jn,{value:"city",children:"City"},"city",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:276,columnNumber:17},this),b.jsxDEV(jn,{value:"building",children:"Building"},"building",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:277,columnNumber:17},this),b.jsxDEV(jn,{value:"room",children:"Room"},"room",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:278,columnNumber:17},this),b.jsxDEV(jn,{value:"natural",children:"Natural"},"natural",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:279,columnNumber:17},this),b.jsxDEV(jn,{value:"other",children:"Other"},"other",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:280,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:271,columnNumber:15},this),b.jsxDEV(nr,{label:"Atmosphere",value:h.atmosphere||"",onChange:A=>m({...h,atmosphere:A.target.value}),minRows:2,placeholder:"e.g., bustling and modern, ancient and mysterious"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:282,columnNumber:15},this),b.jsxDEV(nr,{label:"Significance",value:h.significance||"",onChange:A=>m({...h,significance:A.target.value}),minRows:2,placeholder:"e.g., protagonist's hometown, main setting"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:289,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:258,columnNumber:13},this),b.jsxDEV(nr,{label:"Description",value:h.description||"",onChange:A=>m({...h,description:A.target.value}),minRows:3},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:299,columnNumber:11},this),t==="character"&&b.jsxDEV(b.Fragment,{children:[b.jsxDEV("div",{children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[b.jsxDEV("label",{style:{fontWeight:"bold",fontSize:"14px"},children:"Personality Traits ()"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:310,columnNumber:19},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(ug,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:311,columnNumber:66},this),onPress:y,children:"Add Trait"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:311,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:309,columnNumber:17},this),(P=h.traits)==null?void 0:P.map((A,T)=>b.jsxDEV("div",{style:{display:"flex",gap:"5px",marginBottom:"5px"},children:[b.jsxDEV(on,{size:"sm",value:A,onChange:L=>S(T,L.target.value),placeholder:"e.g., confident, analytical"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:317,columnNumber:21},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>x(T),children:b.jsxDEV(KM,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:324,columnNumber:23},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:323,columnNumber:21},this)]},T,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:316,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:308,columnNumber:15},this),b.jsxDEV(Bn,{style:{margin:"15px 0"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:330,columnNumber:15},this),b.jsxDEV("div",{children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[b.jsxDEV("label",{style:{fontWeight:"bold",fontSize:"14px"},children:"Abilities ()"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:334,columnNumber:19},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(ug,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:335,columnNumber:66},this),onPress:()=>{const A=[...h.abilities||[],"New Ability"];m({...h,abilities:A})},children:"Add Ability"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:335,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:333,columnNumber:17},this),(h.abilities||[]).map((A,T)=>b.jsxDEV("div",{style:{display:"flex",gap:"5px",marginBottom:"5px"},children:[b.jsxDEV(on,{size:"sm",value:A,onChange:L=>{const B=[...h.abilities];B[T]=L.target.value,m({...h,abilities:B})},placeholder:"e.g., Cryokinesis, Master Swordsmanship"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:344,columnNumber:21},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>{const L=h.abilities.filter((B,W)=>W!==T);m({...h,abilities:L})},children:b.jsxDEV(KM,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:358,columnNumber:23},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:354,columnNumber:21},this)]},T,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:343,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:332,columnNumber:15},this),b.jsxDEV(Bn,{style:{margin:"15px 0"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:364,columnNumber:15},this),b.jsxDEV("div",{children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[b.jsxDEV("label",{style:{fontWeight:"bold",fontSize:"14px"},children:"Relationships ()"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:368,columnNumber:19},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(ug,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:369,columnNumber:66},this),onPress:_,children:"Add Relationship"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:369,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:367,columnNumber:17},this),(O=h.relationships)==null?void 0:O.map((A,T)=>b.jsxDEV(wn,{style:{marginBottom:"10px",padding:"10px"},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[b.jsxDEV(on,{size:"sm",label:"Character Name",value:A.character_name,onChange:L=>k(T,"character_name",L.target.value)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:376,columnNumber:23},this),b.jsxDEV(on,{size:"sm",label:"Relationship Type",placeholder:"e.g., , , , ",value:A.relationship_type,onChange:L=>k(T,"relationship_type",L.target.value)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:382,columnNumber:23},this),b.jsxDEV(io,{size:"sm",label:"Sentiment",selectedKeys:[A.sentiment||"neutral"],onChange:L=>k(T,"sentiment",L.target.value),children:[b.jsxDEV(jn,{value:"positive",children:" (Positive)"},"positive",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:395,columnNumber:25},this),b.jsxDEV(jn,{value:"negative",children:" (Negative)"},"negative",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:396,columnNumber:25},this),b.jsxDEV(jn,{value:"neutral",children:" (Neutral)"},"neutral",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:397,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:389,columnNumber:23},this),b.jsxDEV(nr,{size:"sm",label:"Description",placeholder:"  ",value:A.description,onChange:L=>k(T,"description",L.target.value),minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:399,columnNumber:23},this),b.jsxDEV(et,{size:"sm",variant:"flat",color:"danger",startContent:b.jsxDEV(KM,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:407,columnNumber:85},this),onPress:()=>N(T),children:"Remove Relationship"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:407,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:375,columnNumber:21},this)},T,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:374,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:366,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:307,columnNumber:13},this),t==="event"&&b.jsxDEV(b.Fragment,{children:[b.jsxDEV(on,{label:"Source Location",value:h.source_location||"",onChange:A=>m({...h,source_location:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:419,columnNumber:15},this),b.jsxDEV(on,{label:"Target Location",value:h.target_location||"",onChange:A=>m({...h,target_location:A.target.value})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:424,columnNumber:15},this),b.jsxDEV(io,{label:"Importance",selectedKeys:[h.importance||"minor"],onChange:A=>m({...h,importance:A.target.value}),children:[b.jsxDEV(jn,{value:"major",children:"Major"},"major",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:434,columnNumber:17},this),b.jsxDEV(jn,{value:"minor",children:"Minor"},"minor",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:435,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:429,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:418,columnNumber:13},this),t==="term"&&b.jsxDEV(b.Fragment,{children:[b.jsxDEV(on,{label:"Original Term (Korean)",value:h.original||"",onChange:A=>m({...h,original:A.target.value}),placeholder:" "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:442,columnNumber:15},this),b.jsxDEV(on,{label:"Translation (English)",value:h.translation||"",onChange:A=>m({...h,translation:A.target.value}),placeholder:"English translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:448,columnNumber:15},this),b.jsxDEV(nr,{label:"Context",value:h.context||"",onChange:A=>m({...h,context:A.target.value}),minRows:2,placeholder:"Usage context"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:454,columnNumber:15},this),b.jsxDEV(io,{label:"Category",selectedKeys:[h.category||"other"],onChange:A=>m({...h,category:A.target.value}),children:[b.jsxDEV(jn,{value:"name",children:"Name"},"name",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:466,columnNumber:17},this),b.jsxDEV(jn,{value:"place",children:"Place"},"place",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:467,columnNumber:17},this),b.jsxDEV(jn,{value:"item",children:"Item"},"item",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:468,columnNumber:17},this),b.jsxDEV(jn,{value:"concept",children:"Concept"},"concept",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:469,columnNumber:17},this),b.jsxDEV(jn,{value:"martial_arts",children:"Martial Arts"},"martial_arts",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:470,columnNumber:17},this),b.jsxDEV(jn,{value:"cultural",children:"Cultural"},"cultural",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:471,columnNumber:17},this),b.jsxDEV(jn,{value:"technical",children:"Technical"},"technical",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:472,columnNumber:17},this),b.jsxDEV(jn,{value:"other",children:"Other"},"other",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:473,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:461,columnNumber:15},this),b.jsxDEV(on,{label:"First Appearance",value:h.first_appearance||"",onChange:A=>m({...h,first_appearance:A.target.value}),placeholder:"e.g., Chapter 1 during school entrance"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:475,columnNumber:15},this),b.jsxDEV(nr,{label:"Translation Notes",value:h.notes||"",onChange:A=>m({...h,notes:A.target.value}),minRows:2,placeholder:"Special notes for translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:481,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:441,columnNumber:13},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:491,columnNumber:11},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px"},children:[b.jsxDEV(et,{color:"secondary",onPress:p,style:{flex:1},children:"Save Changes"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:494,columnNumber:13},this),b.jsxDEV(et,{color:"danger",variant:"flat",onPress:v,children:"Delete"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:497,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:493,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:124,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:123,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryEditPanel.tsx",lineNumber:102,columnNumber:5},this)}function LYe(t){var A,T,L;const e=UP(t.source),n=UP(t.target),{getEdges:r}=jm(),{sx:i,sy:a,tx:s,ty:o,sourcePos:l,targetPos:c}=$ce(e,n);let[f,h,m]=TR({sourceX:i,sourceY:a,sourcePosition:l,targetPosition:c,targetX:s,targetY:o});const v=Ce(B=>B.selectedEdges).includes(t.id),y=r(),x=R.useMemo(()=>y.filter(B=>B.source===t.source&&B.target===t.target),[y,t.source,t.target]),S=R.useMemo(()=>y.filter(B=>B.source===t.target&&B.target===t.source),[y,t.source,t.target]),_=t.sourceX>t.targetX,k=x.findIndex(B=>B.id===t.id)===x.length-1,P=((A=t.data)==null?void 0:A.sentiment)==="negative"?"#ef4444":((T=t.data)==null?void 0:T.sentiment)==="positive"?"#22c55e":"#6b7280";if(t.source===t.target){const B=(t.sourceX-t.targetX)*.6,W=50;f=`M ${t.sourceX-5} ${t.sourceY} A ${B} ${W} 0 1 0 ${t.targetX+2} ${t.targetY}`,h=(t.sourceX+t.targetX)/2,m=t.sourceY+(t.sourceY>t.targetY?-W*1.5:W*1.5)}let O=`translate(-50%, -50%) translate(${h}px,${m}px)`;return S.length>0&&(_?O=`translate(-50%, -105%) translate(${h}px,${m}px)`:O=`translate(-50%, 5%) translate(${h}px,${m}px)`),b.jsxDEV(b.Fragment,{children:[b.jsxDEV(fx,{path:f,markerEnd:{...t.markerEnd,color:P},style:{...t.style,stroke:P,strokeWidth:3,cursor:"pointer",opacity:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/RelationshipEdgeComponent.tsx",lineNumber:67,columnNumber:7},this),b.jsxDEV(tce,{children:b.jsxDEV("div",{style:{position:"absolute",display:k||v?"flex":"none",transform:O,fontSize:12,pointerEvents:"none",zIndex:v?9999:0,background:"white",color:P,border:`1px solid ${P}`,borderRadius:4,padding:"2px 4px"},children:(L=t.data)==null?void 0:L.relationship},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/RelationshipEdgeComponent.tsx",lineNumber:70,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/RelationshipEdgeComponent.tsx",lineNumber:69,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/RelationshipEdgeComponent.tsx",lineNumber:66,columnNumber:5},this)}const FYe=t=>{const e=["","","","","","","friend","ally","lover","family","mentor","","","","","","","","",""],n=["","","","","","enemy","rival","hate","antagonist","","","",""],r=t.toLowerCase();return e.some(i=>r.includes(i))?"positive":n.some(i=>r.includes(i))?"negative":"neutral"},Jv=t=>{switch(t){case"positive":return"#22c55e";case"negative":return"#ef4444";case"neutral":return"#6b7280"}},BYe=t=>{switch(t){case"positive":return"";case"negative":return"";case"neutral":return""}};function Kce({characters:t,onCharacterSelect:e,selectedCharacterId:n}){const[r,i]=R.useState([]),[a,s]=R.useState([]),[o,l]=R.useState(null),[c,f]=R.useState(null),[h,m]=R.useState(()=>{try{const S=localStorage.getItem("vsw.relations.positions")||"{}";return JSON.parse(S)}catch{return{}}}),p=$t(S=>S.arcs),v=c?(()=>{const S=p.find(_=>_.id===c);return S?t.filter(_=>S.characters.some(N=>{var k;return N.toLowerCase()===_.name.toLowerCase()||N.toLowerCase()===((k=_.korean_name)==null?void 0:k.toLowerCase())})):t})():t;R.useEffect(()=>{if(v.length===0){i([]),s([]);return}const S=400,_=300,N=Math.min(250,150+v.length*20),k=v.map((T,L)=>{var q;const B=h[T.id],W=L/Math.max(v.length,1)*2*Math.PI-Math.PI/2,Y=B?B.x:S+N*Math.cos(W),V=B?B.y:_+N*Math.sin(W),I=((q=T.relationships)==null?void 0:q.length)||0,H=T.id===n;return{id:T.id,type:"default",position:{x:Y,y:V},data:{character:T,isSelected:H,label:b.jsxDEV("div",{style:{padding:"14px 18px",background:H?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"white",color:H?"white":"black",borderRadius:"12px",border:H?"3px solid #667eea":"2px solid #e5e7eb",cursor:"pointer",minWidth:"130px",textAlign:"center",fontWeight:H?"bold":"600",boxShadow:H?"0 8px 20px rgba(102, 126, 234, 0.3)":"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px"},children:[b.jsxDEV("div",{style:{fontSize:"28px"},children:T.emoji},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:148,columnNumber:15},this),b.jsxDEV("div",{style:{fontSize:"15px",fontWeight:"bold",lineHeight:"1.2"},children:T.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:149,columnNumber:15},this),T.korean_name&&b.jsxDEV("div",{style:{fontSize:"11px",opacity:.8,fontWeight:"normal"},children:T.korean_name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:153,columnNumber:17},this),I>0&&b.jsxDEV("div",{style:{fontSize:"10px",opacity:.7,marginTop:"2px",padding:"2px 6px",background:H?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.05)",borderRadius:"4px"},children:[I," ",I===1?"relation":"relations"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:162,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:129,columnNumber:13},this)}}}),P=[],O=new Set,A=c?p.find(T=>T.id===c):null;v.forEach(T=>{!T.relationships||T.relationships.length===0||T.relationships.filter(L=>A?!L.arc_id||L.arc_id===A.name||L.arc_id===A.id:!0).forEach(L=>{const B=v.find(W=>{var Y,V;return W.name.toLowerCase().trim()===L.character_name.toLowerCase().trim()||((Y=W.korean_name)==null?void 0:Y.toLowerCase().trim())===L.character_name.toLowerCase().trim()||((V=W.english_name)==null?void 0:V.toLowerCase().trim())===L.character_name.toLowerCase().trim()});if(B){const W=`${T.id}-${B.id}`,Y=`${B.id}-${T.id}`;if(!O.has(W)&&!O.has(Y)){O.add(W);const V=L.sentiment||FYe(L.relationship_type),I=Jv(V);P.push({id:`${T.id}-${B.id}`,source:T.id,target:B.id,label:L.relationship_type,animated:!1,style:{stroke:I,strokeWidth:V==="neutral"?2.5:3.5},labelStyle:{fill:I,fontWeight:700,fontSize:13},labelBgStyle:{fill:"white",fillOpacity:.95},labelBgPadding:[10,8],markerEnd:{type:Ky.ArrowClosed,width:24,height:24,color:I},data:{relationship:L.relationship_type,description:L.description,sentiment:V,sourceCharacter:T.name,targetCharacter:B.name}})}}else console.warn(`Relationship target not found: "${L.character_name}" for character "${T.name}"`)})}),console.log(`Characters: ${v.length}, Edges: ${P.length}`),i(k),s(P)},[v,n,c,p]);const y=S=>{i(N=>Fw(S,N));const _=S.filter(N=>N.type==="position"&&N.position);_.length>0&&m(N=>{const k={...N};_.forEach(P=>{k[P.id]={x:P.position.x,y:P.position.y}});try{localStorage.setItem("vsw.relations.positions",JSON.stringify(k))}catch{}return k})},x={relationshipEdge:LYe};return b.jsxDEV("div",{style:{width:"100%",height:"100%",position:"relative"},children:[p.length>0&&b.jsxDEV("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:10,display:"flex",gap:"8px",flexWrap:"wrap",maxWidth:"400px",justifyContent:"flex-end"},children:[b.jsxDEV(Fn,{color:c?"default":"secondary",variant:c?"bordered":"solid",onClick:()=>f(null),style:{cursor:"pointer"},children:"All Characters"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:290,columnNumber:11},this),p.map(S=>b.jsxDEV(Fn,{color:c===S.id?"secondary":"default",variant:c===S.id?"solid":"bordered",onClick:()=>f(S.id),style:{cursor:"pointer"},children:S.name},S.id,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:299,columnNumber:13},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:279,columnNumber:9},this),v.length===0?b.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#999",fontSize:"16px"},children:c?"No characters in this arc":"No characters to display"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:313,columnNumber:9},this):b.jsxDEV(AR,{nodes:r,edges:a.map(S=>({...S,type:"relationshipEdge"})),nodesDraggable:!0,nodesConnectable:!1,onNodesChange:y,onNodeClick:(S,_)=>{e(_.data.character),l(null)},edgeTypes:x,onEdgeClick:(S,_)=>{l(_)},onPaneClick:()=>{l(null)},fitView:!0,attributionPosition:"bottom-left",minZoom:.5,maxZoom:2,children:[b.jsxDEV(UF,{variant:xd.Dots,gap:16,size:1,color:"#e5e7eb"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:347,columnNumber:11},this),b.jsxDEV(WF,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:348,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:324,columnNumber:9},this),b.jsxDEV("div",{style:{position:"absolute",top:"10px",left:"10px",background:"white",padding:"12px 16px",borderRadius:"10px",boxShadow:"0 2px 12px rgba(0,0,0,0.12)",fontSize:"12px",display:"flex",flexDirection:"column",gap:"8px",zIndex:10},children:[b.jsxDEV("div",{style:{fontWeight:"bold",fontSize:"13px",marginBottom:"2px"},children:" "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:366,columnNumber:9},this),b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[b.jsxDEV("div",{style:{width:"24px",height:"3px",background:"#22c55e",borderRadius:"2px"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:368,columnNumber:11},this),b.jsxDEV("span",{children:" (, , )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:369,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:367,columnNumber:9},this),b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[b.jsxDEV("div",{style:{width:"24px",height:"3px",background:"#ef4444",borderRadius:"2px"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:372,columnNumber:11},this),b.jsxDEV("span",{children:" (, )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:373,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:371,columnNumber:9},this),b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[b.jsxDEV("div",{style:{width:"24px",height:"2px",background:"#6b7280",borderRadius:"2px"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:376,columnNumber:11},this),b.jsxDEV("span",{children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:377,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:375,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:352,columnNumber:7},this),o&&b.jsxDEV("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"white",padding:"20px 24px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.2)",maxWidth:"500px",width:"90%",zIndex:20,border:`3px solid ${Jv(o.data.sentiment)}`},children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px"},children:[b.jsxDEV("div",{style:{flex:1},children:[b.jsxDEV("div",{style:{fontSize:"12px",color:"#888",marginBottom:"4px"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:403,columnNumber:15},this),b.jsxDEV("div",{style:{fontSize:"18px",fontWeight:"bold",color:Jv(o.data.sentiment),marginBottom:"8px"},children:o.data.relationship},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:404,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:402,columnNumber:13},this),b.jsxDEV("button",{onClick:()=>l(null),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#999",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:413,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:396,columnNumber:11},this),b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[b.jsxDEV("div",{style:{fontSize:"14px",fontWeight:"600"},children:o.data.sourceCharacter},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:442,columnNumber:13},this),b.jsxDEV("div",{style:{fontSize:"20px",color:Jv(o.data.sentiment)},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:445,columnNumber:13},this),b.jsxDEV("div",{style:{fontSize:"14px",fontWeight:"600"},children:o.data.targetCharacter},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:451,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:433,columnNumber:11},this),b.jsxDEV("div",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",marginBottom:"12px",background:`${Jv(o.data.sentiment)}20`,color:Jv(o.data.sentiment)},children:[BYe(o.data.sentiment)," "]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:456,columnNumber:11},this),o.data.description&&b.jsxDEV("div",{children:[b.jsxDEV("div",{style:{fontSize:"12px",color:"#888",marginBottom:"6px",fontWeight:"600"},children:" "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:471,columnNumber:15},this),b.jsxDEV("div",{style:{fontSize:"14px",lineHeight:"1.6",color:"#333",background:"#f9fafb",padding:"12px",borderRadius:"8px",borderLeft:`4px solid ${Jv(o.data.sentiment)}`},children:o.data.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:474,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:470,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:382,columnNumber:9},this),a.length===0&&v.length>0&&b.jsxDEV("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255, 255, 255, 0.95)",padding:"20px 30px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",textAlign:"center",zIndex:5},children:[b.jsxDEV("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"8px",color:"#667eea"},children:"  "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:503,columnNumber:11},this),b.jsxDEV("div",{style:{fontSize:"13px",color:"#666"},children:"      "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:506,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:491,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/CharacterRelationshipGraph.tsx",lineNumber:276,columnNumber:5},this)}function UYe(){var T,L,B,W,Y,V,I,H,q;const t=$t(F=>F.story_summary),e=$t(F=>F.key_events_and_arcs),n=$t(F=>F.style_guide),r=$t(F=>F.world_building_notes),i=$t(F=>F.honorifics),a=$t(F=>F.recurring_phrases),s=$t(F=>F.updateStorySummary),o=$t(F=>F.updateStyleGuide),l=$t(F=>F.addKeyEvent),c=$t(F=>F.updateKeyEvent),f=$t(F=>F.deleteKeyEvent),h=$t(F=>F.addWorldBuildingNote),m=$t(F=>F.updateWorldBuildingNote),p=$t(F=>F.deleteWorldBuildingNote),v=$t(F=>F.addHonorific),y=$t(F=>F.updateHonorific),x=$t(F=>F.deleteHonorific),S=$t(F=>F.addRecurringPhrase),_=$t(F=>F.updateRecurringPhrase),N=$t(F=>F.deleteRecurringPhrase),[k,P]=it.useState(null),[O,A]=it.useState(null);return it.useEffect(()=>{console.log("Story Features Data:",{storySummary:t,keyEventsCount:(e==null?void 0:e.length)||0,worldBuildingNotesCount:(r==null?void 0:r.length)||0,honorificsCount:Object.keys(i||{}).length,recurringPhrasesCount:Object.keys(a||{}).length,styleGuide:n})},[t,e,r,i,a,n]),b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Story Summary ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:60,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:59,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:62,columnNumber:9},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV(nr,{label:"Logline (  )",value:(t==null?void 0:t.logline)||"",onChange:F=>s({logline:F.target.value}),placeholder:"A one-sentence, tantalizing summary of the entire story.",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:65,columnNumber:13},this),b.jsxDEV(nr,{label:"Blurb ( )",value:(t==null?void 0:t.blurb)||"",onChange:F=>s({blurb:F.target.value}),placeholder:"A short, enticing paragraph describing the main plot, core conflict, and stakes.",minRows:4},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:72,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:64,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:63,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:58,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Key Story Arcs (  )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:86,columnNumber:13},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(ug,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:90,columnNumber:29},this),onPress:()=>l("New key event"),children:"Add Event"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:87,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:85,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:84,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:97,columnNumber:9},this),b.jsxDEV(vn,{children:e.length>0?b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:e.map((F,J)=>b.jsxDEV("div",{style:{display:"flex",gap:"10px",alignItems:"start"},children:[b.jsxDEV("div",{style:{minWidth:"24px",height:"24px",borderRadius:"50%",background:"#667eea",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",marginTop:"8px"},children:J+1},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:103,columnNumber:19},this),b.jsxDEV(nr,{value:F,onChange:Z=>c(J,Z.target.value),minRows:2,style:{flex:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:118,columnNumber:19},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>f(J),children:b.jsxDEV(Sy,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:131,columnNumber:21},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:124,columnNumber:19},this)]},J,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:102,columnNumber:17},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:100,columnNumber:13},this):b.jsxDEV("p",{style:{color:"#888",fontStyle:"italic"},children:'No key events extracted yet. Click "Add Event" to add one manually, or extract from text.'},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:137,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:98,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:83,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"World Building Notes ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:145,columnNumber:13},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(ug,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:149,columnNumber:29},this),onPress:()=>h("New world building note"),children:"Add Note"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:146,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:144,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:143,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:156,columnNumber:9},this),b.jsxDEV(vn,{children:r.length>0?b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:r.map((F,J)=>b.jsxDEV("div",{style:{display:"flex",gap:"10px",alignItems:"start"},children:[b.jsxDEV(nr,{value:F,onChange:Z=>m(J,Z.target.value),minRows:2,style:{flex:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:162,columnNumber:19},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>p(J),children:b.jsxDEV(Sy,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:175,columnNumber:21},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:168,columnNumber:19},this)]},J,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:161,columnNumber:17},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:159,columnNumber:13},this):b.jsxDEV("p",{style:{color:"#888",fontStyle:"italic"},children:'No world building notes extracted yet. Click "Add Note" to add one manually, or extract from text.'},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:181,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:157,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:142,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Style & Genre ( & )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:188,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:187,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:190,columnNumber:9},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[b.jsxDEV(on,{label:"Genre ()",value:(n==null?void 0:n.genre)||"",onChange:F=>o({genre:F.target.value}),placeholder:"e.g., Fantasy Romance, School Life"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:194,columnNumber:15},this),b.jsxDEV(on,{label:"Content Rating",value:(n==null?void 0:n.content_rating)||"",onChange:F=>o({content_rating:F.target.value}),placeholder:"e.g., Teen, Young Adult, Mature"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:200,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:193,columnNumber:13},this),b.jsxDEV(nr,{label:"Sub-genres ( , comma-separated)",value:((T=n==null?void 0:n.sub_genres)==null?void 0:T.join(", "))||"",onChange:F=>o({sub_genres:F.target.value.split(",").map(J=>J.trim()).filter(Boolean)}),placeholder:"e.g., slice of life, drama, action",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:208,columnNumber:13},this),b.jsxDEV(nr,{label:"Themes (, comma-separated)",value:((L=n==null?void 0:n.themes)==null?void 0:L.join(", "))||"",onChange:F=>o({themes:F.target.value.split(",").map(J=>J.trim()).filter(Boolean)}),placeholder:"e.g., trauma, power dynamics, romance",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:216,columnNumber:13},this),b.jsxDEV(nr,{label:"Tone ()",value:(n==null?void 0:n.tone)||"",onChange:F=>o({tone:F.target.value}),placeholder:"e.g., Romantic and intimate, with underlying tension",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:224,columnNumber:13},this),b.jsxDEV(on,{label:"Formality Level",value:(n==null?void 0:n.formality_level)||"",onChange:F=>o({formality_level:F.target.value}),placeholder:"e.g., high, medium, low"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:232,columnNumber:13},this),b.jsxDEV(on,{label:"Dialogue Style",value:(n==null?void 0:n.dialogue_style)||"",onChange:F=>o({dialogue_style:F.target.value}),placeholder:"e.g., natural, age-appropriate"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:239,columnNumber:13},this),b.jsxDEV(nr,{label:"Narrative Vocabulary",value:(n==null?void 0:n.narrative_vocabulary)||"",onChange:F=>o({narrative_vocabulary:F.target.value}),placeholder:"e.g., Descriptive and emotional, focusing on sensory details",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:246,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:192,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:191,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:186,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Translation Guidelines ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:259,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:258,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:261,columnNumber:9},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV(on,{label:"Name Format",value:(n==null?void 0:n.name_format)||"",onChange:F=>o({name_format:F.target.value}),placeholder:"e.g., english_given_name english_surname"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:264,columnNumber:13},this),b.jsxDEV(nr,{label:"Honorific Usage",value:(n==null?void 0:n.honorific_usage)||"",onChange:F=>o({honorific_usage:F.target.value}),placeholder:"Guidelines for translating Korean honorifics",minRows:3},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:271,columnNumber:13},this),b.jsxDEV(nr,{label:"Formal Speech Level",value:(n==null?void 0:n.formal_speech_level)||"",onChange:F=>o({formal_speech_level:F.target.value}),placeholder:"How to match English formality to Korean speech levels",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:279,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:263,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:262,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:257,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Narrative Style ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:292,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:291,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:294,columnNumber:9},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:[b.jsxDEV(on,{label:"Point of View",value:((B=n.narrative_style)==null?void 0:B.point_of_view)||"",onChange:F=>o({narrative_style:{...n.narrative_style,point_of_view:F.target.value}}),placeholder:"e.g., first-person, third-person"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:298,columnNumber:15},this),b.jsxDEV(on,{label:"Tense",value:((W=n.narrative_style)==null?void 0:W.tense)||"",onChange:F=>o({narrative_style:{...n.narrative_style,tense:F.target.value}}),placeholder:"e.g., past, present"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:307,columnNumber:15},this),b.jsxDEV(on,{label:"Voice",value:((Y=n.narrative_style)==null?void 0:Y.voice)||"",onChange:F=>o({narrative_style:{...n.narrative_style,voice:F.target.value}}),placeholder:"e.g., introspective"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:316,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:297,columnNumber:13},this),b.jsxDEV(nr,{label:"Common Expressions (comma-separated)",value:((I=(V=n.narrative_style)==null?void 0:V.common_expressions)==null?void 0:I.join(", "))||"",onChange:F=>o({narrative_style:{...n.narrative_style,common_expressions:F.target.value.split(",").map(J=>J.trim()).filter(Boolean)}}),placeholder:"e.g.,  ,  ",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:326,columnNumber:13},this),b.jsxDEV(nr,{label:"Atmosphere Descriptors (comma-separated)",value:((q=(H=n.narrative_style)==null?void 0:H.atmosphere_descriptors)==null?void 0:q.join(", "))||"",onChange:F=>o({narrative_style:{...n.narrative_style,atmosphere_descriptors:F.target.value.split(",").map(J=>J.trim()).filter(Boolean)}}),placeholder:"e.g., tense, intimate, sensual",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:339,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:296,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:295,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:290,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Honorifics ()"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:358,columnNumber:13},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(ug,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:362,columnNumber:29},this),onPress:()=>P({original:"",korean:"",explanation:""}),children:"Add Honorific"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:359,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:357,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:356,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:369,columnNumber:9},this),b.jsxDEV(vn,{children:Object.keys(i).length>0?b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[k&&!k.original&&b.jsxDEV("div",{style:{padding:"15px",background:"#f0f9ff",borderRadius:"8px",border:"2px solid #667eea"},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[b.jsxDEV("h4",{style:{fontWeight:"bold",fontSize:"14px",margin:0},children:"Add New Honorific"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:376,columnNumber:21},this),b.jsxDEV(on,{label:"Korean Honorific ()",value:k.korean,onChange:F=>P({...k,korean:F.target.value}),placeholder:"e.g., , , ",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:377,columnNumber:21},this),b.jsxDEV(nr,{label:"Translation/Explanation",value:k.explanation,onChange:F=>P({...k,explanation:F.target.value}),placeholder:"Explain how to translate this honorific",minRows:2,size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:384,columnNumber:21},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[b.jsxDEV(et,{size:"sm",variant:"flat",onPress:()=>P(null),children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:393,columnNumber:23},this),b.jsxDEV(et,{size:"sm",color:"primary",onPress:()=>{k.korean&&k.explanation&&(v(k.korean,k.explanation),P(null))},children:"Save"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:400,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:392,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:375,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:374,columnNumber:17},this),Object.entries(i).map(([F,J],Z)=>b.jsxDEV(it.Fragment,{children:[b.jsxDEV("div",{style:{padding:"10px",background:"#f9fafb",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"start"},children:[b.jsxDEV("div",{style:{flex:1},children:[b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[b.jsxDEV("span",{style:{fontWeight:"bold",fontSize:"14px"},children:F},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:421,columnNumber:25},this),b.jsxDEV("span",{style:{color:"#888"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:422,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:420,columnNumber:23},this),b.jsxDEV("span",{style:{fontSize:"13px",color:"#666"},children:J},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:424,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:419,columnNumber:21},this),b.jsxDEV("div",{style:{display:"flex",gap:"5px"},children:[b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",onPress:()=>P({original:F,korean:F,explanation:J}),children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:427,columnNumber:23},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>x(F),children:b.jsxDEV(Sy,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:442,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:435,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:426,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:418,columnNumber:19},this),k&&k.original===F&&b.jsxDEV("div",{style:{padding:"15px",background:"#f0f9ff",borderRadius:"8px",border:"2px solid #667eea"},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[b.jsxDEV("h4",{style:{fontWeight:"bold",fontSize:"14px",margin:0},children:"Edit Honorific"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:449,columnNumber:25},this),b.jsxDEV(on,{label:"Korean Honorific ()",value:k.korean,onChange:G=>P({...k,korean:G.target.value}),placeholder:"e.g., , , ",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:450,columnNumber:25},this),b.jsxDEV(nr,{label:"Translation/Explanation",value:k.explanation,onChange:G=>P({...k,explanation:G.target.value}),placeholder:"Explain how to translate this honorific",minRows:2,size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:457,columnNumber:25},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[b.jsxDEV(et,{size:"sm",variant:"flat",onPress:()=>P(null),children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:466,columnNumber:27},this),b.jsxDEV(et,{size:"sm",color:"primary",onPress:()=>{k.korean&&k.explanation&&(y(k.original,k.korean,k.explanation),P(null))},children:"Save"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:473,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:465,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:448,columnNumber:23},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:447,columnNumber:21},this)]},Z,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:417,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:372,columnNumber:13},this):b.jsxDEV(b.Fragment,{children:[k&&b.jsxDEV("div",{style:{padding:"15px",background:"#f0f9ff",borderRadius:"8px",border:"2px solid #667eea",marginBottom:"15px"},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[b.jsxDEV("h4",{style:{fontWeight:"bold",fontSize:"14px",margin:0},children:"Add New Honorific"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:497,columnNumber:21},this),b.jsxDEV(on,{label:"Korean Honorific ()",value:k.korean,onChange:F=>P({...k,korean:F.target.value}),placeholder:"e.g., , , ",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:498,columnNumber:21},this),b.jsxDEV(nr,{label:"Translation/Explanation",value:k.explanation,onChange:F=>P({...k,explanation:F.target.value}),placeholder:"Explain how to translate this honorific",minRows:2,size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:505,columnNumber:21},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[b.jsxDEV(et,{size:"sm",variant:"flat",onPress:()=>P(null),children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:514,columnNumber:23},this),b.jsxDEV(et,{size:"sm",color:"primary",onPress:()=>{k.korean&&k.explanation&&(v(k.korean,k.explanation),P(null))},children:"Save"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:521,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:513,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:496,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:495,columnNumber:17},this),b.jsxDEV("p",{style:{color:"#888",fontStyle:"italic"},children:'No honorifics extracted yet. Click "Add Honorific" to add one manually, or extract from text.'},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:537,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:493,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:370,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:355,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Recurring Phrases ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:546,columnNumber:13},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(ug,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:550,columnNumber:29},this),onPress:()=>A({original:"",korean:"",translation:""}),children:"Add Phrase"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:547,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:545,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:544,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:557,columnNumber:9},this),b.jsxDEV(vn,{children:Object.keys(a).length>0?b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[O&&!O.original&&b.jsxDEV("div",{style:{padding:"15px",background:"#f0f9ff",borderRadius:"8px",border:"2px solid #667eea"},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[b.jsxDEV("h4",{style:{fontWeight:"bold",fontSize:"14px",margin:0},children:"Add New Phrase"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:564,columnNumber:21},this),b.jsxDEV(on,{label:"Korean Phrase ( )",value:O.korean,onChange:F=>A({...O,korean:F.target.value}),placeholder:"e.g.,   ",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:565,columnNumber:21},this),b.jsxDEV(on,{label:"English Translation",value:O.translation,onChange:F=>A({...O,translation:F.target.value}),placeholder:"e.g., at that very moment",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:572,columnNumber:21},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[b.jsxDEV(et,{size:"sm",variant:"flat",onPress:()=>A(null),children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:580,columnNumber:23},this),b.jsxDEV(et,{size:"sm",color:"primary",onPress:()=>{O.korean&&O.translation&&(S(O.korean,O.translation),A(null))},children:"Save"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:587,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:579,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:563,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:562,columnNumber:17},this),Object.entries(a).map(([F,J],Z)=>b.jsxDEV(it.Fragment,{children:[b.jsxDEV("div",{style:{padding:"10px",background:"#f9fafb",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxDEV("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"8px"},children:[b.jsxDEV("span",{style:{fontWeight:"bold",fontSize:"14px"},children:F},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:607,columnNumber:23},this),b.jsxDEV("span",{style:{color:"#888"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:608,columnNumber:23},this),b.jsxDEV("span",{style:{fontSize:"13px",color:"#667eea"},children:J},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:609,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:606,columnNumber:21},this),b.jsxDEV("div",{style:{display:"flex",gap:"5px"},children:[b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",onPress:()=>A({original:F,korean:F,translation:J}),children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:612,columnNumber:23},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>N(F),children:b.jsxDEV(Sy,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:627,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:620,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:611,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:605,columnNumber:19},this),O&&O.original===F&&b.jsxDEV("div",{style:{padding:"15px",background:"#f0f9ff",borderRadius:"8px",border:"2px solid #667eea"},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[b.jsxDEV("h4",{style:{fontWeight:"bold",fontSize:"14px",margin:0},children:"Edit Phrase"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:634,columnNumber:25},this),b.jsxDEV(on,{label:"Korean Phrase ( )",value:O.korean,onChange:G=>A({...O,korean:G.target.value}),placeholder:"e.g.,   ",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:635,columnNumber:25},this),b.jsxDEV(on,{label:"English Translation",value:O.translation,onChange:G=>A({...O,translation:G.target.value}),placeholder:"e.g., at that very moment",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:642,columnNumber:25},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[b.jsxDEV(et,{size:"sm",variant:"flat",onPress:()=>A(null),children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:650,columnNumber:27},this),b.jsxDEV(et,{size:"sm",color:"primary",onPress:()=>{O.korean&&O.translation&&(_(O.original,O.korean,O.translation),A(null))},children:"Save"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:657,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:649,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:633,columnNumber:23},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:632,columnNumber:21},this)]},Z,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:604,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:560,columnNumber:13},this):b.jsxDEV(b.Fragment,{children:[O&&b.jsxDEV("div",{style:{padding:"15px",background:"#f0f9ff",borderRadius:"8px",border:"2px solid #667eea",marginBottom:"15px"},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[b.jsxDEV("h4",{style:{fontWeight:"bold",fontSize:"14px",margin:0},children:"Add New Phrase"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:681,columnNumber:21},this),b.jsxDEV(on,{label:"Korean Phrase ( )",value:O.korean,onChange:F=>A({...O,korean:F.target.value}),placeholder:"e.g.,   ",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:682,columnNumber:21},this),b.jsxDEV(on,{label:"English Translation",value:O.translation,onChange:F=>A({...O,translation:F.target.value}),placeholder:"e.g., at that very moment",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:689,columnNumber:21},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[b.jsxDEV(et,{size:"sm",variant:"flat",onPress:()=>A(null),children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:697,columnNumber:23},this),b.jsxDEV(et,{size:"sm",color:"primary",onPress:()=>{O.korean&&O.translation&&(S(O.korean,O.translation),A(null))},children:"Save"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:704,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:696,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:680,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:679,columnNumber:17},this),b.jsxDEV("p",{style:{color:"#888",fontStyle:"italic"},children:'No recurring phrases extracted yet. Click "Add Phrase" to add one manually, or extract from text.'},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:720,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:677,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:558,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:543,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:57,columnNumber:5},this)}function WYe(){const[t,e]=R.useState(!1),[n,r]=R.useState("entities"),[i,a]=R.useState("characters"),[s,o]=R.useState(""),[l,c]=R.useState(null),[f,h]=R.useState(null),m=Jf(["Escape"]),{isOpen:p,onOpen:v,onClose:y}=QE(),{isOpen:x,onOpen:S,onClose:_}=QE(),[N,k]=R.useState(""),[P,O]=R.useState(70),[A,T]=R.useState(!1),L=it.createRef(),B=$t(Ee=>Ee.characters),W=$t(Ee=>Ee.events),Y=$t(Ee=>Ee.locations),V=$t(Ee=>Ee.terms),I=$t(Ee=>Ee.story_summary),H=$t(Ee=>Ee.key_events_and_arcs),q=$t(Ee=>Ee.honorifics),F=$t(Ee=>Ee.recurring_phrases),J=$t(Ee=>Ee.world_building_notes),Z=$t(Ee=>Ee.style_guide),G=$t(Ee=>Ee.target_language),oe=$t(Ee=>Ee.fullText),ae=$t(Ee=>Ee.convertToModelFormat),te=$t(Ee=>Ee.exportToJSON),re=$t(Ee=>Ee.importFromJSON),X=$t(Ee=>Ee.addTerm),ce=$t(Ee=>Ee.updateTerm),he=$t(Ee=>Ee.deleteTerm),ve=Ce(Ee=>Ee.setEntityNodes),Ne=Ce(Ee=>Ee.setActionEdges),ke=Ce(Ee=>Ee.setLocationNodes);R.useEffect(()=>{try{const Ee=localStorage.getItem("vsw.currentProjectId");if(Ee){const $e=localStorage.getItem("vsw.projects")||"[]",gt=JSON.parse($e).find(Ye=>Ye.id===Ee);if(gt&&gt.glossary){const Ye=gt.glossary;$t.setState({characters:JSON.parse(JSON.stringify(Ye.characters||[])),events:JSON.parse(JSON.stringify(Ye.events||[])),locations:JSON.parse(JSON.stringify(Ye.locations||[])),terms:JSON.parse(JSON.stringify(Ye.terms||[])),fullText:Ye.fullText||"",story_summary:JSON.parse(JSON.stringify(Ye.story_summary||{logline:"",blurb:""})),key_events_and_arcs:JSON.parse(JSON.stringify(Ye.key_events_and_arcs||[])),honorifics:JSON.parse(JSON.stringify(Ye.honorifics||{})),recurring_phrases:JSON.parse(JSON.stringify(Ye.recurring_phrases||{})),world_building_notes:JSON.parse(JSON.stringify(Ye.world_building_notes||[])),style_guide:JSON.parse(JSON.stringify(Ye.style_guide||{tone:"",formality_level:"medium",themes:[],genre:"",sub_genres:[],content_rating:"",name_format:"",honorific_usage:"",formal_speech_level:"",dialogue_style:"",narrative_vocabulary:"",narrative_style:{point_of_view:"",tense:"",voice:"",common_expressions:[],atmosphere_descriptors:[]}})),target_language:Ye.target_language||"en"}),console.log("Loaded project:",Ee)}}}catch(Ee){console.error("Failed to load project:",Ee)}},[]),R.useEffect(()=>{if((B.length>0||W.length>0)&&Ce.getState().entityNodes.length===0&&Ce.getState().actionEdges.length===0&&Ce.getState().locationNodes.length===0){const{entityNodes:Ee,actionEdges:$e,locationNodes:He}=ae();ve(Ee),Ne($e),ke(He);const gt={x:L.current.clientWidth/2,y:L.current.clientHeight/2};Pi.optimizeNodeLayout("entity",Ee,ve,gt,120,100),Pi.optimizeNodeLayout("location",He,ke,gt,120)}},[B,W,Y]),R.useEffect(()=>{m&&(Ce.getState().setSelectedNodes([]),Ce.getState().setSelectedEdges([]),Ce.getState().setFilteredActionsSegment(null,null))},[m]),R.useEffect(()=>{const Ee={x:L.current.clientWidth/2,y:L.current.clientHeight/2};Pi.optimizeNodeLayout("entity",Ce.getState().entityNodes,Ce.getState().setEntityNodes,Ee,120,100),Pi.optimizeNodeLayout("location",Ce.getState().locationNodes,Ce.getState().setLocationNodes,Ee,120)},[n]),R.useEffect(()=>{const Ee=setTimeout(()=>{try{const $e=localStorage.getItem("vsw.currentProjectId");if(!$e)return;const He=localStorage.getItem("vsw.projects")||"[]",gt=JSON.parse(He),Ye=gt.findIndex(yt=>yt.id===$e);if(Ye>=0){const yt=$t.getState(),_t={characters:JSON.parse(JSON.stringify(yt.characters)),events:JSON.parse(JSON.stringify(yt.events)),locations:JSON.parse(JSON.stringify(yt.locations)),terms:JSON.parse(JSON.stringify(yt.terms)),fullText:yt.fullText,story_summary:JSON.parse(JSON.stringify(yt.story_summary)),key_events_and_arcs:JSON.parse(JSON.stringify(yt.key_events_and_arcs)),honorifics:JSON.parse(JSON.stringify(yt.honorifics)),recurring_phrases:JSON.parse(JSON.stringify(yt.recurring_phrases)),world_building_notes:JSON.parse(JSON.stringify(yt.world_building_notes)),style_guide:JSON.parse(JSON.stringify(yt.style_guide)),target_language:yt.target_language};gt[Ye]={...gt[Ye],updatedAt:Date.now(),glossary:_t,view:{entityNodes:Ce.getState().entityNodes,actionEdges:Ce.getState().actionEdges,locationNodes:Ce.getState().locationNodes,textState:Ce.getState().textState,isReadOnly:Ce.getState().isReadOnly,relationsPositions:JSON.parse(localStorage.getItem("vsw.relations.positions")||"{}")}},localStorage.setItem("vsw.projects",JSON.stringify(gt)),console.log("Auto-saved project:",$e)}}catch($e){console.error("Auto-save failed:",$e)}},3e3);return()=>clearTimeout(Ee)},[B,W,Y,V,I,H,q,F,J,Z,G,oe]);const Te=()=>{const Ee=te();k(Ee),v()},ye=()=>{const Ee=new Blob([N],{type:"application/json"}),$e=URL.createObjectURL(Ee),He=document.createElement("a");He.href=$e,He.download="glossary.json",He.click(),URL.revokeObjectURL($e)},Ie=()=>{try{re(N),_(),k("")}catch{alert("Failed to import JSON")}},Re=Ee=>{T(!0),Ee.preventDefault()};return R.useEffect(()=>{const Ee=He=>{if(A){const gt=document.getElementById("visual-container");if(gt){const Ye=gt.getBoundingClientRect(),yt=(He.clientY-Ye.top)/Ye.height*100;O(Math.max(30,Math.min(85,yt)))}}},$e=()=>{T(!1)};return A&&(document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",$e)),()=>{document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",$e)}},[A]),b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"10px 20px",background:"white",borderBottom:"1px solid #ddd"},children:[b.jsxDEV("h1",{style:{fontSize:"20px",fontWeight:"bold",margin:0},children:"Glossary Builder"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:979,columnNumber:9},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px"},children:[b.jsxDEV(et,{size:"sm",variant:"bordered",onClick:()=>{var Ee;try{const $e=localStorage.getItem("vsw.projects")||"[]",He=JSON.parse($e),gt=localStorage.getItem("vsw.currentProjectId"),Ye=$t.getState(),yt={characters:JSON.parse(JSON.stringify(Ye.characters)),events:JSON.parse(JSON.stringify(Ye.events)),locations:JSON.parse(JSON.stringify(Ye.locations)),terms:JSON.parse(JSON.stringify(Ye.terms)),fullText:Ye.fullText,story_summary:JSON.parse(JSON.stringify(Ye.story_summary)),key_events_and_arcs:JSON.parse(JSON.stringify(Ye.key_events_and_arcs)),honorifics:JSON.parse(JSON.stringify(Ye.honorifics)),recurring_phrases:JSON.parse(JSON.stringify(Ye.recurring_phrases)),world_building_notes:JSON.parse(JSON.stringify(Ye.world_building_notes)),style_guide:JSON.parse(JSON.stringify(Ye.style_guide)),target_language:Ye.target_language},_t={id:gt||(globalThis.crypto&&"randomUUID"in globalThis.crypto?crypto.randomUUID():`p-${Date.now()}`),name:((Ee=He.find(Nt=>Nt.id===gt))==null?void 0:Ee.name)||`Project ${new Date().toLocaleString()}`,updatedAt:Date.now(),glossary:yt,view:{entityNodes:Ce.getState().entityNodes,actionEdges:Ce.getState().actionEdges,locationNodes:Ce.getState().locationNodes,textState:Ce.getState().textState,isReadOnly:Ce.getState().isReadOnly,relationsPositions:JSON.parse(localStorage.getItem("vsw.relations.positions")||"{}")}};let St=He;const Bt=He.findIndex(Nt=>Nt.id===_t.id);Bt>=0?St[Bt]=_t:St=[_t,...He],localStorage.setItem("vsw.projects",JSON.stringify(St)),localStorage.setItem("vsw.currentProjectId",_t.id),console.log("Manually saved project:",_t.id)}catch{}},children:"Save"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:983,columnNumber:11},this),b.jsxDEV(et,{size:"sm",variant:"flat",onClick:()=>{window.location.hash="/"},children:" Back to Home"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1027,columnNumber:11},this),b.jsxDEV(so,{content:"Import JSON",children:b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(_He,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1029,columnNumber:60},this),onClick:S,children:"Import"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1029,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1028,columnNumber:11},this),b.jsxDEV(so,{content:"Export to JSON",children:b.jsxDEV(et,{size:"sm",color:"secondary",variant:"flat",startContent:b.jsxDEV($Re,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1034,columnNumber:78},this),onClick:Te,children:"Export"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1034,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1033,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:982,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:978,columnNumber:7},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",flexGrow:1,height:"80%"},children:[b.jsxDEV("div",{id:"visual-container",className:"flex flex-col",style:{position:"relative",width:"60%"},children:[b.jsxDEV("div",{style:{width:"100%",height:`${P}%`,background:"#F3F4F6",borderBottom:"1px solid #DDDDDF"},ref:L,children:[n==="entities"&&b.jsxDEV(Ry,{children:b.jsxDEV(Lce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1044,columnNumber:63},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1044,columnNumber:44},this),n==="locations"&&b.jsxDEV(Ry,{children:b.jsxDEV(Fce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1045,columnNumber:64},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1045,columnNumber:45},this),n==="relations"&&b.jsxDEV("div",{style:{width:"100%",height:"100%",background:"#F9FAFB"},children:b.jsxDEV(Kce,{characters:B,onCharacterSelect:Ee=>{}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1048,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1047,columnNumber:15},this),b.jsxDEV(qN,{keyboardActivation:"manual",onSelectionChange:r,selectedKey:n,color:"primary",variant:"bordered",style:{position:"absolute",left:"50%",top:10,transform:"translate(-50%, 0)"},classNames:{tabList:"bg-white"},children:[b.jsxDEV(du,{title:b.jsxDEV("span",{style:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:15},children:[b.jsxDEV(oae,{style:{marginRight:3,fontSize:22}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1063,columnNumber:136},this)," Characters & Events"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1063,columnNumber:44},this)},"entities",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1063,columnNumber:15},this),b.jsxDEV(du,{title:b.jsxDEV("span",{style:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:15},children:[b.jsxDEV(sae,{style:{marginRight:3,fontSize:18}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1064,columnNumber:137},this)," Locations"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1064,columnNumber:45},this)},"locations",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1064,columnNumber:15},this),b.jsxDEV(du,{title:b.jsxDEV("span",{style:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:15},children:"Relations"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1065,columnNumber:45},this)},"relations",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1065,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1054,columnNumber:13},this),b.jsxDEV(et,{style:{position:"absolute",right:10,top:10,fontSize:18},isIconOnly:!0,onClick:Ee=>{Pi.stopAllSimulations(),Ce.getState().setActionEdges([]),Ce.getState().setLocationNodes([]),Ce.getState().setEntityNodes([]),Ce.getState().setFilteredActionsSegment(null,null),Ce.getState().setHighlightedActionsSegment(null,null),$t.getState().reset()},children:b.jsxDEV(hce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1076,columnNumber:16},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1068,columnNumber:13},this),b.jsxDEV("div",{style:{position:"absolute",left:"50%",bottom:20,transform:"translateX(-50%)",display:"flex",gap:"10px",background:"white",padding:"10px",borderRadius:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:b.jsxDEV("span",{style:{fontSize:"14px",color:"#666"},children:[B.length," characters  ",W.length," events  ",Y.length," locations  ",V.length," terms"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1079,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1078,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1043,columnNumber:11},this),b.jsxDEV("div",{onMouseDown:Re,style:{height:"8px",background:A?"#667eea":"#e5e7eb",cursor:"ns-resize",display:"flex",alignItems:"center",justifyContent:"center",transition:A?"none":"background 0.2s",zIndex:10},children:b.jsxDEV("div",{style:{width:"40px",height:"4px",background:A?"white":"#9ca3af",borderRadius:"2px",transition:"background 0.2s"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1098,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1085,columnNumber:11},this),b.jsxDEV("div",{style:{height:`${100-P}%`,display:"flex",flexDirection:"column"},children:b.jsxDEV(Ry,{children:b.jsxDEV(Vce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1110,columnNumber:32},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1110,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1109,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1042,columnNumber:9},this),b.jsxDEV("div",{style:{width:"40%",background:"white",borderLeft:"1px solid #ddd",display:"flex",flexDirection:"column"},children:[b.jsxDEV("div",{style:{padding:"20px",borderBottom:"1px solid #ddd"},children:[b.jsxDEV("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"15px"},children:"Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1116,columnNumber:13},this),b.jsxDEV(on,{placeholder:"Search...",value:s,onChange:Ee=>o(Ee.target.value),startContent:b.jsxDEV(NHe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1121,columnNumber:29},this),size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1117,columnNumber:13},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px",marginTop:"15px",flexWrap:"wrap"},children:[b.jsxDEV(Fn,{onClick:()=>a("characters"),color:i==="characters"?"secondary":"default",variant:i==="characters"?"solid":"bordered",style:{cursor:"pointer"},children:["Characters (",B.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1125,columnNumber:15},this),b.jsxDEV(Fn,{onClick:()=>a("events"),color:i==="events"?"secondary":"default",variant:i==="events"?"solid":"bordered",style:{cursor:"pointer"},children:["Events (",W.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1133,columnNumber:15},this),b.jsxDEV(Fn,{onClick:()=>a("locations"),color:i==="locations"?"secondary":"default",variant:i==="locations"?"solid":"bordered",style:{cursor:"pointer"},children:["Locations (",Y.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1141,columnNumber:15},this),b.jsxDEV(Fn,{onClick:()=>a("terms"),color:i==="terms"?"secondary":"default",variant:i==="terms"?"solid":"bordered",style:{cursor:"pointer"},children:["Terms (",V.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1149,columnNumber:15},this),b.jsxDEV(Fn,{onClick:()=>a("features"),color:i==="features"?"secondary":"default",variant:i==="features"?"solid":"bordered",style:{cursor:"pointer",paddingTop:"6px",paddingBottom:"6px",height:"auto",minHeight:"32px"},children:b.jsxDEV("span",{style:{display:"flex",alignItems:"center",whiteSpace:"nowrap"},children:[b.jsxDEV(Uce,{style:{marginRight:"4px"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1164,columnNumber:19},this)," Story Features"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1163,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1157,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1124,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1115,columnNumber:11},this),b.jsxDEV("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:[i==="characters"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:B.filter(Ee=>Ee.name.toLowerCase().includes(s.toLowerCase())).map(Ee=>b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,onClick:()=>c({type:"character",item:Ee}),style:{cursor:"pointer"},children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:[Ee.emoji," ",Ee.name]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1185,columnNumber:27},this),Ee.korean_name&&b.jsxDEV("p",{style:{fontSize:"14px",color:"#888",margin:0},children:Ee.korean_name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1189,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1184,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1183,columnNumber:23},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1195,columnNumber:23},this),b.jsxDEV(vn,{children:[b.jsxDEV("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:Ee.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1197,columnNumber:25},this),Ee.traits.length>0&&b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[Ee.traits.slice(0,3).map(($e,He)=>b.jsxDEV(Fn,{size:"sm",variant:"flat",color:"secondary",children:$e},He,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1203,columnNumber:31},this)),Ee.traits.length>3&&b.jsxDEV(Fn,{size:"sm",variant:"flat",children:["+",Ee.traits.length-3]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1208,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1201,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1196,columnNumber:23},this)]},Ee.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1176,columnNumber:21},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1172,columnNumber:15},this),i==="events"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:W.filter(Ee=>Ee.name.toLowerCase().includes(s.toLowerCase())).map(Ee=>b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,onClick:()=>c({type:"event",item:Ee}),style:{cursor:"pointer"},children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"start"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:Ee.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1234,columnNumber:27},this),b.jsxDEV(Fn,{size:"sm",color:Ee.importance==="major"?"secondary":"default",variant:"flat",children:Ee.importance},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1237,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1233,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1232,columnNumber:23},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1246,columnNumber:23},this),b.jsxDEV(vn,{children:[b.jsxDEV("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:Ee.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1248,columnNumber:25},this),Ee.characters_involved.length>0&&b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:Ee.characters_involved.map(($e,He)=>b.jsxDEV(Fn,{size:"sm",variant:"bordered",children:$e},He,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1254,columnNumber:31},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1252,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1247,columnNumber:23},this)]},Ee.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1225,columnNumber:21},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1221,columnNumber:15},this),i==="locations"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:Y.filter(Ee=>Ee.name.toLowerCase().includes(s.toLowerCase())).map(Ee=>b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,onClick:()=>c({type:"location",item:Ee}),style:{cursor:"pointer"},children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:[Ee.emoji," ",Ee.name]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1279,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1278,columnNumber:23},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1283,columnNumber:23},this),b.jsxDEV(vn,{children:b.jsxDEV("p",{style:{fontSize:"14px",color:"#666"},children:Ee.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1285,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1284,columnNumber:23},this)]},Ee.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1271,columnNumber:21},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1267,columnNumber:15},this),i==="terms"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"10px"},children:b.jsxDEV(et,{size:"sm",color:"secondary",variant:"flat",startContent:b.jsxDEV(ug,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1301,columnNumber:35},this),onPress:()=>h({original:"",translation:"",context:"",category:"general",notes:""}),children:"Add Term"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1297,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1296,columnNumber:17},this),f&&b.jsxDEV(wn,{style:{background:"#f0f9ff",border:"2px solid #667eea"},children:b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[b.jsxDEV("h4",{style:{fontWeight:"bold",fontSize:"15px",margin:0},children:f.id?"Edit Term":"Add New Term"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1312,columnNumber:25},this),b.jsxDEV(on,{label:"Original (Korean)",value:f.original,onChange:Ee=>h({...f,original:Ee.target.value}),placeholder:"e.g., ",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1315,columnNumber:25},this),b.jsxDEV(on,{label:"Translation",value:f.translation,onChange:Ee=>h({...f,translation:Ee.target.value}),placeholder:"e.g., CSAT",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1322,columnNumber:25},this),b.jsxDEV(io,{label:"Category",selectedKeys:[f.category],onChange:Ee=>h({...f,category:Ee.target.value}),size:"sm",children:[b.jsxDEV(jn,{value:"general",children:"General"},"general",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1335,columnNumber:27},this),b.jsxDEV(jn,{value:"name",children:"Name"},"name",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1336,columnNumber:27},this),b.jsxDEV(jn,{value:"place",children:"Place"},"place",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1337,columnNumber:27},this),b.jsxDEV(jn,{value:"item",children:"Item"},"item",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1338,columnNumber:27},this),b.jsxDEV(jn,{value:"concept",children:"Concept"},"concept",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1339,columnNumber:27},this),b.jsxDEV(jn,{value:"martial_arts",children:"Martial Arts"},"martial_arts",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1340,columnNumber:27},this),b.jsxDEV(jn,{value:"cultural",children:"Cultural"},"cultural",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1341,columnNumber:27},this),b.jsxDEV(jn,{value:"technical",children:"Technical"},"technical",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1342,columnNumber:27},this),b.jsxDEV(jn,{value:"other",children:"Other"},"other",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1343,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1329,columnNumber:25},this),b.jsxDEV(nr,{label:"Context",value:f.context,onChange:Ee=>h({...f,context:Ee.target.value}),placeholder:"Context where this term appears",minRows:2,size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1345,columnNumber:25},this),b.jsxDEV(nr,{label:"Notes",value:f.notes,onChange:Ee=>h({...f,notes:Ee.target.value}),placeholder:"Translation notes or additional information",minRows:2,size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1353,columnNumber:25},this),b.jsxDEV("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[b.jsxDEV(et,{size:"sm",variant:"flat",onPress:()=>h(null),children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1362,columnNumber:27},this),b.jsxDEV(et,{size:"sm",color:"secondary",onPress:()=>{f.original&&f.translation&&(f.id?ce(f.id,{original:f.original,translation:f.translation,context:f.context,category:f.category,notes:f.notes}):X({id:`term_${Date.now()}`,original:f.original,translation:f.translation,context:f.context,category:f.category,notes:f.notes}),h(null))},children:"Save"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1369,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1361,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1311,columnNumber:23},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1310,columnNumber:21},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1309,columnNumber:19},this),V.filter(Ee=>Ee.original.toLowerCase().includes(s.toLowerCase())||Ee.translation.toLowerCase().includes(s.toLowerCase())).map(Ee=>b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,style:{cursor:"pointer"},children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"start"},children:[b.jsxDEV("div",{style:{flex:1},onClick:()=>c({type:"term",item:Ee}),children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:Ee.original},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1419,columnNumber:29},this),b.jsxDEV("p",{style:{fontSize:"14px",color:"#888",marginTop:"5px"},children:[" ",Ee.translation]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1422,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1418,columnNumber:27},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>he(Ee.id),children:b.jsxDEV(Sy,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1433,columnNumber:29},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1426,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1417,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1416,columnNumber:23},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1437,columnNumber:23},this),b.jsxDEV(vn,{onClick:()=>c({type:"term",item:Ee}),children:[b.jsxDEV("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:Ee.context},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1439,columnNumber:25},this),b.jsxDEV(Fn,{size:"sm",variant:"flat",color:"secondary",children:Ee.category},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1442,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1438,columnNumber:23},this)]},Ee.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1410,columnNumber:21},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1295,columnNumber:15},this),i==="features"&&b.jsxDEV(UYe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1451,columnNumber:44},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1170,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1114,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1041,columnNumber:7},this),l&&b.jsxDEV($Ye,{type:l.type,item:l.item,onClose:()=>c(null)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1457,columnNumber:9},this),b.jsxDEV(By,{isOpen:p,onClose:y,size:"3xl",children:b.jsxDEV(Ly,{children:[b.jsxDEV(Fy,{children:"Export Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1466,columnNumber:11},this),b.jsxDEV($y,{children:b.jsxDEV(nr,{value:N,readOnly:!0,minRows:20,maxRows:30,style:{fontFamily:"monospace"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1468,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1467,columnNumber:11},this),b.jsxDEV(Rw,{children:[b.jsxDEV(et,{variant:"flat",onPress:y,children:"Close"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1477,columnNumber:13},this),b.jsxDEV(et,{color:"secondary",startContent:b.jsxDEV(wHe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1480,columnNumber:53},this),onPress:ye,children:"Download JSON"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1480,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1476,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1465,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1464,columnNumber:7},this),b.jsxDEV(By,{isOpen:x,onClose:_,size:"3xl",children:b.jsxDEV(Ly,{children:[b.jsxDEV(Fy,{children:"Import Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1489,columnNumber:11},this),b.jsxDEV($y,{children:b.jsxDEV(nr,{value:N,onChange:Ee=>k(Ee.target.value),placeholder:"Paste your JSON here...",minRows:20,maxRows:30,style:{fontFamily:"monospace"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1491,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1490,columnNumber:11},this),b.jsxDEV(Rw,{children:[b.jsxDEV(et,{variant:"flat",onPress:_,children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1501,columnNumber:13},this),b.jsxDEV(et,{color:"secondary",onPress:Ie,children:"Import"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1504,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1500,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1488,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:1487,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryBuilder.tsx",lineNumber:977,columnNumber:5},this)}const zYe={};function HYe(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=l=>l===null?null:JSON.parse(l,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const DN=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return DN(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return DN(r)(n)}}}},GYe=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,S)=>({...S,...x}),...e},s=!1;const o=new Set,l=new Set;let c;try{c=a.getStorage()}catch{}if(!c)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,i);const f=DN(a.serialize),h=()=>{const x=a.partialize({...r()});let S;const _=f({state:x,version:a.version}).then(N=>c.setItem(a.name,N)).catch(N=>{S=N});if(S)throw S;return _},m=i.setState;i.setState=(x,S)=>{m(x,S),h()};const p=t((...x)=>{n(...x),h()},r,i);let v;const y=()=>{var x;if(!c)return;s=!1,o.forEach(_=>_(r()));const S=((x=a.onRehydrateStorage)==null?void 0:x.call(a,r()))||void 0;return DN(c.getItem.bind(c))(a.name).then(_=>{if(_)return a.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==a.version){if(a.migrate)return a.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var N;return v=a.merge(_,(N=r())!=null?N:p),n(v,!0),h()}).then(()=>{S==null||S(v,void 0),s=!0,l.forEach(_=>_(v))}).catch(_=>{S==null||S(void 0,_)})};return i.persist={setOptions:x=>{a={...a,...x},x.getStorage&&(c=x.getStorage())},clearStorage:()=>{c==null||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},y(),v||p},KYe=(t,e)=>(n,r,i)=>{let a={storage:HYe(()=>localStorage),partialize:y=>y,version:0,merge:(y,x)=>({...x,...y}),...e},s=!1;const o=new Set,l=new Set;let c=a.storage;if(!c)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...y)},r,i);const f=()=>{const y=a.partialize({...r()});return c.setItem(a.name,{state:y,version:a.version})},h=i.setState;i.setState=(y,x)=>{h(y,x),f()};const m=t((...y)=>{n(...y),f()},r,i);i.getInitialState=()=>m;let p;const v=()=>{var y,x;if(!c)return;s=!1,o.forEach(_=>{var N;return _((N=r())!=null?N:m)});const S=((x=a.onRehydrateStorage)==null?void 0:x.call(a,(y=r())!=null?y:m))||void 0;return DN(c.getItem.bind(c))(a.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==a.version){if(a.migrate)return a.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var N;return p=a.merge(_,(N=r())!=null?N:m),n(p,!0),f()}).then(()=>{S==null||S(p,void 0),p=r(),s=!0,l.forEach(_=>_(p))}).catch(_=>{S==null||S(void 0,_)})};return i.persist={setOptions:y=>{a={...a,...y},y.storage&&(c=y.storage)},clearStorage:()=>{c==null||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>s,onHydrate:y=>(o.add(y),()=>{o.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},a.skipHydration||v(),p||m},YYe=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((zYe?"development":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),GYe(t,e)):KYe(t,e),JYe=YYe,rq=t=>{const e=Date.now(),n=Math.random().toString(36).substring(2,9);return`${t}_${e}_${n}`},qYe=(t,e,n)=>{const r=[],i=t.split(`
`);let a="",s=0;for(let l=0;l<i.length;l++){const c=i[l];if(a.length+c.length>e&&a.length>0){r.push({id:`chunk_${s}`,text:a.trim(),index:s,metadata:{chunk_index:s,total_chunks:0},status:"pending",translations:{}});const f=Math.floor(n/100);a=i.slice(Math.max(0,l-f),l+1).join(`
`),s++}else a+=(a?`
`:"")+c}a.trim()&&r.push({id:`chunk_${s}`,text:a.trim(),index:s,metadata:{chunk_index:s,total_chunks:0},status:"pending",translations:{}});const o=r.length;return r.forEach(l=>{l.metadata.total_chunks=o}),r},XYe=()=>{var t;try{const e="translation-storage",n=localStorage.getItem(e);if(n){const r=JSON.parse(n);(t=r.state)!=null&&t.tasks&&(delete r.state.tasks,localStorage.setItem(e,JSON.stringify(r)),console.log("Cleaned up legacy tasks from storage"))}}catch(e){console.error("Failed to cleanup legacy storage:",e)}};typeof window<"u"&&XYe();const Bs=Xf()(JYe((t,e)=>({projects:[],tasks:{},view:"main",createProject:n=>{const r=rq("proj"),i=qYe(n.fileContent,n.chunkSize,n.overlap);let a;if(n.glossaryJson)try{a=JSON.parse(n.glossaryJson)}catch(o){console.error("Failed to parse glossary JSON:",o)}const s={id:r,name:n.name,type:n.type,status:a?"glossary_completed":"setup",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),file_content:n.fileContent,chunks:i,chunk_size:n.chunkSize,overlap:n.overlap,translation_progress:0,max_retries:n.maxRetries,enable_proofreader:n.enableProofreader,language:n.language,agent_configs:n.agentConfigs,glossary:a,prompts:n.customPrompts};return t(o=>({projects:[...o.projects,s],selectedProjectId:r})),r},updateProject:(n,r)=>{t(i=>({projects:i.projects.map(a=>a.id===n?{...a,...r,updated_at:new Date().toISOString()}:a)}))},deleteProject:n=>{t(r=>({projects:r.projects.filter(i=>i.id!==n),selectedProjectId:r.selectedProjectId===n?void 0:r.selectedProjectId}))},getProject:n=>e().projects.find(r=>r.id===n),selectProject:n=>{t({selectedProjectId:n})},setGlossary:(n,r)=>{t(i=>({projects:i.projects.map(a=>a.id===n?{...a,glossary:r,status:"glossary_completed",updated_at:new Date().toISOString()}:a)}))},updateChunk:(n,r,i)=>{t(a=>({projects:a.projects.map(s=>s.id===n?{...s,chunks:s.chunks.map(o=>o.id===r?{...o,...i}:o),updated_at:new Date().toISOString()}:s)}))},selectChunk:n=>{t({selectedChunkId:n})},createTask:n=>{const r=rq("task"),i={id:r,type:n.type,status:"pending",progress:0,message:"Initializing...",projectId:n.projectId,chunkId:n.chunkId,metadata:n.metadata,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t(a=>({tasks:{...a.tasks,[r]:i}})),r},updateTask:(n,r)=>{t(i=>({tasks:{...i.tasks,[n]:i.tasks[n]?{...i.tasks[n],...r,updatedAt:new Date().toISOString()}:i.tasks[n]}}))},getTask:n=>e().tasks[n],cancelTask:n=>{t(r=>({tasks:{...r.tasks,[n]:r.tasks[n]?{...r.tasks[n],status:"cancelled",updatedAt:new Date().toISOString()}:r.tasks[n]}}))},setView:n=>{t({view:n})}}),{name:"translation-storage",partialize:t=>({projects:t.projects.slice(-10),selectedProjectId:t.selectedProjectId,view:t.view}),onRehydrateStorage:()=>t=>{t&&console.log("Translation store rehydrated with",t.projects.length,"projects")}})),ZYe="modulepreload",QYe=function(t){return"/VisualStoryWriting/"+t},iq={},eJe=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=QYe(l),l in iq)return;iq[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":ZYe,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function aq(t,e=aB){t=t.trim();const n=t.indexOf("```");if(n===-1)return e(t);let r=t.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const i=r.indexOf("```");let a=r;return i!==-1&&(a=r.substring(0,i)),e(a.trim())}function aB(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const n=[];let r=!1,i=!1;for(let a of t){if(r)a==='"'&&!i?r=!1:a===`
`&&!i?a="\\n":a==="\\"?i=!i:i=!1;else if(a==='"')r=!0,i=!1;else if(a==="{")n.push("}");else if(a==="[")n.push("]");else if(a==="}"||a==="]")if(n&&n[n.length-1]===a)n.pop();else return null;e+=a}r&&(e+='"');for(let a=n.length-1;a>=0;a-=1)e+=n[a];try{return JSON.parse(e)}catch{return null}}var tJe=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const nJe=gc(tJe);var Yce={exports:{}};const rJe=/[\p{Lu}]/u,iJe=/[\p{Ll}]/u,sq=/^[\p{Lu}](?![\p{Lu}])/gu,Jce=/([\p{Alpha}\p{N}_]|$)/u,qce=/[_.\- ]+/,aJe=new RegExp("^"+qce.source),oq=new RegExp(qce.source+Jce.source,"gu"),lq=new RegExp("\\d+"+Jce.source,"gu"),sJe=(t,e,n)=>{let r=!1,i=!1,a=!1;for(let s=0;s<t.length;s++){const o=t[s];r&&rJe.test(o)?(t=t.slice(0,s)+"-"+t.slice(s),r=!1,a=i,i=!0,s++):i&&a&&iJe.test(o)?(t=t.slice(0,s-1)+"-"+t.slice(s-1),a=i,i=!1,r=!0):(r=e(o)===o&&n(o)!==o,a=i,i=n(o)===o&&e(o)!==o)}return t},oJe=(t,e)=>(sq.lastIndex=0,t.replace(sq,n=>e(n))),lJe=(t,e)=>(oq.lastIndex=0,lq.lastIndex=0,t.replace(oq,(n,r)=>e(r)).replace(lq,n=>e(n))),Xce=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(a=>a.trim()).filter(a=>a.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(e.locale),r=e.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=sJe(t,n,r)),t=t.replace(aJe,""),e.preserveConsecutiveUppercase?t=oJe(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),lJe(t,r))};Yce.exports=Xce;Yce.exports.default=Xce;function uJe(t,e){return(e==null?void 0:e[t])||nJe(t)}function cJe(t,e,n){const r={};for(const i in t)Object.hasOwn(t,i)&&(r[e(i,n)]=t[i]);return r}function uq(t){return Array.isArray(t)?[...t]:{...t}}function dJe(t,e){const n=uq(t);for(const[r,i]of Object.entries(e)){const[a,...s]=r.split(".").reverse();let o=n;for(const l of s.reverse()){if(o[l]===void 0)break;o[l]=uq(o[l]),o=o[l]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[i]})}return n}function Zce(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class Xy{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Zce(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Xy||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((i,a)=>(i[a]=a in this?this[a]:this.lc_kwargs[a],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(n,Reflect.get(i,"lc_secrets",this)),Object.assign(r,Reflect.get(i,"lc_attributes",this));return Object.keys(n).forEach(i=>{let a=this,s=r;const[o,...l]=i.split(".").reverse();for(const c of l.reverse()){if(!(c in a)||a[c]===void 0)return;(!(c in s)||s[c]===void 0)&&(typeof a[c]=="object"&&a[c]!=null?s[c]={}:Array.isArray(a[c])&&(s[c]=[])),a=a[c],s=s[c]}o in a&&a[o]!==void 0&&(s[o]=s[o]||a[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:cJe(Object.keys(n).length?dJe(r,n):r,uJe,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function Hw(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function fJe(t){return Hw(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function hJe(t){return Hw(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function mJe(t){if(Hw(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function Qce({dataUrl:t,asTypedArray:e=!1}){const n=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(n){r=n[1].toLowerCase();const i=e?Uint8Array.from(atob(n[2]),a=>a.charCodeAt(0)):n[2];return{mime_type:r,data:i}}}function pJe(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function mx(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.some(n=>Hw(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?MR(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>Hw(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function gJe(t,e){return t==="error"||e==="error"?"error":"success"}function vJe(t,e){function n(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(s=>n(s,i+1));const a={};for(const s of Object.keys(r))a[s]=n(r[s],i+1);return a}return JSON.stringify(n(t,0),null,2)}class ib extends Xy{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=vJe(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function Wo(t,e){const n={...t};for(const[r,i]of Object.entries(e))if(n[r]==null)n[r]=i;else{if(i==null)continue;if(typeof n[r]!=typeof i||Array.isArray(n[r])!==Array.isArray(i))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;["id","name","output_version","model_provider"].includes(r)?n[r]=i:n[r]+=i}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=Wo(n[r],i);else if(Array.isArray(n[r]))n[r]=MR(n[r],i);else{if(n[r]===i)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function MR(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const n=[...t];for(const r of e)if(typeof r=="object"&&r!==null&&"index"in r&&typeof r.index=="number"){const i=n.findIndex(a=>{const s=typeof a=="object",o="index"in a&&a.index===r.index,l="id"in a&&"id"in r&&(a==null?void 0:a.id)===(r==null?void 0:r.id),c=!("id"in a)||!(a!=null&&a.id)||!("id"in r)||!(r!=null&&r.id);return s&&o&&(l||c)});i!==-1&&typeof n[i]=="object"&&n[i]!==null?n[i]=Wo(n[i],r):n.push(r)}else{if(typeof r=="object"&&r!==null&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function yJe(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return MR(t,e);if(typeof t=="object"&&typeof e=="object")return Wo(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}class px extends ib{}function bJe(t){return typeof t.role=="string"}function v_(t){return typeof(t==null?void 0:t._getType)=="function"}function wJe(t){return v_(t)&&typeof t.concat=="function"}class xJe extends ib{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status,this.metadata=e.metadata}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class sB extends px{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new sB({content:mx(this.content,e.content),additional_kwargs:Wo(this.additional_kwargs,e.additional_kwargs),response_metadata:Wo(this.response_metadata,e.response_metadata),artifact:yJe(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:gJe(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function SJe(t){const e=[],n=[];for(const r of t)if(r.function){const i=r.function.name;try{const a=JSON.parse(r.function.arguments),s={name:i||"",args:a||{},id:r.id};e.push(s)}catch{n.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class Zy extends ib{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var i;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{r=e;const a=(i=r.additional_kwargs)==null?void 0:i.tool_calls,s=r.tool_calls;a!=null&&a.length>0&&(s===void 0||s.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(a!=null&&s===void 0){const[o,l]=SJe(a);r.tool_calls=o??[],r.invalid_tool_calls=l??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function gx(t){return t._getType()==="ai"}function cq(t){return t._getType()==="ai"}class Ya extends px{constructor(e){var r,i;let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const s=(e.tool_call_chunks??[]).reduce((c,f)=>{const h=c.findIndex(([m])=>"id"in f&&f.id&&"index"in f&&f.index!==void 0?f.id===m.id&&f.index===m.index:"id"in f&&f.id?f.id===m.id:"index"in f&&f.index!==void 0?f.index===m.index:!1);return h!==-1?c[h].push(f):c.push([f]),c},[]),o=[],l=[];for(const c of s){let f={};const h=((r=c[0])==null?void 0:r.name)??"",m=c.map(y=>y.args||"").join(""),p=m.length?m:"{}",v=(i=c[0])==null?void 0:i.id;try{if(f=aB(p),!v||f===null||typeof f!="object"||Array.isArray(f))throw new Error("Malformed tool call chunk args.");o.push({name:h,args:f,id:v,type:"tool_call"})}catch{l.push({name:h,args:p,id:v,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:o,invalid_tool_calls:l,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,i,a,s,o,l,c,f,h,m,p,v,y,x,S,_,N,k,P,O,A,T,L,B,W,Y,V,I,H,q,F,J,Z,G,oe,ae,te,re,X,ce;const n={content:mx(this.content,e.content),additional_kwargs:Wo(this.additional_kwargs,e.additional_kwargs),response_metadata:Wo(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const he=MR(this.tool_call_chunks,e.tool_call_chunks);he!==void 0&&he.length>0&&(n.tool_call_chunks=he)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const he={...(((i=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:i.audio)!==void 0||((s=(a=e.usage_metadata)==null?void 0:a.input_token_details)==null?void 0:s.audio)!==void 0)&&{audio:(((l=(o=this.usage_metadata)==null?void 0:o.input_token_details)==null?void 0:l.audio)??0)+(((f=(c=e.usage_metadata)==null?void 0:c.input_token_details)==null?void 0:f.audio)??0)},...(((m=(h=this.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:m.cache_read)!==void 0||((v=(p=e.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:v.cache_read)!==void 0)&&{cache_read:(((x=(y=this.usage_metadata)==null?void 0:y.input_token_details)==null?void 0:x.cache_read)??0)+(((_=(S=e.usage_metadata)==null?void 0:S.input_token_details)==null?void 0:_.cache_read)??0)},...(((k=(N=this.usage_metadata)==null?void 0:N.input_token_details)==null?void 0:k.cache_creation)!==void 0||((O=(P=e.usage_metadata)==null?void 0:P.input_token_details)==null?void 0:O.cache_creation)!==void 0)&&{cache_creation:(((T=(A=this.usage_metadata)==null?void 0:A.input_token_details)==null?void 0:T.cache_creation)??0)+(((B=(L=e.usage_metadata)==null?void 0:L.input_token_details)==null?void 0:B.cache_creation)??0)}},ve={...(((Y=(W=this.usage_metadata)==null?void 0:W.output_token_details)==null?void 0:Y.audio)!==void 0||((I=(V=e.usage_metadata)==null?void 0:V.output_token_details)==null?void 0:I.audio)!==void 0)&&{audio:(((q=(H=this.usage_metadata)==null?void 0:H.output_token_details)==null?void 0:q.audio)??0)+(((J=(F=e.usage_metadata)==null?void 0:F.output_token_details)==null?void 0:J.audio)??0)},...(((G=(Z=this.usage_metadata)==null?void 0:Z.output_token_details)==null?void 0:G.reasoning)!==void 0||((ae=(oe=e.usage_metadata)==null?void 0:oe.output_token_details)==null?void 0:ae.reasoning)!==void 0)&&{reasoning:(((re=(te=this.usage_metadata)==null?void 0:te.output_token_details)==null?void 0:re.reasoning)??0)+(((ce=(X=e.usage_metadata)==null?void 0:X.output_token_details)==null?void 0:ce.reasoning)??0)}},Ne=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},ke=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Te={input_tokens:Ne.input_tokens+ke.input_tokens,output_tokens:Ne.output_tokens+ke.output_tokens,total_tokens:Ne.total_tokens+ke.total_tokens,...Object.keys(he).length>0&&{input_token_details:he},...Object.keys(ve).length>0&&{output_token_details:ve}};n.usage_metadata=Te}return new Ya(n)}}class vx extends ib{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return vx}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class VR extends px{static lc_name(){return"ChatMessageChunk"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new VR({content:mx(this.content,e.content),additional_kwargs:Wo(this.additional_kwargs,e.additional_kwargs),response_metadata:Wo(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class $R extends px{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new $R({content:mx(this.content,e.content),additional_kwargs:Wo(this.additional_kwargs,e.additional_kwargs),response_metadata:Wo(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class hc extends ib{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,n){super(e,n)}}class LR extends px{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,n){super(e,n)}concat(e){return new LR({content:mx(this.content,e.content),additional_kwargs:Wo(this.additional_kwargs,e.additional_kwargs),response_metadata:Wo(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class Ag extends ib{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,n){super(e,n)}}class kN extends px{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,n){super(e,n)}concat(e){return new kN({content:mx(this.content,e.content),additional_kwargs:Wo(this.additional_kwargs,e.additional_kwargs),response_metadata:Wo(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function ede(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function tde(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}class EJe extends Error{constructor(e,n){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}class NJe extends ib{constructor(e){super({...e,content:""}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=e.id}_getType(){return"remove"}get _printableFields(){return{...super._printableFields,id:this.id}}}function _Je(t){return tde(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function CJe(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function tV(t){let e,n;if(CJe(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=t.kwargs}else{const{type:r,...i}=t;e=r,n=i}if(e==="human"||e==="user")return new hc(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...i}=n;if(!Array.isArray(r))return new Zy(n);const a=r.map(_Je);return new Zy({...i,tool_calls:a})}else{if(e==="system")return new Ag(n);if(e==="developer")return new Ag({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new xJe({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(e==="remove"&&"id"in n&&typeof n.id=="string")return new NJe({...n,id:n.id});throw ede(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function dE(t){if(typeof t=="string")return new hc(t);if(v_(t))return t;if(Array.isArray(t)){const[e,n]=t;return tV({type:e,content:n})}else if(bJe(t)){const{role:e,...n}=t;return tV({...n,type:e})}else return tV(t)}function nde(t,e="Human",n="AI"){const r=[];for(const i of t){let a;if(i._getType()==="human")a=e;else if(i._getType()==="ai")a=n;else if(i._getType()==="system")a="System";else if(i._getType()==="function")a="Function";else if(i._getType()==="tool")a="Tool";else if(i._getType()==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);const s=i.name?`${i.name}, `:"",o=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);r.push(`${a}: ${s}${o}`)}return r.join(`
`)}function TJe(t){var n;const e=t._getType();if(e==="human")return new LR({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new Ya({...r})}else{if(e==="system")return new kN({...t});if(e==="function")return new $R({...t});if(vx.isInstance(t))return new VR({...t});throw new Error("Unknown message type.")}}var FR={exports:{}},rde={};function mc(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var DJe=mc;mc.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};mc.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};mc.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0};mc.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};mc.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};mc.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};mc.prototype.start=mc.prototype.try;mc.prototype.errors=function(){return this._errors};mc.prototype.attempts=function(){return this._attempts};mc.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],a=i.message,s=(t[a]||0)+1;t[a]=s,s>=n&&(e=i,n=s)}return e};(function(t){var e=DJe;t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in n)r[i]=n[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],s=0;s<r.retries;s++)a.push(this.createTimeout(s,r));return n&&n.forever&&!a.length&&a.push(this.createTimeout(s,r)),a.sort(function(o,l){return o-l}),a},t.createTimeout=function(n,r){var i=r.randomize?Math.random()+1:1,a=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return a=Math.min(a,r.maxTimeout),a},t.wrap=function(n,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var a in n)typeof n[a]=="function"&&i.push(a)}for(var s=0;s<i.length;s++){var o=i[s],l=n[o];n[o]=(function(f){var h=t.operation(r),m=Array.prototype.slice.call(arguments,1),p=m.pop();m.push(function(v){h.retry(v)||(v&&(arguments[0]=h.mainError()),p.apply(this,arguments))}),h.attempt(function(){f.apply(n,m)})}).bind(n,l),n[o].options=r}}})(rde);var kJe=rde;const PJe=kJe,AJe=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class ide extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const RJe=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},OJe=t=>AJe.includes(t),ade=(t,e)=>new Promise((n,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=PJe.operation(e);i.attempt(async a=>{try{n(await t(a))}catch(s){if(!(s instanceof Error)){r(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof ide)i.stop(),r(s.originalError);else if(s instanceof TypeError&&!OJe(s.message))i.stop(),r(s);else{RJe(s,a,e);try{await e.onFailedAttempt(s)}catch(o){r(o);return}i.retry(s)||r(i.mainError())}}})});FR.exports=ade;FR.exports.default=ade;FR.exports.AbortError=ide;var jJe=FR.exports;const XP=gc(jJe),IJe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Ok(t){return typeof t=="string"&&IJe.test(t)}var Is=[];for(var nV=0;nV<256;++nV)Is.push((nV+256).toString(16).slice(1));function MJe(t,e=0){return(Is[t[e+0]]+Is[t[e+1]]+Is[t[e+2]]+Is[t[e+3]]+"-"+Is[t[e+4]]+Is[t[e+5]]+"-"+Is[t[e+6]]+Is[t[e+7]]+"-"+Is[t[e+8]]+Is[t[e+9]]+"-"+Is[t[e+10]]+Is[t[e+11]]+Is[t[e+12]]+Is[t[e+13]]+Is[t[e+14]]+Is[t[e+15]]).toLowerCase()}var gD,VJe=new Uint8Array(16);function $Je(){if(!gD&&(gD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gD(VJe)}var LJe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const dq={randomUUID:LJe};function am(t,e,n){if(dq.randomUUID&&!t)return dq.randomUUID();t=t||{};var r=t.random||(t.rng||$Je)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,MJe(r)}let FJe=class{getStore(){}run(e,n){return n()}};const rV=Symbol.for("ls:tracing_async_local_storage"),BJe=new FJe;let UJe=class{getInstance(){return globalThis[rV]??BJe}initializeGlobalInstance(e){globalThis[rV]===void 0&&(globalThis[rV]=e)}};const WJe=new UJe;function zJe(t=!1){const e=WJe.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function oB(t){return typeof t=="function"&&"langsmith:traceable"in t}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const HJe=Object.prototype.hasOwnProperty;function f5(t,e){return HJe.call(t,e)}function h5(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)f5(t,n)&&e.push(n);return e}function Bf(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function m5(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function T0(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function GJe(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function p5(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(p5(t[n]))return!0}else if(typeof t=="object"){const n=h5(t),r=n.length;for(var e=0;e<r;e++)if(p5(t[n[e]]))return!0}}return!1}function fq(t,e){const n=[t];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&n.push(`${r}: ${i}`)}return n.join(`
`)}class KJe extends Error{constructor(e,n,r,i,a){super(fq(e,{name:n,index:r,operation:i,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=fq(e,{name:n,index:r,operation:i,tree:a})}}const Pa=KJe,fw={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=g5(n,this.path);r&&(r=Bf(r));const i=IE(n,{op:"remove",path:this.from}).removed;return IE(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=g5(n,this.from);return IE(n,{op:"add",path:this.path,value:Bf(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:QP(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var YJe={add:function(t,e,n){return m5(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:fw.move,copy:fw.copy,test:fw.test,_get:fw._get};function g5(t,e){if(e=="")return t;var n={op:"_get",path:e};return IE(t,n),n.value}function IE(t,e,n=!1,r=!0,i=!0,a=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):v5(e,0)),e.path===""){let s={newDocument:t};if(e.op==="add")return s.newDocument=e.value,s;if(e.op==="replace")return s.newDocument=e.value,s.removed=t,s;if(e.op==="move"||e.op==="copy")return s.newDocument=g5(t,e.from),e.op==="move"&&(s.removed=t),s;if(e.op==="test"){if(s.test=QP(t,e.value),s.test===!1)throw new Pa("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return s.newDocument=t,s}else{if(e.op==="remove")return s.removed=t,s.newDocument=null,s;if(e.op==="_get")return e.value=t,s;if(n)throw new Pa("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return s}}else{r||(t=Bf(t));const o=(e.path||"").split("/");let l=t,c=1,f=o.length,h,m,p;for(typeof n=="function"?p=n:p=v5;;){if(m=o[c],m&&m.indexOf("~")!=-1&&(m=GJe(m)),i&&(m=="__proto__"||m=="prototype"&&c>0&&o[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(l[m]===void 0?h=o.slice(0,c).join("/"):c==f-1&&(h=e.path),h!==void 0&&p(e,0,t,h)),c++,Array.isArray(l)){if(m==="-")m=l.length;else{if(n&&!m5(m))throw new Pa("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);m5(m)&&(m=~~m)}if(c>=f){if(n&&e.op==="add"&&m>l.length)throw new Pa("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);const v=YJe[e.op].call(e,l,m,t);if(v.test===!1)throw new Pa("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return v}}else if(c>=f){const v=fw[e.op].call(e,l,m,t);if(v.test===!1)throw new Pa("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return v}if(l=l[m],n&&c<f&&(!l||typeof l!="object"))throw new Pa("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,t)}}}function ZP(t,e,n,r=!0,i=!0){if(n&&!Array.isArray(e))throw new Pa("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=Bf(t));const a=new Array(e.length);for(let s=0,o=e.length;s<o;s++)a[s]=IE(t,e[s],n,!0,i,s),t=a[s].newDocument;return a.newDocument=t,a}function v5(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new Pa("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(fw[t.op]){if(typeof t.path!="string")throw new Pa("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Pa('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Pa("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Pa("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&p5(t.value))throw new Pa("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new Pa("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new Pa("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var s={op:"_get",path:t.from,value:void 0},o=JJe([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pa("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Pa("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function JJe(t,e,n){try{if(!Array.isArray(t))throw new Pa("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)ZP(Bf(e),Bf(t),n||!0);else{n=n||v5;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof Pa)return i;throw i}}function QP(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),i,a,s;if(n&&r){if(a=t.length,a!=e.length)return!1;for(i=a;i--!==0;)if(!QP(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(t);if(a=o.length,a!==Object.keys(e).length)return!1;for(i=a;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=a;i--!==0;)if(s=o[i],!QP(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function sde(t,e,n,r,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var a=h5(e),s=h5(t),o=!1,l=s.length-1;l>=0;l--){var c=s[l],f=t[c];if(f5(e,c)&&!(e[c]===void 0&&f!==void 0&&Array.isArray(e)===!1)){var h=e[c];typeof f=="object"&&f!=null&&typeof h=="object"&&h!=null&&Array.isArray(f)===Array.isArray(h)?sde(f,h,n,r+"/"+T0(c),i):f!==h&&(i&&n.push({op:"test",path:r+"/"+T0(c),value:Bf(f)}),n.push({op:"replace",path:r+"/"+T0(c),value:Bf(h)}))}else Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+T0(c),value:Bf(f)}),n.push({op:"remove",path:r+"/"+T0(c)}),o=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var c=a[l];!f5(t,c)&&e[c]!==void 0&&n.push({op:"add",path:r+"/"+T0(c),value:Bf(e[c])})}}}function qJe(t,e,n=!1){var r=[];return sde(t,e,r,"",n),r}const XJe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function ZJe(t){return typeof t=="string"&&XJe.test(t)}function QJe(t){if(!ZJe(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var Ms=[];for(var iV=0;iV<256;++iV)Ms.push((iV+256).toString(16).slice(1));function ode(t,e=0){return(Ms[t[e+0]]+Ms[t[e+1]]+Ms[t[e+2]]+Ms[t[e+3]]+"-"+Ms[t[e+4]]+Ms[t[e+5]]+"-"+Ms[t[e+6]]+Ms[t[e+7]]+"-"+Ms[t[e+8]]+Ms[t[e+9]]+"-"+Ms[t[e+10]]+Ms[t[e+11]]+Ms[t[e+12]]+Ms[t[e+13]]+Ms[t[e+14]]+Ms[t[e+15]]).toLowerCase()}var vD,eqe=new Uint8Array(16);function tqe(){if(!vD&&(vD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vD(eqe)}function nqe(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var rqe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",iqe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function aqe(t,e,n){function r(i,a,s,o){var l;if(typeof i=="string"&&(i=nqe(i)),typeof a=="string"&&(a=QJe(a)),((l=a)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(a),c.set(i,a.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){o=o||0;for(var f=0;f<16;++f)s[o+f]=c[f];return s}return ode(c)}try{r.name=t}catch{}return r.DNS=rqe,r.URL=iqe,r}var sqe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const hq={randomUUID:sqe};function G0(t,e,n){if(hq.randomUUID&&!t)return hq.randomUUID();t=t||{};var r=t.random||(t.rng||tqe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ode(r)}function oqe(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function aV(t,e){return t<<e|t>>>32-e}function lqe(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var a=t.length/4+2,s=Math.ceil(a/16),o=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=t[l*64+f*4]<<24|t[l*64+f*4+1]<<16|t[l*64+f*4+2]<<8|t[l*64+f*4+3];o[l]=c}o[s-1][14]=(t.length-1)*8/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<s;++h){for(var m=new Uint32Array(80),p=0;p<16;++p)m[p]=o[h][p];for(var v=16;v<80;++v)m[v]=aV(m[v-3]^m[v-8]^m[v-14]^m[v-16],1);for(var y=n[0],x=n[1],S=n[2],_=n[3],N=n[4],k=0;k<80;++k){var P=Math.floor(k/20),O=aV(y,5)+oqe(P,x,S,_)+N+e[P]+m[k]>>>0;N=_,_=S,S=aV(x,30)>>>0,x=y,y=O}n[0]=n[0]+y>>>0,n[1]=n[1]+x>>>0,n[2]=n[2]+S>>>0,n[3]=n[3]+_>>>0,n[4]=n[4]+N>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var mq=aqe("v5",80,lqe);const uqe="gen_ai.operation.name",cqe="gen_ai.system",pq="gen_ai.request.model",dqe="gen_ai.response.model",gq="gen_ai.usage.input_tokens",vq="gen_ai.usage.output_tokens",yq="gen_ai.usage.total_tokens",fqe="gen_ai.request.max_tokens",hqe="gen_ai.request.temperature",mqe="gen_ai.request.top_p",pqe="gen_ai.request.frequency_penalty",gqe="gen_ai.request.presence_penalty",vqe="gen_ai.response.finish_reasons",yqe="gen_ai.prompt",bqe="gen_ai.completion",wqe="gen_ai.request.extra_query",xqe="gen_ai.request.extra_body",Sqe="gen_ai.serialized.name",Eqe="gen_ai.serialized.signature",Nqe="gen_ai.serialized.doc",_qe="gen_ai.response.id",Cqe="gen_ai.response.service_tier",Tqe="gen_ai.response.system_fingerprint",Dqe="gen_ai.usage.input_token_details",kqe="gen_ai.usage.output_token_details",Pqe="langsmith.trace.session_id",Aqe="langsmith.trace.session_name",Rqe="langsmith.span.kind",Oqe="langsmith.trace.name",jqe="langsmith.metadata",bq="langsmith.span.tags",Iqe="langsmith.request.streaming",Mqe="langsmith.request.headers",Vqe=(...t)=>fetch(...t),lde=Symbol.for("ls:fetch_implementation"),$qe=()=>{const t=globalThis[lde];return t?typeof t=="function"&&"Headers"in t&&"Request"in t&&"Response"in t:!1},Lqe=t=>async(...e)=>{if(t||Sl("DEBUG")==="true"){const[r,i]=e;console.log(` ${(i==null?void 0:i.method)||"GET"} ${r}`)}const n=await(globalThis[lde]??Vqe)(...e);return(t||Sl("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},ude=()=>Sl("PROJECT")??qf("LANGCHAIN_SESSION")??"default",cde="0.3.77";var ME={};let Cf;const Fqe=()=>typeof window<"u"&&typeof window.document<"u",Bqe=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Uqe=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),dde=()=>typeof Deno<"u",Wqe=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!dde(),fde=()=>Cf||(typeof Bun<"u"?Cf="bun":Fqe()?Cf="browser":Wqe()?Cf="node":Bqe()?Cf="webworker":Uqe()?Cf="jsdom":dde()?Cf="deno":Cf="other",Cf);let sV;function hde(){if(sV===void 0){const t=fde(),e=Hqe();sV={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:cde,...e}}return sV}function mde(){const t=zqe(),e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,i]of Object.entries(t))typeof i=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[r]=i);return e}function zqe(){const t={};try{if(typeof process<"u"&&ME)for(const[e,n]of Object.entries(ME))(e.startsWith("LANGCHAIN_")||e.startsWith("LANGSMITH_"))&&n!=null&&((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&typeof n=="string"?t[e]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):t[e]=n)}catch{}return t}function qf(t){try{return typeof process<"u"?ME==null?void 0:ME[t]:void 0}catch{return}}function Sl(t){return qf(`LANGSMITH_${t}`)||qf(`LANGCHAIN_${t}`)}let oV;function Hqe(){if(oV!==void 0)return oV;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=qf(n);r!==void 0&&(e[n]=r)}return oV=e,e}function pde(){return qf("OTEL_ENABLED")==="true"||Sl("OTEL_ENABLED")==="true"}class Gqe{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...n){!this.hasWarned&&pde()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(n.length===1&&typeof n[0]=="function"?r=n[0]:n.length===2&&typeof n[1]=="function"?r=n[1]:n.length===3&&typeof n[2]=="function"&&(r=n[2]),typeof r=="function")return r()}}class Kqe{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new Gqe})}getTracer(e,n){return this.mockTracer}getActiveSpan(){}setSpan(e,n){return e}getSpan(e){}setSpanContext(e,n){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class Yqe{active(){return{}}with(e,n){return n()}}const lV=Symbol.for("ls:otel_trace"),uV=Symbol.for("ls:otel_context"),wq=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),Jqe=new Kqe,qqe=new Yqe;class Xqe{getTraceInstance(){return globalThis[lV]??Jqe}getContextInstance(){return globalThis[uV]??qqe}initializeGlobalInstances(e){globalThis[lV]===void 0&&(globalThis[lV]=e.trace),globalThis[uV]===void 0&&(globalThis[uV]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[wq]=e}getDefaultOTLPTracerComponents(){return globalThis[wq]??void 0}}const lB=new Xqe;function gde(){return lB.getTraceInstance()}function Zqe(){return lB.getContextInstance()}function Qqe(){return lB.getDefaultOTLPTracerComponents()}const eXe={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function tXe(t){return eXe[t]||t}class nXe{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,n){for(const r of e)try{if(!r.run)continue;if(r.operation==="post"){const i=this.createSpanForRun(r,r.run,n.get(r.id));i&&!r.run.end_time&&this.spans.set(r.id,i)}else this.updateSpanForRun(r,r.run)}catch(i){console.error(`Error processing operation ${r.id}:`,i)}}createSpanForRun(e,n,r){const i=r&&gde().getSpan(r);if(i)try{return this.finishSpanSetup(i,n,e)}catch(a){console.error(`Failed to create span for run ${e.id}:`,a);return}}finishSpanSetup(e,n,r){return this.setSpanAttributes(e,n,r),n.error?(e.setStatus({code:2}),e.recordException(new Error(n.error))):e.setStatus({code:1}),n.end_time&&e.end(new Date(n.end_time)),e}updateSpanForRun(e,n){try{const r=this.spans.get(e.id);if(!r){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(r,n,e),n.error?(r.setStatus({code:2}),r.recordException(new Error(n.error))):r.setStatus({code:1});const i=n.end_time;i&&(r.end(new Date(i)),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){var n;if((n=e.extra)!=null&&n.metadata){const r=e.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const i=r.invocation_params;if(i.model)return i.model;if(i.model_name)return i.model_name}}}setSpanAttributes(e,n,r){var o;if("run_type"in n&&n.run_type){e.setAttribute(Rqe,n.run_type);const l=tXe(n.run_type||"chain");e.setAttribute(uqe,l)}"name"in n&&n.name&&e.setAttribute(Oqe,n.name),"session_id"in n&&n.session_id&&e.setAttribute(Pqe,n.session_id),"session_name"in n&&n.session_name&&e.setAttribute(Aqe,n.session_name),this.setGenAiSystem(e,n);const i=this.extractModelName(n);i&&e.setAttribute(pq,i),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&e.setAttribute(gq,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&e.setAttribute(vq,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&e.setAttribute(yq,n.total_tokens),this.setInvocationParameters(e,n);const a=((o=n.extra)==null?void 0:o.metadata)||{};for(const[l,c]of Object.entries(a))c!=null&&e.setAttribute(`${jqe}.${l}`,String(c));const s=n.tags;if(s&&Array.isArray(s)?e.setAttribute(bq,s.join(", ")):s&&e.setAttribute(bq,String(s)),"serialized"in n&&typeof n.serialized=="object"){const l=n.serialized;l.name&&e.setAttribute(Sqe,String(l.name)),l.signature&&e.setAttribute(Eqe,String(l.signature)),l.doc&&e.setAttribute(Nqe,String(l.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,n){let r="langchain";const i=this.extractModelName(n);if(i){const a=i.toLowerCase();a.includes("anthropic")||a.startsWith("claude")?r="anthropic":a.includes("bedrock")?r="aws.bedrock":a.includes("azure")&&a.includes("openai")?r="az.ai.openai":a.includes("azure")&&a.includes("inference")?r="az.ai.inference":a.includes("cohere")?r="cohere":a.includes("deepseek")?r="deepseek":a.includes("gemini")?r="gemini":a.includes("groq")?r="groq":a.includes("watson")||a.includes("ibm")?r="ibm.watsonx.ai":a.includes("mistral")?r="mistral_ai":a.includes("gpt")||a.includes("openai")?r="openai":a.includes("perplexity")||a.includes("sonar")?r="perplexity":a.includes("vertex")?r="vertex_ai":(a.includes("xai")||a.includes("grok"))&&(r="xai")}e.setAttribute(cqe,r)}setInvocationParameters(e,n){var i,a;if(!((a=(i=n.extra)==null?void 0:i.metadata)!=null&&a.invocation_params))return;const r=n.extra.metadata.invocation_params;r.max_tokens!==void 0&&e.setAttribute(fqe,r.max_tokens),r.temperature!==void 0&&e.setAttribute(hqe,r.temperature),r.top_p!==void 0&&e.setAttribute(mqe,r.top_p),r.frequency_penalty!==void 0&&e.setAttribute(pqe,r.frequency_penalty),r.presence_penalty!==void 0&&e.setAttribute(gqe,r.presence_penalty)}setIOAttributes(e,n){if(n.run.inputs)try{const r=n.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(pq,r.model),r.stream!==void 0&&e.setAttribute(Iqe,r.stream),r.extra_headers&&e.setAttribute(Mqe,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(wqe,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(xqe,JSON.stringify(r.extra_body))),e.setAttribute(yqe,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${n.id}`,r)}if(n.run.outputs)try{const r=n.run.outputs,i=this.getUnifiedRunTokens(r);if(i&&(e.setAttribute(gq,i[0]),e.setAttribute(vq,i[1]),e.setAttribute(yq,i[0]+i[1])),r&&typeof r=="object"){if(r.model&&e.setAttribute(dqe,String(r.model)),r.id&&e.setAttribute(_qe,r.id),r.choices&&Array.isArray(r.choices)){const a=r.choices.map(s=>s.finish_reason).filter(s=>s).map(String);a.length>0&&e.setAttribute(vqe,a.join(", "))}if(r.service_tier&&e.setAttribute(Cqe,r.service_tier),r.system_fingerprint&&e.setAttribute(Tqe,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const a=r.usage_metadata;a.input_token_details&&e.setAttribute(Dqe,JSON.stringify(a.input_token_details)),a.output_token_details&&e.setAttribute(kqe,JSON.stringify(a.output_token_details))}}e.setAttribute(bqe,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${n.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let n=this.extractUnifiedRunTokens(e.usage_metadata);if(n)return n;const r=Object.keys(e);for(const s of r){const o=e[s];if(!(!o||typeof o!="object")&&(n=this.extractUnifiedRunTokens(o.usage_metadata),n||o.lc===1&&o.kwargs&&typeof o.kwargs=="object"&&(n=this.extractUnifiedRunTokens(o.kwargs.usage_metadata),n)))return n}const i=e.generations||[];if(!Array.isArray(i))return null;const a=Array.isArray(i[0])?i.flat():i;for(const s of a)if(typeof s=="object"&&s.message&&typeof s.message=="object"&&s.message.kwargs&&typeof s.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(s.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}var vde={},yde={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function a(l,c,f,h,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,h||l,m),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,v=new Array(p);m<p;m++)v[m]=h[m].fn;return v},o.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,f,h,m,p,v){var y=n?n+c:c;if(!this._events[y])return!1;var x=this._events[y],S=arguments.length,_,N;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),S){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,h),!0;case 4:return x.fn.call(x.context,f,h,m),!0;case 5:return x.fn.call(x.context,f,h,m,p),!0;case 6:return x.fn.call(x.context,f,h,m,p,v),!0}for(N=1,_=new Array(S-1);N<S;N++)_[N-1]=arguments[N];x.fn.apply(x.context,_)}else{var k=x.length,P;for(N=0;N<k;N++)switch(x[N].once&&this.removeListener(c,x[N].fn,void 0,!0),S){case 1:x[N].fn.call(x[N].context);break;case 2:x[N].fn.call(x[N].context,f);break;case 3:x[N].fn.call(x[N].context,f,h);break;case 4:x[N].fn.call(x[N].context,f,h,m);break;default:if(!_)for(P=1,_=new Array(S-1);P<S;P++)_[P-1]=arguments[P];x[N].fn.apply(x[N].context,_)}}return!0},o.prototype.on=function(c,f,h){return a(this,c,f,h,!1)},o.prototype.once=function(c,f,h){return a(this,c,f,h,!0)},o.prototype.removeListener=function(c,f,h,m){var p=n?n+c:c;if(!this._events[p])return this;if(!f)return s(this,p),this;var v=this._events[p];if(v.fn)v.fn===f&&(!m||v.once)&&(!h||v.context===h)&&s(this,p);else{for(var y=0,x=[],S=v.length;y<S;y++)(v[y].fn!==f||m&&!v[y].once||h&&v[y].context!==h)&&x.push(v[y]);x.length?this._events[p]=x.length===1?x[0]:x:s(this,p)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(yde);var rXe=yde.exports,BR={exports:{}},iXe=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const aXe=iXe;class bde extends Error{constructor(e){super(e),this.name="TimeoutError"}}const wde=(t,e,n)=>new Promise((r,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const a=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(l){i(l)}return}const s=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,o=n instanceof Error?n:new bde(s);typeof t.cancel=="function"&&t.cancel(),i(o)},e);aXe(t.then(r,i),()=>{clearTimeout(a)})});BR.exports=wde;BR.exports.default=wde;BR.exports.TimeoutError=bde;var sXe=BR.exports,uB={},cB={};Object.defineProperty(cB,"__esModule",{value:!0});function oXe(t,e,n){let r=0,i=t.length;for(;i>0;){const a=i/2|0;let s=r+a;n(t[s],e)<=0?(r=++s,i-=a+1):i=a}return r}cB.default=oXe;Object.defineProperty(uB,"__esModule",{value:!0});const lXe=cB;class uXe{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const i=lXe.default(this._queue,r,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}uB.default=uXe;Object.defineProperty(vde,"__esModule",{value:!0});const cXe=rXe,xde=sXe,dXe=uB,yD=()=>{},fXe=new xde.TimeoutError;class hXe extends cXe{constructor(e){var n,r,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=yD,this._resolveIdle=yD,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:dXe.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=yD,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=yD,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,i)=>{const a=async()=>{this._pendingCount++,this._intervalCount++;try{const s=this._timeout===void 0&&n.timeout===void 0?e():xde.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&i(fXe)});r(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(a,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var bm=vde.default=hXe;const mXe=[429,500,502,503,504];let xq=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in bm?this.queue=new bm.default({concurrency:this.maxConcurrency}):this.queue=new bm({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){const r=this.onFailedResponseHook;return this.queue.add(()=>XP(()=>e(...n).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.name==="TimeoutError"||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const a=i==null?void 0:i.response;if(r&&await r(a))return;const s=(a==null?void 0:a.status)??(i==null?void 0:i.status);if(s&&!mXe.includes(+s))throw i},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,a)=>{var s;(s=e.signal)==null||s.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(n,...r)}};function Sq(t){return typeof(t==null?void 0:t._getType)=="function"}function Eq(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}const pXe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function or(t,e){if(!pXe.test(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}const Nq={};function y5(t){Nq[t]||(console.warn(t),Nq[t]=!0)}var b5={exports:{}};const gXe="2.0.0",Sde=256,vXe=Number.MAX_SAFE_INTEGER||9007199254740991,yXe=16,bXe=Sde-6,wXe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var UR={MAX_LENGTH:Sde,MAX_SAFE_COMPONENT_LENGTH:yXe,MAX_SAFE_BUILD_LENGTH:bXe,MAX_SAFE_INTEGER:vXe,RELEASE_TYPES:wXe,SEMVER_SPEC_VERSION:gXe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},cV={};const xXe=typeof process=="object"&&cV&&cV.NODE_DEBUG&&/\bsemver\b/i.test(cV.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var WR=xXe;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=UR,a=WR;e=t.exports={};const s=e.re=[],o=e.safeRe=[],l=e.src=[],c=e.t={};let f=0;const h="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[h,r]],p=y=>{for(const[x,S]of m)y=y.split(`${x}*`).join(`${x}{0,${S}}`).split(`${x}+`).join(`${x}{1,${S}}`);return y},v=(y,x,S)=>{const _=p(x),N=f++;a(y,N,x),c[y]=N,l[N]=x,s[N]=new RegExp(x,S?"g":void 0),o[N]=new RegExp(_,S?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),v("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${h}+`),v("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),v("FULL",`^${l[c.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),v("LOOSE",`^${l[c.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),v("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),v("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",l[c.COERCE],!0),v("COERCERTLFULL",l[c.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",v("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",v("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(b5,b5.exports);var y_=b5.exports;const SXe=Object.freeze({loose:!0}),EXe=Object.freeze({}),NXe=t=>t?typeof t!="object"?SXe:t:EXe;var dB=NXe;const _q=/^[0-9]+$/,Ede=(t,e)=>{const n=_q.test(t),r=_q.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},_Xe=(t,e)=>Ede(e,t);var Nde={compareIdentifiers:Ede,rcompareIdentifiers:_Xe};const bD=WR,{MAX_LENGTH:Cq,MAX_SAFE_INTEGER:wD}=UR,{safeRe:Tq,t:Dq}=y_,CXe=dB,{compareIdentifiers:D0}=Nde;let TXe=class kf{constructor(e,n){if(n=CXe(n),e instanceof kf){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Cq)throw new TypeError(`version is longer than ${Cq} characters`);bD("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?Tq[Dq.LOOSE]:Tq[Dq.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>wD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>wD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>wD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<wD)return a}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(bD("SemVer.compare",this.version,this.options,e),!(e instanceof kf)){if(typeof e=="string"&&e===this.version)return 0;e=new kf(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof kf||(e=new kf(e,this.options)),D0(this.major,e.major)||D0(this.minor,e.minor)||D0(this.patch,e.patch)}comparePre(e){if(e instanceof kf||(e=new kf(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=e.prerelease[n];if(bD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return D0(r,i)}while(++n)}compareBuild(e){e instanceof kf||(e=new kf(e,this.options));let n=0;do{const r=this.build[n],i=e.build[n];if(bD("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return D0(r,i)}while(++n)}inc(e,n,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let a=[n,i];r===!1&&(a=[n]),D0(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var fB=TXe;const kq=fB,DXe=(t,e,n)=>new kq(t,n).compare(new kq(e,n));var yx=DXe;const kXe=yx,PXe=(t,e,n)=>kXe(t,e,n)>0;var AXe=PXe;const RXe=yx,OXe=(t,e,n)=>RXe(t,e,n)<0;var jXe=OXe;const IXe=yx,MXe=(t,e,n)=>IXe(t,e,n)===0;var VXe=MXe;const $Xe=yx,LXe=(t,e,n)=>$Xe(t,e,n)!==0;var FXe=LXe;const BXe=yx,UXe=(t,e,n)=>BXe(t,e,n)>=0;var WXe=UXe;const zXe=yx,HXe=(t,e,n)=>zXe(t,e,n)<=0;var GXe=HXe;const KXe=VXe,YXe=FXe,JXe=AXe,qXe=WXe,XXe=jXe,ZXe=GXe,QXe=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return KXe(t,n,r);case"!=":return YXe(t,n,r);case">":return JXe(t,n,r);case">=":return qXe(t,n,r);case"<":return XXe(t,n,r);case"<=":return ZXe(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var eZe=QXe;const{safeRe:Tlt,t:Dlt}=y_;class tZe{constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}}var nZe=tZe,dV,Pq;function Md(){if(Pq)return dV;Pq=1;const t=/\s+/g;class e{constructor(H,q){if(q=i(q),H instanceof e)return H.loose===!!q.loose&&H.includePrerelease===!!q.includePrerelease?H:new e(H.raw,q);if(H instanceof a)return this.raw=H.value,this.set=[[H]],this.formatted=void 0,this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=H.trim().replace(t," "),this.set=this.raw.split("||").map(F=>this.parseRange(F.trim())).filter(F=>F.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const F=this.set[0];if(this.set=this.set.filter(J=>!y(J[0])),this.set.length===0)this.set=[F];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&x(J[0])){this.set=[J];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let H=0;H<this.set.length;H++){H>0&&(this.formatted+="||");const q=this.set[H];for(let F=0;F<q.length;F++)F>0&&(this.formatted+=" "),this.formatted+=q[F].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(H){const F=((this.options.includePrerelease&&p)|(this.options.loose&&v))+":"+H,J=r.get(F);if(J)return J;const Z=this.options.loose,G=Z?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];H=H.replace(G,Y(this.options.includePrerelease)),s("hyphen replace",H),H=H.replace(l[c.COMPARATORTRIM],f),s("comparator trim",H),H=H.replace(l[c.TILDETRIM],h),s("tilde trim",H),H=H.replace(l[c.CARETTRIM],m),s("caret trim",H);let oe=H.split(" ").map(X=>_(X,this.options)).join(" ").split(/\s+/).map(X=>W(X,this.options));Z&&(oe=oe.filter(X=>(s("loose invalid filter",X,this.options),!!X.match(l[c.COMPARATORLOOSE])))),s("range list",oe);const ae=new Map,te=oe.map(X=>new a(X,this.options));for(const X of te){if(y(X))return[X];ae.set(X.value,X)}ae.size>1&&ae.has("")&&ae.delete("");const re=[...ae.values()];return r.set(F,re),re}intersects(H,q){if(!(H instanceof e))throw new TypeError("a Range is required");return this.set.some(F=>S(F,q)&&H.set.some(J=>S(J,q)&&F.every(Z=>J.every(G=>Z.intersects(G,q)))))}test(H){if(!H)return!1;if(typeof H=="string")try{H=new o(H,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(V(this.set[q],H,this.options))return!0;return!1}}dV=e;const n=nZe,r=new n,i=dB,a=zR(),s=WR,o=fB,{safeRe:l,t:c,comparatorTrimReplace:f,tildeTrimReplace:h,caretTrimReplace:m}=y_,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:v}=UR,y=I=>I.value==="<0.0.0-0",x=I=>I.value==="",S=(I,H)=>{let q=!0;const F=I.slice();let J=F.pop();for(;q&&F.length;)q=F.every(Z=>J.intersects(Z,H)),J=F.pop();return q},_=(I,H)=>(s("comp",I,H),I=O(I,H),s("caret",I),I=k(I,H),s("tildes",I),I=T(I,H),s("xrange",I),I=B(I,H),s("stars",I),I),N=I=>!I||I.toLowerCase()==="x"||I==="*",k=(I,H)=>I.trim().split(/\s+/).map(q=>P(q,H)).join(" "),P=(I,H)=>{const q=H.loose?l[c.TILDELOOSE]:l[c.TILDE];return I.replace(q,(F,J,Z,G,oe)=>{s("tilde",I,F,J,Z,G,oe);let ae;return N(J)?ae="":N(Z)?ae=`>=${J}.0.0 <${+J+1}.0.0-0`:N(G)?ae=`>=${J}.${Z}.0 <${J}.${+Z+1}.0-0`:oe?(s("replaceTilde pr",oe),ae=`>=${J}.${Z}.${G}-${oe} <${J}.${+Z+1}.0-0`):ae=`>=${J}.${Z}.${G} <${J}.${+Z+1}.0-0`,s("tilde return",ae),ae})},O=(I,H)=>I.trim().split(/\s+/).map(q=>A(q,H)).join(" "),A=(I,H)=>{s("caret",I,H);const q=H.loose?l[c.CARETLOOSE]:l[c.CARET],F=H.includePrerelease?"-0":"";return I.replace(q,(J,Z,G,oe,ae)=>{s("caret",I,J,Z,G,oe,ae);let te;return N(Z)?te="":N(G)?te=`>=${Z}.0.0${F} <${+Z+1}.0.0-0`:N(oe)?Z==="0"?te=`>=${Z}.${G}.0${F} <${Z}.${+G+1}.0-0`:te=`>=${Z}.${G}.0${F} <${+Z+1}.0.0-0`:ae?(s("replaceCaret pr",ae),Z==="0"?G==="0"?te=`>=${Z}.${G}.${oe}-${ae} <${Z}.${G}.${+oe+1}-0`:te=`>=${Z}.${G}.${oe}-${ae} <${Z}.${+G+1}.0-0`:te=`>=${Z}.${G}.${oe}-${ae} <${+Z+1}.0.0-0`):(s("no pr"),Z==="0"?G==="0"?te=`>=${Z}.${G}.${oe}${F} <${Z}.${G}.${+oe+1}-0`:te=`>=${Z}.${G}.${oe}${F} <${Z}.${+G+1}.0-0`:te=`>=${Z}.${G}.${oe} <${+Z+1}.0.0-0`),s("caret return",te),te})},T=(I,H)=>(s("replaceXRanges",I,H),I.split(/\s+/).map(q=>L(q,H)).join(" ")),L=(I,H)=>{I=I.trim();const q=H.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return I.replace(q,(F,J,Z,G,oe,ae)=>{s("xRange",I,F,J,Z,G,oe,ae);const te=N(Z),re=te||N(G),X=re||N(oe),ce=X;return J==="="&&ce&&(J=""),ae=H.includePrerelease?"-0":"",te?J===">"||J==="<"?F="<0.0.0-0":F="*":J&&ce?(re&&(G=0),oe=0,J===">"?(J=">=",re?(Z=+Z+1,G=0,oe=0):(G=+G+1,oe=0)):J==="<="&&(J="<",re?Z=+Z+1:G=+G+1),J==="<"&&(ae="-0"),F=`${J+Z}.${G}.${oe}${ae}`):re?F=`>=${Z}.0.0${ae} <${+Z+1}.0.0-0`:X&&(F=`>=${Z}.${G}.0${ae} <${Z}.${+G+1}.0-0`),s("xRange return",F),F})},B=(I,H)=>(s("replaceStars",I,H),I.trim().replace(l[c.STAR],"")),W=(I,H)=>(s("replaceGTE0",I,H),I.trim().replace(l[H.includePrerelease?c.GTE0PRE:c.GTE0],"")),Y=I=>(H,q,F,J,Z,G,oe,ae,te,re,X,ce)=>(N(F)?q="":N(J)?q=`>=${F}.0.0${I?"-0":""}`:N(Z)?q=`>=${F}.${J}.0${I?"-0":""}`:G?q=`>=${q}`:q=`>=${q}${I?"-0":""}`,N(te)?ae="":N(re)?ae=`<${+te+1}.0.0-0`:N(X)?ae=`<${te}.${+re+1}.0-0`:ce?ae=`<=${te}.${re}.${X}-${ce}`:I?ae=`<${te}.${re}.${+X+1}-0`:ae=`<=${ae}`,`${q} ${ae}`.trim()),V=(I,H,q)=>{for(let F=0;F<I.length;F++)if(!I[F].test(H))return!1;if(H.prerelease.length&&!q.includePrerelease){for(let F=0;F<I.length;F++)if(s(I[F].semver),I[F].semver!==a.ANY&&I[F].semver.prerelease.length>0){const J=I[F].semver;if(J.major===H.major&&J.minor===H.minor&&J.patch===H.patch)return!0}return!1}return!0};return dV}var fV,Aq;function zR(){if(Aq)return fV;Aq=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(f,h){if(h=n(h),f instanceof e){if(f.loose===!!h.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),s("comparator",f,h),this.options=h,this.loose=!!h.loose,this.parse(f),this.semver===t?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(f){const h=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],m=f.match(h);if(!m)throw new TypeError(`Invalid comparator: ${f}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new o(m[2],this.options.loose):this.semver=t}toString(){return this.value}test(f){if(s("Comparator.test",f,this.options.loose),this.semver===t||f===t)return!0;if(typeof f=="string")try{f=new o(f,this.options)}catch{return!1}return a(f,this.operator,this.semver,this.options)}intersects(f,h){if(!(f instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,h).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,h).test(f.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||a(this.semver,"<",f.semver,h)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||a(this.semver,">",f.semver,h)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}fV=e;const n=dB,{safeRe:r,t:i}=y_,a=eZe,s=WR,o=fB,l=Md();return fV}Md();Md();Md();Md();Md();Md();const rZe=zR(),{ANY:klt}=rZe;Md();Md();Md();const hB=zR(),{ANY:Plt}=hB;new hB(">=0.0.0-0");new hB(">=0.0.0");const hV=y_,Rq=UR,Oq=Nde;zR();Md();hV.re,hV.src,hV.t,Rq.SEMVER_SPEC_VERSION,Rq.RELEASE_TYPES,Oq.compareIdentifiers,Oq.rcompareIdentifiers;function zp(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),r=n||"latest";if(e.includes("/")){const[i,a]=e.split("/",2);if(!i||!a)throw new Error(`Invalid identifier format: ${t}`);return[i,a,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class iZe extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function Rn(t,e,n){let r;if(t.ok){n&&(r=await t.text());return}if(t.status===403)try{const s=await t.json();(s==null?void 0:s.error)==="org_scoped_key_requires_workspace"&&(r="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const o=new Error(`${t.status} ${t.statusText}`);throw o.status=t==null?void 0:t.status,o}if(r===void 0)try{r=await t.text()}catch{r=""}const i=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Message: ${r}`;if(t.status===409)throw new iZe(i);const a=new Error(i);throw a.status=t.status,a}const _de="ERR_CONFLICTING_ENDPOINTS";class aZe extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:_de}),this.name="ConflictingEndpointsError"}}function sZe(t){return typeof t=="object"&&t!==null&&t.code===_de}var jq="[...]",oZe={result:"[Circular]"},eA=[],hw=[];const lZe=new TextEncoder;function uZe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function xD(t){return lZe.encode(t)}function Cde(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function cZe(t){return function(e,n){return Cde(n)}}function iu(t,e,n,r,i){var a;try{const s=JSON.stringify(t,cZe(n),r);return xD(s)}catch(s){if(!((a=s.message)!=null&&a.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),xD("[Unserializable]");Sl("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i>"u"&&(i=uZe()),w5(t,"",0,[],void 0,0,i);let o;try{hw.length===0?o=JSON.stringify(t,n,r):o=JSON.stringify(t,dZe(n),r)}catch{return xD("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;eA.length!==0;){const l=eA.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return xD(o)}}function mV(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),eA.push([r,n,e,i])):hw.push([e,n,t]):(r[n]=t,eA.push([r,n,e]))}function w5(t,e,n,r,i,a,s){a+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t){mV(oZe,t,e,i);return}if(typeof s.depthLimit<"u"&&a>s.depthLimit){mV(jq,t,e,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){mV(jq,t,e,i);return}if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)w5(t[o],o,o,r,t,a,s);else{t=Cde(t);var l=Object.keys(t);for(o=0;o<l.length;o++){var c=l[o];w5(t[c],c,o,r,t,a,s)}}r.pop()}}function dZe(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(hw.length>0)for(var r=0;r<hw.length;r++){var i=hw[r];if(i[1]===e&&i[0]===n){n=i[2],hw.splice(r,1);break}}return t.call(this,e,n)}}function Iq(t,e){const n=hde(),r=e??mde(),i=t.extra??{},a=i.metadata;return t.extra={...i,runtime:{...n,...i==null?void 0:i.runtime},metadata:{...r,...r.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??r.revision_id}:{},...a}},t}const fZe=t=>{const e=(t==null?void 0:t.toString())??Sl("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},hZe=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function mZe(t){const e=[];for await(const n of t)e.push(n);return e}function SD(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const pZe=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function Mq(t){return typeof t=="number"?Number(t.toFixed(4)):t}class gZe{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let n;const r=new Promise(a=>{n=a}),i=iu(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:n,itemPromise:r,size:i}),this.sizeBytes+=i,r}pop({upToSizeBytes:e,upToSize:n}){var a;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const r=[];let i=0;for(;i+(((a=this.peek())==null?void 0:a.size)??0)<e&&this.items.length>0&&r.length<n;){const s=this.items.shift();s&&(r.push(s),i+=s.size,this.sizeBytes-=s.size)}if(r.length===0&&this.items.length>0){const s=this.items.shift();r.push(s),i+=s.size,this.sizeBytes-=s.size}return[r.map(s=>({action:s.action,item:s.payload,otelContext:s.otelContext,apiKey:s.apiKey,apiUrl:s.apiUrl})),()=>r.forEach(s=>s.itemPromiseResolve())]}}const vZe=24*1024*1024,yZe=1e4,bZe=100,Vq="https://api.smith.langchain.com";class PN{get _fetch(){return this.fetchImplementation||Lqe(this.debug)}constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new gZe}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:qf("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:qf("LANGSMITH_DEBUG")==="true"});const n=PN.getDefaultClientConfig();if(this.tracingSampleRate=fZe(e.tracingSamplingRate),this.apiUrl=SD(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=SD(e.apiKey??n.apiKey),this.webUrl=SD(e.webUrl??n.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=SD(e.workspaceId??Sl("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new xq({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation,this.batchIngestCaller=new xq({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:pZe,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,pde()&&(this.langSmithToOTELTranslator=new nXe),this.cachedLSEnvVarsForMetadata=mde()}static getDefaultClientConfig(){const e=Sl("API_KEY"),n=Sl("ENDPOINT")??Vq,r=Sl("HIDE_INPUTS")==="true",i=Sl("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:hZe(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${cde}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",i=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{const s=await this._fetch(i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(s,`fetch ${e}`),s})}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let i=Number(n.get("offset"))||0;const a=Number(n.get("limit"))||100;for(;;){n.set("offset",String(i)),n.set("limit",String(a));const s=`${this.apiUrl}${e}?${n}`,o=await this.caller.call(async()=>{const c=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(c,`fetch ${e}`),c}),l=r?r(await o.json()):await o.json();if(l.length===0||(yield l,l.length<a))break;i+=l.length}}async*_getCursorPaginatedList(e,n=null,r="POST",i="runs"){const a=n?{...n}:{};for(;;){const s=JSON.stringify(a),l=await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Rn(f,`fetch ${e}`),f})).json();if(!l||!l[i])break;yield l[i];const c=l.cursors;if(!c||!c.next)break;a.cursor=c.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const i of e)this.filteredPostUuids.has(i.trace_id)?i.id===i.trace_id&&this.filteredPostUuids.delete(i.trace_id):r.push(i);return r}else{const r=[];for(const i of e){const a=i.trace_id??i.id;this.filteredPostUuids.has(a)||(i.id===a?this._shouldSample()?r.push(i):this.filteredPostUuids.add(a):r.push(i))}return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??vZe}async _getBatchSizeLimit(){var n;const e=await this._ensureServerInfo();return this.batchSizeLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit)??bZe}async _getDatasetExamplesMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n}){const r=[];for(;this.autoBatchQueue.items.length>0;){const[i,a]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:n});if(!i.length){a();break}const s=i.reduce((c,f)=>{const h=f.apiUrl??this.apiUrl,m=f.apiKey??this.apiKey,v=f.apiKey===this.apiKey&&f.apiUrl===this.apiUrl?"default":`${h}|${m}`;return c[v]||(c[v]=[]),c[v].push(f),c},{}),o=[];for(const[c,f]of Object.entries(s)){const h=this._processBatch(f,{apiUrl:c==="default"?void 0:c.split("|")[0],apiKey:c==="default"?void 0:c.split("|")[1]});o.push(h)}const l=Promise.all(o).finally(a);r.push(l)}return Promise.all(r)}async _processBatch(e,n){var r,i;if(e.length)try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const a={runCreates:e.filter(o=>o.action==="create").map(o=>o.item),runUpdates:e.filter(o=>o.action==="update").map(o=>o.item)},s=await this._ensureServerInfo();if((r=s==null?void 0:s.batch_ingest_config)!=null&&r.use_multipart_endpoint){const o=(i=s==null?void 0:s.instance_flags)==null?void 0:i.gzip_body_enabled;await this.multipartIngestRuns(a,{...n,useGzip:o})}else await this.batchIngestRuns(a,n)}}catch(a){console.error("Error exporting batch:",a)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const n=new Map,r=[];for(const i of e)i.item.id&&i.otelContext&&(n.set(i.item.id,i.otelContext),i.action==="create"?r.push({operation:"post",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}):r.push({operation:"patch",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}));this.langSmithToOTELTranslator.exportBatch(r,n)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=Iq(e.item,this.cachedLSEnvVarsForMetadata);const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes(),i=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>r||this.autoBatchQueue.items.length>i)&&this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:i}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:i})},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const n=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(yZe),...this.fetchOptions});return await Rn(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n})}_cloneCurrentOTELContext(){const e=gde(),n=Zqe();if(this.langSmithToOTELTranslator!==void 0){const r=e.getActiveSpan();if(r)return e.setSpan(n.active(),r)}}async createRun(e,n){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},i=e.project_name;delete e.project_name;const a=await this.prepareRunCreateOrUpdateInputs({session_name:i,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&a.trace_id!==void 0&&a.dotted_order!==void 0){const l=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:a,otelContext:l,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}const s=Iq(a,this.cachedLSEnvVarsForMetadata);(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(r["x-tenant-id"]=n.workspaceId);const o=iu(s,`Creating run with id: ${s.id}`);await this.caller.call(async()=>{const l=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Rn(l,"create run",!0),l})}async batchIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;let i=await Promise.all((e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]),a=await Promise.all((n==null?void 0:n.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]);if(i.length>0&&a.length>0){const l=i.reduce((f,h)=>(h.id&&(f[h.id]=h),f),{}),c=[];for(const f of a)f.id!==void 0&&l[f.id]?l[f.id]={...l[f.id],...f}:c.push(f);i=Object.values(l),a=c}const s={post:i,patch:a};if(!s.post.length&&!s.patch.length)return;const o={post:[],patch:[]};for(const l of["post","patch"]){const c=l,f=s[c].reverse();let h=f.pop();for(;h!==void 0;)o[c].push(h),h=f.pop()}if(o.post.length>0||o.patch.length>0){const l=o.post.map(c=>c.id).concat(o.patch.map(c=>c.id)).join(",");await this._postBatchIngestRuns(iu(o,`Ingesting runs with ids: ${l}`),r)}}async _postBatchIngestRuns(e,n){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),await this.batchIngestCaller.call(async()=>{const i=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await Rn(i,"batch create run",!0),i})}async multipartIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;const i={};let a=[];for(const h of e??[]){const m=await this.prepareRunCreateOrUpdateInputs(h);m.id!==void 0&&m.attachments!==void 0&&(i[m.id]=m.attachments),delete m.attachments,a.push(m)}let s=[];for(const h of n??[])s.push(await this.prepareRunCreateOrUpdateInputs(h));if(a.find(h=>h.trace_id===void 0||h.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(s.find(h=>h.trace_id===void 0||h.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(a.length>0&&s.length>0){const h=a.reduce((p,v)=>(v.id&&(p[v.id]=v),p),{}),m=[];for(const p of s)p.id!==void 0&&h[p.id]?h[p.id]={...h[p.id],...p}:m.push(p);a=Object.values(h),s=m}if(a.length===0&&s.length===0)return;const c=[],f=[];for(const[h,m]of[["post",a],["patch",s]])for(const p of m){const{inputs:v,outputs:y,events:x,extra:S,error:_,serialized:N,attachments:k,...P}=p,O={inputs:v,outputs:y,events:x,extra:S,error:_,serialized:N},A=iu(P,`Serializing for multipart ingestion of run with id: ${P.id}`);f.push({name:`${h}.${P.id}`,payload:new Blob([A],{type:`application/json; length=${A.length}`})});for(const[T,L]of Object.entries(O)){if(L===void 0)continue;const B=iu(L,`Serializing ${T} for multipart ingestion of run with id: ${P.id}`);f.push({name:`${h}.${P.id}.${T}`,payload:new Blob([B],{type:`application/json; length=${B.length}`})})}if(P.id!==void 0){const T=i[P.id];if(T){delete i[P.id];for(const[L,B]of Object.entries(T)){let W,Y;if(Array.isArray(B)?[W,Y]=B:(W=B.mimeType,Y=B.data),L.includes(".")){console.warn(`Skipping attachment '${L}' for run ${P.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}f.push({name:`attachment.${P.id}.${L}`,payload:new Blob([Y],{type:`${W}; length=${Y.byteLength}`})})}}}c.push(`trace=${P.trace_id},id=${P.id}`)}await this._sendMultipartRequest(f,c.join("; "),r)}async _createNodeFetchBody(e,n){const r=[];for(const s of e)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${s.name}"\r
`,`Content-Type: ${s.payload.type}\r
\r
`])),r.push(s.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,n){const r=new TextEncoder;return new ReadableStream({async start(a){const s=async o=>{typeof o=="string"?a.enqueue(r.encode(o)):a.enqueue(o)};for(const o of e){await s(`--${n}\r
`),await s(`Content-Disposition: form-data; name="${o.name}"\r
`),await s(`Content-Type: ${o.payload.type}\r
\r
`);const c=o.payload.stream().getReader();try{let f;for(;!(f=await c.read()).done;)a.enqueue(f.value)}finally{c.releaseLock()}await s(`\r
`)}await s(`--${n}--\r
`),a.close()}})}async _sendMultipartRequest(e,n,r){const i="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),a=$qe(),s=()=>this._createNodeFetchBody(e,i),o=()=>this._createMultipartStream(e,i),l=async c=>this.batchIngestCaller.call(async()=>{const f=await c(),h={...this.headers,"Content-Type":`multipart/form-data; boundary=${i}`};(r==null?void 0:r.apiKey)!==void 0&&(h["x-api-key"]=r.apiKey);let m=f;r!=null&&r.useGzip&&typeof f=="object"&&"pipeThrough"in f&&(m=f.pipeThrough(new CompressionStream("gzip")),h["Content-Encoding"]="gzip");const p=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:h,body:m,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(p,"Failed to send multipart request",!0),p});try{let c,f=!1;!a&&!this.multipartStreamingDisabled&&fde()!=="bun"?(f=!0,c=await l(o)):c=await l(s),(!this.multipartStreamingDisabled||f)&&c.status===422&&((r==null?void 0:r.apiUrl)??this.apiUrl)!==Vq&&(console.warn(`Streaming multipart upload to ${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,c=await l(s))}catch(c){console.warn(`${c.message.trim()}

Context: ${n}`)}}async updateRun(e,n,r){or(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const i={...n,id:e};if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&i.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:i,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:i,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const a={...this.headers,"Content-Type":"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(a["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(a["x-tenant-id"]=r.workspaceId);const s=iu(n,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const o=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Rn(o,"update run",!0),o})}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){or(e);let r=await this._get(`/runs/${e}`);return n&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let i;n.session_id?i=n.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:Sl("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${i}/r/${n.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var a;const n=await mZe(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},i={};n.sort((s,o)=>((s==null?void 0:s.dotted_order)??"").localeCompare((o==null?void 0:o.dotted_order)??""));for(const s of n){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);(a=s.dotted_order)!=null&&a.startsWith(e.dotted_order??"")&&s.id!==e.id&&(s.parent_run_id in r||(r[s.parent_run_id]=[]),r[s.parent_run_id].push(s),i[s.id]=s)}e.child_runs=r[e.id]||[];for(const s in r)s!==e.id&&(i[s].child_runs=r[s]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:i,traceId:a,referenceExampleId:s,startTime:o,executionOrder:l,isRoot:c,runType:f,error:h,id:m,query:p,filter:v,traceFilter:y,treeFilter:x,limit:S,select:_,order:N}=e;let k=[];if(n&&(k=Array.isArray(n)?n:[n]),r){const T=Array.isArray(r)?r:[r],L=await Promise.all(T.map(B=>this.readProject({projectName:B}).then(W=>W.id)));k.push(...L)}const P=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],O={session:k.length?k:null,run_type:f,reference_example:s,query:p,filter:v,trace_filter:y,tree_filter:x,execution_order:l,parent_run:i,start_time:o?o.toISOString():null,error:h,id:m,limit:S,trace:a,select:_||P,is_root:c,order:N};O.select.includes("child_run_ids")&&y5("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let A=0;for await(const T of this._getCursorPaginatedList("/runs/query",O))if(S){if(A>=S)break;if(T.length+A>S){yield*T.slice(0,S-A);break}A+=T.length,yield*T}else yield*T}async*listGroupRuns(e){const{projectId:n,projectName:r,groupBy:i,filter:a,startTime:s,endTime:o,limit:l,offset:c}=e,h={session_id:n||(await this.readProject({projectName:r})).id,group_by:i,filter:a,start_time:s?s.toISOString():null,end_time:o?o.toISOString():null,limit:Number(l)||100};let m=Number(c)||0;const p="/runs/group",v=`${this.apiUrl}${p}`;for(;;){const y={...h,offset:m},x=Object.fromEntries(Object.entries(y).filter(([O,A])=>A!==void 0)),S=JSON.stringify(x),N=await(await this.caller.call(async()=>{const O=await this._fetch(v,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:S});return await Rn(O,`Failed to fetch ${p}`),O})).json(),{groups:k,total:P}=N;if(k.length===0)break;for(const O of k)yield O;if(m+=k.length,m>=P)break}}async getRunStats({id:e,trace:n,parentRun:r,runType:i,projectNames:a,projectIds:s,referenceExampleIds:o,startTime:l,endTime:c,error:f,query:h,filter:m,traceFilter:p,treeFilter:v,isRoot:y,dataSourceType:x}){let S=s||[];a&&(S=[...s||[],...await Promise.all(a.map(A=>this.readProject({projectName:A}).then(T=>T.id)))]);const N=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:i,session:S,reference_example:o,start_time:l,end_time:c,error:f,query:h,filter:m,trace_filter:p,tree_filter:v,is_root:y,data_source_type:x}).filter(([A,T])=>T!==void 0)),k=JSON.stringify(N);return await(await this.caller.call(async()=>{const A=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:k});return await Rn(A,"get run stats"),A})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||G0()};or(e);const i=JSON.stringify(r),s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Rn(o,"share run"),o})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){or(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(n,"unshare run",!0),n})}async readRunSharedLink(e){or(e);const r=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(i,"read run shared link"),i})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const s of n)r.append("id",s);return or(e),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(s,"list shared runs"),s})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),or(e);const i=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(a,"read dataset shared schema"),a})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};or(e);const i=JSON.stringify(r),s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Rn(o,"share dataset"),o})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){or(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(n,"unshare dataset",!0),n})}async readSharedDataset(e){return or(e),await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(i,"read shared dataset"),i})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const i=new URLSearchParams;Object.entries(r).forEach(([o,l])=>{Array.isArray(l)?l.forEach(c=>i.append(o,c)):i.append(o,l)});const a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(o,"list shared examples"),o}),s=await a.json();if(!a.ok)throw"detail"in s?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${Array.isArray(s.detail)?s.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return s.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:i=!1,projectExtra:a=null,referenceDatasetId:s=null}){const o=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,c=a||{};r&&(c.metadata=r);const f={name:e,extra:c,description:n};s!==null&&(f.reference_dataset_id=s);const h=JSON.stringify(f);return await(await this.caller.call(async()=>{const v=await this._fetch(l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Rn(v,"create project"),v})).json()}async updateProject(e,{name:n=null,description:r=null,metadata:i=null,projectExtra:a=null,endTime:s=null}){const o=`${this.apiUrl}/sessions/${e}`;let l=a;i&&(l={...l||{},metadata:i});const c=JSON.stringify({name:n,extra:l,description:r,end_time:s?new Date(s).toISOString():null});return await(await this.caller.call(async()=>{const m=await this._fetch(o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Rn(m,"update project"),m})).json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)or(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(s,"has project"),s});try{const s=await a.json();return a.ok?Array.isArray(s)?s.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let i="/sessions";const a=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)or(e),i+=`/${e}`;else if(n!==void 0)a.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&a.append("include_stats",r.toString());const s=await this._get(i,a);let o;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);o=s[0]}else o=s;return o}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:a,includeStats:s,datasetVersion:o,referenceFree:l,metadata:c}={}){const f=new URLSearchParams;if(e!==void 0)for(const h of e)f.append("id",h);if(n!==void 0&&f.append("name",n),r!==void 0&&f.append("name_contains",r),i!==void 0)f.append("reference_dataset",i);else if(a!==void 0){const h=await this.readDataset({datasetName:a});f.append("reference_dataset",h.id)}s!==void 0&&f.append("include_stats",s.toString()),o!==void 0&&f.append("dataset_version",o),l!==void 0&&f.append("reference_free",l.toString()),c!==void 0&&f.append("metadata",JSON.stringify(c));for await(const h of this._getPaginated("/sessions",f))yield*h}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,or(r),await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(i,`delete session ${r} (${n})`,!0),i})}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:i,description:a,dataType:s,name:o}){const l=`${this.apiUrl}/datasets/upload`,c=new FormData;return c.append("file",e,n),r.forEach(m=>{c.append("input_keys",m)}),i.forEach(m=>{c.append("output_keys",m)}),a&&c.append("description",a),s&&c.append("data_type",s),o&&c.append("name",o),await(await this.caller.call(async()=>{const m=await this._fetch(l,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Rn(m,"upload CSV"),m})).json()}async createDataset(e,{description:n,dataType:r,inputsSchema:i,outputsSchema:a,metadata:s}={}){const o={name:e,description:n,extra:s?{metadata:s}:void 0};r&&(o.data_type=r),i&&(o.inputs_schema_definition=i),a&&(o.outputs_schema_definition=a);const l=JSON.stringify(o);return await(await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Rn(h,"create dataset"),h})).json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(e)or(e),r+=`/${e}`;else if(n)i.append("name",n);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(r,i);let s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);s=a[0]}else s=a;return s}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:i}){let a=e;if(a===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:n})).id);const s=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,s)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:a,metadata:s}={}){const o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const c of r)l.append("id",c);i!==void 0&&l.append("name",i),a!==void 0&&l.append("name_contains",a),s!==void 0&&l.append("metadata",JSON.stringify(s));for await(const c of this._getPaginated(o,l))yield*c}async updateDataset(e){const{datasetId:n,datasetName:r,...i}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const a=n??(await this.readDataset({datasetName:r})).id;or(a);const s=JSON.stringify(i);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Rn(l,"update dataset"),l})).json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:i,tag:a}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const s=n??(await this.readDataset({datasetName:r})).id;or(s);const o=JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:a});await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${s}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Rn(l,"update dataset tags",!0),l})}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",i=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(i=(await this.readDataset({datasetName:n})).id),i!==void 0)or(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(a,`delete ${r}`,!0),a})}async indexDataset({datasetId:e,datasetName:n,tag:r}){let i=e;if(!i&&!n)throw new Error("Must provide either datasetName or datasetId");if(i&&n)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:n})).id),or(i);const s=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Rn(l,"index dataset"),l})).json()}async similarExamples(e,n,r,{filter:i}={}){const a={limit:r,inputs:e};i!==void 0&&(a.filter=i),or(n);const s=JSON.stringify(a);return(await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${n}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:s});return await Rn(c,"fetch similar examples"),c})).json()).examples}async createExample(e,n,r){var f;if($q(e)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=n?r==null?void 0:r.datasetId:e.dataset_id;const a=n?r==null?void 0:r.datasetName:e.dataset_name;if(i===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:a})).id);const s=(n?r==null?void 0:r.createdAt:e.created_at)||new Date;let o;$q(e)?o=e:o={inputs:e,outputs:n,created_at:s==null?void 0:s.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const l=await this._uploadExamplesMultipart(i,[o]);return await this.readExample(((f=l.example_ids)==null?void 0:f[0])??G0())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const _=e;let N=_[0].dataset_id;const k=_[0].dataset_name;if(N===void 0&&k===void 0)throw new Error("Must provide either datasetName or datasetId");if(N!==void 0&&k!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");N===void 0&&(N=(await this.readDataset({datasetName:k})).id);const P=await this._uploadExamplesMultipart(N,_);return await Promise.all(P.example_ids.map(A=>this.readExample(A)))}const{inputs:n,outputs:r,metadata:i,splits:a,sourceRunIds:s,useSourceRunIOs:o,useSourceRunAttachments:l,attachments:c,exampleIds:f,datasetId:h,datasetName:m}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let p=h;const v=m;if(p===void 0&&v===void 0)throw new Error("Must provide either datasetName or datasetId");if(p!==void 0&&v!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");p===void 0&&(p=(await this.readDataset({datasetName:v})).id);const y=n.map((_,N)=>({dataset_id:p,inputs:_,outputs:r==null?void 0:r[N],metadata:i==null?void 0:i[N],split:a==null?void 0:a[N],id:f==null?void 0:f[N],attachments:c==null?void 0:c[N],source_run_id:s==null?void 0:s[N],use_source_run_io:o==null?void 0:o[N],use_source_run_attachments:l==null?void 0:l[N]})),x=await this._uploadExamplesMultipart(p,y);return await Promise.all(x.example_ids.map(_=>this.readExample(_)))}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const i=e.map(s=>Sq(s)?Eq(s):s),a=Sq(n)?Eq(n):n;return this.createExample({input:i},{output:a},r)}async readExample(e){or(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:i,...a}=r,s=a;return i&&(s.attachments=Object.entries(i).reduce((o,[l,c])=>(o[l.slice(11)]={presigned_url:c.presigned_url,mime_type:c.mime_type},o),{})),s}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:i,splits:a,inlineS3Urls:s,metadata:o,limit:l,offset:c,filter:f,includeAttachments:h}={}){let m;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)m=e;else if(n!==void 0)m=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const p=new URLSearchParams({dataset:m}),v=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;v&&p.append("as_of",v);const y=s??!0;if(p.append("inline_s3_urls",y.toString()),r!==void 0)for(const S of r)p.append("id",S);if(a!==void 0)for(const S of a)p.append("splits",S);if(o!==void 0){const S=JSON.stringify(o);p.append("metadata",S)}l!==void 0&&p.append("limit",l.toString()),c!==void 0&&p.append("offset",c.toString()),f!==void 0&&p.append("filter",f),h===!0&&["attachment_urls","outputs","metadata"].forEach(S=>p.append("select",S));let x=0;for await(const S of this._getPaginated("/examples",p)){for(const _ of S){const{attachment_urls:N,...k}=_,P=k;N&&(P.attachments=Object.entries(N).reduce((O,[A,T])=>(O[A.slice(11)]={presigned_url:T.presigned_url,mime_type:T.mime_type||void 0},O),{})),yield P,x++}if(l!==void 0&&x>=l)break}}async deleteExample(e){or(e);const n=`/examples/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(r,`delete ${n}`,!0),r})}async updateExample(e,n){let r;n?r=e:r=e.id,or(r);let i;n?i={id:r,...n}:i=e;let a;return i.dataset_id!==void 0?a=i.dataset_id:a=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(a,[i])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:i}){let a;if(e?a=e:a=(await this.readDataset({datasetName:n})).id,or(a),r&&i||!r&&!i)throw new Error("Exactly one of asOf and tag must be specified.");const s=new URLSearchParams;return r!==void 0&&s.append("as_of",typeof r=="string"?r:r.toISOString()),i!==void 0&&s.append("tag",i),await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}/version?${s.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(l,"read dataset version"),l})).json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let i;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:n})).id:i=e,or(i);const a=new URLSearchParams,s=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return s&&a.append("as_of",s),await this._get(`/datasets/${i}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:i,remove:a=!1}){let s;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:n})).id:s=e,or(s);const o={split_name:r,examples:i.map(c=>(or(c),c)),remove:a},l=JSON.stringify(o);await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${s}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Rn(c,"update dataset splits",!0),c})}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:i,referenceExample:a}={loadChildRuns:!1}){y5("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let s;if(typeof e=="string")s=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)s=e;else throw new Error(`Invalid run type: ${typeof e}`);s.reference_example_id!==null&&s.reference_example_id!==void 0&&(a=await this.readExample(s.reference_example_id));const o=await n.evaluateRun(s,a),[l,c]=await this._logEvaluationFeedback(o,s,r);return c[0]}async createFeedback(e,n,{score:r,value:i,correction:a,comment:s,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:c,feedbackId:f,feedbackConfig:h,projectId:m,comparativeExperimentId:p}){var _;if(!e&&!m)throw new Error("One of runId or projectId must be provided");if(e&&m)throw new Error("Only one of runId or projectId can be provided");const v={type:l??"api",metadata:o??{}};c!==void 0&&(v==null?void 0:v.metadata)!==void 0&&!v.metadata.__run&&(v.metadata.__run={run_id:c}),(v==null?void 0:v.metadata)!==void 0&&((_=v.metadata.__run)==null?void 0:_.run_id)!==void 0&&or(v.metadata.__run.run_id);const y={id:f??G0(),run_id:e,key:n,score:Mq(r),value:i,correction:a,comment:s,feedback_source:v,comparative_experiment_id:p,feedbackConfig:h,session_id:m},x=JSON.stringify(y),S=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const N=await this._fetch(S,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:x});return await Rn(N,"create feedback",!0),N}),y}async updateFeedback(e,{score:n,value:r,correction:i,comment:a}){const s={};n!=null&&(s.score=Mq(n)),r!=null&&(s.value=r),i!=null&&(s.correction=i),a!=null&&(s.comment=a),or(e);const o=JSON.stringify(s);await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Rn(l,"update feedback",!0),l})}async readFeedback(e){or(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){or(e);const n=`/feedback/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(r,`delete ${n}`,!0),r})}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e)for(const a of e)or(a),i.append("run",a);if(n)for(const a of n)i.append("key",a);if(r)for(const a of r)i.append("source",a);for await(const a of this._getPaginated("/feedback",i))yield*a}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:i}={}){const a={run_id:e,feedback_key:n,feedback_config:i};r?typeof r=="string"?a.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(a.expires_in=r):a.expires_in={hours:3};const s=JSON.stringify(a);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Rn(l,"create presigned feedback token"),l})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:i,description:a,metadata:s,id:o}){var h;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const l={id:o,name:e,experiment_ids:n,reference_dataset_id:r,description:a,created_at:(h=i??new Date)==null?void 0:h.toISOString(),extra:{}};s&&(l.extra.metadata=s);const c=JSON.stringify(l);return(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Rn(m,"create comparative experiment"),m})).json()}async*listPresignedFeedbackTokens(e){or(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const i=this._selectEvalResults(e),a=[];for(const s of i){let o=r||{};s.evaluatorInfo&&(o={...s.evaluatorInfo,...o});let l=null;s.targetRunId?l=s.targetRunId:n&&(l=n.id),a.push(await this.createFeedback(l,s.key,{score:s.score,value:s.value,comment:s.comment,correction:s.correction,sourceInfo:o,sourceRunId:s.sourceRunId,feedbackConfig:s.feedbackConfig,feedbackSourceType:"model"}))}return[i,a]}async logEvaluationFeedback(e,n,r){const[i]=await this._logEvaluationFeedback(e,n,r);return i}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:i,limit:a}=e,s=new URLSearchParams;n&&n.forEach((l,c)=>{or(l,`queueIds[${c}]`),s.append("ids",l)}),r&&s.append("name",r),i&&s.append("name_contains",i),s.append("limit",(a!==void 0?Math.min(a,100):100).toString());let o=0;for await(const l of this._getPaginated("/annotation-queues",s))if(yield*l,o++,a!==void 0&&o>=a)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:i,rubricInstructions:a}=e,s={name:n,description:r,id:i||G0(),rubric_instructions:a},o=JSON.stringify(Object.fromEntries(Object.entries(s).filter(([c,f])=>f!==void 0)));return(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Rn(c,"create annotation queue"),c})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${or(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(e,n){const{name:r,description:i,rubricInstructions:a}=n,s=JSON.stringify({name:r,description:i,rubric_instructions:a});await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/annotation-queues/${or(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Rn(o,"update annotation queue",!0),o})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${or(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(n,"delete annotation queue",!0),n})}async addRunsToAnnotationQueue(e,n){const r=JSON.stringify(n.map((i,a)=>or(i,`runIds[${a}]`).toString()));await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/annotation-queues/${or(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Rn(i,"add runs to annotation queue",!0),i})}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${or(e,"queueId")}/run`;return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(a,"get run from annotation queue"),a})).json()}async deleteRunFromAnnotationQueue(e,n){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${or(e,"queueId")}/runs/${or(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${or(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const r=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(i,"get latest commit hash"),i})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,i,a]=zp(e),s=JSON.stringify({like:n});return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/likes/${r}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Rn(l,`${n?"like":"unlike"} prompt`),l})).json()}async _getPromptUrl(e){const[n,r,i]=zp(e);if(await this._currentTenantIsOwner(n)){const a=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${a.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,i=>i.repos))yield*r}async getPrompt(e){const[n,r,i]=zp(e),a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(o==null?void 0:o.status)===404?null:(await Rn(o,"get prompt"),o)}),s=await(a==null?void 0:a.json());return s!=null&&s.repo?s.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,a,s]=zp(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const o={repo_handle:a,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},l=JSON.stringify(o),c=await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Rn(h,"create prompt"),h}),{repo:f}=await c.json();return f}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,a,s]=zp(e),o=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${i}/${a}`):r==null?void 0:r.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(n)),parent_commit:o},c=JSON.stringify(l),h=await(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/commits/${i}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Rn(m,"create commit"),m})).json();return this._getPromptUrl(`${i}/${a}${h.commit_hash?`:${h.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var s;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const o of n){const l=o.id,c={...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split}},f=iu(c,`Serializing body for example with id: ${l}`),h=new Blob([f],{type:"application/json"});if(r.append(l,h),o.inputs){const m=iu(o.inputs,`Serializing inputs for example with id: ${l}`),p=new Blob([m],{type:"application/json"});r.append(`${l}.inputs`,p)}if(o.outputs){const m=iu(o.outputs,`Serializing outputs whle updating example with id: ${l}`),p=new Blob([m],{type:"application/json"});r.append(`${l}.outputs`,p)}if(o.attachments)for(const[m,p]of Object.entries(o.attachments)){let v,y;Array.isArray(p)?[v,y]=p:(v=p.mimeType,y=p.data);const x=new Blob([y],{type:`${v}; length=${y.byteLength}`});r.append(`${l}.attachment.${m}`,x)}if(o.attachments_operations){const m=iu(o.attachments_operations,`Serializing attachments while updating example with id: ${l}`),p=new Blob([m],{type:"application/json"});r.append(`${l}.attachments_operations`,p)}}const i=e??((s=n[0])==null?void 0:s.dataset_id);return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${i}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Rn(o,"update examples"),o})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const a of n){const s=(a.id??G0()).toString(),o={created_at:a.created_at,...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split},...a.source_run_id&&{source_run_id:a.source_run_id},...a.use_source_run_io&&{use_source_run_io:a.use_source_run_io},...a.use_source_run_attachments&&{use_source_run_attachments:a.use_source_run_attachments}},l=iu(o,`Serializing body for uploaded example with id: ${s}`),c=new Blob([l],{type:"application/json"});if(r.append(s,c),a.inputs){const f=iu(a.inputs,`Serializing inputs for uploaded example with id: ${s}`),h=new Blob([f],{type:"application/json"});r.append(`${s}.inputs`,h)}if(a.outputs){const f=iu(a.outputs,`Serializing outputs for uploaded example with id: ${s}`),h=new Blob([f],{type:"application/json"});r.append(`${s}.outputs`,h)}if(a.attachments)for(const[f,h]of Object.entries(a.attachments)){let m,p;Array.isArray(h)?[m,p]=h:(m=h.mimeType,p=h.data);const v=new Blob([p],{type:`${m}; length=${p.byteLength}`});r.append(`${s}.attachment.${f}`,v)}}return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Rn(a,"upload examples"),a})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i]=zp(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const a={};if((n==null?void 0:n.description)!==void 0&&(a.description=n.description),(n==null?void 0:n.readme)!==void 0&&(a.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(a.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(a.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(a.is_archived=n.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const s=JSON.stringify(a);return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/repos/${r}/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Rn(l,"update prompt"),l})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,i]=zp(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(s,"delete prompt"),s})).json()}async pullPromptCommit(e,n){const[r,i,a]=zp(e),o=await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/commits/${r}/${i}/${a}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Rn(l,"pull prompt commit"),l})).json();return{owner:r,repo:i,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(i=>i!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:i}=n,[a,s]=this.parseTokenOrUrl(e,r),o=new PN({apiUrl:a,apiKey:"placeholder"}),l=await o.readSharedDataset(s),c=i||l.name;try{if(await this.hasDataset({datasetId:c})){console.log(`Dataset ${c} already exists in your tenant. Skipping.`);return}}catch{}const f=await o.listSharedExamples(s),h=await this.createDataset(c,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:f.map(m=>m.inputs),outputs:f.flatMap(m=>m.outputs?[m.outputs]:[]),datasetId:h.id})}catch(m){throw console.error(`An error occurred while creating dataset ${c}. You should delete it manually.`),m}}parseTokenOrUrl(e,n,r=2,i="dataset"){try{return or(e),[n,e]}catch{}try{const s=new URL(e).pathname.split("/").filter(o=>o!=="");if(s.length>=r){const o=s[s.length-r];return[n,o]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}async awaitPendingTraceBatches(){var e,n;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:r})=>r),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((n=(e=Qqe())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:n.forceFlush())}}function $q(t){return"dataset_id"in t||"dataset_name"in t}const wZe=t=>!!["TRACING_V2","TRACING"].find(n=>Sl(n)==="true"),pV=Symbol.for("lc:context_variables");function xZe(t){return t.replace(/[-:.]/g,"")}function Tde(t,e,n=1){const r=n.toFixed(0).slice(0,3).padStart(3,"0"),i=`${new Date(t).toISOString().slice(0,-1)}${r}Z`;return{dottedOrder:xZe(i)+e,microsecondPrecisionDatestring:i}}class tA{constructor(e,n,r,i){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=r,this.replicas=i}static fromHeader(e){const n=e.split(",");let r={},i=[],a,s;for(const o of n){const[l,c]=o.split("="),f=decodeURIComponent(c);l==="langsmith-metadata"?r=JSON.parse(f):l==="langsmith-tags"?i=f.split(","):l==="langsmith-project"?a=f:l==="langsmith-replicas"&&(s=JSON.parse(f))}return new tA(r,i,a,s)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class yl{constructor(e){var o;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),SZe(e)){Object.assign(this,{...e});return}const n=yl.getDefaultConfig(),{metadata:r,...i}=e,a=i.client??yl.getSharedClient(),s={...r,...(o=i==null?void 0:i.extra)==null?void 0:o.metadata};if(i.extra={...i.extra,metadata:s},Object.assign(this,{...n,...i,client:a}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=TZe(this.replicas),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const{dottedOrder:l,microsecondPrecisionDatestring:c}=Tde(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+l:this.dotted_order=l,this._serialized_start_time=c}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){return{id:G0(),run_type:"chain",project_name:ude(),child_runs:[],api_url:qf("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:qf("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return yl.sharedClient||(yl.sharedClient=new PN),yl.sharedClient}createChild(e){var l,c,f,h,m,p;const n=this.child_execution_order+1,r=new yl({...e,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});pV in this&&(r[pV]=this[pV]);const i=Symbol.for("lc:child_config"),a=((l=e.extra)==null?void 0:l[i])??this.extra[i];if(NZe(a)){const v={...a},y=EZe(v.callbacks)?(f=(c=v.callbacks).copy)==null?void 0:f.call(c):void 0;y&&(Object.assign(y,{_parentRunId:r.id}),(p=(m=(h=y.handlers)==null?void 0:h.find(Dde))==null?void 0:m.updateFromRunTree)==null||p.call(m,r),v.callbacks=y),r.extra[i]=v}const s=new Set;let o=this;for(;o!=null&&!s.has(o.id);)s.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,n),o=o.parent_run;return this.child_runs.push(r),r}async end(e,n,r=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,n,r=!0){var o,l;const i=e.extra??{};if(((o=i==null?void 0:i.runtime)==null?void 0:o.library)===void 0&&(i.runtime||(i.runtime={}),n))for(const[c,f]of Object.entries(n))i.runtime[c]||(i.runtime[c]=f);let a,s;return r?(s=((l=e.parent_run)==null?void 0:l.id)??e.parent_run_id,a=[]):(a=e.child_runs.map(c=>this._convertToCreate(c,n,r)),s=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:s,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_remapForProject(e,n,r=!0){const i=this._convertToCreate(this,n,r);if(e===this.project_name)return i;const a=h=>mq(`${h}:${e}`,mq.DNS),s=a(i.id),o=i.trace_id?a(i.trace_id):void 0,l=i.parent_run_id?a(i.parent_run_id):void 0;let c;if(i.dotted_order){const h=_Ze(i.dotted_order),m=[];for(let v=0;v<h.length-1;v++){const[y,x]=h[v],S=a(x);m.push(y.toISOString().replace(/[-:]/g,"").replace(".","")+S)}const[p]=h[h.length-1];m.push(p.toISOString().replace(/[-:]/g,"").replace(".","")+s),c=m.join(".")}else c=void 0;return{...i,id:s,trace_id:o,parent_run_id:l,dotted_order:c,session_name:e}}async postRun(e=!0){try{const n=hde();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:i,apiUrl:a,workspaceId:s}of this.replicas){const o=this._remapForProject(r??this.project_name,n,!0);await this.client.createRun(o,{apiKey:i,apiUrl:a,workspaceId:s})}else{const r=this._convertToCreate(this,n,e);await this.client.createRun(r)}if(!e){y5("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(e){var n;if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:i,apiUrl:a,workspaceId:s,updates:o}of this.replicas){const l=this._remapForProject(r??this.project_name),c={id:l.id,outputs:l.outputs,error:l.error,parent_run_id:l.parent_run_id,session_name:l.session_name,reference_example_id:l.reference_example_id,end_time:l.end_time,dotted_order:l.dotted_order,trace_id:l.trace_id,events:l.events,tags:l.tags,extra:l.extra,attachments:this.attachments,...o};e!=null&&e.excludeInputs||(c.inputs=l.inputs),await this.client.updateRun(l.id,c,{apiKey:i,apiUrl:a,workspaceId:s})}else try{const r={end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((n=this.parent_run)==null?void 0:n.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var c,f,h,m;const r=e==null?void 0:e.callbacks;let i,a,s,o=wZe();if(r){const p=((c=r==null?void 0:r.getParentRunId)==null?void 0:c.call(r))??"",v=(f=r==null?void 0:r.handlers)==null?void 0:f.find(y=>(y==null?void 0:y.name)=="langchain_tracer");i=(h=v==null?void 0:v.getRun)==null?void 0:h.call(v,p),a=v==null?void 0:v.projectName,s=v==null?void 0:v.client,o=o||!!v}return i?new yl({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:s,tracingEnabled:o,project_name:a,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(m=i==null?void 0:i.extra)==null?void 0:m.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new yl({...n,client:s,tracingEnabled:o,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var c;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=r["langsmith-trace"];if(!i||typeof i!="string")return;const a=i.trim(),s=a.split(".").map(f=>{const[h,m]=f.split("Z");return{strTime:h,time:Date.parse(h+"Z"),uuid:m}}),o=s[0].uuid,l={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(c=s.at(-1))==null?void 0:c.uuid,trace_id:o,dotted_order:a};if(r.baggage&&typeof r.baggage=="string"){const f=tA.fromHeader(r.baggage);l.metadata=f.metadata,l.tags=f.tags,l.project_name=f.project_name,l.replicas=f.replicas}return new yl(l)}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new tA((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[i,a]of Object.entries(n))e.set(i,a);return n}}Object.defineProperty(yl,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function SZe(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function Dde(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function Lq(t){return Array.isArray(t)&&t.some(e=>Dde(e))}function EZe(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function NZe(t){var e;return t!=null&&typeof t.callbacks=="object"&&(Lq((e=t.callbacks)==null?void 0:e.handlers)||Lq(t.callbacks))}function _Ze(t){return t.split(".").map(n=>{const r=n.slice(0,-36),i=n.slice(-36),a=parseInt(r.slice(0,4)),s=parseInt(r.slice(4,6))-1,o=parseInt(r.slice(6,8)),l=parseInt(r.slice(9,11)),c=parseInt(r.slice(11,13)),f=parseInt(r.slice(13,15)),h=parseInt(r.slice(15,21));return[new Date(a,s,o,l,c,f,h/1e3),i]})}function CZe(){const t=qf("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const n=[];for(const r of e){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}n.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return n}else if(typeof e=="object"&&e!==null){DZe(e);const n=[];for(const[r,i]of Object.entries(e)){const a=r.replace(/\/$/,"");if(typeof i=="string")n.push({apiUrl:a,apiKey:i});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof i}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(sZe(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function TZe(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):CZe()}function DZe(t){if(Object.keys(t).length>0&&Sl("ENDPOINT"))throw new aZe}var gV={};const kZe=()=>typeof window<"u"&&typeof window.document<"u",PZe=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",AZe=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),mB=()=>typeof Deno<"u",RZe=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!mB(),OZe=()=>{let t;return kZe()?t="browser":RZe()?t="node":PZe()?t="webworker":AZe()?t="jsdom":mB()?t="deno":t="other",t};let vV;function jZe(){return vV===void 0&&(vV={library:"langchain-js",runtime:OZe()}),vV}function ro(t){try{return typeof process<"u"?gV==null?void 0:gV[t]:mB()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}class IZe{}function MZe(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}class b_ extends IZe{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Zce(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:ro("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Xy.prototype.toJSON.call(this)}toJSONNotImplemented(){return Xy.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends b_{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:am()}),Object.assign(this,e)}}return new n}}const VZe=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},$Ze=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function x5(t,e){if(t)return new yl({...t,start_time:t._serialized_start_time??t.start_time,parent_run:x5(e),child_runs:t.child_runs.map(n=>x5(n)).filter(n=>n!==void 0),extra:{...t.extra,runtime:jZe()},tracingEnabled:!1})}function yV(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function PS(t){return typeof t._addRunToRunMap=="function"}class w_ extends b_{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"runTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!1})}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?$Ze(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const{dottedOrder:n,microsecondPrecisionDatestring:r}=Tde(new Date(e.start_time).getTime(),e.id,e.execution_order),i={...e},a=this.getRunById(i.parent_run_id);if(i.parent_run_id!==void 0?a&&(this._addChildRun(a,i),a.child_execution_order=Math.max(a.child_execution_order,i.child_execution_order),i.trace_id=a.trace_id,a.dotted_order!==void 0&&(i.dotted_order=[a.dotted_order,n].join("."),i._serialized_start_time=r)):(i.trace_id=i.id,i.dotted_order=n,i._serialized_start_time=r),this.usesRunTreeMap){const s=x5(i,a);s!==void 0&&this.runTreeMap.set(i.id,s)}else this.runMap.set(i.id,i);return i}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),await((r=this.onRunUpdate)==null?void 0:r.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const n=e!==void 0&&this.getRunById(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,i,a,s,o,l){const c=this._getExecutionOrder(i),f=Date.now(),h=o?{...a,metadata:o}:a,m={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:{prompts:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:h??{},tags:s||[]};return this._addRunToRunMap(m)}async handleLLMStart(e,n,r,i,a,s,o,l){var f,h;const c=this.getRunById(r)??this._createRunForLLMStart(e,n,r,i,a,s,o,l);return await((f=this.onRunCreate)==null?void 0:f.call(this,c)),await((h=this.onLLMStart)==null?void 0:h.call(this,c)),c}_createRunForChatModelStart(e,n,r,i,a,s,o,l){const c=this._getExecutionOrder(i),f=Date.now(),h=o?{...a,metadata:o}:a,m={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:{messages:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:h??{},tags:s||[]};return this._addRunToRunMap(m)}async handleChatModelStart(e,n,r,i,a,s,o,l){var f,h;const c=this.getRunById(r)??this._createRunForChatModelStart(e,n,r,i,a,s,o,l);return await((f=this.onRunCreate)==null?void 0:f.call(this,c)),await((h=this.onLLMStart)==null?void 0:h.call(this,c)),c}async handleLLMEnd(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.outputs=e,s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),s.extra={...s.extra,...a},await((o=this.onLLMEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleLLMError(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),s.extra={...s.extra,...a},await((o=this.onLLMError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForChainStart(e,n,r,i,a,s,o,l){const c=this._getExecutionOrder(i),f=Date.now(),h={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:n,execution_order:c,child_execution_order:c,run_type:o??"chain",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(h)}async handleChainStart(e,n,r,i,a,s,o,l){var f,h;const c=this.getRunById(r)??this._createRunForChainStart(e,n,r,i,a,s,o,l);return await((f=this.onRunCreate)==null?void 0:f.call(this,c)),await((h=this.onChainStart)==null?void 0:h.call(this,c)),c}async handleChainEnd(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.outputs=yV(e,"output"),s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=yV(a.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleChainError(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=yV(a.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForToolStart(e,n,r,i,a,s,o){const l=this._getExecutionOrder(i),c=Date.now(),f={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:n},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(f)}async handleToolStart(e,n,r,i,a,s,o){var c,f;const l=this.getRunById(r)??this._createRunForToolStart(e,n,r,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((f=this.onToolStart)==null?void 0:f.call(this,l)),l}async handleToolEnd(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var a;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((a=this.onAgentAction)==null?void 0:a.call(this,r))}async handleAgentEnd(e,n){var i;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}_createRunForRetrieverStart(e,n,r,i,a,s,o){const l=this._getExecutionOrder(i),c=Date.now(),f={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:n},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(f)}async handleRetrieverStart(e,n,r,i,a,s,o){var c,f;const l=this.getRunById(r)??this._createRunForRetrieverStart(e,n,r,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((f=this.onRetrieverStart)==null?void 0:f.call(this,l)),l}async handleRetrieverEnd(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var i;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,n,r,i,a,s){var l;const o=this.getRunById(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:s==null?void 0:s.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e,{chunk:s==null?void 0:s.chunk})),o}}var pB={exports:{}};pB.exports;(function(t){const n=(a=0)=>s=>`\x1B[${38+a};5;${s}m`,r=(a=0)=>(s,o,l)=>`\x1B[${38+a};2;${s};${o};${l}m`;function i(){const a=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.gray=s.color.blackBright,s.bgColor.bgGray=s.bgColor.bgBlackBright,s.color.grey=s.color.blackBright,s.bgColor.bgGrey=s.bgColor.bgBlackBright;for(const[o,l]of Object.entries(s)){for(const[c,f]of Object.entries(l))s[c]={open:`\x1B[${f[0]}m`,close:`\x1B[${f[1]}m`},l[c]=s[c],a.set(f[0],f[1]);Object.defineProperty(s,o,{value:l,enumerable:!1})}return Object.defineProperty(s,"codes",{value:a,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi256=n(),s.color.ansi16m=r(),s.bgColor.ansi256=n(10),s.bgColor.ansi16m=r(10),Object.defineProperties(s,{rgbToAnsi256:{value:(o,l,c)=>o===l&&l===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:c}=l.groups;c.length===3&&(c=c.split("").map(h=>h+h).join(""));const f=Number.parseInt(c,16);return[f>>16&255,f>>8&255,f&255]},enumerable:!1},hexToAnsi256:{value:o=>s.rgbToAnsi256(...s.hexToRgb(o)),enumerable:!1}}),s}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(pB);var LZe=pB.exports;const kde=gc(LZe);function jo(t,e){return`${t.open}${e}${t.close}`}function ec(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function Fq(t){return typeof t=="string"?t.trim():t==null?t:ec(t,t.toString())}function Hp(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:hl}=kde;class Bq extends w_{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)n.push(i),r=i;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((i,a,s)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return a===s.length-1?jo(kde.bold,o):o}).join(" > ");return jo(hl.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.green,"[chain/start]")} [${n}] Entering Chain run with input: ${ec(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.cyan,"[chain/end]")} [${n}] [${Hp(e)}] Exiting Chain run with output: ${ec(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.red,"[chain/error]")} [${n}] [${Hp(e)}] Chain run errored with error: ${ec(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${jo(hl.green,"[llm/start]")} [${n}] Entering LLM run with input: ${ec(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.cyan,"[llm/end]")} [${n}] [${Hp(e)}] Exiting LLM run with output: ${ec(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.red,"[llm/error]")} [${n}] [${Hp(e)}] LLM run errored with error: ${ec(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.green,"[tool/start]")} [${n}] Entering Tool run with input: "${Fq(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${jo(hl.cyan,"[tool/end]")} [${n}] [${Hp(e)}] Exiting Tool run with output: "${Fq((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.red,"[tool/error]")} [${n}] [${Hp(e)}] Tool run errored with error: ${ec(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${ec(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.cyan,"[retriever/end]")} [${n}] [${Hp(e)}] Exiting Retriever run with output: ${ec(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${jo(hl.red,"[retriever/error]")} [${n}] [${Hp(e)}] Retriever run errored with error: ${ec(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${jo(hl.blue,"[agent/action]")} [${r}] Agent selected action: ${ec(n.actions[n.actions.length-1],"[action]")}`)}}let bV;const FZe=()=>{if(bV===void 0){const t=ro("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};bV=new PN(t)}return bV};class VE extends w_{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!0});const{exampleId:n,projectName:r,client:i,replicas:a}=e;this.projectName=r??ude(),this.replicas=a,this.exampleId=n,this.client=i??FZe();const s=VE.getTraceableRunTree();s&&this.updateFromRunTree(s)}async persistRun(e){}async onRunCreate(e){const n=this.getRunTreeWithTracingConfig(e.id);await(n==null?void 0:n.postRun())}async onRunUpdate(e){const n=this.getRunTreeWithTracingConfig(e.id);await(n==null?void 0:n.patchRun())}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){this.runTreeMap.set(e.id,e);let n=e;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const i=[n];for(;i.length>0;){const a=i.shift();!a||r.has(a.id)||(r.add(a.id),this.runTreeMap.set(a.id,a),a.child_runs&&i.push(...a.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){const n=this.runTreeMap.get(e);if(n)return new yl({...n,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return zJe(!0)}catch{return}}}const Pde=Symbol.for("ls:tracing_async_local_storage"),jk=Symbol.for("lc:context_variables"),BZe=t=>{globalThis[Pde]=t},AN=()=>globalThis[Pde];let $E;function UZe(){const t="default"in bm?bm.default:bm;return new t({autoStart:!0,concurrency:1})}function WZe(){return typeof $E>"u"&&($E=UZe()),$E}async function Ja(t,e){if(e===!0){const n=AN();n!==void 0?await n.run(void 0,async()=>t()):await t()}else $E=WZe(),$E.add(async()=>{const n=AN();n!==void 0?await n.run(void 0,async()=>t()):await t()})}const zZe=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>ro(n)==="true");function Ade(t){var r;const e=AN();if(e===void 0)return;const n=e.getStore();return(r=n==null?void 0:n[jk])==null?void 0:r[t]}const HZe=Symbol("lc:configure_hooks"),GZe=()=>Ade(HZe)||[];class KZe{setHandler(e){return this.setHandlers([e])}}class HR{constructor(e,n,r,i,a,s,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(n=>Ja(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleCustomEvent(e,n,r,i,a){await Promise.all(this.handlers.map(s=>Ja(async()=>{var o;try{await((o=s.handleCustomEvent)==null?void 0:o.call(s,e,n,this.runId,this.tags,this.metadata))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleCustomEvent: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}}class YZe extends HR{getChild(e){const n=new Cl(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>Ja(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw i}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>Ja(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${i}`),n.raiseError)throw e}},n.awaitHandlers)))}}class Uq extends HR{async handleLLMNewToken(e,n,r,i,a,s){await Promise.all(this.handlers.map(o=>Ja(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMNewToken)==null?void 0:l.call(o,e,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleLLMError(e,n,r,i,a){await Promise.all(this.handlers.map(s=>Ja(async()=>{var o;if(!s.ignoreLLM)try{await((o=s.handleLLMError)==null?void 0:o.call(s,e,this.runId,this._parentRunId,this.tags,a))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleLLMError: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}async handleLLMEnd(e,n,r,i,a){await Promise.all(this.handlers.map(s=>Ja(async()=>{var o;if(!s.ignoreLLM)try{await((o=s.handleLLMEnd)==null?void 0:o.call(s,e,this.runId,this._parentRunId,this.tags,a))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleLLMEnd: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}}class JZe extends HR{getChild(e){const n=new Cl(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,i,a){await Promise.all(this.handlers.map(s=>Ja(async()=>{var o;if(!s.ignoreChain)try{await((o=s.handleChainError)==null?void 0:o.call(s,e,this.runId,this._parentRunId,this.tags,a))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleChainError: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}async handleChainEnd(e,n,r,i,a){await Promise.all(this.handlers.map(s=>Ja(async()=>{var o;if(!s.ignoreChain)try{await((o=s.handleChainEnd)==null?void 0:o.call(s,e,this.runId,this._parentRunId,this.tags,a))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleChainEnd: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>Ja(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>Ja(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class qZe extends HR{getChild(e){const n=new Cl(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>Ja(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>Ja(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class Cl extends KZe{constructor(e,n){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,n,r=void 0,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0){return Promise.all(n.map(async(c,f)=>{const h=f===0&&r?r:am();return await Promise.all(this.handlers.map(m=>{if(!m.ignoreLLM)return PS(m)&&m._createRunForLLMStart(e,[c],h,this._parentRunId,a,this.tags,this.metadata,l),Ja(async()=>{var p;try{await((p=m.handleLLMStart)==null?void 0:p.call(m,e,[c],h,this._parentRunId,a,this.tags,this.metadata,l))}catch(v){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleLLMStart: ${v}`),m.raiseError)throw v}},m.awaitHandlers)})),new Uq(h,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0){return Promise.all(n.map(async(c,f)=>{const h=f===0&&r?r:am();return await Promise.all(this.handlers.map(m=>{if(!m.ignoreLLM)return PS(m)&&m._createRunForChatModelStart(e,[c],h,this._parentRunId,a,this.tags,this.metadata,l),Ja(async()=>{var p,v;try{if(m.handleChatModelStart)await((p=m.handleChatModelStart)==null?void 0:p.call(m,e,[c],h,this._parentRunId,a,this.tags,this.metadata,l));else if(m.handleLLMStart){const y=nde(c);await((v=m.handleLLMStart)==null?void 0:v.call(m,e,[y],h,this._parentRunId,a,this.tags,this.metadata,l))}}catch(y){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleLLMStart: ${y}`),m.raiseError)throw y}},m.awaitHandlers)})),new Uq(h,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=am(),i=void 0,a=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreChain)return PS(l)&&l._createRunForChainStart(e,n,r,this._parentRunId,this.tags,this.metadata,i,o),Ja(async()=>{var c;try{await((c=l.handleChainStart)==null?void 0:c.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,i,o))}catch(f){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainStart: ${f}`),l.raiseError)throw f}},l.awaitHandlers)})),new JZe(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=am(),i=void 0,a=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreAgent)return PS(l)&&l._createRunForToolStart(e,n,r,this._parentRunId,this.tags,this.metadata,o),Ja(async()=>{var c;try{await((c=l.handleToolStart)==null?void 0:c.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,o))}catch(f){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleToolStart: ${f}`),l.raiseError)throw f}},l.awaitHandlers)})),new qZe(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=am(),i=void 0,a=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreRetriever)return PS(l)&&l._createRunForRetrieverStart(e,n,r,this._parentRunId,this.tags,this.metadata,o),Ja(async()=>{var c;try{await((c=l.handleRetrieverStart)==null?void 0:c.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,o))}catch(f){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleRetrieverStart: ${f}`),l.raiseError)throw f}},l.awaitHandlers)})),new YZe(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,n,r,i,a){await Promise.all(this.handlers.map(s=>Ja(async()=>{var o;if(!s.ignoreCustomEvent)try{await((o=s.handleCustomEvent)==null?void 0:o.call(s,e,n,r,this.tags,this.metadata))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleCustomEvent: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new Cl(this._parentRunId);for(const i of this.handlers){const a=this.inheritableHandlers.includes(i);r.addHandler(i,a)}for(const i of this.tags){const a=this.inheritableTags.includes(i);r.addTags([i],a)}for(const i of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(i);r.addMetadata({[i]:this.metadata[i]},a)}for(const i of e)r.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===i.name)||r.addHandler(i,n);return r}static fromHandlers(e){class n extends b_{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:am()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static configure(e,n,r,i,a,s,o){return this._configureSync(e,n,r,i,a,s,o)}static _configureSync(e,n,r,i,a,s,o){var m;let l;(e||n)&&(Array.isArray(e)||!e?(l=new Cl,l.setHandlers((e==null?void 0:e.map(nA))??[],!0)):l=e,l=l.copy(Array.isArray(n)?n.map(nA):n==null?void 0:n.handlers,!1));const c=ro("LANGCHAIN_VERBOSE")==="true"||(o==null?void 0:o.verbose),f=((m=VE.getTraceableRunTree())==null?void 0:m.tracingEnabled)||zZe(),h=f||(ro("LANGCHAIN_TRACING")??!1);if(c||h){if(l||(l=new Cl),c&&!l.handlers.some(p=>p.name===Bq.prototype.name)){const p=new Bq;l.addHandler(p,!0)}if(h&&!l.handlers.some(p=>p.name==="langchain_tracer")&&f){const p=new VE;l.addHandler(p,!0)}if(f){const p=VE.getTraceableRunTree();if(p&&l._parentRunId===void 0){l._parentRunId=p.id;const v=l.handlers.find(y=>y.name==="langchain_tracer");v==null||v.updateFromRunTree(p)}}}for(const{contextVar:p,inheritable:v=!0,handlerClass:y,envVar:x}of GZe()){const S=x&&ro(x)==="true"&&y;let _;const N=p!==void 0?Ade(p):void 0;N&&VZe(N)?_=N:S&&(_=new y({})),_!==void 0&&(l||(l=new Cl),l.handlers.some(k=>k.name===_.name)||l.addHandler(_,v))}return(r||i)&&l&&(l.addTags(r??[]),l.addTags(i??[],!1)),(a||s)&&l&&(l.addMetadata(a??{}),l.addMetadata(s??{},!1)),l}}function nA(t){return"name"in t?t:b_.fromMethods(t)}class XZe{getStore(){}run(e,n){return n()}enterWith(e){}}const ZZe=new XZe,Wq=Symbol.for("lc:child_config");class QZe{getInstance(){return AN()??ZZe}getRunnableConfig(){var n,r;return(r=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:r[Wq]}runWithConfig(e,n,r){var f;const i=Cl._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),a=this.getInstance(),s=a.getStore(),o=i==null?void 0:i.getParentRunId(),l=(f=i==null?void 0:i.handlers)==null?void 0:f.find(h=>(h==null?void 0:h.name)==="langchain_tracer");let c;return l&&o?c=l.getRunTreeWithTracingConfig(o):r||(c=new yl({name:"<runnable_lambda>",tracingEnabled:!1})),c&&(c.extra={...c.extra,[Wq]:e}),s!==void 0&&s[jk]!==void 0&&(c===void 0&&(c={}),c[jk]=s[jk]),a.run(c,n)}initializeGlobalInstance(e){AN()===void 0&&BZe(e)}}const Rg=new QZe,wV=25;async function Nd(t){return Cl._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function zq(...t){const e={};for(const n of t.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const i=e[r]??[];e[r]=[...new Set(i.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const i=e.callbacks,a=n.callbacks;if(Array.isArray(a))if(!i)e.callbacks=a;else if(Array.isArray(i))e.callbacks=i.concat(a);else{const s=i.copy();for(const o of a)s.addHandler(nA(o),!0);e.callbacks=s}else if(a)if(!i)e.callbacks=a;else if(Array.isArray(i)){const s=a.copy();for(const o of i)s.addHandler(nA(o),!0);e.callbacks=s}else e.callbacks=new Cl(a._parentRunId,{handlers:i.handlers.concat(a.handlers),inheritableHandlers:i.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(a.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(a.inheritableTags))),metadata:{...i.metadata,...a.metadata}})}else{const i=r;e[i]=n[i]??e[i]}return e}const eQe=new Set(["string","number","boolean"]);function ii(t){var r;const e=Rg.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:a,...s}=e;n=Object.entries(s).reduce((o,[l,c])=>(c!==void 0&&(o[l]=c),o),n)}if(t&&(n=Object.entries(t).reduce((i,[a,s])=>(s!==void 0&&(i[a]=s),i),n)),n!=null&&n.configurable)for(const i of Object.keys(n.configurable))eQe.has(typeof n.configurable[i])&&!((r=n.metadata)!=null&&r[i])&&(n.metadata||(n.metadata={}),n.metadata[i]=n.configurable[i]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const i=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,i])):n.signal=i,delete n.timeout}return n}function lo(t={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:i,configurable:a,runId:s}={}){const o=ii(t);return e!==void 0&&(delete o.runName,o.callbacks=e),r!==void 0&&(o.recursionLimit=r),n!==void 0&&(o.maxConcurrency=n),i!==void 0&&(o.runName=i),a!==void 0&&(o.configurable={...o.configurable,...a}),s!==void 0&&delete o.runId,o}function Gw(t){return t?{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal}:void 0}async function Og(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,i)=>{n=()=>{i(new Error("Aborted"))},e.addEventListener("abort",n),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",n))}class wu extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const n=e.getReader();return new wu({start(r){return i();function i(){return n.read().then(({done:a,value:s})=>{if(a){r.close();return}return r.enqueue(s),i()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new wu({async pull(n){const{value:r,done:i}=await e.next();i&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function Rde(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(i){for(;;)if(i.length===0){const a=await t.next();for(const s of n)s.push(a)}else{if(i[0].done)return;yield i.shift().value}})}function GR(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[r,i]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=GR(n[r],i):n[r]=i;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}class bx{constructor(e){var n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((n=this.config)==null?void 0:n.signal),this.setup=new Promise((r,i)=>{Rg.runWithConfig(Gw(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,i):this.firstResult.then(a=>r(void 0),i)},!0)})}async next(...e){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?Rg.runWithConfig(Gw(this.config),this.signal?async()=>Og(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function tQe(t,e,n,r,...i){const a=new bx({generator:e,startSetup:n,signal:r}),s=await a.setup;return{output:t(a,s,...i),setup:s}}class ng{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const n=this.ops.concat(e.ops),r=ZP({},n);return new RN({ops:n,state:r[r.length-1].newDocument})}}class RN extends ng{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=ZP(this.state,e.ops);return new RN({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const n=ZP({},e.ops);return new RN({ops:e.ops,state:n[n.length-1].newDocument})}}const nQe=t=>t.name==="log_stream_tracer";async function Hq(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function Gq(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function rQe(t){return t!==void 0&&t.message!==void 0}class Kq extends w_{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=wu.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new ng({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var i;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new ng({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await Hq(e,this._schemaFormat)),await this.writer.write(new ng({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await Hq(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await Gq(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const i=new ng({ops:r});await this.writer.write(i)}finally{if(e.id===this.rootId){const n=new ng({ops:[{op:"replace",path:"/final_output",value:await Gq(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const a=e.inputs.messages!==void 0;let s;a?rQe(r==null?void 0:r.chunk)?s=r==null?void 0:r.chunk:s=new Ya({id:`run-${e.id}`,content:n}):s=n;const o=new ng({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${i}/streamed_output/-`,value:s}]});await this.writer.write(o)}}const Yq="__run";class Kw{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Kw({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class jg extends Kw{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new jg({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function ED({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const iQe=t=>t.name==="event_stream_tracer";class aQe extends w_{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=wu.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield r.value;return}function a(o,l){return o==="llm"&&typeof l=="string"?new Kw({text:l}):l}let s=this.tappedPromises.get(e);if(s===void 0){let o;s=new Promise(l=>{o=l}),this.tappedPromises.set(e,s);try{const l={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...l,data:{chunk:a(i.runType,r.value)}},i),yield r.value;for await(const c of n)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...l,data:{chunk:a(i.runType,c)}},i),yield c}finally{o()}}else{yield r.value;for await(const o of n)yield o}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var s,o;const n=ED(e),r=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,i);const a=`on_${r}_start`;await this.send({event:a,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onLLMNewToken(e,n,r){const i=this.runInfoMap.get(e.id);let a,s;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")s="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?a=new Ya({content:n,id:`run-${e.id}`}):a=r.chunk.message;else if(i.runType==="llm")s="on_llm_stream",(r==null?void 0:r.chunk)===void 0?a=new Kw({text:n}):a=r.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:s,data:{chunk:a},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var s,o,l;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(s=e.outputs)==null?void 0:s.generations;let a;if(n.runType==="chat_model"){for(const c of i??[]){if(a!==void 0)break;a=(o=c[0])==null?void 0:o.message}r="on_chat_model_end"}else if(n.runType==="llm")a={generations:i==null?void 0:i.map(c=>c.map(f=>({text:f.text,generationInfo:f.generationInfo}))),llmOutput:((l=e.outputs)==null?void 0:l.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:a,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var s,o;const n=ED(e),r=e.run_type??"chain",i={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:e.run_type};let a={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(a={},i.inputs={}):e.inputs.input!==void 0?(a.input=e.inputs.input,i.inputs=e.inputs.input):(a.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${r}_start`,data:a,name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onChainEnd(e){var o;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,i=e.inputs??n.inputs??{},s={output:((o=e.outputs)==null?void 0:o.output)??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(s.input=i.input,n.inputs=i.input),await this.sendEndEvent({event:r,data:s,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var i,a;const n=ED(e),r={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{}},r)}async onToolEnd(e){var i;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var a,s;const n=ED(e),i={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((s=e.extra)==null?void 0:s.metadata)??{}},i)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const i=this.runInfoMap.get(r);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:i.tags,metadata:i.metadata,data:n},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const sQe=[400,401,402,403,404,405,406,407,409],oQe=t=>{var n,r;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((n=t==null?void 0:t.response)==null?void 0:n.status)??(t==null?void 0:t.status);if(e&&sQe.includes(+e))throw t;if(((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota"){const i=new Error(t==null?void 0:t.message);throw i.name="InsufficientQuotaError",i}};class gB{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??oQe;const n="default"in bm?bm.default:bm;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>XP(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,a)=>{var s;(s=e.signal)==null||s.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}class Ode extends w_{constructor({config:e,onStart:n,onEnd:r,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function vB(t){return t?t.lc_runnable:!1}class lQe{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,n){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const i=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(n)),this.includeTags!==void 0&&(r=r||i.some(a=>{var s;return(s=this.includeTags)==null?void 0:s.includes(a)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(r=r&&i.every(a=>{var s;return!((s=this.excludeTags)!=null&&s.includes(a))})),r}}function xV(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const uQe=["*","_","`"];function cQe(t){let e="";for(const[n,r]of Object.entries(t))e+=`	classDef ${n} ${r};
`;return e}function dQe(t,e,n){const{firstNode:r,lastNode:i,nodeColors:a,withStyles:s=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=n??{};let c=s?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(s){const p="default",v={[p]:"{0}({1})"};r!==void 0&&(v[r]="{0}([{1}]):::first"),i!==void 0&&(v[i]="{0}([{1}]):::last");for(const[y,x]of Object.entries(t)){const S=x.name.split(":").pop()??"";let N=uQe.some(P=>S.startsWith(P)&&S.endsWith(P))?`<p>${S}</p>`:S;Object.keys(x.metadata??{}).length&&(N+=`<hr/><small><em>${Object.entries(x.metadata??{}).map(([P,O])=>`${P} = ${O}`).join(`
`)}</em></small>`);const k=(v[y]??v[p]).replace("{0}",xV(y)).replace("{1}",N);c+=`	${k}
`}}const f={};for(const p of e){const v=p.source.split(":"),y=p.target.split(":"),x=v.filter((S,_)=>S===y[_]).join(":");f[x]||(f[x]=[]),f[x].push(p)}const h=new Set;function m(p,v){const y=p.length===1&&p[0].source===p[0].target;if(v&&!y){const x=v.split(":").pop();if(h.has(x))throw new Error(`Found duplicate subgraph '${x}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);h.add(x),c+=`	subgraph ${x}
`}for(const x of p){const{source:S,target:_,data:N,conditional:k}=x;let P="";if(N!==void 0){let O=N;const A=O.split(" ");A.length>l&&(O=Array.from({length:Math.ceil(A.length/l)},(T,L)=>A.slice(L*l,(L+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),P=k?` -. &nbsp;${O}&nbsp; .-> `:` -- &nbsp;${O}&nbsp; --> `}else P=k?" -.-> ":" --> ";c+=`	${xV(S)}${P}${xV(_)};
`}for(const x in f)x.startsWith(`${v}:`)&&x!==v&&m(f[x],x);v&&!y&&(c+=`	end
`)}m(f[""]??[],"");for(const p in f)!p.includes(":")&&p!==""&&m(f[p],p);return s&&(c+=cQe(a??{})),c}async function fQe(t,e){return hQe(t,{...e,imageType:"png"})}async function hQe(t,e){let n=(e==null?void 0:e.backgroundColor)??"white";const r=e==null?void 0:e.imageType,i=btoa(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const a=`https://mermaid.ink/img/${i}?bgColor=${n}&type=${r}`,s=await fetch(a);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}function KR(t,e,n){function r(o,l){var c;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(c=o._zod).traits??(c.traits=new Set),o._zod.traits.add(t),e(o,l);for(const f in s.prototype)f in o||Object.defineProperty(o,f,{value:s.prototype[f].bind(o)});o._zod.constr=s,o._zod.def=l}const i=(n==null?void 0:n.Parent)??Object;class a extends i{}Object.defineProperty(a,"name",{value:t});function s(o){var l;const c=n!=null&&n.Parent?new a:this;r(c,o),(l=c._zod).deferred??(l.deferred=[]);for(const f of c._zod.deferred)f();return c}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:o=>{var l,c;return n!=null&&n.Parent&&o instanceof n.Parent?!0:(c=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:c.has(t)}}),Object.defineProperty(s,"name",{value:t}),s}class rA extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const mQe={};function YR(t){return mQe}function pQe(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function gQe(t,e){return typeof e=="bigint"?e.toString():e}const jde=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function iA(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function vQe(t){return{}}function SV(t,e=0){var n;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function ND(t){return typeof t=="string"?t:t==null?void 0:t.message}function JR(t,e,n){var i,a,s,o,l,c;const r={...t,path:t.path??[]};if(!t.message){const f=ND((s=(a=(i=t.inst)==null?void 0:i._zod.def)==null?void 0:a.error)==null?void 0:s.call(a,t))??ND((o=e==null?void 0:e.error)==null?void 0:o.call(e,t))??ND((l=n.customError)==null?void 0:l.call(n,t))??ND((c=n.localeError)==null?void 0:c.call(n,t))??"Invalid input";r.message=f}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const Ide=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,gQe,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},yQe=KR("$ZodError",Ide),qR=KR("$ZodError",Ide,{Parent:Error}),bQe=t=>(e,n,r,i)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:n,issues:[]},a);if(s instanceof Promise)throw new rA;if(s.issues.length){const o=new((i==null?void 0:i.Err)??t)(s.issues.map(l=>JR(l,a,YR())));throw jde(o,i==null?void 0:i.callee),o}return s.value},wQe=bQe(qR),xQe=t=>async(e,n,r,i)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:n,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){const o=new((i==null?void 0:i.Err)??t)(s.issues.map(l=>JR(l,a,YR())));throw jde(o,i==null?void 0:i.callee),o}return s.value},SQe=xQe(qR),EQe=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new rA;return a.issues.length?{success:!1,error:new(t??yQe)(a.issues.map(s=>JR(s,i,YR())))}:{success:!0,data:a.value}},NQe=EQe(qR),_Qe=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(s=>JR(s,i,YR())))}:{success:!0,data:a.value}},CQe=_Qe(qR),TQe={major:4,minor:0,patch:0},DQe=KR("$ZodType",(t,e)=>{var i;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=TQe;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const s of a._zod.onattach)s(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(i=t._zod.deferred)==null||i.push(()=>{t._zod.run=t._zod.parse});else{const a=(s,o,l)=>{let c=SV(s),f;for(const h of o){if(h._zod.def.when){if(!h._zod.def.when(s))continue}else if(c)continue;const m=s.issues.length,p=h._zod.check(s);if(p instanceof Promise&&(l==null?void 0:l.async)===!1)throw new rA;if(f||p instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await p,s.issues.length!==m&&(c||(c=SV(s,m)))});else{if(s.issues.length===m)continue;c||(c=SV(s,m))}}return f?f.then(()=>s):s};t._zod.run=(s,o)=>{const l=t._zod.parse(s,o);if(l instanceof Promise){if(o.async===!1)throw new rA;return l.then(c=>a(c,r,o))}return a(l,r,o)}}t["~standard"]={validate:a=>{var s;try{const o=NQe(t,a);return o.success?{value:o.data}:{issues:(s=o.error)==null?void 0:s.issues}}catch{return CQe(t,a).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),kQe=KR("$ZodNever",(t,e)=>{DQe.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});class Mde{constructor(){this._map=new Map,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function PQe(){return new Mde}const cg=PQe();function AQe(t,e){return new t({type:"never",...vQe()})}class Jq{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??cg,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,n={path:[],schemaPath:[]}){var h,m,p;var r;const i=e._zod.def,a={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(e);if(s)return s.count++,n.schemaPath.includes(e)&&(s.cycle=n.path),s.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(e,o);const l=(m=(h=e._zod).toJSONSchema)==null?void 0:m.call(h);if(l)o.schema=l;else{const v={...n,schemaPath:[...n.schemaPath,e],path:n.path},y=e._zod.parent;if(y)o.ref=y,this.process(y,v),this.seen.get(y).isParent=!0;else{const x=o.schema;switch(i.type){case"string":{const S=x;S.type="string";const{minimum:_,maximum:N,format:k,patterns:P,contentEncoding:O}=e._zod.bag;if(typeof _=="number"&&(S.minLength=_),typeof N=="number"&&(S.maxLength=N),k&&(S.format=a[k]??k,S.format===""&&delete S.format),O&&(S.contentEncoding=O),P&&P.size>0){const A=[...P];A.length===1?S.pattern=A[0].source:A.length>1&&(o.schema.allOf=[...A.map(T=>({...this.target==="draft-7"?{type:"string"}:{},pattern:T.source}))])}break}case"number":{const S=x,{minimum:_,maximum:N,format:k,multipleOf:P,exclusiveMaximum:O,exclusiveMinimum:A}=e._zod.bag;typeof k=="string"&&k.includes("int")?S.type="integer":S.type="number",typeof A=="number"&&(S.exclusiveMinimum=A),typeof _=="number"&&(S.minimum=_,typeof A=="number"&&(A>=_?delete S.minimum:delete S.exclusiveMinimum)),typeof O=="number"&&(S.exclusiveMaximum=O),typeof N=="number"&&(S.maximum=N,typeof O=="number"&&(O<=N?delete S.maximum:delete S.exclusiveMaximum)),typeof P=="number"&&(S.multipleOf=P);break}case"boolean":{const S=x;S.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{x.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{x.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const S=x,{minimum:_,maximum:N}=e._zod.bag;typeof _=="number"&&(S.minItems=_),typeof N=="number"&&(S.maxItems=N),S.type="array",S.items=this.process(i.element,{...v,path:[...v.path,"items"]});break}case"object":{const S=x;S.type="object",S.properties={};const _=i.shape;for(const P in _)S.properties[P]=this.process(_[P],{...v,path:[...v.path,"properties",P]});const N=new Set(Object.keys(_)),k=new Set([...N].filter(P=>{const O=i.shape[P]._zod;return this.io==="input"?O.optin===void 0:O.optout===void 0}));k.size>0&&(S.required=Array.from(k)),((p=i.catchall)==null?void 0:p._zod.def.type)==="never"?S.additionalProperties=!1:i.catchall?i.catchall&&(S.additionalProperties=this.process(i.catchall,{...v,path:[...v.path,"additionalProperties"]})):this.io==="output"&&(S.additionalProperties=!1);break}case"union":{const S=x;S.anyOf=i.options.map((_,N)=>this.process(_,{...v,path:[...v.path,"anyOf",N]}));break}case"intersection":{const S=x,_=this.process(i.left,{...v,path:[...v.path,"allOf",0]}),N=this.process(i.right,{...v,path:[...v.path,"allOf",1]}),k=O=>"allOf"in O&&Object.keys(O).length===1,P=[...k(_)?_.allOf:[_],...k(N)?N.allOf:[N]];S.allOf=P;break}case"tuple":{const S=x;S.type="array";const _=i.items.map((P,O)=>this.process(P,{...v,path:[...v.path,"prefixItems",O]}));if(this.target==="draft-2020-12"?S.prefixItems=_:S.items=_,i.rest){const P=this.process(i.rest,{...v,path:[...v.path,"items"]});this.target==="draft-2020-12"?S.items=P:S.additionalItems=P}i.rest&&(S.items=this.process(i.rest,{...v,path:[...v.path,"items"]}));const{minimum:N,maximum:k}=e._zod.bag;typeof N=="number"&&(S.minItems=N),typeof k=="number"&&(S.maxItems=k);break}case"record":{const S=x;S.type="object",S.propertyNames=this.process(i.keyType,{...v,path:[...v.path,"propertyNames"]}),S.additionalProperties=this.process(i.valueType,{...v,path:[...v.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const S=x,_=pQe(i.entries);_.every(N=>typeof N=="number")&&(S.type="number"),_.every(N=>typeof N=="string")&&(S.type="string"),S.enum=_;break}case"literal":{const S=x,_=[];for(const N of i.values)if(N===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof N=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");_.push(Number(N))}else _.push(N);if(_.length!==0)if(_.length===1){const N=_[0];S.type=N===null?"null":typeof N,S.const=N}else _.every(N=>typeof N=="number")&&(S.type="number"),_.every(N=>typeof N=="string")&&(S.type="string"),_.every(N=>typeof N=="boolean")&&(S.type="string"),_.every(N=>N===null)&&(S.type="null"),S.enum=_;break}case"file":{const S=x,_={type:"string",format:"binary",contentEncoding:"binary"},{minimum:N,maximum:k,mime:P}=e._zod.bag;N!==void 0&&(_.minLength=N),k!==void 0&&(_.maxLength=k),P?P.length===1?(_.contentMediaType=P[0],Object.assign(S,_)):S.anyOf=P.map(O=>({..._,contentMediaType:O})):Object.assign(S,_);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const S=this.process(i.innerType,v);x.anyOf=[S,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,v),o.ref=i.innerType;break}case"success":{const S=x;S.type="boolean";break}case"default":{this.process(i.innerType,v),o.ref=i.innerType,x.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,v),o.ref=i.innerType,this.io==="input"&&(x._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,v),o.ref=i.innerType;let S;try{S=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}x.default=S;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const S=x,_=e._zod.pattern;if(!_)throw new Error("Pattern not found in template literal");S.type="string",S.pattern=_.source;break}case"pipe":{const S=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(S,v),o.ref=S;break}case"readonly":{this.process(i.innerType,v),o.ref=i.innerType,x.readOnly=!0;break}case"promise":{this.process(i.innerType,v),o.ref=i.innerType;break}case"optional":{this.process(i.innerType,v),o.ref=i.innerType;break}case"lazy":{const S=e._zod.innerType;this.process(S,v),o.ref=S;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(e);return c&&Object.assign(o.schema,c),this.io==="input"&&Ga(e)&&(delete o.schema.examples,delete o.schema.default),this.io==="input"&&o.schema._prefault&&((r=o.schema).default??(r.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(e).schema}emit(e,n){var f,h,m,p,v,y;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},i=this.seen.get(e);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=x=>{var P;const S=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const O=(P=r.external.registry.get(x[0]))==null?void 0:P.id,A=r.external.uri??(L=>L);if(O)return{ref:A(O)};const T=x[1].defId??x[1].schema.id??`schema${this.counter++}`;return x[1].defId=T,{defId:T,ref:`${A("__shared")}#/${S}/${T}`}}if(x[1]===i)return{ref:"#"};const N=`#/${S}/`,k=x[1].schema.id??`__schema${this.counter++}`;return{defId:k,ref:N+k}},s=x=>{if(x[1].schema.$ref)return;const S=x[1],{ref:_,defId:N}=a(x);S.def={...S.schema},N&&(S.defId=N);const k=S.schema;for(const P in k)delete k[P];k.$ref=_};if(r.cycles==="throw")for(const x of this.seen.entries()){const S=x[1];if(S.cycle)throw new Error(`Cycle detected: #/${(f=S.cycle)==null?void 0:f.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const x of this.seen.entries()){const S=x[1];if(e===x[0]){s(x);continue}if(r.external){const N=(h=r.external.registry.get(x[0]))==null?void 0:h.id;if(e!==x[0]&&N){s(x);continue}}if((m=this.metadataRegistry.get(x[0]))==null?void 0:m.id){s(x);continue}if(S.cycle){s(x);continue}if(S.count>1&&r.reused==="ref"){s(x);continue}}const o=(x,S)=>{const _=this.seen.get(x),N=_.def??_.schema,k={...N};if(_.ref===null)return;const P=_.ref;if(_.ref=null,P){o(P,S);const O=this.seen.get(P).schema;O.$ref&&S.target==="draft-7"?(N.allOf=N.allOf??[],N.allOf.push(O)):(Object.assign(N,O),Object.assign(N,k))}_.isParent||this.override({zodSchema:x,jsonSchema:N,path:_.path??[]})};for(const x of[...this.seen.entries()].reverse())o(x[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(p=r.external)!=null&&p.uri){const x=(v=r.external.registry.get(e))==null?void 0:v.id;if(!x)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(x)}Object.assign(l,i.def);const c=((y=r.external)==null?void 0:y.defs)??{};for(const x of this.seen.entries()){const S=x[1];S.def&&S.defId&&(c[S.defId]=S.def)}r.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function qq(t,e){if(t instanceof Mde){const r=new Jq(e),i={};for(const o of t._idmap.entries()){const[l,c]=o;r.process(c)}const a={},s={registry:t,uri:e==null?void 0:e.uri,defs:i};for(const o of t._idmap.entries()){const[l,c]=o;a[l]=r.emit(c,{...e,external:s})}if(Object.keys(i).length>0){const o=r.target==="draft-2020-12"?"$defs":"definitions";a.__shared={[o]:i}}return{schemas:a}}const n=new Jq(e);return n.process(t),n.emit(t,e)}function Ga(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const i=t._zod.def;switch(i.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Ga(i.element,n);case"object":{for(const a in i.shape)if(Ga(i.shape[a],n))return!0;return!1}case"union":{for(const a of i.options)if(Ga(a,n))return!0;return!1}case"intersection":return Ga(i.left,n)||Ga(i.right,n);case"tuple":{for(const a of i.items)if(Ga(a,n))return!0;return!!(i.rest&&Ga(i.rest,n))}case"record":return Ga(i.keyType,n)||Ga(i.valueType,n);case"map":return Ga(i.keyType,n)||Ga(i.valueType,n);case"set":return Ga(i.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Ga(i.innerType,n);case"lazy":return Ga(i.getter(),n);case"default":return Ga(i.innerType,n);case"prefault":return Ga(i.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return Ga(i.in,n)||Ga(i.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${i.type}`)}const RQe=Symbol("Let zodToJsonSchema decide on which parser to use"),OQe={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},jQe=t=>({...OQe,...t}),IQe=t=>{const e=jQe(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function Vde(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function di(t,e,n,r,i){t[e]=n,Vde(t,e,r,i)}const $de=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function xu(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?$de(e,t.currentPath):e.join("/")}}function MQe(t,e){var r,i,a;const n={type:"array"};return(r=t.type)!=null&&r._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==ct.ZodAny&&(n.items=ai(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&di(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&di(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(di(n,"minItems",t.exactLength.value,t.exactLength.message,e),di(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function VQe(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?di(n,"minimum",r.value,r.message,e):di(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),di(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?di(n,"maximum",r.value,r.message,e):di(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),di(n,"maximum",r.value,r.message,e));break;case"multipleOf":di(n,"multipleOf",r.value,r.message,e);break}return n}function $Qe(){return{type:"boolean"}}function Lde(t,e){return ai(t.type._def,e)}const LQe=(t,e)=>ai(t.innerType._def,e);function Fde(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,a)=>Fde(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return FQe(t,e)}}const FQe=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":di(n,"minimum",r.value,r.message,e);break;case"max":di(n,"maximum",r.value,r.message,e);break}return n};function BQe(t,e){return{...ai(t.innerType._def,e),default:t.defaultValue()}}function UQe(t,e){return e.effectStrategy==="input"?ai(t.schema._def,e):xu(e)}function WQe(t){return{type:"string",enum:Array.from(t.values)}}const zQe=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function HQe(t,e){const n=[ai(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),ai(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(a=>{if(zQe(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;s=l}else r=void 0;i.push(s)}}),i.length?{allOf:i,...r}:void 0}function GQe(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let EV;const sd={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(EV===void 0&&(EV=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),EV),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Bde(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":di(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":di(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":od(n,"email",r.message,e);break;case"format:idn-email":od(n,"idn-email",r.message,e);break;case"pattern:zod":Io(n,sd.email,r.message,e);break}break;case"url":od(n,"uri",r.message,e);break;case"uuid":od(n,"uuid",r.message,e);break;case"regex":Io(n,r.regex,r.message,e);break;case"cuid":Io(n,sd.cuid,r.message,e);break;case"cuid2":Io(n,sd.cuid2,r.message,e);break;case"startsWith":Io(n,RegExp(`^${NV(r.value,e)}`),r.message,e);break;case"endsWith":Io(n,RegExp(`${NV(r.value,e)}$`),r.message,e);break;case"datetime":od(n,"date-time",r.message,e);break;case"date":od(n,"date",r.message,e);break;case"time":od(n,"time",r.message,e);break;case"duration":od(n,"duration",r.message,e);break;case"length":di(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),di(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{Io(n,RegExp(NV(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&od(n,"ipv4",r.message,e),r.version!=="v4"&&od(n,"ipv6",r.message,e);break}case"base64url":Io(n,sd.base64url,r.message,e);break;case"jwt":Io(n,sd.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Io(n,sd.ipv4Cidr,r.message,e),r.version!=="v4"&&Io(n,sd.ipv6Cidr,r.message,e);break}case"emoji":Io(n,sd.emoji(),r.message,e);break;case"ulid":{Io(n,sd.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{od(n,"binary",r.message,e);break}case"contentEncoding:base64":{di(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Io(n,sd.base64,r.message,e);break}}break}case"nanoid":Io(n,sd.nanoid,r.message,e)}return n}function NV(t,e){return e.patternStrategy==="escape"?YQe(t):t}const KQe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function YQe(t){let e="";for(let n=0;n<t.length;n++)KQe.has(t[n])||(e+="\\"),e+=t[n];return e}function od(t,e,n,r){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):di(t,"format",e,n,r)}function Io(t,e,n,r){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:Xq(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):di(t,"pattern",Xq(e,r),n,r)}function Xq(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let i="",a=!1,s=!1,o=!1;for(let c=0;c<r.length;c++){if(a){i+=r[c],a=!1;continue}if(n.i){if(s){if(r[c].match(/[a-z]/)){o?(i+=r[c],i+=`${r[c-2]}-${r[c]}`.toUpperCase(),o=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(i+=r[c],o=!0):i+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){i+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){i+=s?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}i+=r[c],r[c]==="\\"?a=!0:s&&r[c]==="]"?s=!1:!s&&r[c]==="["&&(s=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function Ude(t,e){var r,i,a,s,o,l;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===ct.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((c,f)=>({...c,[f]:ai(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",f]})??xu(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:ai(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===ct.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const{type:c,...f}=Bde(t.keyType._def,e);return{...n,propertyNames:f}}else{if(((s=t.keyType)==null?void 0:s._def.typeName)===ct.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((o=t.keyType)==null?void 0:o._def.typeName)===ct.ZodBranded&&t.keyType._def.type._def.typeName===ct.ZodString&&((l=t.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...f}=Lde(t.keyType._def,e);return{...n,propertyNames:f}}}return n}function JQe(t,e){if(e.mapStrategy==="record")return Ude(t,e);const n=ai(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||xu(e),r=ai(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||xu(e);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function qQe(t){const e=t.values,r=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(r.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function XQe(t){return t.target==="openAi"?void 0:{not:xu({...t,currentPath:[...t.currentPath,"not"]})}}function ZQe(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const aA={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function QQe(t,e){if(e.target==="openApi3")return Zq(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in aA&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,a)=>{const s=aA[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,a)=>{const s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:n.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(a=>!r.includes(a))],[])};return Zq(t,e)}const Zq=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>ai(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function eet(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:aA[t.innerType._def.typeName],nullable:!0}:{type:[aA[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=ai(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=ai(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function tet(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",Vde(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?di(n,"minimum",r.value,r.message,e):di(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),di(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?di(n,"maximum",r.value,r.message,e):di(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),di(n,"maximum",r.value,r.message,e));break;case"multipleOf":di(n,"multipleOf",r.value,r.message,e);break}return n}function net(t,e){const n=e.target==="openAi",r={type:"object",properties:{}},i=[],a=t.shape();for(const o in a){let l=a[o];if(l===void 0||l._def===void 0)continue;let c=iet(l);c&&n&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const f=ai(l._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});f!==void 0&&(r.properties[o]=f,c||i.push(o))}i.length&&(r.required=i);const s=ret(t,e);return s!==void 0&&(r.additionalProperties=s),r}function ret(t,e){if(t.catchall._def.typeName!=="ZodNever")return ai(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function iet(t){try{return t.isOptional()}catch{return!0}}const aet=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return ai(t.innerType._def,e);const n=ai(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:xu(e)},n]}:xu(e)},set=(t,e)=>{if(e.pipeStrategy==="input")return ai(t.in._def,e);if(e.pipeStrategy==="output")return ai(t.out._def,e);const n=ai(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=ai(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function oet(t,e){return ai(t.type._def,e)}function uet(t,e){const r={type:"array",uniqueItems:!0,items:ai(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&di(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&di(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function cet(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>ai(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:ai(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>ai(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function det(t){return{not:xu(t)}}function fet(t){return xu(t)}const het=(t,e)=>ai(t.innerType._def,e),met=(t,e,n)=>{switch(e){case ct.ZodString:return Bde(t,n);case ct.ZodNumber:return tet(t,n);case ct.ZodObject:return net(t,n);case ct.ZodBigInt:return VQe(t,n);case ct.ZodBoolean:return $Qe();case ct.ZodDate:return Fde(t,n);case ct.ZodUndefined:return det(n);case ct.ZodNull:return ZQe(n);case ct.ZodArray:return MQe(t,n);case ct.ZodUnion:case ct.ZodDiscriminatedUnion:return QQe(t,n);case ct.ZodIntersection:return HQe(t,n);case ct.ZodTuple:return cet(t,n);case ct.ZodRecord:return Ude(t,n);case ct.ZodLiteral:return GQe(t,n);case ct.ZodEnum:return WQe(t);case ct.ZodNativeEnum:return qQe(t);case ct.ZodNullable:return eet(t,n);case ct.ZodOptional:return aet(t,n);case ct.ZodMap:return JQe(t,n);case ct.ZodSet:return uet(t,n);case ct.ZodLazy:return()=>t.getter()._def;case ct.ZodPromise:return oet(t,n);case ct.ZodNaN:case ct.ZodNever:return XQe(n);case ct.ZodEffects:return UQe(t,n);case ct.ZodAny:return xu(n);case ct.ZodUnknown:return fet(n);case ct.ZodDefault:return BQe(t,n);case ct.ZodBranded:return Lde(t,n);case ct.ZodReadonly:return het(t,n);case ct.ZodCatch:return LQe(t,n);case ct.ZodPipeline:return set(t,n);case ct.ZodFunction:case ct.ZodVoid:case ct.ZodSymbol:return;default:return(r=>{})()}};function ai(t,e,n=!1){var o;const r=e.seen.get(t);if(e.override){const l=(o=e.override)==null?void 0:o.call(e,t,e,r,n);if(l!==RQe)return l}if(r&&!n){const l=pet(r,e);if(l!==void 0)return l}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const a=met(t,t.typeName,e),s=typeof a=="function"?ai(a(),e):a;if(s&&get(t,e,s),e.postProcess){const l=e.postProcess(s,t,e);return i.jsonSchema=s,l}return i.jsonSchema=s,s}const pet=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:$de(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),xu(e)):e.$refStrategy==="seen"?xu(e):void 0}},get=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),yB=(t,e)=>{const n=IQe(e);let r;const i=e==null?void 0:e.name,a=ai(t._def,n,!1)??xu(n);n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const s=i===void 0?r?{...a,[n.definitionPath]:r}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:a}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};function S5(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!S5(t[i],e[i]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!S5(t[s],e[s]))return!1;return!0}return t===e}function Vd(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const n=e._zod;return typeof n=="object"&&n!==null&&"def"in n}function Qf(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const n=e._def;return typeof n=="object"&&n!=null&&"typeName"in n}function vet(t){return Vd(t)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),Qf(t)}function ON(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(Vd(t)||Qf(t))}async function Wde(t,e){if(Vd(t))try{return{success:!0,data:await SQe(t,e)}}catch(n){return{success:!1,error:n}}if(Qf(t))return t.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function zde(t,e){if(Vd(t))return wQe(t,e);if(Qf(t))return t.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Hde(t){var e;if(Vd(t))return(e=cg.get(t))==null?void 0:e.description;if(Qf(t)||"description"in t&&typeof t.description=="string")return t.description}function yet(t){return ON(t)?Qf(t)?t._def.typeName==="ZodString":Vd(t)?t._zod.def.type==="string":!1:!1}function LE(t){return Vd(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function Gde(t){return Vd(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function E5(t,e=!1){if(Qf(t))return t.strict();if(LE(t)){const n=t._zod.def.shape;if(e)for(const[a,s]of Object.entries(t._zod.def.shape)){if(LE(s)){const l=E5(s,e);n[a]=l}else if(Gde(s)){let l=s._zod.def.element;LE(l)&&(l=E5(l,e)),n[a]=iA(s,{...s._zod.def,element:l})}else n[a]=s;const o=cg.get(s);o&&cg.add(n[a],o)}const r=iA(t,{...t._zod.def,shape:n,catchall:AQe(kQe)}),i=cg.get(t);return i&&cg.add(r,i),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function bet(t){return Qf(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function wet(t){return Vd(t)&&t._zod.def.type==="pipe"}function fE(t,e=!1){if(Qf(t))return bet(t)?fE(t._def.schema,e):t;if(Vd(t)){let n=t;if(wet(t)&&(n=fE(t._zod.def.in,e)),e){if(LE(n)){const i=n._zod.def.shape;for(const[a,s]of Object.entries(n._zod.def.shape))i[a]=fE(s,e);n=iA(n,{...n._zod.def,shape:i})}else if(Gde(n)){const i=fE(n._zod.def.element,e);n=iA(n,{...n._zod.def,element:i})}}const r=cg.get(t);return r&&cg.add(n,r),n}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function dg(t){if(Vd(t)){const e=fE(t,!0);if(LE(e)){const n=E5(e,!0);return qq(n)}else return qq(t)}return Qf(t)?yB(t):t}function xet(t,e){if(t!==void 0&&!Ok(t))return t;if(vB(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function Eet(t){return vB(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...dg(t.data.schema),title:t.data.name}}}class XR{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=Ok(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...Eet(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const i=n??am(),a={id:i,data:e,name:xet(n,e),metadata:r};return this.nodes[i]=a,a}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const a={source:e.id,target:n.id,data:r,conditional:i};return this.edges.push(a),a}firstNode(){return Qq(this)}lastNode(){return eX(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(c=>c.id).every(Ok)&&(r="");const a=c=>r?`${r}:${c}`:c;Object.entries(e.nodes).forEach(([c,f])=>{this.nodes[a(c)]={...f,id:a(c)}});const s=e.edges.map(c=>({...c,source:a(c.source),target:a(c.target)}));this.edges=[...this.edges,...s];const o=e.firstNode(),l=e.lastNode();return[o?{id:a(o.id),data:o.data}:void 0,l?{id:a(l.id),data:l.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&Qq(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&eX(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),n=new Map;Object.values(e).forEach(i=>{n.set(i,(n.get(i)||0)+1)});const r=i=>{const a=e[i];return Ok(i)&&n.get(a)===1?a:i};return new XR({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,a])=>[r(i),{...a,id:r(i)}])),edges:this.edges.map(i=>({...i,source:r(i.source),target:r(i.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=e??{},s=this.reid(),o=s.firstNode(),l=s.lastNode();return dQe(s.nodes,s.edges,{firstNode:o==null?void 0:o.id,lastNode:l==null?void 0:l.id,withStyles:n,curveStyle:r,nodeColors:i,wrapLabelNWords:a})}async drawMermaidPng(e){const n=this.drawMermaid(e);return fQe(n,{backgroundColor:e==null?void 0:e.backgroundColor})}}function Qq(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function eX(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function Net(t){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const i of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return wu.fromReadableStream(n)}function tX(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const _et=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function N5(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*nX(t,e){for(;;){const{value:n,done:r}=Rg.runWithConfig(Gw(t),e.next.bind(e),!0);if(r)break;yield n}}async function*_5(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await Rg.runWithConfig(Gw(t),n.next.bind(e),!0);if(i)break;yield r}}function hs(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}class ms extends Xy{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}bind(e){return new Oy({bound:this,kwargs:e,config:{}})}map(){return new sA({bound:this})}withRetry(e){return new Kde({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Oy({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new Tet({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(ii);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:n},(i,a)=>ii(a===0?e:r))}return Array.from({length:n},()=>ii(e))}async batch(e,n,r){var l;const i=this._getOptionsList(n??{},e.length),a=((l=i[0])==null?void 0:l.maxConcurrency)??(r==null?void 0:r.maxConcurrency),s=new gB({maxConcurrency:a,onFailedAttempt:c=>{throw c}}),o=e.map((c,f)=>s.call(async()=>{try{return await this.invoke(c,i[f])}catch(h){if(r!=null&&r.returnExceptions)return h;throw h}}));return Promise.all(o)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=ii(n),i=new bx({generator:this._streamIterator(e,r),config:r});return await i.setup,wu.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=ii(e):n=ii({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const i=ii(r),a=await Nd(i),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),hs(n,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let o;try{const l=e.call(this,n,i,s);o=await Og(l,r==null?void 0:r.signal)}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(hs(o,"output"))),o}async _batchWithConfig(e,n,r,i){var c;const a=this._getOptionsList(r??{},n.length),s=await Promise.all(a.map(Nd)),o=await Promise.all(s.map(async(f,h)=>{const m=await(f==null?void 0:f.handleChainStart(this.toJSON(),hs(n[h],"input"),a[h].runId,a[h].runType,void 0,void 0,a[h].runName??this.getName()));return delete a[h].runId,m}));let l;try{const f=e.call(this,n,a,o,i);l=await Og(f,(c=a==null?void 0:a[0])==null?void 0:c.signal)}catch(f){throw await Promise.all(o.map(h=>h==null?void 0:h.handleChainError(f))),f}return await Promise.all(o.map(f=>f==null?void 0:f.handleChainEnd(hs(l,"output")))),l}_concatOutputChunks(e,n){return GR(e,n)}async*_transformStreamWithConfig(e,n,r){let i,a=!0,s,o=!0;const l=ii(r),c=await Nd(l),f=this;async function*h(){for await(const p of e){if(a)if(i===void 0)i=p;else try{i=f._concatOutputChunks(i,p)}catch{i=void 0,a=!1}yield p}}let m;try{const p=await tQe(n.bind(this),h(),async()=>c==null?void 0:c.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName()),r==null?void 0:r.signal,l);delete l.runId,m=p.setup;const v=m==null?void 0:m.handlers.find(iQe);let y=p.output;v!==void 0&&m!==void 0&&(y=v.tapOutputIterable(m.runId,y));const x=m==null?void 0:m.handlers.find(nQe);x!==void 0&&m!==void 0&&(y=x.tapOutputIterable(m.runId,y));for await(const S of y)if(yield S,o)if(s===void 0)s=S;else try{s=this._concatOutputChunks(s,S)}catch{s=void 0,o=!1}}catch(p){throw await(m==null?void 0:m.handleChainError(p,void 0,void 0,void 0,{inputs:hs(i,"input")})),p}await(m==null?void 0:m.handleChainEnd(s??{},void 0,void 0,void 0,{inputs:hs(i,"input")}))}getGraph(e){const n=new XR,r=n.addNode({name:`${this.getName()}Input`,schema:yJ()}),i=n.addNode(this),a=n.addNode({name:`${this.getName()}Output`,schema:yJ()});return n.addEdge(r,i),n.addEdge(i,a),n}pipe(e){return new bd({first:this,last:Ey(e)})}pick(e){return this.pipe(new Det(e))}assign(e){return this.pipe(new Yde(new wx({steps:e})))}async*transform(e,n){let r;for await(const i of e)r===void 0?r=i:r=this._concatOutputChunks(r,i);yield*this._streamIterator(r,ii(n))}async*streamLog(e,n,r){const i=new Kq({...r,autoClose:!1,_schemaFormat:"original"}),a=ii(n);yield*this._streamLog(e,i,a)}async*_streamLog(e,n,r){const{callbacks:i}=r;if(i===void 0)r.callbacks=[n];else if(Array.isArray(i))r.callbacks=i.concat([n]);else{const l=i.copy();l.addHandler(n,!0),r.callbacks=l}const a=this.stream(e,r);async function s(){try{const l=await a;for await(const c of l){const f=new ng({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await n.writer.write(f)}}finally{await n.writer.close()}}const o=s();try{for await(const l of n)yield l}finally{await o}}streamEvents(e,n,r){let i;if(n.version==="v1")i=this._streamEventsV1(e,n,r);else if(n.version==="v2")i=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?Net(i):wu.fromAsyncGenerator(i)}async*_streamEventsV2(e,n,r){var v;const i=new aQe({...r,autoClose:!1}),a=ii(n),s=a.runId??am();a.runId=s;const o=a.callbacks;if(o===void 0)a.callbacks=[i];else if(Array.isArray(o))a.callbacks=o.concat(i);else{const y=o.copy();y.addHandler(i,!0),a.callbacks=y}const l=new AbortController,c=this;async function f(){let y,x=null;try{n!=null&&n.signal?"any"in AbortSignal?y=AbortSignal.any([l.signal,n.signal]):(y=n.signal,x=()=>{l.abort()},n.signal.addEventListener("abort",x,{once:!0})):y=l.signal;const S=await c.stream(e,{...a,signal:y}),_=i.tapOutputIterable(s,S);for await(const N of _)if(l.signal.aborted)break}finally{await i.finish(),y&&x&&y.removeEventListener("abort",x)}}const h=f();let m=!1,p;try{for await(const y of i){if(!m){y.data.input=e,m=!0,p=y.run_id,yield y;continue}y.run_id===p&&y.event.endsWith("_end")&&(v=y.data)!=null&&v.input&&delete y.data.input,yield y}}finally{l.abort(),await h}}async*_streamEventsV1(e,n,r){let i,a=!1;const s=ii(n),o=s.tags??[],l=s.metadata??{},c=s.runName??this.getName(),f=new Kq({...r,autoClose:!1,_schemaFormat:"streaming_events"}),h=new lQe({...r}),m=this._streamLog(e,f,s);for await(const v of m){if(i?i=i.concat(v):i=RN.fromRunLogPatch(v),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const _={...i.state},N={run_id:_.id,event:`on_${_.type}_start`,name:c,tags:o,metadata:l,data:{input:e}};h.includeEvent(N,_.type)&&(yield N)}const y=v.ops.filter(_=>_.path.startsWith("/logs/")).map(_=>_.path.split("/")[2]),x=[...new Set(y)];for(const _ of x){let N,k={};const P=i.state.logs[_];if(P.end_time===void 0?P.streamed_output.length>0?N="stream":N="start":N="end",N==="start")P.inputs!==void 0&&(k.input=P.inputs);else if(N==="end")P.inputs!==void 0&&(k.input=P.inputs),k.output=P.final_output;else if(N==="stream"){const O=P.streamed_output.length;if(O!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${O} instead. Encountered in: "${P.name}"`);k={chunk:P.streamed_output[0]},P.streamed_output=[]}yield{event:`on_${P.type}_${N}`,name:P.name,run_id:P.id,tags:P.tags,metadata:P.metadata,data:k}}const{state:S}=i;if(S.streamed_output.length>0){const _=S.streamed_output.length;if(_!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${_} instead. Encountered in: "${S.name}"`);const N={chunk:S.streamed_output[0]};S.streamed_output=[];const k={event:`on_${S.type}_stream`,run_id:S.id,tags:o,metadata:l,name:c,data:N};h.includeEvent(k,S.type)&&(yield k)}}const p=i==null?void 0:i.state;if(p!==void 0){const v={event:`on_${p.type}_end`,name:c,run_id:p.id,tags:o,metadata:l,data:{output:p.final_output}};h.includeEvent(v,p.type)&&(yield v)}}static isRunnable(e){return vB(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new Oy({bound:this,config:{},configFactories:[i=>({callbacks:[new Ode({config:i,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return ket(this,e)}}class Oy extends ms{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const n=zq(this.config,...e);return zq(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new Kde({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}async invoke(e,n){return this.bound.invoke(e,await this._mergeConfig(ii(n),this.kwargs))}async batch(e,n,r){const i=Array.isArray(n)?await Promise.all(n.map(async a=>this._mergeConfig(ii(a),this.kwargs))):await this._mergeConfig(ii(n),this.kwargs);return this.bound.batch(e,i,r)}_concatOutputChunks(e,n){return this.bound._concatOutputChunks(e,n)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,await this._mergeConfig(ii(n),this.kwargs))}async stream(e,n){return this.bound.stream(e,await this._mergeConfig(ii(n),this.kwargs))}async*transform(e,n){yield*this.bound.transform(e,await this._mergeConfig(ii(n),this.kwargs))}streamEvents(e,n,r){const i=this,a=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(ii(n),i.kwargs),version:n.version},r)};return wu.fromAsyncGenerator(a())}static isRunnableBinding(e){return e.bound&&ms.isRunnable(e.bound)}withListeners({onStart:e,onEnd:n,onError:r}){return new Oy({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new Ode({config:i,onStart:e,onEnd:n,onError:r})]})]})}}class sA extends ms{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new sA({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _invoke(e,n,r){return this.bound.batch(e,lo(n,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:n,onError:r}){return new sA({bound:this.bound.withListeners({onStart:e,onEnd:n,onError:r})})}}class Kde extends Oy{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,n,r){const i=e>1?`retry:attempt:${e}`:void 0;return lo(n,{callbacks:r==null?void 0:r.getChild(i)})}async _invoke(e,n,r){return XP(i=>super.invoke(e,this._patchConfigForRetry(i,n,r)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,i){const a={};try{await XP(async s=>{const o=e.map((m,p)=>p).filter(m=>a[m.toString()]===void 0||a[m.toString()]instanceof Error),l=o.map(m=>e[m]),c=o.map(m=>this._patchConfigForRetry(s,n==null?void 0:n[m],r==null?void 0:r[m])),f=await super.batch(l,c,{...i,returnExceptions:!0});let h;for(let m=0;m<f.length;m+=1){const p=f[m],v=o[m];p instanceof Error&&h===void 0&&(h=p,h.input=l[m]),a[v.toString()]=p}if(h)throw h;return f},{onFailedAttempt:s=>this.onFailedAttempt(s,s.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(s){if((i==null?void 0:i.returnExceptions)!==!0)throw s}return Object.keys(a).sort((s,o)=>parseInt(s,10)-parseInt(o,10)).map(s=>a[parseInt(s,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class bd extends ms{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){var l;const r=ii(n),i=await Nd(r),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),hs(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let s=e,o;try{const c=[this.first,...this.middle];for(let f=0;f<c.length;f+=1){const m=c[f].invoke(s,lo(r,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`)}));s=await Og(m,n==null?void 0:n.signal)}if((l=n==null?void 0:n.signal)!=null&&l.aborted)throw new Error("Aborted");o=await this.last.invoke(s,lo(r,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(c){throw await(a==null?void 0:a.handleChainError(c)),c}return await(a==null?void 0:a.handleChainEnd(hs(o,"output"))),o}async batch(e,n,r){var l;const i=this._getOptionsList(n??{},e.length),a=await Promise.all(i.map(Nd)),s=await Promise.all(a.map(async(c,f)=>{const h=await(c==null?void 0:c.handleChainStart(this.toJSON(),hs(e[f],"input"),i[f].runId,void 0,void 0,void 0,i[f].runName));return delete i[f].runId,h}));let o=e;try{for(let c=0;c<this.steps.length;c+=1){const h=this.steps[c].batch(o,s.map((m,p)=>{const v=m==null?void 0:m.getChild(this.omitSequenceTags?void 0:`seq:step:${c+1}`);return lo(i[p],{callbacks:v})}),r);o=await Og(h,(l=i[0])==null?void 0:l.signal)}}catch(c){throw await Promise.all(s.map(f=>f==null?void 0:f.handleChainError(c))),c}return await Promise.all(s.map(c=>c==null?void 0:c.handleChainEnd(hs(o,"output")))),o}_concatOutputChunks(e,n){return this.last._concatOutputChunks(e,n)}async*_streamIterator(e,n){var h;const r=await Nd(n),{runId:i,...a}=n??{},s=await(r==null?void 0:r.handleChainStart(this.toJSON(),hs(e,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName)),o=[this.first,...this.middle,this.last];let l=!0,c;async function*f(){yield e}try{let m=o[0].transform(f(),lo(a,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let p=1;p<o.length;p+=1)m=await o[p].transform(m,lo(a,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${p+1}`)}));for await(const p of m)if((h=n==null?void 0:n.signal)==null||h.throwIfAborted(),yield p,l)if(c===void 0)c=p;else try{c=this._concatOutputChunks(c,p)}catch{c=void 0,l=!1}}catch(m){throw await(s==null?void 0:s.handleChainError(m)),m}await(s==null?void 0:s.handleChainEnd(hs(c,"output")))}getGraph(e){const n=new XR;let r=null;return this.steps.forEach((i,a)=>{const s=i.getGraph(e);a!==0&&s.trimFirstNode(),a!==this.steps.length-1&&s.trimLastNode(),n.extend(s);const o=s.firstNode();if(!o)throw new Error(`Runnable ${i} has no first node`);r&&n.addEdge(r,o),r=s.lastNode()}),n}pipe(e){return bd.isRunnableSequence(e)?new bd({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new bd({first:this.first,middle:[...this.middle,this.last],last:Ey(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&ms.isRunnable(e)}static from([e,...n],r){let i={};return typeof r=="string"?i.name=r:r!==void 0&&(i=r),new bd({...i,first:Ey(e),middle:n.slice(0,-1).map(Ey),last:Ey(n[n.length-1])})}}class wx extends ms{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=Ey(r)}static from(e){return new wx({steps:e})}async invoke(e,n){const r=ii(n),i=await Nd(r),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const s={};try{const o=Object.entries(this.steps).map(async([l,c])=>{s[l]=await c.invoke(e,lo(r,{callbacks:a==null?void 0:a.getChild(`map:key:${l}`)}))});await Og(Promise.all(o),n==null?void 0:n.signal)}catch(o){throw await(a==null?void 0:a.handleChainError(o)),o}return await(a==null?void 0:a.handleChainEnd(s)),s}async*_transform(e,n,r){const i={...this.steps},a=Rde(e,Object.keys(i).length),s=new Map(Object.entries(i).map(([o,l],c)=>{const f=l.transform(a[c],lo(r,{callbacks:n==null?void 0:n.getChild(`map:key:${o}`)}));return[o,f.next().then(h=>({key:o,gen:f,result:h}))]}));for(;s.size;){const o=Promise.race(s.values()),{key:l,result:c,gen:f}=await Og(o,r==null?void 0:r.signal);s.delete(l),c.done||(yield{[l]:c.value},s.set(l,f.next().then(h=>({key:l,gen:f,result:h}))))}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=ii(n),a=new bx({generator:this.transform(r(),i),config:i});return await a.setup,wu.fromAsyncGenerator(a)}}class bB extends ms{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!oB(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,n){const[r]=this._getOptionsList(n??{},1),i=await Nd(r),a=this.func(lo(r,{callbacks:i}),e);return Og(a,r==null?void 0:r.signal)}async*_streamIterator(e,n){var a,s;const[r]=this._getOptionsList(n??{},1),i=await this.invoke(e,n);if(N5(i)){for await(const o of i)(a=r==null?void 0:r.signal)==null||a.throwIfAborted(),yield o;return}if(_et(i)){for(;;){(s=r==null?void 0:r.signal)==null||s.throwIfAborted();const o=i.next();if(o.done)break;yield o.value}return}yield i}static from(e){return new bB({func:e})}}function Cet(t){if(oB(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class x_ extends ms{static lc_name(){return"RunnableLambda"}constructor(e){if(oB(e.func))return bB.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Cet(e.func),this.func=e.func}static from(e){return new x_({func:e})}async _invoke(e,n,r){return new Promise((i,a)=>{const s=lo(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??wV)-1});Rg.runWithConfig(Gw(s),async()=>{var o,l;try{let c=await this.func(e,{...s});if(c&&ms.isRunnable(c)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");c=await c.invoke(e,{...s,recursionLimit:(s.recursionLimit??wV)-1})}else if(N5(c)){let f;for await(const h of _5(s,c))if((o=n==null?void 0:n.signal)==null||o.throwIfAborted(),f===void 0)f=h;else try{f=this._concatOutputChunks(f,h)}catch{f=h}c=f}else if(tX(c)){let f;for(const h of nX(s,c))if((l=n==null?void 0:n.signal)==null||l.throwIfAborted(),f===void 0)f=h;else try{f=this._concatOutputChunks(f,h)}catch{f=h}c=f}i(c)}catch(c){a(c)}})})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async*_transform(e,n,r){var o,l;let i;for await(const c of e)if(i===void 0)i=c;else try{i=this._concatOutputChunks(i,c)}catch{i=c}const a=lo(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??wV)-1}),s=await new Promise((c,f)=>{Rg.runWithConfig(Gw(a),async()=>{try{const h=await this.func(i,{...a,config:a});c(h)}catch(h){f(h)}})});if(s&&ms.isRunnable(s)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const c=await s.stream(i,a);for await(const f of c)yield f}else if(N5(s))for await(const c of _5(a,s))(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield c;else if(tX(s))for(const c of nX(a,s))(l=r==null?void 0:r.signal)==null||l.throwIfAborted(),yield c;else yield s}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=ii(n),a=new bx({generator:this.transform(r(),i),config:i});return await a.setup,wu.fromAsyncGenerator(a)}}class Tet extends ms{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=ii(n),i=await Nd(r),{runId:a,...s}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),hs(e,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName)),l=lo(s,{callbacks:o==null?void 0:o.getChild()});return await Rg.runWithConfig(l,async()=>{var h;let f;for(const m of this.runnables()){(h=r==null?void 0:r.signal)==null||h.throwIfAborted();try{const p=await m.invoke(e,l);return await(o==null?void 0:o.handleChainEnd(hs(p,"output"))),p}catch(p){f===void 0&&(f=p)}}throw f===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(f)),f)})}async*_streamIterator(e,n){var h;const r=ii(n),i=await Nd(r),{runId:a,...s}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),hs(e,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName));let l,c;for(const m of this.runnables()){(h=r==null?void 0:r.signal)==null||h.throwIfAborted();const p=lo(s,{callbacks:o==null?void 0:o.getChild()});try{const v=await m.stream(e,p);c=_5(p,v);break}catch(v){l===void 0&&(l=v)}}if(c===void 0){const m=l??new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(m)),m}let f;try{for await(const m of c){yield m;try{f=f===void 0?f:this._concatOutputChunks(f,m)}catch{f=void 0}}}catch(m){throw await(o==null?void 0:o.handleChainError(m)),m}await(o==null?void 0:o.handleChainEnd(hs(f,"output")))}async batch(e,n,r){var l;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(n??{},e.length),a=await Promise.all(i.map(c=>Nd(c))),s=await Promise.all(a.map(async(c,f)=>{const h=await(c==null?void 0:c.handleChainStart(this.toJSON(),hs(e[f],"input"),i[f].runId,void 0,void 0,void 0,i[f].runName));return delete i[f].runId,h}));let o;for(const c of this.runnables()){(l=i[0].signal)==null||l.throwIfAborted();try{const f=await c.batch(e,s.map((h,m)=>lo(i[m],{callbacks:h==null?void 0:h.getChild()})),r);return await Promise.all(s.map((h,m)=>h==null?void 0:h.handleChainEnd(hs(f[m],"output")))),f}catch(f){o===void 0&&(o=f)}}throw o?(await Promise.all(s.map(c=>c==null?void 0:c.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}}function Ey(t){if(typeof t=="function")return new x_({func:t});if(ms.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=Ey(r);return new wx({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class Yde extends ms{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof wx&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const i=this.mapper.getStepsKeys(),[a,s]=Rde(e),o=this.mapper.transform(s,lo(r,{callbacks:n==null?void 0:n.getChild()})),l=o.next();for await(const c of a){if(typeof c!="object"||Array.isArray(c))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof c}`);const f=Object.fromEntries(Object.entries(c).filter(([h])=>!i.includes(h)));Object.keys(f).length>0&&(yield f)}yield(await l).value;for await(const c of o)yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=ii(n),a=new bx({generator:this.transform(r(),i),config:i});return await a.setup,wu.fromAsyncGenerator(a)}}class Det extends ms{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=ii(n),a=new bx({generator:this.transform(r(),i),config:i});return await a.setup,wu.fromAsyncGenerator(a)}}class rX extends Oy{constructor(e){const n=bd.from([x_.from(async r=>{let i;if(tde(r))try{i=await zde(this.schema,r.args)}catch{throw new EJe("Received tool input did not match expected schema",JSON.stringify(r.args))}else i=r;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function ket(t,e){const n=e.name??t.getName(),r=e.description??Hde(e.schema);return yet(e.schema)?new rX({name:n,description:r,schema:Ed({input:oo()}).transform(i=>i.input),bound:t}):new rX({name:n,description:r,schema:e.schema,bound:t})}const Pet=`You are an expert in analyzing Korean novels and creating comprehensive glossaries for translation.

Analyze the provided Korean text and extract:
1. Characters (characters) - Korean name as key, with english, age, gender, personality, tone, honorifics
2. Terms (terms) - Important terminology, items, abilities, ranks
3. Places (places) - Locations mentioned in the text

Return ONLY a valid JSON object with this structure:
{
  "characters": {
    "": {
      "english": "Kim Minsu",
      "age": 25,
      "gender": "male",
      "personality": "brave and determined",
      "tone": "casual but respectful",
      "honorifics": "hyung to older males"
    }
  },
  "terms": {
    "": {
      "english": "demonic beast",
      "description": "corrupted creatures"
    }
  },
  "places": {
    "": {
      "english": "Seoul",
      "description": "Capital city"
    }
  }
}

Be thorough and extract all relevant information.`;class Aet{constructor(e,n="en"){this.client=e,this.targetLanguage=n}async analyzeText(e){const n=[new Ag(Pet),new hc(`Analyze this Korean text and extract glossary information:

${e}`)],r=await this.client.invoke(n),i=typeof r.content=="string"?r.content:JSON.stringify(r.content);try{const a=i.match(/```(?:json)?\s*\n?([\s\S]*?)\n?```/),s=a?a[1]:i,o=JSON.parse(s.trim());return this.normalizeGlossary(o)}catch(a){return console.error("Failed to parse glossary:",a),{characters:{},terms:{},places:{}}}}normalizeGlossary(e){const n={characters:{},terms:{},places:{}};if(e.characters&&typeof e.characters=="object"){for(const[r,i]of Object.entries(e.characters))if(i&&typeof i=="object"){const a=i;n.characters[r]={english:a.english||a.name||r,name:a.name,age:a.age,gender:a.gender,personality:a.personality,tone:a.tone,honorifics:a.honorifics}}}if(e.terms&&typeof e.terms=="object"){for(const[r,i]of Object.entries(e.terms))if(i&&typeof i=="object"){const a=i;n.terms[r]={english:a.english||r,description:a.description}}}if(e.places&&typeof e.places=="object"){for(const[r,i]of Object.entries(e.places))if(i&&typeof i=="object"){const a=i;n.places[r]={english:a.english||r,description:a.description}}}return n}}const C5="__start__",iy="__end__";class Ret{constructor(){Mt(this,"nodes",new Map);Mt(this,"edges",[]);Mt(this,"conditionalEdges",new Map)}addNode(e,n){return this.nodes.set(e,n),this}addEdge(e,n){return this.edges.push({from:e,to:n}),this}addConditionalEdges(e,n,r){return this.conditionalEdges.set(e,{condition:n,mapping:r}),this}compile(){return new Oet(this.nodes,this.edges,this.conditionalEdges)}}class Oet{constructor(e,n,r){this.nodes=e,this.edges=n,this.conditionalEdges=r}async invoke(e){let n={...e};const r=this.edges.find(a=>a.from===C5);if(!r||typeof r.to!="string")throw new Error("No valid start edge found");let i=r.to;for(;i!==iy;){const a=this.nodes.get(i);if(!a)throw new Error(`Node ${i} not found`);try{const o=await a(n);n={...n,...o}}catch(o){console.error(`Error in node ${i}:`,o),n={...n,error:o instanceof Error?o.message:"Unknown error"}}const s=this.conditionalEdges.get(i);if(s){const o=s.condition(n),l=s.mapping[o];if(!l)throw new Error(`No mapping found for condition result: ${o}`);i=l}else{const o=this.edges.find(l=>l.from===i);if(!o)throw new Error(`No edge found from node ${i}`);if(typeof o.to!="string")throw new Error(`Invalid edge configuration for node ${i}`);i=o.to}n.error&&i!==iy&&(i=iy)}return n}async stream(e,n){let r={...e};const i=this.edges.find(s=>s.from===C5);if(!i||typeof i.to!="string")throw new Error("No valid start edge found");let a=i.to;for(;a!==iy;){const s=this.nodes.get(a);if(!s)throw new Error(`Node ${a} not found`);try{const l=await s(r);r={...r,...l},n&&n(a,r)}catch(l){console.error(`Error in node ${a}:`,l),r={...r,error:l instanceof Error?l.message:"Unknown error"}}const o=this.conditionalEdges.get(a);if(o){const l=o.condition(r),c=o.mapping[l];if(!c)throw new Error(`No mapping found for condition result: ${l}`);a=c}else{const l=this.edges.find(c=>c.from===a);if(!l)throw new Error(`No edge found from node ${a}`);if(typeof l.to!="string")throw new Error(`Invalid edge configuration for node ${a}`);a=l.to}r.error&&a!==iy&&(a=iy)}return r}}function jet(){return new Ret}const Jde=`You are a master translator, exceptionally fluent in both Korean and English, possessing a deep, nuanced understanding of cultural contexts, idiomatic expressions, and literary styles. Your primary objective is to produce an English translation of the provided Korean text that is not just accurate, but reads as if it were originally written by a skilled native English-speaking author.

Before you begin, mentally formulate a concise checklist of the key requirements below to ensure a comprehensive approach.

**Phase 1: Translation**

**I. CORE PRINCIPLES (CRITICAL REQUIREMENTS)**

- **Absolute Fidelity**: Translate EVERY sentence. DO NOT OMIT, SKIP, OR SUMMARIZE ANY CONTENT.
- **Unfiltered Content**: PRESERVE ALL EXPLICIT, MATURE, OR ADULT CONTENT intended for a 19+ audience. Do not censor, dilute, or tone down the original text.
- **Structural Integrity**: Replicate the original paragraph breaks and formatting precisely. Maintain all structural markers like chapter numbers and scene breaks (e.g., ***). THE NUMBERS LABELED AS 01, 02, ETC. INDICATE CHAPTERS, SO DO NOT DELETE OR CHANGE THEM.
- **Contextual Continuity**: Ensure seamless continuity with any previously provided context. Reuse established translations for recurring characters, items, places, phrases, and title of the novel. CONSISTENCY IS KEY.

**II. ARTISTIC & STYLISTIC INTEGRITY**

- **Tone & Register**: Meticulously match the original tone. A casual Korean phrase like "?" should be rendered with an appropriate English equivalent (e.g., "Are you nuts?", "You gotta be kidding me!") rather than a literal, stiff translation ("Are you insane?").
- **Sentence Rhythm & Flow**: Adapt to natural English syntax (SVO) and vary sentence length to create a compelling narrative rhythm. Avoid monotonous, choppy phrasing.
- **Lexical Choice**: Use a vocabulary that is natural and readable. DO NOT use overly complex or obscure words. Prioritize clarity. Use richer vocabulary only when it genuinely enhances the atmosphere.
- **Emotional Resonance**: Ensure the emotional impact of the original text is fully conveyed.
- **Sound Effects and onomatopoeia:** Translate Korean onomatopoeia or interjections (e.g., , , , ) into an appropriate English sound, placing it *in single quotes*. DO NOT ROMANIZE IT! If the sound carries meaning, include an italic English gloss beside it.

**III. NUANCE & ADAPTATION**

- **Idioms & Proverbs**: AVOID LITERAL TRANSLATION. Find a culturally appropriate English equivalent.
    - Direct Equivalent: '   '  'Out of sight, out of mind.'
    - Meaning-Based Rephrasing: '    '  'He was caught in the crossfire.'
- **Cultural & Genre Terms**: Provide brief, in-text explanations for cultural specifics on first use (e.g., 'tteokbokki, a spicy rice cake dish'). Use established English genre terminology for fantasy or gaming terms.
- **Glossary Adherence**: STRICTLY FOLLOW ANY PROVIDED GLOSSARY for all proper nouns and key terms. Correctly translate gendered titles (e.g.,   Count for male, Countess for female).
- **Honorifics**: Do not romanize. Convey the relationship dynamic through appropriate English titles ('Mr.', 'Sir', 'Ma'am') or dialogue choices.

**IV. TECHNICAL & MECHANICAL ACCURACY**

- **Dialogue & Thoughts**: Correctly attribute dialogue. Clearly distinguish inner thoughts by enclosing them in asterisks (*Like this*).
- **Punctuation & Locale**: Use standard North American punctuation, spelling, dates, times, and currency formats.

**Phase 2: Validation & Output**

- **Self-Correction**: After translating, briefly review your work against this checklist.
- **Final Output**: PROVIDE ONLY THE TRANSLATED ENGLISH TEXT. Do not include any notes, explanations, or summaries.`,qde=`****



-  - 
-  - 
    - 19
- 
- 
- 
-  - 
-  - 
- 
- ****



1. ****
    - ****
    - 
    - 
    - 
    - 

2. ****
    - ////
    - 
    - 
    - 

3. ****
    - ****
    - 
    - 
    - 

4. ****
    - ****
    - 
    - 
    - 

5. ****
    - ****
    - 
    - 
    - 
    -  **()**
    - ****
        - 
        - 
        - 
        - 
    -  - 
    - <character name>
    - 

6. ****
    -  - 
    - 0102
    - '***' - 
    -  - 

7. ****
    - 
    - 
    - --

8. ****
    - 
        - '   '''
        - 
        - '    '''''''
    - ''
    - AA



- 
- `,wB=`You are a literary enhancement specialist for professional web novel translation. Your task is to revise the provided translation to ensure it reads like a high-quality work for North American novel readers.

YOUR PRIMARY DIRECTIVE IS TO ENHANCE THE LITERARY QUALITY WHILE PRESERVING EVERY DETAIL OF THE ORIGINAL STORY.

**CRITICAL REQUIREMENTS:**

- PRESERVE ALL STORY CONTENT AND PLOT POINTS EXACTLY AS IN THE ORIGINAL.
- DO NOT SUMMARIZE, OMIT, OR ALTER ANY PART OF THE PLOT, CHARACTER ACTIONS, OR DIALOGUE.
- THE NUMBERS LABELED AS 01, 02, ETC. INDICATE CHAPTERS, SO DO NOT DELETE OR CHANGE THEM.
- MAINTAIN THE EXACT SEQUENCE OF SCENES AND NARRATIVE STRUCTURE.
- Strictly follow the provided glossary. CONSISTENCY IS PARAMOUNT.
- AVOID LITERAL TRANSLATION.

**GUIDELINES FOR ENHANCEMENT:**

**1. Narrative Flow and Naturalness**

- **Improve Flow**: Fix stiff, fragmented sentences by combining related clauses with conjunctions for a smoother rhythm. Ensure a natural flow between sentences and paragraph by using transition words between related ideas. Vary sentence structure to avoid monotonous rhythm.
- **Concise Prose**: Make the text concise and immersive. Eliminate wordiness, especially in narrative text.
- **Natural Dialogue**: Translate dialogue to reflect how a native speaker would actually talk.
    - Example 1 (Interjection): Literal (X): "What are you?"  Localized (O): "**Who** are you?"
    - Example 2 (Exchange): Literal (X): "Yes. What do you need?"  Localized (O): "Yes. Do you **need something**?"
- **Avoid Literalisms**: Rephrase awkward literal translations into fluent English equivalents.
    - Descriptive (X): "Her voice crawled into a mousehole."  (O): "Her voice was **barely audible**." or "She spoke in a whisper"
    - Idiomatic (X): "A sparrow could eat more than you."  (O): "You **eat like a bird**."
    - Konglish (X): "1+1 event."  (O): "Buy-one-get-one free/BOGO promotion." or (X) "The company gave the employees a lunch event."  (O): "The company treated the staff to lunch as a surprise."

**2. Cultural Adaptation and Localization**

- **Honorifics**: NEVER USE THE ROMANIZED TERM OF KOREAN HONORIFICS.
    - \`\`  "sir" or "Mr. [Last name]" or first name (if familiar).
    - \`\`  "senior [Last Name]" or just the first name (context-dependent).
    - Remove suffixes like \`///\`, using the character's name or a suitable pronoun instead.
    - Capture the dynamics of the hierarchy between characters through the tone and choice of words in their dialogue.
    - Replace Korean-specific gestures with natural Western equivalents, or explain them in context. For example:
        - "What's mana?" Astina tilted her head.
        - "What's mana?" Astina asked, looking confused.
- **Pronoun Usage**: **Reduce over-repetition of proper nouns** (names, titles). Korean text often repeats names where English would use a pronoun. Replace them with "he," "she," "they," or appropriate titles where the context is clear.
    - Instead of "Team Leader Kim," use "Mr. Kim" or "sir."
    - When addressing, replace proper nouns with names or simple titles (Ms., Dr., sir/ma'am).
- **Name Order**: When translating Korean names, do not confuse the first and last name order. Unless necessary, omit the last name. \`\`  (Park) "Sohee".
- **Konglish and Cultural Context**:
    - Identify and adjust Konglish. \`\`  studio apartment.
    - Identify English words that are commonly used in Korea but have a different meaning or usage in North America, and replace them with the correct colloquial equivalent. For instance, Replace "navigation" () with "GPS" or "map app."
    - Be aware of Korean beauty standards. While descriptions of features are fine, avoid phrasing them as direct compliments like "she has a pretty back of the head" or "she had pretty white skin."
    - When a character playfully refers to themselves or the person they are talking to in the third person, use pronouns instead. For instance,
        - (X) Astina (while talking to Theo): 'Theo is the coolest.' > (O) 'You are the coolest, Theo'
        - (X) Astina (while talking about herself): 'Astina love you the most' > (O) 'I love the most.'
- **Slang**
    - For contemporary slang, substitute with appropriate American equivalents (e.g., \`?\`  For real?!).
- **Sound Effects (SFX) and Onomatopoeia**:
    - Ensure that all translated sound effects adhere to the **Anti-Romanization SFX Protocol**. The rule is: **Korean onomatopoeia must be localized into natural, common English sound words (e.g., \`\` -> \`Slam\`) and never romanized (e.g., NOT \`Kwang\`). They must be italicized and contextually appropriate.** This rule is non-negotiable for reading flow.
    - Translate Korean onomatopoeia or interjections into appropriate English words (e.g., \`\`  "Gasp" or "Ack"). If the translated onomatopoeia are unnatural in English prose change it so that it is so that the reading experience is not disrupted.

**3. Styling and Word Choice**

- **Italicization**: Maintain italics ONLY for a character's direct inner thoughts (*Why did he say that?*) or for clear emphasis on a word.
- **Dialogue Attribution**: Use varied, descriptive dialogue tags and meaningful action beats (e.g., "Text," Jun-ho muttered; "Text," Sarah's fingers tightened around the glass). Avoid overusing "said."

**Final Output**: Return the entire enhanced text. Do not provide summaries or notes; ONLY THE ENHANCED TRANSLATION SHOULD BE IN YOUR RESPONSE.`,Iet=`**** 



**1. **

- 
- 
- 
- 
- 
- 
- 

**2. **

- ****
    - 
    - 
- ****
    - 
    - 
    - 
- ****
    - ////
    - 
- ****
    - 
    - 
    - /

**3. **

- 
- '?'''
- 

**4. **

- 
- ********
-     
    ****
    
    -  
    -  
    
    ** / **
    
    -  
    -  
    
    ****
    
    -  
    -  
- 

****

1. ****
2. ****
3. 0102
4. 
5. 
6. 
7. 
8. 
9. 
10. 

****

- 
- /
- 
- 
- 
- 
- 
- 
- 
- 
- 

`,xB=`You are a senior North American fiction editor. Your job is to line-edit the English text so that it reads like a professionally published novelsmooth, natural, and immersive, while STRICTLY PRESERVING ALL STORY CONTENT.

**CRITICAL REQUIREMENTS:**

- RETURN ONLY THE FULLY REFINED ENGLISH TEXT. No commentary or notes.
- NEVER DELETE OR OMIT ANY PLOT DETAIL, LINE OF DIALOGUE, OR SENTENCE. ALL ORIGINAL CONTENT MUST BE RETAINED.
- THE NUMBERS LABELED AS 01, 02, ETC. INDICATE CHAPTERS, SO DO NOT DELETE OR CHANGE THEM.
- Strictly adhere to the provided glossary. Make sure the spellings of names are consistent.

**EDITING GUIDELINES:**

**1. General Guidelines**

- **Prioritize Readability**: Prioritize readability and natural flow over direct or literal translation.
- **Eliminate Clumsy Phrasing**: Actively find and fix sentences that are grammatically correct but sound unnatural or like a direct translation. The goal is to make every sentence sound as if it were originally written in English.
    - Example: A literal translation like "He is in the middle of eating rice" must be corrected to a natural phrase like "**He's eating**."
- **Sentence Structure**: Avoid choppy sentences by combining related clauses with appropriate conjunctions. You may reorder or slightly restructure sentences to improve pacing as long as the meaning is intact.

**2. Style & Tone**

- **Refine Word Choice**: Refine word choices to better match the context, favoring precise or evocative alternatives.
    - Examples: \`house\`  \`estate\`, \`parted her lips\`  \`broke the silence\`, \`ignorant of\`  \`oblivious to\`, \`hey\`  \`hey, you\`.
- **Connotation:** Refine word choices not only for accuracy but also for connotation, ensuring they reflect the intended tone, time period, character voice, and content rating, as guided by the glossary, and avoid technically correct but ill-fitting choices.
    - Examples:
        - :          .
        - Too literal: *She nodded her head dumbly.* ("dumbly" suggests stupidity)
        - Preferred: *All she could manage to do was nod.* (better captures "    ")
- **Avoid Repetition**: Avoid repeated words or phrases in close proximity! Fix awkward or contradicting word pairings (e.g., don't use "lately" with "since two weeks ago," or pair "unnerving" with "unnervingly").
- **Genre-Appropriate Language**: Ensure the tone and vocabulary are fitting for the genre. For historical settings, use more formal language (\`I shall\` instead of \`I will\`, \`my apologies\` over \`I'm sorry\`).

**3. Final Polish**

- **Italic Check**: Confirm that italics are used SPARINGLY and correctly, primarily for inner thoughts and emphasis. Ensure sounds and special dialogue are NOT italicized.
- **Consistency Check**: Ensure consistent tone, vocabulary, and adherence to all character-specific terms from the glossary. If the name of an item, place, term is established as a proper noun, make sure the spelling is consistent throughout the story. MAKE SURE THE NAMES OF CHARACTERS ARE SPELLED CONSISTENTLY.
- **Name Order**: When editing character names, make sure the first name comes first and then the last name. Unless necessary, omit the last name. \`\`  "Sohee" (Park).

Return only the proofread text.`,Met=`40

###  

- 
- 
- 
- 
- *  **  **  **    *
- ****

###  

- ****
    - 
    - 
    - 

- ****
    - 
    - 
    - 

- ****
    - ////
    - 
    - 

- ****
    - 
    - 
    - /

###  

- 
- 
- 
- 
- ****
    - 
    - 
    - 
- 

###  

- ******
- 
- 
    - 2
- 
- 
- 

###  

-  - 
- ** - **
- 0102

`,SB=`You are a layout specialist formatting a translated web novel. Your sole purpose is to apply the following formatting rules precisely while PRESERVING ALL CONTENT.

**CRITICAL REQUIREMENTS:**

- NO CONTENT REMOVAL OR ALTERATION, except for the specific cases listed below.
- THE NUMBERS LABELED AS 01, 02, ETC. INDICATE CHAPTERS. ENSURE TO ALWAYS RETAIN THEM AND FORMAT THEM CORRECTLY. (Sometimes there might be extra numbered parts or 'episodes' within these chapters, retain them along with their titles.)
- RETURN ONLY THE FULLY FORMATTED TEXT.
- Make sure the formatting and spelling of the titles and subtitles are consistent throughout the story.

**I. PARAGRAPH AND INDENTATION**

- **Indentation**: Add exactly five space characters (not a tab) to the beginning of the first line of every paragraph.
- **Structure**: Limit paragraphs to a reasonable length (no more than five sentences). Start each piece of dialogue on a new line.

**II. ITALICIZATION AND EMPHASIS**

Your goal is to REDUCE the overuse of italics.

- **APPROVED USE OF ITALICS**:
    - **Inner Thoughts**: A character's direct internal monologue (*Why did I say that?*).
    - **Emphasis**: For a specific stressed word. Use sparingly.
    - **Special Texts**: Diary entries, emails, handwritten letters.
    - **Flashback Narration**: Italicize narration for short flashbacks. If a flashback scene exceeds 30 lines, do not italicize it.
    - **SOUNDS**: Onomatopoeia (e.g., Thump, Bang) and sound effects (e.g., BOOM) should be italicized.
- **FORBIDDEN USE OF ITALICS (REMOVE MARKDOWN)**:
    - **INTERJECTIONS**: Exclamations like "Ugh," "Argh," "Ah," "Oh," "Hmm," "Tsk" must NOT be italicized.
    - **SPECIAL DIALOGUE**: Dialogue in dreams, from ghosts, or non-human creatures must NOT be italicized.
    - **FLASHBACK DIALOGUE**: All dialogue within a flashback must use standard quotation marks without italics.

**III. CONTENT AND FORMATTING RULES**

- **Onomatopoeia Omission**: If an onomatopoeia (e.g., , ) is immediately followed by a narrative explanation of the sound (e.g., "a door closed"), OMIT THE ONOMATOPOEIA ENTIRELY.
- **Chapter/Episode Markers**: Format as **\`Chapter 1: Subtitle\`** or **\`Episode 1: Subtitle\`**. If there is no subtitle, only write "**Chapter no.**" for "" and "**Episode no.**" for "" or "".
- **Scene Breaks**: Use * * * centered on its own line.
- **Punctuation & Typography**:
    - Use straight quotes (" ") for all dialogue.
    - For these, follow the original formatting in the Korean if they use: <>, [], , etc. Only, do NOT use "-".
    - Use em dashes sparingly. Especially avoid its usage in pairs, as they are a frequent feature of AI-generated text and can make the output feel less human-like.
        - Same for ellipses and semi-colons
    - Do NOT use the tilde (\`~\`). Avoid emoticons like \`^_^\`, replacing with western equivalents like \`:)\` if necessary.
    - Ellipses must be three dots attached to a word (word). Avoid using six dots ("").
        - Example 1: \`"He peeled fruit by himself?"\` 
        - Example 2: \`"I only need you, Doha," she whispered.\` 
    - Do not use punctuation marks as standalone dialogue. Instead, replace such standalone dialogue with phrasing such as "He fell silent", "She was dumbstruck", "He was too stunned to speak", etc- based on the situation, wherever appropriate.
        - Example 1: \`""\` 
        - Example 2: \`"?"\` 
- **Special Text Layout**:
    - Phone Calls:
        - In the case the conversation is SHORT, put the person whose POV it is in normal text and only add the em-dash for the other side.
            - For example (e.g. \`"Text"\`):
                
                "Yes, hello?"
                
                "Oh, Yiseo. Were you sleeping?"
                
                "No, I was just in my room. Is everything okay?"
                
        - In the case the conversation is longer than 6 lines with narration following the dialogues, use regular quotes:
            - For example:
                - Jihun stared at the screen, unable to look away. After a long moment, his lips parted. "The kidnapped boy's last name is Ryu. The year of the incidentI would have been the same age. And his father was the president of a construction company" His voice trailed off, hollow with shock.
                
                "Jihun, are you okay?" Saebom's worried voice came through the phone.
                
                "Honestly, I'm reeling. I don't know what to think if I really was the victim of this kidnapping." Jihun dragged a hand over his face, his mind a vortex of fear and confusion. Taking a ragged breath, he gripped his phone tighter. "I'm going downstairs right now. I have to ask my father. I need to know the truth."
    - Text Messages:
        - When there is a conversation of more than 3 lines for text messages use this format: \`Text\` .
            - For example:
            
            Saebom: No, I was just about to. Thinking about what to order.
            
            Jihun: Then order room service. The food at that hotel is pretty good.
            
            Saebom: Really? I guess I'll have to try it then. Okay, drive safe. I'll be waiting.
            
        - When the text is a stand alone use italics*.*
            - For example:
                - Dana shook her head, dumbfounded. At that moment, her phone vibrated.
                
                *I'll follow you on the next flight.* It was Dale.
                
    - Game chats: If there is a username provided, use \`Name: Text\`
    - System/Game Messages (e.g. [Intelligence has increased by 1.], etc.): Follow the same formatting in the translation as in the original Korean text. Do not use bold formatting.
    - These do not need to be double-spaced nor need five spaces in the beginning.
- **Unit Conversion**: Convert units to North American standards (Fahrenheit, feet/inches, pounds, miles, USD). Write out numbers in prose ("thirteenth floor"), but use numerals for data like years, measurements, or in game settings.
    - For money conversions, use 1,000 Won to $1.
- **Capitalization**: Capitalize high-ranking titles (e.g., His Highness, Count, Duke).

Return only the formatted text without additional notes.`,Vet=`



1. ****
    - 5
    - 
    - 
    - 
    - 

2. ****
    - 
    - /
    - 
    - 1
    - -
    - 1

3. ****
    - ****
        - 
        - 
    - \`^_^\`**(^^), (T_T), (^_^;)**
    - 
    - ...... 
    - )

4. ****
    - 
            - 
    - 
    - 
    - 

5. ****
    - 
    - 
    - 
    - 

6. ****

`,$et=`You are a translation quality reviewer. Respond ONLY with a JSON object containing these fields:
- overall_score (integer 0-100): Overall quality score
- passes (boolean): Whether translation meets quality standards
- major_issues (array of strings): List of critical issues
- minor_issues (array of strings): List of minor issues
- specific_improvements (array of strings): Specific actionable suggestions

Quality check should focus on:
1. Story fluency and continuity
2. Character voice consistency
3. Web novel style and tone
4. Completeness (no omitted content)
5. Term consistency
6. Format and layout accuracy
7. Language naturalness and readability

Example response:
{
  "overall_score": 85,
  "passes": true,
  "major_issues": [],
  "minor_issues": ["Some dialogue feels stiff"],
  "specific_improvements": ["Use more natural contractions in casual speech"]
}

When pointing out issues or suggesting improvements, use specific examples from the text to provide clear, actionable suggestions.

Respond with JSON only, no other text.`,Let=`JSON
- overall_score0100
- passes
- major_issues
- minor_issues
- specific_improvements



1.  - 
2.  - /
3.  - 
4.  - 
5.  - /
6.  - 
7.  - /
8. 
    - 
    - 
    - //
    - 
9.  - //em






{
  "overall_score": 85,
  "passes": true,
  "major_issues": [],
  "minor_issues": [""],
  "specific_improvements": [""]
}

JSON`;class Fet{constructor(e,n,r="en",i){Mt(this,"prompt");Mt(this,"client");Mt(this,"glossary");this.client=e,this.glossary=n,this.prompt=i||(r==="ja"?qde:Jde)}setPrompt(e){this.prompt=e}async translate(e,n,r){const i=this.glossary?this.formatGlossary(this.glossary):"",a=r?`

Previous context for continuity:
${r}`:"",s=n!=null&&n.custom_instruction?`

Custom instruction: ${n.custom_instruction}`:"",o=this.prompt+(i?`

Glossary:
${i}`:""),l=`Translate the following Korean text:${a}${s}

${e}`,c=[new Ag(o),new hc(l)],f=await this.client.invoke(c);return(typeof f.content=="string"?f.content:JSON.stringify(f.content)).trim()}formatGlossary(e){const n=[],r=e,i=l=>l?Array.isArray(l)?l:Object.entries(l).map(([c,f])=>typeof f=="object"&&f!==null?{key:c,...f}:{key:c,value:f}):[],a=i(r.characters);if(a.length>0){n.push("Characters:");for(const l of a){const c=l.korean_name||l.name||l.key,f=l.english_name||l.english||l.name,h=[`${c}  ${f}`];l.age&&h.push(`Age: ${l.age}`),l.gender&&h.push(`Gender: ${l.gender}`),l.personality&&h.push(`Personality: ${l.personality}`),(l.tone||l.speech_style)&&h.push(`Tone: ${l.tone||l.speech_style}`),l.honorifics&&h.push(`Honorifics: ${l.honorifics}`),l.description&&h.push(`Description: ${l.description.substring(0,100)}...`),n.push(`  - ${h.join(", ")}`)}}const s=i(r.terms);if(s.length>0){n.push(`
Terms:`);for(const l of s){const c=l.original||l.korean_name||l.key,f=l.translation||l.english;n.push(`  - ${c}  ${f}`),(l.description||l.context)&&n.push(`    ${l.description||l.context}`)}}const o=i(r.places||r.locations);if(o.length>0){n.push(`
Places:`);for(const l of o){const c=l.korean_name||l.name||l.key,f=l.english_name||l.english||l.name;n.push(`  - ${c}  ${f}`),l.description&&n.push(`    ${l.description}`)}}if(r.events&&Array.isArray(r.events)&&r.events.length>0){n.push(`
Key Events:`);for(const l of r.events.slice(0,5))l.name&&n.push(`  - ${l.name}`)}if(r.style_guide&&(n.push(`
Style Guide:`),r.style_guide.genre&&n.push(`  Genre: ${r.style_guide.genre}`),r.style_guide.tone&&n.push(`  Tone: ${r.style_guide.tone}`),r.style_guide.content_rating&&n.push(`  Content Rating: ${r.style_guide.content_rating}`)),r.honorifics&&typeof r.honorifics=="object"){n.push(`
Honorifics:`);const l=Object.entries(r.honorifics).slice(0,10);for(const[c,f]of l)n.push(`  - ${c}: ${f}`)}return n.join(`
`)}}class Bet{constructor(e,n,r="en",i){Mt(this,"prompt");Mt(this,"client");Mt(this,"glossary");this.client=e,this.glossary=n,this.prompt=i||(r==="ja"?Iet:wB)}setPrompt(e){this.prompt=e}async enhance(e,n){const r=this.glossary?this.formatGlossary(this.glossary):"",i=this.prompt+(r?`

Glossary:
${r}`:"");let a=`Enhance the following translated text:

${e}`;n&&(a+=`

Original Korean text for reference:
${n}`);const s=[new Ag(i),new hc(a)],o=await this.client.invoke(s);return(typeof o.content=="string"?o.content:JSON.stringify(o.content)).trim()}formatGlossary(e){const n=[],r=e,i=o=>o?Array.isArray(o)?o:Object.entries(o).map(([l,c])=>({key:l,...c})):[],a=i(r.characters);if(a.length>0){n.push("Characters:");for(const o of a){const l=o.korean_name||o.name||o.key,c=o.english_name||o.english||o.name;n.push(`  - ${l}  ${c}`),o.personality&&n.push(`    Personality: ${o.personality}`),(o.tone||o.speech_style)&&n.push(`    Speech: ${o.tone||o.speech_style}`)}}const s=i(r.terms);if(s.length>0){n.push(`
Terms:`);for(const o of s){const l=o.original||o.korean_name||o.key,c=o.translation||o.english;n.push(`  - ${l}  ${c}`)}}return r.style_guide&&(n.push(`
Style Guide:`),r.style_guide.genre&&n.push(`  Genre: ${r.style_guide.genre}`),r.style_guide.tone&&n.push(`  Tone: ${r.style_guide.tone}`)),n.join(`
`)}}class Uet{constructor(e,n="en",r){Mt(this,"prompt");Mt(this,"client");this.client=e,this.prompt=r||(n==="ja"?Let:$et)}setPrompt(e){this.prompt=e}async checkQuality(e,n){let r=`Review this translation:

${e}`;n&&(r+=`

Original Korean text:
${n}`);const i=[new Ag(this.prompt),new hc(r)],a=await this.client.invoke(i),s=typeof a.content=="string"?a.content:JSON.stringify(a.content);try{const o=s.match(/```(?:json)?\s*\n?([\s\S]*?)\n?```/),l=o?o[1]:s,c=JSON.parse(l.trim());return{overall_score:c.overall_score||0,passes:c.passes!==!1,major_issues:Array.isArray(c.major_issues)?c.major_issues:[],minor_issues:Array.isArray(c.minor_issues)?c.minor_issues:[],specific_improvements:Array.isArray(c.specific_improvements)?c.specific_improvements:[]}}catch(o){return console.error("Failed to parse quality check result:",o),{overall_score:70,passes:!0,major_issues:[],minor_issues:["Failed to parse quality check response"],specific_improvements:[]}}}}class Wet{constructor(e,n="en",r){Mt(this,"prompt");Mt(this,"client");this.client=e,this.prompt=r||(n==="ja"?Met:xB)}setPrompt(e){this.prompt=e}async proofread(e,n){let r=`Proofread the following text:

${e}`;n&&(r+=`

Original Korean text for reference:
${n}`);const i=[new Ag(this.prompt),new hc(r)],a=await this.client.invoke(i);return(typeof a.content=="string"?a.content:JSON.stringify(a.content)).trim()}}class zet{constructor(e,n="en",r){Mt(this,"prompt");Mt(this,"client");this.client=e,this.prompt=r||(n==="ja"?Vet:SB)}setPrompt(e){this.prompt=e}async format(e){const n=[new Ag(this.prompt),new hc(`Format the following text:

${e}`)],r=await this.client.invoke(n);return(typeof r.content=="string"?r.content:JSON.stringify(r.content)).trim()}}var iX;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(iX||(iX={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aX;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(aX||(aX={}));var sX;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(sX||(sX={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oX=["user","model","function","system"];var lX;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(lX||(lX={}));var uX;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(uX||(uX={}));var cX;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(cX||(cX={}));var dX;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(dX||(dX={}));var FE;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(FE||(FE={}));var fX;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(fX||(fX={}));var mw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(mw||(mw={}));var hX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(hX||(hX={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class k0 extends uo{constructor(e,n){super(e),this.response=n}}class Xde extends uo{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}}class vg extends uo{}class Zde extends uo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Het="https://generativelanguage.googleapis.com",Get="v1beta",Ket="0.24.1",Yet="genai-js";var Qy;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Qy||(Qy={}));class Jet{constructor(e,n,r,i,a){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=a}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Get;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Het}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function qet(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${Yet}/${Ket}`),e.join(" ")}async function Xet(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",qet(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new vg(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,a]of r.entries()){if(i==="x-goog-api-key")throw new vg(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new vg(`Header name ${i} can only be set using the apiClient field`);n.append(i,a)}}return n}async function Zet(t,e,n,r,i,a){const s=new Jet(t,e,n,r,a);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},ntt(a)),{method:"POST",headers:await Xet(s),body:i})}}async function S_(t,e,n,r,i,a={},s=fetch){const{url:o,fetchOptions:l}=await Zet(t,e,n,r,i,a);return Qet(o,l,s)}async function Qet(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){ett(i,t)}return r.ok||await ttt(r,t),r}function ett(t,e){let n=t;throw n.name==="AbortError"?(n=new Zde(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof Xde||t instanceof vg||(n=new uo(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function ttt(t,e){let n="",r;try{const i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new Xde(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function ntt(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ik(t.candidates[0]))throw new k0(`${rg(t)}`,t);return rtt(t)}else if(t.promptFeedback)throw new k0(`Text not available. ${rg(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ik(t.candidates[0]))throw new k0(`${rg(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),mX(t)[0]}else if(t.promptFeedback)throw new k0(`Function call not available. ${rg(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ik(t.candidates[0]))throw new k0(`${rg(t)}`,t);return mX(t)}else if(t.promptFeedback)throw new k0(`Function call not available. ${rg(t)}`,t)},t}function rtt(t){var e,n,r,i;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)s.text&&a.push(s.text),s.executableCode&&a.push("\n```"+s.executableCode.language+`
`+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&a.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function mX(t){var e,n,r,i;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)s.functionCall&&a.push(s.functionCall);if(a.length>0)return a}const itt=[FE.RECITATION,FE.SAFETY,FE.LANGUAGE];function Ik(t){return!!t.finishReason&&itt.includes(t.finishReason)}function rg(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const a=t.candidates[0];Ik(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function jN(t){return this instanceof jN?(this.v=t,this):new jN(t)}function att(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){r[m]&&(i[m]=function(p){return new Promise(function(v,y){a.push([m,p,v,y])>1||o(m,p)})})}function o(m,p){try{l(r[m](p))}catch(v){h(a[0][3],v)}}function l(m){m.value instanceof jN?Promise.resolve(m.value.v).then(c,f):h(a[0][2],m)}function c(m){o("next",m)}function f(m){o("throw",m)}function h(m,p){m(p),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function stt(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=utt(e),[r,i]=n.tee();return{stream:ltt(r),response:ott(i)}}async function ott(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return EB(ctt(e));e.push(i)}}function ltt(t){return att(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield jN(n.read());if(i)break;yield yield jN(EB(r))}})}function utt(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return a();function a(){return e.read().then(({value:s,done:o})=>{if(o){if(i.trim()){r.error(new uo("Failed to parse stream"));return}r.close();return}i+=s;let l=i.match(pX),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new uo(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),i=i.substring(l[0].length),l=i.match(pX)}return a()}).catch(s=>{let o=s;throw o.stack=s.stack,o.name==="AbortError"?o=new Zde("Request aborted when reading from the stream"):o=new uo("Error reading from the stream"),o})}}})}function ctt(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let i=0;for(const a of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=a.citationMetadata,n.candidates[i].groundingMetadata=a.groundingMetadata,n.candidates[i].finishReason=a.finishReason,n.candidates[i].finishMessage=a.finishMessage,n.candidates[i].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[i].content||(n.candidates[i].content={role:a.content.role||"user",parts:[]});const s={};for(const o of a.content.parts)o.text&&(s.text=o.text),o.functionCall&&(s.functionCall=o.functionCall),o.executableCode&&(s.executableCode=o.executableCode),o.codeExecutionResult&&(s.codeExecutionResult=o.codeExecutionResult),Object.keys(s).length===0&&(s.text=""),n.candidates[i].content.parts.push(s)}i++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qde(t,e,n,r){const i=await S_(e,Qy.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return stt(i)}async function efe(t,e,n,r){const a=await(await S_(e,Qy.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:EB(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tfe(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function IN(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return dtt(e)}function dtt(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const a of t)"functionResponse"in a?(n.parts.push(a),i=!0):(e.parts.push(a),r=!0);if(r&&i)throw new uo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new uo("No content is provided for sending chat message.");return r?e:n}function ftt(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=t.generateContentRequest!=null;if(t.contents){if(i)throw new vg("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const a=IN(t);r.contents=[a]}return{generateContentRequest:r}}function gX(t){let e;return t.contents?e=t:e={contents:[IN(t)]},t.systemInstruction&&(e.systemInstruction=tfe(t.systemInstruction)),e}function htt(t){return typeof t=="string"||Array.isArray(t)?{content:IN(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vX=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],mtt={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function ptt(t){let e=!1;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new uo(`First content should be with role 'user', got ${r}`);if(!oX.includes(r))throw new uo(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(oX)}`);if(!Array.isArray(i))throw new uo("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new uo("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of i)for(const l of vX)l in o&&(a[l]+=1);const s=mtt[r];for(const o of vX)if(!s.includes(o)&&a[o]>0)throw new uo(`Content with role '${r}' can't contain '${o}' part`);e=!0}}function yX(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bX="SILENT_ERROR";class gtt{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(ptt(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,a,s,o,l;await this._sendPromise;const c=IN(e),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),n);let m;return this._sendPromise=this._sendPromise.then(()=>efe(this._apiKey,this.model,f,h)).then(p=>{var v;if(yX(p.response)){this._history.push(c);const y=Object.assign({parts:[],role:"model"},(v=p.response.candidates)===null||v===void 0?void 0:v[0].content);this._history.push(y)}else{const y=rg(p.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}m=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,m}async sendMessageStream(e,n={}){var r,i,a,s,o,l;await this._sendPromise;const c=IN(e),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),n),m=Qde(this._apiKey,this.model,f,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(p=>{throw new Error(bX)}).then(p=>p.response).then(p=>{if(yX(p)){this._history.push(c);const v=Object.assign({},p.candidates[0].content);v.role||(v.role="model"),this._history.push(v)}else{const v=rg(p);v&&console.warn(`sendMessageStream() was unsuccessful. ${v}. Inspect response object for details.`)}}).catch(p=>{p.message!==bX&&console.error(p)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vtt(t,e,n,r){return(await S_(e,Qy.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ytt(t,e,n,r){return(await S_(e,Qy.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function btt(t,e,n,r){const i=n.requests.map(s=>Object.assign(Object.assign({},s),{model:e}));return(await S_(e,Qy.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wX{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=tfe(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const i=gX(e),a=Object.assign(Object.assign({},this._requestOptions),n);return efe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),a)}async generateContentStream(e,n={}){var r;const i=gX(e),a=Object.assign(Object.assign({},this._requestOptions),n);return Qde(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),a)}startChat(e){var n;return new gtt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=ftt(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return vtt(this.apiKey,this.model,r,i)}async embedContent(e,n={}){const r=htt(e),i=Object.assign(Object.assign({},this._requestOptions),n);return ytt(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return btt(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new uo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new wX(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new vg("Cached content must contain a `name` field.");if(!e.model)throw new vg("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const s of i)if(n!=null&&n[s]&&e[s]&&(n==null?void 0:n[s])!==e[s]){if(s==="model"){const o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new vg(`Different value for "${s}" specified in modelParams (${n[s]}) and cachedContent (${e[s]})`)}const a=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new wX(this.apiKey,a,r)}}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var wtt=typeof window=="object"?window:{},yr="0123456789abcdef".split(""),xtt=[-2147483648,8388608,32768,128],ld=[24,16,8,0],cs=[];function Ad(t){t?(cs[0]=cs[16]=cs[1]=cs[2]=cs[3]=cs[4]=cs[5]=cs[6]=cs[7]=cs[8]=cs[9]=cs[10]=cs[11]=cs[12]=cs[13]=cs[14]=cs[15]=0,this.blocks=cs):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Ad.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===wtt.ArrayBuffer&&(t=new Uint8Array(t));for(var n,r=0,i,a=t.length||0,s=this.blocks;r<a;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),e)for(i=this.start;r<a&&i<64;++r)s[i>>2]|=t[r]<<ld[i++&3];else for(i=this.start;r<a&&i<64;++r)n=t.charCodeAt(r),n<128?s[i>>2]|=n<<ld[i++&3]:n<2048?(s[i>>2]|=(192|n>>6)<<ld[i++&3],s[i>>2]|=(128|n&63)<<ld[i++&3]):n<55296||n>=57344?(s[i>>2]|=(224|n>>12)<<ld[i++&3],s[i>>2]|=(128|n>>6&63)<<ld[i++&3],s[i>>2]|=(128|n&63)<<ld[i++&3]):(n=65536+((n&1023)<<10|t.charCodeAt(++r)&1023),s[i>>2]|=(240|n>>18)<<ld[i++&3],s[i>>2]|=(128|n>>12&63)<<ld[i++&3],s[i>>2]|=(128|n>>6&63)<<ld[i++&3],s[i>>2]|=(128|n&63)<<ld[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=s[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Ad.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=xtt[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Ad.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,a,s,o,l=this.blocks;for(s=16;s<80;++s)o=l[s-3]^l[s-8]^l[s-14]^l[s-16],l[s]=o<<1|o>>>31;for(s=0;s<20;s+=5)a=e&n|~e&r,o=t<<5|t>>>27,i=o+a+i+1518500249+l[s]<<0,e=e<<30|e>>>2,a=t&e|~t&n,o=i<<5|i>>>27,r=o+a+r+1518500249+l[s+1]<<0,t=t<<30|t>>>2,a=i&t|~i&e,o=r<<5|r>>>27,n=o+a+n+1518500249+l[s+2]<<0,i=i<<30|i>>>2,a=r&i|~r&t,o=n<<5|n>>>27,e=o+a+e+1518500249+l[s+3]<<0,r=r<<30|r>>>2,a=n&r|~n&i,o=e<<5|e>>>27,t=o+a+t+1518500249+l[s+4]<<0,n=n<<30|n>>>2;for(;s<40;s+=5)a=e^n^r,o=t<<5|t>>>27,i=o+a+i+1859775393+l[s]<<0,e=e<<30|e>>>2,a=t^e^n,o=i<<5|i>>>27,r=o+a+r+1859775393+l[s+1]<<0,t=t<<30|t>>>2,a=i^t^e,o=r<<5|r>>>27,n=o+a+n+1859775393+l[s+2]<<0,i=i<<30|i>>>2,a=r^i^t,o=n<<5|n>>>27,e=o+a+e+1859775393+l[s+3]<<0,r=r<<30|r>>>2,a=n^r^i,o=e<<5|e>>>27,t=o+a+t+1859775393+l[s+4]<<0,n=n<<30|n>>>2;for(;s<60;s+=5)a=e&n|e&r|n&r,o=t<<5|t>>>27,i=o+a+i-1894007588+l[s]<<0,e=e<<30|e>>>2,a=t&e|t&n|e&n,o=i<<5|i>>>27,r=o+a+r-1894007588+l[s+1]<<0,t=t<<30|t>>>2,a=i&t|i&e|t&e,o=r<<5|r>>>27,n=o+a+n-1894007588+l[s+2]<<0,i=i<<30|i>>>2,a=r&i|r&t|i&t,o=n<<5|n>>>27,e=o+a+e-1894007588+l[s+3]<<0,r=r<<30|r>>>2,a=n&r|n&i|r&i,o=e<<5|e>>>27,t=o+a+t-1894007588+l[s+4]<<0,n=n<<30|n>>>2;for(;s<80;s+=5)a=e^n^r,o=t<<5|t>>>27,i=o+a+i-899497514+l[s]<<0,e=e<<30|e>>>2,a=t^e^n,o=i<<5|i>>>27,r=o+a+r-899497514+l[s+1]<<0,t=t<<30|t>>>2,a=i^t^e,o=r<<5|r>>>27,n=o+a+n-899497514+l[s+2]<<0,i=i<<30|i>>>2,a=r^i^t,o=n<<5|n>>>27,e=o+a+e-899497514+l[s+3]<<0,r=r<<30|r>>>2,a=n^r^i,o=e<<5|e>>>27,t=o+a+t-899497514+l[s+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0};Ad.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return yr[t>>28&15]+yr[t>>24&15]+yr[t>>20&15]+yr[t>>16&15]+yr[t>>12&15]+yr[t>>8&15]+yr[t>>4&15]+yr[t&15]+yr[e>>28&15]+yr[e>>24&15]+yr[e>>20&15]+yr[e>>16&15]+yr[e>>12&15]+yr[e>>8&15]+yr[e>>4&15]+yr[e&15]+yr[n>>28&15]+yr[n>>24&15]+yr[n>>20&15]+yr[n>>16&15]+yr[n>>12&15]+yr[n>>8&15]+yr[n>>4&15]+yr[n&15]+yr[r>>28&15]+yr[r>>24&15]+yr[r>>20&15]+yr[r>>16&15]+yr[r>>12&15]+yr[r>>8&15]+yr[r>>4&15]+yr[r&15]+yr[i>>28&15]+yr[i>>24&15]+yr[i>>20&15]+yr[i>>16&15]+yr[i>>12&15]+yr[i>>8&15]+yr[i>>4&15]+yr[i&15]};Ad.prototype.toString=Ad.prototype.hex;Ad.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255]};Ad.prototype.array=Ad.prototype.digest;Ad.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};let SX=!1;const Stt=t=>(SX||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join(`
`)),SX=!0),new Ad(!0).update(t).hex()),Ett=(...t)=>Stt(t.join("_"));class Ntt{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:Ett})}makeDefaultKeyEncoder(e){this.keyEncoder=e}}const _tt=new Map;class NB extends Ntt{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,n){return Promise.resolve(this.cache.get(this.keyEncoder(e,n))??null)}async update(e,n,r){this.cache.set(this.keyEncoder(e,n),r)}static global(){return new NB(_tt)}}class nfe extends Xy{}class Ctt extends nfe{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new hc(this.value)]}}class Ttt extends nfe{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return nde(this.messages)}toChatMessages(){return this.messages}}var ZR={};ZR.byteLength=Ptt;ZR.toByteArray=Rtt;ZR.fromByteArray=Itt;var Vf=[],nc=[],Dtt=typeof Uint8Array<"u"?Uint8Array:Array,_V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var P0=0,ktt=_V.length;P0<ktt;++P0)Vf[P0]=_V[P0],nc[_V.charCodeAt(P0)]=P0;nc[45]=62;nc[95]=63;function rfe(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Ptt(t){var e=rfe(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Att(t,e,n){return(e+n)*3/4-n}function Rtt(t){var e,n=rfe(t),r=n[0],i=n[1],a=new Dtt(Att(t,r,i)),s=0,o=i>0?r-4:r,l;for(l=0;l<o;l+=4)e=nc[t.charCodeAt(l)]<<18|nc[t.charCodeAt(l+1)]<<12|nc[t.charCodeAt(l+2)]<<6|nc[t.charCodeAt(l+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=nc[t.charCodeAt(l)]<<2|nc[t.charCodeAt(l+1)]>>4,a[s++]=e&255),i===1&&(e=nc[t.charCodeAt(l)]<<10|nc[t.charCodeAt(l+1)]<<4|nc[t.charCodeAt(l+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function Ott(t){return Vf[t>>18&63]+Vf[t>>12&63]+Vf[t>>6&63]+Vf[t&63]}function jtt(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(Ott(r));return i.join("")}function Itt(t){for(var e,n=t.length,r=n%3,i=[],a=16383,s=0,o=n-r;s<o;s+=a)i.push(jtt(t,s,s+a>o?o:s+a));return r===1?(e=t[n-1],i.push(Vf[e>>2]+Vf[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Vf[e>>10]+Vf[e>>4&63]+Vf[e<<2&63]+"=")),i.join("")}var Mtt=Object.defineProperty,Vtt=(t,e,n)=>e in t?Mtt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$tt=(t,e,n)=>(Vtt(t,e+"",n),n);function Ltt(t,e){let n=Array.from({length:t.length},(r,i)=>({start:i,end:i+1}));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){const a=t.slice(n[i].start,n[i+1].end),s=e.get(a.join(","));s!=null&&(r==null||s<r[0])&&(r=[s,i])}if(r!=null){const i=r[1];n[i]={start:n[i].start,end:n[i+1].end},n.splice(i+1,1)}else break}return n}function Ftt(t,e){return t.length===1?[e.get(t.join(","))]:Ltt(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function Btt(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var T5=class{constructor(t,e){Mt(this,"specialTokens");Mt(this,"inverseSpecialTokens");Mt(this,"patStr");Mt(this,"textEncoder",new TextEncoder);Mt(this,"textDecoder",new TextDecoder("utf-8"));Mt(this,"rankMap",new Map);Mt(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{const[a,s,...o]=i.split(" "),l=Number.parseInt(s,10);return o.forEach((c,f)=>r[c]=l+f),r},{});for(const[r,i]of Object.entries(n)){const a=ZR.toByteArray(r);this.rankMap.set(a.join(","),i),this.textMap.set(i,a)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,a])=>(r[a]=this.textEncoder.encode(i),r),{})}encode(t,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),i=T5.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(n==="all"?Object.keys(this.specialTokens).filter(c=>!s.has(c)):n);if(o.size>0){const c=T5.specialTokenRegex([...o]),f=t.match(c);if(f!=null)throw new Error(`The text contains a special token that is not allowed: ${f[0]}`)}let l=0;for(;;){let c=null,f=l;for(;i.lastIndex=f,c=i.exec(t),!(c==null||s.has(c[0]));)f=c.index+1;const h=(c==null?void 0:c.index)??t.length;for(const p of t.substring(l,h).matchAll(r)){const v=this.textEncoder.encode(p[0]),y=this.rankMap.get(v.join(","));if(y!=null){a.push(y);continue}a.push(...Ftt(v,this.rankMap))}if(c==null)break;let m=this.specialTokens[c[0]];a.push(m),l=c.index+c[0].length}return a}decode(t){const e=[];let n=0;for(let a=0;a<t.length;++a){const s=t[a],o=this.textMap.get(s)??this.inverseSpecialTokens[s];o!=null&&(e.push(o),n+=o.length)}const r=new Uint8Array(n);let i=0;for(const a of e)r.set(a,i),i+=a.length;return this.textDecoder.decode(r)}},ife=T5;$tt(ife,"specialTokenRegex",t=>new RegExp(t.map(e=>Btt(e)).join("|"),"g"));function Utt(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}const _D={},Wtt=new gB({});async function ztt(t){return t in _D||(_D[t]=Wtt.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new ife(e)).catch(e=>{throw delete _D[t],e})),await _D[t]}async function Htt(t){return ztt(Utt(t))}const Gtt=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;function QR(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const Ktt=()=>!1;class Ytt extends ms{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??Ktt(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class Jtt extends Ytt{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:n,...r}){const{cache:i,...a}=r;super({callbacks:e??n,...a}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i=="object"?this.cache=i:i?this.cache=NB.global():this.cache=void 0,this.caller=new gB(r??{})}async getNumTokens(e){let n;typeof e=="string"?n=e:n=e.map(i=>typeof i=="string"?i:i.type==="text"&&"text"in i?i.text:"").join("");let r=Math.ceil(n.length/4);if(!this._encoding)try{this._encoding=await Htt("modelName"in this?Gtt(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{r=this._encoding.encode(n).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new Ctt(e):Array.isArray(e)?new Ttt(e.map(dE)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([s,o])=>o!==void 0).map(([s,o])=>`${s}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class Ig extends ms{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,n){const r=ii(n);return this.func&&await this.func(e,r),this._callWithConfig(i=>Promise.resolve(i),e,r)}async*transform(e,n){const r=ii(n);let i,a=!0;for await(const s of this._transformStreamWithConfig(e,o=>o,r))if(yield s,a)if(i===void 0)i=s;else try{i=GR(i,s)}catch{i=void 0,a=!1}this.func&&i!==void 0&&await this.func(i,r)}static assign(e){return new Yde(new wx({steps:e}))}}function CV(t){const e=[];for(const n of t){let r=n;if(Array.isArray(n.content))for(let i=0;i<n.content.length;i++){const a=n.content[i];(fJe(a)||hJe(a))&&r===n&&(r=new n.constructor({...r,content:[...n.content.slice(0,i),mJe(a),...n.content.slice(i+1)]}))}e.push(r)}return e}class jf extends Jtt{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[n,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=n.signal,[n,r]}async invoke(e,n){const r=jf._convertInputToPromptValue(e);return(await this.generatePrompt([r],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,n,r){throw new Error("Not implemented.")}async*_streamIterator(e,n){var r;if(this._streamResponseChunks===jf.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,n);else{const a=jf._convertInputToPromptValue(e).toChatMessages(),[s,o]=this._separateRunnableConfigFromCallOptionsCompat(n),l={...s.metadata,...this.getLsParams(o)},c=await Cl.configure(s.callbacks,this.callbacks,s.tags,this.tags,l,this.metadata,{verbose:this.verbose}),f={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:1},h=await(c==null?void 0:c.handleChatModelStart(this.toJSON(),[CV(a)],s.runId,void 0,f,void 0,void 0,s.runName));let m,p;try{for await(const v of this._streamResponseChunks(a,o,h==null?void 0:h[0])){if(v.message.id==null){const y=(r=h==null?void 0:h.at(0))==null?void 0:r.runId;y!=null&&v.message._updateId(`run-${y}`)}v.message.response_metadata={...v.generationInfo,...v.message.response_metadata},yield v.message,m?m=m.concat(v):m=v,cq(v.message)&&v.message.usage_metadata!==void 0&&(p={tokenUsage:{promptTokens:v.message.usage_metadata.input_tokens,completionTokens:v.message.usage_metadata.output_tokens,totalTokens:v.message.usage_metadata.total_tokens}})}}catch(v){throw await Promise.all((h??[]).map(y=>y==null?void 0:y.handleLLMError(v))),v}await Promise.all((h??[]).map(v=>v==null?void 0:v.handleLLMEnd({generations:[[m]],llmOutput:p})))}}getLsParams(e){const n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:n}}async _generateUncached(e,n,r,i){var h,m;const a=e.map(p=>p.map(dE));let s;if(i!==void 0&&i.length===a.length)s=i;else{const p={...r.metadata,...this.getLsParams(n)},v=await Cl.configure(r.callbacks,this.callbacks,r.tags,this.tags,p,this.metadata,{verbose:this.verbose}),y={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1};s=await(v==null?void 0:v.handleChatModelStart(this.toJSON(),a.map(CV),r.runId,void 0,y,void 0,void 0,r.runName))}const o=[],l=[];if(!!(s!=null&&s[0].handlers.find(MZe))&&!this.disableStreaming&&a.length===1&&this._streamResponseChunks!==jf.prototype._streamResponseChunks)try{const p=await this._streamResponseChunks(a[0],n,s==null?void 0:s[0]);let v,y;for await(const x of p){if(x.message.id==null){const S=(h=s==null?void 0:s.at(0))==null?void 0:h.runId;S!=null&&x.message._updateId(`run-${S}`)}v===void 0?v=x:v=GR(v,x),cq(x.message)&&x.message.usage_metadata!==void 0&&(y={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}if(v===void 0)throw new Error("Received empty response from chat model call.");o.push([v]),await(s==null?void 0:s[0].handleLLMEnd({generations:o,llmOutput:y}))}catch(p){throw await(s==null?void 0:s[0].handleLLMError(p)),p}else{const p=await Promise.allSettled(a.map((v,y)=>this._generate(v,{...n,promptIndex:y},s==null?void 0:s[y])));await Promise.all(p.map(async(v,y)=>{var x,S,_;if(v.status==="fulfilled"){const N=v.value;for(const k of N.generations){if(k.message.id==null){const P=(x=s==null?void 0:s.at(0))==null?void 0:x.runId;P!=null&&k.message._updateId(`run-${P}`)}k.message.response_metadata={...k.generationInfo,...k.message.response_metadata}}return N.generations.length===1&&(N.generations[0].message.response_metadata={...N.llmOutput,...N.generations[0].message.response_metadata}),o[y]=N.generations,l[y]=N.llmOutput,(S=s==null?void 0:s[y])==null?void 0:S.handleLLMEnd({generations:[N.generations],llmOutput:N.llmOutput})}else return await((_=s==null?void 0:s[y])==null?void 0:_.handleLLMError(v.reason)),Promise.reject(v.reason)}))}const f={generations:o,llmOutput:l.length?(m=this._combineLLMOutput)==null?void 0:m.call(this,...l):void 0};return Object.defineProperty(f,Yq,{value:s?{runIds:s==null?void 0:s.map(p=>p.runId)}:void 0,configurable:!0}),f}async _generateCached({messages:e,cache:n,llmStringKey:r,parsedOptions:i,handledOptions:a}){const s=e.map(x=>x.map(dE)),o={...a.metadata,...this.getLsParams(i)},l=await Cl.configure(a.callbacks,this.callbacks,a.tags,this.tags,o,this.metadata,{verbose:this.verbose}),c={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},f=await(l==null?void 0:l.handleChatModelStart(this.toJSON(),s.map(CV),a.runId,void 0,c,void 0,void 0,a.runName)),h=[],p=(await Promise.allSettled(s.map(async(x,S)=>{const _=jf._convertInputToPromptValue(x).toString(),N=await n.lookup(_,r);return N==null&&h.push(S),N}))).map((x,S)=>({result:x,runManager:f==null?void 0:f[S]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),v=[];await Promise.all(p.map(async({result:x,runManager:S},_)=>{if(x.status==="fulfilled"){const N=x.value;return v[_]=N.map(k=>("message"in k&&v_(k.message)&&gx(k.message)&&(k.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),k.generationInfo={...k.generationInfo,tokenUsage:{}},k)),N.length&&await(S==null?void 0:S.handleLLMNewToken(N[0].text)),S==null?void 0:S.handleLLMEnd({generations:[N]},void 0,void 0,void 0,{cached:!0})}else return await(S==null?void 0:S.handleLLMError(x.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(x.reason)}));const y={generations:v,missingPromptIndices:h,startedRunManagers:f};return Object.defineProperty(y,Yq,{value:f?{runIds:f==null?void 0:f.map(x=>x.runId)}:void 0,configurable:!0}),y}async generate(e,n,r){let i;Array.isArray(n)?i={stop:n}:i=n;const a=e.map(v=>v.map(dE)),[s,o]=this._separateRunnableConfigFromCallOptionsCompat(i);if(s.callbacks=s.callbacks??r,!this.cache)return this._generateUncached(a,o,s);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),{generations:f,missingPromptIndices:h,startedRunManagers:m}=await this._generateCached({messages:a,cache:l,llmStringKey:c,parsedOptions:o,handledOptions:s});let p={};if(h.length>0){const v=await this._generateUncached(h.map(y=>a[y]),o,s,m!==void 0?h.map(y=>m==null?void 0:m[y]):void 0);await Promise.all(v.generations.map(async(y,x)=>{const S=h[x];f[S]=y;const _=jf._convertInputToPromptValue(a[S]).toString();return l.update(_,c,y)})),p=v.llmOutput??{}}return{generations:f,llmOutput:p}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,n,r){const i=e.map(a=>a.toChatMessages());return this.generate(i,n,r)}async call(e,n,r){return(await this.generate([e.map(dE)],n,r)).generations[0][0].message}async callPrompt(e,n,r){const i=e.toChatMessages();return this.call(i,n,r)}async predictMessages(e,n,r){return this.call(e,n,r)}async predict(e,n,r){const i=new hc(e),a=await this.call([i],n,r);if(typeof a.content!="string")throw new Error("Cannot use predict when output is not a string.");return a.content}withStructuredOutput(e,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n!=null&&n.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,i=n==null?void 0:n.name,a=Hde(r)??"A function available to call.",s=n==null?void 0:n.method,o=n==null?void 0:n.includeRaw;if(s==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let l=i??"extract",c;ON(r)?c=[{type:"function",function:{name:l,description:a,parameters:dg(r)}}]:("name"in r&&(l=r.name),c=[{type:"function",function:{name:l,description:a,parameters:r}}]);const f=this.bindTools(c),h=x_.from(y=>{if(!y.tool_calls||y.tool_calls.length===0)throw new Error("No tool calls found in the response.");const x=y.tool_calls.find(S=>S.name===l);if(!x)throw new Error(`No tool call found with name ${l}.`);return x.args});if(!o)return f.pipe(h).withConfig({runName:"StructuredOutput"});const m=Ig.assign({parsed:(y,x)=>h.invoke(y.raw,x)}),p=Ig.assign({parsed:()=>null}),v=m.withFallbacks({fallbacks:[p]});return bd.from([{raw:f},v]).withConfig({runName:"StructuredOutputRunnable"})}}function MN(t){if(typeof t=="object"&&t!==null){const e={...t};"additionalProperties"in e&&delete e.additionalProperties,"$schema"in e&&delete e.$schema;for(const n in e)n in e&&(Array.isArray(e[n])?e[n]=e[n].map(MN):typeof e[n]=="object"&&e[n]!==null&&(e[n]=MN(e[n])));return e}return t}function afe(t){const e=MN(yB(t)),{$schema:n,...r}=e;return r}function qtt(t){const e=MN(t),{$schema:n,...r}=e;return r}function Xtt(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function Ztt(t){return t!==void 0&&ms.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function Qtt(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(ON(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function eO(t){return Qtt(t)||Ztt(t)||Xtt(t)}function ent(t,e){const n=typeof e=="number"?void 0:e;return{name:t.name,description:t.description,parameters:dg(t.schema),...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}}function tnt(t){const e=t._getType();return vx.isInstance(t)?t.role:e==="tool"?e:t.name??e}function nnt(t){switch(t){case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${t}`)}}function rnt(t){if("mimeType"in t&&"data"in t)return{inlineData:{mimeType:t.mimeType,data:t.data}};if("mimeType"in t&&"fileUri"in t)return{fileData:{mimeType:t.mimeType,fileUri:t.fileUri}};throw new Error("Invalid media content")}function int(t,e){if(typeof t.content=="string"&&t.content!=="")return[{text:t.content}];let n=[],r=[],i=[];return"tool_calls"in t&&Array.isArray(t.tool_calls)&&t.tool_calls.length>0?n=t.tool_calls.map(a=>({functionCall:{name:a.name,args:a.args}})):t.getType()==="tool"&&t.name&&t.content?r=[{functionResponse:{name:t.name,response:t.content}}]:Array.isArray(t.content)&&(i=t.content.map(a=>{var s;if(a.type==="text")return{text:a.text};if(a.type==="executableCode")return{executableCode:a.executableCode};if(a.type==="codeExecutionResult")return{codeExecutionResult:a.codeExecutionResult};if(a.type==="image_url"){if(!e)throw new Error("This model does not support images");let o;if(typeof a.image_url=="string")o=a.image_url;else if(typeof a.image_url=="object"&&"url"in a.image_url)o=a.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");const[l,c]=o.split(",");if(!l.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");const[f,h]=l.replace(/^data:/,"").split(";");if(h!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:c,mimeType:f}}}else{if(a.type==="media")return rnt(a);if(a.type==="tool_use")return{functionCall:{name:a.name,args:a.input}};if((s=a.type)!=null&&s.includes("/")&&a.type.split("/").length===2&&"data"in a&&typeof a.data=="string")return{inlineData:{mimeType:a.type,data:a.data}}}throw new Error(`Unknown content type ${a.type}`)})),[...i,...n,...r]}function EX(t,e,n=!1){return t.reduce((r,i,a)=>{if(!v_(i))throw new Error("Unsupported message input");const s=tnt(i);if(s==="system"&&a!==0)throw new Error("System message should be the first one");const o=nnt(s),l=r.content[r.content.length];if(!r.mergeWithPreviousContent&&l&&l.role===o)throw new Error("Google Generative AI requires alternate messages between authors");const c=int(i,e);if(r.mergeWithPreviousContent){const m=r.content[r.content.length-1];if(!m)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return m.parts.push(...c),{mergeWithPreviousContent:!1,content:r.content}}let f=o;(f==="function"||f==="system"&&!n)&&(f="user");const h={role:f,parts:c};return{mergeWithPreviousContent:s==="system"&&!n,content:[...r.content,h]}},{content:[],mergeWithPreviousContent:!1}).content}function ant(t,e){var c,f,h;if(!t.candidates||t.candidates.length===0||!t.candidates[0])return{generations:[],llmOutput:{filters:t.promptFeedback}};const n=t.functionCalls(),[r]=t.candidates,{content:i,...a}=r;let s;(i==null?void 0:i.parts.length)===1&&i.parts[0].text?s=i.parts[0].text:s=i.parts.map(m=>"text"in m?{type:"text",text:m.text}:"executableCode"in m?{type:"executableCode",executableCode:m.executableCode}:"codeExecutionResult"in m?{type:"codeExecutionResult",codeExecutionResult:m.codeExecutionResult}:m);let o="";return typeof s=="string"?o=s:"text"in s[0]&&(o=s[0].text),{generations:[{text:o,message:new Zy({content:s,tool_calls:n==null?void 0:n.map(m=>({...m,type:"tool_call"})),additional_kwargs:{...a},usage_metadata:e==null?void 0:e.usageMetadata}),generationInfo:a}],llmOutput:{tokenUsage:{promptTokens:(c=e==null?void 0:e.usageMetadata)==null?void 0:c.input_tokens,completionTokens:(f=e==null?void 0:e.usageMetadata)==null?void 0:f.output_tokens,totalTokens:(h=e==null?void 0:e.usageMetadata)==null?void 0:h.total_tokens}}}}function snt(t,e){if(!t.candidates||t.candidates.length===0)return null;const n=t.functionCalls(),[r]=t.candidates,{content:i,...a}=r;let s;i!=null&&i.parts&&i.parts.every(c=>"text"in c)?s=i.parts.map(c=>c.text).join(""):i.parts&&(s=i.parts.map(c=>"text"in c?{type:"text",text:c.text}:"executableCode"in c?{type:"executableCode",executableCode:c.executableCode}:"codeExecutionResult"in c?{type:"codeExecutionResult",codeExecutionResult:c.codeExecutionResult}:c));let o="";s&&typeof s=="string"?o=s:s&&typeof s=="object"&&"text"in s[0]&&(o=s[0].text);const l=[];return n&&l.push(...n.map(c=>({...c,args:JSON.stringify(c.args),index:e.index,type:"tool_call_chunk"}))),new jg({text:o,message:new Ya({content:s||"",name:i?i.role:void 0,tool_call_chunks:l,additional_kwargs:{},usage_metadata:e.usageMetadata}),generationInfo:a})}function ont(t){return t.every(e=>"functionDeclarations"in e&&Array.isArray(e.functionDeclarations))?t:[{functionDeclarations:t.map(e=>{if(eO(e)){const n=afe(e.schema);return{name:e.name,description:e.description,parameters:n}}return QR(e)?{name:e.function.name,description:e.function.description??"A function available to call.",parameters:qtt(e.function.parameters)}:e})}]}class _B extends ms{parseResultWithPrompt(e,n,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,n){return typeof e=="string"?this._callWithConfig(async(r,i)=>this.parseResult([{text:r}],i==null?void 0:i.callbacks),e,{...n,runType:"parser"}):this._callWithConfig(async(r,i)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],i==null?void 0:i.callbacks),e,{...n,runType:"parser"})}}class sfe extends _B{parseResult(e,n){return this.parse(e[0].text,n)}async parseWithPrompt(e,n,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class Yw extends Error{constructor(e,n,r,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=n,this.observation=r,this.sendToLLM=i,i&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");ede(this,"OUTPUT_PARSING_FAILURE")}}class lnt extends sfe{async*_transform(e){for await(const n of e)typeof n=="string"?yield this.parseResult([{text:n}]):yield this.parseResult([{message:n,text:this._baseMessageToString(n)}])}async*transform(e,n){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...n,runType:"parser"})}}class ofe extends lnt{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let a;if(wJe(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new jg({message:i,text:i.content})}else if(v_(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new jg({message:TJe(i),text:i.content})}else a=new Kw({text:i});r===void 0?r=a:r=r.concat(a);const s=await this.parsePartialResult([r]);s!=null&&!S5(s,n)&&(this.diff?yield this._diff(n,s):yield s,n=s)}}getFormatInstructions(){return""}}class NX extends sfe{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=Ed(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,oo().describe(i)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(dg(this.schema))}
\`\`\`
`}async parse(e){var n,r;try{const i=e.trim(),s=(((n=i.match(/^```(?:json)?\s*([\s\S]*?)```/))==null?void 0:n[1])||((r=i.match(/```json\s*([\s\S]*?)```/))==null?void 0:r[1])||i).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(o,l)=>`"${l.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await zde(this.schema,JSON.parse(s))}catch(i){throw new Yw(`Failed to parse. Text: "${e}". Error: ${i}`,e)}}}class _X extends ofe{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,n){return this.diff?super._concatOutputChunks(e,n):n}_diff(e,n){if(n)return e?qJe(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return aq(e[0].text)}async parse(e){return aq(e,JSON.parse)}getFormatInstructions(){return""}}class CX extends _B{static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","google_genai","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const n=await this.zodSchema.safeParseAsync(e);if(n.success)return n.data;throw new Yw(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.errors)}`,JSON.stringify(e,null,2))}async parseResult(e){const n=e.flatMap(a=>{const{message:s}=a;return!("tool_calls"in s)||!Array.isArray(s.tool_calls)?[]:s.tool_calls});if(n[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");const[r]=n;return await this._validateResult(r.args)}}function TX(t,e){const n=unt(t),r=dnt(n,e);return{tools:n,toolConfig:r}}function unt(t){let e=[];const n=[];return t.forEach(i=>{if(eO(i)){const[a]=ont([i]);a.functionDeclarations&&e.push(...a.functionDeclarations)}else if(QR(i)){const{functionDeclarations:a}=cnt(i);if(a)e.push(...a);else throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool")}else n.push(i)}),n.find(i=>"functionDeclarations"in i)?n.map(i=>{if((e==null?void 0:e.length)>0&&"functionDeclarations"in i){const a={functionDeclarations:[...i.functionDeclarations||[],...e]};return e=[],a}return i}):[...n,...e.length>0?[{functionDeclarations:e}]:[]]}function cnt(t){return{functionDeclarations:[{name:t.function.name,description:t.function.description,parameters:MN(t.function.parameters)}]}}function dnt(t,e){if(!t.length||!e)return;const{toolChoice:n,allowedFunctionNames:r}=e,i={any:mw.ANY,auto:mw.AUTO,none:mw.NONE};if(n&&["any","auto","none"].includes(n))return{functionCallingConfig:{mode:i[n]??"MODE_UNSPECIFIED",allowedFunctionNames:r}};if(typeof n=="string"||r)return{functionCallingConfig:{mode:mw.ANY,allowedFunctionNames:[...r??[],...n&&typeof n=="string"?[n]:[]]}}}class lfe extends jf{static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get lc_aliases(){return{apiKey:"google_api_key"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")}constructor(e){var n,r;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","google_genai"]}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gemini-pro"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gemini-pro"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxOutputTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"safetySettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"convertSystemMessageToHumanContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=((n=e==null?void 0:e.model)==null?void 0:n.replace(/^models\//,""))??((r=e==null?void 0:e.modelName)==null?void 0:r.replace(/^models\//,""))??this.model,this.model=this.modelName,this.maxOutputTokens=(e==null?void 0:e.maxOutputTokens)??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.temperature&&(this.temperature<0||this.temperature>2))throw new Error("`temperature` must be in the range of [0.0,2.0]");if(this.topP=(e==null?void 0:e.topP)??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=(e==null?void 0:e.topK)??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=(e==null?void 0:e.stopSequences)??this.stopSequences,this.apiKey=(e==null?void 0:e.apiKey)??ro("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=(e==null?void 0:e.safetySettings)??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(a=>a.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=(e==null?void 0:e.streaming)??this.streaming,this.client=new xX(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{candidateCount:1,stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...e!=null&&e.json?{responseMimeType:"application/json"}:{}}},{apiVersion:e==null?void 0:e.apiVersion,baseUrl:e==null?void 0:e.baseUrl}),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage}useCachedContent(e,n,r){this.apiKey&&(this.client=new xX(this.apiKey).getGenerativeModelFromCachedContent(e,n,r))}get useSystemInstruction(){return typeof this.convertSystemMessageToHumanContent=="boolean"?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return this.modelName==="gemini-1.0-pro-001"||this.modelName.startsWith("gemini-pro-vision")||this.modelName.startsWith("gemini-1.0-pro-vision")?!1:this.modelName!=="gemini-pro"}getLsParams(e){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:e.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(e,n){var r;return this.bind({tools:(r=TX(e))==null?void 0:r.tools,...n})}invocationParams(e){var r;const n=(r=e==null?void 0:e.tools)!=null&&r.length?TX(e.tools,{toolChoice:e.tool_choice,allowedFunctionNames:e.allowedFunctionNames}):void 0;return{...n!=null&&n.tools?{tools:n.tools}:{},...n!=null&&n.toolConfig?{toolConfig:n.toolConfig}:{}}}async _generate(e,n,r){var f;const i=EX(e,this._isMultimodalModel,this.useSystemInstruction);let a=i;if(i[0].role==="system"){const[h]=i;this.client.systemInstruction=h,a=i.slice(1)}const s=this.invocationParams(n);if(this.streaming){const h={},m=this._streamResponseChunks(e,n,r),p={};for await(const y of m){const x=((f=y.generationInfo)==null?void 0:f.completion)??0;p[x]===void 0?p[x]=y:p[x]=p[x].concat(y)}return{generations:Object.entries(p).sort(([y],[x])=>parseInt(y,10)-parseInt(x,10)).map(([y,x])=>x),llmOutput:{estimatedTokenUsage:h}}}const o=await this.completionWithRetry({...s,contents:a});let l;if("usageMetadata"in o.response){const h=o.response.usageMetadata;l={input_tokens:h.promptTokenCount??0,output_tokens:h.candidatesTokenCount??0,total_tokens:h.totalTokenCount??0}}const c=ant(o.response,{usageMetadata:l});return await(r==null?void 0:r.handleLLMNewToken(c.generations[0].text??"")),c}async*_streamResponseChunks(e,n,r){const i=EX(e,this._isMultimodalModel,this.useSystemInstruction);let a=i;if(i[0].role==="system"){const[h]=i;this.client.systemInstruction=h,a=i.slice(1)}const o={...this.invocationParams(n),contents:a},l=await this.caller.callWithOptions({signal:n==null?void 0:n.signal},async()=>{const{stream:h}=await this.client.generateContentStream(o);return h});let c,f=0;for await(const h of l){if("usageMetadata"in h&&this.streamUsage!==!1&&n.streamUsage!==!1){const p=h.usageMetadata;if(!c)c={input_tokens:p.promptTokenCount??0,output_tokens:p.candidatesTokenCount??0,total_tokens:p.totalTokenCount??0};else{const v=(p.candidatesTokenCount??0)-c.output_tokens;c={input_tokens:0,output_tokens:v,total_tokens:v}}}const m=snt(h,{usageMetadata:c,index:f});f+=1,m&&(yield m,await(r==null?void 0:r.handleLLMNewToken(m.text??"")))}}async completionWithRetry(e,n){return this.caller.callWithOptions({signal:n==null?void 0:n.signal},async()=>{var r;try{return await this.client.generateContent(e)}catch(i){throw(r=i.message)!=null&&r.includes("400 Bad Request")&&(i.status=400),i}})}withStructuredOutput(e,n){const r=e,i=n==null?void 0:n.name,a=n==null?void 0:n.method,s=n==null?void 0:n.includeRaw;if(a==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "functionCalling" as a method.');let o=i??"extract",l,c;if(vet(r)){const v=afe(r);c=[{functionDeclarations:[{name:o,description:v.description??"A function available to call.",parameters:v}]}],l=new CX({returnSingle:!0,keyName:o,zodSchema:r})}else{let v;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(v=r,o=r.name):v={name:o,description:r.description??"",parameters:r},c=[{functionDeclarations:[v]}],l=new CX({returnSingle:!0,keyName:o})}const f=this.bind({tools:c,tool_choice:o});if(!s)return f.pipe(l).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});const h=Ig.assign({parsed:(v,y)=>l.invoke(v.raw,y)}),m=Ig.assign({parsed:()=>null}),p=h.withFallbacks({fallbacks:[m]});return bd.from([{raw:f},p]).withConfig({runName:"StructuredOutputRunnable"})}}class ufe{constructor(){Mt(this,"model");const e="AIzaSyBntgDi_Ae0BRg2emcR93FHqVzkdiHwP8g";this.model=new lfe({modelName:"gemini-2.5-pro",temperature:.1,apiKey:e})}async matchParagraphs(e,n){const r=n.split(/\n\n+/).filter(a=>a.trim().length>0);if(r.length===0)throw new Error("No paragraphs found in English text");const i=this.createMatchingPrompt(e,r);try{console.log("Invoking paragraph matching model...");const a=await this.model.invoke(i);return console.log("Model response received"),this.parseMatchingResult(a.content,r)}catch(a){throw console.error("Error matching paragraphs:",a),a instanceof Error&&console.error("Error details:",a.message,a.stack),a}}createMatchingPrompt(e,n){const r=n.map((i,a)=>`[EN-${a}]
${i}`).join(`

---

`);return`You are a precise paragraph alignment expert for Korean-to-English translations.

TASK: Given the Korean source text and English translation paragraphs (already split by \\n\\n), your job is to:
1. Split the Korean text into the SAME NUMBER of paragraphs as the English text
2. Each Korean paragraph should correspond to exactly one English paragraph
3. Return the Korean paragraphs in order, maintaining the 1:1 correspondence

IMPORTANT RULES:
- The number of Korean paragraphs MUST equal the number of English paragraphs (${n.length})
- Preserve the sequential order - KR paragraph [i] matches EN paragraph [i]
- Split Korean text at appropriate sentence boundaries to match the content flow
- If Korean text naturally has different breaks, adjust to match English structure
- Do NOT translate or modify text - only split into paragraphs

ENGLISH PARAGRAPHS (${n.length} paragraphs):
${r}

KOREAN SOURCE TEXT:
${e}

OUTPUT FORMAT (JSON):
Return a JSON object with exactly ${n.length} Korean paragraphs in the "paragraphs" array:
{
  "paragraphs": [
    "Korean paragraph 0 text here",
    "Korean paragraph 1 text here",
    ...
  ]
}

The order matters: paragraphs[0] corresponds to [EN-0], paragraphs[1] to [EN-1], etc.

Return ONLY the JSON object, no other text.`}parseMatchingResult(e,n){try{const r=e.match(/\{[\s\S]*\}/);if(!r)throw new Error("No JSON found in response");const i=JSON.parse(r[0]);if(!i.paragraphs||!Array.isArray(i.paragraphs))throw new Error("Invalid response format: missing paragraphs array");const a=i.paragraphs;if(a.length!==n.length)if(console.warn(`Paragraph count mismatch: English=${n.length}, Korean=${a.length}`),a.length<n.length)for(;a.length<n.length;)a.push("");else a.splice(n.length);const s=n.map((o,l)=>({englishIndex:l,koreanIndex:l}));return{englishParagraphs:n,koreanParagraphs:a,matches:s}}catch(r){throw console.error("Error parsing matching result:",r),console.error("Content:",e),new Error(`Failed to parse matching result: ${r}`)}}}function cfe(t,e){if(t.function===void 0)return;let n;if(e!=null&&e.partial)try{n=aB(t.function.arguments??"{}")}catch{return}else try{n=JSON.parse(t.function.arguments)}catch(i){throw new Yw([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const r={name:t.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function fnt(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function hnt(t,e){var n,r;return{name:(n=t.function)==null?void 0:n.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}class mnt extends ofe{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var s;const r=e[0].message;let i;if(gx(r)&&((s=r.tool_calls)!=null&&s.length)?i=r.tool_calls.map(o=>{const{id:l,...c}=o;return this.returnId?{id:l,...c}:c}):r.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(l=>cfe(l,{returnId:this.returnId,partial:n}))),!i)return[];const a=[];for(const o of i)if(o!==void 0){const l={type:o.name,args:o.args,id:o.id};a.push(l)}return a}}class DX extends mnt{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){var r;if(this.zodSchema===void 0)return e;const n=await Wde(this.zodSchema,e);if(n.success)return n.data;throw new Yw(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((r=n.error)==null?void 0:r.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(a=>a.type===this.keyName);let i=r;if(r.length)return this.returnId||(i=r.map(a=>a.args)),this.returnSingle?i[0]:i}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(s=>s.type===this.keyName);let i=r;return r.length?(this.returnId||(i=r.map(s=>s.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(s=>this._validateResult(s)))):void 0}}function pnt(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:i,baseURL:a,azureADTokenProvider:s,azureOpenAIEndpoint:o}=t;if((r||s)&&i&&e)return`${i}/${e}`;if((r||s)&&o&&e)return`${o}/openai/deployments/${e}`;if(r||s){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${e}`}return a}function CD(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function kX(t){let e;return t.constructor.name===dR.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===hu.name?(e=new Error(t.message),e.name="AbortError"):t.status===400&&t.message.includes("tool_calls")?e=CD(t,"INVALID_TOOL_RESULTS"):t.status===401?e=CD(t,"MODEL_AUTHENTICATION"):t.status===429?e=CD(t,"MODEL_RATE_LIMIT"):t.status===404?e=CD(t,"MODEL_NOT_FOUND"):e=t,e}function gnt(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function vnt(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function ynt(t){const e=["namespace functions {",""];for(const n of t)n.description&&e.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(e.push(`type ${n.name} = (_: {`),e.push(dfe(n.parameters,0)),e.push("}) => any;")):e.push(`type ${n.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function dfe(t,e){var r;const n=[];for(const[i,a]of Object.entries(t.properties??{}))a.description&&e<2&&n.push(`// ${a.description}`),(r=t.required)!=null&&r.includes(i)?n.push(`${i}: ${oA(a,e)},`):n.push(`${i}?: ${oA(a,e)},`);return n.map(i=>" ".repeat(e)+i).join(`
`)}function oA(t,e){if(vnt(t))return t.anyOf.map(n=>oA(n,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",dfe(t,e+2),"}"].join(`
`);case"array":return t.items?`${oA(t.items,e)}[]`:"any[]";default:return""}}function bnt(t,e){let n;if(eO(t)){const r=rHe({name:t.name,parameters:t.schema,description:t.description});r.function.parameters?n={type:r.type,function:{name:r.function.name,description:r.function.description,parameters:r.function.parameters,...(e==null?void 0:e.strict)!==void 0?{strict:e.strict}:{}}}:n={type:"function",function:ent(t,e)}}else n=t;return(e==null?void 0:e.strict)!==void 0&&(n.function.strict=e.strict),n}function wnt(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function ffe(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!vx.isInstance(t))throw new Error("Invalid generic chat message");return wnt(t)}default:throw new Error(`Unknown message type: ${e}`)}}function xnt(t,e,n){const r=t.tool_calls;switch(t.role){case"assistant":{const i=[],a=[];for(const l of r??[])try{i.push(cfe(l,{returnId:!0}))}catch(c){a.push(hnt(l,c.message))}const s={function_call:t.function_call,tool_calls:r};n!==void 0&&(s.__raw_response=e);const o={model_name:e.model,...e.system_fingerprint?{usage:{...e.usage},system_fingerprint:e.system_fingerprint}:{}};return t.audio&&(s.audio=t.audio),new Zy({content:t.content||"",tool_calls:i,invalid_tool_calls:a,additional_kwargs:s,response_metadata:o,id:e.id})}default:return new vx(t.content||"",t.role??"unknown")}}function Snt(t,e,n,r){var l,c;const i=t.role??n,a=t.content??"";let s;t.function_call?s={function_call:t.function_call}:t.tool_calls?s={tool_calls:t.tool_calls}:s={},r&&(s.__raw_response=e),t.audio&&(s.audio={...t.audio,index:e.choices[0].index});const o={usage:{...e.usage}};if(i==="user")return new LR({content:a,response_metadata:o});if(i==="assistant"){const f=[];if(Array.isArray(t.tool_calls))for(const h of t.tool_calls)f.push({name:(l=h.function)==null?void 0:l.name,args:(c=h.function)==null?void 0:c.arguments,id:h.id,index:h.index,type:"tool_call_chunk"});return new Ya({content:a,tool_call_chunks:f,additional_kwargs:s,id:e.id,response_metadata:o})}else return i==="system"?new kN({content:a,response_metadata:o}):i==="developer"?new kN({content:a,response_metadata:o,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new $R({content:a,additional_kwargs:s,name:t.name,response_metadata:o}):i==="tool"?new sB({content:a,additional_kwargs:s,tool_call_id:t.tool_call_id,response_metadata:o}):new VR({content:a,role:i,response_metadata:o})}function PX(t,e){return t.flatMap(n=>{var a;let r=ffe(n);r==="system"&&(e!=null&&e.startsWith("o1"))&&(r="developer");const i={role:r,content:n.content};if(n.name!=null&&(i.name=n.name),n.additional_kwargs.function_call!=null&&(i.function_call=n.additional_kwargs.function_call,i.content=null),gx(n)&&((a=n.tool_calls)!=null&&a.length)?(i.tool_calls=n.tool_calls.map(fnt),i.content=null):(n.additional_kwargs.tool_calls!=null&&(i.tool_calls=n.additional_kwargs.tool_calls),n.tool_call_id!=null&&(i.tool_call_id=n.tool_call_id)),n.additional_kwargs.audio&&typeof n.additional_kwargs.audio=="object"&&"id"in n.additional_kwargs.audio){const s={role:"assistant",audio:{id:n.additional_kwargs.audio.id}};return[i,s]}return i})}function AX(t,e){return QR(t)?(e==null?void 0:e.strict)!==void 0?{...t,function:{...t.function,strict:e.strict}}:t:bnt(t,e)}class Ent extends jf{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,n){var r,i,a,s,o,l,c,f,h;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.openAIApiKey)??((r=e==null?void 0:e.configuration)==null?void 0:r.apiKey)??ro("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.azureOpenAIApiKey=(e==null?void 0:e.azureOpenAIApiKey)??ro("AZURE_OPENAI_API_KEY"),this.azureADTokenProvider=(e==null?void 0:e.azureADTokenProvider)??void 0,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw new Error("OpenAI or Azure OpenAI API key or Token Provider not found");if(this.azureOpenAIApiInstanceName=(e==null?void 0:e.azureOpenAIApiInstanceName)??ro("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e==null?void 0:e.azureOpenAIApiDeploymentName)??ro("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(e==null?void 0:e.azureOpenAIApiVersion)??ro("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??ro("AZURE_OPENAI_BASE_PATH"),this.organization=((i=e==null?void 0:e.configuration)==null?void 0:i.organization)??ro("OPENAI_ORGANIZATION"),this.azureOpenAIEndpoint=(e==null?void 0:e.azureOpenAIEndpoint)??ro("AZURE_OPENAI_ENDPOINT"),this.modelName=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.model=this.modelName,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.maxTokens=e==null?void 0:e.maxTokens,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this==null?void 0:this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoningEffort=e==null?void 0:e.reasoningEffort,this.azureOpenAIApiKey||this.azureADTokenProvider){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath&&!this.azureOpenAIEndpoint)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName&&this.azureOpenAIBasePath){const m=this.azureOpenAIBasePath.split("/openai/deployments/");if(m.length===2){const[,p]=m;this.azureOpenAIApiDeploymentName=p}}if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.apiKey=this.apiKey??"",this.streamUsage=!1}this.model==="o1"&&(this.disableStreaming=!0),this.streaming=(e==null?void 0:e.streaming)??!1,this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.clientConfig={apiKey:this.apiKey,organization:this.organization,baseURL:(n==null?void 0:n.basePath)??((a=e==null?void 0:e.configuration)==null?void 0:a.basePath),dangerouslyAllowBrowser:!0,defaultHeaders:((s=n==null?void 0:n.baseOptions)==null?void 0:s.headers)??((l=(o=e==null?void 0:e.configuration)==null?void 0:o.baseOptions)==null?void 0:l.headers),defaultQuery:((c=n==null?void 0:n.baseOptions)==null?void 0:c.params)??((h=(f=e==null?void 0:e.configuration)==null?void 0:f.baseOptions)==null?void 0:h.params),...n,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling)}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,n){let r;return(n==null?void 0:n.strict)!==void 0?r=n.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.bind({tools:e.map(i=>AX(i,{strict:r})),...n})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&TD(e.json_schema.schema)?KF(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}invocationParams(e,n){var o;let r;(e==null?void 0:e.strict)!==void 0?r=e.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling);let i={};(e==null?void 0:e.stream_options)!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||n!=null&&n.streaming)&&(i={stream_options:{include_usage:!0}});const a={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(o=e==null?void 0:e.tools)!=null&&o.length?e.tools.map(l=>AX(l,{strict:r})):void 0,tool_choice:gnt(e==null?void 0:e.tool_choice),response_format:this.createResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...i,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs};(e==null?void 0:e.prediction)!==void 0&&(a.prediction=e.prediction);const s=(e==null?void 0:e.reasoning_effort)??this.reasoningEffort;return s!==void 0&&(a.reasoning_effort=s),a}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,n,r){var c,f,h,m,p,v,y,x,S,_;const i=PX(e,this.model),a={...this.invocationParams(n,{streaming:!0}),messages:i,stream:!0};let s;const o=await this.completionWithRetry(a,n);let l;for await(const N of o){const k=(c=N==null?void 0:N.choices)==null?void 0:c[0];if(N.usage&&(l=N.usage),!k)continue;const{delta:P}=k;if(!P)continue;const O=Snt(P,N,s,this.__includeRawResponse);s=P.role??s;const A={prompt:n.promptIndex??0,completion:k.index??0};if(typeof O.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const T={...A};k.finish_reason!=null&&(T.finish_reason=k.finish_reason,T.system_fingerprint=N.system_fingerprint,T.model_name=N.model),this.logprobs&&(T.logprobs=k.logprobs);const L=new jg({message:O,text:O.content,generationInfo:T});yield L,await(r==null?void 0:r.handleLLMNewToken(L.text??"",A,void 0,void 0,void 0,{chunk:L}))}if(l){const N={...((f=l.prompt_tokens_details)==null?void 0:f.audio_tokens)!==null&&{audio:(h=l.prompt_tokens_details)==null?void 0:h.audio_tokens},...((m=l.prompt_tokens_details)==null?void 0:m.cached_tokens)!==null&&{cache_read:(p=l.prompt_tokens_details)==null?void 0:p.cached_tokens}},k={...((v=l.completion_tokens_details)==null?void 0:v.audio_tokens)!==null&&{audio:(y=l.completion_tokens_details)==null?void 0:y.audio_tokens},...((x=l.completion_tokens_details)==null?void 0:x.reasoning_tokens)!==null&&{reasoning:(S=l.completion_tokens_details)==null?void 0:S.reasoning_tokens}};yield new jg({message:new Ya({content:"",response_metadata:{usage:{...l}},usage_metadata:{input_tokens:l.prompt_tokens,output_tokens:l.completion_tokens,total_tokens:l.total_tokens,...Object.keys(N).length>0&&{input_token_details:N},...Object.keys(k).length>0&&{output_token_details:k}}}),text:""})}if((_=n.signal)!=null&&_.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,n,r){var o,l;const i={},a=this.invocationParams(n),s=PX(e,this.model);if(a.stream){const c=this._streamResponseChunks(e,n,r),f={};for await(const x of c){x.message.response_metadata={...x.generationInfo,...x.message.response_metadata};const S=((o=x.generationInfo)==null?void 0:o.completion)??0;f[S]===void 0?f[S]=x:f[S]=f[S].concat(x)}const h=Object.entries(f).sort(([x],[S])=>parseInt(x,10)-parseInt(S,10)).map(([x,S])=>S),{functions:m,function_call:p}=this.invocationParams(n),v=await this.getEstimatedTokenCountFromPrompt(e,m,p),y=await this.getNumTokensFromGenerations(h);return i.input_tokens=v,i.output_tokens=y,i.total_tokens=v+y,{generations:h,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{let c;n.response_format&&n.response_format.type==="json_schema"?c=await this.betaParsedCompletionWithRetry({...a,stream:!1,messages:s},{signal:n==null?void 0:n.signal,...n==null?void 0:n.options}):c=await this.completionWithRetry({...a,stream:!1,messages:s},{signal:n==null?void 0:n.signal,...n==null?void 0:n.options});const{completion_tokens:f,prompt_tokens:h,total_tokens:m,prompt_tokens_details:p,completion_tokens_details:v}=(c==null?void 0:c.usage)??{};f&&(i.output_tokens=(i.output_tokens??0)+f),h&&(i.input_tokens=(i.input_tokens??0)+h),m&&(i.total_tokens=(i.total_tokens??0)+m),((p==null?void 0:p.audio_tokens)!==null||(p==null?void 0:p.cached_tokens)!==null)&&(i.input_token_details={...(p==null?void 0:p.audio_tokens)!==null&&{audio:p==null?void 0:p.audio_tokens},...(p==null?void 0:p.cached_tokens)!==null&&{cache_read:p==null?void 0:p.cached_tokens}}),((v==null?void 0:v.audio_tokens)!==null||(v==null?void 0:v.reasoning_tokens)!==null)&&(i.output_token_details={...(v==null?void 0:v.audio_tokens)!==null&&{audio:v==null?void 0:v.audio_tokens},...(v==null?void 0:v.reasoning_tokens)!==null&&{reasoning:v==null?void 0:v.reasoning_tokens}});const y=[];for(const x of(c==null?void 0:c.choices)??[]){const _={text:((l=x.message)==null?void 0:l.content)??"",message:xnt(x.message??{role:"assistant"},c,this.__includeRawResponse)};_.generationInfo={...x.finish_reason?{finish_reason:x.finish_reason}:{},...x.logprobs?{logprobs:x.logprobs}:{}},gx(_.message)&&(_.message.usage_metadata=i),_.message=new Zy(Object.fromEntries(Object.entries(_.message).filter(([N])=>!N.startsWith("lc_")))),y.push(_)}return{generations:y,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,n,r){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(n&&r!=="auto"){const a=ynt(n);i+=await this.getNumTokens(a),i+=9}return n&&e.find(a=>a._getType()==="system")&&(i-=4),r==="none"?i+=1:typeof r=="object"&&(i+=await this.getNumTokens(r.name)+4),i}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var i;return(i=r.message.additional_kwargs)!=null&&i.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,i)=>r+i,0)}async getNumTokensFromMessages(e){let n=0,r=0,i=0;this.model==="gpt-3.5-turbo-0301"?(r=4,i=-1):(r=3,i=1);const a=await Promise.all(e.map(async s=>{var m,p,v,y,x,S;const o=await this.getNumTokens(s.content),l=await this.getNumTokens(ffe(s)),c=s.name!==void 0?i+await this.getNumTokens(s.name):0;let f=o+r+l+c;const h=s;if(h._getType()==="function"&&(f-=2),(m=h.additional_kwargs)!=null&&m.function_call&&(f+=3),(p=h==null?void 0:h.additional_kwargs.function_call)!=null&&p.name&&(f+=await this.getNumTokens((v=h.additional_kwargs.function_call)==null?void 0:v.name)),(y=h.additional_kwargs.function_call)!=null&&y.arguments)try{f+=await this.getNumTokens(JSON.stringify(JSON.parse((x=h.additional_kwargs.function_call)==null?void 0:x.arguments)))}catch(_){console.error("Error parsing function arguments",_,JSON.stringify(h.additional_kwargs.function_call)),f+=await this.getNumTokens((S=h.additional_kwargs.function_call)==null?void 0:S.arguments)}return n+=f,f}));return n+=3,{totalCount:n,countPerMessage:a}}async completionWithRetry(e,n){const r=this._getClientOptions(n);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,r)}catch(i){throw kX(i)}})}async betaParsedCompletionWithRetry(e,n){const r=this._getClientOptions(n);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,r)}catch(i){throw kX(i)}})}_getClientOptions(e){if(!this.client){const r={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL,azureOpenAIEndpoint:this.azureOpenAIEndpoint},i=pnt(r),a={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};a.baseURL||delete a.baseURL,this.client=new Qn(a)}const n={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.query={"api-version":this.azureOpenAIApiVersion,...n.query}),n}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((n,r)=>(r&&r.tokenUsage&&(n.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,n){let r,i,a,s;Nnt(e)?(r=e.schema,i=e.name,a=e.method,s=e.includeRaw):(r=e,i=n==null?void 0:n.name,a=n==null?void 0:n.method,s=n==null?void 0:n.includeRaw);let o,l;if((n==null?void 0:n.strict)!==void 0&&a==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(a==="jsonMode")o=this.bind({response_format:{type:"json_object"}}),TD(r)?l=NX.fromZodSchema(r):l=new _X;else if(a==="jsonSchema")o=this.bind({response_format:{type:"json_schema",json_schema:{name:i??"extract",description:r.description,schema:r,strict:n==null?void 0:n.strict}}}),TD(r)?l=NX.fromZodSchema(r):l=new _X;else{let m=i??"extract";if(TD(r)){const p=yB(r);o=this.bind({tools:[{type:"function",function:{name:m,description:p.description,parameters:p}}],tool_choice:{type:"function",function:{name:m}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),l=new DX({returnSingle:!0,keyName:m,zodSchema:r})}else{let p;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(p=r,m=r.name):(m=r.title??m,p={name:m,description:r.description??"",parameters:r}),o=this.bind({tools:[{type:"function",function:p}],tool_choice:{type:"function",function:{name:m}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),l=new DX({returnSingle:!0,keyName:m})}}if(!s)return o.pipe(l);const c=Ig.assign({parsed:(m,p)=>l.invoke(m.raw,p)}),f=Ig.assign({parsed:()=>null}),h=c.withFallbacks({fallbacks:[f]});return bd.from([{raw:o},h])}}function TD(t){return typeof(t==null?void 0:t.parse)=="function"}function Nnt(t){return t!==void 0&&typeof t.schema=="object"}function Nn(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function at(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let hfe=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hfe=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function VN(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const D5=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class gr extends Error{}class mo extends gr{constructor(e,n,r,i){super(`${mo.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("request-id"),this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new tO({message:r,cause:D5(n)});const a=n;return e===400?new pfe(e,a,r,i):e===401?new gfe(e,a,r,i):e===403?new vfe(e,a,r,i):e===404?new yfe(e,a,r,i):e===409?new bfe(e,a,r,i):e===422?new wfe(e,a,r,i):e===429?new xfe(e,a,r,i):e>=500?new Sfe(e,a,r,i):new mo(e,a,r,i)}}class wd extends mo{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class tO extends mo{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class mfe extends tO{constructor({message:e}={}){super({message:e??"Request timed out."})}}class pfe extends mo{}class gfe extends mo{}class vfe extends mo{}class yfe extends mo{}class bfe extends mo{}class wfe extends mo{}class xfe extends mo{}class Sfe extends mo{}const _nt=/^[a-z][a-z0-9+.-]*:/i,Cnt=t=>_nt.test(t);let k5=t=>(k5=Array.isArray,k5(t)),RX=k5;function OX(t){return typeof t!="object"?{}:t??{}}function Tnt(t){if(!t)return!0;for(const e in t)return!1;return!0}function Dnt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const knt=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new gr(`${t} must be an integer`);if(e<0)throw new gr(`${t} must be a positive integer`);return e},Efe=t=>{try{return JSON.parse(t)}catch{return}},Pnt=t=>new Promise(e=>setTimeout(e,t)),K0="0.65.0",Ant=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Rnt(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Ont=()=>{var n;const t=Rnt();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":K0,"X-Stainless-OS":IX(Deno.build.os),"X-Stainless-Arch":jX(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":K0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":K0,"X-Stainless-OS":IX(globalThis.process.platform??"unknown"),"X-Stainless-Arch":jX(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=jnt();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":K0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":K0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function jnt(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${a}.${s}`}}}return null}const jX=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",IX=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let MX;const Int=()=>MX??(MX=Ont());function Mnt(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Nfe(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function _fe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Nfe({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function CB(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Vnt(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const $nt=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function Lnt(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let VX;function TB(t){let e;return(VX??(e=new globalThis.TextEncoder,VX=e.encode.bind(e)))(t)}let $X;function LX(t){let e;return($X??(e=new globalThis.TextDecoder,$X=e.decode.bind(e)))(t)}var au,su;class E_{constructor(){au.set(this,void 0),su.set(this,void 0),Nn(this,au,new Uint8Array),Nn(this,su,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?TB(e):e;Nn(this,au,Lnt([at(this,au,"f"),n]));const r=[];let i;for(;(i=Fnt(at(this,au,"f"),at(this,su,"f")))!=null;){if(i.carriage&&at(this,su,"f")==null){Nn(this,su,i.index);continue}if(at(this,su,"f")!=null&&(i.index!==at(this,su,"f")+1||i.carriage)){r.push(LX(at(this,au,"f").subarray(0,at(this,su,"f")-1))),Nn(this,au,at(this,au,"f").subarray(at(this,su,"f"))),Nn(this,su,null);continue}const a=at(this,su,"f")!==null?i.preceding-1:i.preceding,s=LX(at(this,au,"f").subarray(0,a));r.push(s),Nn(this,au,at(this,au,"f").subarray(i.index)),Nn(this,su,null)}return r}flush(){return at(this,au,"f").length?this.decode(`
`):[]}}au=new WeakMap,su=new WeakMap;E_.NEWLINE_CHARS=new Set([`
`,"\r"]);E_.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Fnt(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Bnt(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const lA={off:0,error:200,warn:300,info:400,debug:500},FX=(t,e,n)=>{if(t){if(Dnt(lA,t))return t;$o(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(lA))}`)}};function hE(){}function DD(t,e,n){return!e||lA[t]>lA[n]?hE:e[t].bind(e)}const Unt={error:hE,warn:hE,info:hE,debug:hE};let BX=new WeakMap;function $o(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Unt;const r=BX.get(e);if(r&&r[0]===n)return r[1];const i={error:DD("error",e,n),warn:DD("warn",e,n),info:DD("info",e,n),debug:DD("debug",e,n)};return BX.set(e,[n,i]),i}const ay=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var AS;class Uf{constructor(e,n,r){this.iterator=e,AS.set(this,void 0),this.controller=n,Nn(this,AS,r)}static fromSSEResponse(e,n,r){let i=!1;const a=r?$o(r):console;async function*s(){if(i)throw new gr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of Wnt(e,n)){if(l.event==="completion")try{yield JSON.parse(l.data)}catch(c){throw a.error("Could not parse message into JSON:",l.data),a.error("From chunk:",l.raw),c}if(l.event==="message_start"||l.event==="message_delta"||l.event==="message_stop"||l.event==="content_block_start"||l.event==="content_block_delta"||l.event==="content_block_stop")try{yield JSON.parse(l.data)}catch(c){throw a.error("Could not parse message into JSON:",l.data),a.error("From chunk:",l.raw),c}if(l.event!=="ping"&&l.event==="error")throw new mo(void 0,Efe(l.data)??l.data,void 0,e.headers)}o=!0}catch(l){if(VN(l))return;throw l}finally{o||n.abort()}}return new Uf(s,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*a(){const o=new E_,l=CB(e);for await(const c of l)for(const f of o.decode(c))yield f;for(const c of o.flush())yield c}async function*s(){if(i)throw new gr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of a())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(VN(l))return;throw l}finally{o||n.abort()}}return new Uf(s,n,r)}[(AS=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const s=r.next();e.push(s),n.push(s)}return a.shift()}});return[new Uf(()=>i(e),this.controller,at(this,AS,"f")),new Uf(()=>i(n),this.controller,at(this,AS,"f"))]}toReadableStream(){const e=this;let n;return Nfe({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const s=TB(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*Wnt(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new gr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new gr("Attempted to iterate over a response with no body");const n=new Hnt,r=new E_,i=CB(t.body);for await(const a of znt(i))for(const s of r.decode(a)){const o=n.decode(s);o&&(yield o)}for(const a of r.flush()){const s=n.decode(a);s&&(yield s)}}async function*znt(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?TB(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let a;for(;(a=Bnt(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class Hnt{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Gnt(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Gnt(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Cfe(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,s=await(async()=>{var h;if(e.options.stream)return $o(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):Uf.fromSSEResponse(n,e.controller);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const o=n.headers.get("content-type"),l=(h=o==null?void 0:o.split(";")[0])==null?void 0:h.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const m=await n.json();return Tfe(m,n)}return await n.text()})();return $o(t).debug(`[${r}] response parsed`,ay({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-a})),s}function Tfe(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var mE;class nO extends Promise{constructor(e,n,r=Cfe){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,mE.set(this,void 0),Nn(this,mE,e)}_thenUnwrap(e){return new nO(at(this,mE,"f"),this.responsePromise,async(n,r)=>Tfe(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(at(this,mE,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}mE=new WeakMap;var kD;class Knt{constructor(e,n,r,i){kD.set(this,void 0),Nn(this,kD,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new gr("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await at(this,kD,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(kD=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Ynt extends nO{constructor(e,n,r){super(e,n,async(i,a)=>new r(i,a.response,await Cfe(i,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class N_ extends Knt{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var n;if((n=this.options.query)!=null&&n.before_id){const r=this.first_id;return r?{...this.options,query:{...OX(this.options.query),before_id:r}}:null}const e=this.last_id;return e?{...this.options,query:{...OX(this.options.query),after_id:e}}:null}}const Dfe=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function _w(t,e,n){return Dfe(),new File(t,e??"unknown_file",n)}function Mk(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const kfe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Jnt=async(t,e)=>({...t,body:await Xnt(t.body,e)}),UX=new WeakMap;function qnt(t){const e=typeof t=="function"?t:t.fetch,n=UX.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new i(a).text()}catch{return!0}})();return UX.set(e,r),r}const Xnt=async(t,e)=>{if(!await qnt(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>P5(n,r,i))),n},Znt=t=>t instanceof Blob&&"name"in t,P5=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response){let r={};const i=n.headers.get("Content-Type");i&&(r={type:i}),t.append(e,_w([await n.blob()],Mk(n),r))}else if(kfe(n))t.append(e,_w([await new Response(_fe(n)).blob()],Mk(n)));else if(Znt(n))t.append(e,_w([n],Mk(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(r=>P5(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>P5(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},Pfe=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Qnt=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Pfe(t),ert=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function trt(t,e,n){if(Dfe(),t=await t,e||(e=Mk(t)),Qnt(t))return t instanceof File&&e==null&&n==null?t:_w([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...n});if(ert(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),_w(await A5(i),e,n)}const r=await A5(t);if(!(n!=null&&n.type)){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n={...n,type:i})}return _w(r,e,n)}async function A5(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Pfe(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(kfe(t))for await(const r of t)e.push(...await A5(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${nrt(t)}`)}return e}function nrt(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Im{constructor(e){this._client=e}}const Afe=Symbol.for("brand.privateNullableHeaders");function*rrt(t){if(!t)return;if(Afe in t){const{values:r,nulls:i}=t;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():RX(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=RX(r[1])?r[1]:[r[1]];let s=!1;for(const o of a)o!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,o])}}const Ai=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[a,s]of rrt(r)){const o=a.toLowerCase();i.has(o)||(e.delete(a),i.add(o)),s===null?(e.delete(a),n.add(o)):(e.append(a,s),n.delete(o))}}return{[Afe]:!0,values:e,nulls:n}};function Rfe(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const WX=Object.freeze(Object.create(null)),irt=(t=Rfe)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],s=n.reduce((f,h,m)=>{var y;/[?#]/.test(h)&&(i=!0);const p=r[m];let v=(i?encodeURIComponent:t)(""+p);return m!==r.length&&(p==null||typeof p=="object"&&p.toString===((y=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??WX)??WX))==null?void 0:y.toString))&&(v=p+"",a.push({start:f.length+h.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),f+h+(m===r.length?"":v)},""),o=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(o))!==null;)a.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(a.sort((f,h)=>f.start-h.start),a.length>0){let f=0;const h=a.reduce((m,p)=>{const v=" ".repeat(p.start-f),y="^".repeat(p.length);return f=p.start+p.length,m+v+y},"");throw new gr(`Path parameters result in path with invalid segments:
${a.map(m=>m.error).join(`
`)}
${s}
${h}`)}return s},_d=irt(Rfe);class Ofe extends Im{list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/files",N_,{query:i,...n,headers:Ai([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n==null?void 0:n.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(_d`/v1/files/${e}`,{...r,headers:Ai([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r==null?void 0:r.headers])})}download(e,n={},r){const{betas:i}=n??{};return this._client.get(_d`/v1/files/${e}/content`,{...r,headers:Ai([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}retrieveMetadata(e,n={},r){const{betas:i}=n??{};return this._client.get(_d`/v1/files/${e}`,{...r,headers:Ai([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r==null?void 0:r.headers])})}upload(e,n){const{betas:r,...i}=e;return this._client.post("/v1/files",Jnt({body:i,...n,headers:Ai([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n==null?void 0:n.headers])},this._client))}}let jfe=class extends Im{retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(_d`/v1/models/${e}?beta=true`,{...r,headers:Ai([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},r==null?void 0:r.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/models?beta=true",N_,{query:i,...n,headers:Ai([{...(r==null?void 0:r.toString())!=null?{"anthropic-beta":r==null?void 0:r.toString()}:void 0},n==null?void 0:n.headers])})}};class rO{constructor(e,n){this.iterator=e,this.controller=n}async*decoder(){const e=new E_;for await(const n of this.iterator)for(const r of e.decode(n))yield JSON.parse(r);for(const n of e.flush())yield JSON.parse(n)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,n){if(!e.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new gr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new gr("Attempted to iterate over a response with no body");return new rO(CB(e.body),n)}}let Ife=class extends Im{create(e,n){const{betas:r,...i}=e;return this._client.post("/v1/messages/batches?beta=true",{body:i,...n,headers:Ai([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n==null?void 0:n.headers])})}retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(_d`/v1/messages/batches/${e}?beta=true`,{...r,headers:Ai([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r==null?void 0:r.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",N_,{query:i,...n,headers:Ai([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n==null?void 0:n.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(_d`/v1/messages/batches/${e}?beta=true`,{...r,headers:Ai([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r==null?void 0:r.headers])})}cancel(e,n={},r){const{betas:i}=n??{};return this._client.post(_d`/v1/messages/batches/${e}/cancel?beta=true`,{...r,headers:Ai([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r==null?void 0:r.headers])})}async results(e,n={},r){const i=await this.retrieve(e);if(!i.results_url)throw new gr(`No batch \`results_url\`; Has it finished processing? ${i.processing_status} - ${i.id}`);const{betas:a}=n??{};return this._client.get(i.results_url,{...r,headers:Ai([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r==null?void 0:r.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((s,o)=>rO.fromResponse(o.response,o.controller))}};const art=t=>{let e=0,n=[];for(;e<t.length;){let r=t[e];if(r==="\\"){e++;continue}if(r==="{"){n.push({type:"brace",value:"{"}),e++;continue}if(r==="}"){n.push({type:"brace",value:"}"}),e++;continue}if(r==="["){n.push({type:"paren",value:"["}),e++;continue}if(r==="]"){n.push({type:"paren",value:"]"}),e++;continue}if(r===":"){n.push({type:"separator",value:":"}),e++;continue}if(r===","){n.push({type:"delimiter",value:","}),e++;continue}if(r==='"'){let o="",l=!1;for(r=t[++e];r!=='"';){if(e===t.length){l=!0;break}if(r==="\\"){if(e++,e===t.length){l=!0;break}o+=r+t[e],r=t[++e]}else o+=r,r=t[++e]}r=t[++e],l||n.push({type:"string",value:o});continue}if(r&&/\s/.test(r)){e++;continue}let a=/[0-9]/;if(r&&a.test(r)||r==="-"||r==="."){let o="";for(r==="-"&&(o+=r,r=t[++e]);r&&a.test(r)||r===".";)o+=r,r=t[++e];n.push({type:"number",value:o});continue}let s=/[a-z]/i;if(r&&s.test(r)){let o="";for(;r&&s.test(r)&&e!==t.length;)o+=r,r=t[++e];if(o=="true"||o=="false"||o==="null")n.push({type:"name",value:o});else{e++;continue}continue}e++}return n},Y0=t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),Y0(t);case"number":let n=e.value[e.value.length-1];if(n==="."||n==="-")return t=t.slice(0,t.length-1),Y0(t);case"string":let r=t[t.length-2];if((r==null?void 0:r.type)==="delimiter")return t=t.slice(0,t.length-1),Y0(t);if((r==null?void 0:r.type)==="brace"&&r.value==="{")return t=t.slice(0,t.length-1),Y0(t);break;case"delimiter":return t=t.slice(0,t.length-1),Y0(t)}return t},srt=t=>{let e=[];return t.map(n=>{n.type==="brace"&&(n.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),n.type==="paren"&&(n.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(n=>{n==="}"?t.push({type:"brace",value:"}"}):n==="]"&&t.push({type:"paren",value:"]"})}),t},ort=t=>{let e="";return t.map(n=>{switch(n.type){case"string":e+='"'+n.value+'"';break;default:e+=n.value;break}}),e},Mfe=t=>JSON.parse(ort(srt(Y0(art(t)))));var Zu,Gp,RS,PD,OS,jS,AD,IS,tm,MS,RD,OD,A0,jD,ID,TV,zX,MD,DV,kV,PV,HX;const GX="__json_buf";function KX(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}class uA{constructor(){Zu.add(this),this.messages=[],this.receivedMessages=[],Gp.set(this,void 0),this.controller=new AbortController,RS.set(this,void 0),PD.set(this,()=>{}),OS.set(this,()=>{}),jS.set(this,void 0),AD.set(this,()=>{}),IS.set(this,()=>{}),tm.set(this,{}),MS.set(this,!1),RD.set(this,!1),OD.set(this,!1),A0.set(this,!1),jD.set(this,void 0),ID.set(this,void 0),MD.set(this,e=>{if(Nn(this,RD,!0),VN(e)&&(e=new wd),e instanceof wd)return Nn(this,OD,!0),this._emit("abort",e);if(e instanceof gr)return this._emit("error",e);if(e instanceof Error){const n=new gr(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new gr(String(e)))}),Nn(this,RS,new Promise((e,n)=>{Nn(this,PD,e,"f"),Nn(this,OS,n,"f")})),Nn(this,jS,new Promise((e,n)=>{Nn(this,AD,e,"f"),Nn(this,IS,n,"f")})),at(this,RS,"f").catch(()=>{}),at(this,jS,"f").catch(()=>{})}get response(){return at(this,jD,"f")}get request_id(){return at(this,ID,"f")}async withResponse(){const e=await at(this,RS,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new uA;return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r){const i=new uA;for(const a of n.messages)i._addMessageParam(a);return i._run(()=>i._createMessage(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},at(this,MD,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){var s;const i=r==null?void 0:r.signal;let a;i&&(i.aborted&&this.controller.abort(),a=this.controller.abort.bind(this.controller),i.addEventListener("abort",a));try{at(this,Zu,"m",DV).call(this);const{response:o,data:l}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of l)at(this,Zu,"m",kV).call(this,c);if((s=l.controller.signal)!=null&&s.aborted)throw new wd;at(this,Zu,"m",PV).call(this)}finally{i&&a&&i.removeEventListener("abort",a)}}_connected(e){this.ended||(Nn(this,jD,e),Nn(this,ID,e==null?void 0:e.headers.get("request-id")),at(this,PD,"f").call(this,e),this._emit("connect"))}get ended(){return at(this,MS,"f")}get errored(){return at(this,RD,"f")}get aborted(){return at(this,OD,"f")}abort(){this.controller.abort()}on(e,n){return(at(this,tm,"f")[e]||(at(this,tm,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=at(this,tm,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(at(this,tm,"f")[e]||(at(this,tm,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Nn(this,A0,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Nn(this,A0,!0),await at(this,jS,"f")}get currentMessage(){return at(this,Gp,"f")}async finalMessage(){return await this.done(),at(this,Zu,"m",TV).call(this)}async finalText(){return await this.done(),at(this,Zu,"m",zX).call(this)}_emit(e,...n){if(at(this,MS,"f"))return;e==="end"&&(Nn(this,MS,!0),at(this,AD,"f").call(this));const r=at(this,tm,"f")[e];if(r&&(at(this,tm,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!at(this,A0,"f")&&!(r!=null&&r.length)&&Promise.reject(i),at(this,OS,"f").call(this,i),at(this,IS,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!at(this,A0,"f")&&!(r!=null&&r.length)&&Promise.reject(i),at(this,OS,"f").call(this,i),at(this,IS,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",at(this,Zu,"m",TV).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{at(this,Zu,"m",DV).call(this),this._connected(null);const s=Uf.fromReadableStream(e,this.controller);for await(const o of s)at(this,Zu,"m",kV).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new wd;at(this,Zu,"m",PV).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}[(Gp=new WeakMap,RS=new WeakMap,PD=new WeakMap,OS=new WeakMap,jS=new WeakMap,AD=new WeakMap,IS=new WeakMap,tm=new WeakMap,MS=new WeakMap,RD=new WeakMap,OD=new WeakMap,A0=new WeakMap,jD=new WeakMap,ID=new WeakMap,MD=new WeakMap,Zu=new WeakSet,TV=function(){if(this.receivedMessages.length===0)throw new gr("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},zX=function(){if(this.receivedMessages.length===0)throw new gr("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new gr("stream ended without producing a content block with type=text");return n.join(" ")},DV=function(){this.ended||Nn(this,Gp,void 0)},kV=function(n){if(this.ended)return;const r=at(this,Zu,"m",HX).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const i=r.content.at(-1);switch(n.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",n.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",n.delta.citation,i.citations??[]);break}case"input_json_delta":{KX(i)&&i.input&&this._emit("inputJson",n.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",n.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{Nn(this,Gp,r);break}}},PV=function(){if(this.ended)throw new gr("stream has ended, this shouldn't happen");const n=at(this,Gp,"f");if(!n)throw new gr("request ended without sending any chunks");return Nn(this,Gp,void 0),n},HX=function(n){let r=at(this,Gp,"f");if(n.type==="message_start"){if(r)throw new gr(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new gr(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.container=n.delta.container,r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,r.context_management=n.context_management,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push(n.content_block),r;case"content_block_delta":{const i=r.content.at(n.index);switch(n.delta.type){case"text_delta":{(i==null?void 0:i.type)==="text"&&(r.content[n.index]={...i,text:(i.text||"")+n.delta.text});break}case"citations_delta":{(i==null?void 0:i.type)==="text"&&(r.content[n.index]={...i,citations:[...i.citations??[],n.delta.citation]});break}case"input_json_delta":{if(i&&KX(i)){let a=i[GX]||"";a+=n.delta.partial_json;const s={...i};if(Object.defineProperty(s,GX,{value:a,enumerable:!1,writable:!0}),a)try{s.input=Mfe(a)}catch(o){const l=new gr(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${o}. JSON: ${a}`);at(this,MD,"f").call(this,l)}r.content[n.index]=s}break}case"thinking_delta":{(i==null?void 0:i.type)==="thinking"&&(r.content[n.index]={...i,thinking:i.thinking+n.delta.thinking});break}case"signature_delta":{(i==null?void 0:i.type)==="thinking"&&(r.content[n.index]={...i,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Uf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const Vfe={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};var VD,R0,qv,vl,VS,Tf,om,Kp,$S,R5;function YX(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}class $fe{constructor(e,n,r){VD.add(this),this.client=e,R0.set(this,!1),qv.set(this,!1),vl.set(this,void 0),VS.set(this,void 0),Tf.set(this,void 0),om.set(this,void 0),Kp.set(this,void 0),$S.set(this,0),Nn(this,vl,{params:{...n,messages:structuredClone(n.messages)}}),Nn(this,VS,{...r,headers:Ai([{"x-stainless-helper":"BetaToolRunner"},r==null?void 0:r.headers])}),Nn(this,Kp,YX())}async*[(R0=new WeakMap,qv=new WeakMap,vl=new WeakMap,VS=new WeakMap,Tf=new WeakMap,om=new WeakMap,Kp=new WeakMap,$S=new WeakMap,VD=new WeakSet,Symbol.asyncIterator)](){var e;if(at(this,R0,"f"))throw new gr("Cannot iterate over a consumed stream");Nn(this,R0,!0),Nn(this,qv,!0),Nn(this,om,void 0);try{for(;;){let n;try{if(at(this,vl,"f").params.max_iterations&&at(this,$S,"f")>=at(this,vl,"f").params.max_iterations)break;Nn(this,qv,!1,"f"),Nn(this,Tf,void 0,"f"),Nn(this,om,void 0,"f"),Nn(this,$S,(e=at(this,$S,"f"),e++,e),"f");const{max_iterations:r,...i}=at(this,vl,"f").params;if(i.stream?(n=this.client.beta.messages.stream({...i},at(this,VS,"f")),Nn(this,Tf,n.finalMessage(),"f"),yield n):(Nn(this,Tf,this.client.beta.messages.create({...i,stream:!1},at(this,VS,"f")),"f"),yield at(this,Tf,"f")),!at(this,qv,"f")){const{role:s,content:o}=await at(this,Tf,"f");at(this,vl,"f").params.messages.push({role:s,content:o})}const a=await at(this,VD,"m",R5).call(this,at(this,vl,"f").params.messages.at(-1));if(a&&at(this,vl,"f").params.messages.push(a),!a&&!at(this,qv,"f"))break}finally{n&&n.abort()}}if(!at(this,Tf,"f"))throw new gr("ToolRunner concluded without a message from the server");at(this,Kp,"f").resolve(await at(this,Tf,"f"))}catch(n){throw Nn(this,R0,!1),at(this,Kp,"f").promise.catch(()=>{}),at(this,Kp,"f").reject(n),Nn(this,Kp,YX()),n}}setMessagesParams(e){typeof e=="function"?at(this,vl,"f").params=e(at(this,vl,"f").params):at(this,vl,"f").params=e,Nn(this,qv,!0),Nn(this,om,void 0)}async generateToolResponse(){const e=await at(this,Tf,"f")??this.params.messages.at(-1);return e?at(this,VD,"m",R5).call(this,e):null}done(){return at(this,Kp,"f").promise}async runUntilDone(){if(!at(this,R0,"f"))for await(const e of this);return this.done()}get params(){return at(this,vl,"f").params}pushMessages(...e){this.setMessagesParams(n=>({...n,messages:[...n.messages,...e]}))}then(e,n){return this.runUntilDone().then(e,n)}}R5=async function(e){return at(this,om,"f")!==void 0?at(this,om,"f"):(Nn(this,om,lrt(at(this,vl,"f").params,e)),at(this,om,"f"))};async function lrt(t,e=t.messages.at(-1)){if(!e||e.role!=="assistant"||!e.content||typeof e.content=="string")return null;const n=e.content.filter(i=>i.type==="tool_use");return n.length===0?null:{role:"user",content:await Promise.all(n.map(async i=>{const a=t.tools.find(s=>s.name===i.name);if(!a||!("run"in a))return{type:"tool_result",tool_use_id:i.id,content:`Error: Tool '${i.name}' not found`,is_error:!0};try{let s=i.input;"parse"in a&&a.parse&&(s=a.parse(s));const o=await a.run(s);return{type:"tool_result",tool_use_id:i.id,content:o}}catch(s){return{type:"tool_result",tool_use_id:i.id,content:`Error: ${s instanceof Error?s.message:String(s)}`,is_error:!0}}}))}}const JX={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};let iO=class extends Im{constructor(){super(...arguments),this.batches=new Ife(this._client)}create(e,n){const{betas:r,...i}=e;i.model in JX&&console.warn(`The model '${i.model}' is deprecated and will reach end-of-life on ${JX[i.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let a=this._client._options.timeout;if(!i.stream&&a==null){const s=Vfe[i.model]??void 0;a=this._client.calculateNonstreamingTimeout(i.max_tokens,s)}return this._client.post("/v1/messages?beta=true",{body:i,timeout:a??6e5,...n,headers:Ai([{...(r==null?void 0:r.toString())!=null?{"anthropic-beta":r==null?void 0:r.toString()}:void 0},n==null?void 0:n.headers]),stream:e.stream??!1})}stream(e,n){return uA.createMessage(this,e,n)}countTokens(e,n){const{betas:r,...i}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:i,...n,headers:Ai([{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString()},n==null?void 0:n.headers])})}toolRunner(e,n){return new $fe(this._client,e,n)}};iO.Batches=Ife;iO.BetaToolRunner=$fe;class __ extends Im{constructor(){super(...arguments),this.models=new jfe(this._client),this.messages=new iO(this._client),this.files=new Ofe(this._client)}}__.Models=jfe;__.Messages=iO;__.Files=Ofe;class Lfe extends Im{create(e,n){const{betas:r,...i}=e;return this._client.post("/v1/complete",{body:i,timeout:this._client._options.timeout??6e5,...n,headers:Ai([{...(r==null?void 0:r.toString())!=null?{"anthropic-beta":r==null?void 0:r.toString()}:void 0},n==null?void 0:n.headers]),stream:e.stream??!1})}}var Qu,Yp,LS,$D,FS,BS,LD,US,nm,WS,FD,BD,O0,UD,WD,AV,qX,RV,OV,jV,IV,XX;const ZX="__json_buf";function QX(t){return t.type==="tool_use"||t.type==="server_tool_use"}class cA{constructor(){Qu.add(this),this.messages=[],this.receivedMessages=[],Yp.set(this,void 0),this.controller=new AbortController,LS.set(this,void 0),$D.set(this,()=>{}),FS.set(this,()=>{}),BS.set(this,void 0),LD.set(this,()=>{}),US.set(this,()=>{}),nm.set(this,{}),WS.set(this,!1),FD.set(this,!1),BD.set(this,!1),O0.set(this,!1),UD.set(this,void 0),WD.set(this,void 0),RV.set(this,e=>{if(Nn(this,FD,!0),VN(e)&&(e=new wd),e instanceof wd)return Nn(this,BD,!0),this._emit("abort",e);if(e instanceof gr)return this._emit("error",e);if(e instanceof Error){const n=new gr(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new gr(String(e)))}),Nn(this,LS,new Promise((e,n)=>{Nn(this,$D,e,"f"),Nn(this,FS,n,"f")})),Nn(this,BS,new Promise((e,n)=>{Nn(this,LD,e,"f"),Nn(this,US,n,"f")})),at(this,LS,"f").catch(()=>{}),at(this,BS,"f").catch(()=>{})}get response(){return at(this,UD,"f")}get request_id(){return at(this,WD,"f")}async withResponse(){const e=await at(this,LS,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new cA;return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r){const i=new cA;for(const a of n.messages)i._addMessageParam(a);return i._run(()=>i._createMessage(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},at(this,RV,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){var s;const i=r==null?void 0:r.signal;let a;i&&(i.aborted&&this.controller.abort(),a=this.controller.abort.bind(this.controller),i.addEventListener("abort",a));try{at(this,Qu,"m",OV).call(this);const{response:o,data:l}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of l)at(this,Qu,"m",jV).call(this,c);if((s=l.controller.signal)!=null&&s.aborted)throw new wd;at(this,Qu,"m",IV).call(this)}finally{i&&a&&i.removeEventListener("abort",a)}}_connected(e){this.ended||(Nn(this,UD,e),Nn(this,WD,e==null?void 0:e.headers.get("request-id")),at(this,$D,"f").call(this,e),this._emit("connect"))}get ended(){return at(this,WS,"f")}get errored(){return at(this,FD,"f")}get aborted(){return at(this,BD,"f")}abort(){this.controller.abort()}on(e,n){return(at(this,nm,"f")[e]||(at(this,nm,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=at(this,nm,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(at(this,nm,"f")[e]||(at(this,nm,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Nn(this,O0,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Nn(this,O0,!0),await at(this,BS,"f")}get currentMessage(){return at(this,Yp,"f")}async finalMessage(){return await this.done(),at(this,Qu,"m",AV).call(this)}async finalText(){return await this.done(),at(this,Qu,"m",qX).call(this)}_emit(e,...n){if(at(this,WS,"f"))return;e==="end"&&(Nn(this,WS,!0),at(this,LD,"f").call(this));const r=at(this,nm,"f")[e];if(r&&(at(this,nm,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!at(this,O0,"f")&&!(r!=null&&r.length)&&Promise.reject(i),at(this,FS,"f").call(this,i),at(this,US,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!at(this,O0,"f")&&!(r!=null&&r.length)&&Promise.reject(i),at(this,FS,"f").call(this,i),at(this,US,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",at(this,Qu,"m",AV).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{at(this,Qu,"m",OV).call(this),this._connected(null);const s=Uf.fromReadableStream(e,this.controller);for await(const o of s)at(this,Qu,"m",jV).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new wd;at(this,Qu,"m",IV).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}[(Yp=new WeakMap,LS=new WeakMap,$D=new WeakMap,FS=new WeakMap,BS=new WeakMap,LD=new WeakMap,US=new WeakMap,nm=new WeakMap,WS=new WeakMap,FD=new WeakMap,BD=new WeakMap,O0=new WeakMap,UD=new WeakMap,WD=new WeakMap,RV=new WeakMap,Qu=new WeakSet,AV=function(){if(this.receivedMessages.length===0)throw new gr("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},qX=function(){if(this.receivedMessages.length===0)throw new gr("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new gr("stream ended without producing a content block with type=text");return n.join(" ")},OV=function(){this.ended||Nn(this,Yp,void 0)},jV=function(n){if(this.ended)return;const r=at(this,Qu,"m",XX).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const i=r.content.at(-1);switch(n.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",n.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",n.delta.citation,i.citations??[]);break}case"input_json_delta":{QX(i)&&i.input&&this._emit("inputJson",n.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",n.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{Nn(this,Yp,r);break}}},IV=function(){if(this.ended)throw new gr("stream has ended, this shouldn't happen");const n=at(this,Yp,"f");if(!n)throw new gr("request ended without sending any chunks");return Nn(this,Yp,void 0),n},XX=function(n){let r=at(this,Yp,"f");if(n.type==="message_start"){if(r)throw new gr(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new gr(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push({...n.content_block}),r;case"content_block_delta":{const i=r.content.at(n.index);switch(n.delta.type){case"text_delta":{(i==null?void 0:i.type)==="text"&&(r.content[n.index]={...i,text:(i.text||"")+n.delta.text});break}case"citations_delta":{(i==null?void 0:i.type)==="text"&&(r.content[n.index]={...i,citations:[...i.citations??[],n.delta.citation]});break}case"input_json_delta":{if(i&&QX(i)){let a=i[ZX]||"";a+=n.delta.partial_json;const s={...i};Object.defineProperty(s,ZX,{value:a,enumerable:!1,writable:!0}),a&&(s.input=Mfe(a)),r.content[n.index]=s}break}case"thinking_delta":{(i==null?void 0:i.type)==="thinking"&&(r.content[n.index]={...i,thinking:i.thinking+n.delta.thinking});break}case"signature_delta":{(i==null?void 0:i.type)==="thinking"&&(r.content[n.index]={...i,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Uf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Ffe extends Im{create(e,n){return this._client.post("/v1/messages/batches",{body:e,...n})}retrieve(e,n){return this._client.get(_d`/v1/messages/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/v1/messages/batches",N_,{query:e,...n})}delete(e,n){return this._client.delete(_d`/v1/messages/batches/${e}`,n)}cancel(e,n){return this._client.post(_d`/v1/messages/batches/${e}/cancel`,n)}async results(e,n){const r=await this.retrieve(e);if(!r.results_url)throw new gr(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...n,headers:Ai([{Accept:"application/binary"},n==null?void 0:n.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((i,a)=>rO.fromResponse(a.response,a.controller))}}class DB extends Im{constructor(){super(...arguments),this.batches=new Ffe(this._client)}create(e,n){e.model in eZ&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${eZ[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let r=this._client._options.timeout;if(!e.stream&&r==null){const i=Vfe[e.model]??void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,i)}return this._client.post("/v1/messages",{body:e,timeout:r??6e5,...n,stream:e.stream??!1})}stream(e,n){return cA.createMessage(this,e,n)}countTokens(e,n){return this._client.post("/v1/messages/count_tokens",{body:e,...n})}}const eZ={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};DB.Batches=Ffe;class Bfe extends Im{retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(_d`/v1/models/${e}`,{...r,headers:Ai([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},r==null?void 0:r.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/models",N_,{query:i,...n,headers:Ai([{...(r==null?void 0:r.toString())!=null?{"anthropic-beta":r==null?void 0:r.toString()}:void 0},n==null?void 0:n.headers])})}}var MV={};const zD=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=MV==null?void 0:MV[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var O5,kB,Vk,Ufe;const urt="\\n\\nHuman:",crt="\\n\\nAssistant:";class Oa{constructor({baseURL:e=zD("ANTHROPIC_BASE_URL"),apiKey:n=zD("ANTHROPIC_API_KEY")??null,authToken:r=zD("ANTHROPIC_AUTH_TOKEN")??null,...i}={}){O5.add(this),Vk.set(this,void 0);const a={apiKey:n,authToken:r,...i,baseURL:e||"https://api.anthropic.com"};if(!a.dangerouslyAllowBrowser&&Ant())throw new gr(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=a.baseURL,this.timeout=a.timeout??kB.DEFAULT_TIMEOUT,this.logger=a.logger??console;const s="warn";this.logLevel=s,this.logLevel=FX(a.logLevel,"ClientOptions.logLevel",this)??FX(zD("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??s,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Mnt(),Nn(this,Vk,$nt),this._options=a,this.apiKey=n,this.authToken=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-api-key"))&&!n.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return Ai([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return Ai([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(this.authToken!=null)return Ai([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new gr(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${K0}`}defaultIdempotencyKey(){return`stainless-node-retry-${hfe()}`}makeStatusError(e,n,r,i){return mo.generate(e,n,r,i)}buildURL(e,n,r){const i=!at(this,O5,"m",Ufe).call(this)&&r||this.baseURL,a=Cnt(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Tnt(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new gr("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new nO(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var S,_;const i=await e,a=i.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(i);const{req:s,url:o,timeout:l}=await this.buildRequest(i,{retryCount:a-n});await this.prepareRequest(s,{url:o,options:i});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,h=Date.now();if($o(this).debug(`[${c}] sending request`,ay({retryOfRequestLogID:r,method:i.method,url:o,options:i,headers:s.headers})),(S=i.signal)!=null&&S.aborted)throw new wd;const m=new AbortController,p=await this.fetchWithTimeout(o,s,l,m).catch(D5),v=Date.now();if(p instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if((_=i.signal)!=null&&_.aborted)throw new wd;const k=VN(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return $o(this).info(`[${c}] connection ${k?"timed out":"failed"} - ${N}`),$o(this).debug(`[${c}] connection ${k?"timed out":"failed"} (${N})`,ay({retryOfRequestLogID:r,url:o,durationMs:v-h,message:p.message})),this.retryRequest(i,n,r??c);throw $o(this).info(`[${c}] connection ${k?"timed out":"failed"} - error; no more retries left`),$o(this).debug(`[${c}] connection ${k?"timed out":"failed"} (error; no more retries left)`,ay({retryOfRequestLogID:r,url:o,durationMs:v-h,message:p.message})),k?new mfe:new tO({cause:p})}const y=[...p.headers.entries()].filter(([N])=>N==="request-id").map(([N,k])=>", "+N+": "+JSON.stringify(k)).join(""),x=`[${c}${f}${y}] ${s.method} ${o} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${v-h}ms`;if(!p.ok){const N=await this.shouldRetry(p);if(n&&N){const L=`retrying, ${n} attempts remaining`;return await Vnt(p.body),$o(this).info(`${x} - ${L}`),$o(this).debug(`[${c}] response error (${L})`,ay({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:v-h})),this.retryRequest(i,n,r??c,p.headers)}const k=N?"error; no more retries left":"error; not retryable";$o(this).info(`${x} - ${k}`);const P=await p.text().catch(L=>D5(L).message),O=Efe(P),A=O?void 0:P;throw $o(this).debug(`[${c}] response error (${k})`,ay({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:A,durationMs:Date.now()-h})),this.makeStatusError(p.status,O,A,p.headers)}return $o(this).info(x),$o(this).debug(`[${c}] response start`,ay({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:v-h})),{response:p,options:i,controller:m,requestLogID:c,retryOfRequestLogID:r,startTime:h}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Ynt(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:a,method:s,...o}=n||{};a&&a.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:i.signal,...c?{duplex:"half"}:{},method:"GET",...o};s&&(f.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let a;const s=i==null?void 0:i.get("retry-after-ms");if(s){const l=parseFloat(s);Number.isNaN(l)||(a=l)}const o=i==null?void 0:i.get("retry-after");if(o&&!a){const l=parseFloat(o);Number.isNaN(l)?a=Date.parse(o)-Date.now():a=l*1e3}if(!(a&&0<=a&&a<60*1e3)){const l=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Pnt(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,s=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return s*o*1e3}calculateNonstreamingTimeout(e,n){if(36e5*e/128e3>6e5||n!=null&&e>n)throw new gr("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:a,query:s,defaultBaseURL:o}=r,l=this.buildURL(a,s,o);"timeout"in r&&knt("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:f}=this.buildBody({options:r}),h=await this.buildHeaders({options:e,method:i,bodyHeaders:c,retryCount:n});return{req:{method:i,headers:h,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const s=Ai([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Int(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ai([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:_fe(e)}:at(this,Vk,"f").call(this,{body:e,headers:r})}}kB=Oa,Vk=new WeakMap,O5=new WeakSet,Ufe=function(){return this.baseURL!=="https://api.anthropic.com"};Oa.Anthropic=kB;Oa.HUMAN_PROMPT=urt;Oa.AI_PROMPT=crt;Oa.DEFAULT_TIMEOUT=6e5;Oa.AnthropicError=gr;Oa.APIError=mo;Oa.APIConnectionError=tO;Oa.APIConnectionTimeoutError=mfe;Oa.APIUserAbortError=wd;Oa.NotFoundError=yfe;Oa.ConflictError=bfe;Oa.RateLimitError=xfe;Oa.BadRequestError=pfe;Oa.AuthenticationError=gfe;Oa.InternalServerError=Sfe;Oa.PermissionDeniedError=vfe;Oa.UnprocessableEntityError=wfe;Oa.toFile=trt;class C_ extends Oa{constructor(){super(...arguments),this.completions=new Lfe(this),this.messages=new DB(this),this.models=new Bfe(this),this.beta=new __(this)}}C_.Completions=Lfe;C_.Messages=DB;C_.Models=Bfe;C_.Beta=__;class tZ extends _B{static lc_name(){return"AnthropicToolsOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","anthropic","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){let n=e;if(typeof e=="string")try{n=JSON.parse(e)}catch(i){throw new Yw(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(i.message)}`,e)}else n=e;if(this.zodSchema===void 0)return n;const r=await Wde(this.zodSchema,n);if(r.success)return r.data;throw new Yw(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(r.error.issues)}`,JSON.stringify(n,null,2))}async parseResult(e){const n=e.flatMap(a=>{const{message:s}=a;return Array.isArray(s.content)?Wfe(s.content)[0]:[]});if(n[0]===void 0)throw new Error("No parseable tool calls provided to AnthropicToolsOutputParser.");const[r]=n;return await this._validateResult(r.args)}}function Wfe(t){const e=[];for(const n of t)n.type==="tool_use"&&e.push({name:n.name,args:n.input,id:n.id,type:"tool_call"});return e}function drt(t){if(t)return t==="any"?{type:"any"}:t==="auto"?{type:"auto"}:t==="none"?{type:"none"}:typeof t=="string"?{type:"tool",name:t}:t}function frt(t){return t==null||typeof t!="object"||!("type"in t)||t.type!=="image"||!("source"in t)||typeof t.source!="object"||t.source==null||!("type"in t.source)?!1:t.source.type==="base64"?!(!("media_type"in t.source)||typeof t.source.media_type!="string"||!("data"in t.source)||typeof t.source.data!="string"):t.source.type==="url"?!(!("url"in t.source)||typeof t.source.url!="string"):!1}function nZ(t){const e=Qce({dataUrl:t});if(e)return{type:"base64",media_type:e.mime_type,data:e.data};let n;try{n=new URL(t)}catch{throw new Error([`Malformed image URL: ${JSON.stringify(t)}. Content blocks of type 'image_url' must be a valid http, https, or base64-encoded data URL.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}if(n.protocol==="http:"||n.protocol==="https:")return{type:"url",url:t};throw new Error([`Invalid image URL protocol: ${JSON.stringify(n.protocol)}. Anthropic only supports images as http, https, or base64-encoded data URLs on 'image_url' content blocks.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}function hrt(t){const e=[];for(const n of t)if(n._getType()==="tool")if(typeof n.content=="string"){const r=e[e.length-1];(r==null?void 0:r._getType())==="human"&&Array.isArray(r.content)&&"type"in r.content[0]&&r.content[0].type==="tool_result"?r.content.push({type:"tool_result",content:n.content,tool_use_id:n.tool_call_id}):e.push(new hc({content:[{type:"tool_result",content:n.content,tool_use_id:n.tool_call_id}]}))}else e.push(new hc({content:[{type:"tool_result",...n.content!=null?{content:j5(n)}:{},tool_use_id:n.tool_call_id}]}));else e.push(n);return e}function rZ(t){if(t.id===void 0)throw new Error('Anthropic requires all tool calls to have an "id".');return{type:"tool_use",id:t.id,name:t.name,input:t.args}}const mrt={providerName:"anthropic",fromStandardTextBlock(t){return{type:"text",text:t.text,..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}},fromStandardImageBlock(t){if(t.source_type==="url"){const e=Qce({dataUrl:t.url,asTypedArray:!1});return e?{type:"image",source:{type:"base64",data:e.data,media_type:e.mime_type},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}:{type:"image",source:{type:"url",url:t.url},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}}else{if(t.source_type==="base64")return{type:"image",source:{type:"base64",data:t.data,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}};throw new Error(`Unsupported image source type: ${t.source_type}`)}},fromStandardFileBlock(t){const e=(t.mime_type??"").split(";")[0];if(t.source_type==="url"){if(e==="application/pdf"||e==="")return{type:"document",source:{type:"url",url:t.url,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file url source: ${t.mime_type}`)}else if(t.source_type==="text"){if(e==="text/plain"||e==="")return{type:"document",source:{type:"text",data:t.text,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file text source: ${t.mime_type}`)}else if(t.source_type==="base64"){if(e==="application/pdf"||e==="")return{type:"document",source:{type:"base64",data:t.data,media_type:"application/pdf"},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};if(["image/jpeg","image/png","image/gif","image/webp"].includes(e))return{type:"document",source:{type:"content",content:[{type:"image",source:{type:"base64",data:t.data,media_type:e}}]},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file base64 source: ${t.mime_type}`)}else throw new Error(`Unsupported file source type: ${t.source_type}`)}};function j5(t){const e=["tool_use","tool_result","input_json_delta","server_tool_use","web_search_tool_result","web_search_result"],n=["text","text_delta"],{content:r}=t;return typeof r=="string"?r:r.map(a=>{var o;if(Hw(a))return pJe(a,mrt);const s="cache_control"in a?a.cache_control:void 0;if(a.type==="image_url"){let l;return typeof a.image_url=="string"?l=nZ(a.image_url):l=nZ(a.image_url.url),{type:"image",source:l,...s?{cache_control:s}:{}}}else{if(frt(a))return a;if(a.type==="document")return{...a,...s?{cache_control:s}:{}};if(a.type==="thinking")return{type:"thinking",thinking:a.thinking,signature:a.signature,...s?{cache_control:s}:{}};if(a.type==="redacted_thinking")return{type:"redacted_thinking",data:a.data,...s?{cache_control:s}:{}};if(a.type==="search_result")return{type:"search_result",title:a.title,source:a.source,..."cache_control"in a&&a.cache_control?{cache_control:a.cache_control}:{},..."citations"in a&&a.citations?{citations:a.citations}:{},content:a.content};if(n.find(l=>l===a.type)&&"text"in a)return{type:"text",text:a.text,...s?{cache_control:s}:{},..."citations"in a&&a.citations?{citations:a.citations}:{}};if(e.find(l=>l===a.type)){const l={...a};if("index"in l&&delete l.index,l.type==="input_json_delta"&&(l.type="tool_use"),"input"in l&&typeof l.input=="string")try{l.input=JSON.parse(l.input)}catch{l.input={}}return{...l,...s?{cache_control:s}:{}}}else if("functionCall"in a&&a.functionCall&&typeof a.functionCall=="object"&&gx(t)){const l=(o=t.tool_calls)==null?void 0:o.find(c=>c.name===a.functionCall.name);if(!l)throw new Error(`Could not find tool call for function call ${a.functionCall.name}`);return{id:l.id,type:"tool_use",name:l.name,input:a.functionCall.args}}else throw new Error("Unsupported message content format")}})}function iZ(t){const e=hrt(t);let n;e.length>0&&e[0]._getType()==="system"&&(n=t[0].content);const i=(n!==void 0?e.slice(1):e).map(a=>{var o;let s;if(a._getType()==="human")s="user";else if(a._getType()==="ai")s="assistant";else if(a._getType()==="tool")s="user";else throw a._getType()==="system"?new Error("System messages are only permitted as the first passed message."):new Error(`Message type "${a._getType()}" is not supported.`);if(gx(a)&&((o=a.tool_calls)!=null&&o.length)){if(typeof a.content=="string")return a.content===""?{role:s,content:a.tool_calls.map(rZ)}:{role:s,content:[{type:"text",text:a.content},...a.tool_calls.map(rZ)]};{const{content:l}=a;return!a.tool_calls.every(f=>l.find(h=>(h.type==="tool_use"||h.type==="input_json_delta"||h.type==="server_tool_use")&&h.id===f.id))&&console.warn('The "tool_calls" field on a message is only respected if content is a string.'),{role:s,content:j5(a)}}}else return{role:s,content:j5(a)}});return{messages:prt(i),system:n}}function prt(t){if(!t||t.length<=1)return t;const e=[];let n=t[0];const r=a=>typeof a=="string"?[{type:"text",text:a}]:a,i=a=>a.role!=="user"||typeof a.content=="string"?!1:Array.isArray(a.content)&&a.content.every(s=>s.type==="tool_result");for(let a=1;a<t.length;a+=1){const s=t[a];i(n)&&i(s)?n={...n,content:[...r(n.content),...r(s.content)]}:(e.push(n),n=s)}return e.push(n),e}function grt(t,e){var n;if(t.type==="message_start"){const{content:r,usage:i,...a}=t.message,s={};for(const[h,m]of Object.entries(a))m!=null&&(s[h]=m);const{input_tokens:o,output_tokens:l,...c}=i??{},f={input_tokens:o,output_tokens:l,total_tokens:o+l,input_token_details:{cache_creation:c.cache_creation_input_tokens,cache_read:c.cache_read_input_tokens}};return{chunk:new Ya({content:e.coerceContentToString?"":[],additional_kwargs:s,usage_metadata:e.streamUsage?f:void 0,response_metadata:{usage:{...c}},id:t.message.id})}}else if(t.type==="message_delta"){const r={input_tokens:0,output_tokens:t.usage.output_tokens,total_tokens:t.usage.output_tokens,input_token_details:{cache_creation:t.usage.cache_creation_input_tokens,cache_read:t.usage.cache_read_input_tokens}},i="context_management"in t.delta?{context_management:t.delta.context_management}:void 0;return{chunk:new Ya({content:e.coerceContentToString?"":[],additional_kwargs:{...t.delta},usage_metadata:e.streamUsage?r:void 0,response_metadata:i})}}else if(t.type==="content_block_start"&&["tool_use","document","server_tool_use","web_search_tool_result"].includes(t.content_block.type)){const r=t.content_block;let i;return r.type==="tool_use"?i=[{id:r.id,index:t.index,name:r.name,args:""}]:i=[],{chunk:new Ya({content:e.coerceContentToString?"":[{index:t.index,...t.content_block,input:r.type==="server_tool_use"||r.type==="tool_use"?"":void 0}],additional_kwargs:{},tool_call_chunks:i})}}else if(t.type==="content_block_delta"&&["text_delta","citations_delta","thinking_delta","signature_delta"].includes(t.delta.type)){if(e.coerceContentToString&&"text"in t.delta)return{chunk:new Ya({content:t.delta.text})};{const r=t.delta;return"citation"in r&&(r.citations=[r.citation],delete r.citation),r.type==="thinking_delta"||r.type==="signature_delta"?{chunk:new Ya({content:[{index:t.index,...r,type:"thinking"}]})}:{chunk:new Ya({content:[{index:t.index,...r,type:"text"}]})}}}else{if(t.type==="content_block_delta"&&t.delta.type==="input_json_delta")return{chunk:new Ya({content:e.coerceContentToString?"":[{index:t.index,input:t.delta.partial_json,type:t.delta.type}],additional_kwargs:{},tool_call_chunks:[{index:t.index,args:t.delta.partial_json}]})};if(t.type==="content_block_start"&&t.content_block.type==="text"){const r=(n=t.content_block)==null?void 0:n.text;if(r!==void 0)return{chunk:new Ya({content:e.coerceContentToString?r:[{index:t.index,...t.content_block}],additional_kwargs:{}})}}else{if(t.type==="content_block_start"&&t.content_block.type==="redacted_thinking")return{chunk:new Ya({content:e.coerceContentToString?"":[{index:t.index,...t.content_block}]})};if(t.type==="content_block_start"&&t.content_block.type==="thinking"){const r=t.content_block.thinking;return{chunk:new Ya({content:e.coerceContentToString?r:[{index:t.index,...t.content_block}]})}}}}return null}function vrt(t,e){const n=e.usage,r=n!=null?{input_tokens:n.input_tokens??0,output_tokens:n.output_tokens??0,total_tokens:(n.input_tokens??0)+(n.output_tokens??0),input_token_details:{cache_creation:n.cache_creation_input_tokens,cache_read:n.cache_read_input_tokens}}:void 0;if(t.length===1&&t[0].type==="text")return[{text:t[0].text,message:new Zy({content:t[0].text,additional_kwargs:e,usage_metadata:r,response_metadata:e,id:e.id})}];{const i=Wfe(t);return[{text:"",message:new Zy({content:t,additional_kwargs:e,tool_calls:i,usage_metadata:r,response_metadata:e,id:e.id})}]}}function HD(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function aZ(t){let e;return t.status===400&&t.message.includes("tool")?e=HD(t,"INVALID_TOOL_RESULTS"):t.status===401?e=HD(t,"MODEL_AUTHENTICATION"):t.status===404?e=HD(t,"MODEL_NOT_FOUND"):t.status===429?e=HD(t,"MODEL_RATE_LIMIT"):e=t,e}function yrt(t){return!!(t.tools&&t.tools.length>0)}function brt(t){var e;for(const n of t.messages??[])if(typeof n.content!="string"){for(const r of n.content??[])if(typeof r=="object"&&r!=null&&r.type==="document"&&typeof r.citations=="object"&&((e=r.citations)!=null&&e.enabled))return!0}return!1}function wrt(t){return!!(t.thinking&&t.thinking.type==="enabled")}function xrt(t){return"input_schema"in t}function Srt(t){const e=["text_editor_","computer_","bash_","web_search_","web_fetch_","str_replace_editor_","str_replace_based_edit_tool_","code_execution_","memory_"];return typeof t=="object"&&t!==null&&"type"in t&&"name"in t&&e.some(n=>typeof t.type=="string"&&t.type.startsWith(n))}function Ert(t){if(typeof t.content=="string")return t.content;if(Array.isArray(t.content)&&t.content.length>=1&&"input"in t.content[0])return typeof t.content[0].input=="string"?t.content[0].input:JSON.stringify(t.content[0].input);if(Array.isArray(t.content)&&t.content.length>=1&&"text"in t.content[0])return t.content[0].text}class Nrt extends jf{static lc_name(){return"ChatAnthropic"}get lc_secrets(){return{anthropicApiKey:"ANTHROPIC_API_KEY",apiKey:"ANTHROPIC_API_KEY"}}get lc_aliases(){return{modelName:"model"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"anthropicApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:2048}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"claude-2.1"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"claude-2.1"}),Object.defineProperty(this,"invocationKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clientOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thinking",{enumerable:!0,configurable:!0,writable:!0,value:{type:"disabled"}}),Object.defineProperty(this,"contextManagement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamingClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"createClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.anthropicApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.anthropicApiKey)??ro("ANTHROPIC_API_KEY"),!this.anthropicApiKey&&!(e!=null&&e.createClient))throw new Error("Anthropic API key not found");this.clientOptions=(e==null?void 0:e.clientOptions)??{},this.apiKey=this.anthropicApiKey,this.apiUrl=e==null?void 0:e.anthropicApiUrl,this.modelName=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.model=this.modelName,this.invocationKwargs=(e==null?void 0:e.invocationKwargs)??{},this.model.includes("opus-4-1")||this.model.includes("sonnet-4-5")||this.model.includes("haiku-4-5")?this.topP=(e==null?void 0:e.topP)===null||e==null?void 0:e.topP:this.topP=(e==null?void 0:e.topP)??this.topP,this.temperature=(e==null?void 0:e.temperature)===null?void 0:(e==null?void 0:e.temperature)??this.temperature,this.topK=(e==null?void 0:e.topK)??this.topK,this.maxTokens=(e==null?void 0:e.maxTokensToSample)??(e==null?void 0:e.maxTokens)??this.maxTokens,this.stopSequences=(e==null?void 0:e.stopSequences)??this.stopSequences,this.streaming=(e==null?void 0:e.streaming)??!1,this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.thinking=(e==null?void 0:e.thinking)??this.thinking,this.contextManagement=(e==null?void 0:e.contextManagement)??this.contextManagement,this.createClient=(e==null?void 0:e.createClient)??(n=>new C_(n))}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"anthropic",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:e.stop}}formatStructuredToolToAnthropic(e){if(!(!e||!e.length))return e.map(n=>{if(Srt(n)||xrt(n))return n;if(QR(n))return{name:n.function.name,description:n.function.description,input_schema:n.function.parameters};if(eO(n))return{name:n.name,description:n.description,input_schema:ON(n.schema)?dg(n.schema):n.schema};throw new Error(`Unknown tool type passed to ChatAnthropic: ${JSON.stringify(n,null,2)}`)})}bindTools(e,n){return this.withConfig({tools:this.formatStructuredToolToAnthropic(e),...n})}invocationParams(e){const n=drt(e==null?void 0:e.tool_choice);if(this.thinking.type==="enabled"){if(this.topK!==-1)throw new Error("topK is not supported when thinking is enabled");if(this.model.includes("opus-4-1")||this.model.includes("sonnet-4-5")||this.model.includes("haiku-4-5")?this.topP!==void 0:this.topP!==-1)throw new Error("topP is not supported when thinking is enabled");if(this.temperature!==1)throw new Error("temperature is not supported when thinking is enabled");return{model:this.model,stop_sequences:(e==null?void 0:e.stop)??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e==null?void 0:e.tools),tool_choice:n,thinking:this.thinking,...this.invocationKwargs}}return{model:this.model,temperature:this.temperature,top_k:this.topK,top_p:this.topP,stop_sequences:(e==null?void 0:e.stop)??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e==null?void 0:e.tools),tool_choice:n,thinking:this.thinking,context_management:this.contextManagement,...this.invocationKwargs}}_identifyingParams(){return{model_name:this.model,...this.invocationParams()}}identifyingParams(){return{model_name:this.model,...this.invocationParams()}}async*_streamResponseChunks(e,n,r){var c;const i=this.invocationParams(n),a=iZ(e),s={...i,...a,stream:!0},o=!yrt(s)&&!brt(s)&&!wrt(s),l=await this.createStreamWithRetry(s,{headers:n.headers});for await(const f of l){if((c=n.signal)!=null&&c.aborted)throw l.controller.abort(),new Error("AbortError: User aborted the request.");const h=this.streamUsage??n.streamUsage,m=grt(f,{streamUsage:h,coerceContentToString:o});if(!m)continue;const{chunk:p}=m,v=Ert(p),y=new jg({message:new Ya({content:p.content,additional_kwargs:p.additional_kwargs,tool_call_chunks:p.tool_call_chunks,usage_metadata:h?p.usage_metadata:void 0,response_metadata:p.response_metadata,id:p.id}),text:v??""});yield y,await(r==null?void 0:r.handleLLMNewToken(v??"",void 0,void 0,void 0,void 0,{chunk:y}))}}async _generateNonStreaming(e,n,r){const i=await this.completionWithRetry({...n,stream:!1,...iZ(e)},r),{content:a,...s}=i,o=vrt(a,s),{role:l,type:c,...f}=s;return{generations:o,llmOutput:f}}async _generate(e,n,r){if(this.stopSequences&&n.stop)throw new Error('"stopSequence" parameter found in input and default params');const i=this.invocationParams(n);if(i.stream){let a;const s=this._streamResponseChunks(e,n,r);for await(const o of s)a===void 0?a=o:a=a.concat(o);if(a===void 0)throw new Error("No chunks returned from Anthropic API.");return{generations:[{text:a.text,message:a.message}]}}else return this._generateNonStreaming(e,i,{signal:n.signal,headers:n.headers})}async createStreamWithRetry(e,n){if(!this.streamingClient){const i=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.streamingClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...i,apiKey:this.apiKey,maxRetries:0})}const r=async()=>{try{return await this.streamingClient.messages.create({...e,...this.invocationKwargs,stream:!0},n)}catch(i){throw aZ(i)}};return this.caller.call(r)}async completionWithRetry(e,n){if(!this.batchClient){const i=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.batchClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...i,apiKey:this.apiKey,maxRetries:0})}const r=async()=>{try{return await this.batchClient.messages.create({...e,...this.invocationKwargs},n)}catch(i){throw aZ(i)}};return this.caller.callWithOptions({signal:n.signal??void 0},r)}_llmType(){return"anthropic"}withStructuredOutput(e,n){var v;const r=e,i=n==null?void 0:n.name,a=n==null?void 0:n.method,s=n==null?void 0:n.includeRaw;if(a==="jsonMode")throw new Error('Anthropic only supports "functionCalling" as a method.');let o=i??"extract",l,c;if(ON(r)){const y=dg(r);c=[{name:o,description:y.description??"A function available to call.",input_schema:y}],l=new tZ({returnSingle:!0,keyName:o,zodSchema:r})}else{let y;typeof r.name=="string"&&typeof r.description=="string"&&typeof r.input_schema=="object"&&r.input_schema!=null?(y=r,o=r.name):y={name:o,description:r.description??"",input_schema:r},c=[y],l=new tZ({returnSingle:!0,keyName:o})}let f;if(((v=this.thinking)==null?void 0:v.type)==="enabled"){const y="Anthropic structured output relies on forced tool calling, which is not supported when `thinking` is enabled. This method will raise OutputParserException if tool calls are not generated. Consider disabling `thinking` or adjust your prompt to ensure the tool is called.";console.warn(y),f=this.withConfig({tools:c,ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:dg(r)}});const x=S=>{if(!S.tool_calls||S.tool_calls.length===0)throw new Error(y);return S};f=f.pipe(x)}else f=this.withConfig({tools:c,tool_choice:{type:"tool",name:o},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:dg(r)}});if(!s)return f.pipe(l).withConfig({runName:"ChatAnthropicStructuredOutput"});const h=Ig.assign({parsed:(y,x)=>l.invoke(y.raw,x)}),m=Ig.assign({parsed:()=>null}),p=h.withFallbacks({fallbacks:[m]});return bd.from([{raw:f},p]).withConfig({runName:"StructuredOutputRunnable"})}}class _rt extends Nrt{}const Crt={BASE_URL:"/VisualStoryWriting",DEV:!0,MODE:"development",PROD:!1,SSR:!1,VITE_GEMINI_API_KEY:"AIzaSyBntgDi_Ae0BRg2emcR93FHqVzkdiHwP8g",VITE_OPENAI_API_KEY:"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"};class zfe{static getApiKey(e,n){if(n)return n;const r=`VITE_${e.toUpperCase()}_API_KEY`,i=Crt[r];if(!i)throw new Error(`API key not found for ${e}. Please set ${r} in your .env file`);return i}static createClient(e){const n=this.getApiKey(e.provider,e.apiKey);switch(e.provider){case"openai":return new Ent({modelName:e.model,temperature:e.temperature,openAIApiKey:n});case"anthropic":return new _rt({modelName:e.model,temperature:e.temperature,anthropicApiKey:n});case"gemini":return new lfe({modelName:e.model,temperature:e.temperature,apiKey:n});default:throw new Error(`Unsupported provider: ${e.provider}`)}}static createClients(e){const n={};for(const[r,i]of Object.entries(e))try{n[r]=this.createClient(i)}catch(a){console.error(`Failed to create ${r} client:`,a)}return n}}class sZ{constructor(e){Mt(this,"clients",{});Mt(this,"translationAgent");Mt(this,"enhancementAgent");Mt(this,"qualityAgent");Mt(this,"proofreaderAgent");Mt(this,"layoutAgent");Mt(this,"matchingAgent");Mt(this,"config");this.config=e,this.initializeAgents()}initializeAgents(){const{agentConfigs:e,glossary:n,targetLanguage:r="ja",customPrompts:i={}}=this.config,a={};e.translation&&(a.translation=e.translation),e.enhancement&&(a.enhancement=e.enhancement),e.quality&&(a.quality=e.quality),e.proofreader&&(a.proofreader=e.proofreader),e.layout&&(a.layout=e.layout),this.clients=zfe.createClients(a),this.clients.translation&&(this.translationAgent=new Fet(this.clients.translation,n,r,i.translation)),this.clients.enhancement&&(this.enhancementAgent=new Bet(this.clients.enhancement,n,r,i.enhancement)),this.clients.quality&&(this.qualityAgent=new Uet(this.clients.quality,r,i.quality)),this.clients.proofreader&&(this.proofreaderAgent=new Wet(this.clients.proofreader,r,i.proofreader)),this.clients.layout&&(this.layoutAgent=new zet(this.clients.layout,r,i.layout));try{this.matchingAgent=new ufe}catch(s){console.warn("ParagraphMatchingAgent initialization failed:",s)}}createGraph(){const e=jet();return e.addNode("translate",this.translateNode.bind(this)),e.addNode("enhance",this.enhanceNode.bind(this)),e.addNode("quality_check",this.qualityCheckNode.bind(this)),e.addNode("proofread",this.proofreadNode.bind(this)),e.addNode("layout",this.layoutNode.bind(this)),e.addNode("matching",this.matchingNode.bind(this)),e.addEdge(C5,"translate"),e.addEdge("translate","enhance"),e.addConditionalEdges("enhance",this.shouldRunQualityCheck.bind(this),{quality_check:"quality_check",proofread:"proofread",layout:"layout"}),e.addConditionalEdges("quality_check",this.afterQualityCheck.bind(this),{enhance:"enhance",proofread:"proofread",layout:"layout"}),e.addConditionalEdges("proofread",this.shouldRunLayout.bind(this),{layout:"layout",matching:"matching"}),e.addEdge("layout","matching"),e.addEdge("matching",iy),e.compile()}async translateNode(e){if(!this.translationAgent)return{error:"Translation agent not initialized",currentStage:"translate"};try{return{translated:await this.translationAgent.translate(e.sourceText,e.chunkMetadata),currentStage:"translate",llmCalls:(e.llmCalls||0)+1}}catch(n){return{error:n instanceof Error?n.message:"Translation failed",currentStage:"translate"}}}async enhanceNode(e){if(!this.enhancementAgent)return{enhanced:e.translated,currentStage:"enhance"};try{return{enhanced:await this.enhancementAgent.enhance(e.translated||"",e.sourceText),needsReenhancement:!1,currentStage:"enhance",llmCalls:(e.llmCalls||0)+1}}catch(n){return{error:n instanceof Error?n.message:"Enhancement failed",enhanced:e.translated,currentStage:"enhance"}}}async qualityCheckNode(e){if(!this.qualityAgent)return{qualityScore:100,qualityIssues:[],needsReenhancement:!1,currentStage:"quality_check"};try{const n=await this.qualityAgent.checkQuality(e.enhanced||"",e.sourceText),r=e.retryCount||0,i=e.maxRetries||2,a=!n.passes&&r<i&&n.major_issues.length>0;return{qualityScore:n.overall_score,qualityIssues:[...n.major_issues,...n.minor_issues],needsReenhancement:a,retryCount:a?r+1:r,currentStage:"quality_check",llmCalls:(e.llmCalls||0)+1}}catch(n){return{error:n instanceof Error?n.message:"Quality check failed",qualityScore:70,qualityIssues:[],needsReenhancement:!1,currentStage:"quality_check"}}}async proofreadNode(e){if(!this.proofreaderAgent||!e.enableProofreader)return{proofread:e.enhanced,currentStage:"proofread"};try{return{proofread:await this.proofreaderAgent.proofread(e.enhanced||"",e.sourceText),currentStage:"proofread",llmCalls:(e.llmCalls||0)+1}}catch(n){return{error:n instanceof Error?n.message:"Proofreading failed",proofread:e.enhanced,currentStage:"proofread"}}}async layoutNode(e){if(!this.layoutAgent)return{final:e.proofread||e.enhanced||e.translated||"",currentStage:"layout"};try{return{final:await this.layoutAgent.format(e.proofread||e.enhanced||e.translated||""),currentStage:"layout",llmCalls:(e.llmCalls||0)+1}}catch(n){return{error:n instanceof Error?n.message:"Layout failed",final:e.proofread||e.enhanced||e.translated||"",currentStage:"layout"}}}shouldRunQualityCheck(e){return this.qualityAgent&&!e.error?"quality_check":e.enableProofreader&&this.proofreaderAgent?"proofread":(this.layoutAgent,"layout")}afterQualityCheck(e){return e.needsReenhancement&&this.enhancementAgent?"enhance":e.enableProofreader&&this.proofreaderAgent?"proofread":(this.layoutAgent,"layout")}shouldRunLayout(e){return this.layoutAgent&&!e.error?"layout":"matching"}async matchingNode(e){if(!this.matchingAgent)return console.log("Matching agent not initialized, skipping paragraph matching"),{currentStage:"matching"};try{const n=e.final||e.proofread||e.enhanced||e.translated||"",r=e.sourceText;if(!n||!r)return console.warn("Missing text for paragraph matching, skipping"),{currentStage:"matching"};console.log("Starting paragraph matching...");const i=await this.matchingAgent.matchParagraphs(r,n);return console.log("Paragraph matching completed successfully"),{paragraphMatches:i,currentStage:"matching"}}catch(n){return console.error("Paragraph matching failed (non-critical):",n),{currentStage:"matching"}}}async processChunk(e,n,r){const i=this.createGraph(),a={sourceText:e,glossary:this.config.glossary,chunkMetadata:n,customPrompts:this.config.customPrompts,retryCount:0,maxRetries:this.config.maxRetries||2,enableProofreader:this.config.enableProofreader!==!1,llmCalls:0};return await i.invoke(a)}}class Trt{constructor(){Mt(this,"runningTasks",new Set);Mt(this,"abortControllers",new Map);Mt(this,"initialized",!1)}initialize(){if(this.initialized)return;this.initialized=!0;const e=Bs.getState(),n=Object.values(e.tasks).filter(r=>r.status==="running");n.length>0&&(console.log(`Found ${n.length} interrupted tasks, marking as pending...`),n.forEach(r=>{e.updateTask(r.id,{status:"pending",message:"Task was interrupted (page refresh). Please restart if needed."})}))}async runTask(e){if(this.runningTasks.has(e)){console.warn(`Task ${e} is already running`);return}this.runningTasks.add(e);const n=new AbortController;this.abortControllers.set(e,n);const r=Bs.getState(),i=r.getTask(e);if(!i){console.error(`Task ${e} not found`);return}try{switch(r.updateTask(e,{status:"running",progress:0,message:"Starting..."}),i.type){case"glossary":await this.runGlossaryTask(e,i.projectId,n.signal);break;case"translation":await this.runTranslationTask(e,i.projectId,n.signal);break;case"retranslate":i.chunkId&&await this.runRetranslateTask(e,i.projectId,i.chunkId,n.signal);break;case"glossary_extraction":await this.runGlossaryExtractionTask(e,n.signal);break;default:throw new Error(`Unknown task type: ${i.type}`)}n.signal.aborted||r.updateTask(e,{status:"completed",progress:1,message:"Completed successfully"})}catch(a){n.signal.aborted?r.updateTask(e,{status:"cancelled",message:"Task was cancelled"}):r.updateTask(e,{status:"failed",error:a instanceof Error?a.message:"Unknown error",message:"Task failed"})}finally{this.runningTasks.delete(e),this.abortControllers.delete(e)}}cancelTask(e){const n=this.abortControllers.get(e);n&&(n.abort(),this.abortControllers.delete(e)),this.runningTasks.delete(e),Bs.getState().updateTask(e,{status:"cancelled"})}async runGlossaryTask(e,n,r){const i=Bs.getState(),a=i.getProject(n);if(!a)throw new Error("Project not found");if(i.updateProject(n,{status:"glossary_running"}),i.updateTask(e,{progress:.1,message:"Analyzing text..."}),r.aborted)throw new Error("Task aborted");const s=a.agent_configs.glossary;if(!s)throw new Error("Glossary agent not configured");const o=zfe.createClient(s),l=new Aet(o,a.language);if(i.updateTask(e,{progress:.3,message:"Extracting glossary..."}),r.aborted)throw new Error("Task aborted");const c=await l.analyzeText(a.file_content);i.updateTask(e,{progress:.9,message:"Saving glossary..."}),i.setGlossary(n,c)}async runTranslationTask(e,n,r){const i=Bs.getState(),a=i.getProject(n);if(!a)throw new Error("Project not found");if(!a.glossary)throw new Error("Glossary not available. Please generate glossary first.");i.updateProject(n,{status:"translating"});const s=new sZ({agentConfigs:a.agent_configs,glossary:a.glossary,maxRetries:a.max_retries,enableProofreader:a.enable_proofreader,targetLanguage:a.language,customPrompts:a.prompts}),o=a.chunks,l=o.length;for(let c=0;c<o.length;c++){if(r.aborted)throw new Error("Task aborted");const f=o[c];if(f.status==="completed")continue;const h=c/l;i.updateTask(e,{progress:h,message:`Translating chunk ${c+1}/${l}...`}),i.updateChunk(n,f.id,{status:"processing"});try{const m=await s.processChunk(f.text,f.metadata);i.updateChunk(n,f.id,{status:"completed",translations:{tagged:m.tagged,translated:m.translated,enhanced:m.enhanced,proofread:m.proofread,final:m.final,qualityScore:m.qualityScore,paragraphMatches:m.paragraphMatches}});const p=o.filter(v=>v.status==="completed").length+1;i.updateProject(n,{translation_progress:p/l})}catch(m){throw i.updateChunk(n,f.id,{status:"failed",error:m instanceof Error?m.message:"Translation failed"}),m}}i.updateProject(n,{status:"translation_completed",translation_progress:1})}async runRetranslateTask(e,n,r,i){const a=Bs.getState(),s=a.getProject(n);if(!s)throw new Error("Project not found");const o=s.chunks.find(f=>f.id===r);if(!o)throw new Error("Chunk not found");a.updateTask(e,{progress:.1,message:"Initializing..."});const l=new sZ({agentConfigs:s.agent_configs,glossary:s.glossary,maxRetries:s.max_retries,enableProofreader:s.enable_proofreader,targetLanguage:s.language,customPrompts:s.prompts});if(a.updateChunk(n,r,{status:"processing"}),a.updateTask(e,{progress:.3,message:"Retranslating..."}),i.aborted)throw new Error("Task aborted");const c=await l.processChunk(o.text,o.metadata);a.updateTask(e,{progress:.9,message:"Saving..."}),a.updateChunk(n,r,{status:"completed",translations:{tagged:c.tagged,translated:c.translated,enhanced:c.enhanced,proofread:c.proofread,final:c.final,qualityScore:c.qualityScore,paragraphMatches:c.paragraphMatches}})}async runGlossaryExtractionTask(e,n){var N,k;const r=Bs.getState(),i=r.getTask(e);if(!i||!i.metadata)throw new Error("Task metadata not found");const{text:a,targetLanguage:s,vswProjectId:o}=i.metadata,{useGlossaryStore:l,initGemini:c}=await eJe(async()=>{const{useGlossaryStore:P,initGemini:O}=await Promise.resolve().then(()=>VYe);return{useGlossaryStore:P,initGemini:O}},void 0);c("AIzaSyBntgDi_Ae0BRg2emcR93FHqVzkdiHwP8g"),r.updateTask(e,{progress:0,message:"Preparing text..."});const h=8e3,m=[];for(let P=0;P<a.length;P+=h)m.push(a.substring(P,P+h));const p=m.length;r.updateTask(e,{progress:.05,message:`Processing ${p} chunks...`}),l.getState().reset(),l.getState().setTargetLanguage(s),l.getState().setFullText(a),l.getState().setTotalChunks(p);for(let P=0;P<m.length;P++){if(n.aborted)throw new Error("Task aborted");const O=m[P],A=.05+(P+1)/p*.85;r.updateTask(e,{progress:A,message:`Processing chunk ${P+1}/${p}...`});try{await l.getState().processChunk(O,P)}catch(T){console.error(`Error processing chunk ${P}:`,T)}}if(n.aborted)throw new Error("Task aborted");r.updateTask(e,{progress:.95,message:"Consolidating results..."});try{await l.getState().consolidateResults()}catch(P){console.error("Error consolidating results:",P)}r.updateTask(e,{progress:.98,message:"Saving project..."});const v=l.getState(),y=localStorage.getItem("vsw.projects")||"[]",x=JSON.parse(y),S=x.findIndex(P=>P.id===o),_={id:o,name:((N=x[S])==null?void 0:N.name)||`Glossary Project ${new Date().toLocaleString()}`,updatedAt:Date.now(),glossary:{characters:v.characters,events:v.events,locations:v.locations,terms:v.terms,story_summary:v.story_summary,key_events_and_arcs:v.key_events_and_arcs,honorifics:v.honorifics,recurring_phrases:v.recurring_phrases,world_building_notes:v.world_building_notes,style_guide:v.style_guide,target_language:v.target_language,fullText:v.fullText},view:((k=x[S])==null?void 0:k.view)||{entityNodes:[],actionEdges:[],locationNodes:[],textState:[],isReadOnly:!1,relationsPositions:{}}};S>=0?x[S]=_:x.unshift(_),localStorage.setItem("vsw.projects",JSON.stringify(x)),localStorage.setItem("vsw.currentProjectId",o),r.updateTask(e,{progress:1,message:"Glossary extraction completed!"})}isTaskRunning(e){return this.runningTasks.has(e)}}const yg=new Trt;typeof window<"u"&&setTimeout(()=>{yg.initialize()},100);function Drt(){const[t,e]=R.useState(null),[n,r]=R.useState("en"),[i,a]=R.useState(null),{createTask:s,tasks:o}=Bs(),l=i?o[i]:void 0,c=(l==null?void 0:l.status)==="running",f=(l==null?void 0:l.progress)||0;R.useEffect(()=>{l&&l.status==="completed"&&setTimeout(()=>{window.location.hash="/glossary-builder"},500)},[l]);const h=p=>{var y;const v=(y=p.target.files)==null?void 0:y[0];v&&v.type==="text/plain"?e(v):alert("Please upload a .txt file")},m=async()=>{if(!t)return;const p=new FileReader;p.onload=async v=>{var O;const y=(O=v.target)==null?void 0:O.result,x=globalThis.crypto&&"randomUUID"in globalThis.crypto?crypto.randomUUID():`p-${Date.now()}`,S=t!=null&&t.name?`${t.name.replace(/\.[^/.]+$/,"")} (${new Date().toLocaleString()})`:`Glossary Project ${new Date().toLocaleString()}`,_=localStorage.getItem("vsw.projects")||"[]",N=JSON.parse(_),k={id:x,name:S,updatedAt:Date.now(),glossary:{},view:{entityNodes:[],actionEdges:[],locationNodes:[],textState:[],isReadOnly:!1,relationsPositions:{}}};N.unshift(k),localStorage.setItem("vsw.projects",JSON.stringify(N));const P=s({type:"glossary_extraction",projectId:x,metadata:{text:y,targetLanguage:n,vswProjectId:x}});a(P),yg.runTask(P).catch(A=>{console.error("Error running glossary extraction:",A),alert(`Error: ${A instanceof Error?A.message:"Unknown error"}`)})},p.readAsText(t)};return b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative"},children:b.jsxDEV(wn,{style:{width:"500px",padding:"20px"},children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[b.jsxDEV(OE,{size:24},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:114,columnNumber:13},this),b.jsxDEV("span",{style:{fontSize:"20px",fontWeight:"bold"},children:"Upload Novel for Glossary Analysis"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:115,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:113,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:112,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:118,columnNumber:9},this),b.jsxDEV(vn,{style:{gap:"20px"},children:[b.jsxDEV("p",{style:{color:"#666"},children:"Upload a text file to automatically extract characters, events, and relationships. The system will build a comprehensive glossary with visual representations."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:120,columnNumber:11},this),!1,b.jsxDEV("div",{children:[b.jsxDEV("label",{style:{fontWeight:"bold",marginBottom:"5px",display:"block"},children:"Target Language (  )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:136,columnNumber:13},this),b.jsxDEV(io,{placeholder:"Select a language",selectedKeys:[n],onChange:p=>r(p.target.value),children:[b.jsxDEV(jn,{value:"en",children:"English ()"},"en",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:144,columnNumber:15},this),b.jsxDEV(jn,{value:"ja",children:"Japanese ()"},"ja",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:147,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:139,columnNumber:13},this),b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",marginTop:"5px"},children:"Korean names will be kept, but all other fields will be in the selected language"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:151,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:135,columnNumber:11},this),b.jsxDEV("div",{children:[b.jsxDEV("label",{htmlFor:"file-upload",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px",border:"2px dashed #ddd",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s",background:t?"#f0f9ff":"#fafafa"},onDragOver:p=>{p.preventDefault(),p.currentTarget.style.borderColor="#667eea",p.currentTarget.style.background="#f0f9ff"},onDragLeave:p=>{p.currentTarget.style.borderColor="#ddd",p.currentTarget.style.background="#fafafa"},onDrop:p=>{p.preventDefault();const v=p.dataTransfer.files[0];v&&v.type==="text/plain"&&e(v),p.currentTarget.style.borderColor="#ddd",p.currentTarget.style.background="#fafafa"},children:[b.jsxDEV(OE,{size:40,color:"#667eea"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:190,columnNumber:15},this),b.jsxDEV("p",{style:{marginTop:"10px",fontWeight:"bold"},children:t?t.name:"Click to upload or drag and drop"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:191,columnNumber:15},this),b.jsxDEV("p",{style:{fontSize:"12px",color:"#888"},children:"TXT files only"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:194,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:157,columnNumber:13},this),b.jsxDEV("input",{id:"file-upload",type:"file",accept:".txt",onChange:h,style:{display:"none"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:198,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:156,columnNumber:11},this),c&&l&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[b.jsxDEV("span",{style:{fontSize:"14px",color:"#666"},children:l.message},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:210,columnNumber:17},this),b.jsxDEV(ZE,{value:f*100,color:"secondary",size:"md",showValueLabel:!0,className:"max-w-full"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:213,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:209,columnNumber:15},this),b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",textAlign:"center"},children:"Processing in background. You can navigate away and check progress in the top-right corner."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:221,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:208,columnNumber:13},this),b.jsxDEV(et,{color:"secondary",size:"lg",onClick:m,isDisabled:!t||c||!1,isLoading:c,style:{width:"100%"},children:c?"Processing...":"Build Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:227,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:119,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:111,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryUploader.tsx",lineNumber:101,columnNumber:5},this)}function krt(){const t=$t.getState();return{characters:t.characters,events:t.events,locations:t.locations,terms:t.terms,fullText:t.fullText,story_summary:t.story_summary,key_events_and_arcs:t.key_events_and_arcs,honorifics:t.honorifics,recurring_phrases:t.recurring_phrases,world_building_notes:t.world_building_notes,style_guide:t.style_guide,target_language:t.target_language}}function Prt(){const t=Ce.getState();return{entityNodes:t.entityNodes,actionEdges:t.actionEdges,locationNodes:t.locationNodes,textState:t.textState,isReadOnly:t.isReadOnly}}function Art(t){$t.setState({characters:JSON.parse(JSON.stringify(t.characters||[])),events:JSON.parse(JSON.stringify(t.events||[])),locations:JSON.parse(JSON.stringify(t.locations||[])),terms:JSON.parse(JSON.stringify(t.terms||[])),fullText:t.fullText||"",story_summary:JSON.parse(JSON.stringify(t.story_summary||{logline:"",blurb:""})),key_events_and_arcs:JSON.parse(JSON.stringify(t.key_events_and_arcs||[])),honorifics:JSON.parse(JSON.stringify(t.honorifics||{})),recurring_phrases:JSON.parse(JSON.stringify(t.recurring_phrases||{})),world_building_notes:JSON.parse(JSON.stringify(t.world_building_notes||[])),style_guide:JSON.parse(JSON.stringify(t.style_guide||{tone:"",formality_level:"medium",themes:[],genre:"",sub_genres:[],content_rating:"",name_format:"",honorific_usage:"",formal_speech_level:"",dialogue_style:"",narrative_vocabulary:"",narrative_style:{point_of_view:"",tense:"",voice:"",common_expressions:[],atmosphere_descriptors:[]}})),target_language:t.target_language||"en"})}function Rrt(t){const e=Ce.getState();e.setEntityNodes(t.entityNodes),e.setActionEdges(t.actionEdges),e.setLocationNodes(t.locationNodes),e.setTextState(t.textState,!0,!1),e.setIsReadOnly(t.isReadOnly)}function Ort(){const[t,e]=R.useState([]),[n,r]=R.useState(""),[i,a]=R.useState("");R.useEffect(()=>{try{const f=localStorage.getItem("vsw.projects")||"[]";e(JSON.parse(f))}catch{}},[]);const s=()=>{const f=localStorage.getItem("vsw.projects")||"[]",h=JSON.parse(f),m=globalThis.crypto&&"randomUUID"in globalThis.crypto?crypto.randomUUID():`p-${Date.now()}`,v=[{id:m,name:n||`Project ${new Date().toLocaleString()}`,updatedAt:Date.now(),glossary:krt(),view:{...Prt(),relationsPositions:JSON.parse(localStorage.getItem("vsw.relations.positions")||"{}")}},...h];localStorage.setItem("vsw.projects",JSON.stringify(v)),e(v),r("");try{localStorage.setItem("vsw.currentProjectId",m)}catch{}},o=f=>{Art(f.glossary),Rrt(f.view);try{const h=f.view&&f.view.relationsPositions?f.view.relationsPositions:{};localStorage.setItem("vsw.relations.positions",JSON.stringify(h)),localStorage.setItem("vsw.currentProjectId",f.id)}catch{}window.location.hash="/glossary-builder"},l=f=>{const h=t.filter(m=>m.id!==f);localStorage.setItem("vsw.projects",JSON.stringify(h)),e(h)},c=t.filter(f=>f.name.toLowerCase().includes(i.toLowerCase()));return b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:20,padding:24,maxWidth:900,margin:"0 auto"},children:[b.jsxDEV("h1",{style:{fontSize:24,fontWeight:"bold"},children:"Project Manager"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:140,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:b.jsxDEV("span",{style:{fontWeight:"bold"},children:"Create or Save Current"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:144,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:143,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:142,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:147,columnNumber:9},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",gap:10},children:[b.jsxDEV(on,{placeholder:"Project name",value:n,onChange:f=>r(f.target.value)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:150,columnNumber:13},this),b.jsxDEV(et,{color:"secondary",onClick:s,children:"Save current"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:151,columnNumber:13},this),b.jsxDEV(et,{variant:"bordered",onClick:()=>window.location.hash="/glossary-uploader",children:"New from text"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:152,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:149,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:148,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:141,columnNumber:7},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[b.jsxDEV("span",{style:{fontWeight:"bold"},children:"Your Projects"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:160,columnNumber:13},this),b.jsxDEV(on,{size:"sm",placeholder:"Search",value:i,onChange:f=>a(f.target.value),style:{maxWidth:240}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:161,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:159,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:158,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:164,columnNumber:9},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:12},children:[c.map(f=>b.jsxDEV(wn,{isHoverable:!0,isPressable:!0,children:b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[b.jsxDEV("div",{children:[b.jsxDEV("div",{style:{fontWeight:"bold"},children:f.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:172,columnNumber:23},this),b.jsxDEV("div",{style:{fontSize:12,color:"#888"},children:new Date(f.updatedAt).toLocaleString()},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:173,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:171,columnNumber:21},this),b.jsxDEV("div",{style:{display:"flex",gap:8},children:[b.jsxDEV(et,{size:"sm",variant:"flat",onClick:()=>o(f),children:"Open"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:176,columnNumber:23},this),b.jsxDEV(et,{size:"sm",variant:"light",color:"danger",onClick:()=>l(f.id),children:"Delete"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:177,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:175,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:170,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:169,columnNumber:17},this)},f.id,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:168,columnNumber:15},this)),c.length===0&&b.jsxDEV("div",{style:{color:"#888"},children:"No projects yet."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:183,columnNumber:39},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:166,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:165,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:157,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/ProjectManager.tsx",lineNumber:139,columnNumber:5},this)}function jrt({events:t,characters:e,onEventSelect:n,selectedEventId:r,isExpanded:i=!1}){const a=[...t].sort((s,o)=>s.chunk_index-o.chunk_index);return b.jsxDEV("div",{style:{padding:"20px",overflowY:"auto",height:"100%"},children:[i&&b.jsxDEV("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"Event Timeline"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:29,columnNumber:9},this),b.jsxDEV("div",{style:{position:"relative",minHeight:"100%"},children:[b.jsxDEV("div",{style:{position:"absolute",left:"30px",top:"20px",bottom:"20px",width:"2px",background:"linear-gradient(to bottom, #667eea, #764ba2)"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:34,columnNumber:9},this),a.map((s,o)=>b.jsxDEV("div",{style:{display:"flex",marginBottom:"30px",paddingLeft:"60px",position:"relative"},children:[b.jsxDEV("div",{style:{position:"absolute",left:"21px",top:"20px",width:"20px",height:"20px",borderRadius:"50%",background:s.importance==="major"?"#667eea":"#764ba2",border:"3px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:55,columnNumber:13},this),b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,onClick:()=>n(s),style:{flex:1,background:s.id===r?"#f0f9ff":"white",border:s.id===r?"2px solid #667eea":"1px solid #ddd",cursor:"pointer"},children:b.jsxDEV(vn,{children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:s.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:83,columnNumber:19},this),b.jsxDEV(Fn,{size:"sm",color:s.importance==="major"?"secondary":"default",variant:"flat",children:s.importance},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:86,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:82,columnNumber:17},this),b.jsxDEV("p",{style:{color:"#666",fontSize:"14px",marginBottom:"10px"},children:s.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:95,columnNumber:17},this),s.characters_involved.length>0&&b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:s.characters_involved.map((l,c)=>b.jsxDEV(Fn,{size:"sm",variant:"bordered",children:l},c,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:102,columnNumber:23},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:100,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:81,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:70,columnNumber:13},this)]},s.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:46,columnNumber:11},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:33,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/EventTimeline.tsx",lineNumber:27,columnNumber:5},this)}function Irt({characters:t,events:e,selectedCharacter:n,selectedEvent:r,onCharacterSelect:i,onEventSelect:a}){var H,q,F,J,Z,G,oe,ae,te;const[s,o]=R.useState(""),[l,c]=R.useState("characters"),[f,h]=R.useState(null),m=$t(re=>re.story_summary),p=$t(re=>re.key_events_and_arcs),v=$t(re=>re.style_guide),y=$t(re=>re.world_building_notes),x=$t(re=>re.honorifics),S=$t(re=>re.recurring_phrases),_=$t(re=>re.locations),N=$t(re=>re.terms),k=$t(re=>re.arcs);$t(re=>re.updateArc),$t(re=>re.deleteArc);const P=$t(re=>re.updateStorySummary),O=$t(re=>re.updateStyleGuide),A=$t(re=>re.addKeyEvent),T=$t(re=>re.updateKeyEvent),L=$t(re=>re.deleteKeyEvent),B=$t(re=>re.addWorldBuildingNote),W=$t(re=>re.updateWorldBuildingNote),Y=$t(re=>re.deleteWorldBuildingNote),V=t.filter(re=>re.name.toLowerCase().includes(s.toLowerCase())),I=e.filter(re=>re.name.toLowerCase().includes(s.toLowerCase()));return b.jsxDEV("div",{style:{width:"40%",height:"100%",background:"white",display:"flex",flexDirection:"column"},children:[b.jsxDEV("div",{style:{padding:"20px",borderBottom:"1px solid #ddd"},children:[b.jsxDEV("h2",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"15px"},children:"Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:67,columnNumber:9},this),b.jsxDEV(on,{placeholder:"Search...",value:s,onChange:re=>o(re.target.value),startContent:b.jsxDEV(JKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:75,columnNumber:25},this),size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:71,columnNumber:9},this),b.jsxDEV("div",{style:{display:"flex",gap:"8px",marginTop:"15px",flexWrap:"wrap"},children:[b.jsxDEV(Fn,{onClick:()=>c("summary"),color:l==="summary"?"secondary":"default",variant:l==="summary"?"solid":"bordered",style:{cursor:"pointer"},startContent:b.jsxDEV(UKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:85,columnNumber:27},this),children:"Summary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:80,columnNumber:11},this),b.jsxDEV(Fn,{onClick:()=>c("characters"),color:l==="characters"?"secondary":"default",variant:l==="characters"?"solid":"bordered",style:{cursor:"pointer"},children:["Characters (",t.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:89,columnNumber:11},this),b.jsxDEV(Fn,{onClick:()=>c("events"),color:l==="events"?"secondary":"default",variant:l==="events"?"solid":"bordered",style:{cursor:"pointer"},children:["Events (",e.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:97,columnNumber:11},this),b.jsxDEV(Fn,{onClick:()=>c("arcs"),color:l==="arcs"?"secondary":"default",variant:l==="arcs"?"solid":"bordered",style:{cursor:"pointer"},startContent:b.jsxDEV(KKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:110,columnNumber:27},this),children:["Story Arcs (",k.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:105,columnNumber:11},this),b.jsxDEV(Fn,{onClick:()=>c("style"),color:l==="style"?"secondary":"default",variant:l==="style"?"solid":"bordered",style:{cursor:"pointer"},startContent:b.jsxDEV(zKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:119,columnNumber:27},this),children:"Style Guide"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:114,columnNumber:11},this),b.jsxDEV(Fn,{onClick:()=>c("features"),color:l==="features"?"secondary":"default",variant:l==="features"?"solid":"bordered",style:{cursor:"pointer"},startContent:b.jsxDEV(Uce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:128,columnNumber:27},this),children:"Story Features"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:123,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:66,columnNumber:7},this),b.jsxDEV("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:[l==="characters"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:V.map(re=>b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,onClick:()=>i(re),style:{background:(n==null?void 0:n.id)===re.id?"#f0f9ff":"white",border:(n==null?void 0:n.id)===re.id?"2px solid #667eea":"1px solid #e0e0e0",cursor:"pointer"},children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:re.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:155,columnNumber:21},this),re.korean_name&&b.jsxDEV("p",{style:{fontSize:"14px",color:"#888",margin:0},children:re.korean_name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:159,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:154,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:153,columnNumber:17},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:165,columnNumber:17},this),b.jsxDEV(vn,{children:[b.jsxDEV("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:re.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:167,columnNumber:19},this),re.traits.length>0&&b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[re.traits.slice(0,3).map((X,ce)=>b.jsxDEV(Fn,{size:"sm",variant:"flat",color:"secondary",children:X},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:174,columnNumber:25},this)),re.traits.length>3&&b.jsxDEV(Fn,{size:"sm",variant:"flat",children:["+",re.traits.length-3]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:179,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:172,columnNumber:21},this),re.relationships&&re.relationships.length>0&&b.jsxDEV("div",{style:{marginTop:"12px"},children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"8px"},children:[" (",re.relationships.length,"):"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:188,columnNumber:23},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[re.relationships.slice(0,3).map((X,ce)=>{const he=X.sentiment==="positive"?"#22c55e":X.sentiment==="negative"?"#ef4444":"#6b7280";return b.jsxDEV("div",{style:{background:"#f9fafb",padding:"8px 10px",borderRadius:"8px",borderLeft:`3px solid ${he}`},children:[b.jsxDEV("div",{style:{fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[b.jsxDEV("span",{style:{fontWeight:"700",color:"#333"},children:X.character_name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:211,columnNumber:33},this),b.jsxDEV("span",{style:{color:"#888"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:212,columnNumber:33},this),b.jsxDEV("span",{style:{color:he,fontWeight:"600"},children:X.relationship_type},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:213,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:204,columnNumber:31},this),X.description&&b.jsxDEV("div",{style:{fontSize:"11px",color:"#666",lineHeight:"1.4",marginTop:"4px"},children:X.description.length>80?X.description.substring(0,80)+"...":X.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:216,columnNumber:33},this)]},ce,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:198,columnNumber:29},this)}),re.relationships.length>3&&b.jsxDEV("span",{style:{fontSize:"11px",color:"#888",paddingLeft:"10px"},children:["+",re.relationships.length-3," more"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:231,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:191,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:187,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:166,columnNumber:17},this)]},re.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:139,columnNumber:15},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:137,columnNumber:11},this),l==="events"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:I.map(re=>b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,onClick:()=>a(re),style:{background:(r==null?void 0:r.id)===re.id?"#f0f9ff":"white",border:(r==null?void 0:r.id)===re.id?"2px solid #667eea":"1px solid #e0e0e0",cursor:"pointer"},children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"start"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:re.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:263,columnNumber:21},this),b.jsxDEV(Fn,{size:"sm",color:re.importance==="major"?"secondary":"default",variant:"flat",children:re.importance},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:266,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:262,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:261,columnNumber:17},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:275,columnNumber:17},this),b.jsxDEV(vn,{children:[b.jsxDEV("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:re.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:277,columnNumber:19},this),re.characters_involved.length>0&&b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:re.characters_involved.map((X,ce)=>b.jsxDEV(Fn,{size:"sm",variant:"bordered",children:X},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:284,columnNumber:25},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:282,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:276,columnNumber:17},this)]},re.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:247,columnNumber:15},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:245,columnNumber:11},this),l==="summary"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Story Summary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:300,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:299,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:302,columnNumber:15},this),b.jsxDEV(vn,{children:[b.jsxDEV("div",{style:{marginBottom:"15px"},children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Logline:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:305,columnNumber:19},this),b.jsxDEV("p",{style:{fontSize:"14px",color:"#333",fontStyle:m.logline?"normal":"italic"},children:m.logline||"No logline yet. Process text chunks to generate."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:306,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:304,columnNumber:17},this),b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Blurb:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:311,columnNumber:19},this),b.jsxDEV("p",{style:{fontSize:"14px",color:"#333",lineHeight:"1.6",fontStyle:m.blurb?"normal":"italic"},children:m.blurb||"No blurb yet. Process text chunks to generate."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:312,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:310,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:303,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:298,columnNumber:13},this),y.length>0&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"World Building"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:322,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:321,columnNumber:17},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:324,columnNumber:17},this),b.jsxDEV(vn,{children:b.jsxDEV("ul",{style:{paddingLeft:"20px",margin:0},children:y.map((re,X)=>b.jsxDEV("li",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:re},X,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:328,columnNumber:23},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:326,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:325,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:320,columnNumber:15},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:["Locations (",_.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:339,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:338,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:341,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:_.map(re=>b.jsxDEV("div",{style:{padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[b.jsxDEV("span",{style:{fontSize:"18px"},children:re.emoji},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:347,columnNumber:25},this),b.jsxDEV("span",{style:{fontWeight:"bold",fontSize:"14px"},children:re.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:348,columnNumber:25},this),re.korean_name&&b.jsxDEV("span",{style:{fontSize:"12px",color:"#888"},children:["(",re.korean_name,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:350,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:346,columnNumber:23},this),re.description&&b.jsxDEV("p",{style:{fontSize:"13px",color:"#666",marginBottom:"5px"},children:re.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:354,columnNumber:25},this),re.atmosphere&&b.jsxDEV(Fn,{size:"sm",variant:"flat",color:"secondary",style:{marginTop:"5px"},children:re.atmosphere},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:357,columnNumber:25},this)]},re.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:345,columnNumber:21},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:343,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:342,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:337,columnNumber:13},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:["Terms (",N.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:369,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:368,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:371,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:N.map(re=>b.jsxDEV("div",{style:{padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[b.jsxDEV("span",{style:{fontWeight:"bold",fontSize:"14px"},children:re.original},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:377,columnNumber:25},this),b.jsxDEV("span",{style:{color:"#888"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:378,columnNumber:25},this),b.jsxDEV("span",{style:{fontSize:"14px",color:"#667eea"},children:re.translation},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:379,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:376,columnNumber:23},this),re.context&&b.jsxDEV("p",{style:{fontSize:"12px",color:"#666"},children:re.context},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:382,columnNumber:25},this),b.jsxDEV(Fn,{size:"sm",variant:"flat",style:{marginTop:"5px"},children:re.category},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:384,columnNumber:23},this)]},re.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:375,columnNumber:21},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:373,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:372,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:367,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:297,columnNumber:11},this),l==="arcs"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[k.length===0?b.jsxDEV(wn,{children:b.jsxDEV(vn,{children:b.jsxDEV("p",{style:{fontSize:"14px",color:"#888",fontStyle:"italic",textAlign:"center",padding:"20px"},children:"No story arcs yet. Process text chunks to generate arc information."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:400,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:399,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:398,columnNumber:15},this):b.jsxDEV(b.Fragment,{children:k.map(re=>b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,onClick:()=>h(f===re.id?null:re.id),style:{background:f===re.id?"#f0f9ff":"white",border:f===re.id?"2px solid #667eea":"1px solid #e0e0e0",cursor:"pointer"},children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{width:"100%"},children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:re.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:422,columnNumber:27},this),b.jsxDEV(Fn,{size:"sm",variant:"flat",color:"secondary",startContent:b.jsxDEV(XKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:425,columnNumber:90},this),children:[re.characters.length," characters"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:425,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:421,columnNumber:25},this),re.start_chunk!==void 0&&b.jsxDEV("p",{style:{fontSize:"11px",color:"#888",margin:0},children:["Chunks ",re.start_chunk,re.end_chunk!==void 0?` - ${re.end_chunk}`:"+"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:430,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:420,columnNumber:23},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:419,columnNumber:21},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:436,columnNumber:21},this),b.jsxDEV(vn,{children:[b.jsxDEV("p",{style:{fontSize:"14px",color:"#666",marginBottom:"12px",lineHeight:"1.6"},children:re.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:438,columnNumber:23},this),f===re.id&&b.jsxDEV(b.Fragment,{children:[re.characters.length>0&&b.jsxDEV("div",{style:{marginTop:"16px",marginBottom:"16px"},children:[b.jsxDEV("div",{style:{fontSize:"13px",fontWeight:"bold",color:"#667eea",marginBottom:"10px"},children:[" (",re.characters.length,"):"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:447,columnNumber:31},this),b.jsxDEV("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:re.characters.map((X,ce)=>{const he=t.find(ve=>{var Ne;return ve.name.toLowerCase()===X.toLowerCase()||((Ne=ve.korean_name)==null?void 0:Ne.toLowerCase())===X.toLowerCase()});return b.jsxDEV(Fn,{size:"md",variant:"flat",color:"secondary",onClick:ve=>{ve.stopPropagation(),he&&i(he)},style:{cursor:he?"pointer":"default"},children:[(he==null?void 0:he.emoji)||""," ",X]},ce,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:457,columnNumber:37},this)})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:450,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:446,columnNumber:29},this),b.jsxDEV("div",{style:{marginTop:"16px"},children:[b.jsxDEV("div",{style:{fontSize:"13px",fontWeight:"bold",color:"#667eea",marginBottom:"10px"},children:"  :"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:478,columnNumber:29},this),(()=>{const ce=t.filter(he=>re.characters.some(ve=>{var Ne;return ve.toLowerCase()===he.name.toLowerCase()||ve.toLowerCase()===((Ne=he.korean_name)==null?void 0:Ne.toLowerCase())})).flatMap(he=>he.relationships.filter(ve=>!ve.arc_id||ve.arc_id===re.name||ve.arc_id===re.id).map(ve=>({from:he.name,fromEmoji:he.emoji,to:ve.character_name,type:ve.relationship_type,description:ve.description,sentiment:ve.sentiment||"neutral"})));return ce.length===0?b.jsxDEV("p",{style:{fontSize:"13px",color:"#888",fontStyle:"italic"},children:" arc     ."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:503,columnNumber:35},this):b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:ce.map((he,ve)=>{const Ne=he.sentiment==="positive"?"#22c55e":he.sentiment==="negative"?"#ef4444":"#6b7280";return b.jsxDEV("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"8px",borderLeft:`4px solid ${Ne}`},children:[b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[b.jsxDEV("span",{style:{fontSize:"14px",fontWeight:"bold"},children:[he.fromEmoji," ",he.from]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:527,columnNumber:43},this),b.jsxDEV("span",{style:{color:Ne,fontSize:"16px"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:530,columnNumber:43},this),b.jsxDEV("span",{style:{fontSize:"14px",fontWeight:"bold"},children:he.to},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:531,columnNumber:43},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:526,columnNumber:41},this),b.jsxDEV("div",{style:{fontSize:"12px",color:Ne,fontWeight:"600",marginBottom:"4px"},children:he.type},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:535,columnNumber:41},this),he.description&&b.jsxDEV("div",{style:{fontSize:"12px",color:"#666",lineHeight:"1.5"},children:he.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:539,columnNumber:43},this)]},ve,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:517,columnNumber:39},this)})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:510,columnNumber:33},this)})()]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:477,columnNumber:27},this),re.key_events&&re.key_events.length>0&&b.jsxDEV("div",{style:{marginTop:"16px"},children:[b.jsxDEV("div",{style:{fontSize:"13px",fontWeight:"bold",color:"#667eea",marginBottom:"10px"},children:" :"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:554,columnNumber:31},this),b.jsxDEV("ul",{style:{paddingLeft:"20px",margin:0},children:re.key_events.map((X,ce)=>b.jsxDEV("li",{style:{fontSize:"13px",color:"#666",marginBottom:"6px",lineHeight:"1.5"},children:X},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:559,columnNumber:35},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:557,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:553,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:443,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:437,columnNumber:21},this)]},re.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:408,columnNumber:19},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:406,columnNumber:15},this),p.length>0&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Additional Key Events"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:578,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:577,columnNumber:17},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:580,columnNumber:17},this),b.jsxDEV(vn,{children:b.jsxDEV("ol",{style:{paddingLeft:"20px",margin:0},children:p.map((re,X)=>b.jsxDEV("li",{style:{fontSize:"13px",color:"#666",marginBottom:"10px",lineHeight:"1.5"},children:re},X,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:584,columnNumber:23},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:582,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:581,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:576,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:396,columnNumber:11},this),l==="style"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Genre & Tone"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:599,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:598,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:601,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Genre:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:605,columnNumber:21},this),b.jsxDEV(Fn,{color:"secondary",variant:"flat",children:v.genre||"Web Novel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:606,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:604,columnNumber:19},this),v.sub_genres&&v.sub_genres.length>0&&b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Sub-genres:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:610,columnNumber:23},this),b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:v.sub_genres.map((re,X)=>b.jsxDEV(Fn,{size:"sm",variant:"bordered",children:re},X,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:613,columnNumber:27},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:611,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:609,columnNumber:21},this),b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Tone:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:619,columnNumber:21},this),b.jsxDEV("p",{style:{fontSize:"14px",color:"#333"},children:v.tone||"Standard"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:620,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:618,columnNumber:19},this),b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Content Rating:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:623,columnNumber:21},this),b.jsxDEV(Fn,{size:"sm",variant:"flat",children:v.content_rating||"Teen"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:624,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:622,columnNumber:19},this),v.themes&&v.themes.length>0&&b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Themes:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:628,columnNumber:23},this),b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:v.themes.map((re,X)=>b.jsxDEV(Fn,{size:"sm",color:"secondary",variant:"flat",children:re},X,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:631,columnNumber:27},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:629,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:627,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:603,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:602,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:597,columnNumber:13},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Translation Guidelines"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:642,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:641,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:644,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Name Format:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:648,columnNumber:21},this),b.jsxDEV("p",{style:{fontSize:"14px",color:"#333"},children:v.name_format||"english_given_name english_surname"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:649,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:647,columnNumber:19},this),b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Honorific Usage:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:652,columnNumber:21},this),b.jsxDEV("p",{style:{fontSize:"14px",color:"#666",lineHeight:"1.6"},children:v.honorific_usage||"Keep Korean honorifics with explanation on first use"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:653,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:651,columnNumber:19},this),b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Formality Level:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:656,columnNumber:21},this),b.jsxDEV(Fn,{size:"sm",variant:"flat",children:v.formality_level||"medium"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:657,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:655,columnNumber:19},this),b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Dialogue Style:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:660,columnNumber:21},this),b.jsxDEV("p",{style:{fontSize:"14px",color:"#333"},children:v.dialogue_style||"natural"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:661,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:659,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:646,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:645,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:640,columnNumber:13},this),v.narrative_style&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Narrative Style"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:670,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:669,columnNumber:17},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:672,columnNumber:17},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[b.jsxDEV("div",{style:{display:"flex",gap:"15px"},children:[b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"POV:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:677,columnNumber:25},this),b.jsxDEV(Fn,{size:"sm",variant:"flat",children:v.narrative_style.point_of_view||"third-person"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:678,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:676,columnNumber:23},this),b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Tense:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:681,columnNumber:25},this),b.jsxDEV(Fn,{size:"sm",variant:"flat",children:v.narrative_style.tense||"past"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:682,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:680,columnNumber:23},this),b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Voice:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:685,columnNumber:25},this),b.jsxDEV(Fn,{size:"sm",variant:"flat",children:v.narrative_style.voice||"neutral"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:686,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:684,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:675,columnNumber:21},this),v.narrative_style.common_expressions&&v.narrative_style.common_expressions.length>0&&b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Common Expressions:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:691,columnNumber:25},this),b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:v.narrative_style.common_expressions.map((re,X)=>b.jsxDEV(Fn,{size:"sm",variant:"bordered",children:re},X,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:694,columnNumber:29},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:692,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:690,columnNumber:23},this),v.narrative_style.atmosphere_descriptors&&v.narrative_style.atmosphere_descriptors.length>0&&b.jsxDEV("div",{children:[b.jsxDEV("p",{style:{fontSize:"12px",color:"#888",fontWeight:"bold",marginBottom:"5px"},children:"Atmosphere:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:701,columnNumber:25},this),b.jsxDEV("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:v.narrative_style.atmosphere_descriptors.map((re,X)=>b.jsxDEV(Fn,{size:"sm",color:"secondary",variant:"flat",children:re},X,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:704,columnNumber:29},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:702,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:700,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:674,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:673,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:668,columnNumber:15},this),Object.keys(x).length>0&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Honorifics"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:717,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:716,columnNumber:17},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:719,columnNumber:17},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Object.entries(x).map(([re,X],ce)=>b.jsxDEV("div",{style:{padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[b.jsxDEV("span",{style:{fontWeight:"bold",fontSize:"14px"},children:re},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:725,columnNumber:27},this),b.jsxDEV("span",{style:{color:"#888"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:726,columnNumber:27},this),b.jsxDEV("span",{style:{fontSize:"13px",color:"#666"},children:X},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:727,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:724,columnNumber:25},this)},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:723,columnNumber:23},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:721,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:720,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:715,columnNumber:15},this),Object.keys(S).length>0&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Recurring Phrases"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:739,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:738,columnNumber:17},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:741,columnNumber:17},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Object.entries(S).map(([re,X],ce)=>b.jsxDEV("div",{style:{padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[b.jsxDEV("span",{style:{fontWeight:"bold",fontSize:"14px"},children:re},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:747,columnNumber:27},this),b.jsxDEV("span",{style:{color:"#888"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:748,columnNumber:27},this),b.jsxDEV("span",{style:{fontSize:"13px",color:"#667eea"},children:X},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:749,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:746,columnNumber:25},this)},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:745,columnNumber:23},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:743,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:742,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:737,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:596,columnNumber:11},this),l==="features"&&b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Story Summary ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:764,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:763,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:766,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV(nr,{label:"Logline (  )",value:m.logline,onChange:re=>P({logline:re.target.value}),placeholder:"A one-sentence, tantalizing summary of the entire story.",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:769,columnNumber:19},this),b.jsxDEV(nr,{label:"Blurb ( )",value:m.blurb,onChange:re=>P({blurb:re.target.value}),placeholder:"A short, enticing paragraph describing the main plot, core conflict, and stakes.",minRows:4},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:776,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:768,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:767,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:762,columnNumber:13},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Key Story Arcs (  )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:790,columnNumber:19},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(LJ,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:794,columnNumber:35},this),onPress:()=>A("New key event"),children:"Add Event"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:791,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:789,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:788,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:801,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:p.map((re,X)=>b.jsxDEV("div",{style:{display:"flex",gap:"10px",alignItems:"start"},children:[b.jsxDEV(nr,{value:re,onChange:ce=>T(X,ce.target.value),minRows:2,style:{flex:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:806,columnNumber:23},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>L(X),children:b.jsxDEV(Sy,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:819,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:812,columnNumber:23},this)]},X,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:805,columnNumber:21},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:803,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:802,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:787,columnNumber:13},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"World Building Notes ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:830,columnNumber:19},this),b.jsxDEV(et,{size:"sm",variant:"flat",startContent:b.jsxDEV(LJ,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:834,columnNumber:35},this),onPress:()=>B("New world building note"),children:"Add Note"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:831,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:829,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:828,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:841,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.map((re,X)=>b.jsxDEV("div",{style:{display:"flex",gap:"10px",alignItems:"start"},children:[b.jsxDEV(nr,{value:re,onChange:ce=>W(X,ce.target.value),minRows:2,style:{flex:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:846,columnNumber:23},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"flat",color:"danger",onPress:()=>Y(X),children:b.jsxDEV(Sy,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:859,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:852,columnNumber:23},this)]},X,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:845,columnNumber:21},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:843,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:842,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:827,columnNumber:13},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Style & Genre ( & )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:869,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:868,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:871,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[b.jsxDEV(on,{label:"Genre ()",value:v.genre||"",onChange:re=>O({genre:re.target.value}),placeholder:"e.g., School Life, Fantasy, Romance"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:875,columnNumber:21},this),b.jsxDEV(on,{label:"Content Rating",value:v.content_rating||"",onChange:re=>O({content_rating:re.target.value}),placeholder:"e.g., Teen, Young Adult, Mature"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:881,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:874,columnNumber:19},this),b.jsxDEV(nr,{label:"Sub-genres ( , comma-separated)",value:((H=v.sub_genres)==null?void 0:H.join(", "))||"",onChange:re=>O({sub_genres:re.target.value.split(",").map(X=>X.trim()).filter(Boolean)}),placeholder:"e.g., slice of life, drama, action",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:889,columnNumber:19},this),b.jsxDEV(nr,{label:"Themes (, comma-separated)",value:((q=v.themes)==null?void 0:q.join(", "))||"",onChange:re=>O({themes:re.target.value.split(",").map(X=>X.trim()).filter(Boolean)}),placeholder:"e.g., coming of age, friendship, competition",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:897,columnNumber:19},this),b.jsxDEV(nr,{label:"Tone ()",value:v.tone||"",onChange:re=>O({tone:re.target.value}),placeholder:"e.g., Serious with occasional humor",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:905,columnNumber:19},this),b.jsxDEV(on,{label:"Formality Level",value:v.formality_level||"",onChange:re=>O({formality_level:re.target.value}),placeholder:"e.g., high, medium, low"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:913,columnNumber:19},this),b.jsxDEV(on,{label:"Dialogue Style",value:v.dialogue_style||"",onChange:re=>O({dialogue_style:re.target.value}),placeholder:"e.g., natural and age-appropriate"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:920,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:873,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:872,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:867,columnNumber:13},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Translation Guidelines ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:932,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:931,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:934,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV(on,{label:"Name Format",value:v.name_format||"",onChange:re=>O({name_format:re.target.value}),placeholder:"e.g., english_given_name english_surname"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:937,columnNumber:19},this),b.jsxDEV(nr,{label:"Honorific Usage",value:v.honorific_usage||"",onChange:re=>O({honorific_usage:re.target.value}),placeholder:"Guidelines for translating Korean honorifics",minRows:3},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:944,columnNumber:19},this),b.jsxDEV(nr,{label:"Formal Speech Level",value:v.formal_speech_level||"",onChange:re=>O({formal_speech_level:re.target.value}),placeholder:"How to match English formality to Korean speech levels",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:952,columnNumber:19},this),b.jsxDEV(on,{label:"Narrative Vocabulary",value:v.narrative_vocabulary||"",onChange:re=>O({narrative_vocabulary:re.target.value}),placeholder:"e.g., medium, elevate where necessary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:960,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:936,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:935,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:930,columnNumber:13},this),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{style:{fontWeight:"bold",fontSize:"16px",margin:0},children:"Narrative Style ( )"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:972,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:971,columnNumber:15},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:974,columnNumber:15},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[b.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:[b.jsxDEV(io,{label:"Point of View",selectedKeys:(F=v.narrative_style)!=null&&F.point_of_view?[v.narrative_style.point_of_view]:[],onChange:re=>O({narrative_style:{...v.narrative_style,point_of_view:re.target.value}}),children:[b.jsxDEV(jn,{value:"first-person",children:"1st Person"},"first-person",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:985,columnNumber:23},this),b.jsxDEV(jn,{value:"second-person",children:"2nd Person"},"second-person",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:986,columnNumber:23},this),b.jsxDEV(jn,{value:"third-person",children:"3rd Person"},"third-person",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:987,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:978,columnNumber:21},this),b.jsxDEV(io,{label:"Tense",selectedKeys:(J=v.narrative_style)!=null&&J.tense?[v.narrative_style.tense]:[],onChange:re=>O({narrative_style:{...v.narrative_style,tense:re.target.value}}),children:[b.jsxDEV(jn,{value:"past",children:"Past"},"past",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:997,columnNumber:23},this),b.jsxDEV(jn,{value:"present",children:"Present"},"present",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:998,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:990,columnNumber:21},this),b.jsxDEV(on,{label:"Voice",value:((Z=v.narrative_style)==null?void 0:Z.voice)||"",onChange:re=>O({narrative_style:{...v.narrative_style,voice:re.target.value}}),placeholder:"e.g., introspective"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:1001,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:977,columnNumber:19},this),b.jsxDEV(nr,{label:"Common Expressions (comma-separated)",value:((oe=(G=v.narrative_style)==null?void 0:G.common_expressions)==null?void 0:oe.join(", "))||"",onChange:re=>O({narrative_style:{...v.narrative_style,common_expressions:re.target.value.split(",").map(X=>X.trim()).filter(Boolean)}}),placeholder:"e.g., ,  ",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:1011,columnNumber:19},this),b.jsxDEV(nr,{label:"Atmosphere Descriptors (comma-separated)",value:((te=(ae=v.narrative_style)==null?void 0:ae.atmosphere_descriptors)==null?void 0:te.join(", "))||"",onChange:re=>O({narrative_style:{...v.narrative_style,atmosphere_descriptors:re.target.value.split(",").map(X=>X.trim()).filter(Boolean)}}),placeholder:"e.g., tense, melancholic, warm",minRows:2},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:1024,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:976,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:975,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:970,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:761,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:135,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/glossary/GlossaryPanel.tsx",lineNumber:57,columnNumber:5},this)}function Mrt(){const t=$t(h=>h.characters),e=$t(h=>h.events),[n,r]=R.useState(null),[i,a]=R.useState(null),[s,o]=R.useState(60),[l,c]=R.useState(!1);R.useEffect(()=>{t.length>0&&!n&&r(t[0])},[t]);const f=h=>{c(!0),h.preventDefault()};return R.useEffect(()=>{const h=p=>{if(l){const v=document.getElementById("glossary-container");if(v){const y=v.getBoundingClientRect(),x=(p.clientY-y.top)/y.height*100;o(Math.max(20,Math.min(80,x)))}}},m=()=>{c(!1)};return l&&(document.addEventListener("mousemove",h),document.addEventListener("mouseup",m)),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",m)}},[l]),b.jsxDEV("div",{style:{display:"flex",height:"100vh",background:"#f5f5f5"},children:[b.jsxDEV("div",{id:"glossary-container",style:{width:"60%",height:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid #ddd",position:"relative"},children:[b.jsxDEV("div",{style:{padding:"20px",background:"white",borderBottom:"1px solid #ddd"},children:[b.jsxDEV("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:0},children:"Visual Story Analysis"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:73,columnNumber:11},this),b.jsxDEV("p",{style:{color:"#666",marginTop:"5px"},children:[t.length," characters  ",e.length," events"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:76,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:66,columnNumber:9},this),b.jsxDEV("div",{style:{height:`${s}%`,display:"flex",flexDirection:"column",background:"white"},children:[b.jsxDEV("div",{style:{padding:"20px 20px 10px 20px",background:"white",borderBottom:"1px solid #e5e7eb"},children:[b.jsxDEV("h2",{style:{fontSize:"18px",fontWeight:"bold",margin:0,color:"#667eea"},children:"Character Relationships"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:90,columnNumber:13},this),b.jsxDEV("p",{style:{fontSize:"13px",color:"#888",marginTop:"5px"},children:"    "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:89,columnNumber:11},this),b.jsxDEV("div",{style:{flex:1,overflow:"auto",background:"white",position:"relative"},children:b.jsxDEV(Kce,{characters:t,onCharacterSelect:r,selectedCharacterId:n==null?void 0:n.id},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:99,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:98,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:81,columnNumber:9},this),b.jsxDEV("div",{onMouseDown:f,style:{height:"8px",background:l?"#667eea":"#e5e7eb",cursor:"ns-resize",display:"flex",alignItems:"center",justifyContent:"center",transition:l?"none":"background 0.2s",position:"relative"},children:b.jsxDEV("div",{style:{width:"40px",height:"4px",background:l?"white":"#9ca3af",borderRadius:"2px",transition:"background 0.2s"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:107,columnNumber:9},this),b.jsxDEV("div",{style:{flex:1,background:"#f9fafb",borderTop:"1px solid #ddd",overflow:"auto",display:"flex",flexDirection:"column"},children:b.jsxDEV(jrt,{events:e,characters:t,onEventSelect:a,selectedEventId:i==null?void 0:i.id,isExpanded:!0},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:141,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:131,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:55,columnNumber:7},this),b.jsxDEV(Irt,{characters:t,events:e,selectedCharacter:n,selectedEvent:i,onCharacterSelect:r,onEventSelect:a},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:151,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/GlossaryViewer.tsx",lineNumber:54,columnNumber:5},this)}function Vrt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function $rt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(t)}function Lrt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"2",fill:"none"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:".5",fill:"none"},child:[]},{tag:"circle",attr:{cx:"6",cy:"6",r:"2",fill:"none"},child:[]},{tag:"path",attr:{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"},child:[]}]})(t)}function Frt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"},child:[]}]})(t)}function Brt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.996.996 0 0 0-1.41 0L1.29 18.96a.996.996 0 0 0 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05a.996.996 0 0 0 0-1.41l-2.33-2.35zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12-2.44 2.44z"},child:[]}]})(t)}function Urt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function Wrt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17.73 12.02 3.98-3.98a.996.996 0 0 0 0-1.41l-4.34-4.34a.996.996 0 0 0-1.41 0l-3.98 3.98L8 2.29a1.001 1.001 0 0 0-1.41 0L2.25 6.63a.996.996 0 0 0 0 1.41l3.98 3.98L2.25 16a.996.996 0 0 0 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29.26 0 .51-.1.71-.29l4.34-4.34a.996.996 0 0 0 0-1.41l-3.99-3.98zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62-3.62 3.63zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2.66 9.34-3.63-3.62 3.63-3.63 3.62 3.62-3.62 3.63z"},child:[]}]})(t)}function zrt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function oZ(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function Hrt(t){return nn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 4v1.38c-.83-.33-1.72-.5-2.61-.5-1.79 0-3.58.68-4.95 2.05l3.33 3.33h1.11v1.11c.86.86 1.98 1.31 3.11 1.36V15H6v3c0 1.1.9 2 2 2h10c1.66 0 3-1.34 3-3V4H9zm-1.11 6.41V8.26H5.61L4.57 7.22a5.07 5.07 0 0 1 1.82-.34c1.34 0 2.59.52 3.54 1.46l1.41 1.41-.2.2a2.7 2.7 0 0 1-1.92.8c-.47 0-.93-.12-1.33-.34zM19 17c0 .55-.45 1-1 1s-1-.45-1-1v-2h-6v-2.59c.57-.23 1.1-.57 1.56-1.03l.2-.2L15.59 14H17v-1.41l-6-5.97V6h8v11z"},child:[]}]})(t)}const Grt=`Alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice she had peeped into the book her sister was reading, but it had no pictures or conversations in it, and what is the use of a book, thought Alice without pictures or conversations?

So she was considering in her own mind (as well as she could, for the hot day made her feel very sleepy and stupid), whether the pleasure of making a daisy-chain would be worth the trouble of getting up and picking the daisies, when suddenly a White Rabbit with pink eyes ran close by her.

There was nothing so _very_ remarkable in that; nor did Alice think it so _very_ much out of the way to hear the Rabbit say to itself, Oh dear! Oh dear! I shall be late! (when she thought it over afterwards, it occurred to her that she ought to have wondered at this, but at the time it all seemed quite natural); but when the Rabbit actually _took a watch out of its waistcoat-pocket_, and looked at it, and then hurried on, Alice started to her feet, for it flashed across her mind that she had never before seen a rabbit with either a waistcoat-pocket, or a watch to take out of it, and burning with curiosity, she ran across the field after it, and fortunately was just in time to see it pop down a large rabbit-hole under the hedge.

















`,Krt={entities:[{name:"Alice",emoji:"",properties:[{name:"curious",value:8},{name:"sleepy",value:6},{name:"bored",value:7}]},{name:"Sister",emoji:"",properties:[{name:"reading",value:7}]},{name:"Book",emoji:"",properties:[{name:"pictureless",value:10},{name:"conversationless",value:10}]},{name:"Daisy-chain",emoji:"",properties:[{name:"pleasurable",value:5}]},{name:"White Rabbit",emoji:"",properties:[{name:"anxious",value:9},{name:"remarkable",value:7}]},{name:"Watch",emoji:"",properties:[{name:"unusual",value:8}]},{name:"Rabbit-hole",emoji:"",properties:[{name:"large",value:7}]}],locations:[{name:"bank",emoji:""},{name:"field",emoji:""},{name:"hedge",emoji:""}],actions:[{name:"sit by",source:"Alice",target:"Sister",location:"bank",passage:"Alice was beginning to get very tired of sitting by her sister on the bank."},{name:"peep into",source:"Alice",target:"Book",location:"bank",passage:"once or twice she had peeped into the book her sister was reading."},{name:"consider making",source:"Alice",target:"Daisy-chain",location:"bank",passage:"she was considering in her own mind... whether the pleasure of making a daisy-chain would be worth the trouble of getting up and picking the daisies."},{name:"run by",source:"White Rabbit",target:"Alice",location:"bank",passage:"when suddenly a White Rabbit with pink eyes ran close by her."},{name:"say to",source:"White Rabbit",target:"itself",location:"unknown",passage:"nor did Alice think it so very much out of the way to hear the Rabbit say to itself, 'Oh dear! Oh dear! I shall be late!'."},{name:"take out",source:"White Rabbit",target:"Watch",location:"unknown",passage:"but when the Rabbit actually took a watch out of its waistcoat-pocket."},{name:"look at",source:"White Rabbit",target:"Watch",location:"unknown",passage:"and looked at it."},{name:"hurry on",source:"White Rabbit",target:"unknown",location:"unknown",passage:"and then hurried on."},{name:"run after",source:"Alice",target:"White Rabbit",location:"field",passage:"burning with curiosity, she ran across the field after it."},{name:"pop down",source:"White Rabbit",target:"Rabbit-hole",location:"hedge",passage:"and fortunately was just in time to see it pop down a large rabbit-hole under the hedge."}]},Yrt=`Anna sat on the beach, watching the waves crash against the shore. The wind blew her hair around, but she didnt mind. She loved the sound of the ocean. It helped her forget her worries, at least for a little while. She had been thinking about her brother, David, who lived far away. They hadnt spoken in weeks, and she missed him.

David was in the city, sitting at his desk, staring at his computer. He was tired from a long day of work. His job was stressful, and he often felt lonely in the big, noisy city. He wanted to call Anna, but he was afraid she might be too busy. He knew she was going through a tough time, and he didnt want to add to her troubles.

Meanwhile, their friend Emma was in the mountains, hiking up a trail. She loved the peacefulness of nature. The trees were tall, and the air was fresh. As she reached the top of the hill, she thought about Anna and David. They used to do everything together, but now they were all in different places. She hoped they could reunite soon, even if just for a little while.`,Jrt={locations:[{name:"Beach",emoji:""},{name:"City",emoji:""},{name:"Mountains",emoji:""}],entities:[{name:"Anna",emoji:"",properties:[{name:"thoughtful",value:8},{name:"calm",value:7},{name:"nostalgic",value:6}]},{name:"David",emoji:"",properties:[{name:"tired",value:9},{name:"lonely",value:7},{name:"considerate",value:6}]},{name:"Emma",emoji:"",properties:[{name:"adventurous",value:8},{name:"peaceful",value:7},{name:"hopeful",value:6}]},{name:"Computer",emoji:"",properties:[{name:"distracting",value:8},{name:"stressful",value:7},{name:"isolating",value:6}]},{name:"Waves",emoji:"",properties:[{name:"calming",value:8},{name:"soothing",value:7},{name:"refreshing",value:6}]},{name:"Wind",emoji:"",properties:[{name:"refreshing",value:8},{name:"playful",value:7},{name:"invigorating",value:6}]}],actions:[{name:"sat",source:"Anna",target:"Anna",location:"Beach",passage:"Anna sat on the beach, watching the waves crash against the shore."},{name:"watching",source:"Anna",target:"Waves",location:"Beach",passage:"Anna sat on the beach, watching the waves crash against the shore."},{name:"blew hair",source:"Wind",target:"Anna",location:"Beach",passage:"The wind blew her hair around, but she didnt mind."},{name:"sitting",source:"David",target:"David",location:"City",passage:"David was in the city, sitting at his desk, staring at his computer."},{name:"staring",source:"David",target:"Computer",location:"City",passage:"David was in the city, sitting at his desk, staring at his computer."},{name:"wanted to call",source:"David",target:"Anna",location:"City",passage:"He wanted to call Anna, but he was afraid she might be too busy."},{name:"hiking up",source:"Emma",target:"Emma",location:"Mountains",passage:"Meanwhile, their friend Emma was in the mountains, hiking up a trail."},{name:"reach top",source:"Emma",target:"Emma",location:"Mountains",passage:"As she reached the top of the hill, she thought about Anna and David."},{name:"think about",source:"Emma",target:"Anna",location:"Mountains",passage:"As she reached the top of the hill, she thought about Anna and David."},{name:"think about",source:"Emma",target:"David",location:"Mountains",passage:"As she reached the top of the hill, she thought about Anna and David."}]};function qrt(){const[t,e]=R.useState(""),[n,r]=R.useState(-1),i=Ce(l=>l.setOpenAIKey),a=Ce(l=>l.reset),s=br(l=>l.reset);function o(l,c){if(a(),s(),Ce.getState().setTextState([{children:[{text:l}]}],!0,!1),Ce.getState().setIsStale(!1),mu.getInstance().previousText=Ce.getState().text,mu.getInstance().onUpdate(),c){const f=qF(c),h=JP(c),m=c.actions.map(p=>JF({actions:[p]},p.passage,f)).flat();Ce.getState().setEntityNodes(f),Ce.getState().setLocationNodes(h),Ce.getState().setActionEdges(m)}else{const f=JP({locations:[{name:"unknown",emoji:""}]});Ce.getState().setLocationNodes(f),Ce.getState().setEntityNodes([]),Ce.getState().setActionEdges([])}window.location.hash=`/free-form?k=${btoa(t)}`}return b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:"100vh"},children:b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:[b.jsxDEV("span",{style:{fontSize:25},children:b.jsxDEV(Hrt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:55,columnNumber:50},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:55,columnNumber:21},this),b.jsxDEV("span",{style:{marginLeft:5},children:"Visual Story-Writing"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:55,columnNumber:73},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:55,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:56,columnNumber:9},this),b.jsxDEV(vn,{children:[b.jsxDEV("p",{children:["To run the examples below, please paste an OpenAI API key. You can obtain one from ",b.jsxDEV("a",{href:"https://platform.openai.com/account/api-keys",children:"here"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:58,columnNumber:99},this),"."]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:58,columnNumber:13},this),b.jsxDEV(on,{variant:"faded",label:"API Key",placeholder:"sk-...",style:{marginTop:10},onChange:l=>{e(l.target.value),i(l.target.value)}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:59,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:57,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:66,columnNumber:9},this),b.jsxDEV(vn,{children:[b.jsxDEV("span",{style:{fontWeight:800},children:"Shortcuts to try out Visual Story-Writing on examples"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:68,columnNumber:13},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:40,marginTop:10},children:[b.jsxDEV(et,{isDisabled:t.length===0,onClick:()=>{o(Grt,Krt)},children:"Alice in Wonderland"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:70,columnNumber:17},this),b.jsxDEV(et,{isDisabled:t.length===0,onClick:()=>{o(Pk,Ak)},children:"Sled Adventure"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:77,columnNumber:17},this),b.jsxDEV(et,{isDisabled:t.length===0,onClick:()=>{o(Yrt,Jrt)},children:"Waves Apart"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:84,columnNumber:1},this),b.jsxDEV(et,{isDisabled:t.length===0,onClick:()=>{o("",null)},children:"Blank Page"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:91,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:69,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:67,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:99,columnNumber:9},this),b.jsxDEV(vn,{children:[b.jsxDEV("span",{style:{fontWeight:800},children:"Run study 1"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:101,columnNumber:13},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center",gap:40,marginTop:10},children:[b.jsxDEV(io,{isDisabled:t.length===0,variant:"faded",label:"Participant ID",className:"max-w-xs",onChange:l=>r(parseInt(l.target.value)),children:Array.from({length:12},(l,c)=>c).map(l=>b.jsxDEV(jn,{value:l+1,textValue:"P"+(l+1),children:["P",l+1]},l,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:107,columnNumber:74},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:103,columnNumber:17},this),b.jsxDEV(et,{isDisabled:t.length===0||n===-1,onClick:()=>{a(),s(),window.location.hash="/study?pid="+(n+1)+`&k=${btoa(t)}&studyType=READING`},children:"Start"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:110,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:100,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:120,columnNumber:9},this),b.jsxDEV(vn,{children:[b.jsxDEV("span",{style:{fontWeight:800},children:"Run study 2"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:122,columnNumber:13},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center",gap:40,marginTop:10},children:[b.jsxDEV(io,{isDisabled:t.length===0,variant:"faded",label:"Participant ID",className:"max-w-xs",onChange:l=>r(parseInt(l.target.value)),children:Array.from({length:12},(l,c)=>c).map(l=>b.jsxDEV(jn,{value:l+1,textValue:"P"+(l+1),children:["P",l+1]},l,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:128,columnNumber:74},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:124,columnNumber:17},this),b.jsxDEV(et,{isDisabled:t.length===0||n===-1,onClick:()=>{a(),s(),window.location.hash="/study?pid="+(n+1)+`&k=${btoa(t)}&studyType=WRITING`},children:"Start"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:131,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:121,columnNumber:9},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:141,columnNumber:9},this),b.jsxDEV(vn,{children:[b.jsxDEV("span",{style:{fontWeight:800},children:"Translation System (LangGraph)"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:143,columnNumber:13},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center",gap:40,marginTop:10},children:b.jsxDEV(et,{onClick:()=>{window.location.hash="/translation"},children:"Open Translation System"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:145,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:144,columnNumber:13},this),b.jsxDEV("p",{className:"text-sm text-gray-600 mt-2",children:"Korean to Japanese/English translation with AI-powered glossary building"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:151,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:142,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:54,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/Launcher.tsx",lineNumber:53,columnNumber:10},this)}const Xrt={setup:"default",glossary_running:"warning",glossary_completed:"success",translating:"warning",translation_completed:"success",reviewing:"primary",review_completed:"success"},Zrt={setup:"Setup",glossary_running:"Building Glossary",glossary_completed:"Glossary Ready",translating:"Translating",translation_completed:"Translation Complete",reviewing:"Under Review",review_completed:"Review Complete"},Qrt=({filterType:t})=>{const{projects:e,selectProject:n,deleteProject:r}=Bs(),i=t?e.filter(o=>o.type===t):e,a=o=>{const l=new Date(o);return l.toLocaleDateString()+" "+l.toLocaleTimeString()},s=(o,l)=>{l.stopPropagation(),confirm("Are you sure you want to delete this project?")&&r(o)};return i.length===0?b.jsxDEV("div",{className:"text-center py-12",children:b.jsxDEV("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:["No projects yet. Create your first ",t||""," project!"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:53,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:52,columnNumber:7},void 0):b.jsxDEV("div",{children:b.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(o=>b.jsxDEV(wn,{isPressable:!0,onPress:()=>n(o.id),className:"hover:shadow-lg transition-shadow",children:[b.jsxDEV(Kn,{className:"flex justify-between",children:[b.jsxDEV("div",{className:"flex flex-col flex-1",children:[b.jsxDEV("p",{className:"text-lg font-semibold",children:o.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:72,columnNumber:17},void 0),b.jsxDEV("p",{className:"text-sm text-gray-500",children:o.type==="glossary"?"Glossary Builder":"Translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:73,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:71,columnNumber:15},void 0),b.jsxDEV(et,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:l=>s(o.id,l),children:b.jsxDEV(qKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:84,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:77,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:70,columnNumber:13},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"space-y-3",children:[b.jsxDEV(Fn,{color:Xrt[o.status]||"default",size:"sm",variant:"flat",children:Zrt[o.status]||o.status},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:90,columnNumber:17},void 0),o.type==="translation"&&b.jsxDEV("div",{children:[b.jsxDEV("div",{className:"flex justify-between text-sm mb-1",children:[b.jsxDEV("span",{children:"Progress"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:101,columnNumber:23},void 0),b.jsxDEV("span",{children:[Math.round(o.translation_progress*100),"%"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:102,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:100,columnNumber:21},void 0),b.jsxDEV(ZE,{value:o.translation_progress*100,color:o.translation_progress===1?"success":"primary",size:"sm"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:104,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:99,columnNumber:19},void 0),b.jsxDEV("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[b.jsxDEV("p",{children:["Chunks: ",o.chunks.length]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:113,columnNumber:19},void 0),b.jsxDEV("p",{children:["Language: ",o.language==="ja"?"Japanese":"English"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:114,columnNumber:19},void 0),o.glossary&&b.jsxDEV("p",{children:["Glossary:"," ",Object.keys(o.glossary.characters).length," characters,"," ",Object.keys(o.glossary.terms).length," terms"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:116,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:112,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:89,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:88,columnNumber:13},void 0),b.jsxDEV(xTe,{children:b.jsxDEV("p",{className:"text-xs text-gray-500",children:["Updated: ",a(o.updated_at)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:127,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:126,columnNumber:13},void 0)]},o.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:64,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:62,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectList.tsx",lineNumber:61,columnNumber:5},void 0)},eit=()=>{const[t,e]=it.useState([]),n=Bs(c=>c.tasks);it.useEffect(()=>{r()},[]),it.useEffect(()=>{Object.values(n).filter(h=>h.type==="glossary_extraction").some(h=>h.status==="completed")&&r()},[n]);const r=()=>{const c=localStorage.getItem("vsw.projects")||"[]",h=JSON.parse(c).filter(m=>m.glossary&&(!m.type||m.type==="glossary"));e(h)},i=c=>{localStorage.setItem("vsw.currentProjectId",c),window.location.hash="/glossary-builder"},a=c=>{if(!confirm("Are you sure you want to delete this project?"))return;const f=localStorage.getItem("vsw.projects")||"[]",m=JSON.parse(f).filter(p=>p.id!==c);localStorage.setItem("vsw.projects",JSON.stringify(m)),r()},s=c=>new Date(c).toLocaleString(),o=c=>{var y,x,S,_,N,k,P,O,A,T;const f=((x=(y=c.glossary)==null?void 0:y.characters)==null?void 0:x.length)||0,h=((_=(S=c.glossary)==null?void 0:S.events)==null?void 0:_.length)||0,m=((k=(N=c.glossary)==null?void 0:N.locations)==null?void 0:k.length)||0,p=((O=(P=c.glossary)==null?void 0:P.terms)==null?void 0:O.length)||0,v=(((T=(A=c.glossary)==null?void 0:A.fullText)==null?void 0:T.length)||0)>0;return{chars:f,events:h,locations:m,terms:p,hasText:v}},l=c=>Object.values(n).filter(h=>{var m;return h.type==="glossary_extraction"&&((m=h.metadata)==null?void 0:m.vswProjectId)===c}).sort((h,m)=>new Date(m.createdAt).getTime()-new Date(h.createdAt).getTime())[0];return b.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(c=>{var m,p;const f=o(c),h=l(c.id);return b.jsxDEV(wn,{isPressable:!0,isHoverable:!0,className:"bg-white dark:bg-gray-800 hover:shadow-lg transition-shadow",onPress:()=>i(c.id),children:[b.jsxDEV(Kn,{className:"flex-col items-start gap-2",children:b.jsxDEV("div",{className:"flex justify-between items-start w-full",children:[b.jsxDEV("div",{className:"flex-1",children:[b.jsxDEV("div",{className:"flex items-center gap-2",children:[b.jsxDEV("h3",{className:"text-lg font-semibold",children:c.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:102,columnNumber:21},void 0),h&&(h.status==="running"||h.status==="pending")&&b.jsxDEV(Fn,{size:"sm",color:"warning",variant:"flat",children:"Processing..."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:104,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:101,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-xs text-gray-500",children:["Updated: ",s(c.updatedAt)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:109,columnNumber:19},void 0),h&&(h.status==="running"||h.status==="pending")&&b.jsxDEV("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[Math.round(h.progress*100),"% - ",h.message]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:113,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:100,columnNumber:17},void 0),b.jsxDEV(et,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onClick:v=>{v.stopPropagation(),a(c.id)},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:118,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:99,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:98,columnNumber:13},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"space-y-2",children:[b.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[f.chars>0&&b.jsxDEV(Fn,{size:"sm",color:"primary",variant:"flat",children:[f.chars," Characters"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:136,columnNumber:21},void 0),f.events>0&&b.jsxDEV(Fn,{size:"sm",color:"secondary",variant:"flat",children:[f.events," Events"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:141,columnNumber:21},void 0),f.locations>0&&b.jsxDEV(Fn,{size:"sm",color:"success",variant:"flat",children:[f.locations," Locations"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:146,columnNumber:21},void 0),f.terms>0&&b.jsxDEV(Fn,{size:"sm",color:"warning",variant:"flat",children:[f.terms," Terms"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:151,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:134,columnNumber:17},void 0),!f.hasText&&f.chars===0&&f.events===0?b.jsxDEV("p",{className:"text-sm text-gray-400 italic",children:"Empty project"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:158,columnNumber:19},void 0):f.hasText?b.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",Math.round((((p=(m=c.glossary)==null?void 0:m.fullText)==null?void 0:p.length)||0)/1e3),"k characters"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:160,columnNumber:19},void 0):null,b.jsxDEV("div",{className:"pt-2",children:b.jsxDEV(et,{size:"sm",color:"secondary",variant:"flat",fullWidth:!0,onPress:()=>i(c.id),children:"Open in Builder "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:166,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:165,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:133,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:132,columnNumber:13},void 0)]},c.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:91,columnNumber:11},void 0)})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlossaryProjectList.tsx",lineNumber:85,columnNumber:5},void 0)},zS={provider:"gemini",model:"gemini-2.5-pro",temperature:.3},tit={translation:Jde,enhancement:wB,proofreader:xB,layout:SB},nit={translation:qde,enhancement:wB,proofreader:xB,layout:SB},lZ=(t,e)=>(e==="ja"?nit:tit)[t]||"",rit=({isOpen:t,onClose:e,defaultType:n="translation"})=>{const{createProject:r,createTask:i}=Bs(),[a,s]=R.useState(n),[o,l]=R.useState(""),[c,f]=R.useState(""),[h,m]=R.useState("ja"),[p,v]=R.useState(""),[y,x]=R.useState(8e3),[S,_]=R.useState(200),[N,k]=R.useState(2),[P,O]=R.useState(!0),[A,T]=R.useState({}),[L,B]=R.useState(null),[W,Y]=R.useState({translation:{...zS},enhancement:{...zS},quality:{...zS},proofreader:{...zS},layout:{...zS}});R.useEffect(()=>{s(n)},[n]);const V=async()=>{if(!o.trim()||!c.trim()){alert("Please fill in all required fields");return}a==="glossary"?(I(),e()):(r({name:o.trim(),type:a,fileContent:c.trim(),chunkSize:y,overlap:S,maxRetries:N,enableProofreader:P,agentConfigs:W,language:h,glossaryJson:p||void 0,customPrompts:Object.keys(A).length>0?A:void 0}),e())},I=()=>{const J=globalThis.crypto&&"randomUUID"in globalThis.crypto?crypto.randomUUID():`p-${Date.now()}`,Z=o.trim()||`Glossary Project ${new Date().toLocaleString()}`,G=localStorage.getItem("vsw.projects")||"[]",oe=JSON.parse(G),ae={id:J,name:Z,updatedAt:Date.now(),glossary:{},view:{entityNodes:[],actionEdges:[],locationNodes:[],textState:[],isReadOnly:!1,relationsPositions:{}}};oe.unshift(ae),localStorage.setItem("vsw.projects",JSON.stringify(oe));const te=i({type:"glossary_extraction",projectId:J,metadata:{text:c.trim(),targetLanguage:h,vswProjectId:J}});yg.runTask(te).catch(re=>{console.error("Error running glossary extraction:",re),alert(`Error: ${re instanceof Error?re.message:"Unknown error"}`)}),alert(`Glossary extraction started! You can monitor progress in the top-right corner. The project "${Z}" has been created and will be updated as the task completes.`)},H=J=>{var G;const Z=(G=J.target.files)==null?void 0:G[0];if(Z){const oe=new FileReader;oe.onload=ae=>{var te;f((te=ae.target)==null?void 0:te.result)},oe.readAsText(Z)}},q=J=>{var G;const Z=(G=J.target.files)==null?void 0:G[0];if(Z){const oe=new FileReader;oe.onload=ae=>{var re;const te=(re=ae.target)==null?void 0:re.result;try{JSON.parse(te),v(te)}catch{alert("Invalid JSON file. Please upload a valid glossary JSON.")}},oe.readAsText(Z)}},F=(J,Z,G)=>{Y(oe=>({...oe,[J]:{...oe[J],[Z]:G}}))};return b.jsxDEV(b.Fragment,{children:[b.jsxDEV(By,{isOpen:t,onClose:e,size:"3xl",scrollBehavior:"inside",children:b.jsxDEV(Ly,{children:[b.jsxDEV(Fy,{children:"Create New Project"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:754,columnNumber:9},void 0),b.jsxDEV($y,{children:b.jsxDEV(qN,{selectedKey:a,onSelectionChange:J=>{s(J)},children:[b.jsxDEV(du,{title:"Translation Project",children:b.jsxDEV("div",{className:"space-y-4 pt-4",children:[b.jsxDEV(on,{label:"Project Name",placeholder:"My Translation Project",value:o,onValueChange:l,isRequired:!0},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:766,columnNumber:17},void 0),b.jsxDEV(io,{label:"Target Language",selectedKeys:[h],onChange:J=>m(J.target.value),children:[b.jsxDEV(jn,{value:"ja",children:"Japanese"},"ja",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:779,columnNumber:19},void 0),b.jsxDEV(jn,{value:"en",children:"English"},"en",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:780,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:774,columnNumber:17},void 0),b.jsxDEV("div",{children:[b.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Source Text (Korean)"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:784,columnNumber:19},void 0),b.jsxDEV("input",{type:"file",accept:".txt",onChange:H,className:"mb-2"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:787,columnNumber:19},void 0),b.jsxDEV(nr,{placeholder:"Paste your Korean text here or upload a file",value:c,onValueChange:f,minRows:6,isRequired:!0},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:793,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:783,columnNumber:17},void 0),b.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxDEV(on,{label:"Chunk Size",type:"number",value:y.toString(),onValueChange:J=>x(Number(J))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:803,columnNumber:19},void 0),b.jsxDEV(on,{label:"Overlap",type:"number",value:S.toString(),onValueChange:J=>_(Number(J))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:809,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:802,columnNumber:17},void 0),b.jsxDEV(on,{label:"Max Retries",type:"number",value:N.toString(),onValueChange:J=>k(Number(J))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:817,columnNumber:17},void 0),b.jsxDEV(ZS,{isSelected:P,onValueChange:O,children:"Enable Proofreader"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:824,columnNumber:17},void 0),b.jsxDEV("div",{className:"border-t pt-4 mt-4",children:[b.jsxDEV("h3",{className:"text-lg font-semibold mb-3",children:" Glossary (Optional)"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:832,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Upload a glossary JSON file to use predefined character names, terms, locations, events, and style guides during translation."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:833,columnNumber:19},void 0),b.jsxDEV("div",{className:"border-2 border-dashed border-blue-300 dark:border-blue-700 rounded-lg p-4 bg-blue-50 dark:bg-blue-900/20",children:[b.jsxDEV("label",{className:"block text-sm font-semibold mb-2 text-blue-900 dark:text-blue-300",children:" Upload Glossary JSON"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:838,columnNumber:21},void 0),b.jsxDEV("input",{type:"file",accept:".json",onChange:q,className:`block w-full text-sm text-gray-500 dark:text-gray-400
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-full file:border-0
                        file:text-sm file:font-semibold
                        file:bg-blue-50 file:text-blue-700
                        hover:file:bg-blue-100
                        dark:file:bg-blue-900/30 dark:file:text-blue-300
                        cursor-pointer`},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:841,columnNumber:21},void 0),p&&(()=>{var J;try{const Z=JSON.parse(p),G=X=>X?Array.isArray(X)?X.length:Object.keys(X).length:0,oe=G(Z.characters),ae=G(Z.terms),te=G(Z.places||Z.locations),re=((J=Z.events)==null?void 0:J.length)||0;return b.jsxDEV("div",{className:"mt-3 space-y-2",children:[b.jsxDEV("div",{className:"flex items-center gap-2",children:[b.jsxDEV(Fn,{color:"success",size:"sm",variant:"flat",children:" Glossary Loaded"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:870,columnNumber:31},void 0),b.jsxDEV(et,{size:"sm",variant:"light",color:"danger",onPress:()=>v(""),children:"Remove"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:873,columnNumber:31},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:869,columnNumber:29},void 0),b.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[oe>0&&b.jsxDEV("div",{className:"bg-white dark:bg-gray-700 rounded px-2 py-1",children:[b.jsxDEV("span",{className:"font-semibold",children:oe},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:885,columnNumber:35},void 0)," Characters"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:884,columnNumber:33},void 0),ae>0&&b.jsxDEV("div",{className:"bg-white dark:bg-gray-700 rounded px-2 py-1",children:[b.jsxDEV("span",{className:"font-semibold",children:ae},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:890,columnNumber:35},void 0)," Terms"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:889,columnNumber:33},void 0),te>0&&b.jsxDEV("div",{className:"bg-white dark:bg-gray-700 rounded px-2 py-1",children:[b.jsxDEV("span",{className:"font-semibold",children:te},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:895,columnNumber:35},void 0)," Places"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:894,columnNumber:33},void 0),re>0&&b.jsxDEV("div",{className:"bg-white dark:bg-gray-700 rounded px-2 py-1",children:[b.jsxDEV("span",{className:"font-semibold",children:re},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:900,columnNumber:35},void 0)," Events"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:899,columnNumber:33},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:882,columnNumber:29},void 0),Z.style_guide&&b.jsxDEV("div",{className:"text-xs bg-white dark:bg-gray-700 rounded p-2",children:[b.jsxDEV("span",{className:"font-semibold",children:"Style Guide:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:906,columnNumber:33},void 0)," ",Z.style_guide.genre||"N/A",Z.style_guide.content_rating&&`  ${Z.style_guide.content_rating}`]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:905,columnNumber:31},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:868,columnNumber:27},void 0)}catch{return b.jsxDEV("div",{className:"mt-2",children:b.jsxDEV(Fn,{color:"warning",size:"sm",variant:"flat",children:" Invalid JSON"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:915,columnNumber:29},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:914,columnNumber:27},void 0)}})(),b.jsxDEV("p",{className:"text-xs text-gray-500 mt-2",children:"Supports both simple and extended glossary formats (characters, terms, places, events, style_guide, etc.)"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:922,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:837,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:831,columnNumber:17},void 0),b.jsxDEV("div",{className:"border-t pt-4 mt-4",children:[b.jsxDEV("h3",{className:"text-lg font-semibold mb-3",children:"Agent Configuration"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:929,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Configure the LLM models for each translation stage"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:930,columnNumber:19},void 0),["translation","enhancement","quality","proofreader","layout"].map(J=>{var G,oe,ae,te;const Z=J!=="quality";return b.jsxDEV("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[b.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[b.jsxDEV("h4",{className:"font-medium capitalize",children:J},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:941,columnNumber:27},void 0),Z&&b.jsxDEV(et,{size:"sm",variant:"flat",color:"secondary",onPress:()=>{const re=J;B({agent:re,prompt:A[re]||lZ(re,h)})},children:" Edit Prompt"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:943,columnNumber:29},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:940,columnNumber:25},void 0),b.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:[b.jsxDEV(io,{label:"Provider",size:"sm",selectedKeys:[((G=W[J])==null?void 0:G.provider)||"gemini"],onChange:re=>F(J,"provider",re.target.value),children:[b.jsxDEV(jn,{value:"gemini",children:"Gemini"},"gemini",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:966,columnNumber:29},void 0),b.jsxDEV(jn,{value:"openai",children:"OpenAI"},"openai",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:967,columnNumber:29},void 0),b.jsxDEV(jn,{value:"anthropic",children:"Anthropic"},"anthropic",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:968,columnNumber:29},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:960,columnNumber:27},void 0),b.jsxDEV(on,{label:"Model",size:"sm",value:((oe=W[J])==null?void 0:oe.model)||"",onValueChange:re=>F(J,"model",re)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:971,columnNumber:27},void 0),b.jsxDEV(on,{label:"Temperature",size:"sm",type:"number",step:"0.1",value:((te=(ae=W[J])==null?void 0:ae.temperature)==null?void 0:te.toString())||"0.3",onValueChange:re=>F(J,"temperature",parseFloat(re))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:978,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:959,columnNumber:25},void 0),Z&&A[J]&&b.jsxDEV("div",{className:"mt-2",children:b.jsxDEV(Fn,{size:"sm",color:"success",variant:"flat",children:" Custom prompt set"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:989,columnNumber:29},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:988,columnNumber:27},void 0)]},J,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:939,columnNumber:23},void 0)})]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:928,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:765,columnNumber:15},void 0)},"translation",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:764,columnNumber:13},void 0),b.jsxDEV(du,{title:" Glossary Builder",children:b.jsxDEV("div",{className:"space-y-4 pt-4",children:[b.jsxDEV("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800",children:[b.jsxDEV("h3",{className:"text-lg font-semibold mb-2",children:"Create Interactive Glossary Project"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1004,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Analyze your story with AI-powered extraction of characters, events, locations, and relationships. Visualize with interactive graphs and export to JSON."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1005,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1003,columnNumber:17},void 0),b.jsxDEV(on,{label:"Project Name",placeholder:"e.g., My Novel - Chapter 1",value:o,onValueChange:l,isRequired:!0,description:"Give your glossary project a descriptive name"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1011,columnNumber:17},void 0),b.jsxDEV("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50",children:[b.jsxDEV("label",{className:"block text-sm font-semibold mb-3 text-gray-900 dark:text-white",children:" Upload Your Story (Korean Text)"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1021,columnNumber:19},void 0),b.jsxDEV("div",{className:"mb-3",children:[b.jsxDEV("input",{type:"file",accept:".txt",onChange:H,className:`block w-full text-sm text-gray-500 dark:text-gray-400
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-full file:border-0
                        file:text-sm file:font-semibold
                        file:bg-purple-50 file:text-purple-700
                        hover:file:bg-purple-100
                        dark:file:bg-purple-900/30 dark:file:text-purple-300
                        cursor-pointer`},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1026,columnNumber:21},void 0),b.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a .txt file containing your Korean novel or story"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1039,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1025,columnNumber:19},void 0),b.jsxDEV("div",{className:"relative",children:[b.jsxDEV("div",{className:"absolute inset-0 flex items-center",children:b.jsxDEV("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1046,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1045,columnNumber:21},void 0),b.jsxDEV("div",{className:"relative flex justify-center text-xs",children:b.jsxDEV("span",{className:"px-2 bg-gray-50 dark:bg-gray-800/50 text-gray-500",children:"OR"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1049,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1048,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1044,columnNumber:19},void 0),b.jsxDEV(nr,{placeholder:`Paste your Korean text here...

Example:
 25  .   ,    ...`,value:c,onValueChange:f,minRows:8,isRequired:!0,classNames:{input:"text-sm"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1053,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-xs text-gray-500 mt-2",children:c.length>0?`${c.length} characters (~ ${Math.round(c.length/8e3)} chunks)`:"Text will be processed in chunks of ~8000 characters"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1063,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1020,columnNumber:17},void 0),b.jsxDEV(io,{label:"Target Language for Translation",selectedKeys:[h],onChange:J=>m(J.target.value),description:"The language you plan to translate this story into",children:[b.jsxDEV(jn,{value:"ja",children:"Japanese ()"},"ja",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1076,columnNumber:19},void 0),b.jsxDEV(jn,{value:"en",children:"English"},"en",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1077,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1070,columnNumber:17},void 0),b.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[b.jsxDEV("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:[b.jsxDEV("strong",{children:" Using Gemini 2.5 Pro"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1082,columnNumber:21},void 0)," for intelligent analysis. The AI will extract characters, events, locations, terms, relationships, and story structure."]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1081,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-xs text-blue-800 dark:text-blue-300 mt-2",children:[b.jsxDEV("strong",{children:" Background Processing:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1086,columnNumber:21},void 0)," Once created, the task will run in the background. You can monitor progress in the top-right corner and navigate to other pages while it processes."]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1085,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1080,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1002,columnNumber:15},void 0)},"glossary",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1001,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:758,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:757,columnNumber:9},void 0),b.jsxDEV(Rw,{children:[b.jsxDEV(et,{variant:"light",onPress:e,children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1095,columnNumber:11},void 0),b.jsxDEV(et,{color:"primary",onPress:V,isDisabled:!o.trim()||!c.trim(),children:"Create Project"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1101,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1094,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:753,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:747,columnNumber:5},void 0),L&&b.jsxDEV(By,{isOpen:!!L,onClose:()=>B(null),size:"3xl",scrollBehavior:"inside",children:b.jsxDEV(Ly,{children:[b.jsxDEV(Fy,{children:["Edit ",L.agent.charAt(0).toUpperCase()+L.agent.slice(1)," Prompt"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1121,columnNumber:11},void 0),b.jsxDEV($y,{children:b.jsxDEV("div",{className:"space-y-4",children:[b.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:b.jsxDEV("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:[b.jsxDEV("strong",{children:" Tip:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1128,columnNumber:19},void 0)," You can customize the prompt below. Leave it as is to use the default prompt. The prompt will be used during the ",L.agent," stage of translation."]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1127,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1126,columnNumber:15},void 0),b.jsxDEV(nr,{value:L.prompt,onValueChange:J=>B(Z=>Z?{...Z,prompt:J}:null),minRows:20,maxRows:30,placeholder:"Enter your custom prompt here...",classNames:{input:"font-mono text-sm"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1133,columnNumber:15},void 0),b.jsxDEV("div",{className:"flex gap-2",children:[b.jsxDEV(et,{size:"sm",variant:"flat",color:"warning",onPress:()=>{L&&B({...L,prompt:lZ(L.agent,h)})},children:"Reset to Default"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1145,columnNumber:17},void 0),b.jsxDEV(et,{size:"sm",variant:"flat",onPress:()=>{L&&(T(J=>{const Z={...J};return delete Z[L.agent],Z}),B(null))},children:"Use Default (Remove Custom)"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1160,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1144,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1125,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1124,columnNumber:11},void 0),b.jsxDEV(Rw,{children:[b.jsxDEV(et,{variant:"light",onPress:()=>B(null),children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1180,columnNumber:13},void 0),b.jsxDEV(et,{color:"primary",onPress:()=>{L&&(T(J=>({...J,[L.agent]:L.prompt})),B(null))},children:"Save Prompt"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1186,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1179,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1120,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:1114,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/CreateProjectModal.tsx",lineNumber:746,columnNumber:5},void 0)},Rr=Xf(()=>({logEvent:(t,e)=>{},disableTools:!1,disableTonePicker:!1,disableLayers:!1}));class ya{static toSlatePoint(e,n,r=0,i=!1){if(e.text!==void 0)return i&&r+e.text.length>=n||r+e.text.length>n?{path:[],offset:n-r}:null;if(e.children!==void 0)for(let a=0;a<e.children.length;a++){const s=e.children[a],o=ya.toSlatePoint(s,n,r,a===e.children.length-1);if(o)return{path:[a,...o.path],offset:o.offset};r+=vt.string(s).length}else if(Array.isArray(e))return ya.toSlatePoint({children:e},n,r);return null}static toStrIndex(e,n){const r=vt.texts({children:e},{from:[0,0],to:n.path});let i=0;for(const[a,s]of r){if(s+""==n.path+"")return i+n.offset;i+=vt.string(a).length}return i}static isPointValidForState(e,n){let r={children:n};for(const i of e.path){if(i>=r.children.length)return!1;r=r.children[i]}return e.offset<=vt.string(r).length}static isSelectionValidForState(e,n){return ya.isPointValidForState(e.anchor,n)&&ya.isPointValidForState(e.focus,n)}}var Kf;(t=>{var e=null;function n(o,l){const f=(e||(e=document.createElement("canvas"))).getContext("2d");return f?(f.font=l,f.measureText(o)):{width:0,actualBoundingBoxAscent:0,actualBoundingBoxDescent:0,fontBoundingBoxAscent:0,fontBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:0}}t.getTextMetrics=n;function r(o,l){return window.getComputedStyle(o,null).getPropertyValue(l)}t.getCssStyle=r;function i(o=document.body){const l=r(o,"font-weight")||"normal",c=r(o,"font-size")||"16px",f=r(o,"font-family")||"Times New Roman";return`${l} ${c} ${f}`}t.getCanvasFont=i;function a(o,l){if(document.caretPositionFromPoint)return document.caretPositionFromPoint(o,l);if(document.caretRangeFromPoint){const c=document.caretRangeFromPoint(o,l);if(c)return{offsetNode:c.startContainer,offset:c.startOffset}}return null}t.caretPositionFromPoint=a;function s(o){const l=o.key;if(o.ctrlKey||o.metaKey)return null;if(l.length===1)return l;const c={Enter:`
`,Space:" ",Tab:"	"};return l in c?c[l]:null}t.keyEventToCharacter=s})(Kf||(Kf={}));const GD=[".",",",";",":","!","?","(",")","[","]","{","}","<",">",'"',"'"],VV=sR();function uZ(t,e){return VV.children=t,e(VV),VV.children}class Dl{static getFittingString(e,n){let r=e;if(r.length<=1)return r;const i=n.match(/^\s*/),a=i?i[0]:"",s=n.match(/\s*$/),o=s?s[0]:"";n=n.trim(),r=r.trim();const l=n[0],c=n[n.length-1],f=r[0],h=r[r.length-1];return l===l.toUpperCase()?r=r[0].toUpperCase()+r.substring(1):r=r[0].toLowerCase()+r.substring(1),c!==h&&(GD.includes(h)&&(r=r.substring(0,r.length-1)),GD.includes(c)&&(r=r+c)),l!==f&&(GD.includes(f)&&(r=r.substring(1)),GD.includes(l)&&(r=l+r)),a+r+o}static getBestSpacePadding(e,n,r,i=" "){let a=0,s=-e.length,o=n,l=a,c=9999;for(;s<=o;){a=Math.ceil((s+o)/2);let f=a>0?e+i.repeat(a):e.substring(0,e.length+a);const h=Kf.getTextMetrics(f,Kf.getCanvasFont(r)).width,m=Math.abs(h-n);if(h===n)break;h<n?s=a+1:o=a-1,m<c&&(c=m,l=a)}return l}static getAbsoluteWrappedLinesWidth(e,n,r,i,a){let s=i-n;if(e){const o=parseInt(window.getComputedStyle(e).lineHeight.replace("px","")),l=Math.floor((a-r)/o),c=e?e.clientWidth:0,f=e.getBoundingClientRect().right-n,h=i-e.getBoundingClientRect().left;s=f+l*c+h}return s}}class va{static normalizeState(e){if(e.length>1){const n=[];return e.forEach((i,a)=>{i.children!==void 0?n.push(...i.children):n.push(i),a<e.length-1&&n.push({text:`
`})}),[{type:"paragraph",children:n}]}return e}static updateLayersFromNewState(e,n,r){const i=va.flattenHierarchicalLayersToTextLayer(e);if(!i[n].isVisible)return e;if(n===0){if(i.length===1||i.slice(1).every(a=>Object.keys(a.modifications).length===0||!a.isVisible))return i[0].state=JSON.parse(JSON.stringify(r)),e;{const a=va.recoverFirstLayerFromState(r,i);return i[0].state=JSON.parse(JSON.stringify(a)),e}}else{const a=va.recoverFirstLayerFromState(r,i),s=i[0].state,o=s.map(v=>vt.string(v)).join(`
`),l=s.map(v=>[...v.children,{text:`
`}]).flat().slice(0,-1),c=a.map(v=>[...v.children,{text:`
`}]).flat().slice(0,-1);let f=[];if(l.length===c.length)for(let v=0;v<s[0].children.length;v++){const y=s[0].children[v],x=a[0].children[v];f.push(...EM(vt.string(y),vt.string(x)))}else{const v=a.map(y=>vt.string(y)).join(`
`);f.push(...EM(o,v))}if(f.length>10){const v=[];let y="",x="",S=-1,_=-1,N=0,k=null;f.forEach((P,O)=>{P.removed&&(S===-1&&(S=N),x+=P.value),P.added&&(_===-1&&(_=N),y+=P.value),!P.added&&!P.removed&&(O<f.length-1?P.value.length>10?(S!==-1&&v.push({removed:!0,count:x.length,value:x}),_!==-1&&v.push({added:!0,count:y.length,value:y}),v.push(P),S=-1,_=-1,y="",x=""):(_!==-1&&(y+=P.value),S!==-1&&(x+=P.value)):k=P)}),_!==-1&&v.push({added:!0,count:y.length,value:y}),S!==-1&&v.push({removed:!0,count:x.length,value:x}),k&&v.push(k),f=v}let h=va.getUniqueTagId(e);if(f.length>=1&&i[0].isVisible){let v=o.length;for(let y=f.length-1;y>=0;y--){const x=f[y];if(x.removed||x.added){const S=ya.toSlatePoint(i[0].state,v);let _=S;if(x.removed&&(_=ya.toSlatePoint(i[0].state,v-x.value.length)),_&&S){let N=h;i[0].state=uZ(i[0].state,k=>{if(x.added)++h,N=h,ot.insertNodes(k,{text:"\0",layerTagId:N},{at:_}),fe.nodes(k,{mode:"all",match:P=>P.layerTagId===N,at:[]});else{k.select({anchor:_,focus:S});const P=vt.parent(k,_.path),O=_.path[_.path.length-1],A=P.children[O],T=S.offset===vt.string(A).length,L=_.offset===1;let B=null;L&&O>=1?B=P.children[O-1]:T&&O<P.children.length-1&&(B=P.children[O+1]),B&&B.layerTagId!==void 0&&i[n].modifications[B.layerTagId]===""?N=B.layerTagId:(++h,N=h),fe.addMark(k,"layerTagId",N)}}),i[n].modifications[N]=x.added?x.value:""}}x.added||(v-=x.value.length)}}const m=va.getTagValuesFromState(r),p=va.getTagIdsFromLayers(i,n-1,!0);for(const[v,y]of Object.entries(m))if(v in i[n].modifications)i[n].modifications[v]=y;else{const x=p[v];if(x!==void 0){const S=i[x].modifications[v];if(S!==y){const _=EM(S,y),N=[];for(const k of _)k.added?(N.push({text:"\0",layerTagId:++h}),i[n].modifications[h]=k.value):k.removed?(N.push({text:"\0",layerTagId:++h}),i[x].modifications[h]=k.value,i[n].modifications[h]=""):(N.push({text:"\0",layerTagId:++h}),i[x].modifications[h]=k.value);i[0].state=uZ(i[0].state,k=>{const P=fe.nodes(k,{mode:"all",match:O=>O.layerTagId+""===v,at:[]});for(const[O,A]of P){ot.insertNodes(k,N,{at:A});break}delete i[x].modifications[v],ot.removeNodes(k,{match:O=>O.layerTagId+""===v,at:[]})})}}}return e}}static getStateFromLayers(e){const n=va.flattenHierarchicalLayersToTextLayer(e);let r=JSON.parse(JSON.stringify(n[0].state));const i=n.length;n[0].isVisible||(r=r.map(a=>(a.children=a.children.filter(s=>s.layerTagId!==void 0),a.children.length===0&&a.children.push({text:""}),a)));for(let a=1;a<i;a++){const s=n[a];if(s.isVisible){const o=s.modifications;for(const[l,c]of Object.entries(o))for(const f of r)for(const h of f.children)h.layerTagId===parseInt(l)&&(h.text=c)}}return r}static getTagValuesFromState(e){const n={};return e.forEach(r=>{r.children.forEach(i=>{i.layerTagId!==void 0&&(n[i.layerTagId]=i.text)})}),n}static getTagIdsFromLayers(e,n=e.length-1,r=!1){const i={};for(let a=1;a<=n;a++){const s=e[a];if(!r||s.isVisible)for(const o of Object.keys(s.modifications))i[o]=a}return i}static recoverFirstLayerFromState(e,n){const r=va.getTagValuesFromState(n[0].state),i=JSON.parse(JSON.stringify(e));return i.forEach(a=>{a.children.forEach(s=>{s.layerTagId!==void 0&&r[s.layerTagId]!==void 0&&(s.text=r[s.layerTagId])})}),i}static forEachLayer(e,n,r=0){e.forEach((i,a)=>{n(i.layer,r+a),i.children&&va.forEachLayer(i.children,n,r+a+1)})}static flattenHierarchicalLayersToTextLayer(e){const n=[],r=i=>{n.push(i.layer),i.children&&i.children.forEach(a=>r(a))};return e.forEach(i=>r(i)),n}static flattenHierarchicalLayers(e){const n=[],r=i=>{n.push(i),i.children&&i.children.forEach(a=>r(a))};return e.forEach(i=>r(i)),n}static flattenHierarchicalLayersWithParent(e){const n=[],r=(i,a,s)=>{const o={parent:i,indexWithinParent:a,hlayer:s};n.push(o),s.children&&s.children.forEach((l,c)=>r(o,c,l))};return e.forEach((i,a)=>r(null,a,i)),n}static getUniqueTagId(e){const n=va.flattenHierarchicalLayersToTextLayer(e);let r=0;for(const i of n)for(const a of Object.keys(i.modifications))r=Math.max(r,parseInt(a));return r+1}}function iit(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(t)}function cZ(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M479.9 394.9c0-19.6 4.2-97.1-56.8-158.7-40.4-40.7-91.9-61.7-163.4-65.5-2.1-.1-3.8-1.9-3.8-4V84c0-3.2-3.5-5.1-6.2-3.4L33.8 222.8c-2.4 1.6-2.4 5.1 0 6.7l215.9 142.2c2.7 1.8 6.2-.1 6.2-3.4v-81.6c0-2.3 1.9-4.1 4.2-4 44.1 1.7 69.5 10.9 97.1 23.2 36.1 16.2 72.9 50.9 94.5 83.5 13.1 19.9 19.2 33.9 21.4 39.7.7 1.7 2.3 2.8 4.1 2.8h2.9c-.1-11.7-.2-26.7-.2-37z"},child:[]}]})(t)}function ait(t){return nn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M186.301 339.893L96 249.461l-32 30.507L186.301 402 448 140.506 416 110z"},child:[]}]})(t)}function sit(t){return nn({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 21V19H11V5H8V3H16V5H13V19H16V21H8ZM18.0503 7.05025L23 12L18.0503 16.9497L16.636 15.5355L20.1716 12L16.636 8.46447L18.0503 7.05025ZM5.94975 7.05025L7.36396 8.46447L3.82843 12L7.36396 15.5355L5.94975 16.9497L1 12L5.94975 7.05025Z"},child:[]}]})(t)}function dZ(){return{undoStack:[],redoStack:[],lastStoredStateTimestamp:0,isDisabled:!1}}const oa=Xf()((t,e)=>({...dZ(),reset:()=>t(n=>({...dZ()})),undo:()=>{const{undoStack:n,redoStack:r}=e();if(n.length>0){const i=n.pop();if(i){const a=JSON.parse(JSON.stringify(Qe.getState()));r.push(a),t(s=>({undoStack:n,redoStack:r,isDisabled:!0})),Qe.setState(JSON.parse(JSON.stringify(i))),Qe.getState().animateNextChanges(),Qe.getState().refreshTextFields(),t(s=>({isDisabled:!1})),Rr.getState().logEvent("UNDO",{undoStackLength:n.length,redoStackLength:r.length})}}},redo:()=>{const{undoStack:n,redoStack:r}=e();if(r.length>0){const i=r.pop();if(i){const a=JSON.parse(JSON.stringify(Qe.getState()));n.push(a),t(s=>({undoStack:n,redoStack:r,isDisabled:!0})),Qe.setState(JSON.parse(JSON.stringify(i))),Qe.getState().animateNextChanges(),Qe.getState().refreshTextFields(),t(s=>({isDisabled:!1})),Rr.getState().logEvent("REDO",{undoStackLength:n.length,redoStackLength:r.length})}}},storeUndoState:()=>{const{undoStack:n}=e(),r=JSON.parse(JSON.stringify(Qe.getState()));n.push(r),t(i=>({undoStack:n,redoStack:[],lastStoredStateTimestamp:Date.now()}))},storeUndoStateDebounced:()=>{const{lastStoredStateTimestamp:n,isDisabled:r}=e(),i=Date.now();if(i-n>1e3){if(!r){const a=JSON.stringify(Qe.getState()),s=e().undoStack.length>0?JSON.stringify(e().undoStack[e().undoStack.length-1]):"";if(a!==s){const o=JSON.parse(a);t(l=>({undoStack:[...l.undoStack,o],redoStack:[],lastStoredStateTimestamp:i}))}}}else t(a=>({lastStoredStateTimestamp:i}))},setIsDisabled:n=>t(r=>({isDisabled:n}))})),fZ=["#1f78b4","#ff7f00","#33a02c","#e31a1c","#6a3d9a","#a6cee3","#b2df8a","#fb9a99","#fdbf6f","#cab2d6","#ffff99","#b15928"];class j0 extends Error{constructor(e,n){super(`${e} at position ${n}`),this.position=n}}const Hfe=32,oit=10,Gfe=9,Kfe=13,lit=160,uit=8192,cit=8202,dit=8239,fit=8287,hit=12288;function mit(t){return/^[0-9A-Fa-f]$/.test(t)}function Xv(t){return t>="0"&&t<="9"}function pit(t){return t>=" "}function KD(t){return`,:[]/{}()
+`.includes(t)}function hZ(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"}function mZ(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"||t>="0"&&t<="9"}const pZ=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,gZ=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function vZ(t){return`,[]/{}
+`.includes(t)}function yZ(t){return $k(t)||git.test(t)}const git=/^[[{\w-]$/;function vit(t){return t===`
`||t==="\r"||t==="	"||t==="\b"||t==="\f"}function dy(t,e){const n=t.charCodeAt(e);return n===Hfe||n===oit||n===Gfe||n===Kfe}function yit(t,e){const n=t.charCodeAt(e);return n===Hfe||n===Gfe||n===Kfe}function bit(t,e){const n=t.charCodeAt(e);return n===lit||n>=uit&&n<=cit||n===dit||n===fit||n===hit}function $k(t){return Yfe(t)||I5(t)}function Yfe(t){return t==='"'||t===""||t===""}function bZ(t){return t==='"'}function I5(t){return t==="'"||t===""||t===""||t==="`"||t===""}function wZ(t){return t==="'"}function HS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=t.lastIndexOf(e);return r!==-1?t.substring(0,r)+(n?"":t.substring(r+1)):t}function ud(t,e){let n=t.length;if(!dy(t,n-1))return t+e;for(;dy(t,n-1);)n--;return t.substring(0,n)+e+t.substring(n)}function wit(t,e,n){return t.substring(0,e)+t.substring(e+n)}function xit(t){return/[,\n][ \t\r]*$/.test(t)}const Sit={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},Eit={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function Nit(t){let e=0,n="";c(["```","[```","{```"]),a()||I(),c(["```","```]","```}"]);const i=h(",");for(i&&s(),yZ(t[e])&&xit(n)?(i||(n=ud(n,",")),S()):i&&(n=HS(n,","));t[e]==="}"||t[e]==="]";)e++,s();if(e>=t.length)return n;V();function a(){s();const J=y()||x()||_()||k()||P()||A(!1)||T();return s(),J}function s(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const Z=e;let G=o(J);do G=l(),G&&(G=o(J));while(G);return e>Z}function o(J){const Z=J?dy:yit;let G="";for(;;)if(Z(t,e))G+=t[e],e++;else if(bit(t,e))G+=" ",e++;else break;return G.length>0?(n+=G,!0):!1}function l(){if(t[e]==="/"&&t[e+1]==="*"){for(;e<t.length&&!_it(t,e);)e++;return e+=2,!0}if(t[e]==="/"&&t[e+1]==="/"){for(;e<t.length&&t[e]!==`
`;)e++;return!0}return!1}function c(J){if(f(J)){if(hZ(t[e]))for(;e<t.length&&mZ(t[e]);)e++;return s(),!0}return!1}function f(J){o(!0);for(const Z of J){const G=e+Z.length;if(t.slice(e,G)===Z)return e=G,!0}return!1}function h(J){return t[e]===J?(n+=t[e],e++,!0):!1}function m(J){return t[e]===J?(e++,!0):!1}function p(){return m("\\")}function v(){return s(),t[e]==="."&&t[e+1]==="."&&t[e+2]==="."?(e+=3,s(),m(","),!0):!1}function y(){if(t[e]==="{"){n+="{",e++,s(),m(",")&&s();let J=!0;for(;e<t.length&&t[e]!=="}";){let Z;if(J?(Z=!0,J=!1):(Z=h(","),Z||(n=ud(n,",")),s()),v(),!(_()||A(!0))){t[e]==="}"||t[e]==="{"||t[e]==="]"||t[e]==="["||t[e]===void 0?n=HS(n,","):H();break}s();const oe=h(":"),ae=e>=t.length;oe||(yZ(t[e])||ae?n=ud(n,":"):q()),a()||(oe||ae?n+="null":q())}return t[e]==="}"?(n+="}",e++):n=ud(n,"}"),!0}return!1}function x(){if(t[e]==="["){n+="[",e++,s(),m(",")&&s();let J=!0;for(;e<t.length&&t[e]!=="]";)if(J?J=!1:h(",")||(n=ud(n,",")),v(),!a()){n=HS(n,",");break}return t[e]==="]"?(n+="]",e++):n=ud(n,"]"),!0}return!1}function S(){let J=!0,Z=!0;for(;Z;)J?J=!1:h(",")||(n=ud(n,",")),Z=a();Z||(n=HS(n,",")),n=`[
${n}
]`}function _(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,G=t[e]==="\\";if(G&&(e++,G=!0),$k(t[e])){const oe=bZ(t[e])?bZ:wZ(t[e])?wZ:I5(t[e])?I5:Yfe,ae=e,te=n.length;let re='"';for(e++;;){if(e>=t.length){const X=L(e-1);return!J&&KD(t.charAt(X))?(e=ae,n=n.substring(0,te),_(!0)):(re=ud(re,'"'),n+=re,!0)}if(e===Z)return re=ud(re,'"'),n+=re,!0;if(oe(t[e])){const X=e,ce=re.length;if(re+='"',e++,n+=re,s(!1),J||e>=t.length||KD(t[e])||$k(t[e])||Xv(t[e]))return N(),!0;const he=L(X-1),ve=t.charAt(he);if(ve===",")return e=ae,n=n.substring(0,te),_(!1,he);if(KD(ve))return e=ae,n=n.substring(0,te),_(!0);n=n.substring(0,te),e=X+1,re=`${re.substring(0,ce)}\\${re.substring(ce)}`}else if(J&&vZ(t[e])){if(t[e-1]===":"&&pZ.test(t.substring(ae+1,e+2)))for(;e<t.length&&gZ.test(t[e]);)re+=t[e],e++;return re=ud(re,'"'),n+=re,N(),!0}else if(t[e]==="\\"){const X=t.charAt(e+1);if(Eit[X]!==void 0)re+=t.slice(e,e+2),e+=2;else if(X==="u"){let he=2;for(;he<6&&mit(t[e+he]);)he++;he===6?(re+=t.slice(e,e+6),e+=6):e+he>=t.length?e=t.length:F()}else re+=X,e+=2}else{const X=t.charAt(e);X==='"'&&t[e-1]!=="\\"?(re+=`\\${X}`,e++):vit(X)?(re+=Sit[X],e++):(pit(X)||Y(X),re+=X,e++)}G&&p()}}return!1}function N(){let J=!1;for(s();t[e]==="+";){J=!0,e++,s(),n=HS(n,'"',!0);const Z=n.length;_()?n=wit(n,Z,1):n=ud(n,'"')}return J}function k(){const J=e;if(t[e]==="-"){if(e++,B())return W(J),!0;if(!Xv(t[e]))return e=J,!1}for(;Xv(t[e]);)e++;if(t[e]==="."){if(e++,B())return W(J),!0;if(!Xv(t[e]))return e=J,!1;for(;Xv(t[e]);)e++}if(t[e]==="e"||t[e]==="E"){if(e++,(t[e]==="-"||t[e]==="+")&&e++,B())return W(J),!0;if(!Xv(t[e]))return e=J,!1;for(;Xv(t[e]);)e++}if(!B())return e=J,!1;if(e>J){const Z=t.slice(J,e),G=/^0\d/.test(Z);return n+=G?`"${Z}"`:Z,!0}return!1}function P(){return O("true","true")||O("false","false")||O("null","null")||O("True","true")||O("False","false")||O("None","null")}function O(J,Z){return t.slice(e,e+J.length)===J?(n+=Z,e+=J.length,!0):!1}function A(J){const Z=e;if(hZ(t[e])){for(;e<t.length&&mZ(t[e]);)e++;let G=e;for(;dy(t,G);)G++;if(t[G]==="(")return e=G+1,a(),t[e]===")"&&(e++,t[e]===";"&&e++),!0}for(;e<t.length&&!vZ(t[e])&&!$k(t[e])&&(!J||t[e]!==":");)e++;if(t[e-1]===":"&&pZ.test(t.substring(Z,e+2)))for(;e<t.length&&gZ.test(t[e]);)e++;if(e>Z){for(;dy(t,e-1)&&e>0;)e--;const G=t.slice(Z,e);return n+=G==="undefined"?"null":JSON.stringify(G),t[e]==='"'&&e++,!0}}function T(){if(t[e]==="/"){const J=e;for(e++;e<t.length&&(t[e]!=="/"||t[e-1]==="\\");)e++;return e++,n+=`"${t.substring(J,e)}"`,!0}}function L(J){let Z=J;for(;Z>0&&dy(t,Z);)Z--;return Z}function B(){return e>=t.length||KD(t[e])||dy(t,e)}function W(J){n+=`${t.slice(J,e)}0`}function Y(J){throw new j0(`Invalid character ${JSON.stringify(J)}`,e)}function V(){throw new j0(`Unexpected character ${JSON.stringify(t[e])}`,e)}function I(){throw new j0("Unexpected end of json string",t.length)}function H(){throw new j0("Object key expected",e)}function q(){throw new j0("Colon expected",e)}function F(){const J=t.slice(e,e+6);throw new j0(`Invalid unicode character "${J}"`,e)}}function _it(t,e){return t[e]==="*"&&t[e+1]==="/"}class Jfe{static parseJSON(e){if(e.includes("```json")){const n=e.indexOf("```json")+7,r=e.indexOf("```",n);e=e.substring(n,r)}try{return JSON.parse(e)}catch{e=Nit(e);try{return JSON.parse(e)}catch(r){console.error("Error while parsing JSON",r)}}return null}}class xc{constructor(e){Mt(this,"input");Mt(this,"cache",new Map);this.input=e}execute(e){return new Promise((n,r)=>{n(this.input)})}cachedExecute(e){const n=JSON.stringify(e);return this.cache.has(n)?new Promise((r,i)=>{r(this.cache.get(n))}):this.execute(e).then(r=>(this.cache.set(n,r),r))}isValueCached(e){return Array.from(this.cache.values()).includes(e)}}class qfe{execute(){return new Promise((e,n)=>{e(null)})}}class Cit extends qfe{constructor(n){super();Mt(this,"prompt");this.prompt=n}execute(){return Qe.getState().executePrompt(this.prompt)}}class xZ extends qfe{constructor(n){super();Mt(this,"prompts");this.prompts=n}execute(){return Promise.all(this.prompts.map(n=>n.execute()))}}class Xfe extends xc{constructor(n,r){super(n);Mt(this,"initialTone");this.initialTone=r,this.cache.set(JSON.stringify(r),n)}execute(n){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input,parameters:n});const r=this.input;let i=`${r}

Rewrite the sentence with the following tones:`,a=!1;for(const s of n){const o=this.initialTone.find(c=>c.lowAdjective===s.lowAdjective&&c.highAdjective===s.highAdjective),l=o?o.value:5;s.value!==l&&(i+=`
- On a scale from 0 being ${s.lowAdjective} and 10 being ${s.highAdjective}, this is currently a ${l} => change it to a ${s.value} by making it more ${s.value>5?s.highAdjective:s.lowAdjective}
`,a=!0)}return a?Qe.getState().executePrompt({prompt:i+`
Respond with a JSON object with the property 'sentence'`,json:!0}).then(s=>{try{const o=Jfe.parseJSON(s.result);return Dl.getFittingString(o.sentence,r)}catch(o){console.error("Error while parsing JSON",o)}return this.input}):new Promise((s,o)=>{s(r)})}}function Tit(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1"},child:[]},{tag:"path",attr:{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5"},child:[]},{tag:"path",attr:{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1"},child:[]},{tag:"path",attr:{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7"},child:[]},{tag:"path",attr:{d:"M9 7v10"},child:[]}]})(t)}class Mm{constructor(e){Mt(this,"name");this.name=e}getMarksClassname(){return"textSelection"}getIcon(){return b.jsxDEV(Tit,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/ToolbarTool.tsx",lineNumber:27,columnNumber:16},this)}getIconHotspot(){return{x:0,y:0}}isIconAsCursor(){return!0}isEqual(e){return e.name===this.name}onTextSelected(e){}isSelectionOpaque(){return!1}}class dA extends Mm{constructor(){super(dA.getToolName())}getMarksClassname(){return"brush"}getIcon(){return b.jsxDEV(EHe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/DrawTool.tsx",lineNumber:18,columnNumber:16},this)}getIconHotspot(){return{x:2,y:14}}onTextSelected(e){const n=Qe.getState().tone,r=e.range.toString(),i=[{lowAdjective:"Informal",highAdjective:"Formal",value:5},{lowAdjective:"Impolite",highAdjective:"Polite",value:5},{lowAdjective:"Complicated",highAdjective:"Simple",value:5}];r.length>1&&new Xfe(r,i).execute(n).then(a=>{const s=Qe.getState().selectedTexts,o=[];for(const l of s)o.push({...l,text:a,isLoading:!1});oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(o),Qe.getState().setSelectedTexts([])})}static getToolName(){return"Tone Brush"}}class Dit extends xc{execute(){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input});let e=`${this.input.start} ${this.input.end}

Fix this sentence without adding new words. You can reorganize the words and the sentence, but you can't add new words.`;return Qe.getState().executePrompt({prompt:e}).then(n=>Dl.getFittingString(n.result,this.input.start+this.input.text+this.input.end))}}var Jw;(t=>{function e(r){const i=r.cloneRange();let a=!0;if(i.toString().length===0)return r;for(;i.toString()[0].match(/[A-Za-z---]/);)try{i.setStart(i.startContainer,i.startOffset-1)}catch{a=!1;break}for(a&&i.startOffset!==r.startOffset&&i.setStart(i.startContainer,i.startOffset+1),a=!0;i.toString()[i.toString().length-1].match(/[A-Za-z---]/);)try{i.setEnd(i.endContainer,i.endOffset+1)}catch{a=!1;break}return a&&i.endOffset!==r.endOffset&&i.setEnd(i.endContainer,i.endOffset-1),i}t.getRangeSnappedToWord=e;function n(r){const i=r.cloneRange();let a=!0,s=!1;if(i.toString().length===0)return r;for(;i.toString()[0].match(/[^\.\(\n;\):]/);)try{i.setStart(i.startContainer,i.startOffset-1)}catch{a=!1;break}for(i.toString()[0]==="("&&(s=!0),a&&i.startOffset!==r.startOffset&&i.setStart(i.startContainer,i.startOffset+1),a=!0;i.toString()[i.toString().length-1].match(s?/[^\)]/:/[^\.\n;:]/);)try{i.setEnd(i.endContainer,i.endOffset+1)}catch{a=!1;break}return a&&i.endOffset!==r.endOffset&&i.setEnd(i.endContainer,i.endOffset-1),i}t.getRangeSnappedToSentence=n})(Jw||(Jw={}));function kit(t){const[e,n]=R.useState([]),r=it.createRef(),[i,a]=R.useState(0),s=(y,x,S,_)=>{const N=document.createRange(),k=document.createRange(),P=Kf.caretPositionFromPoint(y,x),O=Kf.caretPositionFromPoint(S,_);return P&&O&&(N.setStart(P.offsetNode,P.offset),N.setEnd(O.offsetNode,O.offset),k.setStart(O.offsetNode,O.offset),k.setEnd(P.offsetNode,P.offset)),N.toString().length>k.toString().length?N:k},o=y=>{var S;const x=(S=r.current)==null?void 0:S.getBoundingClientRect();if(x){const _=Array.from(y.getClientRects());n(_.map(N=>{const k=t.opaque?s(N.left+2,N.top+N.height/2,N.right-2,N.top+N.height/2):null;return{x:N.x-x.x,y:N.y-x.y,width:N.width,height:N.height,text:k?k.toString():""}}))}},l=()=>{const y=window.getSelection();if(!t.disabled&&y&&y.rangeCount>0){const x=Jw.getRangeSnappedToWord(y.getRangeAt(0));o(x)}},c=()=>{const y=window.getSelection();if(!t.disabled&&y&&y.rangeCount>0){const x=Jw.getRangeSnappedToWord(y.getRangeAt(0));y.removeAllRanges(),y.addRange(x),n([]),t.onTextSelected&&t.onTextSelected(x)}a(0)},f=y=>{y.button===0&&i===2&&c()},h=y=>{i!==0&&l()};R.useEffect(()=>(document.addEventListener("selectionchange",h),document.addEventListener("mouseup",f),()=>{document.removeEventListener("selectionchange",h),document.removeEventListener("mouseup",f)}));const m=y=>{(y.key==="Shift"||y.key==="Control"||y.key==="Meta")&&a(1)},p=y=>{(y.key==="Shift"||y.key==="Control"||y.key==="Meta")&&i===1&&c()},v=y=>{y.button===0&&a(2)};return b.jsxDEV("div",{onKeyDown:m,onKeyUp:p,onMouseDown:v,ref:r,style:{position:"relative"},children:[e.map((y,x)=>b.jsxDEV("div",{className:t.className,style:{...t.style,position:"absolute",left:y.x,top:y.y,width:y.width+2,height:y.height,pointerEvents:"none",zIndex:t.opaque?9999:void 0,display:"flex",flexDirection:"row",alignItems:"center"},children:t.opaque?y.text:""},x,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextSelection.tsx",lineNumber:185,columnNumber:20},this)),t.children]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextSelection.tsx",lineNumber:183,columnNumber:12},this)}class aO extends Mm{constructor(e){super(e)}getMarksClassname(){return"genericSelection"}executeLocalWithGlobalImpactModification(e,n,r){return Promise.resolve("")}onTextSelected(e){const n=e.range.toString(),r=Jw.getRangeSnappedToSentence(e.range),i=rt.toSlateRange(e.editor,r,{exactMatch:!0,suppressThrow:!0});if(n.length>1&&i){const a={anchor:i.anchor,focus:e.slateRange.anchor},s={anchor:e.slateRange.focus,focus:i.focus},o=fe.string(e.editor,a),l=fe.string(e.editor,s);n.length>1&&this.executeLocalWithGlobalImpactModification(o,n,l).then(c=>{oa.getState().storeUndoState(),Qe.getState().setSelectedTexts([]),Qe.getState().animateNextChanges(),ot.insertText(e.editor,c,{at:i})})}}}class fA extends aO{constructor(){super(fA.getToolName())}getMarksClassname(){return"genericSelection"}getIcon(){return b.jsxDEV(xHe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/EraserTool.tsx",lineNumber:16,columnNumber:16},this)}getIconHotspot(){return{x:8,y:14}}static getToolName(){return"Erase"}executeLocalWithGlobalImpactModification(e,n,r){return new Dit({start:e,text:n,end:r}).execute()}}const SZ={dragging:!1,draggingParameters:[],isPromptBoxOpen:!1,onPromptBoxValidated:void 0,sentenceHovered:null},wa=Xf()((t,e)=>({...SZ,reset:()=>t(n=>({...SZ})),startDragging:n=>{Rr.getState().logEvent("START_DRAGGING",{parameters:n}),t(r=>({dragging:!0,draggingParameters:n}))},setDraggingParameters:n=>t(r=>({draggingParameters:n})),stopDragging:()=>{Rr.getState().logEvent("STOP_DRAGGING",{parameters:e().draggingParameters}),t(n=>({dragging:!1,draggingParameters:[]}))},openPromptBox:()=>t(n=>({isPromptBoxOpen:!0})),closePromptBox:()=>t(n=>({isPromptBoxOpen:!1})),setPromptBoxValidatedCallback:n=>t(r=>({onPromptBoxValidated:n})),setSentenceHovered:n=>t(r=>({sentenceHovered:n}))}));class Pit extends xc{constructor(n,r,i){super(n);Mt(this,"previousText");Mt(this,"followingText");this.previousText=r,this.followingText=i}execute(n){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input,parameters:n});const r=`${this.previousText} <blank> ${this.followingText}
<blank>: ${this.input}

INSTRUCTION: ${n}
Rewrite <blank>. Follow INSTRUCTION. Respond with only the rewritten <blank> text, with no explanations.`;return Qe.getState().executePrompt({prompt:r}).then(i=>i.result&&i.result.startsWith("ERROR:")?this.input:Dl.getFittingString(i.result.replace("<blank>:","").replace("<blank>",""),this.input))}}class hA extends Mm{constructor(){super(hA.getToolName())}getMarksClassname(){return"textSelection"}getIcon(){return b.jsxDEV(sit,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/PrompterTool.tsx",lineNumber:20,columnNumber:16},this)}getIconHotspot(){return{x:8,y:8}}onTextSelected(e){const n=e.range.toString(),r=e.precedingRange.toString(),i=e.followingRange.toString();wa.getState().setPromptBoxValidatedCallback(a=>{const s=Qe.getState().selectedTexts,o=[];for(const l of s)o.push({...l,isLoading:!0});Qe.getState().setSelectedTexts(o),new Pit(n,r,i).execute(a).then(l=>{const c=Qe.getState().selectedTexts,f=[];for(const h of c)f.push({...h,text:l,isLoading:!1});oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(f),Qe.getState().setSelectedTexts([])})}),wa.getState().openPromptBox()}static getToolName(){return"Prompt"}}class Ait extends xc{execute(){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input});const e=this.input;let n=`${e}

Fix the grammar. Return only the corrected text with no explanations or comments.`;return Qe.getState().executePrompt({prompt:n}).then(r=>Dl.getFittingString(r.result,e))}}class mA extends Mm{constructor(){super(mA.getToolName())}getMarksClassname(){return"genericSelection"}getIcon(){return b.jsxDEV(Wrt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/RepairTool.tsx",lineNumber:18,columnNumber:16},this)}getIconHotspot(){return{x:8,y:8}}onTextSelected(e){const n=e.range.toString();n.length>1&&new Ait(n).execute().then(r=>{const i=Qe.getState().selectedTexts,a=[];for(const s of i)a.push({...s,text:r,isLoading:!1});oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(a),Qe.getState().setSelectedTexts([])})}static getToolName(){return"Repair / Fix Grammar"}}class Cw extends Mm{constructor(){super(Cw.getToolName())}getMarksClassname(){return"textSelection"}static getToolName(){return"Select"}isIconAsCursor(){return!1}}function Rit(t){return nn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"},child:[]},{tag:"path",attr:{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"},child:[]}]})(t)}function Oit(t){return nn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1zm-7.978-1L7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002-.014.002zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0M6.936 9.28a6 6 0 0 0-1.23-.247A7 7 0 0 0 5 9c-4 0-5 3-5 4q0 1 1 1h4.216A2.24 2.24 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816M4.92 10A5.5 5.5 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0m3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4"},child:[]}]})(t)}function jit(t){return nn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"},child:[]}]})(t)}class PB extends xc{execute(e){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input,parameters:e});const n="SELECTED_TEXT";let r="",i="";switch(e){case"FIRST_PERSON":r="first-person point of view (1 )",i=`Rewrite the selected text using FIRST-PERSON point of view:
- Use "I", "me", "my", "we", "us", "our" pronouns
- The narrator is a character in the story
- Show only what the narrator can see, hear, think, and feel
- Express the narrator's personal thoughts, feelings, and opinions directly
- Use phrases like "I thought", "I felt", "I saw", "I heard"
- The narrator cannot know what others are thinking unless told
- Maintain the narrator's subjective perspective throughout
- Keep the same plot, events, and other characters
- Adjust descriptions to reflect the narrator's personal perception and interpretation`;break;case"THIRD_PERSON_LIMITED":r="third-person limited point of view (3  )",i=`Rewrite the selected text using THIRD-PERSON LIMITED point of view:
- Use "he", "she", "they", "him", "her", "them" pronouns
- Follow ONE character closely (usually the main character)
- Show only what that ONE character can see, hear, think, and feel
- Express that character's thoughts and feelings, but not other characters'
- Use phrases like "he thought", "she felt", "they noticed"
- The narrator cannot know what happens when the focal character is not present
- Cannot reveal other characters' private thoughts or feelings directly
- Maintain focus on the focal character's perspective and experience
- Keep the same plot, events, and dialogue
- Describe events through the focal character's perception`;break;case"THIRD_PERSON_OMNISCIENT":r="third-person omniscient point of view (3   )",i=`Rewrite the selected text using THIRD-PERSON OMNISCIENT point of view:
- Use "he", "she", "they", "him", "her", "them" pronouns
- The narrator knows everything about all characters
- Can reveal any character's thoughts, feelings, and motivations
- Can show events happening in different places or times
- Can comment on the story, characters, or events from outside
- Use phrases like "he thought", "she felt", "unknown to them", "meanwhile", "little did they know"
- Can provide background information, context, or foreshadowing
- Can switch between different characters' perspectives freely
- May offer insights or commentary that no single character would have
- Keep the same plot, events, and dialogue
- Provide a comprehensive, all-knowing narrative perspective`;break}let a=`You are a professional novel writing assistant specializing in narrative perspective (point of view) conversion.

CONTEXT (for reference):
Previous text: ${this.input.start.trim()}
${n}: ${this.input.text.trim()}
Following text: ${this.input.end.trim()}

TASK:
${i}

CRITICAL RULES:
1. Return ONLY the rewritten ${n} - do not include the previous or following text
2. Preserve the exact same events, plot points, and dialogue
3. Keep the same story content - only change the narrative perspective
4. Maintain the same scene, setting, and timeline
5. Ensure smooth flow with the context if pronouns or references need adjustment
6. Do not add new information or remove existing information
7. Do not add any explanations, comments, or labels
8. Keep similar length and pacing
9. Maintain the original tone and style as much as possible
10. Ensure grammatical correctness and natural flow in ${r}

SELECTED_TEXT to rewrite:
${this.input.text.trim()}

Return only the rewritten text in ${r}:`;return Qe.getState().executePrompt({prompt:a}).then(s=>Dl.getFittingString(s.result,this.input.start+this.input.text+this.input.end))}}class pA extends aO{constructor(){super(pA.getToolName())}getIcon(){return b.jsxDEV(jit,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/TextTenseTools.tsx",lineNumber:12,columnNumber:16},this)}getIconHotspot(){return{x:8,y:8}}static getToolName(){return"1st Person POV"}executeLocalWithGlobalImpactModification(e,n,r){return new PB({start:e,text:n,end:r}).execute("FIRST_PERSON")}}class gA extends aO{constructor(){super(gA.getToolName())}getIcon(){return b.jsxDEV(Rit,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/TextTenseTools.tsx",lineNumber:34,columnNumber:16},this)}getIconHotspot(){return{x:8,y:8}}static getToolName(){return"3rd Person Limited POV"}executeLocalWithGlobalImpactModification(e,n,r){return new PB({start:e,text:n,end:r}).execute("THIRD_PERSON_LIMITED")}}class vA extends aO{constructor(){super(vA.getToolName())}getIcon(){return b.jsxDEV(Oit,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/TextTenseTools.tsx",lineNumber:56,columnNumber:16},this)}getIconHotspot(){return{x:8,y:8}}static getToolName(){return"3rd Person Omniscient POV"}executeLocalWithGlobalImpactModification(e,n,r){return new PB({start:e,text:n,end:r}).execute("THIRD_PERSON_OMNISCIENT")}}class Iit extends xc{execute(e){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input,parameters:e});let r=`${this.input}

Rate this sentence on ${e.length} scales. Respond using JSON like`;const i=["A","B","C","D","E","F","G","H","I","J","K"];return r+="{"+e.map((a,s)=>`${i[s]}: /* rating on scale from 0 being ${a.lowAdjective} to 10 being ${a.highAdjective}*/`).join(`,
`)+"}",Qe.getState().executePrompt({prompt:r,json:!0}).then(a=>{try{const s=Jfe.parseJSON(a.result),o=JSON.parse(JSON.stringify(e));return Object.entries(s).forEach(([l,c])=>{const f=i.indexOf(l);f!==-1&&(o[f].value=c)}),o}catch(s){console.error("Error while parsing JSON",s)}return e})}}class yA extends Mm{constructor(){super(yA.getToolName())}getMarksClassname(){return"genericSelection"}getIcon(){return b.jsxDEV(jRe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/TonePickerTool.tsx",lineNumber:19,columnNumber:16},this)}getIconHotspot(){return{x:2,y:14}}onTextSelected(e){const n=Qe.getState().tone,r=e.range.toString();r.length>1&&new Iit(r).execute(n).then(i=>{oa.getState().storeUndoState(),Rr.getState().logEvent("TONE_CHANGED",{source:"eyedropper",tone:n}),Qe.getState().setTone(i),Qe.getState().setSelectedTexts([])})}static getToolName(){return"Tone Picker"}}class bA extends Mm{constructor(){super(bA.getToolName())}getIcon(){return b.jsxDEV(SHe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/ItalicTool.tsx",lineNumber:13,columnNumber:16},this)}onTextSelected(e){const n=e.range.toString();if(!n||n.length===0)return;const r=`*${n}*`,i=Qe.getState().selectedTexts,a=[];for(const s of i)a.push({...s,text:r,isLoading:!1});oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(a),Qe.getState().setSelectedTexts([])}applyOnCurrentSelection(){const e=Qe.getState().selectedTexts;if(e.length===0)return;const n=[];for(const r of e){const i=`*${r.text}*`;n.push({...r,text:i,isLoading:!1})}oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(n),Qe.getState().setSelectedTexts([])}static getToolName(){return"Italicize"}}class wA extends Mm{constructor(){super(wA.getToolName())}getIcon(){return b.jsxDEV(bHe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/BoldTool.tsx",lineNumber:13,columnNumber:16},this)}onTextSelected(e){const n=e.range.toString();if(!n||n.length===0)return;const r=`**${n}**`,i=Qe.getState().selectedTexts,a=[];for(const s of i)a.push({...s,text:r,isLoading:!1});oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(a),Qe.getState().setSelectedTexts([])}applyOnCurrentSelection(){const e=Qe.getState().selectedTexts;if(e.length===0)return;const n=[];for(const r of e){const i=`**${r.text}**`;n.push({...r,text:i,isLoading:!1})}oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(n),Qe.getState().setSelectedTexts([])}static getToolName(){return"Bold"}}class Mit extends xc{execute(e){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input,parameters:e});const n=this.input,r=e.context||"",i=`Word: ${n}
Context: ${r}

Task: Replace the Word with a single, context-appropriate synonym that preserves the intended meaning and tone.
Rules: Return only the synonym (one or two words max), no explanations.`;return Qe.getState().executePrompt({prompt:i}).then(a=>{const s=(a.result||"").trim();return s||n})}}class xA extends Mm{constructor(){super(xA.getToolName())}getIcon(){return b.jsxDEV(Brt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/model/tools/toolbarTools/SynonymTool.tsx",lineNumber:14,columnNumber:16},this)}onTextSelected(e){const n=e.range.toString(),r=e.precedingRange.toString(),i=e.followingRange.toString();if(!n||n.length===0)return;const a=`${r.slice(-100)} [${n}] ${i.slice(0,100)}`,s=Qe.getState().selectedTexts;Qe.getState().setSelectedTexts(s.map(o=>({...o,isLoading:!0}))),new Mit(n).execute({context:a}).then(o=>{const l=Qe.getState().selectedTexts,c=[];for(const f of l)c.push({...f,text:o,isLoading:!1});oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(c),Qe.getState().setSelectedTexts([])})}static getToolName(){return"Change Synonym"}}class $N{static getHighlightedNodeDifference(e,n){const r=e.map(a=>vt.string({children:a.children.filter(s=>s.removed===void 0)})).join(`
`),i=n.map(a=>vt.string({children:a.children.filter(s=>s.removed===void 0)})).join(`
`);if(r!==i){const a=new RegExp("\\0","g"),s=Bse(r,i.replace(a,"")),o=[];for(const l of s)l.removed?o.push({text:l.value,removed:!0}):l.added?o.push({text:l.value,added:!0}):o.push({text:l.value});return[{children:o,type:"paragraph",differences:!0}]}return[]}static startTextFieldAnimation(e,n,r,i,a=1500){$N.stopTextFieldAnimation(e,n);const s=JSON.parse(JSON.stringify(n.selection));n.deselect(),n.children=i,n.onChange();const o=setTimeout(()=>{$N.stopTextFieldAnimation(e,n)},a);$V[e]={timeout:o,storedSelection:s,storedState:r}}static stopTextFieldAnimation(e,n){const r=$V[e];r&&(clearTimeout(r.timeout),n.children=r.storedState,n.deselect(),n.onChange(),$V[e]=null)}}const Vit={BASE_URL:"/VisualStoryWriting",DEV:!0,MODE:"development",PROD:!1,SSR:!1,VITE_GEMINI_API_KEY:"AIzaSyBntgDi_Ae0BRg2emcR93FHqVzkdiHwP8g",VITE_OPENAI_API_KEY:"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"},M5="gpt-4.1-mini-2025-04-14",V5=1;console.log(`[TextoshopReview] Default model: ${M5}, temperature: ${V5}`);const EZ=window.location.hash.split("?"),$it=EZ[EZ.length-1],Lit=new URLSearchParams($it),NZ=Lit.get("k");let wm="";NZ?(wm=atob(NZ),console.log("[TextoshopReview] Using OpenAI API key from URL parameter")):"VITE_OPENAI_API_KEY"in Vit?(wm="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",console.log("[TextoshopReview] Using OpenAI API key from VITE_OPENAI_API_KEY")):typeof localStorage<"u"&&localStorage.getItem("OPENAI_API_KEY")?(wm=localStorage.getItem("OPENAI_API_KEY")||"",console.log("[TextoshopReview] Using OpenAI API key from localStorage")):console.warn("[TextoshopReview] No OpenAI API key found. Please set VITE_OPENAI_API_KEY in .env file");function Fit(){return"https://api.openai.com/v1"}(!wm||wm.trim()==="")&&console.error("[TextoshopReview] OpenAI API key is missing. Please add VITE_OPENAI_API_KEY to your .env file and restart the server.");const YD=new Qn({apiKey:wm||"dummy-key",baseURL:Fit(),dangerouslyAllowBrowser:!0});window.Transforms=ot;const xl=window.textFieldEditors={},$V={},Vs={};function _Z(){const t=[[(Vs[Cw.getToolName()]=new Cw).name],[(Vs[dA.getToolName()]=new dA).name],[(Vs[yA.getToolName()]=new yA).name],[(Vs[xA.getToolName()]=new xA).name],[(Vs[vA.getToolName()]=new vA).name,(Vs[pA.getToolName()]=new pA).name,(Vs[gA.getToolName()]=new gA).name],[(Vs[bA.getToolName()]=new bA).name],[(Vs[wA.getToolName()]=new wA).name],[(Vs[mA.getToolName()]=new mA).name],[(Vs[fA.getToolName()]=new fA).name],[(Vs[hA.getToolName()]=new hA).name]],e=[{id:"1",layer:{name:"Main",color:"white",isVisible:!0,state:[{type:"paragraph",children:[{text:""}]}],modifications:{}},children:[]},{id:"2",layer:{name:"Layer 2",color:fZ[0],isVisible:!0,modifications:{}},children:[]},{id:"3",layer:{name:"Layer 3",color:fZ[1],isVisible:!0,modifications:{}},children:[]}];return{inMultipleSelectionMode:!1,selectedTexts:[],selectedTool:Cw.getToolName(),editors:{},animateChangesUntilTimestamp:0,tone:[{lowAdjective:"Romance Fantasy",highAdjective:"Modern",value:5},{lowAdjective:"Weak Character",highAdjective:"Strong Character",value:5},{lowAdjective:"Low Status",highAdjective:"High Status",value:5}],savedTones:[],layers:e,selectedLayerId:0,textFields:[{x:-1,y:-1,width:-1,height:-1,isMoveable:!1,id:"mainTextField",state:va.getStateFromLayers(e),isVisible:!0}],toolsOrderInToolbar:t}}function GS(t,e,n){t.forEach(r=>{const i=e(r),a=xl[i];a&&n(r,a,i)})}const Qe=Xf()((t,e)=>({..._Z(),reset:()=>{t(n=>({..._Z()})),e().refreshTextFields()},setInMultipleSelectionMode:n=>t(r=>({inMultipleSelectionMode:n})),setSelectedTool:n=>{t(r=>({selectedTool:n})),Rr.getState().logEvent("TOOL_SELECTED",{tool:n})},getSelectedTool:()=>Vs[e().selectedTool],executePrompt:async n=>{var a,s,o;const r=Rr.getState().logEvent;if(!wm||wm.trim()===""||wm==="dummy-key"){const l=`OpenAI API key is missing. Please:
1. Create a .env file in the project root
2. Add: VITE_OPENAI_API_KEY=your_api_key_here
3. Restart the development server (npm run dev)`;return console.error("[TextoshopReview]",l),alert(l),{result:"ERROR: "+l}}const i=Math.random().toString(36).substring(7);if(n.response_format){const l=n.model||M5,c=n.temperature!==void 0?n.temperature:V5;console.log(`[TextoshopReview] Executing structured prompt with model: ${l}, temperature: ${c}`);const f=YD.beta.chat.completions.parse({model:l,messages:[{role:"user",content:n.prompt}],temperature:c,max_completion_tokens:1e4,response_format:KF(n.response_format.zodObject,n.response_format.name)});return r("PROMPT_SENT_TO_GPT",{...n,uniqueId:i}),new Promise(async(h,m)=>{f.then(p=>{var y;const v=(y=p.choices[0])==null?void 0:y.message;v!=null&&v.parsed&&(r("RESULT_FROM_GPT",{uniqueId:i,response:v.content}),h({result:v.content||"",parsed:v.parsed}))})})}else{const l=n.model||M5,c=n.temperature!==void 0?n.temperature:V5;console.log(`[TextoshopReview] Executing streaming prompt with model: ${l}, temperature: ${c}`);let f;try{f=await YD.chat.completions.create({model:l,messages:[{role:"user",content:n.prompt}],stream:!0,temperature:c,response_format:n.json?{type:"json_object"}:void 0})}catch{console.warn("[TextoshopReview] Streaming failed, retrying without stream...");try{const p=((o=(s=(a=(await YD.chat.completions.create({model:l,messages:[{role:"user",content:n.prompt}],temperature:c,response_format:n.json?{type:"json_object"}:void 0})).choices)==null?void 0:a[0])==null?void 0:s.message)==null?void 0:o.content)||"";return r("RESULT_FROM_GPT",{uniqueId:i,response:p}),{result:p}}catch(m){const p=m&&m.message?m.message:"LLM request failed";return r("RESULT_FROM_GPT",{uniqueId:i,response:`ERROR: ${p}`}),{result:`ERROR: ${p}`}}}return r("PROMPT_SENT_TO_GPT",{...n,uniqueId:i}),new Promise(async(h,m)=>{var v,y;let p="";for await(const x of f){const S=((y=(v=x.choices[0])==null?void 0:v.delta)==null?void 0:y.content)||"";p+=S}r("RESULT_FROM_GPT",{uniqueId:i,response:p}),h({result:p})})}},setTextFields:n=>{const r=e().textFields;let i=!1;const a=n.map(o=>{const l=r.filter(c=>c.id===o.id);return l.length===1&&o.state.length>0&&o.state[0].differences?(i=!0,l[0]):o});!i&&n.map(o=>vt.string(o.state[0])).join(`
`)!==r.map(o=>vt.string(o.state[0])).join(`
`)&&oa.getState().storeUndoStateDebounced();const s=[];GS(a,o=>o.id,(o,l,c)=>{const f=fe.nodes(l,{at:[],mode:"all",match:h=>h.selectionId!==void 0});for(const[h,m]of f){const p=e().selectedTexts.filter(y=>y.textFieldId===c&&y.selectionId===h.selectionId),v=vt.string(h);s.push({textFieldId:c,startPoint:{path:m,offset:0},endPoint:{path:m,offset:v.length},text:v,selectionId:h.selectionId,isLoading:p.length===1?p[0].isLoading:!1})}}),s.sort((o,l)=>o.selectionId-l.selectionId),t(o=>({textFields:a,selectedTexts:s}));try{const o=r.find(c=>c.id==="translationField"),l=a.find(c=>c.id==="translationField");if(o&&l){const c=vt.string(o.state[0]||{}),f=vt.string(l.state[0]||{});c!==f&&window.dispatchEvent(new CustomEvent("translationFieldChanged"))}}catch{}GS(n,o=>o.id,(o,l,c)=>{var f;if(c==="mainTextField"&&!o.state[0].differences){const m=r.filter(v=>v.id===c)[0].state,p=o.state;if(e().layers[0].layer.state.length===0||m.map(v=>vt.string(v)).join(`
`)!==p.map(v=>vt.string(v)).join(`
`)){const v=va.updateLayersFromNewState(e().layers,e().selectedLayerId,o.state);if(v){t(_=>({layers:JSON.parse(JSON.stringify(v))}));const y=va.getStateFromLayers(v),x=ya.toStrIndex(p,((f=l.selection)==null?void 0:f.anchor)||{path:[],offset:0});let S=ya.toSlatePoint(y,x);S===null&&(S=fe.end(l,[])),l.selection=S?{anchor:S,focus:S}:null,l.children=y,l.onChange()}}}}),Date.now()<e().animateChangesUntilTimestamp&&GS(n,o=>o.id,(o,l,c)=>{const f=r.filter(h=>h.id===c);if(f.length===1&&!o.state[0].differences){const h=f[0].state,m=o.state,p=$N.getHighlightedNodeDifference(h,m);p.length>0&&$N.startTextFieldAnimation(c,l,m,p)}})},setTextField:(n,r)=>{const a=e().textFields.map(s=>s.id===n?{...s,...r}:s);t(s=>({textFields:a}))},removeTextField:n=>{Rr.getState().logEvent("TEXT_FIELD_REMOVED",{textFieldId:n});const i=e().textFields.map(a=>a.id===n?{...a,isVisible:!1}:a);t(a=>({textFields:[...i]}))},setSelectedTexts:(n,r=!1)=>{n.length===0?GS(e().textFields,i=>i.id,(i,a,s)=>{ot.unsetNodes(a,["selection","selectionId","selectionClassname"],{at:[],mode:"all",match:o=>o.selection&&o.selectionClassname!=="reviewIssue"})}):GS([...new Set(n.map(i=>i.textFieldId))],i=>i,(i,a,s)=>{a.deselect();const o=fe.nodes(a,{at:[],mode:"all",match:l=>l.selectionId!==void 0});for(const[l,c]of o){const f=l.selectionId,h=n.find(m=>m.selectionId===f);if(h&&vt.string(l)!==h.text){if(h.text.length===0&&vt.string(a)!==vt.string(l)&&a.select(c),l.selectionClassname==="reviewIssue")continue;ot.insertText(a,h.text,{at:c}),vt.string(a).length===0&&(r&&s!=="mainTextField"?e().removeTextField(s):(a.children=[{type:"paragraph",children:[{text:""}]}],a.select(fe.start(a,[])),a.onChange()))}}}),t(i=>({selectedTexts:n}))},refreshTextFields:(n=!1)=>{const r=e().textFields;for(const i of r)if(i.id==="mainTextField"){const a=va.getStateFromLayers(e().layers),s=xl[i.id];s&&(s.children=a,s.onChange()),(!s||n)&&(i.state=a,t(o=>({textFields:[...o.textFields]})))}else{const a=xl[i.id];a&&(a.children=i.state,a.onChange())}},setSelectedLayer:n=>{n!==e().selectedLayerId&&(Rr.getState().logEvent("LAYER_SELECTED",{layerId:n}),t(r=>({selectedLayerId:n})))},setLayerVisibility:(n,r)=>{const i=e().layers;va.flattenHierarchicalLayersWithParent(i).forEach((a,s)=>{if(s===n){if(Rr.getState().logEvent("LAYER_VISIBILITY_CHANGED",{layerId:n,isVisible:r,layerName:a.hlayer.layer.name}),r){let o=a.parent;for(;o;)o.hlayer.layer.isVisible=!0,o=o.parent}else{const o=a.hlayer.children;if(o){const l=[...o];for(;l.length>0;){const c=l.shift();c&&c.children&&(c.layer.isVisible=!1,l.push(...c.children))}}}a.hlayer.layer.isVisible=r}}),e().refreshTextFields()},setLayerProperties:(n,r)=>{const i=e().layers,a=[...i];let s=0;for(;a.length>0;){const o=a.shift();if(o){if(s===n){Rr.getState().logEvent("LAYER_PROPERTIES_CHANGED",{layerId:n,properties:r,layerName:o.layer.name}),o.layer={...o.layer,...r};break}o.children&&a.unshift(...o.children)}s++}t(o=>({layers:[...i]}))},animateNextChanges:()=>{t(n=>({animateChangesUntilTimestamp:Date.now()+200}))},removeLayer:n=>{if(n===0)return;const r=e().layers,i=va.flattenHierarchicalLayersWithParent(r);if(n<i.length){const a=i[n],s=a.parent,o=a.indexWithinParent;s&&s.hlayer.children?s.hlayer.children.splice(o,1):r.splice(o,1),n===e().selectedLayerId&&e().setSelectedLayer(n-1),Rr.getState().logEvent("LAYER_REMOVED",{layerId:n,layerName:a.hlayer.layer.name}),t(l=>({layers:[...r]})),e().refreshTextFields()}},addLayer:(n,r,i)=>{const a=e().layers,s=va.flattenHierarchicalLayers(a);if(r===null)a.splice(i,0,n);else if(r<s.length){const l=s[r];l.children&&l.children.length>=i&&l.children.splice(i,0,n)}const o=va.flattenHierarchicalLayers(a).findIndex(l=>l===n);o!==-1&&(n.id=o.toString()),Rr.getState().logEvent("LAYER_ADDED",{layerName:n.layer.name,parentId:r,idWithinParent:i}),t(l=>({layers:[...a]})),e().refreshTextFields()},moveLayer:(n,r,i)=>{const a=e().layers,s=va.flattenHierarchicalLayers(a);if(n<s.length&&n>0){const o=s[n],l=r===null?i:r+i;if(l<0||l>s.length)return;l<n?(e().removeLayer(n),e().addLayer(o,r,i)):(e().addLayer(o,r,i),e().removeLayer(n)),Rr.getState().logEvent("LAYER_MOVED",{layerId:n,targetParentId:r,idWithinParent:i})}},setTone:n=>{t(r=>({tone:n}))},addSavedTone:n=>{const r=e().tone,i=`rgb(${r[0].value/10*255}, ${r[1].value/10*255}, ${r[2].value/10*255})`,a={id:Date.now().toString(),name:n,tone:JSON.parse(JSON.stringify(r)),color:i};t(s=>({savedTones:[...s.savedTones,a]}))},removeSavedTone:n=>{t(r=>({savedTones:r.savedTones.filter(i=>i.id!==n)}))},updateSavedToneName:(n,r)=>{t(i=>({savedTones:i.savedTones.map(a=>a.id===n?{...a,name:r}:a)}))},loadSavedTone:n=>{const r=e().savedTones.find(i=>i.id===n);r&&t(i=>({tone:JSON.parse(JSON.stringify(r.tone))}))},setToolOrderInToolbar:n=>t(r=>({toolsOrderInToolbar:n})),setOpenAIKey:n=>{YD.apiKey=n}}));function Bit(t){return nn({attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M5.12263 12H5.1H3.5C3.22386 12 3 11.7761 3 11.5C3 11.2239 3.22386 11 3.5 11H5.1C6.22836 11 7.04455 10.9996 7.68648 10.9472C8.32256 10.8952 8.74338 10.7946 9.08897 10.6185C9.74753 10.283 10.283 9.74753 10.6185 9.08897C10.7946 8.74338 10.8952 8.32256 10.9472 7.68648C10.9996 7.04455 11 6.22836 11 5.1V3.5C11 3.22386 11.2239 3 11.5 3C11.7761 3 12 3.22386 12 3.5V5.1V5.12263C12 6.22359 12 7.08052 11.9438 7.76791C11.8868 8.46584 11.7694 9.0329 11.5095 9.54296C11.0781 10.3897 10.3897 11.0781 9.54296 11.5095C9.0329 11.7694 8.46584 11.8868 7.76791 11.9438C7.08052 12 6.22359 12 5.12263 12Z",fill:"currentColor"},child:[]}]})(t)}const Uit=4;class Wit extends xc{constructor(e){super(e),this.cache.set("0",e)}parseList(e){return e.split(`
`).map(i=>{const a=i.match(/^\d+\.\s*(.*)/);return a?a[1]:null}).filter(i=>i!==null)}execute(e){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input,parameters:e});const n=this.input;let r=`${n}

Reorganize the words in ${Uit} different ways.`;return Qe.getState().executePrompt({prompt:r}).then(i=>{const a=this.parseList(i.result),s=[-2,-1,1,2];if(a.forEach((c,f)=>{this.cache.set(s[f]+"",Dl.getFittingString(c,n))}),this.cache.has(e+""))return this.cache.get(e+"");const o=[...this.cache.keys()].map(c=>parseInt(c));let l=o[0];for(let c=1;c<o.length;c++)Math.abs(o[c]-e)<Math.abs(l-e)&&(l=o[c]);return this.cache.get(l+"")})}}class CZ extends xc{constructor(e){super(e),this.cache.set(""+e.length,e)}getAllPossibleParagraphs(e){function n(a){let s=[];function o(l,c){if(l===a.length){s.push([...c]);return}for(let f of a[l])c.push(f),o(l+1,c),c.pop()}return o(0,[]),s}const r=n(e),i=[];for(let a of r)i.push(a.join(" "));return i}execute(e){if(Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input,parameters:e}),e===0)return Promise.resolve("");const n=Math.round(this.input.length/4.7),i=Math.round(e/4.7)-n,a=e<this.input.length,s=this.input.match(/[^.!?]+[.!?]+/g),o=s?s.map(h=>h):[this.input];for(let h=0;h<o.length;h++)o[h].split(" ").length<4&&(h===o.length-1?(o[h-1]+=" "+o[h],o.splice(h,1)):(o[h]+=" "+o[h+1],o.splice(h+1,1)));let l=Math.round(i/o.length);l=l===0?a?-1:1:l;const c=o.length===1?[-6,-4,-2,-1,0,1,2,4,6]:[-3,0,3],f=o.map(h=>{const m=Math.round(h.length/4.7),p=c.map(v=>{const y=Math.round(m+l+v);return new Cit({model:"gpt-4o-mini-2024-07-18",prompt:`${h}

${a?"Shorten":"Lengthen"} to ${y} words by ${a?"removing":"adding"} ${l+v} words.`})});return new xZ(p)});return new xZ(f).execute().then(h=>{const m=o.length===1?h.map((y,x)=>[...y.map(S=>Dl.getFittingString(S.result,o[x]))]):h.map((y,x)=>[o[x],...y.map(S=>Dl.getFittingString(S.result,o[x]))]),p=this.getAllPossibleParagraphs(m);return p.forEach(y=>{this.cache.set(""+y.length,y)}),p.reduce((y,x)=>Math.abs(x.length-e)<Math.abs(y.length-e)?x:y)})}}const zit=`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z' fill='black'/><path fill-rule='evenodd' clip-rule='evenodd' d='M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z' fill='white'/></g></svg>") 16 16, pointer`,TZ=`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='-0.9999999999999999' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(90 16 16)' filter='url(%23shadow)'><path d='M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z' fill='black'/><path fill-rule='evenodd' clip-rule='evenodd' d='M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z' fill='white'/></g></svg>") 16 16, pointer`,Hit=`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='-1.0000000000000002' dy='0.9999999999999998' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(270 16 16)' filter='url(%23shadow)'><path d='M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z' fill='black'/><path fill-rule='evenodd' clip-rule='evenodd' d='M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z' fill='white'/></g></svg>") 16 16, pointer`,Git=`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='-0.9999999999999999' dy='-1.0000000000000002' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(180 16 16)' filter='url(%23shadow)'><path d='M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z' fill='black'/><path fill-rule='evenodd' clip-rule='evenodd' d='M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z' fill='white'/></g></svg>") 16 16, pointer`,JD=[],qD=[];function Kit(t){const e=t.children.props.text.text,[n,r]=R.useState(!1),[i,a]=R.useState(!1),[s,o]=R.useState(!1),[l,c]=R.useState(!1),[f,h]=R.useState(!1),m=R.useRef(null),p=R.useRef(null),v=R.useRef(null),y=R.useRef(null),[x,S]=R.useState(e),[_,N]=R.useState(0),k=". ",[P,O]=R.useState(0),A=wa(Te=>Te.startDragging),T=wa(Te=>Te.dragging),L=R.useId(),B=Qe(Te=>Te.selectedTexts),W=Rr(Te=>Te.disableResizing),Y=Rr(Te=>Te.disableDragging),V=Qe(Te=>Te.animateNextChanges),I=50,H=Math.round(I/1.42),q=[-135,-90,-45,0,45],F=q.map(Te=>{const ye=Te*Math.PI/180,Ie=Math.cos(ye)*I,Re=Math.sin(ye)*I;return{x:Ie-H,y:Re+H}}),J=B.find(Te=>Te.selectionId===t.leaf.selectionId);!n&&!i&&!l&&x!==e&&S(e);let Z=null;for(const Te of JD)if(Te.isValueCached(e)){Z=Te;break}Z===null&&(Z=new Wit(e),JD.push(Z),JD.length>5&&JD.shift());let G=null;for(const Te of qD)if(Te.isValueCached(e)){G=Te;break}G===null&&(G=new CZ(e),qD.push(G),qD.length>5&&qD.shift());function oe(Te,ye=!1){ot.removeEmptyNodes=!0;const Ie=[],Re=Qe.getState().selectedTexts;for(const Ee of Re)Ie.push({...Ee,text:Te,isLoading:!1});Qe.getState().setSelectedTexts(Ie,ye),ot.removeEmptyNodes=!1}const ae=R.useCallback(Te=>{var Ie;const ye=(Ie=p.current)==null?void 0:Ie.getBoundingClientRect();if(p.current&&ye){const Re=Te.clientX-(ye.right-ye.width/2-H),Ee=Te.clientY-(ye.bottom-ye.height/2+H),$e=Math.atan2(Ee,Re)*180/Math.PI,He=Math.min(...q),gt=Math.max(...q),Ye=Math.round(($e-He)/(gt-He)*(q.length-1));return N(Math.min(Ye-2,2)),$e}return 0},[p]);R.useEffect(()=>{const Te=Re=>{var Ee;(Ee=document.activeElement)!=null&&Ee.contains(document.getElementById(L))&&(Re.key==="Backspace"||Re.key==="Delete"?(oe(""),Re.preventDefault(),Re.stopPropagation()):Kf.keyEventToCharacter(Re)?(oe(""),rt.toDOMNode(t.editor,t.editor).dispatchEvent(new KeyboardEvent("keydown",{key:Re.key}))):(Re.ctrlKey||Re.metaKey)&&(Re.key==="x"?(navigator.clipboard.writeText(e),oe("")):Re.key==="c"?navigator.clipboard.writeText(e):Re.key==="v"&&navigator.clipboard.readText().then(He=>{oe(He)})))},ye=Re=>{if(i)a(!1),e.length>0&&e.split(" ").length>1&&(Z.cachedExecute(_).then(Ee=>{oa.getState().storeUndoState(),V(),oe(Ee),o(!1)}),o(!0));else if(n&&(r(!1),P!==0)){const Ee=Dl.getBestSpacePadding(e,P,m.current,k),$e=e.length+Ee;(Math.abs(Ee)<10?new CZ(e):G).cachedExecute($e).then(gt=>{oa.getState().storeUndoState(),V(),S(gt),O(0),oe(gt),o(!1)}),o(!0)}},Ie=Re=>{var Ee,$e;if(n){const He=(Ee=y.current)==null?void 0:Ee.getBoundingClientRect();if(y.current&&He){let gt=($e=y.current.parentElement)==null?void 0:$e.closest("[role=textbox]");if(gt){const Ye=Dl.getAbsoluteWrappedLinesWidth(gt,He.left+He.width/2,He.top+He.height/2,Re.clientX,Re.clientY);let yt=x.substring(0,Math.min(x.length+te,x.length));yt+=k.repeat(Math.max(te,0));const _t=Kf.getTextMetrics(yt,Kf.getCanvasFont(gt)).width;O(_t+Ye)}}}else i&&ae(Re)};return window.addEventListener("mouseup",ye),window.addEventListener("mousemove",Ie),window.addEventListener("keydown",Te),()=>{window.removeEventListener("mouseup",ye),window.removeEventListener("mousemove",Ie),window.removeEventListener("keydown",Te)}},[n,i,P,_,e]);let te=0;P>0&&(te=m.current?Dl.getBestSpacePadding(x,P,m.current,k):0);const re=Te=>{h(!0),Te.preventDefault(),Te.stopPropagation()},X=Te=>{h(!1)},ce=Te=>{if(!Y&&f&&!T&&Te.buttons===1&&!n&&!i){const ye=Te.currentTarget.getBoundingClientRect(),Ie=Te.currentTarget.getClientRects(),Re="textField"+L;let Ee=[...Ie].reduce((_t,St)=>_t+St.width,0),$e=Math.min(...[...Ie].map(_t=>_t.height));const gt=Math.min(Math.max(200,(document.body.clientWidth-700)/2),700);Ee=Math.min(Ee,gt);const Ye={x:ye.left,y:ye.top,width:Ee+30,height:$e,isMoveable:!0,id:Re,isVisible:!0,state:[{type:"paragraph",children:[{text:e}]}]};Qe.getState().setTextFields([...Qe.getState().textFields,Ye]);const yt={elementId:Re,offsetX:Te.clientX-ye.left,offsetY:Te.clientY-ye.top,cloned:!1,initialX:Te.clientX,initialY:Te.clientY,initialStyle:{position:"absolute",opacity:"1",left:ye.left+"px",top:ye.top+"px",zIndex:"99"},onElementDropped(_t,St){const Bt=St==null?void 0:St.getBoundingClientRect();Bt&&(Rr.getState().logEvent("TEXTFIELD_CREATED",{text:e,x:Bt.left,y:Bt.top,width:Bt.width,height:Bt.height}),Qe.getState().setTextField(Re,{x:Bt.left,y:Bt.top,width:Bt.width,height:Bt.height}))}};oe(""),A([yt]),c(!0)}},he=s||(J==null?void 0:J.isLoading),ve=7,Ne=x.substring(0,Math.min(x.length+te,x.length)),ke=Te=>{Te.preventDefault(),Te.stopPropagation()};return b.jsxDEV("div",{id:L,style:{position:"relative",display:"inline",cursor:"pointer",opacity:l?"0.5":"1"},onMouseDown:re,onMouseMove:ce,onClick:ke,onDoubleClick:ke,onMouseUp:X,className:(he?"loading ":"")+t.className,children:[!W&&b.jsxDEV("span",{style:{position:"relative"},children:[b.jsxDEV("div",{style:{position:"absolute",zIndex:9999,left:-3,top:-4,border:"1px solid hsl(214, 84%, 56%)",width:ve,height:ve,background:"white",cursor:zit}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:323,columnNumber:13},this),b.jsxDEV("div",{ref:v,style:{position:"absolute",zIndex:9999,left:-3,bottom:-4,border:"1px solid hsl(214, 84%, 56%)",width:ve,height:ve,background:"white",cursor:Hit}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:324,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:322,columnNumber:30},this),b.jsxDEV("span",{id:t.id,ref:t.ref,style:{position:"relative",background:t.leaf.selectionClassname==="reviewIssue"?"rgba(255, 196, 0, 0.45)":"rgba(129, 189, 255, 0.5)",overflow:"hidden",...t.style},title:t.leaf.selectionTooltip||void 0,children:[b.jsxDEV("span",{ref:m,children:b.jsxDEV("span",{children:Ne},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:332,columnNumber:37},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:332,columnNumber:13},this),b.jsxDEV("span",{style:{color:"transparent"},children:k.repeat(Math.max(te,0))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:333,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:326,columnNumber:9},this),b.jsxDEV("span",{style:{position:"relative"},children:[!W&&b.jsxDEV("div",{ref:p,style:{position:"absolute",left:-4,top:-4,border:"1px solid hsl(214, 84%, 56%)",width:ve,height:ve,background:"white",cursor:TZ},onMouseDown:Te=>{Te.stopPropagation(),Te.preventDefault(),a(!0)}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:337,columnNumber:34},this),i&&b.jsxDEV("div",{style:{position:"absolute",left:0,top:0,width:1,height:1,overflow:"visible",cursor:TZ},children:b.jsxDEV("svg",{style:{overflow:"visible"},children:[b.jsxDEV("path",{d:`M ${F[0].x} ${F[0].y} A 1 1 0 0 1 ${F[4].x} ${F[4].y}`,stroke:"black",strokeWidth:3,fill:"transparent"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:344,columnNumber:21},this),F.map((Te,ye)=>_+2===ye?b.jsxDEV("circle",{cx:Te.x,cy:Te.y,r:6,strokeWidth:2,stroke:"black",fill:_+2===ye?"white":"black"},ye,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:347,columnNumber:36},this):b.jsxDEV("circle",{cx:Te.x,cy:Te.y,r:3,fill:"black"},ye,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:349,columnNumber:32},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:343,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:342,columnNumber:29},this),!W&&b.jsxDEV("div",{ref:y,style:{position:"absolute",left:-4,bottom:-4,border:"1px solid hsl(214, 84%, 56%)",width:ve,height:ve,background:"white",cursor:Git}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:354,columnNumber:34},this),!W&&b.jsxDEV("div",{style:{position:"absolute",left:-3,width:6,height:"100%",top:0,background:"transparent",cursor:"ew-resize"},onMouseDown:Te=>{Te.stopPropagation(),Te.preventDefault(),r(!0)}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:356,columnNumber:34},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:336,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/SelectedText.tsx",lineNumber:317,columnNumber:12},this)}const Yit=rt.toDOMRange;rt.toDOMRange=(t,e)=>{try{return Yit.apply(rt,[t,e])}catch{return t.selection&&pr.equals(t.selection.anchor,e.anchor)&&pr.equals(t.selection.focus,e.focus)&&(t.selection=null),null}};const Jit=ot.removeNodes;ot.removeNodes=(t,e)=>{if(!ot.removeEmptyNodes&&e&&e.at){const[n]=fe.node(t,e.at);if(n.layerTagId!==void 0&&n.text===""){const r=fe.nodes(t,{at:[],mode:"all",match:i=>i.layerTagId===n.layerTagId});for(const[i,a]of r);return}}Jit.apply(ot,[t,e])};const qit=t=>{var r,i,a,s,o;if(t.leaf.selection&&t.leaf.selectionClassname==="textSelection")return b.jsxDEV(Kit,{leaf:t.leaf,editor:t.editor,id:"selection",className:"selectedText",children:t.children},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:66,columnNumber:16},void 0);if(t.leaf.test)return b.jsxDEV("span",{style:{background:"red"},...t.attributes,children:t.children},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:68,columnNumber:16},void 0);if(t.leaf.horizontalLine)return b.jsxDEV("span",{style:{borderBottom:"1px solid black",display:"block",margin:"5px 0"},...t.attributes,children:t.children},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:70,columnNumber:16},void 0);const e=[],n={};if(t.leaf.layerTagId&&va.flattenHierarchicalLayers(Qe.getState().layers).forEach(l=>{const c=l.layer;c.isVisible&&t.leaf.layerTagId+""in c.modifications&&(e.push("layer-tag"),e.push("belong-to-layer-"+l.id),n["--layer-color"]=c.color)}),t.leaf.removed)e.push("textRemoval");else if(t.leaf.added)e.push("textAddition");else if(t.leaf.selectionClassname){e.push(t.leaf.selectionClassname),e.push("loading");const l=Qe.getState().tone;n["--tone-color"]=`${l[0].value/10*255}, ${l[1].value/10*255}, ${l[2].value/10*255}`}try{const l=window.reviewOverlays&&window.reviewOverlays[((r=t.editor)==null?void 0:r.id)||"translationField"];if(l&&Array.isArray(l)){const c=((s=(a=(i=t.children)==null?void 0:i.props)==null?void 0:a.text)==null?void 0:s.text)||"";c&&c.length>0&&(n.backgroundImage=n.backgroundImage||"linear-gradient(transparent, transparent)",(o=t.attributes)!=null&&o.title||(t.attributes.title=t.leaf.selectionTooltip))}}catch{}return b.jsxDEV("span",{style:n,className:e.join(" "),...t.attributes,children:t.children},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:115,columnNumber:12},void 0)};function Xit(t){const e=Qe(A=>A.selectedTool),n=Vs[e],[r,i]=R.useState(!1),a=wa(A=>A.startDragging),s=wa(A=>A.dragging),o=Qe(A=>A.inMultipleSelectionMode),[l,c]=R.useState(!1),f=it.createRef(),h=Qe(A=>A.selectedTexts),m=Qe(A=>A.setSelectedTexts),p=Qe(A=>A.setTextFields),v=wa(A=>A.dragging),y=R.useMemo(()=>{const A=LL(sR()),{normalizeNode:T}=A;return A.normalizeNode=L=>{const[B,W]=L;if(W.length===0&&B.children.length===0){ot.insertNodes(A,{type:"paragraph",children:[{text:""}]},{at:[0]});return}T(L)},A},[]);xl[t.textField.id]=y;const x=t.textField,S=R.useCallback(A=>b.jsxDEV(qit,{...A,editor:y},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:174,columnNumber:16},this),[]),_=A=>{o||m([])},N=A=>{const T=y.selection;if(Math.abs(T?T.anchor.offset-T.focus.offset:0)===0)return;const B=rt.toSlateRange(y,A,{exactMatch:!1,suppressThrow:!0});if(B){const W=h.length,Y={editor:y,range:A,slateRange:B,preventTextSelection:!1,selectionid:W,precedingRange:rt.toDOMRange(y,fe.range(y,fe.start(y,[]),B.anchor)),followingRange:rt.toDOMRange(y,fe.range(y,B.focus,fe.end(y,[])))};Rr.getState().logEvent("TEXT_SELECTED",{range:A.toString(),tool:n.name}),Qe.getState().getSelectedTool().onTextSelected(Y),Y.preventTextSelection||(y.select(B),y.addMark("selection",!0),y.addMark("selectionId",W),y.addMark("selectionClassname",Qe.getState().getSelectedTool().getMarksClassname()),y.deselect(),Qe.getState().selectedTool===Cw.getToolName()&&Qe.getState().setTone(Qe.getState().tone.map(V=>({...V,value:5}))))}};R.useEffect(()=>{const A=L=>{if(L.button===0&&l&&f.current){const B=f.current.getBoundingClientRect(),W=Math.max(70,L.clientX-B.left),Y=L.clientY-B.top;f.current.style.width=W+"px",f.current.style.minHeight=Y+"px"}},T=L=>{var B;if(L.button===0&&l){c(!1);const W=(B=f.current)==null?void 0:B.getBoundingClientRect();W&&Qe.getState().setTextField(t.textField.id,{x:W.left,y:W.top,width:W.width,height:W.height})}};return window.addEventListener("mousemove",A),window.addEventListener("mouseup",T),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",T)}},[l]);const k=A=>{if(f.current&&t.isMoveable&&!s&&A.buttons===1){const T=f.current.getBoundingClientRect(),L=A.clientX-T.left,B=A.clientY-T.top,W={elementId:t.textField.id,offsetX:L,offsetY:B,cloned:!1,initialX:A.clientX,initialY:A.clientY,initialStyle:{position:f.current.style.position,opacity:f.current.style.opacity,left:f.current.style.left,top:f.current.style.top,zIndex:f.current.style.zIndex},onElementDropped:(Y,V)=>{var H;const I=V==null?void 0:V.getBoundingClientRect();I&&(Rr.getState().logEvent("TEXTFIELD_MOVED",{text:(H=document.getElementById(t.textField.id))==null?void 0:H.innerText,x:I.left,y:I.top,width:I.width,height:I.height}),Qe.getState().setTextField(t.textField.id,{x:I.left,y:I.top,width:I.width,height:I.height}))}};a([W])}},P=Qe.getState().tone,O={};return O["--tone-color"]=`${P[0].value/10*255}, ${P[1].value/10*255}, ${P[2].value/10*255}`,t.isMoveable&&t.style&&(t.style.padding="0px 0px 0px 15px"),b.jsxDEV("div",{ref:f,className:t.className+" editableTextField"+(t.isMoveable?" isMoveableTextField":""),id:t.textField.id,style:{position:"absolute",boxShadow:"rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px",borderRadius:4,left:x.x,top:x.y,minHeight:x.height,width:x.width,background:"white",...t.style},children:[t.isMoveable&&b.jsxDEV("div",{onMouseDown:k,style:{position:"absolute",left:0,top:0,width:17,height:"100%",zIndex:1e3,cursor:"move",display:"flex",alignItems:"center",justifyContent:"center"},children:b.jsxDEV("div",{style:{marginLeft:2,width:13,height:24,background:"radial-gradient(#999 35%, transparent 0px) 0% 0% / 6px 6px white"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:295,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:292,columnNumber:34},this),b.jsxDEV(kit,{disabled:v,opaque:n.isSelectionOpaque(),className:n.getMarksClassname(),style:O,onTextSelected:N,children:b.jsxDEV("div",{style:{userSelect:v?"none":void 0},className:"textEditor "+(r?"loading":""),children:b.jsxDEV($L,{"data-gramm":!1,"data-gramm_editor":!1,"data-enable-grammarly":!1,editor:y,initialValue:x.state,onChange:A=>{ot.removeEmptyNodes=!0,p(Qe.getState().textFields.map(T=>T.id===t.textField.id?{...T,state:A}:T)),ot.removeEmptyNodes=!1},children:b.jsxDEV(VL,{"data-gramm":!1,"data-gramm_editor":!1,"data-enable-grammarly":!1,style:{userSelect:v?"none":void 0,padding:t.isMoveable?5:0},readOnly:v,renderLeaf:S,onMouseDown:_},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:307,columnNumber:25},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:302,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:301,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:300,columnNumber:13},this),t.isMoveable&&b.jsxDEV("div",{style:{position:"absolute",right:0,bottom:0,cursor:"nwse-resize"},onMouseDown:A=>{t.isMoveable&&!s&&(c(!0),A.stopPropagation(),A.preventDefault())},children:b.jsxDEV(Bit,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:319,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:311,columnNumber:35},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/EditableTextField.tsx",lineNumber:289,columnNumber:9},this)}function Zit(t){const e=Qe(s=>s.setSelectedTool),n=Qe(s=>s.selectedTool),i=Vs[n]===t.tool,a=32;return b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",marginBottom:8},children:[b.jsxDEV("div",{style:{width:10},children:t.toolVariants.length>1&&b.jsxDEV(xie,{children:[b.jsxDEV(yie,{children:b.jsxDEV(et,{isIconOnly:!0,size:"sm",variant:"light",style:{width:10,minWidth:10,height:a,minHeight:a},children:b.jsxDEV(iit,{style:{width:8}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:22,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:20,columnNumber:5},this),b.jsxDEV(gie,{variant:"flat",children:t.toolVariants.map(s=>b.jsxDEV(B0,{textValue:s.name,onClick:()=>{const o=Qe.getState().toolsOrderInToolbar,l=o.findIndex(f=>f.includes(s.name)),c=[...o];c[l]=[s.name,...c[l].filter(f=>f!==s.name)],Qe.getState().setToolOrderInToolbar(c),Qe.getState().setSelectedTool(s.name)},children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:5},children:[b.jsxDEV("div",{style:{width:15},children:t.tool.name===s.name&&b.jsxDEV(ait,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:37,columnNumber:70},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:37,columnNumber:11},this),b.jsxDEV("div",{style:{width:15},children:s.getIcon()},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:38,columnNumber:13},this),b.jsxDEV("span",{children:s.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:39,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:36,columnNumber:11},this)},s.name,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:27,columnNumber:16},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:25,columnNumber:5},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:19,columnNumber:40},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:18,columnNumber:5},this),b.jsxDEV(so,{showArrow:!0,delay:0,closeDelay:0,content:b.jsxDEV("span",{children:[t.tool.name,b.jsxDEV(Gke,{style:{marginLeft:10},children:t.shortcutButton},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:48,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:46,columnNumber:58},this),placement:"right",offset:0,children:b.jsxDEV(et,{isIconOnly:!0,size:"sm",variant:"light",style:{position:"relative",width:a,height:a,minWidth:a,minHeight:a,fontSize:18,color:i?"black":"#71717B",background:i?"#D7E7FA":void 0},onClick:s=>{typeof t.tool.applyOnCurrentSelection=="function"?t.tool.applyOnCurrentSelection():e(t.tool.name)},children:t.tool.getIcon()},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:50,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:46,columnNumber:5},this),b.jsxDEV("div",{style:{width:10,height:a,display:"flex",flexDirection:"row",alignItems:"end"},children:t.shortcutButton&&b.jsxDEV("span",{style:{fontSize:10,marginLeft:1,color:i?"black":"#71717B"},children:t.shortcutButton},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:67,columnNumber:32},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:66,columnNumber:5},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:17,columnNumber:11},this)}function Qit(){const t=Qe(s=>s.setSelectedTool),e=oa(s=>s.undoStack),n=oa(s=>s.redoStack),r=Qe(s=>s.toolsOrderInToolbar),i=[],a=r.map((s,o)=>{const l=Vs[s[0]];i.push(l.name);const c=[...s].sort().map(f=>Vs[f]);return b.jsxDEV(Zit,{tool:l,shortcutButton:`${o+1}`,toolVariants:c},l.name,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:88,columnNumber:12},this)});return R.useEffect(()=>{const s=o=>{const l=document.activeElement;if(!(l&&(l.tagName==="INPUT"||l.tagName==="TEXTAREA"||l.getAttribute("contenteditable")))&&!o.ctrlKey&&!o.metaKey&&!o.altKey&&!o.shiftKey&&o.key>="1"&&o.key<=i.length.toString()[0]){const c=parseInt(o.key)-1;c<i.length&&t(i[c])}};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[]),b.jsxDEV("div",{id:"leftToolbar",className:"drop-shadow-md",style:{position:"fixed",left:20,top:20,padding:5,display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:15,paddingTop:15,background:"white",borderRadius:14,zIndex:1e3},children:[a,b.jsxDEV(Bn,{style:{marginBottom:5}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:118,columnNumber:11},this),b.jsxDEV(so,{showArrow:!0,delay:0,closeDelay:0,content:"Undo",placement:"right",offset:0,children:b.jsxDEV(et,{isDisabled:e.length===0,style:{color:"#71717a",fontSize:16},isIconOnly:!0,size:"sm",variant:"light",onClick:()=>oa.getState().undo(),children:b.jsxDEV(cZ,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:120,columnNumber:191},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:120,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:119,columnNumber:11},this),b.jsxDEV(so,{showArrow:!0,delay:0,closeDelay:0,content:"Redo",placement:"right",offset:0,children:b.jsxDEV(et,{isDisabled:n.length===0,style:{color:"#71717a",fontSize:16},isIconOnly:!0,size:"sm",variant:"light",onClick:()=>oa.getState().redo(),children:b.jsxDEV(cZ,{style:{transform:"scaleX(-1)"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:123,columnNumber:191},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:123,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:122,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/Toolbar.tsx",lineNumber:116,columnNumber:5},this)}const{min:eat,max:tat}=Math,jy=(t,e=0,n=1)=>eat(tat(e,t),n),AB=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=jy(t[e],0,255)):e===3&&(t[e]=jy(t[e],0,1));return t},Zfe={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])Zfe[`[object ${t}]`]=t.toLowerCase();function Nr(t){return Zfe[Object.prototype.toString.call(t)]||"object"}const fr=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):Nr(t[0])=="object"&&e?e.split("").filter(n=>t[0][n]!==void 0).map(n=>t[0][n]):t[0].slice(0),xx=t=>{if(t.length<2)return null;const e=t.length-1;return Nr(t[e])=="string"?t[e].toLowerCase():null},{PI:sO,min:Qfe,max:ehe}=Math,cc=t=>Math.round(t*100)/100,$5=t=>Math.round(t*100)/100,sm=sO*2,LV=sO/3,nat=sO/180,rat=180/sO;function the(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}const lr={format:{},autodetect:[]};class At{constructor(...e){const n=this;if(Nr(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=xx(e),i=!1;if(!r){i=!0,lr.sorted||(lr.autodetect=lr.autodetect.sort((a,s)=>s.p-a.p),lr.sorted=!0);for(let a of lr.autodetect)if(r=a.test(...e),r)break}if(lr.format[r]){const a=lr.format[r].apply(null,i?e:e.slice(0,-1));n._rgb=AB(a)}else throw new Error("unknown format: "+e);n._rgb.length===3&&n._rgb.push(1)}toString(){return Nr(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const iat="3.1.2",Ar=(...t)=>new At(...t);Ar.version=iat;const qw={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},aat=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,sat=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,nhe=t=>{if(t.match(aat)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),n=e>>16,r=e>>8&255,i=e&255;return[n,r,i,1]}if(t.match(sat)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),n=e>>24&255,r=e>>16&255,i=e>>8&255,a=Math.round((e&255)/255*100)/100;return[n,r,i,a]}throw new Error(`unknown hex color: ${t}`)},{round:XD}=Math,rhe=(...t)=>{let[e,n,r,i]=fr(t,"rgba"),a=xx(t)||"auto";i===void 0&&(i=1),a==="auto"&&(a=i<1?"rgba":"rgb"),e=XD(e),n=XD(n),r=XD(r);let o="000000"+(e<<16|n<<8|r).toString(16);o=o.substr(o.length-6);let l="0"+XD(i*255).toString(16);switch(l=l.substr(l.length-2),a.toLowerCase()){case"rgba":return`#${o}${l}`;case"argb":return`#${l}${o}`;default:return`#${o}`}};At.prototype.name=function(){const t=rhe(this._rgb,"rgb");for(let e of Object.keys(qw))if(qw[e]===t)return e.toLowerCase();return t};lr.format.named=t=>{if(t=t.toLowerCase(),qw[t])return nhe(qw[t]);throw new Error("unknown color name: "+t)};lr.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&Nr(t)==="string"&&qw[t.toLowerCase()])return"named"}});At.prototype.alpha=function(t,e=!1){return t!==void 0&&Nr(t)==="number"?e?(this._rgb[3]=t,this):new At([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]};At.prototype.clipped=function(){return this._rgb._clipped||!1};const Yf={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},oat=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function mm(t){const e=oat.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);Yf.labWhitePoint=t,Yf.Xn=e[0],Yf.Zn=e[1]}function LN(){return Yf.labWhitePoint}const RB=(...t)=>{t=fr(t,"lab");const[e,n,r]=t,[i,a,s]=lat(e,n,r),[o,l,c]=ihe(i,a,s);return[o,l,c,t.length>3?t[3]:1]},lat=(t,e,n)=>{const{kE:r,kK:i,kKE:a,Xn:s,Yn:o,Zn:l}=Yf,c=(t+16)/116,f=.002*e+c,h=c-.005*n,m=f*f*f,p=h*h*h,v=m>r?m:(116*f-16)/i,y=t>a?Math.pow((t+16)/116,3):t/i,x=p>r?p:(116*h-16)/i,S=v*s,_=y*o,N=x*l;return[S,_,N]},FV=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},ihe=(t,e,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:i,MtxXYZ2RGB:a,RefWhiteRGB:s,Xn:o,Yn:l,Zn:c}=Yf,f=o*r.m00+l*r.m10+c*r.m20,h=o*r.m01+l*r.m11+c*r.m21,m=o*r.m02+l*r.m12+c*r.m22,p=s.X*r.m00+s.Y*r.m10+s.Z*r.m20,v=s.X*r.m01+s.Y*r.m11+s.Z*r.m21,y=s.X*r.m02+s.Y*r.m12+s.Z*r.m22,x=(t*r.m00+e*r.m10+n*r.m20)*(p/f),S=(t*r.m01+e*r.m11+n*r.m21)*(v/h),_=(t*r.m02+e*r.m12+n*r.m22)*(y/m),N=x*i.m00+S*i.m10+_*i.m20,k=x*i.m01+S*i.m11+_*i.m21,P=x*i.m02+S*i.m12+_*i.m22,O=FV(N*a.m00+k*a.m10+P*a.m20),A=FV(N*a.m01+k*a.m11+P*a.m21),T=FV(N*a.m02+k*a.m12+P*a.m22);return[O*255,A*255,T*255]},OB=(...t)=>{const[e,n,r,...i]=fr(t,"rgb"),[a,s,o]=ahe(e,n,r),[l,c,f]=uat(a,s,o);return[l,c,f,...i.length>0&&i[0]<1?[i[0]]:[]]};function uat(t,e,n){const{Xn:r,Yn:i,Zn:a,kE:s,kK:o}=Yf,l=t/r,c=e/i,f=n/a,h=l>s?Math.pow(l,1/3):(o*l+16)/116,m=c>s?Math.pow(c,1/3):(o*c+16)/116,p=f>s?Math.pow(f,1/3):(o*f+16)/116;return[116*m-16,500*(h-m),200*(m-p)]}function BV(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const ahe=(t,e,n)=>{t=BV(t/255),e=BV(e/255),n=BV(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:i,MtxAdaptMaI:a,Xn:s,Yn:o,Zn:l,As:c,Bs:f,Cs:h}=Yf;let m=t*r.m00+e*r.m10+n*r.m20,p=t*r.m01+e*r.m11+n*r.m21,v=t*r.m02+e*r.m12+n*r.m22;const y=s*i.m00+o*i.m10+l*i.m20,x=s*i.m01+o*i.m11+l*i.m21,S=s*i.m02+o*i.m12+l*i.m22;let _=m*i.m00+p*i.m10+v*i.m20,N=m*i.m01+p*i.m11+v*i.m21,k=m*i.m02+p*i.m12+v*i.m22;return _*=y/c,N*=x/f,k*=S/h,m=_*a.m00+N*a.m10+k*a.m20,p=_*a.m01+N*a.m11+k*a.m21,v=_*a.m02+N*a.m12+k*a.m22,[m,p,v]};At.prototype.lab=function(){return OB(this._rgb)};const cat=(...t)=>new At(...t,"lab");Object.assign(Ar,{lab:cat,getLabWhitePoint:LN,setLabWhitePoint:mm});lr.format.lab=RB;lr.autodetect.push({p:2,test:(...t)=>{if(t=fr(t,"lab"),Nr(t)==="array"&&t.length===3)return"lab"}});At.prototype.darken=function(t=1){const e=this,n=e.lab();return n[0]-=Yf.Kn*t,new At(n,"lab").alpha(e.alpha(),!0)};At.prototype.brighten=function(t=1){return this.darken(-t)};At.prototype.darker=At.prototype.darken;At.prototype.brighter=At.prototype.brighten;At.prototype.get=function(t){const[e,n]=t.split("."),r=this[e]();if(n){const i=e.indexOf(n)-(e.substr(0,2)==="ok"?2:0);if(i>-1)return r[i];throw new Error(`unknown channel ${n} in mode ${e}`)}else return r};const{pow:dat}=Math,fat=1e-7,hat=20;At.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&Nr(t)==="number"){if(t===0)return new At([0,0,0,this._rgb[3]],"rgb");if(t===1)return new At([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=hat;const i=(s,o)=>{const l=s.interpolate(o,.5,e),c=l.luminance();return Math.abs(t-c)<fat||!r--?l:c>t?i(s,l):i(l,o)},a=(n>t?i(new At([0,0,0]),this):i(this,new At([255,255,255]))).rgb();return new At([...a,this._rgb[3]])}return mat(...this._rgb.slice(0,3))};const mat=(t,e,n)=>(t=UV(t),e=UV(e),n=UV(n),.2126*t+.7152*e+.0722*n),UV=t=>(t/=255,t<=.03928?t/12.92:dat((t+.055)/1.055,2.4)),fo={},Xw=(t,e,n=.5,...r)=>{let i=r[0]||"lrgb";if(!fo[i]&&!r.length&&(i=Object.keys(fo)[0]),!fo[i])throw new Error(`interpolation mode ${i} is not defined`);return Nr(t)!=="object"&&(t=new At(t)),Nr(e)!=="object"&&(e=new At(e)),fo[i](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};At.prototype.mix=At.prototype.interpolate=function(t,e=.5,...n){return Xw(this,t,e,...n)};At.prototype.premultiply=function(t=!1){const e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new At([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};const{sin:pat,cos:gat}=Math,she=(...t)=>{let[e,n,r]=fr(t,"lch");return isNaN(r)&&(r=0),r=r*nat,[e,gat(r)*n,pat(r)*n]},jB=(...t)=>{t=fr(t,"lch");const[e,n,r]=t,[i,a,s]=she(e,n,r),[o,l,c]=RB(i,a,s);return[o,l,c,t.length>3?t[3]:1]},vat=(...t)=>{const e=the(fr(t,"hcl"));return jB(...e)},{sqrt:yat,atan2:bat,round:wat}=Math,ohe=(...t)=>{const[e,n,r]=fr(t,"lab"),i=yat(n*n+r*r);let a=(bat(r,n)*rat+360)%360;return wat(i*1e4)===0&&(a=Number.NaN),[e,i,a]},IB=(...t)=>{const[e,n,r,...i]=fr(t,"rgb"),[a,s,o]=OB(e,n,r),[l,c,f]=ohe(a,s,o);return[l,c,f,...i.length>0&&i[0]<1?[i[0]]:[]]};At.prototype.lch=function(){return IB(this._rgb)};At.prototype.hcl=function(){return the(IB(this._rgb))};const xat=(...t)=>new At(...t,"lch"),Sat=(...t)=>new At(...t,"hcl");Object.assign(Ar,{lch:xat,hcl:Sat});lr.format.lch=jB;lr.format.hcl=vat;["lch","hcl"].forEach(t=>lr.autodetect.push({p:2,test:(...e)=>{if(e=fr(e,t),Nr(e)==="array"&&e.length===3)return t}}));At.prototype.saturate=function(t=1){const e=this,n=e.lch();return n[1]+=Yf.Kn*t,n[1]<0&&(n[1]=0),new At(n,"lch").alpha(e.alpha(),!0)};At.prototype.desaturate=function(t=1){return this.saturate(-t)};At.prototype.set=function(t,e,n=!1){const[r,i]=t.split("."),a=this[r]();if(i){const s=r.indexOf(i)-(r.substr(0,2)==="ok"?2:0);if(s>-1){if(Nr(e)=="string")switch(e.charAt(0)){case"+":a[s]+=+e;break;case"-":a[s]+=+e;break;case"*":a[s]*=+e.substr(1);break;case"/":a[s]/=+e.substr(1);break;default:a[s]=+e}else if(Nr(e)==="number")a[s]=e;else throw new Error("unsupported value for Color.set");const o=new At(a,r);return n?(this._rgb=o._rgb,this):o}throw new Error(`unknown channel ${i} in mode ${r}`)}else return a};At.prototype.tint=function(t=.5,...e){return Xw(this,"white",t,...e)};At.prototype.shade=function(t=.5,...e){return Xw(this,"black",t,...e)};const Eat=(t,e,n)=>{const r=t._rgb,i=e._rgb;return new At(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};fo.rgb=Eat;const{sqrt:WV,pow:I0}=Math,Nat=(t,e,n)=>{const[r,i,a]=t._rgb,[s,o,l]=e._rgb;return new At(WV(I0(r,2)*(1-n)+I0(s,2)*n),WV(I0(i,2)*(1-n)+I0(o,2)*n),WV(I0(a,2)*(1-n)+I0(l,2)*n),"rgb")};fo.lrgb=Nat;const _at=(t,e,n)=>{const r=t.lab(),i=e.lab();return new At(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};fo.lab=_at;const Sx=(t,e,n,r)=>{let i,a;r==="hsl"?(i=t.hsl(),a=e.hsl()):r==="hsv"?(i=t.hsv(),a=e.hsv()):r==="hcg"?(i=t.hcg(),a=e.hcg()):r==="hsi"?(i=t.hsi(),a=e.hsi()):r==="lch"||r==="hcl"?(r="hcl",i=t.hcl(),a=e.hcl()):r==="oklch"&&(i=t.oklch().reverse(),a=e.oklch().reverse());let s,o,l,c,f,h;(r.substr(0,1)==="h"||r==="oklch")&&([s,l,f]=i,[o,c,h]=a);let m,p,v,y;return!isNaN(s)&&!isNaN(o)?(o>s&&o-s>180?y=o-(s+360):o<s&&s-o>180?y=o+360-s:y=o-s,p=s+n*y):isNaN(s)?isNaN(o)?p=Number.NaN:(p=o,(f==1||f==0)&&r!="hsv"&&(m=c)):(p=s,(h==1||h==0)&&r!="hsv"&&(m=l)),m===void 0&&(m=l+n*(c-l)),v=f+n*(h-f),r==="oklch"?new At([v,m,p],r):new At([p,m,v],r)},lhe=(t,e,n)=>Sx(t,e,n,"lch");fo.lch=lhe;fo.hcl=lhe;const Cat=t=>{if(Nr(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,n=t>>8&255,r=t&255;return[e,n,r,1]}throw new Error("unknown num color: "+t)},Tat=(...t)=>{const[e,n,r]=fr(t,"rgb");return(e<<16)+(n<<8)+r};At.prototype.num=function(){return Tat(this._rgb)};const Dat=(...t)=>new At(...t,"num");Object.assign(Ar,{num:Dat});lr.format.num=Cat;lr.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&Nr(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const kat=(t,e,n)=>{const r=t.num(),i=e.num();return new At(r+n*(i-r),"num")};fo.num=kat;const{floor:Pat}=Math,Aat=(...t)=>{t=fr(t,"hcg");let[e,n,r]=t,i,a,s;r=r*255;const o=n*255;if(n===0)i=a=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=Pat(e),c=e-l,f=r*(1-n),h=f+o*(1-c),m=f+o*c,p=f+o;switch(l){case 0:[i,a,s]=[p,m,f];break;case 1:[i,a,s]=[h,p,f];break;case 2:[i,a,s]=[f,p,m];break;case 3:[i,a,s]=[f,h,p];break;case 4:[i,a,s]=[m,f,p];break;case 5:[i,a,s]=[p,f,h];break}}return[i,a,s,t.length>3?t[3]:1]},Rat=(...t)=>{const[e,n,r]=fr(t,"rgb"),i=Qfe(e,n,r),a=ehe(e,n,r),s=a-i,o=s*100/255,l=i/(255-s)*100;let c;return s===0?c=Number.NaN:(e===a&&(c=(n-r)/s),n===a&&(c=2+(r-e)/s),r===a&&(c=4+(e-n)/s),c*=60,c<0&&(c+=360)),[c,o,l]};At.prototype.hcg=function(){return Rat(this._rgb)};const Oat=(...t)=>new At(...t,"hcg");Ar.hcg=Oat;lr.format.hcg=Aat;lr.autodetect.push({p:1,test:(...t)=>{if(t=fr(t,"hcg"),Nr(t)==="array"&&t.length===3)return"hcg"}});const jat=(t,e,n)=>Sx(t,e,n,"hcg");fo.hcg=jat;const{cos:M0}=Math,Iat=(...t)=>{t=fr(t,"hsi");let[e,n,r]=t,i,a,s;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(s=(1-n)/3,i=(1+n*M0(sm*e)/M0(LV-sm*e))/3,a=1-(s+i)):e<2/3?(e-=1/3,i=(1-n)/3,a=(1+n*M0(sm*e)/M0(LV-sm*e))/3,s=1-(i+a)):(e-=2/3,a=(1-n)/3,s=(1+n*M0(sm*e)/M0(LV-sm*e))/3,i=1-(a+s)),i=jy(r*i*3),a=jy(r*a*3),s=jy(r*s*3),[i*255,a*255,s*255,t.length>3?t[3]:1]},{min:Mat,sqrt:Vat,acos:$at}=Math,Lat=(...t)=>{let[e,n,r]=fr(t,"rgb");e/=255,n/=255,r/=255;let i;const a=Mat(e,n,r),s=(e+n+r)/3,o=s>0?1-a/s:0;return o===0?i=NaN:(i=(e-n+(e-r))/2,i/=Vat((e-n)*(e-n)+(e-r)*(n-r)),i=$at(i),r>n&&(i=sm-i),i/=sm),[i*360,o,s]};At.prototype.hsi=function(){return Lat(this._rgb)};const Fat=(...t)=>new At(...t,"hsi");Ar.hsi=Fat;lr.format.hsi=Iat;lr.autodetect.push({p:2,test:(...t)=>{if(t=fr(t,"hsi"),Nr(t)==="array"&&t.length===3)return"hsi"}});const Bat=(t,e,n)=>Sx(t,e,n,"hsi");fo.hsi=Bat;const L5=(...t)=>{t=fr(t,"hsl");const[e,n,r]=t;let i,a,s;if(n===0)i=a=s=r*255;else{const o=[0,0,0],l=[0,0,0],c=r<.5?r*(1+n):r+n-r*n,f=2*r-c,h=e/360;o[0]=h+1/3,o[1]=h,o[2]=h-1/3;for(let m=0;m<3;m++)o[m]<0&&(o[m]+=1),o[m]>1&&(o[m]-=1),6*o[m]<1?l[m]=f+(c-f)*6*o[m]:2*o[m]<1?l[m]=c:3*o[m]<2?l[m]=f+(c-f)*(2/3-o[m])*6:l[m]=f;[i,a,s]=[l[0]*255,l[1]*255,l[2]*255]}return t.length>3?[i,a,s,t[3]]:[i,a,s,1]},uhe=(...t)=>{t=fr(t,"rgba");let[e,n,r]=t;e/=255,n/=255,r/=255;const i=Qfe(e,n,r),a=ehe(e,n,r),s=(a+i)/2;let o,l;return a===i?(o=0,l=Number.NaN):o=s<.5?(a-i)/(a+i):(a-i)/(2-a-i),e==a?l=(n-r)/(a-i):n==a?l=2+(r-e)/(a-i):r==a&&(l=4+(e-n)/(a-i)),l*=60,l<0&&(l+=360),t.length>3&&t[3]!==void 0?[l,o,s,t[3]]:[l,o,s]};At.prototype.hsl=function(){return uhe(this._rgb)};const Uat=(...t)=>new At(...t,"hsl");Ar.hsl=Uat;lr.format.hsl=L5;lr.autodetect.push({p:2,test:(...t)=>{if(t=fr(t,"hsl"),Nr(t)==="array"&&t.length===3)return"hsl"}});const Wat=(t,e,n)=>Sx(t,e,n,"hsl");fo.hsl=Wat;const{floor:zat}=Math,Hat=(...t)=>{t=fr(t,"hsv");let[e,n,r]=t,i,a,s;if(r*=255,n===0)i=a=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const o=zat(e),l=e-o,c=r*(1-n),f=r*(1-n*l),h=r*(1-n*(1-l));switch(o){case 0:[i,a,s]=[r,h,c];break;case 1:[i,a,s]=[f,r,c];break;case 2:[i,a,s]=[c,r,h];break;case 3:[i,a,s]=[c,f,r];break;case 4:[i,a,s]=[h,c,r];break;case 5:[i,a,s]=[r,c,f];break}}return[i,a,s,t.length>3?t[3]:1]},{min:Gat,max:Kat}=Math,Yat=(...t)=>{t=fr(t,"rgb");let[e,n,r]=t;const i=Gat(e,n,r),a=Kat(e,n,r),s=a-i;let o,l,c;return c=a/255,a===0?(o=Number.NaN,l=0):(l=s/a,e===a&&(o=(n-r)/s),n===a&&(o=2+(r-e)/s),r===a&&(o=4+(e-n)/s),o*=60,o<0&&(o+=360)),[o,l,c]};At.prototype.hsv=function(){return Yat(this._rgb)};const Jat=(...t)=>new At(...t,"hsv");Ar.hsv=Jat;lr.format.hsv=Hat;lr.autodetect.push({p:2,test:(...t)=>{if(t=fr(t,"hsv"),Nr(t)==="array"&&t.length===3)return"hsv"}});const qat=(t,e,n)=>Sx(t,e,n,"hsv");fo.hsv=qat;function SA(t,e){let n=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(s=>[s]));let r=e[0].length,i=e[0].map((s,o)=>e.map(l=>l[o])),a=t.map(s=>i.map(o=>Array.isArray(s)?s.reduce((l,c,f)=>l+c*(o[f]||0),0):o.reduce((l,c)=>l+c*s,0)));return n===1&&(a=a[0]),r===1?a.map(s=>s[0]):a}const MB=(...t)=>{t=fr(t,"lab");const[e,n,r,...i]=t,[a,s,o]=Xat([e,n,r]),[l,c,f]=ihe(a,s,o);return[l,c,f,...i.length>0&&i[0]<1?[i[0]]:[]]};function Xat(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=SA(n,t);return SA(e,r.map(i=>i**3))}const VB=(...t)=>{const[e,n,r,...i]=fr(t,"rgb"),a=ahe(e,n,r);return[...Zat(a),...i.length>0&&i[0]<1?[i[0]]:[]]};function Zat(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=SA(e,t);return SA(n,r.map(i=>Math.cbrt(i)))}At.prototype.oklab=function(){return VB(this._rgb)};const Qat=(...t)=>new At(...t,"oklab");Object.assign(Ar,{oklab:Qat});lr.format.oklab=MB;lr.autodetect.push({p:2,test:(...t)=>{if(t=fr(t,"oklab"),Nr(t)==="array"&&t.length===3)return"oklab"}});const est=(t,e,n)=>{const r=t.oklab(),i=e.oklab();return new At(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};fo.oklab=est;const tst=(t,e,n)=>Sx(t,e,n,"oklch");fo.oklch=tst;const{pow:zV,sqrt:HV,PI:GV,cos:DZ,sin:kZ,atan2:nst}=Math,rst=(t,e="lrgb",n=null)=>{const r=t.length;n||(n=Array.from(new Array(r)).map(()=>1));const i=r/n.reduce(function(h,m){return h+m});if(n.forEach((h,m)=>{n[m]*=i}),t=t.map(h=>new At(h)),e==="lrgb")return ist(t,n);const a=t.shift(),s=a.get(e),o=[];let l=0,c=0;for(let h=0;h<s.length;h++)if(s[h]=(s[h]||0)*n[0],o.push(isNaN(s[h])?0:n[0]),e.charAt(h)==="h"&&!isNaN(s[h])){const m=s[h]/180*GV;l+=DZ(m)*n[0],c+=kZ(m)*n[0]}let f=a.alpha()*n[0];t.forEach((h,m)=>{const p=h.get(e);f+=h.alpha()*n[m+1];for(let v=0;v<s.length;v++)if(!isNaN(p[v]))if(o[v]+=n[m+1],e.charAt(v)==="h"){const y=p[v]/180*GV;l+=DZ(y)*n[m+1],c+=kZ(y)*n[m+1]}else s[v]+=p[v]*n[m+1]});for(let h=0;h<s.length;h++)if(e.charAt(h)==="h"){let m=nst(c/o[h],l/o[h])/GV*180;for(;m<0;)m+=360;for(;m>=360;)m-=360;s[h]=m}else s[h]=s[h]/o[h];return f/=r,new At(s,e).alpha(f>.99999?1:f,!0)},ist=(t,e)=>{const n=t.length,r=[0,0,0,0];for(let i=0;i<t.length;i++){const a=t[i],s=e[i]/n,o=a._rgb;r[0]+=zV(o[0],2)*s,r[1]+=zV(o[1],2)*s,r[2]+=zV(o[2],2)*s,r[3]+=o[3]*s}return r[0]=HV(r[0]),r[1]=HV(r[1]),r[2]=HV(r[2]),r[3]>.9999999&&(r[3]=1),new At(AB(r))},{pow:ast}=Math;function EA(t){let e="rgb",n=Ar("#ccc"),r=0,i=[0,1],a=[],s=[0,0],o=!1,l=[],c=!1,f=0,h=1,m=!1,p={},v=!0,y=1;const x=function(A){if(A=A||["#fff","#000"],A&&Nr(A)==="string"&&Ar.brewer&&Ar.brewer[A.toLowerCase()]&&(A=Ar.brewer[A.toLowerCase()]),Nr(A)==="array"){A.length===1&&(A=[A[0],A[0]]),A=A.slice(0);for(let T=0;T<A.length;T++)A[T]=Ar(A[T]);a.length=0;for(let T=0;T<A.length;T++)a.push(T/(A.length-1))}return P(),l=A},S=function(A){if(o!=null){const T=o.length-1;let L=0;for(;L<T&&A>=o[L];)L++;return L-1}return 0};let _=A=>A,N=A=>A;const k=function(A,T){let L,B;if(T==null&&(T=!1),isNaN(A)||A===null)return n;T?B=A:o&&o.length>2?B=S(A)/(o.length-2):h!==f?B=(A-f)/(h-f):B=1,B=N(B),T||(B=_(B)),y!==1&&(B=ast(B,y)),B=s[0]+B*(1-s[0]-s[1]),B=jy(B,0,1);const W=Math.floor(B*1e4);if(v&&p[W])L=p[W];else{if(Nr(l)==="array")for(let Y=0;Y<a.length;Y++){const V=a[Y];if(B<=V){L=l[Y];break}if(B>=V&&Y===a.length-1){L=l[Y];break}if(B>V&&B<a[Y+1]){B=(B-V)/(a[Y+1]-V),L=Ar.interpolate(l[Y],l[Y+1],B,e);break}}else Nr(l)==="function"&&(L=l(B));v&&(p[W]=L)}return L};var P=()=>p={};x(t);const O=function(A){const T=Ar(k(A));return c&&T[c]?T[c]():T};return O.classes=function(A){if(A!=null){if(Nr(A)==="array")o=A,i=[A[0],A[A.length-1]];else{const T=Ar.analyze(i);A===0?o=[T.min,T.max]:o=Ar.limits(T,"e",A)}return O}return o},O.domain=function(A){if(!arguments.length)return i;f=A[0],h=A[A.length-1],a=[];const T=l.length;if(A.length===T&&f!==h)for(let L of Array.from(A))a.push((L-f)/(h-f));else{for(let L=0;L<T;L++)a.push(L/(T-1));if(A.length>2){const L=A.map((W,Y)=>Y/(A.length-1)),B=A.map(W=>(W-f)/(h-f));B.every((W,Y)=>L[Y]===W)||(N=W=>{if(W<=0||W>=1)return W;let Y=0;for(;W>=B[Y+1];)Y++;const V=(W-B[Y])/(B[Y+1]-B[Y]);return L[Y]+V*(L[Y+1]-L[Y])})}}return i=[f,h],O},O.mode=function(A){return arguments.length?(e=A,P(),O):e},O.range=function(A,T){return x(A),O},O.out=function(A){return c=A,O},O.spread=function(A){return arguments.length?(r=A,O):r},O.correctLightness=function(A){return A==null&&(A=!0),m=A,P(),m?_=function(T){const L=k(0,!0).lab()[0],B=k(1,!0).lab()[0],W=L>B;let Y=k(T,!0).lab()[0];const V=L+(B-L)*T;let I=Y-V,H=0,q=1,F=20;for(;Math.abs(I)>.01&&F-- >0;)(function(){return W&&(I*=-1),I<0?(H=T,T+=(q-T)*.5):(q=T,T+=(H-T)*.5),Y=k(T,!0).lab()[0],I=Y-V})();return T}:_=T=>T,O},O.padding=function(A){return A!=null?(Nr(A)==="number"&&(A=[A,A]),s=A,O):s},O.colors=function(A,T){arguments.length<2&&(T="hex");let L=[];if(arguments.length===0)L=l.slice(0);else if(A===1)L=[O(.5)];else if(A>1){const B=i[0],W=i[1]-B;L=sst(0,A).map(Y=>O(B+Y/(A-1)*W))}else{t=[];let B=[];if(o&&o.length>2)for(let W=1,Y=o.length,V=1<=Y;V?W<Y:W>Y;V?W++:W--)B.push((o[W-1]+o[W])*.5);else B=i;L=B.map(W=>O(W))}return Ar[T]&&(L=L.map(B=>B[T]())),L},O.cache=function(A){return A!=null?(v=A,O):v},O.gamma=function(A){return A!=null?(y=A,O):y},O.nodata=function(A){return A!=null?(n=Ar(A),O):n},O}function sst(t,e,n){let r=[],i=t<e,a=e;for(let s=t;i?s<a:s>a;i?s++:s--)r.push(s);return r}const ost=function(t){let e=[1,1];for(let n=1;n<t;n++){let r=[1];for(let i=1;i<=e.length;i++)r[i]=(e[i]||0)+e[i-1];e=r}return e},lst=function(t){let e,n,r,i;if(t=t.map(a=>new At(a)),t.length===2)[n,r]=t.map(a=>a.lab()),e=function(a){const s=[0,1,2].map(o=>n[o]+a*(r[o]-n[o]));return new At(s,"lab")};else if(t.length===3)[n,r,i]=t.map(a=>a.lab()),e=function(a){const s=[0,1,2].map(o=>(1-a)*(1-a)*n[o]+2*(1-a)*a*r[o]+a*a*i[o]);return new At(s,"lab")};else if(t.length===4){let a;[n,r,i,a]=t.map(s=>s.lab()),e=function(s){const o=[0,1,2].map(l=>(1-s)*(1-s)*(1-s)*n[l]+3*(1-s)*(1-s)*s*r[l]+3*(1-s)*s*s*i[l]+s*s*s*a[l]);return new At(o,"lab")}}else if(t.length>=5){let a,s,o;a=t.map(l=>l.lab()),o=t.length-1,s=ost(o),e=function(l){const c=1-l,f=[0,1,2].map(h=>a.reduce((m,p,v)=>m+s[v]*c**(o-v)*l**v*p[h],0));return new At(f,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},ust=t=>{const e=lst(t);return e.scale=()=>EA(e),e},{round:che}=Math;At.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(che)};At.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,n)=>n<3?t===!1?e:che(e):e)};const cst=(...t)=>new At(...t,"rgb");Object.assign(Ar,{rgb:cst});lr.format.rgb=(...t)=>{const e=fr(t,"rgba");return e[3]===void 0&&(e[3]=1),e};lr.autodetect.push({p:3,test:(...t)=>{if(t=fr(t,"rgba"),Nr(t)==="array"&&(t.length===3||t.length===4&&Nr(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const Rd=(t,e,n)=>{if(!Rd[n])throw new Error("unknown blend mode "+n);return Rd[n](t,e)},zg=t=>(e,n)=>{const r=Ar(n).rgb(),i=Ar(e).rgb();return Ar.rgb(t(r,i))},Hg=t=>(e,n)=>{const r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r},dst=t=>t,fst=(t,e)=>t*e/255,hst=(t,e)=>t>e?e:t,mst=(t,e)=>t>e?t:e,pst=(t,e)=>255*(1-(1-t/255)*(1-e/255)),gst=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),vst=(t,e)=>255*(1-(1-e/255)/(t/255)),yst=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);Rd.normal=zg(Hg(dst));Rd.multiply=zg(Hg(fst));Rd.screen=zg(Hg(pst));Rd.overlay=zg(Hg(gst));Rd.darken=zg(Hg(hst));Rd.lighten=zg(Hg(mst));Rd.dodge=zg(Hg(yst));Rd.burn=zg(Hg(vst));const{pow:bst,sin:wst,cos:xst}=Math;function Sst(t=300,e=-1.5,n=1,r=1,i=[0,1]){let a=0,s;Nr(i)==="array"?s=i[1]-i[0]:(s=0,i=[i,i]);const o=function(l){const c=sm*((t+120)/360+e*l),f=bst(i[0]+s*l,r),m=(a!==0?n[0]+l*a:n)*f*(1-f)/2,p=xst(c),v=wst(c),y=f+m*(-.14861*p+1.78277*v),x=f+m*(-.29227*p-.90649*v),S=f+m*(1.97294*p);return Ar(AB([y*255,x*255,S*255,1]))};return o.start=function(l){return l==null?t:(t=l,o)},o.rotations=function(l){return l==null?e:(e=l,o)},o.gamma=function(l){return l==null?r:(r=l,o)},o.hue=function(l){return l==null?n:(n=l,Nr(n)==="array"?(a=n[1]-n[0],a===0&&(n=n[1])):a=0,o)},o.lightness=function(l){return l==null?i:(Nr(l)==="array"?(i=l,s=l[1]-l[0]):(i=[l,l],s=0),o)},o.scale=()=>Ar.scale(o),o.hue(n),o}const Est="0123456789abcdef",{floor:Nst,random:_st}=Math,Cst=()=>{let t="#";for(let e=0;e<6;e++)t+=Est.charAt(Nst(_st()*16));return new At(t,"hex")},{log:PZ,pow:Tst,floor:Dst,abs:kst}=Math;function dhe(t,e=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Nr(t)==="object"&&(t=Object.values(t)),t.forEach(r=>{e&&Nr(r)==="object"&&(r=r[e]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,i)=>fhe(n,r,i),n}function fhe(t,e="equal",n=7){Nr(t)=="array"&&(t=dhe(t));const{min:r,max:i}=t,a=t.values.sort((o,l)=>o-l);if(n===1)return[r,i];const s=[];if(e.substr(0,1)==="c"&&(s.push(r),s.push(i)),e.substr(0,1)==="e"){s.push(r);for(let o=1;o<n;o++)s.push(r+o/n*(i-r));s.push(i)}else if(e.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const o=Math.LOG10E*PZ(r),l=Math.LOG10E*PZ(i);s.push(r);for(let c=1;c<n;c++)s.push(Tst(10,o+c/n*(l-o)));s.push(i)}else if(e.substr(0,1)==="q"){s.push(r);for(let o=1;o<n;o++){const l=(a.length-1)*o/n,c=Dst(l);if(c===l)s.push(a[c]);else{const f=l-c;s.push(a[c]*(1-f)+a[c+1]*f)}}s.push(i)}else if(e.substr(0,1)==="k"){let o;const l=a.length,c=new Array(l),f=new Array(n);let h=!0,m=0,p=null;p=[],p.push(r);for(let x=1;x<n;x++)p.push(r+x/n*(i-r));for(p.push(i);h;){for(let S=0;S<n;S++)f[S]=0;for(let S=0;S<l;S++){const _=a[S];let N=Number.MAX_VALUE,k;for(let P=0;P<n;P++){const O=kst(p[P]-_);O<N&&(N=O,k=P),f[k]++,c[S]=k}}const x=new Array(n);for(let S=0;S<n;S++)x[S]=null;for(let S=0;S<l;S++)o=c[S],x[o]===null?x[o]=a[S]:x[o]+=a[S];for(let S=0;S<n;S++)x[S]*=1/f[S];h=!1;for(let S=0;S<n;S++)if(x[S]!==p[S]){h=!0;break}p=x,m++,m>200&&(h=!1)}const v={};for(let x=0;x<n;x++)v[x]=[];for(let x=0;x<l;x++)o=c[x],v[o].push(a[x]);let y=[];for(let x=0;x<n;x++)y.push(v[x][0]),y.push(v[x][v[x].length-1]);y=y.sort((x,S)=>x-S),s.push(y[0]);for(let x=1;x<y.length;x+=2){const S=y[x];!isNaN(S)&&s.indexOf(S)===-1&&s.push(S)}}return s}const Pst=(t,e)=>{t=new At(t),e=new At(e);const n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const AZ=.027,Ast=5e-4,Rst=.1,RZ=1.14,ZD=.022,OZ=1.414,Ost=(t,e)=>{t=new At(t),e=new At(e),t.alpha()<1&&(t=Xw(e,t,t.alpha(),"rgb"));const n=jZ(...t.rgb()),r=jZ(...e.rgb()),i=n>=ZD?n:n+Math.pow(ZD-n,OZ),a=r>=ZD?r:r+Math.pow(ZD-r,OZ),s=Math.pow(a,.56)-Math.pow(i,.57),o=Math.pow(a,.65)-Math.pow(i,.62),l=Math.abs(a-i)<Ast?0:i<a?s*RZ:o*RZ;return(Math.abs(l)<Rst?0:l>0?l-AZ:l+AZ)*100};function jZ(t,e,n){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:rm,pow:_a,min:jst,max:Ist,atan2:IZ,abs:MZ,cos:QD,sin:VZ,exp:Mst,PI:$Z}=Math;function Vst(t,e,n=1,r=1,i=1){var a=function(te){return 360*te/(2*$Z)},s=function(te){return 2*$Z*te/360};t=new At(t),e=new At(e);const[o,l,c]=Array.from(t.lab()),[f,h,m]=Array.from(e.lab()),p=(o+f)/2,v=rm(_a(l,2)+_a(c,2)),y=rm(_a(h,2)+_a(m,2)),x=(v+y)/2,S=.5*(1-rm(_a(x,7)/(_a(x,7)+_a(25,7)))),_=l*(1+S),N=h*(1+S),k=rm(_a(_,2)+_a(c,2)),P=rm(_a(N,2)+_a(m,2)),O=(k+P)/2,A=a(IZ(c,_)),T=a(IZ(m,N)),L=A>=0?A:A+360,B=T>=0?T:T+360,W=MZ(L-B)>180?(L+B+360)/2:(L+B)/2,Y=1-.17*QD(s(W-30))+.24*QD(s(2*W))+.32*QD(s(3*W+6))-.2*QD(s(4*W-63));let V=B-L;V=MZ(V)<=180?V:B<=L?V+360:V-360,V=2*rm(k*P)*VZ(s(V)/2);const I=f-o,H=P-k,q=1+.015*_a(p-50,2)/rm(20+_a(p-50,2)),F=1+.045*O,J=1+.015*O*Y,Z=30*Mst(-_a((W-275)/25,2)),oe=-(2*rm(_a(O,7)/(_a(O,7)+_a(25,7))))*VZ(2*s(Z)),ae=rm(_a(I/(n*q),2)+_a(H/(r*F),2)+_a(V/(i*J),2)+oe*(H/(r*F))*(V/(i*J)));return Ist(0,jst(100,ae))}function $st(t,e,n="lab"){t=new At(t),e=new At(e);const r=t.get(n),i=e.get(n);let a=0;for(let s in r){const o=(r[s]||0)-(i[s]||0);a+=o*o}return Math.sqrt(a)}const Lst=(...t)=>{try{return new At(...t),!0}catch{return!1}},Fst={cool(){return EA([Ar.hsl(180,1,.9),Ar.hsl(250,.7,.4)])},hot(){return EA(["#000","#f00","#ff0","#fff"]).mode("rgb")}},F5={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},hhe=Object.keys(F5),LZ=new Map(hhe.map(t=>[t.toLowerCase(),t])),Bst=typeof Proxy=="function"?new Proxy(F5,{get(t,e){const n=e.toLowerCase();if(LZ.has(n))return t[LZ.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(hhe)}}):F5,Ust=(...t)=>{t=fr(t,"cmyk");const[e,n,r,i]=t,a=t.length>4?t[4]:1;return i===1?[0,0,0,a]:[e>=1?0:255*(1-e)*(1-i),n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),a]},{max:FZ}=Math,Wst=(...t)=>{let[e,n,r]=fr(t,"rgb");e=e/255,n=n/255,r=r/255;const i=1-FZ(e,FZ(n,r)),a=i<1?1/(1-i):0,s=(1-e-i)*a,o=(1-n-i)*a,l=(1-r-i)*a;return[s,o,l,i]};At.prototype.cmyk=function(){return Wst(this._rgb)};const zst=(...t)=>new At(...t,"cmyk");Object.assign(Ar,{cmyk:zst});lr.format.cmyk=Ust;lr.autodetect.push({p:2,test:(...t)=>{if(t=fr(t,"cmyk"),Nr(t)==="array"&&t.length===4)return"cmyk"}});const Hst=(...t)=>{const e=fr(t,"hsla");let n=xx(t)||"lsa";return e[0]=cc(e[0]||0)+"deg",e[1]=cc(e[1]*100)+"%",e[2]=cc(e[2]*100)+"%",n==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),n="hsla"):e.length=3,`${n.substr(0,3)}(${e.join(" ")})`},Gst=(...t)=>{const e=fr(t,"lab");let n=xx(t)||"lab";return e[0]=cc(e[0])+"%",e[1]=cc(e[1]),e[2]=cc(e[2]),n==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},Kst=(...t)=>{const e=fr(t,"lch");let n=xx(t)||"lab";return e[0]=cc(e[0])+"%",e[1]=cc(e[1]),e[2]=isNaN(e[2])?"none":cc(e[2])+"deg",n==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},Yst=(...t)=>{const e=fr(t,"lab");return e[0]=cc(e[0]*100)+"%",e[1]=$5(e[1]),e[2]=$5(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},mhe=(...t)=>{const[e,n,r,...i]=fr(t,"rgb"),[a,s,o]=VB(e,n,r),[l,c,f]=ohe(a,s,o);return[l,c,f,...i.length>0&&i[0]<1?[i[0]]:[]]},Jst=(...t)=>{const e=fr(t,"lch");return e[0]=cc(e[0]*100)+"%",e[1]=$5(e[1]),e[2]=isNaN(e[2])?"none":cc(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:KV}=Math,qst=(...t)=>{const e=fr(t,"rgba");let n=xx(t)||"rgb";if(n.substr(0,3)==="hsl")return Hst(uhe(e),n);if(n.substr(0,3)==="lab"){const r=LN();mm("d50");const i=Gst(OB(e),n);return mm(r),i}if(n.substr(0,3)==="lch"){const r=LN();mm("d50");const i=Kst(IB(e),n);return mm(r),i}return n.substr(0,5)==="oklab"?Yst(VB(e)):n.substr(0,5)==="oklch"?Jst(mhe(e)):(e[0]=KV(e[0]),e[1]=KV(e[1]),e[2]=KV(e[2]),(n==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),n="rgba"),`${n.substr(0,3)}(${e.slice(0,n==="rgb"?3:4).join(" ")})`)},phe=(...t)=>{t=fr(t,"lch");const[e,n,r,...i]=t,[a,s,o]=she(e,n,r),[l,c,f]=MB(a,s,o);return[l,c,f,...i.length>0&&i[0]<1?[i[0]]:[]]},xm=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,Cd=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,NA=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,pc=/\s*/.source,Ex=/\s+/.source,$B=/\s*,\s*/.source,oO=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Nx=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,ghe=new RegExp("^rgba?\\("+pc+[xm,xm,xm].join(Ex)+Nx+"\\)$"),vhe=new RegExp("^rgb\\("+pc+[xm,xm,xm].join($B)+pc+"\\)$"),yhe=new RegExp("^rgba\\("+pc+[xm,xm,xm,Cd].join($B)+pc+"\\)$"),bhe=new RegExp("^hsla?\\("+pc+[oO,NA,NA].join(Ex)+Nx+"\\)$"),whe=new RegExp("^hsl?\\("+pc+[oO,NA,NA].join($B)+pc+"\\)$"),xhe=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,She=new RegExp("^lab\\("+pc+[Cd,Cd,Cd].join(Ex)+Nx+"\\)$"),Ehe=new RegExp("^lch\\("+pc+[Cd,Cd,oO].join(Ex)+Nx+"\\)$"),Nhe=new RegExp("^oklab\\("+pc+[Cd,Cd,Cd].join(Ex)+Nx+"\\)$"),_he=new RegExp("^oklch\\("+pc+[Cd,Cd,oO].join(Ex)+Nx+"\\)$"),{round:Che}=Math,V0=t=>t.map((e,n)=>n<=2?jy(Che(e),0,255):e),Ca=(t,e=0,n=100,r=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,r?t=e+(t+1)*.5*(n-e):t=e+t*(n-e)),+t),Mo=(t,e)=>t==="none"?e:t,LB=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(lr.format.named)try{return lr.format.named(t)}catch{}if((e=t.match(ghe))||(e=t.match(vhe))){let n=e.slice(1,4);for(let i=0;i<3;i++)n[i]=+Ca(Mo(n[i],0),0,255);n=V0(n);const r=e[4]!==void 0?+Ca(e[4],0,1):1;return n[3]=r,n}if(e=t.match(yhe)){const n=e.slice(1,5);for(let r=0;r<4;r++)n[r]=+Ca(n[r],0,255);return n}if((e=t.match(bhe))||(e=t.match(whe))){const n=e.slice(1,4);n[0]=+Mo(n[0].replace("deg",""),0),n[1]=+Ca(Mo(n[1],0),0,100)*.01,n[2]=+Ca(Mo(n[2],0),0,100)*.01;const r=V0(L5(n)),i=e[4]!==void 0?+Ca(e[4],0,1):1;return r[3]=i,r}if(e=t.match(xhe)){const n=e.slice(1,4);n[1]*=.01,n[2]*=.01;const r=L5(n);for(let i=0;i<3;i++)r[i]=Che(r[i]);return r[3]=+e[4],r}if(e=t.match(She)){const n=e.slice(1,4);n[0]=Ca(Mo(n[0],0),0,100),n[1]=Ca(Mo(n[1],0),-125,125,!0),n[2]=Ca(Mo(n[2],0),-125,125,!0);const r=LN();mm("d50");const i=V0(RB(n));mm(r);const a=e[4]!==void 0?+Ca(e[4],0,1):1;return i[3]=a,i}if(e=t.match(Ehe)){const n=e.slice(1,4);n[0]=Ca(n[0],0,100),n[1]=Ca(Mo(n[1],0),0,150,!1),n[2]=+Mo(n[2].replace("deg",""),0);const r=LN();mm("d50");const i=V0(jB(n));mm(r);const a=e[4]!==void 0?+Ca(e[4],0,1):1;return i[3]=a,i}if(e=t.match(Nhe)){const n=e.slice(1,4);n[0]=Ca(Mo(n[0],0),0,1),n[1]=Ca(Mo(n[1],0),-.4,.4,!0),n[2]=Ca(Mo(n[2],0),-.4,.4,!0);const r=V0(MB(n)),i=e[4]!==void 0?+Ca(e[4],0,1):1;return r[3]=i,r}if(e=t.match(_he)){const n=e.slice(1,4);n[0]=Ca(Mo(n[0],0),0,1),n[1]=Ca(Mo(n[1],0),0,.4,!1),n[2]=+Mo(n[2].replace("deg",""),0);const r=V0(phe(n)),i=e[4]!==void 0?+Ca(e[4],0,1):1;return r[3]=i,r}};LB.test=t=>ghe.test(t)||bhe.test(t)||She.test(t)||Ehe.test(t)||Nhe.test(t)||_he.test(t)||vhe.test(t)||yhe.test(t)||whe.test(t)||xhe.test(t)||t==="transparent";At.prototype.css=function(t){return qst(this._rgb,t)};const Xst=(...t)=>new At(...t,"css");Ar.css=Xst;lr.format.css=LB;lr.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&Nr(t)==="string"&&LB.test(t))return"css"}});lr.format.gl=(...t)=>{const e=fr(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const Zst=(...t)=>new At(...t,"gl");Ar.gl=Zst;At.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};At.prototype.hex=function(t){return rhe(this._rgb,t)};const Qst=(...t)=>new At(...t,"hex");Ar.hex=Qst;lr.format.hex=nhe;lr.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&Nr(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:ek}=Math,The=t=>{const e=t/100;let n,r,i;return e<66?(n=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*ek(r),i=e<20?0:-254.76935184120902+.8274096064007395*(i=e-10)+115.67994401066147*ek(i)):(n=351.97690566805693+.114206453784165*(n=e-55)-40.25366309332127*ek(n),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*ek(r),i=255),[n,r,i,1]},{round:eot}=Math,tot=(...t)=>{const e=fr(t,"rgb"),n=e[0],r=e[2];let i=1e3,a=4e4;const s=.4;let o;for(;a-i>s;){o=(a+i)*.5;const l=The(o);l[2]/l[0]>=r/n?a=o:i=o}return eot(o)};At.prototype.temp=At.prototype.kelvin=At.prototype.temperature=function(){return tot(this._rgb)};const YV=(...t)=>new At(...t,"temp");Object.assign(Ar,{temp:YV,kelvin:YV,temperature:YV});lr.format.temp=lr.format.kelvin=lr.format.temperature=The;At.prototype.oklch=function(){return mhe(this._rgb)};const not=(...t)=>new At(...t,"oklch");Object.assign(Ar,{oklch:not});lr.format.oklch=phe;lr.autodetect.push({p:2,test:(...t)=>{if(t=fr(t,"oklch"),Nr(t)==="array"&&t.length===3)return"oklch"}});Object.assign(Ar,{analyze:dhe,average:rst,bezier:ust,blend:Rd,brewer:Bst,Color:At,colors:qw,contrast:Pst,contrastAPCA:Ost,cubehelix:Sst,deltaE:Vst,distance:$st,input:lr,interpolate:Xw,limits:fhe,mix:Xw,random:Cst,scale:EA,scales:Fst,valid:Lst});function rot(){const t=Qe(F=>F.tone),e=Qe(F=>F.setTone),n=Qe(F=>F.savedTones),r=Qe(F=>F.addSavedTone),i=Qe(F=>F.removeSavedTone),a=Qe(F=>F.updateSavedToneName),s=Qe(F=>F.loadSavedTone),[o,l]=R.useState(""),[c,f]=R.useState(null),[h,m]=R.useState(""),p=it.createRef(),v=180,y=10,x=Qe(F=>F.selectedTexts),[S,_]=R.useState(!1),[N,k]=R.useState(!1),P=R.useMemo(()=>{if(x.length===1){const F=JSON.parse(JSON.stringify(Qe.getState().tone));for(let J=0;J<F.length;J++)F[J].value=5;return new Xfe(x[0].text,F)}return null},[S]);R.useEffect(()=>{x.length===1&&(!P||!P.isValueCached(x[0].text))&&_(!S)},[x]);function O(F,J,Z,G){const oe=F/Z-.5,ae=J/G-.5,te=Math.atan2(-ae,-oe)*(360/(Math.PI*2)),re=Math.sqrt(oe*oe+ae*ae),X=Math.min(re,.5)/.5,ce=re>.5?[255,255,255]:Ar.hsv(te,X,1).rgb();return[Math.round(ce[0]/255*y)/y*255,Math.round(ce[1]/255*y)/y*255,Math.round(ce[2]/255*y)/y*255]}function A(F,J,Z,G,oe){const ae=Ar(F/255,J/255,Z/255).hsv(),te=ae[0]/360*2*Math.PI,re=ae[1],X=-Math.cos(te)*re*.5+.5,ce=-Math.sin(te)*re*.5+.5;return[X*G,ce*oe]}function T(){if(x.length===1&&P){P.cachedExecute(t).then(J=>{const Z=[];for(const G of x)Z.push({...G,text:J,isLoading:!1});oa.getState().storeUndoState(),Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(Z)});const F=[];for(const J of Qe.getState().selectedTexts)F.push({...J,isLoading:!0});Qe.getState().setSelectedTexts(F)}}const L=A(t[0].value/y*255,t[1].value/y*255,t[2].value/y*255,v,v),B=`rgb(${t[0].value/y*255}, ${t[1].value/y*255}, ${t[2].value/y*255})`,W=[];t.forEach((F,J)=>{const Z=F.value>5?-1:1,G=Math.min(F.value+Z*3,y),oe=A((J===0?G:t[0].value)/y*255,(J===1?G:t[1].value)/y*255,(J===2?G:t[2].value)/y*255,v,v);if(Math.sqrt((oe[0]-L[0])**2+(oe[1]-L[1])**2)<v/2){const te=oe[0]<L[0],re=oe[1]>L[1];W.push({name:Z===-1?F.lowAdjective:F.highAdjective,position:oe,textAnchor:te?"end":"start",dominantBaseline:re?"hanging":"auto"})}}),R.useEffect(()=>{const F=J=>{J.button===0&&N&&(k(!1),T(),Rr.getState().logEvent("TONE_CHANGED",{source:"wheel",tone:Qe.getState().tone}))};return window.addEventListener("mouseup",F),()=>{window.removeEventListener("mouseup",F)}});const Y=F=>{var J,Z,G,oe;if(p.current){const ae=(J=p.current)==null?void 0:J.clientWidth,te=(Z=p.current)==null?void 0:Z.clientHeight,re=O(F.clientX-((G=p.current)==null?void 0:G.getBoundingClientRect().left),F.clientY-((oe=p.current)==null?void 0:oe.getBoundingClientRect().top),ae,te);t[0].value=re[0]/255*y,t[1].value=re[1]/255*y,t[2].value=re[2]/255*y,e([...t])}},V=()=>{o.trim()&&(r(o.trim()),l(""))},I=(F,J)=>{f(F),m(J)},H=()=>{c&&h.trim()&&(a(c,h.trim()),f(null),m(""))},q=()=>{f(null),m("")};return b.jsxDEV(wn,{style:{width:250,minHeight:451},children:[b.jsxDEV(Kn,{children:b.jsxDEV("span",{style:{fontWeight:600},children:"Tone picker"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:179,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:178,columnNumber:7},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:181,columnNumber:7},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",gap:10},children:[b.jsxDEV("div",{className:"group",ref:p,style:{position:"relative",width:v,height:v},onMouseDown:F=>{p.current&&F.button===0&&(k(!0),Y(F),F.preventDefault(),F.stopPropagation())},onMouseMove:F=>{N&&Y(F)},children:[b.jsxDEV("div",{style:{position:"absolute",borderRadius:"50%",transform:"rotateZ(270deg)",inset:0,background:"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:203,columnNumber:13},this),b.jsxDEV("div",{style:{position:"absolute",borderRadius:"50%",transform:"rotateZ(270deg)",inset:0,background:"radial-gradient(circle closest-side, rgb(255, 255, 255), transparent)"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:204,columnNumber:13},this),b.jsxDEV("div",{className:"group-[:not(:hover)]:invisible",style:{position:"absolute",left:0,top:0,width:v,height:v,pointerEvents:"none",userSelect:"none"},children:b.jsxDEV("svg",{width:v,height:v,xmlns:"http://www.w3.org/2000/svg",children:[b.jsxDEV("defs",{children:b.jsxDEV("marker",{id:"arrow",markerWidth:"10",markerHeight:"10",refX:"3.5",refY:"1.5",orient:"auto",markerUnits:"strokeWidth",children:b.jsxDEV("path",{d:"M0,0 L0,3 L4.5,1.5 z"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:209,columnNumber:21},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:208,columnNumber:19},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:207,columnNumber:17},this),W.map((F,J)=>b.jsxDEV("g",{children:[b.jsxDEV("line",{markerEnd:"url(#arrow)",x1:L[0],y1:L[1],x2:F.position[0],y2:F.position[1],stroke:"black",strokeWidth:"2"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:215,columnNumber:23},this),b.jsxDEV("text",{x:F.position[0],y:F.position[1],textAnchor:F.textAnchor,dominantBaseline:F.dominantBaseline,fontSize:"10",fill:"black",children:F.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:216,columnNumber:23},this)]},J,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:214,columnNumber:28},this))]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:206,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:205,columnNumber:13},this),!Number.isNaN(L[0])&&!Number.isNaN(L[1])&&b.jsxDEV("div",{className:"drop-shadow-md",style:{position:"absolute",left:L[0]-8,top:L[1]-8,width:16,height:16,border:"3px solid white",borderRadius:"50%",background:B}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:223,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:184,columnNumber:11},this),t.map((F,J)=>b.jsxDEV("div",{children:[b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",textAlign:"right",justifyContent:"space-between",gap:30},children:[b.jsxDEV(on,{size:"sm",value:F.lowAdjective,onValueChange:Z=>{t[J].lowAdjective=Z,Rr.getState().logEvent("TONE_NAMES_CHANGED",{tone:t}),e([...t])}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:228,columnNumber:15},this),b.jsxDEV(on,{style:{textAlign:"right"},size:"sm",value:F.highAdjective,onValueChange:Z=>{t[J].highAdjective=Z,Rr.getState().logEvent("TONE_NAMES_CHANGED",{tone:t}),e([...t])}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:233,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:227,columnNumber:13},this),b.jsxDEV(YA,{"aria-label":F.highAdjective,showSteps:!0,color:["danger","success","primary"][J],size:"md",minValue:0,maxValue:10,step:1,value:F.value,onChange:Z=>{t[J].value=Z,e([...t])},onChangeEnd:Z=>{Rr.getState().logEvent("TONE_CHANGED",{source:"slider",tone:t}),T()},classNames:{track:`border-none ${["bg-gradient-to-r from-red-50 to-red-600","bg-gradient-to-r from-green-50 to-green-600","bg-gradient-to-r from-blue-50 to-blue-600"][J]}`,filler:"opacity-0",thumb:""}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:240,columnNumber:13},this)]},J,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:226,columnNumber:31},this)),b.jsxDEV(Bn,{style:{marginTop:10,marginBottom:10}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:257,columnNumber:11},this),b.jsxDEV("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:8},children:[b.jsxDEV("div",{style:{fontSize:12,fontWeight:600,color:"#666",marginBottom:4},children:"Saved Tones"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:259,columnNumber:13},this),b.jsxDEV("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[b.jsxDEV(on,{size:"sm",placeholder:"Name...",value:o,onValueChange:l,onKeyDown:F=>{F.key==="Enter"&&V()},style:{flex:1}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:263,columnNumber:15},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,color:"primary",variant:"flat",onClick:V,isDisabled:!o.trim(),children:b.jsxDEV(Vrt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:283,columnNumber:17},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:275,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:262,columnNumber:13},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:200,overflowY:"auto"},children:n.map(F=>b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 8px",borderRadius:6,background:"#f9fafb",border:"1px solid #e5e7eb",cursor:c===F.id?"default":"pointer"},onClick:()=>{c!==F.id&&(s(F.id),T())},children:[b.jsxDEV("div",{style:{width:16,height:16,borderRadius:4,background:F.color,border:"1px solid rgba(0,0,0,0.1)",flexShrink:0}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:310,columnNumber:19},this),c===F.id?b.jsxDEV(on,{size:"sm",value:h,onValueChange:m,onKeyDown:J=>{J.key==="Enter"?H():J.key==="Escape"&&q()},style:{flex:1},autoFocus:!0},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:323,columnNumber:21},this):b.jsxDEV("span",{style:{flex:1,fontSize:13,fontWeight:500},children:F.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:338,columnNumber:21},this),b.jsxDEV("div",{style:{display:"flex",gap:2},children:c===F.id?b.jsxDEV(b.Fragment,{children:[b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"light",onClick:J=>{J.stopPropagation(),H()},style:{minWidth:24,width:24,height:24},children:b.jsxDEV(zrt,{size:16},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:357,columnNumber:27},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:347,columnNumber:25},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"light",onClick:J=>{J.stopPropagation(),q()},style:{minWidth:24,width:24,height:24},children:b.jsxDEV(oZ,{size:16},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:369,columnNumber:27},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:359,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:346,columnNumber:23},this):b.jsxDEV(b.Fragment,{children:[b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"light",onClick:J=>{J.stopPropagation(),I(F.id,F.name)},style:{minWidth:24,width:24,height:24},children:b.jsxDEV(Urt,{size:14},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:384,columnNumber:27},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:374,columnNumber:25},this),b.jsxDEV(et,{size:"sm",isIconOnly:!0,variant:"light",color:"danger",onClick:J=>{J.stopPropagation(),i(F.id)},style:{minWidth:24,width:24,height:24},children:b.jsxDEV(oZ,{size:16},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:397,columnNumber:27},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:386,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:373,columnNumber:23},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:344,columnNumber:19},this)]},F.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:290,columnNumber:17},this))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:288,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:258,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:183,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:182,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TonePicker.tsx",lineNumber:177,columnNumber:5},this)}function iot(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[i,a]=R.useState(!1),[s,o]=R.useState(!1),[l,c]=R.useState(!1),[f,h]=R.useState([]),[m,p]=R.useState(!1),[v,y]=R.useState(0),[x,S]=R.useState(0),_=xl.translationField;R.useEffect(()=>{if(_){try{ot.unsetNodes(_,["selection","selectionId","selectionClassname","selectionTooltip","selectionColor"],{at:[],mode:"all",match:A=>A.selectionClassname==="findMatch"})}catch(A){console.warn("[FindReplace] Failed to clear marks:",A)}if(!m||t.length===0){h([]),y(0);return}try{const A=vt.string(_),T=[];if(l)try{const B=i?"g":"gi",W=new RegExp(t,B);let Y;for(;(Y=W.exec(A))!==null;)T.push({start:Y.index,end:Y.index+Y[0].length})}catch(B){console.warn("[FindReplace] Invalid regex:",B),h([]);return}else{const B=i?t:t.toLowerCase(),W=i?A:A.toLowerCase(),Y=(I,H)=>{const q=Z=>/[A-Za-z0-9_-]/.test(Z),F=H===0?" ":I[H-1],J=H+t.length>=I.length?" ":I[H+t.length];return!q(F)&&!q(J)};let V=0;for(;V<W.length;){const I=W.indexOf(B,V);if(I===-1)break;(!s||Y(W,I))&&T.push({start:I,end:I+t.length}),V=I+Math.max(t.length,1)}}h(T),y(0);const L=_.children;T.forEach((B,W)=>{const Y=ya.toSlatePoint(L,B.start),V=ya.toSlatePoint(L,B.end);if(Y&&V)try{ot.select(_,{anchor:Y,focus:V}),_.addMark("selection",!0),_.addMark("selectionId",W),_.addMark("selectionClassname","findMatch"),_.addMark("selectionColor",W===0?"rgba(59, 130, 246, 0.5)":"rgba(59, 130, 246, 0.25)"),_.addMark("selectionTooltip",`Match ${W+1}/${T.length}`)}catch(I){console.warn("[FindReplace] Failed to mark range:",I)}}),_.deselect()}catch(A){console.error("[FindReplace] Search failed:",A),h([])}}},[t,i,s,l,m,_,x]),R.useEffect(()=>{if(!(!_||f.length===0))try{const A=_.children;f.forEach((T,L)=>{const B=ya.toSlatePoint(A,T.start),W=ya.toSlatePoint(A,T.end);if(B&&W)try{ot.select(_,{anchor:B,focus:W});const Y=L===v;_.addMark("selectionColor",Y?"rgba(59, 130, 246, 0.5)":"rgba(59, 130, 246, 0.25)")}catch{}}),_.deselect()}catch(A){console.warn("[FindReplace] Failed to update highlight:",A)}},[v,f,_]);const N=()=>{if(!(!_||f.length===0))try{const A=_.children,T=f[v],L=ya.toSlatePoint(A,T.start),B=ya.toSlatePoint(A,T.end);L&&B&&(ot.select(_,{anchor:L,focus:B}),ot.insertText(_,n),_.deselect(),setTimeout(()=>S(W=>W+1),100))}catch(A){console.error("[FindReplace] Replace one failed:",A),alert("Failed to replace. Please try again.")}},k=()=>{if(!(!_||f.length===0))try{const A=_.children;for(let T=f.length-1;T>=0;T--){const L=f[T],B=ya.toSlatePoint(A,L.start),W=ya.toSlatePoint(A,L.end);B&&W&&(ot.select(_,{anchor:B,focus:W}),ot.insertText(_,n))}_.deselect(),setTimeout(()=>S(T=>T+1),100)}catch(A){console.error("[FindReplace] Replace all failed:",A),alert("Failed to replace all. Please try again.")}},P=()=>{if(f.length===0)return;const A=(v+1)%f.length;y(A)},O=()=>{if(f.length===0)return;const A=(v-1+f.length)%f.length;y(A)};return b.jsxDEV(wn,{className:"drop-shadow-md",style:{background:"white",borderRadius:14,minWidth:280},children:[b.jsxDEV(Kn,{children:b.jsxDEV("span",{style:{fontWeight:600},children:"Find & Replace"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:197,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:196,columnNumber:7},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:199,columnNumber:7},this),b.jsxDEV(vn,{children:b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[b.jsxDEV(ZS,{isSelected:m,onValueChange:p,size:"sm",children:"Enable"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:202,columnNumber:11},this),b.jsxDEV(on,{isDisabled:!m,label:"Find",size:"sm",value:t,onValueChange:e,description:f.length>0?`${f.length} matches found`:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:203,columnNumber:11},this),b.jsxDEV(on,{isDisabled:!m,label:"Replace with",size:"sm",value:n,onValueChange:r},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:211,columnNumber:11},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[b.jsxDEV(ZS,{isDisabled:!m,size:"sm",isSelected:i,onValueChange:a,children:"Case sensitive"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:219,columnNumber:13},this),b.jsxDEV(ZS,{isDisabled:!m,size:"sm",isSelected:s,onValueChange:o,children:"Whole word"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:222,columnNumber:13},this),b.jsxDEV(ZS,{isDisabled:!m,size:"sm",isSelected:l,onValueChange:c,children:"Regex"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:225,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:218,columnNumber:11},this),f.length>0&&b.jsxDEV("div",{style:{display:"flex",gap:6,alignItems:"center",fontSize:12},children:[b.jsxDEV("span",{children:[v+1," / ",f.length]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:231,columnNumber:15},this),b.jsxDEV(et,{size:"sm",variant:"flat",isDisabled:!m||f.length===0,onClick:O,children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:232,columnNumber:15},this),b.jsxDEV(et,{size:"sm",variant:"flat",isDisabled:!m||f.length===0,onClick:P,children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:235,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:230,columnNumber:13},this),b.jsxDEV(Bn,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:240,columnNumber:11},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[b.jsxDEV(et,{size:"sm",color:"primary",variant:"flat",isDisabled:!m||t.length===0||f.length===0,onClick:N,children:"Replace Current"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:242,columnNumber:13},this),b.jsxDEV(et,{size:"sm",color:"warning",isDisabled:!m||t.length===0||f.length===0,onClick:k,children:["Replace All (",f.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:251,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:241,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:201,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:200,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/FindReplace.tsx",lineNumber:195,columnNumber:5},this)}function aot(){const t=Qe(f=>f.selectedTexts),e=wa(f=>f.isPromptBoxOpen),n=wa(f=>f.closePromptBox),[r,i]=R.useState({x:0,y:0}),[a,s]=R.useState(""),o=it.createRef();R.useEffect(()=>{const f=document.getElementsByClassName("selectedText");if(f.length>0){const h=f[0].getBoundingClientRect();let m={x:h.x+h.width/2,y:h.y+h.height+10};for(let p=1;p<f.length;p++){const v=f[p].getBoundingClientRect();v.y+v.height>m.y&&(m={x:v.x+v.width/2,y:v.y+v.height+10})}(r.x!==m.x||r.y!==m.y)&&(s(""),i(m),setTimeout(()=>{var p;return(p=o.current)==null?void 0:p.focus()},50))}else i({x:0,y:0})},[t]);const l=R.useCallback(()=>{const f=wa.getState().onPromptBoxValidated;f&&f(a),s(""),n()},[a]);return r.x!==0&&r.y!==0&&e?b.jsxDEV("div",{className:"drop-shadow-xl",style:{position:"fixed",left:r.x,top:r.y,transform:"translate(-50%, 0%)",zIndex:1000002},children:b.jsxDEV(on,{autoFocus:!0,ref:o,variant:"faded",value:a,onClick:f=>{f.stopPropagation()},onMouseDown:f=>{f.stopPropagation()},onMouseUp:f=>{f.stopPropagation()},onValueChange:f=>s(f),onKeyDown:f=>{f.key==="Enter"&&l()},placeholder:"Type your prompt here...",endContent:b.jsxDEV(et,{size:"sm",isIconOnly:!0,onClick:l,children:b.jsxDEV(lae,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/PromptBox.tsx",lineNumber:74,columnNumber:11},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/PromptBox.tsx",lineNumber:73,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/PromptBox.tsx",lineNumber:54,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/PromptBox.tsx",lineNumber:53,columnNumber:5},this):b.jsxDEV(b.Fragment,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/PromptBox.tsx",lineNumber:50,columnNumber:26},this)}const sot=(t,e=[])=>{const n=R.useRef([...e]);R.useEffect(()=>{const r=t(n.current);return n.current=[...e],r},e)};function oot(t){const e=wa(s=>s.dragging),n=wa(s=>s.draggingParameters),r=wa(s=>s.stopDragging),i=(s,o=!0)=>{var c;let l=document.getElementById(s.elementId);if(s.cloned){let f=document.getElementById(s.elementId+"-clone");if(!f&&l&&o){const h=l==null?void 0:l.closest("svg");if(h){const m=l.getBoundingClientRect(),p=h.getBoundingClientRect(),v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.setAttribute("xmlns","http://www.w3.org/2000/svg"),v.setAttribute("viewBox",`${m.x-p.x} ${m.y-p.y} ${m.width} ${m.height}`),v.setAttribute("width",m.width+""),v.setAttribute("height",m.height+""),v.appendChild(l==null?void 0:l.cloneNode(!0)),f=document.createElement("div"),f.appendChild(v)}else f=l==null?void 0:l.cloneNode(!0);f==null||f.setAttribute("id",s.elementId+"-clone"),document.body.appendChild(f)}l=f}else(c=l==null?void 0:l.parentElement)!=null&&c.style;return l},a=(s,o,l,c)=>{var h;const f=i(s,!c);f&&(c&&s.cloned&&((h=f.parentElement)==null||h.removeChild(f)),c&&s.initialStyle?(f.style.zIndex=s.initialStyle.zIndex,f.style.pointerEvents="",f.style.position=s.initialStyle.position,f.style.opacity=s.initialStyle.opacity):(f.style.zIndex=c?"":"1000",f.style.pointerEvents=c?"":"none",f.style.opacity=c?"":"0.3",f.style.position=c?"":"absolute",f.style.left=c?"":o+"px",f.style.top=c?"":l+"px"))};return sot(([s,o])=>{const l={};o.forEach(m=>l[m.elementId]=m);const c={};if(n.forEach(m=>c[m.elementId]=m),s){for(const m in c)if(l[m]){const p=i(c[m],!1),v=c[m].offsetX-l[m].offsetX,y=c[m].offsetY-l[m].offsetY;p&&p.animate([{transform:`translate(${v}px, ${y}px)`},{transform:"translate(0, 0)"}],{duration:400,easing:"ease-in-out"})}}const f=m=>{if(e){for(const p of n){if(p.onElementDropped){const v=i(p,!1);p.onElementDropped(p,v)}a(p,m.clientX-p.offsetX,m.clientY-p.offsetY,!0)}r(),t.onDraggingEnd&&t.onDraggingEnd(m,n)}},h=m=>{if(e)if(m.buttons===0&&m.mozInputSource===void 0)f(m);else{t.onDragging&&t.onDragging(m,n);for(const p of n)a(p,m.clientX-p.offsetX,m.clientY-p.offsetY,!1)}};return window.addEventListener("mousemove",h),window.addEventListener("dragover",h),window.addEventListener("mouseup",f),window.addEventListener("dragend",f),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("dragover",h),window.removeEventListener("mouseup",f),window.removeEventListener("dragend",f)}},[e,n]),b.jsxDEV(b.Fragment,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/DragnDrop.tsx",lineNumber:180,columnNumber:11},this)}function lot(t){return nn({attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.414 10.656c-.781-.781-2.047-.781-2.828 0l-1.586 1.586v-7.242c0-1.105-.896-2-2-2-1.105 0-2 .895-2 2v7.242l-1.586-1.586c-.781-.781-2.047-.781-2.828 0s-.781 2.047 0 2.828l6.414 6.414 6.414-6.414c.781-.781.781-2.046 0-2.828z"},child:[]}]})(t)}var sy=(t=>(t[t.Insert=0]="Insert",t[t.Unite=1]="Unite",t[t.Intersect=2]="Intersect",t[t.Subtract=3]="Subtract",t[t.Exclude=4]="Exclude",t))(sy||{});class uot extends xc{execute(e){Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input,parameters:e});const{triggerText:n,receiverText:r}=this.input;let i="";switch(e){case 1:i="Write the sentence resulting from merging A and B.";break;case 2:i="Write a sentence using ONLY the elements that appear in both A and B.";break;case 3:i="Write the sentence resulting from subtracting A from B. The idea expressed from A should be removed. Feel free to update the rest of the text so that it still make sense.";break;case 4:i="Write the sentence resulting from excluding A from B.";break}let a=`A: ${n}
B: ${r}

${i}`;return Qe.getState().executePrompt({prompt:a}).then(s=>Dl.getFittingString(s.result,r))}}function cot(t){const e=wa(r=>r.sentenceHovered),n=r=>{const i=xl[t.draggedElementId];if(!i)return;const a=vt.string(i),s=wa.getState().sentenceHovered;if(!s)return;const o=xl[s.textfieldId];if(o)if(oa.getState().storeUndoState(),wa.getState().setSentenceHovered(null),Qe.getState().removeTextField(t.draggedElementId),r===sy.Insert){if(s.caretPosition){const l=[s.caretPosition.offsetNode,s.caretPosition.offset],c=rt.toSlatePoint(o,l,{exactMatch:!0,suppressThrow:!0});c&&(Rr.getState().logEvent("MERGE_TEXT_FRAGMENTS",{operation:r,draggedText:a}),ot.insertText(o,a,{at:c}))}}else{const l=fe.string(o,s.slateRange);Rr.getState().logEvent("MERGE_TEXT_FRAGMENTS",{operation:r,draggedText:a,hoveredText:l}),o.select(s.slateRange),o.addMark("selection",!0),o.addMark("selectionId",Qe.getState().selectedTexts.length),o.addMark("selectionClassname","other"),o.deselect(),new uot({triggerText:a,receiverText:l}).execute(r).then(c=>{const f=Qe.getState().selectedTexts,h=[];for(const m of f)h.push({...m,text:c,isLoading:!1});Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(h),Qe.getState().setSelectedTexts([])})}};return b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",height:"100%"},children:[(e==null?void 0:e.cursorRange)&&b.jsxDEV(b.Fragment,{children:[b.jsxDEV(so,{content:"Insert",placement:"top",delay:0,closeDelay:0,children:b.jsxDEV(et,{onClick:()=>n(sy.Insert),isIconOnly:!0,variant:"light",children:b.jsxDEV(lot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:77,columnNumber:105},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:77,columnNumber:5},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:76,columnNumber:39},this),b.jsxDEV(Bn,{style:{height:40},orientation:"vertical"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:79,columnNumber:3},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:76,columnNumber:37},this),b.jsxDEV(vTe,{children:[b.jsxDEV(so,{content:"Unite",placement:"top",delay:0,closeDelay:0,children:b.jsxDEV(et,{variant:"light",onClick:()=>n(sy.Unite),isIconOnly:!0,children:b.jsxDEV(URe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:82,columnNumber:106},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:82,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:81,columnNumber:5},this),b.jsxDEV(so,{content:"Intersect",placement:"top",delay:0,closeDelay:0,children:b.jsxDEV(et,{variant:"light",onClick:()=>n(sy.Intersect),isIconOnly:!0,children:b.jsxDEV(FRe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:85,columnNumber:109},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:85,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:84,columnNumber:5},this),b.jsxDEV(so,{content:"Subtract",placement:"top",delay:0,closeDelay:0,children:b.jsxDEV(et,{variant:"light",onClick:()=>n(sy.Subtract),isIconOnly:!0,children:b.jsxDEV(BRe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:88,columnNumber:108},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:88,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:87,columnNumber:5},this),b.jsxDEV(so,{content:"Exclude",placement:"top",delay:0,closeDelay:0,children:b.jsxDEV(et,{variant:"light",onClick:()=>n(sy.Exclude),isIconOnly:!0,children:b.jsxDEV(LRe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:91,columnNumber:107},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:91,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:90,columnNumber:5},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:80,columnNumber:3},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/view/components/TextMergerMenu.tsx",lineNumber:75,columnNumber:3},this)}function dot(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M9.24268 7H11.2427V11.0001H11.2477V13.0001H11.2427V17H9.24268V13.0001L4.82846 13L6.65685 14.8284L5.24264 16.2426L1 12L5.24264 7.75732L6.65685 9.17154L4.82839 11H9.24264L9.24268 7Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M15.2527 7.00012H13.2527V11.0001H13.2477V13.0001H13.2527V17.0001H15.2527V13.0001L19.667 13L17.8385 14.8285L19.2527 16.2427L23.4954 12L19.2527 7.75739L17.8385 9.17161L19.6669 11H15.2527L15.2527 7.00012Z",fill:"currentColor"},child:[]}]})(t)}function fot(t){return nn({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M1.5033 6H3.5033V11H7.6749L5.84644 9.17154L7.26066 7.75732L11.5033 12L7.26066 16.2426L5.84644 14.8284L7.67483 13H3.5033V18H1.5033V6Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M20.4967 6H22.4967V18H20.4967V13H16.3251L18.1536 14.8285L16.7393 16.2427L12.4967 12L16.7393 7.75739L18.1536 9.17161L16.3252 11H20.4967V6Z",fill:"currentColor"},child:[]}]})(t)}class hot extends xc{execute(){const e=this.input;Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input});let n=`${e}

Combine this text into one sentence.`;return Qe.getState().executePrompt({prompt:n}).then(r=>Dl.getFittingString(r.result,e))}}class mot extends xc{execute(){const e=this.input;Rr.getState().logEvent("PROMPT_TOOL_EXECUTED",{className:this.constructor.name,input:this.input});let n=`${e}

Break this text into multiple sentences. One sentence per idea.`;return Qe.getState().executePrompt({prompt:n}).then(r=>Dl.getFittingString(r.result,e))}}var J0={};/**
 * @license React
 * react-dom-server-legacy.browser.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=R,e="18.3.1",n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(w){{for(var C=arguments.length,j=new Array(C>1?C-1:0),z=1;z<C;z++)j[z-1]=arguments[z];a("warn",w,j)}}function i(w){{for(var C=arguments.length,j=new Array(C>1?C-1:0),z=1;z<C;z++)j[z-1]=arguments[z];a("error",w,j)}}function a(w,C,j){{var z=n.ReactDebugCurrentFrame,Q=z.getStackAddendum();Q!==""&&(C+="%s",j=j.concat([Q]));var le=j.map(function(ge){return String(ge)});le.unshift("Warning: "+C),Function.prototype.apply.call(console[w],console,le)}}function s(w){w()}function o(w){}function l(w,C){c(w,C)}function c(w,C){return w.push(C)}function f(w){}function h(w){w.push(null)}function m(w){return w}function p(w){return w}function v(w,C){w.destroy(C)}function y(w){{var C=typeof Symbol=="function"&&Symbol.toStringTag,j=C&&w[Symbol.toStringTag]||w.constructor.name||"Object";return j}}function x(w){try{return S(w),!1}catch{return!0}}function S(w){return""+w}function _(w,C){if(x(w))return i("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",C,y(w)),S(w)}function N(w,C){if(x(w))return i("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",C,y(w)),S(w)}function k(w){if(x(w))return i("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",y(w)),S(w)}var P=Object.prototype.hasOwnProperty,O=0,A=1,T=2,L=3,B=4,W=5,Y=6,V=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",I=V+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",H=new RegExp("^["+V+"]["+I+"]*$"),q={},F={};function J(w){return P.call(F,w)?!0:P.call(q,w)?!1:H.test(w)?(F[w]=!0,!0):(q[w]=!0,i("Invalid attribute name: `%s`",w),!1)}function Z(w,C,j,z){if(j!==null&&j.type===O)return!1;switch(typeof C){case"function":case"symbol":return!0;case"boolean":{if(j!==null)return!j.acceptsBooleans;var Q=w.toLowerCase().slice(0,5);return Q!=="data-"&&Q!=="aria-"}default:return!1}}function G(w){return ae.hasOwnProperty(w)?ae[w]:null}function oe(w,C,j,z,Q,le,ge){this.acceptsBooleans=C===T||C===L||C===B,this.attributeName=z,this.attributeNamespace=Q,this.mustUseProperty=j,this.propertyName=w,this.type=C,this.sanitizeURL=le,this.removeEmptyString=ge}var ae={},te=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];te.forEach(function(w){ae[w]=new oe(w,O,!1,w,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(w){var C=w[0],j=w[1];ae[C]=new oe(C,A,!1,j,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(w){ae[w]=new oe(w,T,!1,w.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(w){ae[w]=new oe(w,T,!1,w,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(w){ae[w]=new oe(w,L,!1,w.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(w){ae[w]=new oe(w,L,!0,w,null,!1,!1)}),["capture","download"].forEach(function(w){ae[w]=new oe(w,B,!1,w,null,!1,!1)}),["cols","rows","size","span"].forEach(function(w){ae[w]=new oe(w,Y,!1,w,null,!1,!1)}),["rowSpan","start"].forEach(function(w){ae[w]=new oe(w,W,!1,w.toLowerCase(),null,!1,!1)});var re=/[\-\:]([a-z])/g,X=function(w){return w[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(w){var C=w.replace(re,X);ae[C]=new oe(C,A,!1,w,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(w){var C=w.replace(re,X);ae[C]=new oe(C,A,!1,w,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(w){var C=w.replace(re,X);ae[C]=new oe(C,A,!1,w,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(w){ae[w]=new oe(w,A,!1,w.toLowerCase(),null,!1,!1)});var ce="xlinkHref";ae[ce]=new oe("xlinkHref",A,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(w){ae[w]=new oe(w,A,!1,w.toLowerCase(),null,!0,!0)});var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function ve(w,C){return w+C.charAt(0).toUpperCase()+C.substring(1)}var Ne=["Webkit","ms","Moz","O"];Object.keys(he).forEach(function(w){Ne.forEach(function(C){he[ve(C,w)]=he[w]})});var ke={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function Te(w,C){ke[C.type]||C.onChange||C.onInput||C.readOnly||C.disabled||C.value==null||i("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),C.onChange||C.readOnly||C.disabled||C.checked==null||i("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function ye(w,C){if(w.indexOf("-")===-1)return typeof C.is=="string";switch(w){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ie={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Re={},Ee=new RegExp("^(aria)-["+I+"]*$"),$e=new RegExp("^(aria)[A-Z]["+I+"]*$");function He(w,C){{if(P.call(Re,C)&&Re[C])return!0;if($e.test(C)){var j="aria-"+C.slice(4).toLowerCase(),z=Ie.hasOwnProperty(j)?j:null;if(z==null)return i("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",C),Re[C]=!0,!0;if(C!==z)return i("Invalid ARIA attribute `%s`. Did you mean `%s`?",C,z),Re[C]=!0,!0}if(Ee.test(C)){var Q=C.toLowerCase(),le=Ie.hasOwnProperty(Q)?Q:null;if(le==null)return Re[C]=!0,!1;if(C!==le)return i("Unknown ARIA attribute `%s`. Did you mean `%s`?",C,le),Re[C]=!0,!0}}return!0}function gt(w,C){{var j=[];for(var z in C){var Q=He(w,z);Q||j.push(z)}var le=j.map(function(ge){return"`"+ge+"`"}).join(", ");j.length===1?i("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",le,w):j.length>1&&i("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",le,w)}}function Ye(w,C){ye(w,C)||gt(w,C)}var yt=!1;function _t(w,C){{if(w!=="input"&&w!=="textarea"&&w!=="select")return;C!=null&&C.value===null&&!yt&&(yt=!0,w==="select"&&C.multiple?i("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",w):i("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",w))}}var St={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Bt=function(){};{var Nt={},Dt=/^on./,Ae=/^on[^A-Z]/,je=new RegExp("^(aria)-["+I+"]*$"),tt=new RegExp("^(aria)[A-Z]["+I+"]*$");Bt=function(w,C,j,z){if(P.call(Nt,C)&&Nt[C])return!0;var Q=C.toLowerCase();if(Q==="onfocusin"||Q==="onfocusout")return i("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),Nt[C]=!0,!0;if(z!=null){var le=z.registrationNameDependencies,ge=z.possibleRegistrationNames;if(le.hasOwnProperty(C))return!0;var Pe=ge.hasOwnProperty(Q)?ge[Q]:null;if(Pe!=null)return i("Invalid event handler property `%s`. Did you mean `%s`?",C,Pe),Nt[C]=!0,!0;if(Dt.test(C))return i("Unknown event handler property `%s`. It will be ignored.",C),Nt[C]=!0,!0}else if(Dt.test(C))return Ae.test(C)&&i("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",C),Nt[C]=!0,!0;if(je.test(C)||tt.test(C))return!0;if(Q==="innerhtml")return i("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),Nt[C]=!0,!0;if(Q==="aria")return i("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),Nt[C]=!0,!0;if(Q==="is"&&j!==null&&j!==void 0&&typeof j!="string")return i("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof j),Nt[C]=!0,!0;if(typeof j=="number"&&isNaN(j))return i("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",C),Nt[C]=!0,!0;var ze=G(C),mt=ze!==null&&ze.type===O;if(St.hasOwnProperty(Q)){var Et=St[Q];if(Et!==C)return i("Invalid DOM property `%s`. Did you mean `%s`?",C,Et),Nt[C]=!0,!0}else if(!mt&&C!==Q)return i("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",C,Q),Nt[C]=!0,!0;return typeof j=="boolean"&&Z(C,j,ze)?(j?i('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',j,C,C,j,C):i('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',j,C,C,j,C,C,C),Nt[C]=!0,!0):mt?!0:Z(C,j,ze)?(Nt[C]=!0,!1):((j==="false"||j==="true")&&ze!==null&&ze.type===L&&(i("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",j,C,j==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',C,j),Nt[C]=!0),!0)}}var Ot=function(w,C,j){{var z=[];for(var Q in C){var le=Bt(w,Q,C[Q],j);le||z.push(Q)}var ge=z.map(function(Pe){return"`"+Pe+"`"}).join(", ");z.length===1?i("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",ge,w):z.length>1&&i("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",ge,w)}};function qe(w,C,j){ye(w,C)||Ot(w,C,j)}var ft=function(){};{var Wt=/^(?:webkit|moz|o)[A-Z]/,an=/^-ms-/,Un=/-(.)/g,pn=/;\s*$/,ln={},Gt={},Kt=!1,Lt=!1,In=function(w){return w.replace(Un,function(C,j){return j.toUpperCase()})},Tn=function(w){ln.hasOwnProperty(w)&&ln[w]||(ln[w]=!0,i("Unsupported style property %s. Did you mean %s?",w,In(w.replace(an,"ms-"))))},Wr=function(w){ln.hasOwnProperty(w)&&ln[w]||(ln[w]=!0,i("Unsupported vendor-prefixed style property %s. Did you mean %s?",w,w.charAt(0).toUpperCase()+w.slice(1)))},Mr=function(w,C){Gt.hasOwnProperty(C)&&Gt[C]||(Gt[C]=!0,i(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,w,C.replace(pn,"")))},Hr=function(w,C){Kt||(Kt=!0,i("`NaN` is an invalid value for the `%s` css style property.",w))},Ii=function(w,C){Lt||(Lt=!0,i("`Infinity` is an invalid value for the `%s` css style property.",w))};ft=function(w,C){w.indexOf("-")>-1?Tn(w):Wt.test(w)?Wr(w):pn.test(C)&&Mr(w,C),typeof C=="number"&&(isNaN(C)?Hr(w,C):isFinite(C)||Ii(w,C))}}var Wi=ft,Mi=/["'&<>]/;function zi(w){k(w);var C=""+w,j=Mi.exec(C);if(!j)return C;var z,Q="",le,ge=0;for(le=j.index;le<C.length;le++){switch(C.charCodeAt(le)){case 34:z="&quot;";break;case 38:z="&amp;";break;case 39:z="&#x27;";break;case 60:z="&lt;";break;case 62:z="&gt;";break;default:continue}ge!==le&&(Q+=C.substring(ge,le)),ge=le+1,Q+=z}return ge!==le?Q+C.substring(ge,le):Q}function xr(w){return typeof w=="boolean"||typeof w=="number"?""+w:zi(w)}var Vr=/([A-Z])/g,$r=/^ms-/;function qt(w){return w.replace(Vr,"-$1").toLowerCase().replace($r,"-ms-")}var Zn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,ea=!1;function ue(w){!ea&&Zn.test(w)&&(ea=!0,i("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(w)))}var xe=Array.isArray;function ne(w){return xe(w)}var _e="<script>";function Be(w,C,j,z,Q){var le=w===void 0?"":w,ge=_e,Pe=[];return{bootstrapChunks:Pe,startInlineScript:ge,placeholderPrefix:le+"P:",segmentPrefix:le+"S:",boundaryPrefix:le+"B:",idPrefix:le,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}var Le=0,Ze=1,We=2,wt=3,ht=4,Pt=5,Ut=6,Zt=7;function sn(w,C){return{insertionMode:w,selectedValue:C}}function cn(w,C,j){switch(C){case"select":return sn(Ze,j.value!=null?j.value:j.defaultValue);case"svg":return sn(We,null);case"math":return sn(wt,null);case"foreignObject":return sn(Ze,null);case"table":return sn(ht,null);case"thead":case"tbody":case"tfoot":return sn(Pt,null);case"colgroup":return sn(Zt,null);case"tr":return sn(Ut,null)}return w.insertionMode>=ht||w.insertionMode===Le?sn(Ze,null):w}var hr=null;function Dn(w){var C=w.nextSuspenseID++;return w.boundaryPrefix+C.toString(16)}function gn(w,C,j){var z=w.idPrefix,Q=":"+z+"R"+C;return j>0&&(Q+="H"+j.toString(32)),Q+":"}function Gr(w){return xr(w)}var xi="<!-- -->";function ta(w,C,j,z){return C===""?z:(z&&w.push(xi),w.push(Gr(C)),!0)}function si(w,C,j,z){j&&z&&w.push(xi)}var oi=new Map;function la(w){var C=oi.get(w);if(C!==void 0)return C;var j=xr(qt(w));return oi.set(w,j),j}var li=' style="',xa=":",Mn=";";function Cr(w,C,j){if(typeof j!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");var z=!0;for(var Q in j)if(P.call(j,Q)){var le=j[Q];if(!(le==null||typeof le=="boolean"||le==="")){var ge=void 0,Pe=void 0,ze=Q.indexOf("--")===0;ze?(ge=xr(Q),N(le,Q),Pe=xr((""+le).trim())):(Wi(Q,le),ge=la(Q),typeof le=="number"?le!==0&&!P.call(he,Q)?Pe=le+"px":Pe=""+le:(N(le,Q),Pe=xr((""+le).trim()))),z?(z=!1,w.push(li,ge,xa,Pe)):w.push(Mn,ge,xa,Pe)}}z||w.push(ei)}var Lr=" ",er='="',ei='"',Hi='=""';function Fr(w,C,j,z){switch(j){case"style":{Cr(w,C,z);return}case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(j.length>2&&(j[0]==="o"||j[0]==="O")&&(j[1]==="n"||j[1]==="N"))){var Q=G(j);if(Q!==null){switch(typeof z){case"function":case"symbol":return;case"boolean":if(!Q.acceptsBooleans)return}var le=Q.attributeName,ge=le;switch(Q.type){case L:z&&w.push(Lr,ge,Hi);return;case B:z===!0?w.push(Lr,ge,Hi):z===!1||w.push(Lr,ge,er,xr(z),ei);return;case W:isNaN(z)||w.push(Lr,ge,er,xr(z),ei);break;case Y:!isNaN(z)&&z>=1&&w.push(Lr,ge,er,xr(z),ei);break;default:Q.sanitizeURL&&(_(z,le),z=""+z,ue(z)),w.push(Lr,ge,er,xr(z),ei)}}else if(J(j)){switch(typeof z){case"function":case"symbol":return;case"boolean":{var Pe=j.toLowerCase().slice(0,5);if(Pe!=="data-"&&Pe!=="aria-")return}}w.push(Lr,j,er,xr(z),ei)}}}var Si=">",vs="/>";function Qa(w,C,j){if(C!=null){if(j!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof C!="object"||!("__html"in C))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.");var z=C.__html;z!=null&&(k(z),w.push(""+z))}}var Hs=!1,Al=!1,Su=!1,Rl=!1,ys=!1,na=!1,es=!1;function Go(w,C){{var j=w[C];if(j!=null){var z=ne(j);w.multiple&&!z?i("The `%s` prop supplied to <select> must be an array if `multiple` is true.",C):!w.multiple&&z&&i("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.",C)}}}function $n(w,C,j){Te("select",C),Go(C,"value"),Go(C,"defaultValue"),C.value!==void 0&&C.defaultValue!==void 0&&!Su&&(i("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Su=!0),w.push(ns("select"));var z=null,Q=null;for(var le in C)if(P.call(C,le)){var ge=C[le];if(ge==null)continue;switch(le){case"children":z=ge;break;case"dangerouslySetInnerHTML":Q=ge;break;case"defaultValue":case"value":break;default:Fr(w,j,le,ge);break}}return w.push(Si),Qa(w,Q,z),z}function Gs(w){var C="";return t.Children.forEach(w,function(j){j!=null&&(C+=j,!ys&&typeof j!="string"&&typeof j!="number"&&(ys=!0,i("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}),C}var Gi=' selected=""';function kn(w,C,j,z){var Q=z.selectedValue;w.push(ns("option"));var le=null,ge=null,Pe=null,ze=null;for(var mt in C)if(P.call(C,mt)){var Et=C[mt];if(Et==null)continue;switch(mt){case"children":le=Et;break;case"selected":Pe=Et,es||(i("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),es=!0);break;case"dangerouslySetInnerHTML":ze=Et;break;case"value":ge=Et;default:Fr(w,j,mt,Et);break}}if(Q!=null){var Vt;if(ge!==null?(_(ge,"value"),Vt=""+ge):(ze!==null&&(na||(na=!0,i("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected."))),Vt=Gs(le)),ne(Q))for(var Wn=0;Wn<Q.length;Wn++){_(Q[Wn],"value");var Or=""+Q[Wn];if(Or===Vt){w.push(Gi);break}}else _(Q,"select.value"),""+Q===Vt&&w.push(Gi)}else Pe&&w.push(Gi);return w.push(Si),Qa(w,ze,le),le}function Ol(w,C,j){Te("input",C),C.checked!==void 0&&C.defaultChecked!==void 0&&!Al&&(i("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components","A component",C.type),Al=!0),C.value!==void 0&&C.defaultValue!==void 0&&!Hs&&(i("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components","A component",C.type),Hs=!0),w.push(ns("input"));var z=null,Q=null,le=null,ge=null;for(var Pe in C)if(P.call(C,Pe)){var ze=C[Pe];if(ze==null)continue;switch(Pe){case"children":case"dangerouslySetInnerHTML":throw new Error("input is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");case"defaultChecked":ge=ze;break;case"defaultValue":Q=ze;break;case"checked":le=ze;break;case"value":z=ze;break;default:Fr(w,j,Pe,ze);break}}return le!==null?Fr(w,j,"checked",le):ge!==null&&Fr(w,j,"checked",ge),z!==null?Fr(w,j,"value",z):Q!==null&&Fr(w,j,"value",Q),w.push(vs),null}function ra(w,C,j){Te("textarea",C),C.value!==void 0&&C.defaultValue!==void 0&&!Rl&&(i("Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Rl=!0),w.push(ns("textarea"));var z=null,Q=null,le=null;for(var ge in C)if(P.call(C,ge)){var Pe=C[ge];if(Pe==null)continue;switch(ge){case"children":le=Pe;break;case"value":z=Pe;break;case"defaultValue":Q=Pe;break;case"dangerouslySetInnerHTML":throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");default:Fr(w,j,ge,Pe);break}}if(z===null&&Q!==null&&(z=Q),w.push(Si),le!=null){if(i("Use the `defaultValue` or `value` props instead of setting children on <textarea>."),z!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(ne(le)){if(le.length>1)throw new Error("<textarea> can only have at most one child.");k(le[0]),z=""+le[0]}k(le),z=""+le}return typeof z=="string"&&z[0]===`
`&&w.push(Yo),z!==null&&(_(z,"value"),w.push(Gr(""+z))),null}function Ko(w,C,j,z){w.push(ns(j));for(var Q in C)if(P.call(C,Q)){var le=C[Q];if(le==null)continue;switch(Q){case"children":case"dangerouslySetInnerHTML":throw new Error(j+" is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:Fr(w,z,Q,le);break}}return w.push(vs),null}function Ks(w,C,j){w.push(ns("menuitem"));for(var z in C)if(P.call(C,z)){var Q=C[z];if(Q==null)continue;switch(z){case"children":case"dangerouslySetInnerHTML":throw new Error("menuitems cannot have `children` nor `dangerouslySetInnerHTML`.");default:Fr(w,j,z,Q);break}}return w.push(Si),null}function $d(w,C,j){w.push(ns("title"));var z=null;for(var Q in C)if(P.call(C,Q)){var le=C[Q];if(le==null)continue;switch(Q){case"children":z=le;break;case"dangerouslySetInnerHTML":throw new Error("`dangerouslySetInnerHTML` does not make sense on <title>.");default:Fr(w,j,Q,le);break}}w.push(Si);{var ge=Array.isArray(z)&&z.length<2?z[0]||null:z;Array.isArray(z)&&z.length>1?i("A title element received an array with more than 1 element as children. In browsers title Elements can only have Text Nodes as children. If the children being rendered output more than a single text node in aggregate the browser will display markup and comments as text in the title and hydration will likely fail and fall back to client rendering"):ge!=null&&ge.$$typeof!=null?i("A title element received a React element for children. In the browser title Elements can only have Text Nodes as children. If the children being rendered output more than a single text node in aggregate the browser will display markup and comments as text in the title and hydration will likely fail and fall back to client rendering"):ge!=null&&typeof ge!="string"&&typeof ge!="number"&&i("A title element received a value that was not a string or number for children. In the browser title Elements can only have Text Nodes as children. If the children being rendered output more than a single text node in aggregate the browser will display markup and comments as text in the title and hydration will likely fail and fall back to client rendering")}return z}function mi(w,C,j,z){w.push(ns(j));var Q=null,le=null;for(var ge in C)if(P.call(C,ge)){var Pe=C[ge];if(Pe==null)continue;switch(ge){case"children":Q=Pe;break;case"dangerouslySetInnerHTML":le=Pe;break;default:Fr(w,z,ge,Pe);break}}return w.push(Si),Qa(w,le,Q),typeof Q=="string"?(w.push(Gr(Q)),null):Q}function Kr(w,C,j,z){w.push(ns(j));var Q=null,le=null;for(var ge in C)if(P.call(C,ge)){var Pe=C[ge];if(Pe==null)continue;switch(ge){case"children":Q=Pe;break;case"dangerouslySetInnerHTML":le=Pe;break;case"style":Cr(w,z,Pe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:J(ge)&&typeof Pe!="function"&&typeof Pe!="symbol"&&w.push(Lr,ge,er,xr(Pe),ei);break}}return w.push(Si),Qa(w,le,Q),Q}var Yo=`
`;function ts(w,C,j,z){w.push(ns(j));var Q=null,le=null;for(var ge in C)if(P.call(C,ge)){var Pe=C[ge];if(Pe==null)continue;switch(ge){case"children":Q=Pe;break;case"dangerouslySetInnerHTML":le=Pe;break;default:Fr(w,z,ge,Pe);break}}if(w.push(Si),le!=null){if(Q!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof le!="object"||!("__html"in le))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.");var ze=le.__html;ze!=null&&(typeof ze=="string"&&ze.length>0&&ze[0]===`
`?w.push(Yo,ze):(k(ze),w.push(""+ze)))}return typeof Q=="string"&&Q[0]===`
`&&w.push(Yo),Q}var ia=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ua=new Map;function ns(w){var C=ua.get(w);if(C===void 0){if(!ia.test(w))throw new Error("Invalid tag: "+w);C="<"+w,ua.set(w,C)}return C}var Sc="<!DOCTYPE html>";function Ld(w,C,j,z,Q){switch(Ye(C,j),_t(C,j),qe(C,j,null),!j.suppressContentEditableWarning&&j.contentEditable&&j.children!=null&&i("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),Q.insertionMode!==We&&Q.insertionMode!==wt&&C.indexOf("-")===-1&&typeof j.is!="string"&&C.toLowerCase()!==C&&i("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",C),C){case"select":return $n(w,j,z);case"option":return kn(w,j,z,Q);case"textarea":return ra(w,j,z);case"input":return Ol(w,j,z);case"menuitem":return Ks(w,j,z);case"title":return $d(w,j,z);case"listing":case"pre":return ts(w,j,C,z);case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":return Ko(w,j,C,z);case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return mi(w,j,C,z);case"html":return Q.insertionMode===Le&&w.push(Sc),mi(w,j,C,z);default:return C.indexOf("-")===-1&&typeof j.is!="string"?mi(w,j,C,z):Kr(w,j,C,z)}}var Eu="</",go=">";function eh(w,C,j){switch(C){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:w.push(Eu,C,go)}}function ca(w,C){for(var j=C.bootstrapChunks,z=0;z<j.length-1;z++)l(w,j[z]);return z<j.length?c(w,j[z]):!0}var Jo='<template id="',jl='"></template>';function rs(w,C,j){l(w,Jo),l(w,C.placeholderPrefix);var z=j.toString(16);return l(w,z),c(w,jl)}var qo="<!--$-->",vo='<!--$?--><template id="',Ki='"></template>',Fd="<!--$!-->",Nu="<!--/$-->",Ec="<template",_u='"',U=' data-dgst="',ie=' data-msg="',we=' data-stck="',De="></template>";function Ue(w,C){return c(w,qo)}function xt(w,C,j){if(l(w,vo),j===null)throw new Error("An ID must have been assigned before we can complete the boundary.");return l(w,j),c(w,Ki)}function st(w,C,j,z,Q){var le;return le=c(w,Fd),l(w,Ec),j&&(l(w,U),l(w,xr(j)),l(w,_u)),z&&(l(w,ie),l(w,xr(z)),l(w,_u)),Q&&(l(w,we),l(w,xr(Q)),l(w,_u)),le=c(w,De),le}function Tt(w,C){return c(w,Nu)}function zt(w,C){return c(w,Nu)}function hn(w,C){return c(w,Nu)}var Vn='<div hidden id="',Pn='">',un="</div>",Gn='<svg aria-hidden="true" style="display:none" id="',ur='">',Ys="</svg>",Il='<math aria-hidden="true" style="display:none" id="',bs='">',Nc="</math>",Cu='<table hidden id="',Bd='">',_c="</table>",th='<table hidden><tbody id="',ab='">',Gg="</tbody></table>",sb='<table hidden><tr id="',ob='">',lb="</tr></table>",Cx='<table hidden><colgroup id="',Ml='">',Tx="</colgroup></table>";function Kg(w,C,j,z){switch(j.insertionMode){case Le:case Ze:return l(w,Vn),l(w,C.segmentPrefix),l(w,z.toString(16)),c(w,Pn);case We:return l(w,Gn),l(w,C.segmentPrefix),l(w,z.toString(16)),c(w,ur);case wt:return l(w,Il),l(w,C.segmentPrefix),l(w,z.toString(16)),c(w,bs);case ht:return l(w,Cu),l(w,C.segmentPrefix),l(w,z.toString(16)),c(w,Bd);case Pt:return l(w,th),l(w,C.segmentPrefix),l(w,z.toString(16)),c(w,ab);case Ut:return l(w,sb),l(w,C.segmentPrefix),l(w,z.toString(16)),c(w,ob);case Zt:return l(w,Cx),l(w,C.segmentPrefix),l(w,z.toString(16)),c(w,Ml);default:throw new Error("Unknown insertion mode. This is a bug in React.")}}function Yg(w,C){switch(C.insertionMode){case Le:case Ze:return c(w,un);case We:return c(w,Ys);case wt:return c(w,Nc);case ht:return c(w,_c);case Pt:return c(w,Gg);case Ut:return c(w,lb);case Zt:return c(w,Tx);default:throw new Error("Unknown insertion mode. This is a bug in React.")}}var Jg="function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)}",Dx='function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}}',Vm='function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())}',ub=Jg+';$RS("',is='$RS("',Vl='","',Vi='")<\/script>';function $l(w,C,j){l(w,C.startInlineScript),C.sentCompleteSegmentFunction?l(w,is):(C.sentCompleteSegmentFunction=!0,l(w,ub)),l(w,C.segmentPrefix);var z=j.toString(16);return l(w,z),l(w,Vl),l(w,C.placeholderPrefix),l(w,z),c(w,Vi)}var qg=Dx+';$RC("',$m='$RC("',kx='","',nh='")<\/script>';function Px(w,C,j,z){if(l(w,C.startInlineScript),C.sentCompleteBoundaryFunction?l(w,$m):(C.sentCompleteBoundaryFunction=!0,l(w,qg)),j===null)throw new Error("An ID must have been assigned before we can complete the boundary.");var Q=z.toString(16);return l(w,j),l(w,kx),l(w,C.segmentPrefix),l(w,Q),c(w,nh)}var Ax=Vm+';$RX("',Xg='$RX("',Rx='"',Ox=")<\/script>",Zg=",";function cb(w,C,j,z,Q,le){if(l(w,C.startInlineScript),C.sentClientRenderFunction?l(w,Xg):(C.sentClientRenderFunction=!0,l(w,Ax)),j===null)throw new Error("An ID must have been assigned before we can complete the boundary.");return l(w,j),l(w,Rx),(z||Q||le)&&(l(w,Zg),l(w,Qg(z||""))),(Q||le)&&(l(w,Zg),l(w,Qg(Q||""))),le&&(l(w,Zg),l(w,Qg(le))),c(w,Ox)}var jx=/[<\u2028\u2029]/g;function Qg(w){var C=JSON.stringify(w);return C.replace(jx,function(j){switch(j){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Ix(w,C){var j=Be(C);return{bootstrapChunks:j.bootstrapChunks,startInlineScript:j.startInlineScript,placeholderPrefix:j.placeholderPrefix,segmentPrefix:j.segmentPrefix,boundaryPrefix:j.boundaryPrefix,idPrefix:j.idPrefix,nextSuspenseID:j.nextSuspenseID,sentCompleteSegmentFunction:j.sentCompleteSegmentFunction,sentCompleteBoundaryFunction:j.sentCompleteBoundaryFunction,sentClientRenderFunction:j.sentClientRenderFunction,generateStaticMarkup:w}}function db(){return{insertionMode:Ze,selectedValue:null}}function Cc(w,C,j,z){return j.generateStaticMarkup?(w.push(xr(C)),!1):ta(w,C,j,z)}function Lm(w,C,j,z){if(!C.generateStaticMarkup)return si(w,C,j,z)}function fb(w,C){return C.generateStaticMarkup?!0:Ue(w)}function hb(w,C,j,z,Q){return C.generateStaticMarkup?!0:st(w,C,j,z,Q)}function Mx(w,C){return C.generateStaticMarkup?!0:Tt(w)}function Vx(w,C){return C.generateStaticMarkup?!0:hn(w)}var as=Object.assign,$x=Symbol.for("react.element"),mb=Symbol.for("react.portal"),Fm=Symbol.for("react.fragment"),ws=Symbol.for("react.strict_mode"),pb=Symbol.for("react.profiler"),rh=Symbol.for("react.provider"),Bm=Symbol.for("react.context"),ih=Symbol.for("react.forward_ref"),Um=Symbol.for("react.suspense"),ah=Symbol.for("react.suspense_list"),sh=Symbol.for("react.memo"),Ud=Symbol.for("react.lazy"),oh=Symbol.for("react.scope"),Ll=Symbol.for("react.debug_trace_mode"),Wd=Symbol.for("react.legacy_hidden"),lh=Symbol.for("react.default_value"),Tc=Symbol.iterator,Lx="@@iterator";function Fx(w){if(w===null||typeof w!="object")return null;var C=Tc&&w[Tc]||w[Lx];return typeof C=="function"?C:null}function Bx(w,C,j){var z=w.displayName;if(z)return z;var Q=C.displayName||C.name||"";return Q!==""?j+"("+Q+")":j}function ev(w){return w.displayName||"Context"}function pi(w){if(w==null)return null;if(typeof w.tag=="number"&&i("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case Fm:return"Fragment";case mb:return"Portal";case pb:return"Profiler";case ws:return"StrictMode";case Um:return"Suspense";case ah:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case Bm:var C=w;return ev(C)+".Consumer";case rh:var j=w;return ev(j._context)+".Provider";case ih:return Bx(w,w.render,"ForwardRef");case sh:var z=w.displayName||null;return z!==null?z:pi(w.type)||"Memo";case Ud:{var Q=w,le=Q._payload,ge=Q._init;try{return pi(ge(le))}catch{return null}}}return null}var zd=0,gb,Wm,ar,Dc,tv,nv,rv;function iv(){}iv.__reactDisabledLog=!0;function vb(){{if(zd===0){gb=console.log,Wm=console.info,ar=console.warn,Dc=console.error,tv=console.group,nv=console.groupCollapsed,rv=console.groupEnd;var w={configurable:!0,enumerable:!0,value:iv,writable:!0};Object.defineProperties(console,{info:w,log:w,warn:w,error:w,group:w,groupCollapsed:w,groupEnd:w})}zd++}}function av(){{if(zd--,zd===0){var w={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:as({},w,{value:gb}),info:as({},w,{value:Wm}),warn:as({},w,{value:ar}),error:as({},w,{value:Dc}),group:as({},w,{value:tv}),groupCollapsed:as({},w,{value:nv}),groupEnd:as({},w,{value:rv})})}zd<0&&i("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Hd=n.ReactCurrentDispatcher,Tu;function uh(w,C,j){{if(Tu===void 0)try{throw Error()}catch(Q){var z=Q.stack.trim().match(/\n( *(at )?)/);Tu=z&&z[1]||""}return`
`+Tu+w}}var kc=!1,Gd;{var sv=typeof WeakMap=="function"?WeakMap:Map;Gd=new sv}function Pc(w,C){if(!w||kc)return"";{var j=Gd.get(w);if(j!==void 0)return j}var z;kc=!0;var Q=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var le;le=Hd.current,Hd.current=null,vb();try{if(C){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(bi){z=bi}Reflect.construct(w,[],ge)}else{try{ge.call()}catch(bi){z=bi}w.call(ge.prototype)}}else{try{throw Error()}catch(bi){z=bi}w()}}catch(bi){if(bi&&z&&typeof bi.stack=="string"){for(var Pe=bi.stack.split(`
`),ze=z.stack.split(`
`),mt=Pe.length-1,Et=ze.length-1;mt>=1&&Et>=0&&Pe[mt]!==ze[Et];)Et--;for(;mt>=1&&Et>=0;mt--,Et--)if(Pe[mt]!==ze[Et]){if(mt!==1||Et!==1)do if(mt--,Et--,Et<0||Pe[mt]!==ze[Et]){var Vt=`
`+Pe[mt].replace(" at new "," at ");return w.displayName&&Vt.includes("<anonymous>")&&(Vt=Vt.replace("<anonymous>",w.displayName)),typeof w=="function"&&Gd.set(w,Vt),Vt}while(mt>=1&&Et>=0);break}}}finally{kc=!1,Hd.current=le,av(),Error.prepareStackTrace=Q}var Wn=w?w.displayName||w.name:"",Or=Wn?uh(Wn):"";return typeof w=="function"&&Gd.set(w,Or),Or}function ch(w,C,j){return Pc(w,!0)}function Ac(w,C,j){return Pc(w,!1)}function Kd(w){var C=w.prototype;return!!(C&&C.isReactComponent)}function Xo(w,C,j){if(w==null)return"";if(typeof w=="function")return Pc(w,Kd(w));if(typeof w=="string")return uh(w);switch(w){case Um:return uh("Suspense");case ah:return uh("SuspenseList")}if(typeof w=="object")switch(w.$$typeof){case ih:return Ac(w.render);case sh:return Xo(w.type,C,j);case Ud:{var z=w,Q=z._payload,le=z._init;try{return Xo(le(Q),C,j)}catch{}}}return""}var ov={},lv=n.ReactDebugCurrentFrame;function dh(w){if(w){var C=w._owner,j=Xo(w.type,w._source,C?C.type:null);lv.setExtraStackFrame(j)}else lv.setExtraStackFrame(null)}function zm(w,C,j,z,Q){{var le=Function.call.bind(P);for(var ge in w)if(le(w,ge)){var Pe=void 0;try{if(typeof w[ge]!="function"){var ze=Error((z||"React class")+": "+j+" type `"+ge+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof w[ge]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ze.name="Invariant Violation",ze}Pe=w[ge](C,ge,z,j,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(mt){Pe=mt}Pe&&!(Pe instanceof Error)&&(dh(Q),i("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",z||"React class",j,ge,typeof Pe),dh(null)),Pe instanceof Error&&!(Pe.message in ov)&&(ov[Pe.message]=!0,dh(Q),i("Failed %s type: %s",j,Pe.message),dh(null))}}}var fh;fh={};var Yd={};Object.freeze(Yd);function Jd(w,C){{var j=w.contextTypes;if(!j)return Yd;var z={};for(var Q in j)z[Q]=C[Q];{var le=pi(w)||"Unknown";zm(j,z,"context",le)}return z}}function Hm(w,C,j,z){{if(typeof w.getChildContext!="function"){{var Q=pi(C)||"Unknown";fh[Q]||(fh[Q]=!0,i("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",Q,Q))}return j}var le=w.getChildContext();for(var ge in le)if(!(ge in z))throw new Error((pi(C)||"Unknown")+'.getChildContext(): key "'+ge+'" is not defined in childContextTypes.');{var Pe=pi(C)||"Unknown";zm(z,le,"child context",Pe)}return as({},j,le)}}var Rc;Rc={};var hh=null,Du=null;function uv(w){w.context._currentValue2=w.parentValue}function Oc(w){w.context._currentValue2=w.value}function ku(w,C){if(w!==C){uv(w);var j=w.parent,z=C.parent;if(j===null){if(z!==null)throw new Error("The stacks must reach the root at the same time. This is a bug in React.")}else{if(z===null)throw new Error("The stacks must reach the root at the same time. This is a bug in React.");ku(j,z)}Oc(C)}}function Zo(w){uv(w);var C=w.parent;C!==null&&Zo(C)}function Pu(w){var C=w.parent;C!==null&&Pu(C),Oc(w)}function mh(w,C){uv(w);var j=w.parent;if(j===null)throw new Error("The depth must equal at least at zero before reaching the root. This is a bug in React.");j.depth===C.depth?ku(j,C):mh(j,C)}function qd(w,C){var j=C.parent;if(j===null)throw new Error("The depth must equal at least at zero before reaching the root. This is a bug in React.");w.depth===j.depth?ku(w,j):qd(w,j),Oc(C)}function jc(w){var C=Du,j=w;C!==j&&(C===null?Pu(j):j===null?Zo(C):C.depth===j.depth?ku(C,j):C.depth>j.depth?mh(C,j):qd(C,j),Du=j)}function yb(w,C){var j;j=w._currentValue2,w._currentValue2=C,w._currentRenderer2!==void 0&&w._currentRenderer2!==null&&w._currentRenderer2!==Rc&&i("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),w._currentRenderer2=Rc;var z=Du,Q={parent:z,depth:z===null?0:z.depth+1,context:w,parentValue:j,value:C};return Du=Q,Q}function Ic(w){var C=Du;if(C===null)throw new Error("Tried to pop a Context at the root of the app. This is a bug in React.");C.context!==w&&i("The parent context is not the expected context. This is probably a bug in React.");{var j=C.parentValue;j===lh?C.context._currentValue2=C.context._defaultValue:C.context._currentValue2=j,w._currentRenderer2!==void 0&&w._currentRenderer2!==null&&w._currentRenderer2!==Rc&&i("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),w._currentRenderer2=Rc}return Du=C.parent}function ph(){return Du}function yo(w){var C=w._currentValue2;return C}function gh(w){return w._reactInternals}function Ux(w,C){w._reactInternals=C}var Gm={},Xd={},vh,cv,Zd,Fl,Km,Qd,_n,Qo,yi;{vh=new Set,cv=new Set,Zd=new Set,_n=new Set,Fl=new Set,Qo=new Set,yi=new Set;var mr=new Set;Qd=function(w,C){if(!(w===null||typeof w=="function")){var j=C+"_"+w;mr.has(j)||(mr.add(j),i("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",C,w))}},Km=function(w,C){if(C===void 0){var j=pi(w)||"Component";Fl.has(j)||(Fl.add(j),i("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",j))}}}function el(w,C){{var j=w.constructor,z=j&&pi(j)||"ReactClass",Q=z+"."+C;if(Gm[Q])return;i(`%s(...): Can only update a mounting component. This usually means you called %s() outside componentWillMount() on the server. This is a no-op.

Please check the code for the %s component.`,C,C,z),Gm[Q]=!0}}var Au={isMounted:function(w){return!1},enqueueSetState:function(w,C,j){var z=gh(w);z.queue===null?el(w,"setState"):(z.queue.push(C),j!=null&&Qd(j,"setState"))},enqueueReplaceState:function(w,C,j){var z=gh(w);z.replace=!0,z.queue=[C],j!=null&&Qd(j,"setState")},enqueueForceUpdate:function(w,C){var j=gh(w);j.queue===null?el(w,"forceUpdate"):C!=null&&Qd(C,"setState")}};function Ym(w,C,j,z,Q){var le=j(Q,z);Km(C,le);var ge=le==null?z:as({},z,le);return ge}function Sr(w,C,j){var z=Yd,Q=w.contextType;if("contextType"in w){var le=Q===null||Q!==void 0&&Q.$$typeof===Bm&&Q._context===void 0;if(!le&&!yi.has(w)){yi.add(w);var ge="";Q===void 0?ge=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof Q!="object"?ge=" However, it is set to a "+typeof Q+".":Q.$$typeof===rh?ge=" Did you accidentally pass the Context.Provider instead?":Q._context!==void 0?ge=" Did you accidentally pass the Context.Consumer instead?":ge=" However, it is set to an object with keys {"+Object.keys(Q).join(", ")+"}.",i("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",pi(w)||"Component",ge)}}typeof Q=="object"&&Q!==null?z=yo(Q):z=j;var Pe=new w(C,z);{if(typeof w.getDerivedStateFromProps=="function"&&(Pe.state===null||Pe.state===void 0)){var ze=pi(w)||"Component";vh.has(ze)||(vh.add(ze),i("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",ze,Pe.state===null?"null":"undefined",ze))}if(typeof w.getDerivedStateFromProps=="function"||typeof Pe.getSnapshotBeforeUpdate=="function"){var mt=null,Et=null,Vt=null;if(typeof Pe.componentWillMount=="function"&&Pe.componentWillMount.__suppressDeprecationWarning!==!0?mt="componentWillMount":typeof Pe.UNSAFE_componentWillMount=="function"&&(mt="UNSAFE_componentWillMount"),typeof Pe.componentWillReceiveProps=="function"&&Pe.componentWillReceiveProps.__suppressDeprecationWarning!==!0?Et="componentWillReceiveProps":typeof Pe.UNSAFE_componentWillReceiveProps=="function"&&(Et="UNSAFE_componentWillReceiveProps"),typeof Pe.componentWillUpdate=="function"&&Pe.componentWillUpdate.__suppressDeprecationWarning!==!0?Vt="componentWillUpdate":typeof Pe.UNSAFE_componentWillUpdate=="function"&&(Vt="UNSAFE_componentWillUpdate"),mt!==null||Et!==null||Vt!==null){var Wn=pi(w)||"Component",Or=typeof w.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Zd.has(Wn)||(Zd.add(Wn),i(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,Wn,Or,mt!==null?`
  `+mt:"",Et!==null?`
  `+Et:"",Vt!==null?`
  `+Vt:""))}}}return Pe}function tl(w,C,j){{var z=pi(C)||"Component",Q=w.render;Q||(C.prototype&&typeof C.prototype.render=="function"?i("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",z):i("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",z)),w.getInitialState&&!w.getInitialState.isReactClassApproved&&!w.state&&i("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",z),w.getDefaultProps&&!w.getDefaultProps.isReactClassApproved&&i("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",z),w.propTypes&&i("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",z),w.contextType&&i("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",z),w.contextTypes&&i("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",z),C.contextType&&C.contextTypes&&!Qo.has(C)&&(Qo.add(C),i("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",z)),typeof w.componentShouldUpdate=="function"&&i("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",z),C.prototype&&C.prototype.isPureReactComponent&&typeof w.shouldComponentUpdate<"u"&&i("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",pi(C)||"A pure component"),typeof w.componentDidUnmount=="function"&&i("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",z),typeof w.componentDidReceiveProps=="function"&&i("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",z),typeof w.componentWillRecieveProps=="function"&&i("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",z),typeof w.UNSAFE_componentWillRecieveProps=="function"&&i("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",z);var le=w.props!==j;w.props!==void 0&&le&&i("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",z,z),w.defaultProps&&i("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",z,z),typeof w.getSnapshotBeforeUpdate=="function"&&typeof w.componentDidUpdate!="function"&&!cv.has(C)&&(cv.add(C),i("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",pi(C))),typeof w.getDerivedStateFromProps=="function"&&i("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",z),typeof w.getDerivedStateFromError=="function"&&i("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",z),typeof C.getSnapshotBeforeUpdate=="function"&&i("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",z);var ge=w.state;ge&&(typeof ge!="object"||ne(ge))&&i("%s.state: must be set to an object or null",z),typeof w.getChildContext=="function"&&typeof C.childContextTypes!="object"&&i("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",z)}}function Ru(w,C){var j=C.state;if(typeof C.componentWillMount=="function"){if(C.componentWillMount.__suppressDeprecationWarning!==!0){var z=pi(w)||"Unknown";Xd[z]||(r(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code from componentWillMount to componentDidMount (preferred in most cases) or the constructor.

Please update the following components: %s`,z),Xd[z]=!0)}C.componentWillMount()}typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),j!==C.state&&(i("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",pi(w)||"Component"),Au.enqueueReplaceState(C,C.state,null))}function ef(w,C,j,z){if(w.queue!==null&&w.queue.length>0){var Q=w.queue,le=w.replace;if(w.queue=null,w.replace=!1,le&&Q.length===1)C.state=Q[0];else{for(var ge=le?Q[0]:C.state,Pe=!0,ze=le?1:0;ze<Q.length;ze++){var mt=Q[ze],Et=typeof mt=="function"?mt.call(C,ge,j,z):mt;Et!=null&&(Pe?(Pe=!1,ge=as({},ge,Et)):as(ge,Et))}C.state=ge}}else w.queue=null}function Bl(w,C,j,z){tl(w,C,j);var Q=w.state!==void 0?w.state:null;w.updater=Au,w.props=j,w.state=Q;var le={queue:[],replace:!1};Ux(w,le);var ge=C.contextType;if(typeof ge=="object"&&ge!==null?w.context=yo(ge):w.context=z,w.state===j){var Pe=pi(C)||"Component";_n.has(Pe)||(_n.add(Pe),i("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",Pe))}var ze=C.getDerivedStateFromProps;typeof ze=="function"&&(w.state=Ym(w,C,ze,Q,j)),typeof C.getDerivedStateFromProps!="function"&&typeof w.getSnapshotBeforeUpdate!="function"&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(Ru(C,w),ef(le,w,j,z))}var Ul={id:1,overflow:""};function Mc(w){var C=w.overflow,j=w.id,z=j&~Jm(j);return z.toString(32)+C}function yh(w,C,j){var z=w.id,Q=w.overflow,le=bh(z)-1,ge=z&~(1<<le),Pe=j+1,ze=bh(C)+le;if(ze>30){var mt=le-le%5,Et=(1<<mt)-1,Vt=(ge&Et).toString(32),Wn=ge>>mt,Or=le-mt,bi=bh(C)+Or,No=Pe<<Or,Ns=No|Wn,_o=Vt+Q;return{id:1<<bi|Ns,overflow:_o}}else{var aa=Pe<<le,df=aa|ge,rr=Q;return{id:1<<ze|df,overflow:rr}}}function bh(w){return 32-ja(w)}function Jm(w){return 1<<bh(w)-1}var ja=Math.clz32?Math.clz32:dv,wh=Math.log,xh=Math.LN2;function dv(w){var C=w>>>0;return C===0?32:31-(wh(C)/xh|0)|0}function Vc(w,C){return w===C&&(w!==0||1/w===1/C)||w!==w&&C!==C}var fv=typeof Object.is=="function"?Object.is:Vc,Sa=null,Sh=null,tf=null,Yr=null,da=!1,bo=!1,Ia=0,Tr=null,ss=0,Eh=25,os=!1,xs;function nl(){if(Sa===null)throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`);return os&&i("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks"),Sa}function bb(w,C){if(C===null)return i("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",xs),!1;w.length!==C.length&&i(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,xs,"["+w.join(", ")+"]","["+C.join(", ")+"]");for(var j=0;j<C.length&&j<w.length;j++)if(!fv(w[j],C[j]))return!1;return!0}function Js(){if(ss>0)throw new Error("Rendered more hooks than during the previous render");return{memoizedState:null,queue:null,next:null}}function Wl(){return Yr===null?tf===null?(da=!1,tf=Yr=Js()):(da=!0,Yr=tf):Yr.next===null?(da=!1,Yr=Yr.next=Js()):(da=!0,Yr=Yr.next),Yr}function Ou(w,C){Sa=C,Sh=w,os=!1,Ia=0}function Wx(w,C,j,z){for(;bo;)bo=!1,Ia=0,ss+=1,Yr=null,j=w(C,z);return nf(),j}function qm(){var w=Ia!==0;return w}function nf(){os=!1,Sa=null,Sh=null,bo=!1,tf=null,ss=0,Tr=null,Yr=null}function zx(w){return os&&i("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo()."),yo(w)}function Hx(w){return xs="useContext",nl(),yo(w)}function Xm(w,C){return typeof C=="function"?C(w):C}function $i(w){return xs="useState",wb(Xm,w)}function wb(w,C,j){if(w!==Xm&&(xs="useReducer"),Sa=nl(),Yr=Wl(),da){var z=Yr.queue,Q=z.dispatch;if(Tr!==null){var le=Tr.get(z);if(le!==void 0){Tr.delete(z);var ge=Yr.memoizedState,Pe=le;do{var ze=Pe.action;os=!0,ge=w(ge,ze),os=!1,Pe=Pe.next}while(Pe!==null);return Yr.memoizedState=ge,[ge,Q]}}return[Yr.memoizedState,Q]}else{os=!0;var mt;w===Xm?mt=typeof C=="function"?C():C:mt=j!==void 0?j(C):C,os=!1,Yr.memoizedState=mt;var Et=Yr.queue={last:null,dispatch:null},Vt=Et.dispatch=xb.bind(null,Sa,Et);return[Yr.memoizedState,Vt]}}function Nh(w,C){Sa=nl(),Yr=Wl();var j=C===void 0?null:C;if(Yr!==null){var z=Yr.memoizedState;if(z!==null&&j!==null){var Q=z[1];if(bb(j,Q))return z[0]}}os=!0;var le=w();return os=!1,Yr.memoizedState=[le,j],le}function _h(w){Sa=nl(),Yr=Wl();var C=Yr.memoizedState;if(C===null){var j={current:w};return Object.seal(j),Yr.memoizedState=j,j}else return C}function $c(w,C){xs="useLayoutEffect",i("useLayoutEffect does nothing on the server, because its effect cannot be encoded into the server renderer's output format. This will lead to a mismatch between the initial, non-hydrated UI and the intended UI. To avoid this, useLayoutEffect should only be used in components that render exclusively on the client. See https://reactjs.org/link/uselayouteffect-ssr for common fixes.")}function xb(w,C,j){if(ss>=Eh)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");if(w===Sa){bo=!0;var z={action:j,next:null};Tr===null&&(Tr=new Map);var Q=Tr.get(C);if(Q===void 0)Tr.set(C,z);else{for(var le=Q;le.next!==null;)le=le.next;le.next=z}}}function Zm(w,C){return Nh(function(){return w},C)}function Gx(w,C,j){return nl(),C(w._source)}function Kx(w,C,j){if(j===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");return j()}function rf(w){return nl(),w}function Ea(){throw new Error("startTransition cannot be called during server rendering.")}function Ht(){return nl(),[!1,Ea]}function rl(){var w=Sh,C=Mc(w.treeContext),j=hv;if(j===null)throw new Error("Invalid hook call. Hooks can only be called inside of the body of a function component.");var z=Ia++;return gn(j,C,z)}function ls(){}var Sb={readContext:zx,useContext:Hx,useMemo:Nh,useReducer:wb,useRef:_h,useState:$i,useInsertionEffect:ls,useLayoutEffect:$c,useCallback:Zm,useImperativeHandle:ls,useEffect:ls,useDebugValue:ls,useDeferredValue:rf,useTransition:Ht,useId:rl,useMutableSource:Gx,useSyncExternalStore:Kx},hv=null;function Eb(w){hv=w}function Qm(w){try{var C="",j=w;do{switch(j.tag){case 0:C+=uh(j.type,null,null);break;case 1:C+=Ac(j.type,null,null);break;case 2:C+=ch(j.type,null,null);break}j=j.parent}while(j);return C}catch(z){return`
Error generating stack: `+z.message+`
`+z.stack}}var ep=n.ReactCurrentDispatcher,Ei=n.ReactDebugCurrentFrame,tp=0,af=1,np=2,Ch=3,ju=4,wo=0,mv=1,Lc=2,Nb=12800;function Yx(w){return console.error(w),null}function sf(){}function of(w,C,j,z,Q,le,ge,Pe,ze){var mt=[],Et=new Set,Vt={destination:null,responseState:C,progressiveChunkSize:z===void 0?Nb:z,status:wo,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Et,pingedTasks:mt,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:Q===void 0?Yx:Q,onAllReady:sf,onShellReady:ge===void 0?sf:ge,onShellError:sf,onFatalError:sf},Wn=rp(Vt,0,null,j,!1,!1);Wn.parentFlushed=!0;var Or=Fc(Vt,w,null,Wn,Et,Yd,hh,Ul);return mt.push(Or),Vt}function _b(w,C){var j=w.pingedTasks;j.push(C),j.length===1&&s(function(){return $u(w)})}function Cb(w,C){return{id:hr,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:C,errorDigest:null}}function Fc(w,C,j,z,Q,le,ge,Pe){w.allPendingTasks++,j===null?w.pendingRootTasks++:j.pendingTasks++;var ze={node:C,ping:function(){return _b(w,ze)},blockedBoundary:j,blockedSegment:z,abortSet:Q,legacyContext:le,context:ge,treeContext:Pe};return ze.componentStack=null,Q.add(ze),ze}function rp(w,C,j,z,Q,le){return{status:tp,id:-1,index:C,parentFlushed:!1,chunks:[],children:[],formatContext:z,boundary:j,lastPushedText:Q,textEmbedded:le}}var zl=null;function pv(){return zl===null||zl.componentStack===null?"":Qm(zl.componentStack)}function Bc(w,C){w.componentStack={tag:0,parent:w.componentStack,type:C}}function Th(w,C){w.componentStack={tag:1,parent:w.componentStack,type:C}}function il(w,C){w.componentStack={tag:2,parent:w.componentStack,type:C}}function al(w){w.componentStack===null?i("Unexpectedly popped too many stack frames. This is a bug in React."):w.componentStack=w.componentStack.parent}var sl=null;function ip(w,C){{var j;typeof C=="string"?j=C:C&&typeof C.message=="string"?j=C.message:j=String(C);var z=sl||pv();sl=null,w.errorMessage=j,w.errorComponentStack=z}}function Dh(w,C){var j=w.onError(C);if(j!=null&&typeof j!="string")throw new Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof j+'" instead');return j}function Ss(w,C){var j=w.onShellError;j(C);var z=w.onFatalError;z(C),w.destination!==null?(w.status=Lc,v(w.destination,C)):(w.status=mv,w.fatalError=C)}function bn(w,C,j){Bc(C,"Suspense");var z=C.blockedBoundary,Q=C.blockedSegment,le=j.fallback,ge=j.children,Pe=new Set,ze=Cb(w,Pe),mt=Q.chunks.length,Et=rp(w,mt,ze,Q.formatContext,!1,!1);Q.children.push(Et),Q.lastPushedText=!1;var Vt=rp(w,0,null,Q.formatContext,!1,!1);Vt.parentFlushed=!0,C.blockedBoundary=ze,C.blockedSegment=Vt;try{if(fa(w,C,ge),Lm(Vt.chunks,w.responseState,Vt.lastPushedText,Vt.textEmbedded),Vt.status=af,Vu(ze,Vt),ze.pendingTasks===0){al(C);return}}catch(Or){Vt.status=ju,ze.forceClientRender=!0,ze.errorDigest=Dh(w,Or),ip(ze,Or)}finally{C.blockedBoundary=z,C.blockedSegment=Q}var Wn=Fc(w,le,z,Et,Pe,C.legacyContext,C.context,C.treeContext);Wn.componentStack=C.componentStack,w.pingedTasks.push(Wn),al(C)}function sr(w,C,j,z){Bc(C,j);var Q=C.blockedSegment,le=Ld(Q.chunks,j,z,w.responseState,Q.formatContext);Q.lastPushedText=!1;var ge=Q.formatContext;Q.formatContext=cn(ge,j,z),fa(w,C,le),Q.formatContext=ge,eh(Q.chunks,j),Q.lastPushedText=!1,al(C)}function Er(w){return w.prototype&&w.prototype.isReactComponent}function ti(w,C,j,z,Q){var le={};Ou(C,le);var ge=j(z,Q);return Wx(j,z,ge,Q)}function xo(w,C,j,z,Q){var le=j.render();j.props!==Q&&(bt||i("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",pi(z)||"a component"),bt=!0);{var ge=z.childContextTypes;if(ge!=null){var Pe=C.legacyContext,ze=Hm(j,z,Pe,ge);C.legacyContext=ze,Ma(w,C,le),C.legacyContext=Pe;return}}Ma(w,C,le)}function Tb(w,C,j,z){il(C,j);var Q=Jd(j,C.legacyContext),le=Sr(j,z,Q);Bl(le,j,z,Q),xo(w,C,le,j,z),al(C)}var Db={},kh={},gv={},ap={},bt=!1,Ni={},Ln=!1,Iu=!1,So=!1;function Mu(w,C,j,z){var Q;if(Q=Jd(j,C.legacyContext),Th(C,j),j.prototype&&typeof j.prototype.render=="function"){var le=pi(j)||"Unknown";Db[le]||(i("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",le,le),Db[le]=!0)}var ge=ti(w,C,j,z,Q),Pe=qm();if(typeof ge=="object"&&ge!==null&&typeof ge.render=="function"&&ge.$$typeof===void 0){var ze=pi(j)||"Unknown";kh[ze]||(i("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",ze,ze,ze),kh[ze]=!0)}if(typeof ge=="object"&&ge!==null&&typeof ge.render=="function"&&ge.$$typeof===void 0){{var mt=pi(j)||"Unknown";kh[mt]||(i("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",mt,mt,mt),kh[mt]=!0)}Bl(ge,j,z,Q),xo(w,C,ge,j,z)}else if(Eo(j),Pe){var Et=C.treeContext,Vt=1,Wn=0;C.treeContext=yh(Et,Vt,Wn);try{Ma(w,C,ge)}finally{C.treeContext=Et}}else Ma(w,C,ge);al(C)}function Eo(w){{if(w&&w.childContextTypes&&i("%s(...): childContextTypes cannot be defined on a function component.",w.displayName||w.name||"Component"),w.defaultProps!==void 0){var C=pi(w)||"Unknown";Ni[C]||(i("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",C),Ni[C]=!0)}if(typeof w.getDerivedStateFromProps=="function"){var j=pi(w)||"Unknown";ap[j]||(i("%s: Function components do not support getDerivedStateFromProps.",j),ap[j]=!0)}if(typeof w.contextType=="object"&&w.contextType!==null){var z=pi(w)||"Unknown";gv[z]||(i("%s: Function components do not support contextType.",z),gv[z]=!0)}}}function Uc(w,C){if(w&&w.defaultProps){var j=as({},C),z=w.defaultProps;for(var Q in z)j[Q]===void 0&&(j[Q]=z[Q]);return j}return C}function Wc(w,C,j,z,Q){Th(C,j.render);var le=ti(w,C,j.render,z,Q),ge=qm();if(ge){var Pe=C.treeContext,ze=1,mt=0;C.treeContext=yh(Pe,ze,mt);try{Ma(w,C,le)}finally{C.treeContext=Pe}}else Ma(w,C,le);al(C)}function Ph(w,C,j,z,Q){var le=j.type,ge=Uc(le,z);Ah(w,C,le,ge,Q)}function vv(w,C,j,z){j._context===void 0?j!==j.Consumer&&(So||(So=!0,i("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):j=j._context;var Q=z.children;typeof Q!="function"&&i("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it.");var le=yo(j),ge=Q(le);Ma(w,C,ge)}function sp(w,C,j,z){var Q=j._context,le=z.value,ge=z.children,Pe;Pe=C.context,C.context=yb(Q,le),Ma(w,C,ge),C.context=Ic(Q),Pe!==C.context&&i("Popping the context provider did not return back to the original snapshot. This is a bug in React.")}function yv(w,C,j,z,Q){Bc(C,"Lazy");var le=j._payload,ge=j._init,Pe=ge(le),ze=Uc(Pe,z);Ah(w,C,Pe,ze,Q),al(C)}function Ah(w,C,j,z,Q){if(typeof j=="function")if(Er(j)){Tb(w,C,j,z);return}else{Mu(w,C,j,z);return}if(typeof j=="string"){sr(w,C,j,z);return}switch(j){case Wd:case Ll:case ws:case pb:case Fm:{Ma(w,C,z.children);return}case ah:{Bc(C,"SuspenseList"),Ma(w,C,z.children),al(C);return}case oh:throw new Error("ReactDOMServer does not yet support scope components.");case Um:{bn(w,C,z);return}}if(typeof j=="object"&&j!==null)switch(j.$$typeof){case ih:{Wc(w,C,j,z,Q);return}case sh:{Ph(w,C,j,z,Q);return}case rh:{sp(w,C,j,z);return}case Bm:{vv(w,C,j,z);return}case Ud:{yv(w,C,j,z);return}}var le="";throw(j===void 0||typeof j=="object"&&j!==null&&Object.keys(j).length===0)&&(le+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(j==null?j:typeof j)+"."+le))}function bv(w,C){typeof Symbol=="function"&&w[Symbol.toStringTag]==="Generator"&&(Ln||i("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),Ln=!0),w.entries===C&&(Iu||i("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Iu=!0)}function Ma(w,C,j){try{return wv(w,C,j)}catch(z){throw typeof z=="object"&&z!==null&&typeof z.then=="function"||(sl=sl!==null?sl:pv()),z}}function wv(w,C,j){if(C.node=j,typeof j=="object"&&j!==null){switch(j.$$typeof){case $x:{var z=j,Q=z.type,le=z.props,ge=z.ref;Ah(w,C,Q,le,ge);return}case mb:throw new Error("Portals are not currently supported by the server renderer. Render them conditionally so that they only appear on the client render.");case Ud:{var Pe=j,ze=Pe._payload,mt=Pe._init,Et;try{Et=mt(ze)}catch(aa){throw typeof aa=="object"&&aa!==null&&typeof aa.then=="function"&&Bc(C,"Lazy"),aa}Ma(w,C,Et);return}}if(ne(j)){lf(w,C,j);return}var Vt=Fx(j);if(Vt){bv(j,Vt);var Wn=Vt.call(j);if(Wn){var Or=Wn.next();if(!Or.done){var bi=[];do bi.push(Or.value),Or=Wn.next();while(!Or.done);lf(w,C,bi);return}return}}var No=Object.prototype.toString.call(j);throw new Error("Objects are not valid as a React child (found: "+(No==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":No)+"). If you meant to render a collection of children, use an array instead.")}if(typeof j=="string"){var Ns=C.blockedSegment;Ns.lastPushedText=Cc(C.blockedSegment.chunks,j,w.responseState,Ns.lastPushedText);return}if(typeof j=="number"){var _o=C.blockedSegment;_o.lastPushedText=Cc(C.blockedSegment.chunks,""+j,w.responseState,_o.lastPushedText);return}typeof j=="function"&&i("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}function lf(w,C,j){for(var z=j.length,Q=0;Q<z;Q++){var le=C.treeContext;C.treeContext=yh(le,z,Q);try{fa(w,C,j[Q])}finally{C.treeContext=le}}}function xv(w,C,j){var z=C.blockedSegment,Q=z.chunks.length,le=rp(w,Q,null,z.formatContext,z.lastPushedText,!0);z.children.push(le),z.lastPushedText=!1;var ge=Fc(w,C.node,C.blockedBoundary,le,C.abortSet,C.legacyContext,C.context,C.treeContext);C.componentStack!==null&&(ge.componentStack=C.componentStack.parent);var Pe=ge.ping;j.then(Pe,Pe)}function fa(w,C,j){var z=C.blockedSegment.formatContext,Q=C.legacyContext,le=C.context,ge=null;ge=C.componentStack;try{return Ma(w,C,j)}catch(Pe){if(nf(),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"){xv(w,C,Pe),C.blockedSegment.formatContext=z,C.legacyContext=Q,C.context=le,jc(le),C.componentStack=ge;return}else throw C.blockedSegment.formatContext=z,C.legacyContext=Q,C.context=le,jc(le),C.componentStack=ge,Pe}}function Sv(w,C,j,z){var Q=Dh(w,z);if(C===null?Ss(w,z):(C.pendingTasks--,C.forceClientRender||(C.forceClientRender=!0,C.errorDigest=Q,ip(C,z),C.parentFlushed&&w.clientRenderedBoundaries.push(C))),w.allPendingTasks--,w.allPendingTasks===0){var le=w.onAllReady;le()}}function op(w){var C=this,j=w.blockedBoundary,z=w.blockedSegment;z.status=Ch,up(C,j,z)}function lp(w,C,j){var z=w.blockedBoundary,Q=w.blockedSegment;if(Q.status=Ch,z===null)C.allPendingTasks--,C.status!==Lc&&(C.status=Lc,C.destination!==null&&h(C.destination));else{if(z.pendingTasks--,!z.forceClientRender){z.forceClientRender=!0;var le=j===void 0?new Error("The render was aborted by the server without a reason."):j;z.errorDigest=C.onError(le);{var ge="The server did not finish this Suspense boundary: ";le&&typeof le.message=="string"?le=ge+le.message:le=ge+String(le);var Pe=zl;zl=w;try{ip(z,le)}finally{zl=Pe}}z.parentFlushed&&C.clientRenderedBoundaries.push(z)}if(z.fallbackAbortableTasks.forEach(function(mt){return lp(mt,C,j)}),z.fallbackAbortableTasks.clear(),C.allPendingTasks--,C.allPendingTasks===0){var ze=C.onAllReady;ze()}}}function Vu(w,C){if(C.chunks.length===0&&C.children.length===1&&C.children[0].boundary===null){var j=C.children[0];j.id=C.id,j.parentFlushed=!0,j.status===af&&Vu(w,j)}else{var z=w.completedSegments;z.push(C)}}function up(w,C,j){if(C===null){if(j.parentFlushed){if(w.completedRootSegment!==null)throw new Error("There can only be one root segment. This is a bug in React.");w.completedRootSegment=j}if(w.pendingRootTasks--,w.pendingRootTasks===0){w.onShellError=sf;var z=w.onShellReady;z()}}else if(C.pendingTasks--,!C.forceClientRender){if(C.pendingTasks===0)j.parentFlushed&&j.status===af&&Vu(C,j),C.parentFlushed&&w.completedBoundaries.push(C),C.fallbackAbortableTasks.forEach(op,w),C.fallbackAbortableTasks.clear();else if(j.parentFlushed&&j.status===af){Vu(C,j);var Q=C.completedSegments;Q.length===1&&C.parentFlushed&&w.partialBoundaries.push(C)}}if(w.allPendingTasks--,w.allPendingTasks===0){var le=w.onAllReady;le()}}function cp(w,C){var j=C.blockedSegment;if(j.status===tp){jc(C.context);var z=null;z=zl,zl=C;try{Ma(w,C,C.node),Lm(j.chunks,w.responseState,j.lastPushedText,j.textEmbedded),C.abortSet.delete(C),j.status=af,up(w,C.blockedBoundary,j)}catch(le){if(nf(),typeof le=="object"&&le!==null&&typeof le.then=="function"){var Q=C.ping;le.then(Q,Q)}else C.abortSet.delete(C),j.status=ju,Sv(w,C.blockedBoundary,j,le)}finally{zl=z}}}function $u(w){if(w.status!==Lc){var C=ph(),j=ep.current;ep.current=Sb;var z;z=Ei.getCurrentStack,Ei.getCurrentStack=pv;var Q=hv;Eb(w.responseState);try{var le=w.pingedTasks,ge;for(ge=0;ge<le.length;ge++){var Pe=le[ge];cp(w,Pe)}le.splice(0,ge),w.destination!==null&&Fu(w,w.destination)}catch(ze){Dh(w,ze),Ss(w,ze)}finally{Eb(Q),ep.current=j,Ei.getCurrentStack=z,j===Sb&&jc(C)}}}function Hl(w,C,j){switch(j.parentFlushed=!0,j.status){case tp:{var z=j.id=w.nextSegmentId++;return j.lastPushedText=!1,j.textEmbedded=!1,rs(C,w.responseState,z)}case af:{j.status=np;for(var Q=!0,le=j.chunks,ge=0,Pe=j.children,ze=0;ze<Pe.length;ze++){for(var mt=Pe[ze];ge<mt.index;ge++)l(C,le[ge]);Q=zc(w,C,mt)}for(;ge<le.length-1;ge++)l(C,le[ge]);return ge<le.length&&(Q=c(C,le[ge])),Q}default:throw new Error("Aborted, errored or already flushed boundaries should not be flushed again. This is a bug in React.")}}function zc(w,C,j){var z=j.boundary;if(z===null)return Hl(w,C,j);if(z.parentFlushed=!0,z.forceClientRender)return hb(C,w.responseState,z.errorDigest,z.errorMessage,z.errorComponentStack),Hl(w,C,j),Vx(C,w.responseState);if(z.pendingTasks>0){z.rootSegmentID=w.nextSegmentId++,z.completedSegments.length>0&&w.partialBoundaries.push(z);var Q=z.id=Dn(w.responseState);return xt(C,w.responseState,Q),Hl(w,C,j),zt(C,w.responseState)}else{if(z.byteSize>w.progressiveChunkSize)return z.rootSegmentID=w.nextSegmentId++,w.completedBoundaries.push(z),xt(C,w.responseState,z.id),Hl(w,C,j),zt(C,w.responseState);fb(C,w.responseState);var le=z.completedSegments;if(le.length!==1)throw new Error("A previously unvisited boundary must have exactly one root segment. This is a bug in React.");var ge=le[0];return zc(w,C,ge),Mx(C,w.responseState)}}function Ev(w,C,j){return cb(C,w.responseState,j.id,j.errorDigest,j.errorMessage,j.errorComponentStack)}function Rh(w,C,j){return Kg(C,w.responseState,j.formatContext,j.id),zc(w,C,j),Yg(C,j.formatContext)}function uf(w,C,j){for(var z=j.completedSegments,Q=0;Q<z.length;Q++){var le=z[Q];Nv(w,C,j,le)}return z.length=0,Px(C,w.responseState,j.id,j.rootSegmentID)}function Lu(w,C,j){for(var z=j.completedSegments,Q=0;Q<z.length;Q++){var le=z[Q];if(!Nv(w,C,j,le))return Q++,z.splice(0,Q),!1}return z.splice(0,Q),!0}function Nv(w,C,j,z){if(z.status===np)return!0;var Q=z.id;if(Q===-1){var le=z.id=j.rootSegmentID;if(le===-1)throw new Error("A root segment ID must have been assigned by now. This is a bug in React.");return Rh(w,C,z)}else return Rh(w,C,z),$l(C,w.responseState,Q)}function Fu(w,C){try{var j=w.completedRootSegment;j!==null&&w.pendingRootTasks===0&&(zc(w,C,j),w.completedRootSegment=null,ca(C,w.responseState));var z=w.clientRenderedBoundaries,Q;for(Q=0;Q<z.length;Q++){var le=z[Q];if(!Ev(w,C,le)){w.destination=null,Q++,z.splice(0,Q);return}}z.splice(0,Q);var ge=w.completedBoundaries;for(Q=0;Q<ge.length;Q++){var Pe=ge[Q];if(!uf(w,C,Pe)){w.destination=null,Q++,ge.splice(0,Q);return}}ge.splice(0,Q);var ze=w.partialBoundaries;for(Q=0;Q<ze.length;Q++){var mt=ze[Q];if(!Lu(w,C,mt)){w.destination=null,Q++,ze.splice(0,Q);return}}ze.splice(0,Q);var Et=w.completedBoundaries;for(Q=0;Q<Et.length;Q++){var Vt=Et[Q];if(!uf(w,C,Vt)){w.destination=null,Q++,Et.splice(0,Q);return}}Et.splice(0,Q)}finally{w.allPendingTasks===0&&w.pingedTasks.length===0&&w.clientRenderedBoundaries.length===0&&w.completedBoundaries.length===0&&(w.abortableTasks.size!==0&&i("There was still abortable task at the root when we closed. This is a bug in React."),h(C))}}function Bu(w){s(function(){return $u(w)})}function Es(w,C){if(w.status===mv){w.status=Lc,v(C,w.fatalError);return}if(w.status!==Lc&&w.destination===null){w.destination=C;try{Fu(w,C)}catch(j){Dh(w,j),Ss(w,j)}}}function kb(w,C){try{var j=w.abortableTasks;j.forEach(function(z){return lp(z,w,C)}),j.clear(),w.destination!==null&&Fu(w,w.destination)}catch(z){Dh(w,z),Ss(w,z)}}function Jr(){}function Oh(w,C,j,z){var Q=!1,le=null,ge="",Pe={push:function(Vt){return Vt!==null&&(ge+=Vt),!0},destroy:function(Vt){Q=!0,le=Vt}},ze=!1;function mt(){ze=!0}var Et=of(w,Ix(j,C?C.identifierPrefix:void 0),db(),1/0,Jr,void 0,mt);if(Bu(Et),kb(Et,z),Es(Et,Pe),Q)throw le;if(!ze)throw new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");return ge}function dp(w,C){return Oh(w,C,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')}function cf(w,C){return Oh(w,C,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')}function fp(){throw new Error("ReactDOMServer.renderToNodeStream(): The streaming API is not available in the browser. Use ReactDOMServer.renderToString() instead.")}function M(){throw new Error("ReactDOMServer.renderToStaticNodeStream(): The streaming API is not available in the browser. Use ReactDOMServer.renderToStaticMarkup() instead.")}J0.renderToNodeStream=fp,J0.renderToStaticMarkup=cf,J0.renderToStaticNodeStream=M,J0.renderToString=dp,J0.version=e})();var B5={};/**
 * @license React
 * react-dom-server.browser.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=R,e="18.3.1",n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(M){{for(var w=arguments.length,C=new Array(w>1?w-1:0),j=1;j<w;j++)C[j-1]=arguments[j];a("warn",M,C)}}function i(M){{for(var w=arguments.length,C=new Array(w>1?w-1:0),j=1;j<w;j++)C[j-1]=arguments[j];a("error",M,C)}}function a(M,w,C){{var j=n.ReactDebugCurrentFrame,z=j.getStackAddendum();z!==""&&(w+="%s",C=C.concat([z]));var Q=C.map(function(le){return String(le)});Q.unshift("Warning: "+w),Function.prototype.apply.call(console[M],console,Q)}}function s(M){M()}var o=512,l=null,c=0;function f(M){l=new Uint8Array(o),c=0}function h(M,w){if(w.length!==0){if(w.length>o){c>0&&(M.enqueue(new Uint8Array(l.buffer,0,c)),l=new Uint8Array(o),c=0),M.enqueue(w);return}var C=w,j=l.length-c;j<C.length&&(j===0?M.enqueue(l):(l.set(C.subarray(0,j),c),M.enqueue(l),C=C.subarray(j)),l=new Uint8Array(o),c=0),l.set(C,c),c+=C.length}}function m(M,w){return h(M,w),!0}function p(M){l&&c>0&&(M.enqueue(new Uint8Array(l.buffer,0,c)),l=null,c=0)}function v(M){M.close()}var y=new TextEncoder;function x(M){return y.encode(M)}function S(M){return y.encode(M)}function _(M,w){typeof M.error=="function"?M.error(w):M.close()}function N(M){{var w=typeof Symbol=="function"&&Symbol.toStringTag,C=w&&M[Symbol.toStringTag]||M.constructor.name||"Object";return C}}function k(M){try{return P(M),!1}catch{return!0}}function P(M){return""+M}function O(M,w){if(k(M))return i("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",w,N(M)),P(M)}function A(M,w){if(k(M))return i("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",w,N(M)),P(M)}function T(M){if(k(M))return i("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",N(M)),P(M)}var L=Object.prototype.hasOwnProperty,B=0,W=1,Y=2,V=3,I=4,H=5,q=6,F=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",J=F+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Z=new RegExp("^["+F+"]["+J+"]*$"),G={},oe={};function ae(M){return L.call(oe,M)?!0:L.call(G,M)?!1:Z.test(M)?(oe[M]=!0,!0):(G[M]=!0,i("Invalid attribute name: `%s`",M),!1)}function te(M,w,C,j){if(C!==null&&C.type===B)return!1;switch(typeof w){case"function":case"symbol":return!0;case"boolean":{if(C!==null)return!C.acceptsBooleans;var z=M.toLowerCase().slice(0,5);return z!=="data-"&&z!=="aria-"}default:return!1}}function re(M){return ce.hasOwnProperty(M)?ce[M]:null}function X(M,w,C,j,z,Q,le){this.acceptsBooleans=w===Y||w===V||w===I,this.attributeName=j,this.attributeNamespace=z,this.mustUseProperty=C,this.propertyName=M,this.type=w,this.sanitizeURL=Q,this.removeEmptyString=le}var ce={},he=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];he.forEach(function(M){ce[M]=new X(M,B,!1,M,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(M){var w=M[0],C=M[1];ce[w]=new X(w,W,!1,C,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(M){ce[M]=new X(M,Y,!1,M.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(M){ce[M]=new X(M,Y,!1,M,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(M){ce[M]=new X(M,V,!1,M.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(M){ce[M]=new X(M,V,!0,M,null,!1,!1)}),["capture","download"].forEach(function(M){ce[M]=new X(M,I,!1,M,null,!1,!1)}),["cols","rows","size","span"].forEach(function(M){ce[M]=new X(M,q,!1,M,null,!1,!1)}),["rowSpan","start"].forEach(function(M){ce[M]=new X(M,H,!1,M.toLowerCase(),null,!1,!1)});var ve=/[\-\:]([a-z])/g,Ne=function(M){return M[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(M){var w=M.replace(ve,Ne);ce[w]=new X(w,W,!1,M,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(M){var w=M.replace(ve,Ne);ce[w]=new X(w,W,!1,M,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(M){var w=M.replace(ve,Ne);ce[w]=new X(w,W,!1,M,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(M){ce[M]=new X(M,W,!1,M.toLowerCase(),null,!1,!1)});var ke="xlinkHref";ce[ke]=new X("xlinkHref",W,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(M){ce[M]=new X(M,W,!1,M.toLowerCase(),null,!0,!0)});var Te={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function ye(M,w){return M+w.charAt(0).toUpperCase()+w.substring(1)}var Ie=["Webkit","ms","Moz","O"];Object.keys(Te).forEach(function(M){Ie.forEach(function(w){Te[ye(w,M)]=Te[M]})});var Re={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function Ee(M,w){Re[w.type]||w.onChange||w.onInput||w.readOnly||w.disabled||w.value==null||i("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),w.onChange||w.readOnly||w.disabled||w.checked==null||i("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function $e(M,w){if(M.indexOf("-")===-1)return typeof w.is=="string";switch(M){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},gt={},Ye=new RegExp("^(aria)-["+J+"]*$"),yt=new RegExp("^(aria)[A-Z]["+J+"]*$");function _t(M,w){{if(L.call(gt,w)&&gt[w])return!0;if(yt.test(w)){var C="aria-"+w.slice(4).toLowerCase(),j=He.hasOwnProperty(C)?C:null;if(j==null)return i("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",w),gt[w]=!0,!0;if(w!==j)return i("Invalid ARIA attribute `%s`. Did you mean `%s`?",w,j),gt[w]=!0,!0}if(Ye.test(w)){var z=w.toLowerCase(),Q=He.hasOwnProperty(z)?z:null;if(Q==null)return gt[w]=!0,!1;if(w!==Q)return i("Unknown ARIA attribute `%s`. Did you mean `%s`?",w,Q),gt[w]=!0,!0}}return!0}function St(M,w){{var C=[];for(var j in w){var z=_t(M,j);z||C.push(j)}var Q=C.map(function(le){return"`"+le+"`"}).join(", ");C.length===1?i("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",Q,M):C.length>1&&i("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",Q,M)}}function Bt(M,w){$e(M,w)||St(M,w)}var Nt=!1;function Dt(M,w){{if(M!=="input"&&M!=="textarea"&&M!=="select")return;w!=null&&w.value===null&&!Nt&&(Nt=!0,M==="select"&&w.multiple?i("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",M):i("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",M))}}var Ae={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},je=function(){};{var tt={},Ot=/^on./,qe=/^on[^A-Z]/,ft=new RegExp("^(aria)-["+J+"]*$"),Wt=new RegExp("^(aria)[A-Z]["+J+"]*$");je=function(M,w,C,j){if(L.call(tt,w)&&tt[w])return!0;var z=w.toLowerCase();if(z==="onfocusin"||z==="onfocusout")return i("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),tt[w]=!0,!0;if(j!=null){var Q=j.registrationNameDependencies,le=j.possibleRegistrationNames;if(Q.hasOwnProperty(w))return!0;var ge=le.hasOwnProperty(z)?le[z]:null;if(ge!=null)return i("Invalid event handler property `%s`. Did you mean `%s`?",w,ge),tt[w]=!0,!0;if(Ot.test(w))return i("Unknown event handler property `%s`. It will be ignored.",w),tt[w]=!0,!0}else if(Ot.test(w))return qe.test(w)&&i("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",w),tt[w]=!0,!0;if(ft.test(w)||Wt.test(w))return!0;if(z==="innerhtml")return i("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),tt[w]=!0,!0;if(z==="aria")return i("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),tt[w]=!0,!0;if(z==="is"&&C!==null&&C!==void 0&&typeof C!="string")return i("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof C),tt[w]=!0,!0;if(typeof C=="number"&&isNaN(C))return i("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",w),tt[w]=!0,!0;var Pe=re(w),ze=Pe!==null&&Pe.type===B;if(Ae.hasOwnProperty(z)){var mt=Ae[z];if(mt!==w)return i("Invalid DOM property `%s`. Did you mean `%s`?",w,mt),tt[w]=!0,!0}else if(!ze&&w!==z)return i("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",w,z),tt[w]=!0,!0;return typeof C=="boolean"&&te(w,C,Pe)?(C?i('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',C,w,w,C,w):i('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',C,w,w,C,w,w,w),tt[w]=!0,!0):ze?!0:te(w,C,Pe)?(tt[w]=!0,!1):((C==="false"||C==="true")&&Pe!==null&&Pe.type===V&&(i("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",C,w,C==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',w,C),tt[w]=!0),!0)}}var an=function(M,w,C){{var j=[];for(var z in w){var Q=je(M,z,w[z],C);Q||j.push(z)}var le=j.map(function(ge){return"`"+ge+"`"}).join(", ");j.length===1?i("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",le,M):j.length>1&&i("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",le,M)}};function Un(M,w,C){$e(M,w)||an(M,w,C)}var pn=function(){};{var ln=/^(?:webkit|moz|o)[A-Z]/,Gt=/^-ms-/,Kt=/-(.)/g,Lt=/;\s*$/,In={},Tn={},Wr=!1,Mr=!1,Hr=function(M){return M.replace(Kt,function(w,C){return C.toUpperCase()})},Ii=function(M){In.hasOwnProperty(M)&&In[M]||(In[M]=!0,i("Unsupported style property %s. Did you mean %s?",M,Hr(M.replace(Gt,"ms-"))))},Wi=function(M){In.hasOwnProperty(M)&&In[M]||(In[M]=!0,i("Unsupported vendor-prefixed style property %s. Did you mean %s?",M,M.charAt(0).toUpperCase()+M.slice(1)))},Mi=function(M,w){Tn.hasOwnProperty(w)&&Tn[w]||(Tn[w]=!0,i(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,M,w.replace(Lt,"")))},zi=function(M,w){Wr||(Wr=!0,i("`NaN` is an invalid value for the `%s` css style property.",M))},xr=function(M,w){Mr||(Mr=!0,i("`Infinity` is an invalid value for the `%s` css style property.",M))};pn=function(M,w){M.indexOf("-")>-1?Ii(M):ln.test(M)?Wi(M):Lt.test(w)&&Mi(M,w),typeof w=="number"&&(isNaN(w)?zi(M,w):isFinite(w)||xr(M,w))}}var Vr=pn,$r=/["'&<>]/;function qt(M){T(M);var w=""+M,C=$r.exec(w);if(!C)return w;var j,z="",Q,le=0;for(Q=C.index;Q<w.length;Q++){switch(w.charCodeAt(Q)){case 34:j="&quot;";break;case 38:j="&amp;";break;case 39:j="&#x27;";break;case 60:j="&lt;";break;case 62:j="&gt;";break;default:continue}le!==Q&&(z+=w.substring(le,Q)),le=Q+1,z+=j}return le!==Q?z+w.substring(le,Q):z}function Zn(M){return typeof M=="boolean"||typeof M=="number"?""+M:qt(M)}var ea=/([A-Z])/g,ue=/^ms-/;function xe(M){return M.replace(ea,"-$1").toLowerCase().replace(ue,"-ms-")}var ne=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,_e=!1;function Be(M){!_e&&ne.test(M)&&(_e=!0,i("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(M)))}var Le=Array.isArray;function Ze(M){return Le(M)}var We=S("<script>"),wt=S("<\/script>"),ht=S('<script src="'),Pt=S('<script type="module" src="'),Ut=S('" async=""><\/script>');function Zt(M){return T(M),(""+M).replace(sn,cn)}var sn=/(<\/|<)(s)(cript)/gi,cn=function(M,w,C,j){return""+w+(C==="s"?"\\u0073":"\\u0053")+j};function hr(M,w,C,j,z){var Q=M===void 0?"":M,le=w===void 0?We:S('<script nonce="'+Zn(w)+'">'),ge=[];if(C!==void 0&&ge.push(le,x(Zt(C)),wt),j!==void 0)for(var Pe=0;Pe<j.length;Pe++)ge.push(ht,x(Zn(j[Pe])),Ut);if(z!==void 0)for(var ze=0;ze<z.length;ze++)ge.push(Pt,x(Zn(z[ze])),Ut);return{bootstrapChunks:ge,startInlineScript:le,placeholderPrefix:S(Q+"P:"),segmentPrefix:S(Q+"S:"),boundaryPrefix:Q+"B:",idPrefix:Q,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}var Dn=0,gn=1,Gr=2,xi=3,ta=4,si=5,oi=6,la=7;function li(M,w){return{insertionMode:M,selectedValue:w}}function xa(M){var w=M==="http://www.w3.org/2000/svg"?Gr:M==="http://www.w3.org/1998/Math/MathML"?xi:Dn;return li(w,null)}function Mn(M,w,C){switch(w){case"select":return li(gn,C.value!=null?C.value:C.defaultValue);case"svg":return li(Gr,null);case"math":return li(xi,null);case"foreignObject":return li(gn,null);case"table":return li(ta,null);case"thead":case"tbody":case"tfoot":return li(si,null);case"colgroup":return li(la,null);case"tr":return li(oi,null)}return M.insertionMode>=ta||M.insertionMode===Dn?li(gn,null):M}var Cr=null;function Lr(M){var w=M.nextSuspenseID++;return S(M.boundaryPrefix+w.toString(16))}function er(M,w,C){var j=M.idPrefix,z=":"+j+"R"+w;return C>0&&(z+="H"+C.toString(32)),z+":"}function ei(M){return Zn(M)}var Hi=S("<!-- -->");function Fr(M,w,C,j){return w===""?j:(j&&M.push(Hi),M.push(x(ei(w))),!0)}function Si(M,w,C,j){C&&j&&M.push(Hi)}var vs=new Map;function Qa(M){var w=vs.get(M);if(w!==void 0)return w;var C=S(Zn(xe(M)));return vs.set(M,C),C}var Hs=S(' style="'),Al=S(":"),Su=S(";");function Rl(M,w,C){if(typeof C!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");var j=!0;for(var z in C)if(L.call(C,z)){var Q=C[z];if(!(Q==null||typeof Q=="boolean"||Q==="")){var le=void 0,ge=void 0,Pe=z.indexOf("--")===0;Pe?(le=x(Zn(z)),A(Q,z),ge=x(Zn((""+Q).trim()))):(Vr(z,Q),le=Qa(z),typeof Q=="number"?Q!==0&&!L.call(Te,z)?ge=x(Q+"px"):ge=x(""+Q):(A(Q,z),ge=x(Zn((""+Q).trim())))),j?(j=!1,M.push(Hs,le,Al,ge)):M.push(Su,le,Al,ge)}}j||M.push(es)}var ys=S(" "),na=S('="'),es=S('"'),Go=S('=""');function $n(M,w,C,j){switch(C){case"style":{Rl(M,w,j);return}case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(C.length>2&&(C[0]==="o"||C[0]==="O")&&(C[1]==="n"||C[1]==="N"))){var z=re(C);if(z!==null){switch(typeof j){case"function":case"symbol":return;case"boolean":if(!z.acceptsBooleans)return}var Q=z.attributeName,le=x(Q);switch(z.type){case V:j&&M.push(ys,le,Go);return;case I:j===!0?M.push(ys,le,Go):j===!1||M.push(ys,le,na,x(Zn(j)),es);return;case H:isNaN(j)||M.push(ys,le,na,x(Zn(j)),es);break;case q:!isNaN(j)&&j>=1&&M.push(ys,le,na,x(Zn(j)),es);break;default:z.sanitizeURL&&(O(j,Q),j=""+j,Be(j)),M.push(ys,le,na,x(Zn(j)),es)}}else if(ae(C)){switch(typeof j){case"function":case"symbol":return;case"boolean":{var ge=C.toLowerCase().slice(0,5);if(ge!=="data-"&&ge!=="aria-")return}}M.push(ys,x(C),na,x(Zn(j)),es)}}}var Gs=S(">"),Gi=S("/>");function kn(M,w,C){if(w!=null){if(C!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof w!="object"||!("__html"in w))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.");var j=w.__html;j!=null&&(T(j),M.push(x(""+j)))}}var Ol=!1,ra=!1,Ko=!1,Ks=!1,$d=!1,mi=!1,Kr=!1;function Yo(M,w){{var C=M[w];if(C!=null){var j=Ze(C);M.multiple&&!j?i("The `%s` prop supplied to <select> must be an array if `multiple` is true.",w):!M.multiple&&j&&i("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.",w)}}}function ts(M,w,C){Ee("select",w),Yo(w,"value"),Yo(w,"defaultValue"),w.value!==void 0&&w.defaultValue!==void 0&&!Ko&&(i("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Ko=!0),M.push(Ki("select"));var j=null,z=null;for(var Q in w)if(L.call(w,Q)){var le=w[Q];if(le==null)continue;switch(Q){case"children":j=le;break;case"dangerouslySetInnerHTML":z=le;break;case"defaultValue":case"value":break;default:$n(M,C,Q,le);break}}return M.push(Gs),kn(M,z,j),j}function ia(M){var w="";return t.Children.forEach(M,function(C){C!=null&&(w+=C,!$d&&typeof C!="string"&&typeof C!="number"&&($d=!0,i("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}),w}var ua=S(' selected=""');function ns(M,w,C,j){var z=j.selectedValue;M.push(Ki("option"));var Q=null,le=null,ge=null,Pe=null;for(var ze in w)if(L.call(w,ze)){var mt=w[ze];if(mt==null)continue;switch(ze){case"children":Q=mt;break;case"selected":ge=mt,Kr||(i("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Kr=!0);break;case"dangerouslySetInnerHTML":Pe=mt;break;case"value":le=mt;default:$n(M,C,ze,mt);break}}if(z!=null){var Et;if(le!==null?(O(le,"value"),Et=""+le):(Pe!==null&&(mi||(mi=!0,i("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected."))),Et=ia(Q)),Ze(z))for(var Vt=0;Vt<z.length;Vt++){O(z[Vt],"value");var Wn=""+z[Vt];if(Wn===Et){M.push(ua);break}}else O(z,"select.value"),""+z===Et&&M.push(ua)}else ge&&M.push(ua);return M.push(Gs),kn(M,Pe,Q),Q}function Sc(M,w,C){Ee("input",w),w.checked!==void 0&&w.defaultChecked!==void 0&&!ra&&(i("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components","A component",w.type),ra=!0),w.value!==void 0&&w.defaultValue!==void 0&&!Ol&&(i("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components","A component",w.type),Ol=!0),M.push(Ki("input"));var j=null,z=null,Q=null,le=null;for(var ge in w)if(L.call(w,ge)){var Pe=w[ge];if(Pe==null)continue;switch(ge){case"children":case"dangerouslySetInnerHTML":throw new Error("input is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");case"defaultChecked":le=Pe;break;case"defaultValue":z=Pe;break;case"checked":Q=Pe;break;case"value":j=Pe;break;default:$n(M,C,ge,Pe);break}}return Q!==null?$n(M,C,"checked",Q):le!==null&&$n(M,C,"checked",le),j!==null?$n(M,C,"value",j):z!==null&&$n(M,C,"value",z),M.push(Gi),null}function Ld(M,w,C){Ee("textarea",w),w.value!==void 0&&w.defaultValue!==void 0&&!Ks&&(i("Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Ks=!0),M.push(Ki("textarea"));var j=null,z=null,Q=null;for(var le in w)if(L.call(w,le)){var ge=w[le];if(ge==null)continue;switch(le){case"children":Q=ge;break;case"value":j=ge;break;case"defaultValue":z=ge;break;case"dangerouslySetInnerHTML":throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");default:$n(M,C,le,ge);break}}if(j===null&&z!==null&&(j=z),M.push(Gs),Q!=null){if(i("Use the `defaultValue` or `value` props instead of setting children on <textarea>."),j!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(Ze(Q)){if(Q.length>1)throw new Error("<textarea> can only have at most one child.");T(Q[0]),j=""+Q[0]}T(Q),j=""+Q}return typeof j=="string"&&j[0]===`
`&&M.push(jl),j!==null&&(O(j,"value"),M.push(x(ei(""+j)))),null}function Eu(M,w,C,j){M.push(Ki(C));for(var z in w)if(L.call(w,z)){var Q=w[z];if(Q==null)continue;switch(z){case"children":case"dangerouslySetInnerHTML":throw new Error(C+" is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:$n(M,j,z,Q);break}}return M.push(Gi),null}function go(M,w,C){M.push(Ki("menuitem"));for(var j in w)if(L.call(w,j)){var z=w[j];if(z==null)continue;switch(j){case"children":case"dangerouslySetInnerHTML":throw new Error("menuitems cannot have `children` nor `dangerouslySetInnerHTML`.");default:$n(M,C,j,z);break}}return M.push(Gs),null}function eh(M,w,C){M.push(Ki("title"));var j=null;for(var z in w)if(L.call(w,z)){var Q=w[z];if(Q==null)continue;switch(z){case"children":j=Q;break;case"dangerouslySetInnerHTML":throw new Error("`dangerouslySetInnerHTML` does not make sense on <title>.");default:$n(M,C,z,Q);break}}M.push(Gs);{var le=Array.isArray(j)&&j.length<2?j[0]||null:j;Array.isArray(j)&&j.length>1?i("A title element received an array with more than 1 element as children. In browsers title Elements can only have Text Nodes as children. If the children being rendered output more than a single text node in aggregate the browser will display markup and comments as text in the title and hydration will likely fail and fall back to client rendering"):le!=null&&le.$$typeof!=null?i("A title element received a React element for children. In the browser title Elements can only have Text Nodes as children. If the children being rendered output more than a single text node in aggregate the browser will display markup and comments as text in the title and hydration will likely fail and fall back to client rendering"):le!=null&&typeof le!="string"&&typeof le!="number"&&i("A title element received a value that was not a string or number for children. In the browser title Elements can only have Text Nodes as children. If the children being rendered output more than a single text node in aggregate the browser will display markup and comments as text in the title and hydration will likely fail and fall back to client rendering")}return j}function ca(M,w,C,j){M.push(Ki(C));var z=null,Q=null;for(var le in w)if(L.call(w,le)){var ge=w[le];if(ge==null)continue;switch(le){case"children":z=ge;break;case"dangerouslySetInnerHTML":Q=ge;break;default:$n(M,j,le,ge);break}}return M.push(Gs),kn(M,Q,z),typeof z=="string"?(M.push(x(ei(z))),null):z}function Jo(M,w,C,j){M.push(Ki(C));var z=null,Q=null;for(var le in w)if(L.call(w,le)){var ge=w[le];if(ge==null)continue;switch(le){case"children":z=ge;break;case"dangerouslySetInnerHTML":Q=ge;break;case"style":Rl(M,j,ge);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:ae(le)&&typeof ge!="function"&&typeof ge!="symbol"&&M.push(ys,x(le),na,x(Zn(ge)),es);break}}return M.push(Gs),kn(M,Q,z),z}var jl=S(`
`);function rs(M,w,C,j){M.push(Ki(C));var z=null,Q=null;for(var le in w)if(L.call(w,le)){var ge=w[le];if(ge==null)continue;switch(le){case"children":z=ge;break;case"dangerouslySetInnerHTML":Q=ge;break;default:$n(M,j,le,ge);break}}if(M.push(Gs),Q!=null){if(z!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof Q!="object"||!("__html"in Q))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.");var Pe=Q.__html;Pe!=null&&(typeof Pe=="string"&&Pe.length>0&&Pe[0]===`
`?M.push(jl,x(Pe)):(T(Pe),M.push(x(""+Pe))))}return typeof z=="string"&&z[0]===`
`&&M.push(jl),z}var qo=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,vo=new Map;function Ki(M){var w=vo.get(M);if(w===void 0){if(!qo.test(M))throw new Error("Invalid tag: "+M);w=S("<"+M),vo.set(M,w)}return w}var Fd=S("<!DOCTYPE html>");function Nu(M,w,C,j,z){switch(Bt(w,C),Dt(w,C),Un(w,C,null),!C.suppressContentEditableWarning&&C.contentEditable&&C.children!=null&&i("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),z.insertionMode!==Gr&&z.insertionMode!==xi&&w.indexOf("-")===-1&&typeof C.is!="string"&&w.toLowerCase()!==w&&i("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",w),w){case"select":return ts(M,C,j);case"option":return ns(M,C,j,z);case"textarea":return Ld(M,C,j);case"input":return Sc(M,C,j);case"menuitem":return go(M,C,j);case"title":return eh(M,C,j);case"listing":case"pre":return rs(M,C,w,j);case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":return Eu(M,C,w,j);case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return ca(M,C,w,j);case"html":return z.insertionMode===Dn&&M.push(Fd),ca(M,C,w,j);default:return w.indexOf("-")===-1&&typeof C.is!="string"?ca(M,C,w,j):Jo(M,C,w,j)}}var Ec=S("</"),_u=S(">");function U(M,w,C){switch(w){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:M.push(Ec,x(w),_u)}}function ie(M,w){for(var C=w.bootstrapChunks,j=0;j<C.length-1;j++)h(M,C[j]);return j<C.length?m(M,C[j]):!0}var we=S('<template id="'),De=S('"></template>');function Ue(M,w,C){h(M,we),h(M,w.placeholderPrefix);var j=x(C.toString(16));return h(M,j),m(M,De)}var xt=S("<!--$-->"),st=S('<!--$?--><template id="'),Tt=S('"></template>'),zt=S("<!--$!-->"),hn=S("<!--/$-->"),Vn=S("<template"),Pn=S('"'),un=S(' data-dgst="'),Gn=S(' data-msg="'),ur=S(' data-stck="'),Ys=S("></template>");function Il(M,w){return m(M,xt)}function bs(M,w,C){if(h(M,st),C===null)throw new Error("An ID must have been assigned before we can complete the boundary.");return h(M,C),m(M,Tt)}function Nc(M,w,C,j,z){var Q;return Q=m(M,zt),h(M,Vn),C&&(h(M,un),h(M,x(Zn(C))),h(M,Pn)),j&&(h(M,Gn),h(M,x(Zn(j))),h(M,Pn)),z&&(h(M,ur),h(M,x(Zn(z))),h(M,Pn)),Q=m(M,Ys),Q}function Cu(M,w){return m(M,hn)}function Bd(M,w){return m(M,hn)}function _c(M,w){return m(M,hn)}var th=S('<div hidden id="'),ab=S('">'),Gg=S("</div>"),sb=S('<svg aria-hidden="true" style="display:none" id="'),ob=S('">'),lb=S("</svg>"),Cx=S('<math aria-hidden="true" style="display:none" id="'),Ml=S('">'),Tx=S("</math>"),Kg=S('<table hidden id="'),Yg=S('">'),Jg=S("</table>"),Dx=S('<table hidden><tbody id="'),Vm=S('">'),ub=S("</tbody></table>"),is=S('<table hidden><tr id="'),Vl=S('">'),Vi=S("</tr></table>"),$l=S('<table hidden><colgroup id="'),qg=S('">'),$m=S("</colgroup></table>");function kx(M,w,C,j){switch(C.insertionMode){case Dn:case gn:return h(M,th),h(M,w.segmentPrefix),h(M,x(j.toString(16))),m(M,ab);case Gr:return h(M,sb),h(M,w.segmentPrefix),h(M,x(j.toString(16))),m(M,ob);case xi:return h(M,Cx),h(M,w.segmentPrefix),h(M,x(j.toString(16))),m(M,Ml);case ta:return h(M,Kg),h(M,w.segmentPrefix),h(M,x(j.toString(16))),m(M,Yg);case si:return h(M,Dx),h(M,w.segmentPrefix),h(M,x(j.toString(16))),m(M,Vm);case oi:return h(M,is),h(M,w.segmentPrefix),h(M,x(j.toString(16))),m(M,Vl);case la:return h(M,$l),h(M,w.segmentPrefix),h(M,x(j.toString(16))),m(M,qg);default:throw new Error("Unknown insertion mode. This is a bug in React.")}}function nh(M,w){switch(w.insertionMode){case Dn:case gn:return m(M,Gg);case Gr:return m(M,lb);case xi:return m(M,Tx);case ta:return m(M,Jg);case si:return m(M,ub);case oi:return m(M,Vi);case la:return m(M,$m);default:throw new Error("Unknown insertion mode. This is a bug in React.")}}var Px="function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)}",Ax='function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}}',Xg='function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())}',Rx=S(Px+';$RS("'),Ox=S('$RS("'),Zg=S('","'),cb=S('")<\/script>');function jx(M,w,C){h(M,w.startInlineScript),w.sentCompleteSegmentFunction?h(M,Ox):(w.sentCompleteSegmentFunction=!0,h(M,Rx)),h(M,w.segmentPrefix);var j=x(C.toString(16));return h(M,j),h(M,Zg),h(M,w.placeholderPrefix),h(M,j),m(M,cb)}var Qg=S(Ax+';$RC("'),Ix=S('$RC("'),db=S('","'),Cc=S('")<\/script>');function Lm(M,w,C,j){if(h(M,w.startInlineScript),w.sentCompleteBoundaryFunction?h(M,Ix):(w.sentCompleteBoundaryFunction=!0,h(M,Qg)),C===null)throw new Error("An ID must have been assigned before we can complete the boundary.");var z=x(j.toString(16));return h(M,C),h(M,db),h(M,w.segmentPrefix),h(M,z),m(M,Cc)}var fb=S(Xg+';$RX("'),hb=S('$RX("'),Mx=S('"'),Vx=S(")<\/script>"),as=S(",");function $x(M,w,C,j,z,Q){if(h(M,w.startInlineScript),w.sentClientRenderFunction?h(M,hb):(w.sentClientRenderFunction=!0,h(M,fb)),C===null)throw new Error("An ID must have been assigned before we can complete the boundary.");return h(M,C),h(M,Mx),(j||z||Q)&&(h(M,as),h(M,x(Fm(j||"")))),(z||Q)&&(h(M,as),h(M,x(Fm(z||"")))),Q&&(h(M,as),h(M,x(Fm(Q)))),m(M,Vx)}var mb=/[<\u2028\u2029]/g;function Fm(M){var w=JSON.stringify(M);return w.replace(mb,function(C){switch(C){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var ws=Object.assign,pb=Symbol.for("react.element"),rh=Symbol.for("react.portal"),Bm=Symbol.for("react.fragment"),ih=Symbol.for("react.strict_mode"),Um=Symbol.for("react.profiler"),ah=Symbol.for("react.provider"),sh=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),oh=Symbol.for("react.suspense"),Ll=Symbol.for("react.suspense_list"),Wd=Symbol.for("react.memo"),lh=Symbol.for("react.lazy"),Tc=Symbol.for("react.scope"),Lx=Symbol.for("react.debug_trace_mode"),Fx=Symbol.for("react.legacy_hidden"),Bx=Symbol.for("react.default_value"),ev=Symbol.iterator,pi="@@iterator";function zd(M){if(M===null||typeof M!="object")return null;var w=ev&&M[ev]||M[pi];return typeof w=="function"?w:null}function gb(M,w,C){var j=M.displayName;if(j)return j;var z=w.displayName||w.name||"";return z!==""?C+"("+z+")":C}function Wm(M){return M.displayName||"Context"}function ar(M){if(M==null)return null;if(typeof M.tag=="number"&&i("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof M=="function")return M.displayName||M.name||null;if(typeof M=="string")return M;switch(M){case Bm:return"Fragment";case rh:return"Portal";case Um:return"Profiler";case ih:return"StrictMode";case oh:return"Suspense";case Ll:return"SuspenseList"}if(typeof M=="object")switch(M.$$typeof){case sh:var w=M;return Wm(w)+".Consumer";case ah:var C=M;return Wm(C._context)+".Provider";case Ud:return gb(M,M.render,"ForwardRef");case Wd:var j=M.displayName||null;return j!==null?j:ar(M.type)||"Memo";case lh:{var z=M,Q=z._payload,le=z._init;try{return ar(le(Q))}catch{return null}}}return null}var Dc=0,tv,nv,rv,iv,vb,av,Hd;function Tu(){}Tu.__reactDisabledLog=!0;function uh(){{if(Dc===0){tv=console.log,nv=console.info,rv=console.warn,iv=console.error,vb=console.group,av=console.groupCollapsed,Hd=console.groupEnd;var M={configurable:!0,enumerable:!0,value:Tu,writable:!0};Object.defineProperties(console,{info:M,log:M,warn:M,error:M,group:M,groupCollapsed:M,groupEnd:M})}Dc++}}function kc(){{if(Dc--,Dc===0){var M={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ws({},M,{value:tv}),info:ws({},M,{value:nv}),warn:ws({},M,{value:rv}),error:ws({},M,{value:iv}),group:ws({},M,{value:vb}),groupCollapsed:ws({},M,{value:av}),groupEnd:ws({},M,{value:Hd})})}Dc<0&&i("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Gd=n.ReactCurrentDispatcher,sv;function Pc(M,w,C){{if(sv===void 0)try{throw Error()}catch(z){var j=z.stack.trim().match(/\n( *(at )?)/);sv=j&&j[1]||""}return`
`+sv+M}}var ch=!1,Ac;{var Kd=typeof WeakMap=="function"?WeakMap:Map;Ac=new Kd}function Xo(M,w){if(!M||ch)return"";{var C=Ac.get(M);if(C!==void 0)return C}var j;ch=!0;var z=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Q;Q=Gd.current,Gd.current=null,uh();try{if(w){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Or){j=Or}Reflect.construct(M,[],le)}else{try{le.call()}catch(Or){j=Or}M.call(le.prototype)}}else{try{throw Error()}catch(Or){j=Or}M()}}catch(Or){if(Or&&j&&typeof Or.stack=="string"){for(var ge=Or.stack.split(`
`),Pe=j.stack.split(`
`),ze=ge.length-1,mt=Pe.length-1;ze>=1&&mt>=0&&ge[ze]!==Pe[mt];)mt--;for(;ze>=1&&mt>=0;ze--,mt--)if(ge[ze]!==Pe[mt]){if(ze!==1||mt!==1)do if(ze--,mt--,mt<0||ge[ze]!==Pe[mt]){var Et=`
`+ge[ze].replace(" at new "," at ");return M.displayName&&Et.includes("<anonymous>")&&(Et=Et.replace("<anonymous>",M.displayName)),typeof M=="function"&&Ac.set(M,Et),Et}while(ze>=1&&mt>=0);break}}}finally{ch=!1,Gd.current=Q,kc(),Error.prepareStackTrace=z}var Vt=M?M.displayName||M.name:"",Wn=Vt?Pc(Vt):"";return typeof M=="function"&&Ac.set(M,Wn),Wn}function ov(M,w,C){return Xo(M,!0)}function lv(M,w,C){return Xo(M,!1)}function dh(M){var w=M.prototype;return!!(w&&w.isReactComponent)}function zm(M,w,C){if(M==null)return"";if(typeof M=="function")return Xo(M,dh(M));if(typeof M=="string")return Pc(M);switch(M){case oh:return Pc("Suspense");case Ll:return Pc("SuspenseList")}if(typeof M=="object")switch(M.$$typeof){case Ud:return lv(M.render);case Wd:return zm(M.type,w,C);case lh:{var j=M,z=j._payload,Q=j._init;try{return zm(Q(z),w,C)}catch{}}}return""}var fh={},Yd=n.ReactDebugCurrentFrame;function Jd(M){if(M){var w=M._owner,C=zm(M.type,M._source,w?w.type:null);Yd.setExtraStackFrame(C)}else Yd.setExtraStackFrame(null)}function Hm(M,w,C,j,z){{var Q=Function.call.bind(L);for(var le in M)if(Q(M,le)){var ge=void 0;try{if(typeof M[le]!="function"){var Pe=Error((j||"React class")+": "+C+" type `"+le+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof M[le]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Pe.name="Invariant Violation",Pe}ge=M[le](w,le,j,C,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ze){ge=ze}ge&&!(ge instanceof Error)&&(Jd(z),i("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",j||"React class",C,le,typeof ge),Jd(null)),ge instanceof Error&&!(ge.message in fh)&&(fh[ge.message]=!0,Jd(z),i("Failed %s type: %s",C,ge.message),Jd(null))}}}var Rc;Rc={};var hh={};Object.freeze(hh);function Du(M,w){{var C=M.contextTypes;if(!C)return hh;var j={};for(var z in C)j[z]=w[z];{var Q=ar(M)||"Unknown";Hm(C,j,"context",Q)}return j}}function uv(M,w,C,j){{if(typeof M.getChildContext!="function"){{var z=ar(w)||"Unknown";Rc[z]||(Rc[z]=!0,i("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",z,z))}return C}var Q=M.getChildContext();for(var le in Q)if(!(le in j))throw new Error((ar(w)||"Unknown")+'.getChildContext(): key "'+le+'" is not defined in childContextTypes.');{var ge=ar(w)||"Unknown";Hm(j,Q,"child context",ge)}return ws({},C,Q)}}var Oc;Oc={};var ku=null,Zo=null;function Pu(M){M.context._currentValue=M.parentValue}function mh(M){M.context._currentValue=M.value}function qd(M,w){if(M!==w){Pu(M);var C=M.parent,j=w.parent;if(C===null){if(j!==null)throw new Error("The stacks must reach the root at the same time. This is a bug in React.")}else{if(j===null)throw new Error("The stacks must reach the root at the same time. This is a bug in React.");qd(C,j)}mh(w)}}function jc(M){Pu(M);var w=M.parent;w!==null&&jc(w)}function yb(M){var w=M.parent;w!==null&&yb(w),mh(M)}function Ic(M,w){Pu(M);var C=M.parent;if(C===null)throw new Error("The depth must equal at least at zero before reaching the root. This is a bug in React.");C.depth===w.depth?qd(C,w):Ic(C,w)}function ph(M,w){var C=w.parent;if(C===null)throw new Error("The depth must equal at least at zero before reaching the root. This is a bug in React.");M.depth===C.depth?qd(M,C):ph(M,C),mh(w)}function yo(M){var w=Zo,C=M;w!==C&&(w===null?yb(C):C===null?jc(w):w.depth===C.depth?qd(w,C):w.depth>C.depth?Ic(w,C):ph(w,C),Zo=C)}function gh(M,w){var C;C=M._currentValue,M._currentValue=w,M._currentRenderer!==void 0&&M._currentRenderer!==null&&M._currentRenderer!==Oc&&i("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),M._currentRenderer=Oc;var j=Zo,z={parent:j,depth:j===null?0:j.depth+1,context:M,parentValue:C,value:w};return Zo=z,z}function Ux(M){var w=Zo;if(w===null)throw new Error("Tried to pop a Context at the root of the app. This is a bug in React.");w.context!==M&&i("The parent context is not the expected context. This is probably a bug in React.");{var C=w.parentValue;C===Bx?w.context._currentValue=w.context._defaultValue:w.context._currentValue=C,M._currentRenderer!==void 0&&M._currentRenderer!==null&&M._currentRenderer!==Oc&&i("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),M._currentRenderer=Oc}return Zo=w.parent}function Gm(){return Zo}function Xd(M){var w=M._currentValue;return w}function vh(M){return M._reactInternals}function cv(M,w){M._reactInternals=w}var Zd={},Fl={},Km,Qd,_n,Qo,yi,mr,el,Au,Ym;{Km=new Set,Qd=new Set,_n=new Set,el=new Set,Qo=new Set,Au=new Set,Ym=new Set;var Sr=new Set;mr=function(M,w){if(!(M===null||typeof M=="function")){var C=w+"_"+M;Sr.has(C)||(Sr.add(C),i("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",w,M))}},yi=function(M,w){if(w===void 0){var C=ar(M)||"Component";Qo.has(C)||(Qo.add(C),i("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",C))}}}function tl(M,w){{var C=M.constructor,j=C&&ar(C)||"ReactClass",z=j+"."+w;if(Zd[z])return;i(`%s(...): Can only update a mounting component. This usually means you called %s() outside componentWillMount() on the server. This is a no-op.

Please check the code for the %s component.`,w,w,j),Zd[z]=!0}}var Ru={isMounted:function(M){return!1},enqueueSetState:function(M,w,C){var j=vh(M);j.queue===null?tl(M,"setState"):(j.queue.push(w),C!=null&&mr(C,"setState"))},enqueueReplaceState:function(M,w,C){var j=vh(M);j.replace=!0,j.queue=[w],C!=null&&mr(C,"setState")},enqueueForceUpdate:function(M,w){var C=vh(M);C.queue===null?tl(M,"forceUpdate"):w!=null&&mr(w,"setState")}};function ef(M,w,C,j,z){var Q=C(z,j);yi(w,Q);var le=Q==null?j:ws({},j,Q);return le}function Bl(M,w,C){var j=hh,z=M.contextType;if("contextType"in M){var Q=z===null||z!==void 0&&z.$$typeof===sh&&z._context===void 0;if(!Q&&!Ym.has(M)){Ym.add(M);var le="";z===void 0?le=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof z!="object"?le=" However, it is set to a "+typeof z+".":z.$$typeof===ah?le=" Did you accidentally pass the Context.Provider instead?":z._context!==void 0?le=" Did you accidentally pass the Context.Consumer instead?":le=" However, it is set to an object with keys {"+Object.keys(z).join(", ")+"}.",i("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",ar(M)||"Component",le)}}typeof z=="object"&&z!==null?j=Xd(z):j=C;var ge=new M(w,j);{if(typeof M.getDerivedStateFromProps=="function"&&(ge.state===null||ge.state===void 0)){var Pe=ar(M)||"Component";Km.has(Pe)||(Km.add(Pe),i("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",Pe,ge.state===null?"null":"undefined",Pe))}if(typeof M.getDerivedStateFromProps=="function"||typeof ge.getSnapshotBeforeUpdate=="function"){var ze=null,mt=null,Et=null;if(typeof ge.componentWillMount=="function"&&ge.componentWillMount.__suppressDeprecationWarning!==!0?ze="componentWillMount":typeof ge.UNSAFE_componentWillMount=="function"&&(ze="UNSAFE_componentWillMount"),typeof ge.componentWillReceiveProps=="function"&&ge.componentWillReceiveProps.__suppressDeprecationWarning!==!0?mt="componentWillReceiveProps":typeof ge.UNSAFE_componentWillReceiveProps=="function"&&(mt="UNSAFE_componentWillReceiveProps"),typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate.__suppressDeprecationWarning!==!0?Et="componentWillUpdate":typeof ge.UNSAFE_componentWillUpdate=="function"&&(Et="UNSAFE_componentWillUpdate"),ze!==null||mt!==null||Et!==null){var Vt=ar(M)||"Component",Wn=typeof M.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";_n.has(Vt)||(_n.add(Vt),i(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,Vt,Wn,ze!==null?`
  `+ze:"",mt!==null?`
  `+mt:"",Et!==null?`
  `+Et:""))}}}return ge}function Ul(M,w,C){{var j=ar(w)||"Component",z=M.render;z||(w.prototype&&typeof w.prototype.render=="function"?i("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",j):i("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",j)),M.getInitialState&&!M.getInitialState.isReactClassApproved&&!M.state&&i("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",j),M.getDefaultProps&&!M.getDefaultProps.isReactClassApproved&&i("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",j),M.propTypes&&i("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",j),M.contextType&&i("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",j),M.contextTypes&&i("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",j),w.contextType&&w.contextTypes&&!Au.has(w)&&(Au.add(w),i("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",j)),typeof M.componentShouldUpdate=="function"&&i("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",j),w.prototype&&w.prototype.isPureReactComponent&&typeof M.shouldComponentUpdate<"u"&&i("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",ar(w)||"A pure component"),typeof M.componentDidUnmount=="function"&&i("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",j),typeof M.componentDidReceiveProps=="function"&&i("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",j),typeof M.componentWillRecieveProps=="function"&&i("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",j),typeof M.UNSAFE_componentWillRecieveProps=="function"&&i("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",j);var Q=M.props!==C;M.props!==void 0&&Q&&i("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",j,j),M.defaultProps&&i("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",j,j),typeof M.getSnapshotBeforeUpdate=="function"&&typeof M.componentDidUpdate!="function"&&!Qd.has(w)&&(Qd.add(w),i("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",ar(w))),typeof M.getDerivedStateFromProps=="function"&&i("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",j),typeof M.getDerivedStateFromError=="function"&&i("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",j),typeof w.getSnapshotBeforeUpdate=="function"&&i("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",j);var le=M.state;le&&(typeof le!="object"||Ze(le))&&i("%s.state: must be set to an object or null",j),typeof M.getChildContext=="function"&&typeof w.childContextTypes!="object"&&i("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",j)}}function Mc(M,w){var C=w.state;if(typeof w.componentWillMount=="function"){if(w.componentWillMount.__suppressDeprecationWarning!==!0){var j=ar(M)||"Unknown";Fl[j]||(r(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code from componentWillMount to componentDidMount (preferred in most cases) or the constructor.

Please update the following components: %s`,j),Fl[j]=!0)}w.componentWillMount()}typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&(i("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",ar(M)||"Component"),Ru.enqueueReplaceState(w,w.state,null))}function yh(M,w,C,j){if(M.queue!==null&&M.queue.length>0){var z=M.queue,Q=M.replace;if(M.queue=null,M.replace=!1,Q&&z.length===1)w.state=z[0];else{for(var le=Q?z[0]:w.state,ge=!0,Pe=Q?1:0;Pe<z.length;Pe++){var ze=z[Pe],mt=typeof ze=="function"?ze.call(w,le,C,j):ze;mt!=null&&(ge?(ge=!1,le=ws({},le,mt)):ws(le,mt))}w.state=le}}else M.queue=null}function bh(M,w,C,j){Ul(M,w,C);var z=M.state!==void 0?M.state:null;M.updater=Ru,M.props=C,M.state=z;var Q={queue:[],replace:!1};cv(M,Q);var le=w.contextType;if(typeof le=="object"&&le!==null?M.context=Xd(le):M.context=j,M.state===C){var ge=ar(w)||"Component";el.has(ge)||(el.add(ge),i("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",ge))}var Pe=w.getDerivedStateFromProps;typeof Pe=="function"&&(M.state=ef(M,w,Pe,z,C)),typeof w.getDerivedStateFromProps!="function"&&typeof M.getSnapshotBeforeUpdate!="function"&&(typeof M.UNSAFE_componentWillMount=="function"||typeof M.componentWillMount=="function")&&(Mc(w,M),yh(Q,M,C,j))}var Jm={id:1,overflow:""};function ja(M){var w=M.overflow,C=M.id,j=C&~dv(C);return j.toString(32)+w}function wh(M,w,C){var j=M.id,z=M.overflow,Q=xh(j)-1,le=j&~(1<<Q),ge=C+1,Pe=xh(w)+Q;if(Pe>30){var ze=Q-Q%5,mt=(1<<ze)-1,Et=(le&mt).toString(32),Vt=le>>ze,Wn=Q-ze,Or=xh(w)+Wn,bi=ge<<Wn,No=bi|Vt,Ns=Et+z;return{id:1<<Or|No,overflow:Ns}}else{var _o=ge<<Q,aa=_o|le,df=z;return{id:1<<Pe|aa,overflow:df}}}function xh(M){return 32-Vc(M)}function dv(M){return 1<<xh(M)-1}var Vc=Math.clz32?Math.clz32:Sh,fv=Math.log,Sa=Math.LN2;function Sh(M){var w=M>>>0;return w===0?32:31-(fv(w)/Sa|0)|0}function tf(M,w){return M===w&&(M!==0||1/M===1/w)||M!==M&&w!==w}var Yr=typeof Object.is=="function"?Object.is:tf,da=null,bo=null,Ia=null,Tr=null,ss=!1,Eh=!1,os=0,xs=null,nl=0,bb=25,Js=!1,Wl;function Ou(){if(da===null)throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`);return Js&&i("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks"),da}function Wx(M,w){if(w===null)return i("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",Wl),!1;M.length!==w.length&&i(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,Wl,"["+M.join(", ")+"]","["+w.join(", ")+"]");for(var C=0;C<w.length&&C<M.length;C++)if(!Yr(M[C],w[C]))return!1;return!0}function qm(){if(nl>0)throw new Error("Rendered more hooks than during the previous render");return{memoizedState:null,queue:null,next:null}}function nf(){return Tr===null?Ia===null?(ss=!1,Ia=Tr=qm()):(ss=!0,Tr=Ia):Tr.next===null?(ss=!1,Tr=Tr.next=qm()):(ss=!0,Tr=Tr.next),Tr}function zx(M,w){da=w,bo=M,Js=!1,os=0}function Hx(M,w,C,j){for(;Eh;)Eh=!1,os=0,nl+=1,Tr=null,C=M(w,j);return $i(),C}function Xm(){var M=os!==0;return M}function $i(){Js=!1,da=null,bo=null,Eh=!1,Ia=null,nl=0,xs=null,Tr=null}function wb(M){return Js&&i("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo()."),Xd(M)}function Nh(M){return Wl="useContext",Ou(),Xd(M)}function _h(M,w){return typeof w=="function"?w(M):w}function $c(M){return Wl="useState",xb(_h,M)}function xb(M,w,C){if(M!==_h&&(Wl="useReducer"),da=Ou(),Tr=nf(),ss){var j=Tr.queue,z=j.dispatch;if(xs!==null){var Q=xs.get(j);if(Q!==void 0){xs.delete(j);var le=Tr.memoizedState,ge=Q;do{var Pe=ge.action;Js=!0,le=M(le,Pe),Js=!1,ge=ge.next}while(ge!==null);return Tr.memoizedState=le,[le,z]}}return[Tr.memoizedState,z]}else{Js=!0;var ze;M===_h?ze=typeof w=="function"?w():w:ze=C!==void 0?C(w):w,Js=!1,Tr.memoizedState=ze;var mt=Tr.queue={last:null,dispatch:null},Et=mt.dispatch=rf.bind(null,da,mt);return[Tr.memoizedState,Et]}}function Zm(M,w){da=Ou(),Tr=nf();var C=w===void 0?null:w;if(Tr!==null){var j=Tr.memoizedState;if(j!==null&&C!==null){var z=j[1];if(Wx(C,z))return j[0]}}Js=!0;var Q=M();return Js=!1,Tr.memoizedState=[Q,C],Q}function Gx(M){da=Ou(),Tr=nf();var w=Tr.memoizedState;if(w===null){var C={current:M};return Object.seal(C),Tr.memoizedState=C,C}else return w}function Kx(M,w){Wl="useLayoutEffect",i("useLayoutEffect does nothing on the server, because its effect cannot be encoded into the server renderer's output format. This will lead to a mismatch between the initial, non-hydrated UI and the intended UI. To avoid this, useLayoutEffect should only be used in components that render exclusively on the client. See https://reactjs.org/link/uselayouteffect-ssr for common fixes.")}function rf(M,w,C){if(nl>=bb)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");if(M===da){Eh=!0;var j={action:C,next:null};xs===null&&(xs=new Map);var z=xs.get(w);if(z===void 0)xs.set(w,j);else{for(var Q=z;Q.next!==null;)Q=Q.next;Q.next=j}}}function Ea(M,w){return Zm(function(){return M},w)}function Ht(M,w,C){return Ou(),w(M._source)}function rl(M,w,C){if(C===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");return C()}function ls(M){return Ou(),M}function Sb(){throw new Error("startTransition cannot be called during server rendering.")}function hv(){return Ou(),[!1,Sb]}function Eb(){var M=bo,w=ja(M.treeContext),C=Ei;if(C===null)throw new Error("Invalid hook call. Hooks can only be called inside of the body of a function component.");var j=os++;return er(C,w,j)}function Qm(){}var ep={readContext:wb,useContext:Nh,useMemo:Zm,useReducer:xb,useRef:Gx,useState:$c,useInsertionEffect:Qm,useLayoutEffect:Kx,useCallback:Ea,useImperativeHandle:Qm,useEffect:Qm,useDebugValue:Qm,useDeferredValue:ls,useTransition:hv,useId:Eb,useMutableSource:Ht,useSyncExternalStore:rl},Ei=null;function tp(M){Ei=M}function af(M){try{var w="",C=M;do{switch(C.tag){case 0:w+=Pc(C.type,null,null);break;case 1:w+=lv(C.type,null,null);break;case 2:w+=ov(C.type,null,null);break}C=C.parent}while(C);return w}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var np=n.ReactCurrentDispatcher,Ch=n.ReactDebugCurrentFrame,ju=0,wo=1,mv=2,Lc=3,Nb=4,Yx=0,sf=1,of=2,_b=12800;function Cb(M){return console.error(M),null}function Fc(){}function rp(M,w,C,j,z,Q,le,ge,Pe){var ze=[],mt=new Set,Et={destination:null,responseState:w,progressiveChunkSize:j===void 0?_b:j,status:Yx,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:mt,pingedTasks:ze,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:z===void 0?Cb:z,onAllReady:Q===void 0?Fc:Q,onShellReady:le===void 0?Fc:le,onShellError:ge===void 0?Fc:ge,onFatalError:Pe===void 0?Fc:Pe},Vt=Th(Et,0,null,C,!1,!1);Vt.parentFlushed=!0;var Wn=Bc(Et,M,null,Vt,mt,hh,ku,Jm);return ze.push(Wn),Et}function zl(M,w){var C=M.pingedTasks;C.push(w),C.length===1&&s(function(){return Rh(M)})}function pv(M,w){return{id:Cr,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:w,errorDigest:null}}function Bc(M,w,C,j,z,Q,le,ge){M.allPendingTasks++,C===null?M.pendingRootTasks++:C.pendingTasks++;var Pe={node:w,ping:function(){return zl(M,Pe)},blockedBoundary:C,blockedSegment:j,abortSet:z,legacyContext:Q,context:le,treeContext:ge};return Pe.componentStack=null,z.add(Pe),Pe}function Th(M,w,C,j,z,Q){return{status:ju,id:-1,index:w,parentFlushed:!1,chunks:[],children:[],formatContext:j,boundary:C,lastPushedText:z,textEmbedded:Q}}var il=null;function al(){return il===null||il.componentStack===null?"":af(il.componentStack)}function sl(M,w){M.componentStack={tag:0,parent:M.componentStack,type:w}}function ip(M,w){M.componentStack={tag:1,parent:M.componentStack,type:w}}function Dh(M,w){M.componentStack={tag:2,parent:M.componentStack,type:w}}function Ss(M){M.componentStack===null?i("Unexpectedly popped too many stack frames. This is a bug in React."):M.componentStack=M.componentStack.parent}var bn=null;function sr(M,w){{var C;typeof w=="string"?C=w:w&&typeof w.message=="string"?C=w.message:C=String(w);var j=bn||al();bn=null,M.errorMessage=C,M.errorComponentStack=j}}function Er(M,w){var C=M.onError(w);if(C!=null&&typeof C!="string")throw new Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof C+'" instead');return C}function ti(M,w){var C=M.onShellError;C(w);var j=M.onFatalError;j(w),M.destination!==null?(M.status=of,_(M.destination,w)):(M.status=sf,M.fatalError=w)}function xo(M,w,C){sl(w,"Suspense");var j=w.blockedBoundary,z=w.blockedSegment,Q=C.fallback,le=C.children,ge=new Set,Pe=pv(M,ge),ze=z.chunks.length,mt=Th(M,ze,Pe,z.formatContext,!1,!1);z.children.push(mt),z.lastPushedText=!1;var Et=Th(M,0,null,z.formatContext,!1,!1);Et.parentFlushed=!0,w.blockedBoundary=Pe,w.blockedSegment=Et;try{if(Vu(M,w,le),Si(Et.chunks,M.responseState,Et.lastPushedText,Et.textEmbedded),Et.status=wo,Hl(Pe,Et),Pe.pendingTasks===0){Ss(w);return}}catch(Wn){Et.status=Nb,Pe.forceClientRender=!0,Pe.errorDigest=Er(M,Wn),sr(Pe,Wn)}finally{w.blockedBoundary=j,w.blockedSegment=z}var Vt=Bc(M,Q,j,mt,ge,w.legacyContext,w.context,w.treeContext);Vt.componentStack=w.componentStack,M.pingedTasks.push(Vt),Ss(w)}function Tb(M,w,C,j){sl(w,C);var z=w.blockedSegment,Q=Nu(z.chunks,C,j,M.responseState,z.formatContext);z.lastPushedText=!1;var le=z.formatContext;z.formatContext=Mn(le,C,j),Vu(M,w,Q),z.formatContext=le,U(z.chunks,C),z.lastPushedText=!1,Ss(w)}function Db(M){return M.prototype&&M.prototype.isReactComponent}function kh(M,w,C,j,z){var Q={};zx(w,Q);var le=C(j,z);return Hx(C,j,le,z)}function gv(M,w,C,j,z){var Q=C.render();C.props!==z&&(So||i("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",ar(j)||"a component"),So=!0);{var le=j.childContextTypes;if(le!=null){var ge=w.legacyContext,Pe=uv(C,j,ge,le);w.legacyContext=Pe,fa(M,w,Q),w.legacyContext=ge;return}}fa(M,w,Q)}function ap(M,w,C,j){Dh(w,C);var z=Du(C,w.legacyContext),Q=Bl(C,j,z);bh(Q,C,j,z),gv(M,w,Q,C,j),Ss(w)}var bt={},Ni={},Ln={},Iu={},So=!1,Mu={},Eo=!1,Uc=!1,Wc=!1;function Ph(M,w,C,j){var z;if(z=Du(C,w.legacyContext),ip(w,C),C.prototype&&typeof C.prototype.render=="function"){var Q=ar(C)||"Unknown";bt[Q]||(i("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",Q,Q),bt[Q]=!0)}var le=kh(M,w,C,j,z),ge=Xm();if(typeof le=="object"&&le!==null&&typeof le.render=="function"&&le.$$typeof===void 0){var Pe=ar(C)||"Unknown";Ni[Pe]||(i("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Pe,Pe,Pe),Ni[Pe]=!0)}if(typeof le=="object"&&le!==null&&typeof le.render=="function"&&le.$$typeof===void 0){{var ze=ar(C)||"Unknown";Ni[ze]||(i("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",ze,ze,ze),Ni[ze]=!0)}bh(le,C,j,z),gv(M,w,le,C,j)}else if(vv(C),ge){var mt=w.treeContext,Et=1,Vt=0;w.treeContext=wh(mt,Et,Vt);try{fa(M,w,le)}finally{w.treeContext=mt}}else fa(M,w,le);Ss(w)}function vv(M){{if(M&&M.childContextTypes&&i("%s(...): childContextTypes cannot be defined on a function component.",M.displayName||M.name||"Component"),M.defaultProps!==void 0){var w=ar(M)||"Unknown";Mu[w]||(i("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",w),Mu[w]=!0)}if(typeof M.getDerivedStateFromProps=="function"){var C=ar(M)||"Unknown";Iu[C]||(i("%s: Function components do not support getDerivedStateFromProps.",C),Iu[C]=!0)}if(typeof M.contextType=="object"&&M.contextType!==null){var j=ar(M)||"Unknown";Ln[j]||(i("%s: Function components do not support contextType.",j),Ln[j]=!0)}}}function sp(M,w){if(M&&M.defaultProps){var C=ws({},w),j=M.defaultProps;for(var z in j)C[z]===void 0&&(C[z]=j[z]);return C}return w}function yv(M,w,C,j,z){ip(w,C.render);var Q=kh(M,w,C.render,j,z),le=Xm();if(le){var ge=w.treeContext,Pe=1,ze=0;w.treeContext=wh(ge,Pe,ze);try{fa(M,w,Q)}finally{w.treeContext=ge}}else fa(M,w,Q);Ss(w)}function Ah(M,w,C,j,z){var Q=C.type,le=sp(Q,j);lf(M,w,Q,le,z)}function bv(M,w,C,j){C._context===void 0?C!==C.Consumer&&(Wc||(Wc=!0,i("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):C=C._context;var z=j.children;typeof z!="function"&&i("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it.");var Q=Xd(C),le=z(Q);fa(M,w,le)}function Ma(M,w,C,j){var z=C._context,Q=j.value,le=j.children,ge;ge=w.context,w.context=gh(z,Q),fa(M,w,le),w.context=Ux(z),ge!==w.context&&i("Popping the context provider did not return back to the original snapshot. This is a bug in React.")}function wv(M,w,C,j,z){sl(w,"Lazy");var Q=C._payload,le=C._init,ge=le(Q),Pe=sp(ge,j);lf(M,w,ge,Pe,z),Ss(w)}function lf(M,w,C,j,z){if(typeof C=="function")if(Db(C)){ap(M,w,C,j);return}else{Ph(M,w,C,j);return}if(typeof C=="string"){Tb(M,w,C,j);return}switch(C){case Fx:case Lx:case ih:case Um:case Bm:{fa(M,w,j.children);return}case Ll:{sl(w,"SuspenseList"),fa(M,w,j.children),Ss(w);return}case Tc:throw new Error("ReactDOMServer does not yet support scope components.");case oh:{xo(M,w,j);return}}if(typeof C=="object"&&C!==null)switch(C.$$typeof){case Ud:{yv(M,w,C,j,z);return}case Wd:{Ah(M,w,C,j,z);return}case ah:{Ma(M,w,C,j);return}case sh:{bv(M,w,C,j);return}case lh:{wv(M,w,C,j);return}}var Q="";throw(C===void 0||typeof C=="object"&&C!==null&&Object.keys(C).length===0)&&(Q+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(C==null?C:typeof C)+"."+Q))}function xv(M,w){typeof Symbol=="function"&&M[Symbol.toStringTag]==="Generator"&&(Eo||i("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),Eo=!0),M.entries===w&&(Uc||i("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Uc=!0)}function fa(M,w,C){try{return Sv(M,w,C)}catch(j){throw typeof j=="object"&&j!==null&&typeof j.then=="function"||(bn=bn!==null?bn:al()),j}}function Sv(M,w,C){if(w.node=C,typeof C=="object"&&C!==null){switch(C.$$typeof){case pb:{var j=C,z=j.type,Q=j.props,le=j.ref;lf(M,w,z,Q,le);return}case rh:throw new Error("Portals are not currently supported by the server renderer. Render them conditionally so that they only appear on the client render.");case lh:{var ge=C,Pe=ge._payload,ze=ge._init,mt;try{mt=ze(Pe)}catch(_o){throw typeof _o=="object"&&_o!==null&&typeof _o.then=="function"&&sl(w,"Lazy"),_o}fa(M,w,mt);return}}if(Ze(C)){op(M,w,C);return}var Et=zd(C);if(Et){xv(C,Et);var Vt=Et.call(C);if(Vt){var Wn=Vt.next();if(!Wn.done){var Or=[];do Or.push(Wn.value),Wn=Vt.next();while(!Wn.done);op(M,w,Or);return}return}}var bi=Object.prototype.toString.call(C);throw new Error("Objects are not valid as a React child (found: "+(bi==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":bi)+"). If you meant to render a collection of children, use an array instead.")}if(typeof C=="string"){var No=w.blockedSegment;No.lastPushedText=Fr(w.blockedSegment.chunks,C,M.responseState,No.lastPushedText);return}if(typeof C=="number"){var Ns=w.blockedSegment;Ns.lastPushedText=Fr(w.blockedSegment.chunks,""+C,M.responseState,Ns.lastPushedText);return}typeof C=="function"&&i("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}function op(M,w,C){for(var j=C.length,z=0;z<j;z++){var Q=w.treeContext;w.treeContext=wh(Q,j,z);try{Vu(M,w,C[z])}finally{w.treeContext=Q}}}function lp(M,w,C){var j=w.blockedSegment,z=j.chunks.length,Q=Th(M,z,null,j.formatContext,j.lastPushedText,!0);j.children.push(Q),j.lastPushedText=!1;var le=Bc(M,w.node,w.blockedBoundary,Q,w.abortSet,w.legacyContext,w.context,w.treeContext);w.componentStack!==null&&(le.componentStack=w.componentStack.parent);var ge=le.ping;C.then(ge,ge)}function Vu(M,w,C){var j=w.blockedSegment.formatContext,z=w.legacyContext,Q=w.context,le=null;le=w.componentStack;try{return fa(M,w,C)}catch(ge){if($i(),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"){lp(M,w,ge),w.blockedSegment.formatContext=j,w.legacyContext=z,w.context=Q,yo(Q),w.componentStack=le;return}else throw w.blockedSegment.formatContext=j,w.legacyContext=z,w.context=Q,yo(Q),w.componentStack=le,ge}}function up(M,w,C,j){var z=Er(M,j);if(w===null?ti(M,j):(w.pendingTasks--,w.forceClientRender||(w.forceClientRender=!0,w.errorDigest=z,sr(w,j),w.parentFlushed&&M.clientRenderedBoundaries.push(w))),M.allPendingTasks--,M.allPendingTasks===0){var Q=M.onAllReady;Q()}}function cp(M){var w=this,C=M.blockedBoundary,j=M.blockedSegment;j.status=Lc,zc(w,C,j)}function $u(M,w,C){var j=M.blockedBoundary,z=M.blockedSegment;if(z.status=Lc,j===null)w.allPendingTasks--,w.status!==of&&(w.status=of,w.destination!==null&&v(w.destination));else{if(j.pendingTasks--,!j.forceClientRender){j.forceClientRender=!0;var Q=C===void 0?new Error("The render was aborted by the server without a reason."):C;j.errorDigest=w.onError(Q);{var le="The server did not finish this Suspense boundary: ";Q&&typeof Q.message=="string"?Q=le+Q.message:Q=le+String(Q);var ge=il;il=M;try{sr(j,Q)}finally{il=ge}}j.parentFlushed&&w.clientRenderedBoundaries.push(j)}if(j.fallbackAbortableTasks.forEach(function(ze){return $u(ze,w,C)}),j.fallbackAbortableTasks.clear(),w.allPendingTasks--,w.allPendingTasks===0){var Pe=w.onAllReady;Pe()}}}function Hl(M,w){if(w.chunks.length===0&&w.children.length===1&&w.children[0].boundary===null){var C=w.children[0];C.id=w.id,C.parentFlushed=!0,C.status===wo&&Hl(M,C)}else{var j=M.completedSegments;j.push(w)}}function zc(M,w,C){if(w===null){if(C.parentFlushed){if(M.completedRootSegment!==null)throw new Error("There can only be one root segment. This is a bug in React.");M.completedRootSegment=C}if(M.pendingRootTasks--,M.pendingRootTasks===0){M.onShellError=Fc;var j=M.onShellReady;j()}}else if(w.pendingTasks--,!w.forceClientRender){if(w.pendingTasks===0)C.parentFlushed&&C.status===wo&&Hl(w,C),w.parentFlushed&&M.completedBoundaries.push(w),w.fallbackAbortableTasks.forEach(cp,M),w.fallbackAbortableTasks.clear();else if(C.parentFlushed&&C.status===wo){Hl(w,C);var z=w.completedSegments;z.length===1&&w.parentFlushed&&M.partialBoundaries.push(w)}}if(M.allPendingTasks--,M.allPendingTasks===0){var Q=M.onAllReady;Q()}}function Ev(M,w){var C=w.blockedSegment;if(C.status===ju){yo(w.context);var j=null;j=il,il=w;try{fa(M,w,w.node),Si(C.chunks,M.responseState,C.lastPushedText,C.textEmbedded),w.abortSet.delete(w),C.status=wo,zc(M,w.blockedBoundary,C)}catch(Q){if($i(),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"){var z=w.ping;Q.then(z,z)}else w.abortSet.delete(w),C.status=Nb,up(M,w.blockedBoundary,C,Q)}finally{il=j}}}function Rh(M){if(M.status!==of){var w=Gm(),C=np.current;np.current=ep;var j;j=Ch.getCurrentStack,Ch.getCurrentStack=al;var z=Ei;tp(M.responseState);try{var Q=M.pingedTasks,le;for(le=0;le<Q.length;le++){var ge=Q[le];Ev(M,ge)}Q.splice(0,le),M.destination!==null&&Jr(M,M.destination)}catch(Pe){Er(M,Pe),ti(M,Pe)}finally{tp(z),np.current=C,Ch.getCurrentStack=j,C===ep&&yo(w)}}}function uf(M,w,C){switch(C.parentFlushed=!0,C.status){case ju:{var j=C.id=M.nextSegmentId++;return C.lastPushedText=!1,C.textEmbedded=!1,Ue(w,M.responseState,j)}case wo:{C.status=mv;for(var z=!0,Q=C.chunks,le=0,ge=C.children,Pe=0;Pe<ge.length;Pe++){for(var ze=ge[Pe];le<ze.index;le++)h(w,Q[le]);z=Lu(M,w,ze)}for(;le<Q.length-1;le++)h(w,Q[le]);return le<Q.length&&(z=m(w,Q[le])),z}default:throw new Error("Aborted, errored or already flushed boundaries should not be flushed again. This is a bug in React.")}}function Lu(M,w,C){var j=C.boundary;if(j===null)return uf(M,w,C);if(j.parentFlushed=!0,j.forceClientRender)return Nc(w,M.responseState,j.errorDigest,j.errorMessage,j.errorComponentStack),uf(M,w,C),_c(w,M.responseState);if(j.pendingTasks>0){j.rootSegmentID=M.nextSegmentId++,j.completedSegments.length>0&&M.partialBoundaries.push(j);var z=j.id=Lr(M.responseState);return bs(w,M.responseState,z),uf(M,w,C),Bd(w,M.responseState)}else{if(j.byteSize>M.progressiveChunkSize)return j.rootSegmentID=M.nextSegmentId++,M.completedBoundaries.push(j),bs(w,M.responseState,j.id),uf(M,w,C),Bd(w,M.responseState);Il(w,M.responseState);var Q=j.completedSegments;if(Q.length!==1)throw new Error("A previously unvisited boundary must have exactly one root segment. This is a bug in React.");var le=Q[0];return Lu(M,w,le),Cu(w,M.responseState)}}function Nv(M,w,C){return $x(w,M.responseState,C.id,C.errorDigest,C.errorMessage,C.errorComponentStack)}function Fu(M,w,C){return kx(w,M.responseState,C.formatContext,C.id),Lu(M,w,C),nh(w,C.formatContext)}function Bu(M,w,C){for(var j=C.completedSegments,z=0;z<j.length;z++){var Q=j[z];kb(M,w,C,Q)}return j.length=0,Lm(w,M.responseState,C.id,C.rootSegmentID)}function Es(M,w,C){for(var j=C.completedSegments,z=0;z<j.length;z++){var Q=j[z];if(!kb(M,w,C,Q))return z++,j.splice(0,z),!1}return j.splice(0,z),!0}function kb(M,w,C,j){if(j.status===mv)return!0;var z=j.id;if(z===-1){var Q=j.id=C.rootSegmentID;if(Q===-1)throw new Error("A root segment ID must have been assigned by now. This is a bug in React.");return Fu(M,w,j)}else return Fu(M,w,j),jx(w,M.responseState,z)}function Jr(M,w){f();try{var C=M.completedRootSegment;C!==null&&M.pendingRootTasks===0&&(Lu(M,w,C),M.completedRootSegment=null,ie(w,M.responseState));var j=M.clientRenderedBoundaries,z;for(z=0;z<j.length;z++){var Q=j[z];Nv(M,w,Q)}j.splice(0,z);var le=M.completedBoundaries;for(z=0;z<le.length;z++){var ge=le[z];Bu(M,w,ge)}le.splice(0,z),p(w),f(w);var Pe=M.partialBoundaries;for(z=0;z<Pe.length;z++){var ze=Pe[z];if(!Es(M,w,ze)){M.destination=null,z++,Pe.splice(0,z);return}}Pe.splice(0,z);var mt=M.completedBoundaries;for(z=0;z<mt.length;z++){var Et=mt[z];Bu(M,w,Et)}mt.splice(0,z)}finally{p(w),M.allPendingTasks===0&&M.pingedTasks.length===0&&M.clientRenderedBoundaries.length===0&&M.completedBoundaries.length===0&&(M.abortableTasks.size!==0&&i("There was still abortable task at the root when we closed. This is a bug in React."),v(w))}}function Oh(M){s(function(){return Rh(M)})}function dp(M,w){if(M.status===sf){M.status=of,_(w,M.fatalError);return}if(M.status!==of&&M.destination===null){M.destination=w;try{Jr(M,w)}catch(C){Er(M,C),ti(M,C)}}}function cf(M,w){try{var C=M.abortableTasks;C.forEach(function(j){return $u(j,M,w)}),C.clear(),M.destination!==null&&Jr(M,M.destination)}catch(j){Er(M,j),ti(M,j)}}function fp(M,w){return new Promise(function(C,j){var z,Q,le=new Promise(function(Vt,Wn){Q=Vt,z=Wn});function ge(){var Vt=new ReadableStream({type:"bytes",pull:function(Wn){dp(ze,Wn)},cancel:function(Wn){cf(ze)}},{highWaterMark:0});Vt.allReady=le,C(Vt)}function Pe(Vt){le.catch(function(){}),j(Vt)}var ze=rp(M,hr(w?w.identifierPrefix:void 0,w?w.nonce:void 0,w?w.bootstrapScriptContent:void 0,w?w.bootstrapScripts:void 0,w?w.bootstrapModules:void 0),xa(w?w.namespaceURI:void 0),w?w.progressiveChunkSize:void 0,w?w.onError:void 0,Q,ge,Pe,z);if(w&&w.signal){var mt=w.signal,Et=function(){cf(ze,mt.reason),mt.removeEventListener("abort",Et)};mt.addEventListener("abort",Et)}Oh(ze)})}B5.renderToReadableStream=fp,B5.version=e})();var _x,Dhe;_x=J0,Dhe=B5;_x.version;var pot=_x.renderToString;_x.renderToStaticMarkup;_x.renderToNodeStream;_x.renderToStaticNodeStream;Dhe.renderToReadableStream;const got={Accuracy:"rgba(239, 68, 68, 0.35)",Fluency:"rgba(59, 130, 246, 0.35)",Terminology:"rgba(16, 185, 129, 0.35)",Consistency:"rgba(245, 158, 11, 0.35)",Style:"rgba(168, 85, 247, 0.35)",Localization:"rgba(234, 88, 12, 0.35)"};function vot(t){Qe(X=>X.selectedTool);const e=Qe(X=>X.getSelectedTool()),n=Qe(X=>X.textFields),r=Qe(X=>X.selectedTexts),i=Qe(X=>X.setSelectedTexts),a=wa(X=>X.sentenceHovered),s=wa(X=>X.setSentenceHovered),[o,l]=R.useState(""),[c,f]=R.useState(0),[h,m]=R.useState(null),[p,v]=R.useState(null),[y,x]=R.useState(""),S=QE(),[_,N]=R.useState([]),[k,P]=R.useState([]),[O,A]=R.useState(!1),T=`review_${t.projectId}_${t.chunkId}`;R.useEffect(()=>{A(!1);try{const X=localStorage.getItem(T);if(console.log(`[Review] Attempting to load review from localStorage for chunk ${t.chunkId}`,X?`(${X.length} chars)`:"(none)"),X){const ce=JSON.parse(X);N(ce),console.log(`[Review]  Loaded ${ce.length} issues from localStorage for chunk ${t.chunkId}`)}else N([]),console.log(`[Review] No saved review found for chunk ${t.chunkId}`)}catch(X){console.error("[Review]  Failed to load saved review from localStorage:",X),N([])}A(!0)},[T,t.chunkId]),R.useEffect(()=>{if(!O){console.log(`[Review] Skipping save - review not yet loaded for chunk ${t.chunkId}`);return}if(_.length>0)try{localStorage.setItem(T,JSON.stringify(_)),console.log(`[Review]  Saved ${_.length} issues to localStorage for chunk ${t.chunkId}`)}catch(X){console.error("[Review]  Failed to save review to localStorage:",X)}else try{localStorage.removeItem(T),console.log(`[Review]  Removed review from localStorage for chunk ${t.chunkId}`)}catch(X){console.error("[Review]  Failed to remove review from localStorage:",X)}},[_,T,t.chunkId,O]);const[L,B]=R.useState([]),[W,Y]=R.useState(null),V=t.paragraphMatches?t.paragraphMatches.koreanParagraphs:t.koreanText.split(/\n\n+/).filter(X=>X.trim().length>0);R.useEffect(()=>{if(!t.paragraphMatches){B([]);return}const X=()=>{var St,Bt;const he=document.getElementById("background"),ve=document.getElementById("translationField"),Ne=document.getElementById("korean-panel");if(!he||!ve||!Ne)return;const ke=he.getBoundingClientRect(),Te=[],ye=document.querySelectorAll(".korean-paragraph"),Ie=xl.translationField;if(!Ie)return;let Re="";try{if(Ie.children&&Ie.children.length>0){const Nt=Ie.children[0];Nt&&Nt.children&&Nt.children.length>0&&(Re=Nt.children.map(Dt=>Dt.text||"").join(""))}}catch(Nt){console.error("Error extracting text from editor:",Nt);return}if(!Re){console.log("No text found in editor");return}const Ee=Re.split(/\n\n+/).filter(Nt=>Nt.trim().length>0);console.log("Korean paragraphs:",ye.length),console.log("English paragraphs (by \\n\\n):",Ee.length),console.log("Originally matched:",((St=t.paragraphMatches)==null?void 0:St.matches.length)||0);const $e=[],He=ve.querySelector('[contenteditable="true"]');if(!He)return;const gt=Nt=>{if(Nt.nodeType===Node.TEXT_NODE)return Nt;for(let Dt=0;Dt<Nt.childNodes.length;Dt++){const Ae=gt(Nt.childNodes[Dt]);if(Ae)return Ae}return null},Ye=gt(He);if(!Ye||!Ye.textContent){console.log("No text node found in editor");return}let yt=0;for(let Nt=0;Nt<Ee.length;Nt++){const Dt=Ee[Nt],Ae=Re.indexOf(Dt,yt),je=Ae+Dt.length;if(Ae<0){console.log(`Paragraph ${Nt} not found in text`);continue}try{const tt=document.createRange(),Ot=Math.min(Ae,Ye.textContent.length),qe=Math.min(je,Ye.textContent.length);tt.setStart(Ye,Ot),tt.setEnd(Ye,qe);const ft=tt.getClientRects();if(ft.length>0){const Wt=ft[0],an=ft[ft.length-1];$e.push({top:Wt.top,height:an.bottom-Wt.top})}else console.log(`No rects for paragraph ${Nt}`)}catch(tt){console.log(`Error measuring paragraph ${Nt}:`,tt)}yt=je}console.log("English paragraph positions found:",$e.length);const _t=Math.min(((Bt=t.paragraphMatches)==null?void 0:Bt.matches.length)||0,ye.length,$e.length);for(let Nt=0;Nt<_t;Nt++){const Dt=ye[Nt],Ae=$e[Nt];if(Dt&&Ae){const je=Dt.getBoundingClientRect(),tt=je.right-ke.left,Ot=je.top+je.height/2-ke.top,qe=He.getBoundingClientRect().left-ke.left,ft=Ae.top+Ae.height/2-ke.top;Te.push({x1:tt,y1:Ot,x2:qe,y2:ft})}}console.log("Matching lines drawn:",Te.length),B(Te)},ce=window.setTimeout(X,300);return window.addEventListener("resize",X),()=>{window.clearTimeout(ce),window.removeEventListener("resize",X)}},[t.paragraphMatches,t.koreanText,t.englishText]),R.useEffect(()=>{const X=()=>{const ce=xl.translationField;if(!(!ce||!t.paragraphMatches))try{const{selection:he}=ce;if(!he||!he.anchor){Y(null);return}let ve="";try{if(ce.children&&ce.children.length>0){const Re=ce.children[0];Re&&Re.children&&Re.children.length>0&&(ve=Re.children.map(Ee=>Ee.text||"").join(""))}}catch(Re){console.error("Error extracting text:",Re),Y(null);return}if(!ve){Y(null);return}const Ne=he.anchor.offset||0,ke=ve.split(/\n\n+/).filter(Re=>Re.trim().length>0);let Te=0,ye=-1;for(let Re=0;Re<ke.length;Re++){const Ee=ke[Re],$e=ve.indexOf(Ee,Te),He=$e+Ee.length;if($e>=0&&Ne>=$e&&Ne<=He){ye=Re;break}Te=He}const Ie=t.paragraphMatches.matches.length;ye>=0&&ye<Ie?Y(ye):Y(null)}catch(he){console.error("Error in handleSelectionChange:",he),Y(null)}};return document.addEventListener("selectionchange",X),()=>{document.removeEventListener("selectionchange",X)}},[t.paragraphMatches]),R.useEffect(()=>{const X=[{type:"paragraph",children:[{text:t.englishText}]}];Qe.setState({layers:[{id:"1",layer:{name:"English",color:"#eef3ff",isVisible:!0,state:X,modifications:{}},children:[]},{id:"2",layer:{name:"Scratch",color:"#fde68a",isVisible:!1,modifications:{}},children:[]}],textFields:[{id:"translationField",x:0,y:0,width:700,height:0,isMoveable:!0,isVisible:!0,state:X}],selectedLayerId:0,selectedTool:Qe.getState().selectedTool,selectedTexts:[]}),Qe.getState().refreshTextFields(!0);let ce;const he=()=>{const ke=document.getElementById("korean-panel"),Te="translationField",ye=document.getElementById(Te);if(!ke||!ye)return;const Ie=24,Re=360,Ee=Math.max(600,Math.min(780,Math.floor((window.innerWidth-Re-Ie*3)/2))),$e=140,He=Ee*2+Ie,Ye=Math.max(20,Math.floor((window.innerWidth-Re-He)/2)),yt=Ye+Ee+Ie;ke.style.position="absolute",ke.style.left=Ye+"px",ke.style.top=$e+"px",ke.style.width=Ee+"px",ke.style.minHeight="600px";const _t=Math.max(600,ke.scrollHeight);Qe.getState().setTextField(Te,{x:yt,y:$e,width:Ee,height:_t}),setTimeout(()=>ae(),100),ce=()=>{}},ve=window.setTimeout(he,0),Ne=()=>he();return window.addEventListener("resize",Ne),()=>{window.clearTimeout(ve),window.removeEventListener("resize",Ne),ce&&ce()}},[t.chunkId]),R.useEffect(()=>{if(_.length>0){const X=setTimeout(()=>ae(),150);return()=>clearTimeout(X)}},[_]),R.useEffect(()=>{const X=()=>{_.length>0&&k.length>0&&P(ce=>[...ce])};return window.addEventListener("scroll",X,!0),()=>window.removeEventListener("scroll",X,!0)},[_,k]),R.useEffect(()=>{const X=he=>{he.key==="z"&&(he.ctrlKey||he.metaKey&&!he.shiftKey)&&(he.preventDefault(),oa.getState().undo()),(he.key==="y"&&he.ctrlKey||he.key==="z"&&he.metaKey&&he.shiftKey)&&(he.preventDefault(),oa.getState().redo()),he.key==="Escape"&&i([])},ce=he=>{he.key==="Backspace"&&r.length===0&&o!==""&&document.activeElement===document.body&&(oa.getState().storeUndoState(),Qe.getState().removeTextField(o),l(""))};return window.addEventListener("keyup",ce),window.addEventListener("keydown",X),()=>{window.removeEventListener("keyup",ce),window.removeEventListener("keydown",X)}},[r,o,i]);const I=(X,ce=!1)=>{if(X.target instanceof HTMLElement&&(X.target.tagName==="SPAN"||X.target.hasAttribute("data-slate-node"))){const he=X.target.closest(".editableTextField");if(he){const ve=he.classList.contains("isMoveableTextField"),Ne=wa.getState().sentenceHovered;let ke=null,Te=null,ye=null,Ie=null;const Re=xl[he.id];if(Te=Kf.caretPositionFromPoint(X.clientX,X.clientY),Te&&(!ce&&Ne&&Ne.caretPosition&&Te.offsetNode.isSameNode(Ne.caretPosition.offsetNode)&&Te.offset===Ne.caretPosition.offset||(ke=document.createRange(),ke.setStart(Te.offsetNode,Te.offset>0?Te.offset-1:Te.offset),ke.setEnd(Te.offsetNode,Te.offset===0?Te.offset+1:Te.offset),!ce&&Ne&&Ne.cursorRange!==null&&Ne.cursorRange.toString()===ke.toString())))return;if(ve){const Ee=fe.start(Re,[]),$e=fe.end(Re,[]);Ie={anchor:Ee,focus:$e},ye=rt.toDOMRange(Re,Ie)}else if(ke!==null){if(ye=Jw.getRangeSnappedToSentence(ke),!ce&&Ne&&Ne.textfieldId===he.id&&Ne.range.toString()===ye.toString()){wa.getState().setSentenceHovered({...Ne,cursorRange:ke,caretPosition:Te});return}if(Ie=rt.toSlateRange(Re,ye,{exactMatch:!0,suppressThrow:!0}),Ie===null&&X.target.closest(".selectedText")){const $e=fe.nodes(Re,{at:[],mode:"all",match:He=>He.selectionId!==void 0});for(const[He,gt]of $e){Ie={anchor:{path:gt,offset:0},focus:{path:gt,offset:He.text.length}};break}}}if(ye&&Ie){wa.getState().setSentenceHovered({cursorRange:ke,slateRange:Ie,caretPosition:Te,range:ye,rects:[...ye.getClientRects()],textfieldId:he.id,position:{x:X.clientX,y:X.clientY}});return}}}m(null),s(null)},H=X=>{I(X)},q=(X,ce)=>{const he=ce[0].elementId.startsWith("textField")?ce[0].elementId:"textField"+ce[0].elementId;l(he),f(Date.now());const ve=document.getElementById("background");if(ve){const Ne=ve.getBoundingClientRect();m({x:X.clientX-Ne.left,y:X.clientY-Ne.top})}else m({x:X.clientX,y:X.clientY})},F=a?a.rects:[],J=a&&a.cursorRange!==null?[...a.cursorRange.getClientRects()]:[];let Z="auto";if(e.isIconAsCursor()){const X=pot(e.getIcon());Z=`url("data:image/svg+xml,${encodeURI(X)}") ${e.getIconHotspot().x} ${e.getIconHotspot().y}, auto`}const G=()=>{const X=xl.translationField;if(X){let ce="";try{if(X.children&&X.children.length>0){const ve=X.children[0];ve&&ve.children&&ve.children.length>0&&(ce=ve.children.map(Ne=>Ne.text||"").join(""))}}catch(ve){console.error("Error extracting text for save:",ve);return}console.log("=== Saving ==="),console.log("Text length:",ce.length),console.log("Contains \\n\\n:",ce.includes(`

`));const he=ce.split(/\n\n+/).filter(ve=>ve.trim().length>0).length;console.log("Paragraph count:",he),t.onSave(ce)}},oe=()=>{const X=t.koreanText,ce=xl.translationField;if(!ce){console.error("No editor found for translationField");return}let he="";try{ce.children&&ce.children.length>0&&(he=ce.children.map(ke=>ke.children&&ke.children.length>0?ke.children.map(Te=>Te.text||"").join(""):"").filter(ke=>ke.length>0).join(`

`))}catch(ke){console.error("Error extracting text for review:",ke);return}if(console.log("=== Review Text Extraction ==="),console.log("Korean text length:",X.length),console.log("English text length:",he.length),console.log("Korean first 100 chars:",X.substring(0,100)),console.log("English first 100 chars:",he.substring(0,100)),console.log("Korean last 100 chars:",X.substring(Math.max(0,X.length-100))),console.log("English last 100 chars:",he.substring(Math.max(0,he.length-100))),!he||he.trim().length===0){alert("No text to review");return}const ve=Ed({issues:NN(Ed({text:oo(),category:oo(),subcategory:oo().optional(),severity:dze(["high","medium","low"]),message:oo(),suggestion:oo().optional()}))}),Ne=`You are a professional KoreanEnglish novel translation reviewer. Your job is to provide comprehensive feedback.

TASK: Review the English translation against Korean source and provide EXACTLY 10-20 issues (NOT LESS THAN 10).

Return ONLY valid JSON:
{
  "issues": [
    { "text": string, "category": string, "subcategory"?: string, "severity": "high"|"medium"|"low", "message": string, "suggestion"?: string }
  ]
}

MANDATORY RULES - FOLLOW EXACTLY:
1. MINIMUM 10 ISSUES - This is NON-NEGOTIABLE. Even for good translations, find 10+ improvement areas.
2. Cover EVERY category (provide at least 2 from each):
   - Accuracy: mistranslations, omissions, additions, wrong meanings
   - Fluency: unnatural phrasing, awkward sentences, rhythm issues
   - Terminology: word choice, naming, technical terms
   - Consistency: contradictions, style shifts, format inconsistencies
   - Style: tone mismatches, register issues, literary quality
   - Localization: cultural references, idioms, context adaptation

3. "text" field MUST be exact substring from ENGLISH text below
4. Be GRANULAR - split compound issues into separate entries
5. Find issues in: word choices, sentence structure, punctuation, spacing, repetition, verb tenses, articles, prepositions, conjunctions
6. Even small improvements count as issues (severity: "low")
7. Look through THE ENTIRE text from beginning to end
8. DO NOT skip sections - review all paragraphs

CATEGORIES (use these exact strings):
- "Accuracy"
- "Fluency"
- "Terminology"
- "Consistency"
- "Style"
- "Localization"

KOREAN SOURCE (${X.length} chars):
${X}

ENGLISH TRANSLATION (${he.length} chars):
${he}

REMEMBER: You MUST return AT LEAST 10 issues. Count them before responding.`;x("Running review..."),S.onOpen(),Qe.getState().executePrompt({prompt:Ne,response_format:{zodObject:ve,name:"review"}}).then(ke=>{var ye;const Te=ke.parsed;console.log("Review result:",Te),console.log("Number of issues:",((ye=Te==null?void 0:Te.issues)==null?void 0:ye.length)||0),Te&&Te.issues&&Te.issues.length>0?(x(JSON.stringify(Te,null,2)),N(Te.issues),Te.issues.length<10&&console.warn(" WARNING: Only",Te.issues.length,"issues returned (expected 10+)")):x(ke.result)})};function ae(){const X=xl.translationField;if(!X||_.length===0)return;const ce=document.getElementById("translationField");if(!ce)return;let he="";try{if(X.children&&X.children.length>0){const ke=X.children[0];ke&&ke.children&&ke.children.length>0&&(he=ke.children.map(Te=>Te.text||"").join(""))}}catch(ke){console.error("Error extracting text:",ke);return}if(!he)return;const ve=X.children,Ne=[];for(const ke of _){let Te=ke.start,ye=ke.end;if((Te===void 0||ye===void 0)&&ke.text){const Ee=he.indexOf(ke.text);Ee>=0&&(Te=Ee,ye=Ee+ke.text.length)}if(Te===void 0||ye===void 0){Ne.push({top:0,left:0,textRect:new DOMRect});continue}const Ie=ya.toSlatePoint(ve,Te),Re=ya.toSlatePoint(ve,ye);if(Ie&&Re)try{const $e=rt.toDOMRange(X,{anchor:Ie,focus:Re}).getBoundingClientRect(),He=ce.getBoundingClientRect(),gt=$e.top-He.top+ce.scrollTop,Ye=$e.right-He.left;Ne.push({top:gt,left:Ye,textRect:$e})}catch{Ne.push({top:0,left:0,textRect:new DOMRect})}else Ne.push({top:0,left:0,textRect:new DOMRect})}P(Ne)}const te=X=>{const ce=xl.translationField;if(!ce)return;let he="";try{if(ce.children&&ce.children.length>0){const Ie=ce.children[0];Ie&&Ie.children&&Ie.children.length>0&&(he=Ie.children.map(Re=>Re.text||"").join(""))}}catch(Ie){console.error("Error extracting text for scrollToIssue:",Ie);return}if(!he)return;let ve=X.start,Ne=X.end;if((ve===void 0||Ne===void 0)&&X.text){const Re=he.indexOf(X.text);Re>=0&&(ve=Re,Ne=Re+X.text.length)}if(ve===void 0||Ne===void 0)return;const ke=ce.children,Te=ya.toSlatePoint(ke,ve),ye=ya.toSlatePoint(ke,Ne);Te&&ye&&(ot.select(ce,{anchor:Te,focus:ye}),rt.focus(ce),setTimeout(()=>{try{const Re=rt.toDOMRange(ce,{anchor:Te,focus:ye}).getBoundingClientRect();if(Re){window.scrollTo({top:Math.max(0,Re.top+window.scrollY-120),behavior:"smooth"});const Ee=document.getElementById("translationField");Ee==null||Ee.scrollIntoView({block:"nearest"})}}catch{}},0))},re=()=>{if(!t.paragraphMatches||L.length===0)return null;const X=document.getElementById("background");if(!X)return null;const ce=X.getBoundingClientRect(),he=document.getElementById("korean-panel"),ve=document.getElementById("translationField"),Ne=Math.max((he==null?void 0:he.scrollHeight)||0,(ve==null?void 0:ve.scrollHeight)||0,ce.height);return b.jsxDEV("svg",{style:{position:"absolute",left:0,top:0,width:ce.width,height:Ne,pointerEvents:"none",zIndex:2},children:L.map((ke,Te)=>{const ye=W===Te;return b.jsxDEV("line",{x1:ke.x1,y1:ke.y1,x2:ke.x2,y2:ke.y2,stroke:ye?"#ff6b6b":"#4a90e2",strokeWidth:ye?"2.5":"1.5",strokeDasharray:"5,5",opacity:ye?"0.9":"0.5"},Te,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:894,columnNumber:13},this)})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:879,columnNumber:7},this)};return b.jsxDEV("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"#F2EEF0"},children:[b.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",background:"#fff",borderBottom:"1px solid #eee",zIndex:1e3},children:[b.jsxDEV("span",{style:{fontWeight:700},children:"Chunk:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:915,columnNumber:9},this),b.jsxDEV("span",{children:[t.chunkIndex+1," / ",t.totalChunks]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:916,columnNumber:9},this),b.jsxDEV(Bn,{orientation:"vertical"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:917,columnNumber:9},this),b.jsxDEV(et,{size:"sm",variant:"flat",onClick:()=>t.onNavigate("prev"),isDisabled:!t.canNavigatePrev,children:"Prev"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:918,columnNumber:9},this),b.jsxDEV(et,{size:"sm",variant:"flat",onClick:()=>t.onNavigate("next"),isDisabled:!t.canNavigateNext,children:"Next"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:921,columnNumber:9},this),b.jsxDEV(Bn,{orientation:"vertical"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:924,columnNumber:9},this),t.onRetranslate&&b.jsxDEV(et,{size:"sm",color:"warning",variant:"flat",onClick:t.onRetranslate,isDisabled:t.isRetranslating,isLoading:t.isRetranslating,children:t.isRetranslating?"Retranslating...":"Retranslate"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:926,columnNumber:11},this),b.jsxDEV(et,{size:"sm",color:"secondary",onClick:oe,children:"Run Review"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:937,columnNumber:9},this),_.length>0&&b.jsxDEV(b.Fragment,{children:[b.jsxDEV("span",{style:{fontSize:13,fontWeight:600,padding:"4px 12px",borderRadius:6,background:_.length>=10?"#dcfce7":"#fef3c7",color:_.length>=10?"#166534":"#92400e"},children:[_.length," ",_.length>=10?"":""," issues"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:942,columnNumber:13},this),b.jsxDEV(et,{size:"sm",color:"danger",variant:"flat",onClick:()=>{N([]),console.log(`[Review] Cleared review for chunk ${t.chunkId}`)},children:"Clear Review"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:952,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:941,columnNumber:11},this),b.jsxDEV(et,{size:"sm",color:"primary",onClick:G,children:"Save Changes"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:965,columnNumber:9},this),t.paragraphMatches&&b.jsxDEV(b.Fragment,{children:[b.jsxDEV(Bn,{orientation:"vertical"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:970,columnNumber:13},this),b.jsxDEV("span",{style:{fontSize:12,color:"#666"},children:[t.paragraphMatches.matches.length," paragraphs matched"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:971,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:969,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:914,columnNumber:7},this),b.jsxDEV("div",{style:{display:"flex",flexDirection:"row",flex:1,position:"relative",overflow:"auto"},children:[b.jsxDEV("div",{id:"background",style:{position:"relative",display:"flex",justifyContent:"center",flexGrow:4,cursor:Z,minHeight:"100%"},onMouseDown:X=>{X.target instanceof HTMLElement&&(X.target.id==="background"||X.target.id==="mainTextField")&&i([])},onContextMenu:X=>{X.preventDefault();const ce=document.getElementById("background");if(ce){const he=ce.getBoundingClientRect();v({x:X.clientX-he.left,y:X.clientY-he.top})}else v({x:X.clientX,y:X.clientY})},children:[b.jsxDEV(oot,{onDragging:H,onDraggingEnd:q},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:997,columnNumber:11},this),re(),b.jsxDEV("div",{id:"korean-panel",style:{position:"absolute",background:"white",borderRadius:8,padding:20,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",userSelect:"text",cursor:"text"},children:V.map((X,ce)=>{const he=W===ce;return b.jsxDEV("div",{className:"korean-paragraph",style:{marginBottom:ce<V.length-1?16:0,lineHeight:1.8,fontSize:17,color:"#1a1a1a",backgroundColor:he?"rgba(255, 107, 107, 0.1)":"transparent",borderLeft:he?"3px solid #ff6b6b":"3px solid transparent",paddingLeft:8,marginLeft:-8,transition:"all 0.2s ease"},children:X},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1018,columnNumber:17},this)})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1003,columnNumber:11},this),n.length>0&&n.map((X,ce)=>b.jsxDEV(Xit,{isMoveable:!0,textField:X,style:{display:X.isVisible?"block":"none",zIndex:a!==null&&a.textfieldId===X.id?4:99}},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1041,columnNumber:20},this)),_.length>0&&k.length>0&&(()=>{const X=document.getElementById("translationField");if(!X)return null;const ce=X.getBoundingClientRect(),he=300,ve=12,Ne=ce.right+16,ke=[];let Te=0;return k.forEach((ye,Ie)=>{var St;if(!ye||ye.top===0){ke.push(0);return}let Re=ce.top+ye.top-X.scrollTop;ke.length>0&&Re<Te+ve&&(Re=Te+ve),ke.push(Re);const Ee=_[Ie],$e=80,gt=Math.ceil((((St=Ee.message)==null?void 0:St.length)||0)/50)*20,Ye=Ee.suggestion?70+Math.ceil((Ee.suggestion.length||0)/55)*16:0,yt=Ee.text?30:0,_t=$e+gt+Ye+yt;Te=Re+_t}),b.jsxDEV("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:10},children:_.map((ye,Ie)=>{const Re=ke[Ie];if(Re===0)return null;const $e=(got[ye.category]||"rgba(255,196,0,0.45)").replace("0.35","1");return b.jsxDEV("div",{style:{position:"absolute",left:Ne,top:Re,width:he,background:"white",border:"1px solid #e5e7eb",borderLeft:`4px solid ${$e}`,borderRadius:8,padding:12,marginBottom:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",pointerEvents:"auto",cursor:"pointer"},onClick:()=>te(ye),children:b.jsxDEV("div",{style:{fontSize:12,color:"#374151"},children:[b.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[b.jsxDEV("span",{style:{fontWeight:700,fontSize:13},children:[ye.category,ye.subcategory?`/${ye.subcategory}`:""]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1116,columnNumber:27},this),b.jsxDEV("span",{style:{fontSize:10,fontWeight:600,color:ye.severity==="high"?"#dc2626":ye.severity==="medium"?"#f59e0b":"#10b981",textTransform:"uppercase"},children:ye.severity},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1117,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1115,columnNumber:25},this),b.jsxDEV("div",{style:{marginBottom:8,lineHeight:1.4},children:ye.message},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1124,columnNumber:25},this),ye.suggestion&&b.jsxDEV("div",{style:{marginTop:8,padding:8,background:"#f9fafb",borderRadius:4,fontSize:11,lineHeight:1.4},children:[b.jsxDEV("span",{style:{fontWeight:600,color:"#059669"},children:" Suggestion:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1127,columnNumber:29},this),b.jsxDEV("div",{style:{marginTop:4},children:ye.suggestion},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1128,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1126,columnNumber:27},this),ye.text&&b.jsxDEV("div",{style:{marginTop:8,fontSize:11,color:"#6b7280",fontStyle:"italic",lineHeight:1.3},children:['"',ye.text.length>60?ye.text.substring(0,60)+"...":ye.text,'"']},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1132,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1114,columnNumber:23},this)},Ie,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1095,columnNumber:21},this)})},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1086,columnNumber:15},this)})(),F.map((X,ce)=>b.jsxDEV("div",{style:{position:"absolute",left:X.x,top:X.y,width:X.width,height:X.height,background:"rgba(0, 0, 0, 0.1)",pointerEvents:"none",zIndex:5}},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1145,columnNumber:20},this)),J.map((X,ce)=>b.jsxDEV("div",{style:{position:"absolute",left:X.x,top:X.y,width:X.width,height:X.height,background:"rgba(255, 219, 88, 0.8)",pointerEvents:"none",zIndex:6}},ce,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1149,columnNumber:20},this)),b.jsxDEV(aot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1152,columnNumber:11},this),h!==null&&F.length>0&&b.jsxDEV(Y$,{offset:20,isOpen:h!==null,showArrow:!0,shouldCloseOnInteractOutside:X=>Date.now()-c>200,onClose:()=>{m(null),s(null)},children:[b.jsxDEV(K$,{children:b.jsxDEV("div",{style:{position:"absolute",zIndex:99999,left:h.x,top:h.y}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1158,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1157,columnNumber:13},this),b.jsxDEV(G$,{children:b.jsxDEV(cot,{draggedElementId:o},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1161,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1160,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1154,columnNumber:79},this),p!==null&&b.jsxDEV(xie,{onClose:()=>v(null),isOpen:!0,children:[b.jsxDEV(yie,{children:b.jsxDEV("div",{style:{position:"absolute",left:p.x,top:p.y,width:1,height:1,background:"red"},children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1169,columnNumber:15},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1168,columnNumber:13},this),b.jsxDEV(gie,{disabledKeys:r.length===0?["cut","copy"]:[],variant:"flat","aria-label":"Dropdown menu with shortcut",children:[b.jsxDEV(B0,{shortcut:"X",startContent:b.jsxDEV(Lrt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1174,columnNumber:69},this),onClick:()=>{const X=Qe.getState().selectedTexts;if(X.length>0){const ce=X.map(he=>he.text).join(" ");navigator.clipboard.writeText(ce),Qe.getState().setSelectedTexts(X.map(he=>({...he,text:"",isLoading:!1}))),Qe.getState().setSelectedTexts([])}},children:"Cut"},"cut",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1174,columnNumber:17},this),b.jsxDEV(B0,{shortcut:"C",startContent:b.jsxDEV($rt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1183,columnNumber:70},this),onClick:()=>{const X=Qe.getState().selectedTexts;if(X.length>0){const ce=X.map(he=>he.text).join(" ");navigator.clipboard.writeText(ce)}},children:"Copy"},"copy",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1183,columnNumber:17},this),b.jsxDEV(B0,{shortcut:"V",startContent:b.jsxDEV(Frt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1190,columnNumber:71},this),showDivider:r.length>0,onClick:()=>{navigator.clipboard.readText().then(X=>{const ce=Qe.getState().selectedTexts;if(ce.length>0){const he=ce.map(ve=>({...ve,text:X,isLoading:!1}));Qe.getState().setSelectedTexts(he),Qe.getState().setSelectedTexts([])}})},children:"Paste"},"paste",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1190,columnNumber:17},this),b.jsxDEV(B0,{startContent:b.jsxDEV(dot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1200,columnNumber:57},this),onClick:()=>{const X=Qe.getState().selectedTexts;X.length>0&&(Qe.getState().setSelectedTexts(X.map(ce=>({...ce,isLoading:!0}))),new mot(X[0].text).execute().then(ce=>{Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(X.map(he=>({...he,text:ce,isLoading:!1})))}))},children:"Break into sentences"},"break",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1200,columnNumber:17},this),b.jsxDEV(B0,{startContent:b.jsxDEV(fot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1210,columnNumber:57},this),onClick:()=>{const X=Qe.getState().selectedTexts;X.length>0&&(Qe.getState().setSelectedTexts(X.map(ce=>({...ce,isLoading:!0}))),new hot(X[0].text).execute().then(ce=>{Qe.getState().animateNextChanges(),Qe.getState().setSelectedTexts(X.map(he=>({...he,text:ce,isLoading:!1})))}))},children:"Merge into one sentence"},"merge",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1210,columnNumber:17},this)].slice(0,r.length===0?3:5)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1172,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1165,columnNumber:47},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:980,columnNumber:9},this),b.jsxDEV(Qit,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1225,columnNumber:9},this),b.jsxDEV("div",{id:"rightPanel",style:{position:"fixed",right:0,top:60,paddingTop:20,paddingRight:20,paddingBottom:20,display:"flex",flexDirection:"column",gap:20,height:"calc(100vh - 60px)",zIndex:1e3,overflow:"auto"},children:[b.jsxDEV(rot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1228,columnNumber:11},this),b.jsxDEV(iot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1229,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1227,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:979,columnNumber:7},this),b.jsxDEV(By,{isOpen:S.isOpen,onClose:S.onClose,size:"4xl",backdrop:"opaque",style:{zIndex:1e6},classNames:{wrapper:"z-[1000000]",base:"z-[1000001]",backdrop:"z-[1000000]"},children:b.jsxDEV(Ly,{children:[b.jsxDEV(Fy,{children:"Review Result"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1236,columnNumber:11},this),b.jsxDEV($y,{children:b.jsxDEV(nr,{value:y,minRows:20,onChange:()=>{}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1238,columnNumber:13},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1237,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1235,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:1234,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/textoshopReview/TranslationReviewInterface.tsx",lineNumber:912,columnNumber:5},this)}const yot=({project:t,initialChunkIndex:e=0,onClose:n})=>{const{updateChunk:r,createTask:i,tasks:a}=Bs(),[s,o]=R.useState(e),[l,c]=R.useState(!1),[f,h]=R.useState(null),m=t.chunks[s],p=f?a[f]:void 0,v=(p==null?void 0:p.status)==="running";if(R.useEffect(()=>{p&&p.status==="completed"?(h(null),alert("Retranslation completed successfully!")):p&&p.status==="failed"&&(h(null),alert(`Retranslation failed: ${p.error||"Unknown error"}`))},[p]),!m)return b.jsxDEV("div",{children:"No chunk found"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:39,columnNumber:12},void 0);const y=k=>{r(t.id,m.id,{translations:{...m.translations,final:k}}),alert("Changes saved successfully!")},x=k=>{k==="prev"&&s>0?o(s-1):k==="next"&&s<t.chunks.length-1&&o(s+1)},S=()=>{const k=t.chunks.map(T=>T.translations.final||"").filter(T=>T.trim().length>0).join(`

`),P=new Blob([k],{type:"text/plain;charset=utf-8"}),O=URL.createObjectURL(P),A=document.createElement("a");A.href=O,A.download=`${t.name}_reviewed_translation.txt`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(O)},_=async()=>{c(!0);try{const k=new ufe,P=m.text,O=m.translations.final||"";if(!O)throw new Error("No English translation found for this chunk");const A=await k.matchParagraphs(P,O),T=A.koreanParagraphs.join(`

`);r(t.id,m.id,{text:T,translations:{...m.translations,paragraphMatches:A}}),console.log("Paragraph matching completed:",A)}catch(k){console.error("Error running paragraph matching:",k),alert(`Error matching paragraphs: ${k instanceof Error?k.message:"Unknown error"}`)}finally{c(!1)}},N=()=>{if(!t.glossary){alert("Glossary is required for retranslation");return}if(v)return;const k=i({type:"retranslate",projectId:t.id,chunkId:m.id});h(k),yg.runTask(k).catch(P=>{console.error("Error running retranslate task:",P),alert(`Retranslation failed: ${P instanceof Error?P.message:"Unknown error"}`),h(null)})};return b.jsxDEV("div",{style:{position:"relative",width:"100%",height:"100%"},children:[n&&b.jsxDEV("div",{style:{position:"absolute",top:8,right:8,zIndex:1e4,display:"flex",gap:8},children:[b.jsxDEV(et,{color:"warning",variant:"flat",startContent:b.jsxDEV(GKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:155,columnNumber:27},void 0),onPress:_,isLoading:l,isDisabled:l,children:"Match Paragraphs"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:152,columnNumber:11},void 0),b.jsxDEV(et,{color:"secondary",variant:"flat",startContent:b.jsxDEV(d5,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:165,columnNumber:27},void 0),onPress:S,children:"Download All"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:162,columnNumber:11},void 0),b.jsxDEV(et,{color:"default",variant:"flat",isIconOnly:!0,onPress:n,children:b.jsxDEV(ZKe,{size:20},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:176,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:170,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:151,columnNumber:9},void 0),b.jsxDEV(vot,{projectId:t.id,chunkId:m.id,koreanText:m.text,englishText:m.translations.final||"",paragraphMatches:m.translations.paragraphMatches,onSave:y,onNavigate:x,onRetranslate:N,isRetranslating:v,canNavigatePrev:s>0,canNavigateNext:s<t.chunks.length-1,chunkIndex:s,totalChunks:t.chunks.length},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:181,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationReview.tsx",lineNumber:148,columnNumber:5},void 0)},bot=({project:t})=>{const{selectProject:e,createTask:n,updateTask:r,tasks:i,updateProject:a}=Bs(),[s,o]=R.useState(),[l,c]=R.useState("overview"),[f,h]=R.useState(""),[m,p]=R.useState(!1),v=R.useRef(null),{isOpen:y,onOpen:x,onClose:S}=QE(),{isOpen:_,onOpen:N,onClose:k}=QE(),P=s?i[s]:void 0;R.useEffect(()=>{t.glossary&&y&&h(JSON.stringify(t.glossary,null,2))},[t.glossary,y]),R.useEffect(()=>{if(P&&P.status==="running"){const F=setInterval(()=>{},1e3);return()=>clearInterval(F)}},[P]);const O=()=>{const F=n({type:"glossary",projectId:t.id});o(F),yg.runTask(F)},A=()=>{if(!t.glossary){alert("Please generate glossary first!");return}const F=n({type:"translation",projectId:t.id});o(F),yg.runTask(F)},T=()=>{s&&(yg.cancelTask(s),o(void 0))},L=()=>{const F=t.chunks.map(oe=>oe.translations.final).filter(Boolean).join(`

`),J=new Blob([F],{type:"text/plain"}),Z=URL.createObjectURL(J),G=document.createElement("a");G.href=Z,G.download=`${t.name}_translation.txt`,G.click(),URL.revokeObjectURL(Z)},B=()=>{if(!t.glossary)return;const F=new Blob([JSON.stringify(t.glossary,null,2)],{type:"application/json"}),J=URL.createObjectURL(F),Z=document.createElement("a");Z.href=J,Z.download=`${t.name}_glossary.json`,Z.click(),URL.revokeObjectURL(J)},W=F=>{var G;const J=(G=F.target.files)==null?void 0:G[0];if(!J)return;const Z=new FileReader;Z.onload=oe=>{var te;const ae=(te=oe.target)==null?void 0:te.result;h(ae)},Z.readAsText(J)},Y=()=>{try{const F=JSON.parse(f);a(t.id,{glossary:F,status:"glossary_completed"}),k(),h("")}catch(F){alert("Invalid JSON format. Please check your glossary file."),console.error("Failed to parse glossary:",F)}},V=()=>{try{const F=JSON.parse(f);a(t.id,{glossary:F}),S()}catch(F){alert("Invalid JSON format. Please check your glossary."),console.error("Failed to parse glossary:",F)}},I=()=>{if(!t.glossary)return null;const F=t.glossary,J=ae=>ae?Array.isArray(ae)?ae:Object.entries(ae).map(([te,re])=>({key:te,...re})):[],Z=J(F.characters),G=J(F.terms),oe=J(F.places||F.locations);return b.jsxDEV("div",{className:"space-y-4",children:[Z.length>0&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{className:"text-lg font-semibold",children:["Characters (",Z.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:178,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:177,columnNumber:13},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[Z.slice(0,10).map((ae,te)=>b.jsxDEV("div",{className:"border-b pb-2",children:[b.jsxDEV("div",{className:"flex justify-between",children:[b.jsxDEV("span",{className:"font-medium",children:ae.korean_name||ae.name||ae.key},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:185,columnNumber:23},void 0),b.jsxDEV("span",{className:"text-gray-600",children:ae.english_name||ae.english||ae.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:188,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:184,columnNumber:21},void 0),ae.description&&b.jsxDEV("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:ae.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:193,columnNumber:23},void 0)]},te,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:183,columnNumber:19},void 0)),Z.length>10&&b.jsxDEV("p",{className:"text-sm text-gray-500 text-center pt-2",children:["... and ",Z.length-10," more"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:200,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:181,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:180,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:176,columnNumber:11},void 0),G.length>0&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{className:"text-lg font-semibold",children:["Terms (",G.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:213,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:212,columnNumber:13},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[G.slice(0,10).map((ae,te)=>b.jsxDEV("div",{className:"border-b pb-2",children:[b.jsxDEV("div",{className:"flex justify-between",children:[b.jsxDEV("span",{className:"font-medium",children:ae.original||ae.korean_name||ae.key},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:220,columnNumber:23},void 0),b.jsxDEV("span",{className:"text-gray-600",children:ae.translation||ae.english},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:223,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:219,columnNumber:21},void 0),ae.description&&b.jsxDEV("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:ae.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:228,columnNumber:23},void 0)]},te,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:218,columnNumber:19},void 0)),G.length>10&&b.jsxDEV("p",{className:"text-sm text-gray-500 text-center pt-2",children:["... and ",G.length-10," more"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:235,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:216,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:215,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:211,columnNumber:11},void 0),oe.length>0&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{className:"text-lg font-semibold",children:["Places (",oe.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:248,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:247,columnNumber:13},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[oe.slice(0,10).map((ae,te)=>b.jsxDEV("div",{className:"border-b pb-2",children:[b.jsxDEV("div",{className:"flex justify-between",children:[b.jsxDEV("span",{className:"font-medium",children:ae.korean_name||ae.name||ae.key},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:255,columnNumber:23},void 0),b.jsxDEV("span",{className:"text-gray-600",children:ae.english_name||ae.english||ae.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:258,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:254,columnNumber:21},void 0),ae.description&&b.jsxDEV("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:ae.description},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:263,columnNumber:23},void 0)]},te,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:253,columnNumber:19},void 0)),oe.length>10&&b.jsxDEV("p",{className:"text-sm text-gray-500 text-center pt-2",children:["... and ",oe.length-10," more"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:270,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:251,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:250,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:246,columnNumber:11},void 0),F.events&&F.events.length>0&&b.jsxDEV(wn,{children:b.jsxDEV(Kn,{children:b.jsxDEV("h3",{className:"text-lg font-semibold",children:["Events (",F.events.length,")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:283,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:282,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:281,columnNumber:11},void 0),F.style_guide&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{className:"text-lg font-semibold",children:"Style Guide"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:291,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:290,columnNumber:13},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"space-y-2 text-sm",children:[F.style_guide.genre&&b.jsxDEV("div",{children:[b.jsxDEV("span",{className:"font-medium",children:"Genre: "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:297,columnNumber:21},void 0),F.style_guide.genre]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:296,columnNumber:19},void 0),F.style_guide.tone&&b.jsxDEV("div",{children:[b.jsxDEV("span",{className:"font-medium",children:"Tone: "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:303,columnNumber:21},void 0),F.style_guide.tone]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:302,columnNumber:19},void 0),F.style_guide.content_rating&&b.jsxDEV("div",{children:[b.jsxDEV("span",{className:"font-medium",children:"Content Rating: "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:309,columnNumber:21},void 0),F.style_guide.content_rating]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:308,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:294,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:293,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:289,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:173,columnNumber:7},void 0)},H=t.chunks.filter(F=>F.status==="completed").length,q=t.chunks.length;return m?b.jsxDEV("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:"#F2EEF0"},children:b.jsxDEV(yot,{project:t,onClose:()=>p(!1)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:328,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:327,columnNumber:7},void 0):b.jsxDEV(b.Fragment,{children:[b.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:b.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[b.jsxDEV("div",{className:"mb-6",children:b.jsxDEV(et,{variant:"light",startContent:b.jsxDEV(BKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:343,columnNumber:27},void 0),onPress:()=>e(void 0),children:"Back to Projects"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:341,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:340,columnNumber:9},void 0),b.jsxDEV("div",{className:"mb-8",children:[b.jsxDEV("h1",{className:"text-3xl font-bold mb-2",children:t.name},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:351,columnNumber:11},void 0),b.jsxDEV("div",{className:"flex gap-2 items-center",children:[b.jsxDEV(Fn,{size:"sm",variant:"flat",children:t.type==="glossary"?"Glossary":"Translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:353,columnNumber:13},void 0),b.jsxDEV(Fn,{size:"sm",variant:"flat",children:t.language==="ja"?"Japanese":"English"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:356,columnNumber:13},void 0),b.jsxDEV(Fn,{size:"sm",color:t.status==="translation_completed"?"success":"primary",children:t.status},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:359,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:352,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:350,columnNumber:9},void 0),b.jsxDEV(qN,{selectedKey:l,onSelectionChange:F=>c(F),children:[b.jsxDEV(du,{title:"Overview",children:b.jsxDEV("div",{className:"pt-4 space-y-6",children:[b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{className:"text-lg font-semibold",children:"Translation Progress"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:374,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:373,columnNumber:17},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"space-y-4",children:[b.jsxDEV("div",{children:[b.jsxDEV("div",{className:"flex justify-between mb-2",children:[b.jsxDEV("span",{children:"Overall Progress"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:380,columnNumber:25},void 0),b.jsxDEV("span",{children:[Math.round(t.translation_progress*100),"%"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:381,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:379,columnNumber:23},void 0),b.jsxDEV(ZE,{value:t.translation_progress*100,color:t.translation_progress===1?"success":"primary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:383,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:378,columnNumber:21},void 0),b.jsxDEV("div",{className:"grid grid-cols-3 gap-4 text-center",children:[b.jsxDEV("div",{children:[b.jsxDEV("p",{className:"text-2xl font-bold",children:q},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:391,columnNumber:25},void 0),b.jsxDEV("p",{className:"text-sm text-gray-600",children:"Total Chunks"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:392,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:390,columnNumber:23},void 0),b.jsxDEV("div",{children:[b.jsxDEV("p",{className:"text-2xl font-bold text-green-600",children:H},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:395,columnNumber:25},void 0),b.jsxDEV("p",{className:"text-sm text-gray-600",children:"Completed"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:396,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:394,columnNumber:23},void 0),b.jsxDEV("div",{children:[b.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:q-H},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:399,columnNumber:25},void 0),b.jsxDEV("p",{className:"text-sm text-gray-600",children:"Remaining"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:402,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:398,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:389,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:377,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:376,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:372,columnNumber:15},void 0),P&&b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{className:"text-lg font-semibold",children:"Current Task"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:413,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:412,columnNumber:19},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"space-y-3",children:[b.jsxDEV("div",{className:"flex justify-between items-center",children:[b.jsxDEV("span",{className:"font-medium",children:P.type},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:418,columnNumber:25},void 0),b.jsxDEV(Fn,{size:"sm",color:P.status==="completed"?"success":P.status==="failed"?"danger":"warning",children:P.status},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:419,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:417,columnNumber:23},void 0),P.status==="running"&&b.jsxDEV("div",{children:[b.jsxDEV("div",{className:"flex justify-between mb-2",children:[b.jsxDEV("span",{children:P.message},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:436,columnNumber:29},void 0),b.jsxDEV("span",{children:[Math.round(P.progress*100),"%"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:437,columnNumber:29},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:435,columnNumber:27},void 0),b.jsxDEV(ZE,{value:P.progress*100},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:439,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:434,columnNumber:25},void 0),P.error&&b.jsxDEV("div",{className:"text-red-600 text-sm",children:P.error},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:444,columnNumber:25},void 0),P.status==="running"&&b.jsxDEV(et,{color:"danger",variant:"flat",startContent:b.jsxDEV(YKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:451,columnNumber:41},void 0),onPress:T,children:"Cancel Task"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:448,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:416,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:415,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:411,columnNumber:17},void 0),b.jsxDEV(wn,{children:[b.jsxDEV(Kn,{children:b.jsxDEV("h3",{className:"text-lg font-semibold",children:"Actions"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:465,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:464,columnNumber:17},void 0),b.jsxDEV(vn,{children:b.jsxDEV("div",{className:"flex gap-3",children:[!t.glossary&&b.jsxDEV(et,{color:"primary",startContent:b.jsxDEV(pD,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:472,columnNumber:39},void 0),onPress:O,isDisabled:(P==null?void 0:P.status)==="running",children:"Generate Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:470,columnNumber:23},void 0),t.glossary&&t.status!=="translation_completed"&&b.jsxDEV(et,{color:"success",startContent:b.jsxDEV(pD,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:483,columnNumber:39},void 0),onPress:A,isDisabled:(P==null?void 0:P.status)==="running",children:"Start Translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:481,columnNumber:23},void 0),t.translation_progress>0&&b.jsxDEV(et,{color:"secondary",startContent:b.jsxDEV(d5,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:494,columnNumber:39},void 0),onPress:L,children:"Download Translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:492,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:468,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:467,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:463,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:370,columnNumber:13},void 0)},"overview",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:369,columnNumber:11},void 0),b.jsxDEV(du,{title:"Glossary",children:b.jsxDEV("div",{className:"pt-4",children:t.glossary?b.jsxDEV("div",{className:"space-y-4",children:[b.jsxDEV("div",{className:"flex gap-3",children:[b.jsxDEV(et,{color:"primary",startContent:b.jsxDEV(d5,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:514,columnNumber:37},void 0),onPress:B,children:"Download Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:512,columnNumber:21},void 0),b.jsxDEV(et,{color:"secondary",startContent:b.jsxDEV(WKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:521,columnNumber:37},void 0),onPress:()=>{h(JSON.stringify(t.glossary,null,2)),x()},children:"Edit Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:519,columnNumber:21},void 0),b.jsxDEV(et,{variant:"bordered",startContent:b.jsxDEV(OE,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:531,columnNumber:37},void 0),onPress:()=>{h(""),N()},children:"Replace Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:529,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:511,columnNumber:19},void 0),I()]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:509,columnNumber:17},void 0):b.jsxDEV("div",{className:"text-center py-12",children:[b.jsxDEV("p",{className:"text-gray-500 mb-4",children:"No glossary available"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:546,columnNumber:19},void 0),b.jsxDEV("div",{className:"flex gap-3 justify-center",children:[b.jsxDEV(et,{color:"primary",startContent:b.jsxDEV(pD,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:550,columnNumber:37},void 0),onPress:O,isDisabled:(P==null?void 0:P.status)==="running",children:"Generate Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:548,columnNumber:21},void 0),b.jsxDEV(et,{variant:"bordered",startContent:b.jsxDEV(OE,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:558,columnNumber:37},void 0),onPress:()=>{h(""),N()},children:"Upload Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:556,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:547,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:545,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:507,columnNumber:13},void 0)},"glossary",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:506,columnNumber:11},void 0),b.jsxDEV(du,{title:"Chunks",children:b.jsxDEV("div",{className:"pt-4",children:b.jsxDEV(Cne,{children:t.chunks.map((F,J)=>b.jsxDEV(Dne,{title:b.jsxDEV("div",{className:"flex justify-between items-center w-full",children:[b.jsxDEV("span",{children:["Chunk ",J+1]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:580,columnNumber:25},void 0),b.jsxDEV(Fn,{size:"sm",color:F.status==="completed"?"success":F.status==="processing"?"warning":"default",children:F.status},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:581,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:579,columnNumber:23},void 0),children:b.jsxDEV("div",{className:"space-y-4",children:[b.jsxDEV("div",{children:[b.jsxDEV("h4",{className:"font-semibold mb-2",children:"Original (Korean)"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:598,columnNumber:25},void 0),b.jsxDEV("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded max-h-40 overflow-y-auto",children:F.text},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:599,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:597,columnNumber:23},void 0),F.translations.final&&b.jsxDEV("div",{children:[b.jsxDEV("h4",{className:"font-semibold mb-2",children:["Translation (",t.language==="ja"?"Japanese":"English",")"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:606,columnNumber:27},void 0),b.jsxDEV("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded max-h-40 overflow-y-auto",children:F.translations.final},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:609,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:605,columnNumber:25},void 0),F.translations.qualityScore&&b.jsxDEV("div",{children:[b.jsxDEV("span",{className:"font-semibold",children:"Quality Score: "},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:617,columnNumber:27},void 0),b.jsxDEV(Fn,{size:"sm",color:F.translations.qualityScore>=80?"success":F.translations.qualityScore>=60?"warning":"danger",children:F.translations.qualityScore},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:618,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:616,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:596,columnNumber:21},void 0)},F.id,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:576,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:574,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:573,columnNumber:13},void 0)},"chunks",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:572,columnNumber:11},void 0),b.jsxDEV(du,{title:"Review & Edit",isDisabled:t.translation_progress===0,children:b.jsxDEV("div",{className:"pt-4",children:t.translation_progress>0?b.jsxDEV("div",{className:"text-center py-12",children:[b.jsxDEV("p",{className:"text-lg font-semibold mb-4",children:"Review & Edit Translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:643,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Use AI-powered tools to review and refine your translations with advanced editing features."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:644,columnNumber:19},void 0),b.jsxDEV(et,{color:"primary",size:"lg",startContent:b.jsxDEV(HKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:650,columnNumber:35},void 0),onPress:()=>p(!0),children:"Open Full Screen Editor"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:647,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:642,columnNumber:17},void 0):b.jsxDEV("div",{className:"text-center py-12",children:[b.jsxDEV("p",{className:"text-gray-500 mb-4",children:"Translation must be completed before review"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:658,columnNumber:19},void 0),b.jsxDEV(et,{color:"primary",startContent:b.jsxDEV(pD,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:661,columnNumber:35},void 0),onPress:A,isDisabled:!t.glossary||(P==null?void 0:P.status)==="running",children:"Start Translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:659,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:657,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:640,columnNumber:13},void 0)},"review",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:639,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:368,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:339,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:338,columnNumber:7},void 0),b.jsxDEV(By,{isOpen:_,onClose:k,size:"3xl",scrollBehavior:"inside",children:b.jsxDEV(Ly,{children:[b.jsxDEV(Fy,{children:t.glossary?"Replace Glossary":"Upload Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:683,columnNumber:11},void 0),b.jsxDEV($y,{children:b.jsxDEV("div",{className:"space-y-4",children:[b.jsxDEV("div",{children:[b.jsxDEV("p",{className:"text-sm text-gray-600 mb-2",children:"Upload a JSON file or paste your glossary JSON below:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:689,columnNumber:17},void 0),b.jsxDEV("input",{ref:v,type:"file",accept:".json",onChange:W,className:"hidden"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:692,columnNumber:17},void 0),b.jsxDEV(et,{variant:"bordered",startContent:b.jsxDEV(OE,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:701,columnNumber:33},void 0),onPress:()=>{var F;return(F=v.current)==null?void 0:F.click()},children:"Choose File"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:699,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:688,columnNumber:15},void 0),b.jsxDEV(nr,{label:"Glossary JSON",placeholder:'{"characters": [...], "terms": [...], ...}',value:f,onValueChange:h,minRows:20,maxRows:30,classNames:{input:"font-mono text-sm"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:708,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:687,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:686,columnNumber:11},void 0),b.jsxDEV(Rw,{children:[b.jsxDEV(et,{variant:"light",onPress:k,children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:722,columnNumber:13},void 0),b.jsxDEV(et,{color:"primary",onPress:Y,isDisabled:!f.trim(),children:t.glossary?"Replace":"Upload"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:725,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:721,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:682,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:676,columnNumber:7},void 0),b.jsxDEV(By,{isOpen:y,onClose:S,size:"3xl",scrollBehavior:"inside",children:b.jsxDEV(Ly,{children:[b.jsxDEV(Fy,{children:"Edit Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:744,columnNumber:11},void 0),b.jsxDEV($y,{children:b.jsxDEV("div",{className:"space-y-4",children:[b.jsxDEV("p",{className:"text-sm text-gray-600",children:"Edit your glossary JSON. Changes will be saved to the project."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:747,columnNumber:15},void 0),b.jsxDEV(nr,{label:"Glossary JSON",value:f,onValueChange:h,minRows:25,maxRows:35,classNames:{input:"font-mono text-sm"}},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:751,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:746,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:745,columnNumber:11},void 0),b.jsxDEV(Rw,{children:[b.jsxDEV(et,{variant:"light",onPress:S,children:"Cancel"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:764,columnNumber:13},void 0),b.jsxDEV(et,{color:"primary",onPress:V,isDisabled:!f.trim(),children:"Save Changes"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:767,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:763,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:743,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:737,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/ProjectDetail.tsx",lineNumber:337,columnNumber:5},void 0)},wot=()=>{const[t,e]=R.useState(!1),[n,r]=R.useState("translation"),[i,a]=R.useState(!0),[s,o]=R.useState(),[l,c]=R.useState(0);let f=[],h;try{const S=Bs();f=S.projects||[],h=S.selectedProjectId}catch(S){console.error("Store error:",S),o(S instanceof Error?S.message:"Failed to load projects")}if(R.useEffect(()=>{const S=setTimeout(()=>a(!1),100);return()=>clearTimeout(S)},[]),i)return b.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:b.jsxDEV("div",{className:"text-center",children:[b.jsxDEV(L$,{size:"lg"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:39,columnNumber:11},void 0),b.jsxDEV("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading Translation System..."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:40,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:38,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:37,columnNumber:7},void 0);if(s)return b.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-6",children:b.jsxDEV(wn,{className:"max-w-md",children:b.jsxDEV(vn,{children:[b.jsxDEV("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Error Loading Translation System"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:51,columnNumber:13},void 0),b.jsxDEV("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:s},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:52,columnNumber:13},void 0),b.jsxDEV(et,{color:"primary",onPress:()=>window.location.reload(),children:"Reload Page"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:53,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:50,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:49,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:48,columnNumber:7},void 0);const m=f.find(S=>S.id===h),p=f.filter(S=>S.type==="translation"),v=localStorage.getItem("vsw.projects")||"[]",x=JSON.parse(v).filter(S=>S.glossary&&(!S.type||S.type==="glossary"));return m?b.jsxDEV(bot,{project:m},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:76,columnNumber:12},void 0):b.jsxDEV(b.Fragment,{children:b.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:b.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[b.jsxDEV("div",{className:"flex justify-between items-center mb-8",children:[b.jsxDEV("div",{children:[b.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Translation System"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:85,columnNumber:13},void 0),b.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage glossary building and translation projects with AI"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:88,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:84,columnNumber:11},void 0),b.jsxDEV(et,{color:"primary",size:"lg",onPress:()=>e(!0),children:"+ New Project"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:93,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:83,columnNumber:9},void 0),b.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[b.jsxDEV(wn,{className:"bg-green-50 dark:bg-green-900/20",children:b.jsxDEV(vn,{children:[b.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Translation Projects"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:106,columnNumber:15},void 0),b.jsxDEV("p",{className:"text-3xl font-bold text-green-600",children:p.length},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:107,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:105,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:104,columnNumber:11},void 0),b.jsxDEV(wn,{className:"bg-orange-50 dark:bg-orange-900/20",children:b.jsxDEV(vn,{children:[b.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Tasks"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:113,columnNumber:15},void 0),b.jsxDEV("p",{className:"text-3xl font-bold text-orange-600",children:f.filter(S=>S.status==="glossary_running"||S.status==="translating").length},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:114,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:112,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:111,columnNumber:11},void 0),b.jsxDEV(wn,{className:"bg-purple-50 dark:bg-purple-900/20 cursor-pointer hover:shadow-lg transition-shadow",isPressable:!0,onPress:()=>r("glossary"),children:b.jsxDEV(vn,{children:[b.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Glossary Projects"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:129,columnNumber:15},void 0),b.jsxDEV("p",{className:"text-3xl font-bold text-purple-600",children:x.length},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:130,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:128,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:123,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:103,columnNumber:9},void 0),b.jsxDEV(qN,{selectedKey:n,onSelectionChange:S=>{r(S),S==="glossary"&&c(_=>_+1)},size:"lg",className:"mb-6",children:[b.jsxDEV(du,{title:b.jsxDEV("div",{className:"flex items-center gap-2",children:[b.jsxDEV("span",{children:" Translation Projects"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:151,columnNumber:17},void 0),b.jsxDEV("span",{className:"text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 px-2 py-0.5 rounded-full",children:p.length},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:152,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:150,columnNumber:15},void 0),children:b.jsxDEV("div",{className:"pt-4",children:[b.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[b.jsxDEV("div",{children:[b.jsxDEV("h2",{className:"text-xl font-semibold",children:"Translation Projects"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:161,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Full translation pipeline with glossary-based processing"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:162,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:160,columnNumber:17},void 0),b.jsxDEV(et,{color:"success",variant:"flat",onPress:()=>{e(!0)},children:"+ New Translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:166,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:159,columnNumber:15},void 0),p.length===0?b.jsxDEV(wn,{className:"bg-white dark:bg-gray-800",children:b.jsxDEV(vn,{className:"text-center py-12",children:[b.jsxDEV("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:"No translation projects yet"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:180,columnNumber:21},void 0),b.jsxDEV("p",{className:"text-sm text-gray-400 mb-6",children:"Translation projects use a multi-stage pipeline: Translation  Enhancement  Quality Check  Proofreading  Layout"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:183,columnNumber:21},void 0),b.jsxDEV(et,{color:"success",onPress:()=>e(!0),children:"Create First Translation Project"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:186,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:179,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:178,columnNumber:17},void 0):b.jsxDEV(Qrt,{filterType:"translation"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:195,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:158,columnNumber:13},void 0)},"translation",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:147,columnNumber:11},void 0),b.jsxDEV(du,{title:b.jsxDEV("div",{className:"flex items-center gap-2",children:[b.jsxDEV("span",{children:" Glossary Builder"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:204,columnNumber:17},void 0),b.jsxDEV("span",{className:"text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded-full",children:x.length},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:205,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:203,columnNumber:15},void 0),children:b.jsxDEV("div",{className:"pt-4",children:[b.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[b.jsxDEV("div",{children:[b.jsxDEV("h2",{className:"text-xl font-semibold",children:"Glossary Builder Projects"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:214,columnNumber:19},void 0),b.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Interactive analysis with visual graphs, timeline, and JSON export"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:215,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:213,columnNumber:17},void 0),b.jsxDEV(et,{color:"secondary",variant:"flat",onPress:()=>e(!0),children:"+ New Glossary"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:219,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:212,columnNumber:15},void 0),x.length===0?b.jsxDEV(wn,{className:"bg-white dark:bg-gray-800",children:b.jsxDEV(vn,{className:"text-center py-12",children:[b.jsxDEV("div",{className:"text-6xl mb-4",children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:231,columnNumber:21},void 0),b.jsxDEV("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:"No glossary projects yet"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:232,columnNumber:21},void 0),b.jsxDEV("p",{className:"text-sm text-gray-400 mb-6 max-w-2xl mx-auto",children:"Create an interactive glossary project to analyze your story with visual graphs, character relationships, timeline view, and export to JSON for translation projects."},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:235,columnNumber:21},void 0),b.jsxDEV("div",{className:"max-w-2xl mx-auto mb-6 text-left",children:[b.jsxDEV("h3",{className:"font-semibold mb-3",children:"Features:"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:240,columnNumber:23},void 0),b.jsxDEV("ul",{className:"text-sm space-y-1 text-gray-600 dark:text-gray-400",children:[b.jsxDEV("li",{children:" Visual Graph View - Interactive character relationships and event flow"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:242,columnNumber:25},void 0),b.jsxDEV("li",{children:" Real-time Editing - Click any element to edit details"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:243,columnNumber:25},void 0),b.jsxDEV("li",{children:" AI-Powered Extraction - Automatic analysis with Google Gemini"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:244,columnNumber:25},void 0),b.jsxDEV("li",{children:" Timeline View - Chronological event visualization"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:245,columnNumber:25},void 0),b.jsxDEV("li",{children:" JSON Export - Download for translation projects"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:246,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:241,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:239,columnNumber:21},void 0),b.jsxDEV(et,{color:"secondary",onPress:()=>e(!0),children:"Create First Glossary Project"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:249,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:230,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:229,columnNumber:17},void 0):b.jsxDEV(eit,{},l,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:258,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:211,columnNumber:13},void 0)},"glossary",!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:200,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:136,columnNumber:9},void 0),t&&b.jsxDEV(rit,{isOpen:t,onClose:()=>{e(!1),n==="glossary"&&c(S=>S+1)},defaultType:n},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:265,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:82,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:81,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/TranslationMain.tsx",lineNumber:80,columnNumber:5},void 0)},xot=()=>{const[t,e]=R.useState(!1),n=Bs(c=>Object.values(c.tasks)),r=Bs(c=>c.projects);Bs(c=>c.updateTask);const i=n.filter(c=>c.status==="running"||c.status==="pending"),a=c=>{const f=r.find(h=>h.id===c);return(f==null?void 0:f.name)||"Unknown Project"},s=c=>{switch(c){case"running":return"primary";case"completed":return"success";case"failed":return"danger";case"cancelled":return"warning";case"pending":return"default";default:return"default"}},o=c=>{switch(c){case"glossary":return" Glossary";case"glossary_extraction":return" Glossary Build";case"translation":return" Translation";case"retranslate":return" Retranslate";case"review":return" Review";default:return c}},l=c=>{confirm("Are you sure you want to cancel this task?")&&yg.cancelTask(c)};return i.length===0?null:b.jsxDEV("div",{className:`fixed right-0 top-0 h-screen transition-all duration-300 ease-in-out ${t?"w-16":"w-96"}`,style:{zIndex:9998},children:b.jsxDEV("div",{className:"h-full bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800 shadow-2xl flex flex-col",children:[b.jsxDEV("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800 flex justify-between items-center bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[!t&&b.jsxDEV("div",{children:[b.jsxDEV("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[b.jsxDEV("span",{className:"animate-pulse",children:""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:86,columnNumber:17},void 0),"Active Tasks"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:85,columnNumber:15},void 0),b.jsxDEV("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[i.length," task",i.length>1?"s":""," running"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:89,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:84,columnNumber:13},void 0),b.jsxDEV(et,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>e(!t),className:"hover:bg-white/50 dark:hover:bg-gray-800/50",children:t?"":""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:94,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:82,columnNumber:9},void 0),!t&&b.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:i.map(c=>b.jsxDEV(wn,{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsxDEV(Kn,{className:"pb-2",children:b.jsxDEV("div",{className:"flex-1",children:[b.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[b.jsxDEV("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:o(c.type)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:116,columnNumber:23},void 0),b.jsxDEV(Fn,{size:"sm",color:s(c.status),variant:"flat",children:c.status},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:119,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:115,columnNumber:21},void 0),b.jsxDEV("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a(c.projectId)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:127,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:114,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:113,columnNumber:17},void 0),b.jsxDEV(vn,{className:"pt-2",children:b.jsxDEV("div",{className:"space-y-2",children:[b.jsxDEV("div",{className:"flex items-center gap-2",children:[b.jsxDEV(ZE,{value:c.progress*100,color:c.status==="running"?"primary":"default",size:"sm",className:"flex-1"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:135,columnNumber:23},void 0),b.jsxDEV("span",{className:"text-xs font-mono text-gray-600 dark:text-gray-400 min-w-[3rem] text-right",children:[Math.round(c.progress*100),"%"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:141,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:134,columnNumber:21},void 0),b.jsxDEV("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:c.message},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:145,columnNumber:21},void 0),c.error&&b.jsxDEV("p",{className:"text-xs text-red-600 dark:text-red-400 line-clamp-2",children:[" ",c.error]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:149,columnNumber:23},void 0),c.status==="running"&&b.jsxDEV(et,{size:"sm",color:"danger",variant:"flat",fullWidth:!0,onPress:()=>l(c.id),children:" Cancel Task"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:154,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:133,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:132,columnNumber:17},void 0)]},c.id,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:109,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:107,columnNumber:11},void 0),t&&b.jsxDEV("div",{className:"flex-1 flex flex-col items-center justify-start pt-6 p-2 space-y-4",children:[i.slice(0,5).map(c=>b.jsxDEV(so,{content:b.jsxDEV("div",{className:"p-2",children:[b.jsxDEV("div",{className:"font-semibold",children:o(c.type)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:179,columnNumber:21},void 0),b.jsxDEV("div",{className:"text-xs text-gray-400",children:a(c.projectId)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:180,columnNumber:21},void 0),b.jsxDEV("div",{className:"text-xs mt-1",children:[Math.round(c.progress*100),"%"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:181,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:178,columnNumber:19},void 0),placement:"left",children:b.jsxDEV("div",{className:"relative cursor-pointer",children:[b.jsxDEV("div",{className:`w-12 h-12 rounded-full border-4 flex items-center justify-center ${c.status==="running"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 animate-pulse":"border-gray-300 bg-gray-50"}`,children:b.jsxDEV("span",{className:"text-lg",children:c.type==="glossary"?"":c.type==="glossary_extraction"?"":c.type==="retranslate"?"":""},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:194,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:187,columnNumber:19},void 0),b.jsxDEV("svg",{className:"absolute top-0 left-0 w-12 h-12 -rotate-90",viewBox:"0 0 48 48",children:b.jsxDEV("circle",{cx:"24",cy:"24",r:"20",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeDasharray:`${c.progress*125.6} 125.6`,className:"text-blue-500"},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:205,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:201,columnNumber:19},void 0),b.jsxDEV("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-white dark:bg-gray-900 rounded-full border-2 border-gray-200 dark:border-gray-700 flex items-center justify-center",children:b.jsxDEV("span",{className:"text-[10px] font-bold text-gray-700 dark:text-gray-300",children:Math.round(c.progress*100)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:218,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:217,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:186,columnNumber:17},void 0)},c.id,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:175,columnNumber:15},void 0)),i.length>5&&b.jsxDEV("div",{className:"text-xs text-gray-500 font-semibold",children:["+",i.length-5," more"]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:226,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:173,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:80,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/view/translation/GlobalTaskMonitor.tsx",lineNumber:74,columnNumber:5},void 0)};function Sot(){const t=iRe([{path:"/",element:b.jsxDEV(wot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:23,columnNumber:16},this)},{path:"free-form",loader:()=>(br.getState().setIsDataSaved(!1),null),element:b.jsxDEV(Bce,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:31,columnNumber:16},this)},{path:"study",element:b.jsxDEV(FKe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:35,columnNumber:16},this)},{path:"baseline",element:b.jsxDEV(yHe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:39,columnNumber:16},this)},{path:"glossary-builder",element:b.jsxDEV(WYe,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:43,columnNumber:16},this)},{path:"glossary-view",element:b.jsxDEV(Mrt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:47,columnNumber:16},this)},{path:"launcher",element:b.jsxDEV(qrt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:51,columnNumber:16},this)},{path:"project-manager",element:b.jsxDEV(Ort,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:55,columnNumber:16},this)},{path:"glossary-uploader",element:b.jsxDEV(Drt,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:59,columnNumber:16},this)}]);return b.jsxDEV(b.Fragment,{children:b.jsxDEV(R.StrictMode,{children:b.jsxDEV(K_e,{children:[b.jsxDEV(dRe,{router:t},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:71,columnNumber:9},this),b.jsxDEV(xot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:72,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:70,columnNumber:9},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:69,columnNumber:7},this)},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/App.tsx",lineNumber:68,columnNumber:5},this)}qV.createRoot(document.getElementById("root")).render(b.jsxDEV(Sot,{},void 0,!1,{fileName:"/Users/hwan/VisualStoryWriting/src/main.tsx",lineNumber:6,columnNumber:5},void 0));
